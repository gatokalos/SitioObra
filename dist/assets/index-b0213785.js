var gF=Object.defineProperty;var yF=(n,e,t)=>e in n?gF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var U=(n,e,t)=>(yF(n,typeof e!="symbol"?e+"":e,t),t),N1=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var l=(n,e,t)=>(N1(n,e,"read from private field"),t?t.call(n):e.get(n)),b=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},w=(n,e,t,s)=>(N1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);var Rt=(n,e,t,s)=>({set _(r){w(n,e,r,t)},get _(){return l(n,e,s)}}),C=(n,e,t)=>(N1(n,e,"access private method"),t);function kR(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var wn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function vF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var PR={exports:{}},Iw={},RR={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H0=Symbol.for("react.element"),bF=Symbol.for("react.portal"),xF=Symbol.for("react.fragment"),wF=Symbol.for("react.strict_mode"),SF=Symbol.for("react.profiler"),AF=Symbol.for("react.provider"),_F=Symbol.for("react.context"),EF=Symbol.for("react.forward_ref"),CF=Symbol.for("react.suspense"),TF=Symbol.for("react.memo"),kF=Symbol.for("react.lazy"),KT=Symbol.iterator;function PF(n){return n===null||typeof n!="object"?null:(n=KT&&n[KT]||n["@@iterator"],typeof n=="function"?n:null)}var NR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},MR=Object.assign,jR={};function bf(n,e,t){this.props=n,this.context=e,this.refs=jR,this.updater=t||NR}bf.prototype.isReactComponent={};bf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};bf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function LR(){}LR.prototype=bf.prototype;function FE(n,e,t){this.props=n,this.context=e,this.refs=jR,this.updater=t||NR}var BE=FE.prototype=new LR;BE.constructor=FE;MR(BE,bf.prototype);BE.isPureReactComponent=!0;var XT=Array.isArray,DR=Object.prototype.hasOwnProperty,$E={current:null},IR={key:!0,ref:!0,__self:!0,__source:!0};function OR(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)DR.call(e,s)&&!IR.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];r.children=c}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:H0,type:n,key:i,ref:o,props:r,_owner:$E.current}}function RF(n,e){return{$$typeof:H0,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function VE(n){return typeof n=="object"&&n!==null&&n.$$typeof===H0}function NF(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var YT=/\/+/g;function M1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?NF(""+n.key):e.toString(36)}function nv(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case H0:case bF:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+M1(o,0):s,XT(r)?(t="",n!=null&&(t=n.replace(YT,"$&/")+"/"),nv(r,e,t,"",function(u){return u})):r!=null&&(VE(r)&&(r=RF(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(YT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",XT(n))for(var a=0;a<n.length;a++){i=n[a];var c=s+M1(i,a);o+=nv(i,e,t,c,r)}else if(c=PF(n),typeof c=="function")for(n=c.call(n),a=0;!(i=n.next()).done;)i=i.value,c=s+M1(i,a++),o+=nv(i,e,t,c,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function py(n,e,t){if(n==null)return n;var s=[],r=0;return nv(n,s,"","",function(i){return e.call(t,i,r++)}),s}function MF(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ln={current:null},sv={transition:null},jF={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:sv,ReactCurrentOwner:$E};function FR(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:py,forEach:function(n,e,t){py(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return py(n,function(){e++}),e},toArray:function(n){return py(n,function(e){return e})||[]},only:function(n){if(!VE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ye.Component=bf;ye.Fragment=xF;ye.Profiler=SF;ye.PureComponent=FE;ye.StrictMode=wF;ye.Suspense=CF;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jF;ye.act=FR;ye.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=MR({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=$E.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)DR.call(e,c)&&!IR.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:H0,type:n.type,key:r,ref:i,props:s,_owner:o}};ye.createContext=function(n){return n={$$typeof:_F,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:AF,_context:n},n.Consumer=n};ye.createElement=OR;ye.createFactory=function(n){var e=OR.bind(null,n);return e.type=n,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(n){return{$$typeof:EF,render:n}};ye.isValidElement=VE;ye.lazy=function(n){return{$$typeof:kF,_payload:{_status:-1,_result:n},_init:MF}};ye.memo=function(n,e){return{$$typeof:TF,type:n,compare:e===void 0?null:e}};ye.startTransition=function(n){var e=sv.transition;sv.transition={};try{n()}finally{sv.transition=e}};ye.unstable_act=FR;ye.useCallback=function(n,e){return Ln.current.useCallback(n,e)};ye.useContext=function(n){return Ln.current.useContext(n)};ye.useDebugValue=function(){};ye.useDeferredValue=function(n){return Ln.current.useDeferredValue(n)};ye.useEffect=function(n,e){return Ln.current.useEffect(n,e)};ye.useId=function(){return Ln.current.useId()};ye.useImperativeHandle=function(n,e,t){return Ln.current.useImperativeHandle(n,e,t)};ye.useInsertionEffect=function(n,e){return Ln.current.useInsertionEffect(n,e)};ye.useLayoutEffect=function(n,e){return Ln.current.useLayoutEffect(n,e)};ye.useMemo=function(n,e){return Ln.current.useMemo(n,e)};ye.useReducer=function(n,e,t){return Ln.current.useReducer(n,e,t)};ye.useRef=function(n){return Ln.current.useRef(n)};ye.useState=function(n){return Ln.current.useState(n)};ye.useSyncExternalStore=function(n,e,t){return Ln.current.useSyncExternalStore(n,e,t)};ye.useTransition=function(){return Ln.current.useTransition()};ye.version="18.3.1";RR.exports=ye;var _=RR.exports;const Ae=Dw(_),BR=kR({__proto__:null,default:Ae},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LF=_,DF=Symbol.for("react.element"),IF=Symbol.for("react.fragment"),OF=Object.prototype.hasOwnProperty,FF=LF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BF={key:!0,ref:!0,__self:!0,__source:!0};function $R(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)OF.call(e,s)&&!BF.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:DF,type:n,key:i,ref:o,props:r,_owner:FF.current}}Iw.Fragment=IF;Iw.jsx=$R;Iw.jsxs=$R;PR.exports=Iw;var p=PR.exports,VS={},VR={exports:{}},Ns={},zR={exports:{}},UR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,$){var V=F.length;F.push($);e:for(;0<V;){var W=V-1>>>1,K=F[W];if(0<r(K,$))F[W]=$,F[V]=K,V=W;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var $=F[0],V=F.pop();if(V!==$){F[0]=V;e:for(var W=0,K=F.length,Y=K>>>1;W<Y;){var re=2*(W+1)-1,fe=F[re],xe=re+1,X=F[xe];if(0>r(fe,V))xe<K&&0>r(X,fe)?(F[W]=X,F[xe]=V,W=xe):(F[W]=fe,F[re]=V,W=re);else if(xe<K&&0>r(X,V))F[W]=X,F[xe]=V,W=xe;else break e}}return $}function r(F,$){var V=F.sortIndex-$.sortIndex;return V!==0?V:F.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,m=!1,y=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var $=t(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=F)s(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(u)}}function E(F){if(g=!1,A(F),!y)if(t(c)!==null)y=!0,j(T);else{var $=t(u);$!==null&&O(E,$.startTime-F)}}function T(F,$){y=!1,g&&(g=!1,v(R),R=-1),m=!0;var V=f;try{for(A($),h=t(c);h!==null&&(!(h.expirationTime>$)||F&&!B());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var K=W(h.expirationTime<=$);$=n.unstable_now(),typeof K=="function"?h.callback=K:h===t(c)&&s(c),A($)}else s(c);h=t(c)}if(h!==null)var Y=!0;else{var re=t(u);re!==null&&O(E,re.startTime-$),Y=!1}return Y}finally{h=null,f=V,m=!1}}var P=!1,k=null,R=-1,M=5,L=-1;function B(){return!(n.unstable_now()-L<M)}function D(){if(k!==null){var F=n.unstable_now();L=F;var $=!0;try{$=k(!0,F)}finally{$?z():(P=!1,k=null)}}else P=!1}var z;if(typeof x=="function")z=function(){x(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,N=I.port2;I.port1.onmessage=D,z=function(){N.postMessage(null)}}else z=function(){S(D,0)};function j(F){k=F,P||(P=!0,z())}function O(F,$){R=S(function(){F(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,j(T))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(F){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var V=f;f=$;try{return F()}finally{f=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=f;f=F;try{return $()}finally{f=V}},n.unstable_scheduleCallback=function(F,$,V){var W=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=V+K,F={id:d++,callback:$,priorityLevel:F,startTime:V,expirationTime:K,sortIndex:-1},V>W?(F.sortIndex=V,e(u,F),t(c)===null&&F===t(u)&&(g?(v(R),R=-1):g=!0,O(E,V-W))):(F.sortIndex=K,e(c,F),y||m||(y=!0,j(T))),F},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(F){var $=f;return function(){var V=f;f=$;try{return F.apply(this,arguments)}finally{f=V}}}})(UR);zR.exports=UR;var $F=zR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VF=_,ks=$F;function H(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HR=new Set,Bp={};function lu(n,e){of(n,e),of(n+"Capture",e)}function of(n,e){for(Bp[n]=e,n=0;n<e.length;n++)HR.add(e[n])}var po=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zS=Object.prototype.hasOwnProperty,zF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QT={},JT={};function UF(n){return zS.call(JT,n)?!0:zS.call(QT,n)?!1:zF.test(n)?JT[n]=!0:(QT[n]=!0,!1)}function HF(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function GF(n,e,t,s){if(e===null||typeof e>"u"||HF(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dn(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){an[n]=new Dn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];an[e]=new Dn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){an[n]=new Dn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){an[n]=new Dn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){an[n]=new Dn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){an[n]=new Dn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){an[n]=new Dn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){an[n]=new Dn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){an[n]=new Dn(n,5,!1,n.toLowerCase(),null,!1,!1)});var zE=/[\-:]([a-z])/g;function UE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(zE,UE);an[e]=new Dn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(zE,UE);an[e]=new Dn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(zE,UE);an[e]=new Dn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){an[n]=new Dn(n,1,!1,n.toLowerCase(),null,!1,!1)});an.xlinkHref=new Dn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){an[n]=new Dn(n,1,!1,n.toLowerCase(),null,!0,!0)});function HE(n,e,t,s){var r=an.hasOwnProperty(e)?an[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GF(e,t,r,s)&&(t=null),s||r===null?UF(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var So=VF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,my=Symbol.for("react.element"),Ru=Symbol.for("react.portal"),Nu=Symbol.for("react.fragment"),GE=Symbol.for("react.strict_mode"),US=Symbol.for("react.profiler"),GR=Symbol.for("react.provider"),WR=Symbol.for("react.context"),WE=Symbol.for("react.forward_ref"),HS=Symbol.for("react.suspense"),GS=Symbol.for("react.suspense_list"),qE=Symbol.for("react.memo"),Po=Symbol.for("react.lazy"),qR=Symbol.for("react.offscreen"),ZT=Symbol.iterator;function Tf(n){return n===null||typeof n!="object"?null:(n=ZT&&n[ZT]||n["@@iterator"],typeof n=="function"?n:null)}var ft=Object.assign,j1;function qf(n){if(j1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);j1=e&&e[1]||""}return`
`+j1+n}var L1=!1;function D1(n,e){if(!n||L1)return"";L1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{L1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?qf(n):""}function WF(n){switch(n.tag){case 5:return qf(n.type);case 16:return qf("Lazy");case 13:return qf("Suspense");case 19:return qf("SuspenseList");case 0:case 2:case 15:return n=D1(n.type,!1),n;case 11:return n=D1(n.type.render,!1),n;case 1:return n=D1(n.type,!0),n;default:return""}}function WS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Nu:return"Fragment";case Ru:return"Portal";case US:return"Profiler";case GE:return"StrictMode";case HS:return"Suspense";case GS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case WR:return(n.displayName||"Context")+".Consumer";case GR:return(n._context.displayName||"Context")+".Provider";case WE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case qE:return e=n.displayName||null,e!==null?e:WS(n.type)||"Memo";case Po:e=n._payload,n=n._init;try{return WS(n(e))}catch{}}return null}function qF(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return WS(e);case 8:return e===GE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function KR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KF(n){var e=KR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function gy(n){n._valueTracker||(n._valueTracker=KF(n))}function XR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=KR(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function Jv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function qS(n,e){var t=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ek(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Wa(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function YR(n,e){e=e.checked,e!=null&&HE(n,"checked",e,!1)}function KS(n,e){YR(n,e);var t=Wa(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?XS(n,e.type,t):e.hasOwnProperty("defaultValue")&&XS(n,e.type,Wa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function tk(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function XS(n,e,t){(e!=="number"||Jv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Kf=Array.isArray;function Qu(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Wa(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function YS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function nk(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(H(92));if(Kf(t)){if(1<t.length)throw Error(H(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Wa(t)}}function QR(n,e){var t=Wa(e.value),s=Wa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function sk(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function JR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?JR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var yy,ZR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(yy=yy||document.createElement("div"),yy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function $p(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XF=["Webkit","ms","Moz","O"];Object.keys(wp).forEach(function(n){XF.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),wp[e]=wp[n]})});function eN(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||wp.hasOwnProperty(n)&&wp[n]?(""+e).trim():e+"px"}function tN(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=eN(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var YF=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function JS(n,e){if(e){if(YF[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function ZS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eA=null;function KE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var tA=null,Ju=null,Zu=null;function rk(n){if(n=q0(n)){if(typeof tA!="function")throw Error(H(280));var e=n.stateNode;e&&(e=Vw(e),tA(n.stateNode,n.type,e))}}function nN(n){Ju?Zu?Zu.push(n):Zu=[n]:Ju=n}function sN(){if(Ju){var n=Ju,e=Zu;if(Zu=Ju=null,rk(n),e)for(n=0;n<e.length;n++)rk(e[n])}}function rN(n,e){return n(e)}function iN(){}var I1=!1;function oN(n,e,t){if(I1)return n(e,t);I1=!0;try{return rN(n,e,t)}finally{I1=!1,(Ju!==null||Zu!==null)&&(iN(),sN())}}function Vp(n,e){var t=n.stateNode;if(t===null)return null;var s=Vw(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(H(231,e,typeof t));return t}var nA=!1;if(po)try{var kf={};Object.defineProperty(kf,"passive",{get:function(){nA=!0}}),window.addEventListener("test",kf,kf),window.removeEventListener("test",kf,kf)}catch{nA=!1}function QF(n,e,t,s,r,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Sp=!1,Zv=null,eb=!1,sA=null,JF={onError:function(n){Sp=!0,Zv=n}};function ZF(n,e,t,s,r,i,o,a,c){Sp=!1,Zv=null,QF.apply(JF,arguments)}function e3(n,e,t,s,r,i,o,a,c){if(ZF.apply(this,arguments),Sp){if(Sp){var u=Zv;Sp=!1,Zv=null}else throw Error(H(198));eb||(eb=!0,sA=u)}}function cu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function aN(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function ik(n){if(cu(n)!==n)throw Error(H(188))}function t3(n){var e=n.alternate;if(!e){if(e=cu(n),e===null)throw Error(H(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return ik(r),n;if(i===s)return ik(r),e;i=i.sibling}throw Error(H(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error(H(189))}}if(t.alternate!==s)throw Error(H(190))}if(t.tag!==3)throw Error(H(188));return t.stateNode.current===t?n:e}function lN(n){return n=t3(n),n!==null?cN(n):null}function cN(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=cN(n);if(e!==null)return e;n=n.sibling}return null}var uN=ks.unstable_scheduleCallback,ok=ks.unstable_cancelCallback,n3=ks.unstable_shouldYield,s3=ks.unstable_requestPaint,At=ks.unstable_now,r3=ks.unstable_getCurrentPriorityLevel,XE=ks.unstable_ImmediatePriority,dN=ks.unstable_UserBlockingPriority,tb=ks.unstable_NormalPriority,i3=ks.unstable_LowPriority,hN=ks.unstable_IdlePriority,Ow=null,li=null;function o3(n){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(Ow,n,void 0,(n.current.flags&128)===128)}catch{}}var Er=Math.clz32?Math.clz32:c3,a3=Math.log,l3=Math.LN2;function c3(n){return n>>>=0,n===0?32:31-(a3(n)/l3|0)|0}var vy=64,by=4194304;function Xf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function nb(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=Xf(a):(i&=o,i!==0&&(s=Xf(i)))}else o=t&~r,o!==0?s=Xf(o):i!==0&&(s=Xf(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Er(e),r=1<<t,s|=n[t],e&=~r;return s}function u3(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d3(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Er(i),a=1<<o,c=r[o];c===-1?(!(a&t)||a&s)&&(r[o]=u3(a,e)):c<=e&&(n.expiredLanes|=a),i&=~a}}function rA(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function fN(){var n=vy;return vy<<=1,!(vy&4194240)&&(vy=64),n}function O1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function G0(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Er(e),n[e]=t}function h3(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Er(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function YE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Er(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var De=0;function pN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var mN,QE,gN,yN,vN,iA=!1,xy=[],Ia=null,Oa=null,Fa=null,zp=new Map,Up=new Map,Mo=[],f3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ak(n,e){switch(n){case"focusin":case"focusout":Ia=null;break;case"dragenter":case"dragleave":Oa=null;break;case"mouseover":case"mouseout":Fa=null;break;case"pointerover":case"pointerout":zp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Up.delete(e.pointerId)}}function Pf(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=q0(e),e!==null&&QE(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function p3(n,e,t,s,r){switch(e){case"focusin":return Ia=Pf(Ia,n,e,t,s,r),!0;case"dragenter":return Oa=Pf(Oa,n,e,t,s,r),!0;case"mouseover":return Fa=Pf(Fa,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return zp.set(i,Pf(zp.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Up.set(i,Pf(Up.get(i)||null,n,e,t,s,r)),!0}return!1}function bN(n){var e=vl(n.target);if(e!==null){var t=cu(e);if(t!==null){if(e=t.tag,e===13){if(e=aN(t),e!==null){n.blockedOn=e,vN(n.priority,function(){gN(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=oA(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);eA=s,t.target.dispatchEvent(s),eA=null}else return e=q0(t),e!==null&&QE(e),n.blockedOn=t,!1;e.shift()}return!0}function lk(n,e,t){rv(n)&&t.delete(e)}function m3(){iA=!1,Ia!==null&&rv(Ia)&&(Ia=null),Oa!==null&&rv(Oa)&&(Oa=null),Fa!==null&&rv(Fa)&&(Fa=null),zp.forEach(lk),Up.forEach(lk)}function Rf(n,e){n.blockedOn===e&&(n.blockedOn=null,iA||(iA=!0,ks.unstable_scheduleCallback(ks.unstable_NormalPriority,m3)))}function Hp(n){function e(r){return Rf(r,n)}if(0<xy.length){Rf(xy[0],n);for(var t=1;t<xy.length;t++){var s=xy[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Ia!==null&&Rf(Ia,n),Oa!==null&&Rf(Oa,n),Fa!==null&&Rf(Fa,n),zp.forEach(e),Up.forEach(e),t=0;t<Mo.length;t++)s=Mo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Mo.length&&(t=Mo[0],t.blockedOn===null);)bN(t),t.blockedOn===null&&Mo.shift()}var ed=So.ReactCurrentBatchConfig,sb=!0;function g3(n,e,t,s){var r=De,i=ed.transition;ed.transition=null;try{De=1,JE(n,e,t,s)}finally{De=r,ed.transition=i}}function y3(n,e,t,s){var r=De,i=ed.transition;ed.transition=null;try{De=4,JE(n,e,t,s)}finally{De=r,ed.transition=i}}function JE(n,e,t,s){if(sb){var r=oA(n,e,t,s);if(r===null)q1(n,e,s,rb,t),ak(n,s);else if(p3(r,n,e,t,s))s.stopPropagation();else if(ak(n,s),e&4&&-1<f3.indexOf(n)){for(;r!==null;){var i=q0(r);if(i!==null&&mN(i),i=oA(n,e,t,s),i===null&&q1(n,e,s,rb,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else q1(n,e,s,null,t)}}var rb=null;function oA(n,e,t,s){if(rb=null,n=KE(s),n=vl(n),n!==null)if(e=cu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=aN(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return rb=n,null}function xN(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(r3()){case XE:return 1;case dN:return 4;case tb:case i3:return 16;case hN:return 536870912;default:return 16}default:return 16}}var La=null,ZE=null,iv=null;function wN(){if(iv)return iv;var n,e=ZE,t=e.length,s,r="value"in La?La.value:La.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return iv=r.slice(n,1<s?1-s:void 0)}function ov(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function wy(){return!0}function ck(){return!1}function Ms(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wy:ck,this.isPropagationStopped=ck,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=wy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=wy)},persist:function(){},isPersistent:wy}),e}var xf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eC=Ms(xf),W0=ft({},xf,{view:0,detail:0}),v3=Ms(W0),F1,B1,Nf,Fw=ft({},W0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Nf&&(Nf&&n.type==="mousemove"?(F1=n.screenX-Nf.screenX,B1=n.screenY-Nf.screenY):B1=F1=0,Nf=n),F1)},movementY:function(n){return"movementY"in n?n.movementY:B1}}),uk=Ms(Fw),b3=ft({},Fw,{dataTransfer:0}),x3=Ms(b3),w3=ft({},W0,{relatedTarget:0}),$1=Ms(w3),S3=ft({},xf,{animationName:0,elapsedTime:0,pseudoElement:0}),A3=Ms(S3),_3=ft({},xf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),E3=Ms(_3),C3=ft({},xf,{data:0}),dk=Ms(C3),T3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},k3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},P3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=P3[n])?!!e[n]:!1}function tC(){return R3}var N3=ft({},W0,{key:function(n){if(n.key){var e=T3[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ov(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?k3[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tC,charCode:function(n){return n.type==="keypress"?ov(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ov(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),M3=Ms(N3),j3=ft({},Fw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hk=Ms(j3),L3=ft({},W0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tC}),D3=Ms(L3),I3=ft({},xf,{propertyName:0,elapsedTime:0,pseudoElement:0}),O3=Ms(I3),F3=ft({},Fw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),B3=Ms(F3),$3=[9,13,27,32],nC=po&&"CompositionEvent"in window,Ap=null;po&&"documentMode"in document&&(Ap=document.documentMode);var V3=po&&"TextEvent"in window&&!Ap,SN=po&&(!nC||Ap&&8<Ap&&11>=Ap),fk=String.fromCharCode(32),pk=!1;function AN(n,e){switch(n){case"keyup":return $3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _N(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Mu=!1;function z3(n,e){switch(n){case"compositionend":return _N(e);case"keypress":return e.which!==32?null:(pk=!0,fk);case"textInput":return n=e.data,n===fk&&pk?null:n;default:return null}}function U3(n,e){if(Mu)return n==="compositionend"||!nC&&AN(n,e)?(n=wN(),iv=ZE=La=null,Mu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return SN&&e.locale!=="ko"?null:e.data;default:return null}}var H3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mk(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!H3[n.type]:e==="textarea"}function EN(n,e,t,s){nN(s),e=ib(e,"onChange"),0<e.length&&(t=new eC("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var _p=null,Gp=null;function G3(n){IN(n,0)}function Bw(n){var e=Du(n);if(XR(e))return n}function W3(n,e){if(n==="change")return e}var CN=!1;if(po){var V1;if(po){var z1="oninput"in document;if(!z1){var gk=document.createElement("div");gk.setAttribute("oninput","return;"),z1=typeof gk.oninput=="function"}V1=z1}else V1=!1;CN=V1&&(!document.documentMode||9<document.documentMode)}function yk(){_p&&(_p.detachEvent("onpropertychange",TN),Gp=_p=null)}function TN(n){if(n.propertyName==="value"&&Bw(Gp)){var e=[];EN(e,Gp,n,KE(n)),oN(G3,e)}}function q3(n,e,t){n==="focusin"?(yk(),_p=e,Gp=t,_p.attachEvent("onpropertychange",TN)):n==="focusout"&&yk()}function K3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bw(Gp)}function X3(n,e){if(n==="click")return Bw(e)}function Y3(n,e){if(n==="input"||n==="change")return Bw(e)}function Q3(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Tr=typeof Object.is=="function"?Object.is:Q3;function Wp(n,e){if(Tr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!zS.call(e,r)||!Tr(n[r],e[r]))return!1}return!0}function vk(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bk(n,e){var t=vk(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=vk(t)}}function kN(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?kN(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function PN(){for(var n=window,e=Jv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Jv(n.document)}return e}function sC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function J3(n){var e=PN(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&kN(t.ownerDocument.documentElement,t)){if(s!==null&&sC(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=bk(t,i);var o=bk(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Z3=po&&"documentMode"in document&&11>=document.documentMode,ju=null,aA=null,Ep=null,lA=!1;function xk(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;lA||ju==null||ju!==Jv(s)||(s=ju,"selectionStart"in s&&sC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ep&&Wp(Ep,s)||(Ep=s,s=ib(aA,"onSelect"),0<s.length&&(e=new eC("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=ju)))}function Sy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Lu={animationend:Sy("Animation","AnimationEnd"),animationiteration:Sy("Animation","AnimationIteration"),animationstart:Sy("Animation","AnimationStart"),transitionend:Sy("Transition","TransitionEnd")},U1={},RN={};po&&(RN=document.createElement("div").style,"AnimationEvent"in window||(delete Lu.animationend.animation,delete Lu.animationiteration.animation,delete Lu.animationstart.animation),"TransitionEvent"in window||delete Lu.transitionend.transition);function $w(n){if(U1[n])return U1[n];if(!Lu[n])return n;var e=Lu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in RN)return U1[n]=e[t];return n}var NN=$w("animationend"),MN=$w("animationiteration"),jN=$w("animationstart"),LN=$w("transitionend"),DN=new Map,wk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ja(n,e){DN.set(n,e),lu(e,[n])}for(var H1=0;H1<wk.length;H1++){var G1=wk[H1],eB=G1.toLowerCase(),tB=G1[0].toUpperCase()+G1.slice(1);Ja(eB,"on"+tB)}Ja(NN,"onAnimationEnd");Ja(MN,"onAnimationIteration");Ja(jN,"onAnimationStart");Ja("dblclick","onDoubleClick");Ja("focusin","onFocus");Ja("focusout","onBlur");Ja(LN,"onTransitionEnd");of("onMouseEnter",["mouseout","mouseover"]);of("onMouseLeave",["mouseout","mouseover"]);of("onPointerEnter",["pointerout","pointerover"]);of("onPointerLeave",["pointerout","pointerover"]);lu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lu("onBeforeInput",["compositionend","keypress","textInput","paste"]);lu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yf));function Sk(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,e3(s,e,void 0,n),n.currentTarget=null}function IN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;Sk(r,a,u),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;Sk(r,a,u),i=c}}}if(eb)throw n=sA,eb=!1,sA=null,n}function Ze(n,e){var t=e[fA];t===void 0&&(t=e[fA]=new Set);var s=n+"__bubble";t.has(s)||(ON(e,n,2,!1),t.add(s))}function W1(n,e,t){var s=0;e&&(s|=4),ON(t,n,s,e)}var Ay="_reactListening"+Math.random().toString(36).slice(2);function qp(n){if(!n[Ay]){n[Ay]=!0,HR.forEach(function(t){t!=="selectionchange"&&(nB.has(t)||W1(t,!1,n),W1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ay]||(e[Ay]=!0,W1("selectionchange",!1,e))}}function ON(n,e,t,s){switch(xN(e)){case 1:var r=g3;break;case 4:r=y3;break;default:r=JE}t=r.bind(null,e,t,n),r=void 0,!nA||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function q1(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=vl(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}oN(function(){var u=i,d=KE(t),h=[];e:{var f=DN.get(n);if(f!==void 0){var m=eC,y=n;switch(n){case"keypress":if(ov(t)===0)break e;case"keydown":case"keyup":m=M3;break;case"focusin":y="focus",m=$1;break;case"focusout":y="blur",m=$1;break;case"beforeblur":case"afterblur":m=$1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=uk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=x3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=D3;break;case NN:case MN:case jN:m=A3;break;case LN:m=O3;break;case"scroll":m=v3;break;case"wheel":m=B3;break;case"copy":case"cut":case"paste":m=E3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=hk}var g=(e&4)!==0,S=!g&&n==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=u,A;x!==null;){A=x;var E=A.stateNode;if(A.tag===5&&E!==null&&(A=E,v!==null&&(E=Vp(x,v),E!=null&&g.push(Kp(x,E,A)))),S)break;x=x.return}0<g.length&&(f=new m(f,y,null,t,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==eA&&(y=t.relatedTarget||t.fromElement)&&(vl(y)||y[mo]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?vl(y):null,y!==null&&(S=cu(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=uk,E="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(g=hk,E="onPointerLeave",v="onPointerEnter",x="pointer"),S=m==null?f:Du(m),A=y==null?f:Du(y),f=new g(E,x+"leave",m,t,d),f.target=S,f.relatedTarget=A,E=null,vl(d)===u&&(g=new g(v,x+"enter",y,t,d),g.target=A,g.relatedTarget=S,E=g),S=E,m&&y)t:{for(g=m,v=y,x=0,A=g;A;A=gu(A))x++;for(A=0,E=v;E;E=gu(E))A++;for(;0<x-A;)g=gu(g),x--;for(;0<A-x;)v=gu(v),A--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=gu(g),v=gu(v)}g=null}else g=null;m!==null&&Ak(h,f,m,g,!1),y!==null&&S!==null&&Ak(h,S,y,g,!0)}}e:{if(f=u?Du(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=W3;else if(mk(f))if(CN)T=Y3;else{T=K3;var P=q3}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=X3);if(T&&(T=T(n,u))){EN(h,T,t,d);break e}P&&P(n,f,u),n==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&XS(f,"number",f.value)}switch(P=u?Du(u):window,n){case"focusin":(mk(P)||P.contentEditable==="true")&&(ju=P,aA=u,Ep=null);break;case"focusout":Ep=aA=ju=null;break;case"mousedown":lA=!0;break;case"contextmenu":case"mouseup":case"dragend":lA=!1,xk(h,t,d);break;case"selectionchange":if(Z3)break;case"keydown":case"keyup":xk(h,t,d)}var k;if(nC)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Mu?AN(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(SN&&t.locale!=="ko"&&(Mu||R!=="onCompositionStart"?R==="onCompositionEnd"&&Mu&&(k=wN()):(La=d,ZE="value"in La?La.value:La.textContent,Mu=!0)),P=ib(u,R),0<P.length&&(R=new dk(R,n,null,t,d),h.push({event:R,listeners:P}),k?R.data=k:(k=_N(t),k!==null&&(R.data=k)))),(k=V3?z3(n,t):U3(n,t))&&(u=ib(u,"onBeforeInput"),0<u.length&&(d=new dk("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=k))}IN(h,e)})}function Kp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ib(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Vp(n,t),i!=null&&s.unshift(Kp(n,i,r)),i=Vp(n,e),i!=null&&s.push(Kp(n,i,r))),n=n.return}return s}function gu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ak(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&u!==null&&(a=u,r?(c=Vp(t,i),c!=null&&o.unshift(Kp(t,c,a))):r||(c=Vp(t,i),c!=null&&o.push(Kp(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var sB=/\r\n?/g,rB=/\u0000|\uFFFD/g;function _k(n){return(typeof n=="string"?n:""+n).replace(sB,`
`).replace(rB,"")}function _y(n,e,t){if(e=_k(e),_k(n)!==e&&t)throw Error(H(425))}function ob(){}var cA=null,uA=null;function dA(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hA=typeof setTimeout=="function"?setTimeout:void 0,iB=typeof clearTimeout=="function"?clearTimeout:void 0,Ek=typeof Promise=="function"?Promise:void 0,oB=typeof queueMicrotask=="function"?queueMicrotask:typeof Ek<"u"?function(n){return Ek.resolve(null).then(n).catch(aB)}:hA;function aB(n){setTimeout(function(){throw n})}function K1(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),Hp(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);Hp(e)}function Ba(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Ck(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var wf=Math.random().toString(36).slice(2),oi="__reactFiber$"+wf,Xp="__reactProps$"+wf,mo="__reactContainer$"+wf,fA="__reactEvents$"+wf,lB="__reactListeners$"+wf,cB="__reactHandles$"+wf;function vl(n){var e=n[oi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[mo]||t[oi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Ck(n);n!==null;){if(t=n[oi])return t;n=Ck(n)}return e}n=t,t=n.parentNode}return null}function q0(n){return n=n[oi]||n[mo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Du(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(H(33))}function Vw(n){return n[Xp]||null}var pA=[],Iu=-1;function Za(n){return{current:n}}function et(n){0>Iu||(n.current=pA[Iu],pA[Iu]=null,Iu--)}function Xe(n,e){Iu++,pA[Iu]=n.current,n.current=e}var qa={},Sn=Za(qa),Jn=Za(!1),Zc=qa;function af(n,e){var t=n.type.contextTypes;if(!t)return qa;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Zn(n){return n=n.childContextTypes,n!=null}function ab(){et(Jn),et(Sn)}function Tk(n,e,t){if(Sn.current!==qa)throw Error(H(168));Xe(Sn,e),Xe(Jn,t)}function FN(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(H(108,qF(n)||"Unknown",r));return ft({},t,s)}function lb(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||qa,Zc=Sn.current,Xe(Sn,n),Xe(Jn,Jn.current),!0}function kk(n,e,t){var s=n.stateNode;if(!s)throw Error(H(169));t?(n=FN(n,e,Zc),s.__reactInternalMemoizedMergedChildContext=n,et(Jn),et(Sn),Xe(Sn,n)):et(Jn),Xe(Jn,t)}var wi=null,zw=!1,X1=!1;function BN(n){wi===null?wi=[n]:wi.push(n)}function uB(n){zw=!0,BN(n)}function el(){if(!X1&&wi!==null){X1=!0;var n=0,e=De;try{var t=wi;for(De=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}wi=null,zw=!1}catch(r){throw wi!==null&&(wi=wi.slice(n+1)),uN(XE,el),r}finally{De=e,X1=!1}}return null}var Ou=[],Fu=0,cb=null,ub=0,Xs=[],Ys=0,eu=null,io=1,oo="";function il(n,e){Ou[Fu++]=ub,Ou[Fu++]=cb,cb=n,ub=e}function $N(n,e,t){Xs[Ys++]=io,Xs[Ys++]=oo,Xs[Ys++]=eu,eu=n;var s=io;n=oo;var r=32-Er(s)-1;s&=~(1<<r),t+=1;var i=32-Er(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,io=1<<32-Er(e)+r|t<<r|s,oo=i+n}else io=1<<i|t<<r|s,oo=n}function rC(n){n.return!==null&&(il(n,1),$N(n,1,0))}function iC(n){for(;n===cb;)cb=Ou[--Fu],Ou[Fu]=null,ub=Ou[--Fu],Ou[Fu]=null;for(;n===eu;)eu=Xs[--Ys],Xs[Ys]=null,oo=Xs[--Ys],Xs[Ys]=null,io=Xs[--Ys],Xs[Ys]=null}var Ts=null,Cs=null,it=!1,_r=null;function VN(n,e){var t=Js(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Pk(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ts=n,Cs=Ba(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ts=n,Cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=eu!==null?{id:io,overflow:oo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Js(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ts=n,Cs=null,!0):!1;default:return!1}}function mA(n){return(n.mode&1)!==0&&(n.flags&128)===0}function gA(n){if(it){var e=Cs;if(e){var t=e;if(!Pk(n,e)){if(mA(n))throw Error(H(418));e=Ba(t.nextSibling);var s=Ts;e&&Pk(n,e)?VN(s,t):(n.flags=n.flags&-4097|2,it=!1,Ts=n)}}else{if(mA(n))throw Error(H(418));n.flags=n.flags&-4097|2,it=!1,Ts=n}}}function Rk(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ts=n}function Ey(n){if(n!==Ts)return!1;if(!it)return Rk(n),it=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!dA(n.type,n.memoizedProps)),e&&(e=Cs)){if(mA(n))throw zN(),Error(H(418));for(;e;)VN(n,e),e=Ba(e.nextSibling)}if(Rk(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(H(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Cs=Ba(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Cs=null}}else Cs=Ts?Ba(n.stateNode.nextSibling):null;return!0}function zN(){for(var n=Cs;n;)n=Ba(n.nextSibling)}function lf(){Cs=Ts=null,it=!1}function oC(n){_r===null?_r=[n]:_r.push(n)}var dB=So.ReactCurrentBatchConfig;function Mf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(H(309));var s=t.stateNode}if(!s)throw Error(H(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(H(284));if(!t._owner)throw Error(H(290,n))}return n}function Cy(n,e){throw n=Object.prototype.toString.call(e),Error(H(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Nk(n){var e=n._init;return e(n._payload)}function UN(n){function e(v,x){if(n){var A=v.deletions;A===null?(v.deletions=[x],v.flags|=16):A.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function s(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function r(v,x){return v=Ua(v,x),v.index=0,v.sibling=null,v}function i(v,x,A){return v.index=A,n?(A=v.alternate,A!==null?(A=A.index,A<x?(v.flags|=2,x):A):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,x,A,E){return x===null||x.tag!==6?(x=nS(A,v.mode,E),x.return=v,x):(x=r(x,A),x.return=v,x)}function c(v,x,A,E){var T=A.type;return T===Nu?d(v,x,A.props.children,E,A.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Po&&Nk(T)===x.type)?(E=r(x,A.props),E.ref=Mf(v,x,A),E.return=v,E):(E=fv(A.type,A.key,A.props,null,v.mode,E),E.ref=Mf(v,x,A),E.return=v,E)}function u(v,x,A,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=sS(A,v.mode,E),x.return=v,x):(x=r(x,A.children||[]),x.return=v,x)}function d(v,x,A,E,T){return x===null||x.tag!==7?(x=Jc(A,v.mode,E,T),x.return=v,x):(x=r(x,A),x.return=v,x)}function h(v,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nS(""+x,v.mode,A),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case my:return A=fv(x.type,x.key,x.props,null,v.mode,A),A.ref=Mf(v,null,x),A.return=v,A;case Ru:return x=sS(x,v.mode,A),x.return=v,x;case Po:var E=x._init;return h(v,E(x._payload),A)}if(Kf(x)||Tf(x))return x=Jc(x,v.mode,A,null),x.return=v,x;Cy(v,x)}return null}function f(v,x,A,E){var T=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return T!==null?null:a(v,x,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case my:return A.key===T?c(v,x,A,E):null;case Ru:return A.key===T?u(v,x,A,E):null;case Po:return T=A._init,f(v,x,T(A._payload),E)}if(Kf(A)||Tf(A))return T!==null?null:d(v,x,A,E,null);Cy(v,A)}return null}function m(v,x,A,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(A)||null,a(x,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case my:return v=v.get(E.key===null?A:E.key)||null,c(x,v,E,T);case Ru:return v=v.get(E.key===null?A:E.key)||null,u(x,v,E,T);case Po:var P=E._init;return m(v,x,A,P(E._payload),T)}if(Kf(E)||Tf(E))return v=v.get(A)||null,d(x,v,E,T,null);Cy(x,E)}return null}function y(v,x,A,E){for(var T=null,P=null,k=x,R=x=0,M=null;k!==null&&R<A.length;R++){k.index>R?(M=k,k=null):M=k.sibling;var L=f(v,k,A[R],E);if(L===null){k===null&&(k=M);break}n&&k&&L.alternate===null&&e(v,k),x=i(L,x,R),P===null?T=L:P.sibling=L,P=L,k=M}if(R===A.length)return t(v,k),it&&il(v,R),T;if(k===null){for(;R<A.length;R++)k=h(v,A[R],E),k!==null&&(x=i(k,x,R),P===null?T=k:P.sibling=k,P=k);return it&&il(v,R),T}for(k=s(v,k);R<A.length;R++)M=m(k,v,R,A[R],E),M!==null&&(n&&M.alternate!==null&&k.delete(M.key===null?R:M.key),x=i(M,x,R),P===null?T=M:P.sibling=M,P=M);return n&&k.forEach(function(B){return e(v,B)}),it&&il(v,R),T}function g(v,x,A,E){var T=Tf(A);if(typeof T!="function")throw Error(H(150));if(A=T.call(A),A==null)throw Error(H(151));for(var P=T=null,k=x,R=x=0,M=null,L=A.next();k!==null&&!L.done;R++,L=A.next()){k.index>R?(M=k,k=null):M=k.sibling;var B=f(v,k,L.value,E);if(B===null){k===null&&(k=M);break}n&&k&&B.alternate===null&&e(v,k),x=i(B,x,R),P===null?T=B:P.sibling=B,P=B,k=M}if(L.done)return t(v,k),it&&il(v,R),T;if(k===null){for(;!L.done;R++,L=A.next())L=h(v,L.value,E),L!==null&&(x=i(L,x,R),P===null?T=L:P.sibling=L,P=L);return it&&il(v,R),T}for(k=s(v,k);!L.done;R++,L=A.next())L=m(k,v,R,L.value,E),L!==null&&(n&&L.alternate!==null&&k.delete(L.key===null?R:L.key),x=i(L,x,R),P===null?T=L:P.sibling=L,P=L);return n&&k.forEach(function(D){return e(v,D)}),it&&il(v,R),T}function S(v,x,A,E){if(typeof A=="object"&&A!==null&&A.type===Nu&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case my:e:{for(var T=A.key,P=x;P!==null;){if(P.key===T){if(T=A.type,T===Nu){if(P.tag===7){t(v,P.sibling),x=r(P,A.props.children),x.return=v,v=x;break e}}else if(P.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Po&&Nk(T)===P.type){t(v,P.sibling),x=r(P,A.props),x.ref=Mf(v,P,A),x.return=v,v=x;break e}t(v,P);break}else e(v,P);P=P.sibling}A.type===Nu?(x=Jc(A.props.children,v.mode,E,A.key),x.return=v,v=x):(E=fv(A.type,A.key,A.props,null,v.mode,E),E.ref=Mf(v,x,A),E.return=v,v=E)}return o(v);case Ru:e:{for(P=A.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){t(v,x.sibling),x=r(x,A.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=sS(A,v.mode,E),x.return=v,v=x}return o(v);case Po:return P=A._init,S(v,x,P(A._payload),E)}if(Kf(A))return y(v,x,A,E);if(Tf(A))return g(v,x,A,E);Cy(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(t(v,x.sibling),x=r(x,A),x.return=v,v=x):(t(v,x),x=nS(A,v.mode,E),x.return=v,v=x),o(v)):t(v,x)}return S}var cf=UN(!0),HN=UN(!1),db=Za(null),hb=null,Bu=null,aC=null;function lC(){aC=Bu=hb=null}function cC(n){var e=db.current;et(db),n._currentValue=e}function yA(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function td(n,e){hb=n,aC=Bu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qn=!0),n.firstContext=null)}function er(n){var e=n._currentValue;if(aC!==n)if(n={context:n,memoizedValue:e,next:null},Bu===null){if(hb===null)throw Error(H(308));Bu=n,hb.dependencies={lanes:0,firstContext:n}}else Bu=Bu.next=n;return e}var bl=null;function uC(n){bl===null?bl=[n]:bl.push(n)}function GN(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,uC(e)):(t.next=r.next,r.next=t),e.interleaved=t,go(n,s)}function go(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ro=!1;function dC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function WN(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function co(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function $a(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,ke&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,go(n,t)}return r=s.interleaved,r===null?(e.next=e,uC(s)):(e.next=r.next,r.next=e),s.interleaved=e,go(n,t)}function av(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,YE(n,t)}}function Mk(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function fb(n,e,t,s){var r=n.updateQueue;Ro=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,m=a.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(f=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=ft({},h,f);break e;case 2:Ro=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);nu|=o,n.lanes=o,n.memoizedState=h}}function jk(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(H(191,r));r.call(s)}}}var K0={},ci=Za(K0),Yp=Za(K0),Qp=Za(K0);function xl(n){if(n===K0)throw Error(H(174));return n}function hC(n,e){switch(Xe(Qp,e),Xe(Yp,n),Xe(ci,K0),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=QS(e,n)}et(ci),Xe(ci,e)}function uf(){et(ci),et(Yp),et(Qp)}function qN(n){xl(Qp.current);var e=xl(ci.current),t=QS(e,n.type);e!==t&&(Xe(Yp,n),Xe(ci,t))}function fC(n){Yp.current===n&&(et(ci),et(Yp))}var lt=Za(0);function pb(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Y1=[];function pC(){for(var n=0;n<Y1.length;n++)Y1[n]._workInProgressVersionPrimary=null;Y1.length=0}var lv=So.ReactCurrentDispatcher,Q1=So.ReactCurrentBatchConfig,tu=0,dt=null,It=null,qt=null,mb=!1,Cp=!1,Jp=0,hB=0;function ln(){throw Error(H(321))}function mC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Tr(n[t],e[t]))return!1;return!0}function gC(n,e,t,s,r,i){if(tu=i,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lv.current=n===null||n.memoizedState===null?gB:yB,n=t(s,r),Cp){i=0;do{if(Cp=!1,Jp=0,25<=i)throw Error(H(301));i+=1,qt=It=null,e.updateQueue=null,lv.current=vB,n=t(s,r)}while(Cp)}if(lv.current=gb,e=It!==null&&It.next!==null,tu=0,qt=It=dt=null,mb=!1,e)throw Error(H(300));return n}function yC(){var n=Jp!==0;return Jp=0,n}function Lr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?dt.memoizedState=qt=n:qt=qt.next=n,qt}function tr(){if(It===null){var n=dt.alternate;n=n!==null?n.memoizedState:null}else n=It.next;var e=qt===null?dt.memoizedState:qt.next;if(e!==null)qt=e,It=n;else{if(n===null)throw Error(H(310));It=n,n={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},qt===null?dt.memoizedState=qt=n:qt=qt.next=n}return qt}function Zp(n,e){return typeof e=="function"?e(n):e}function J1(n){var e=tr(),t=e.queue;if(t===null)throw Error(H(311));t.lastRenderedReducer=n;var s=It,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((tu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=s):c=c.next=h,dt.lanes|=d,nu|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=a,Tr(s,e.memoizedState)||(Qn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,dt.lanes|=i,nu|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Z1(n){var e=tr(),t=e.queue;if(t===null)throw Error(H(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);Tr(i,e.memoizedState)||(Qn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function KN(){}function XN(n,e){var t=dt,s=tr(),r=e(),i=!Tr(s.memoizedState,r);if(i&&(s.memoizedState=r,Qn=!0),s=s.queue,vC(JN.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||qt!==null&&qt.memoizedState.tag&1){if(t.flags|=2048,em(9,QN.bind(null,t,s,r,e),void 0,null),Kt===null)throw Error(H(349));tu&30||YN(t,e,r)}return r}function YN(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function QN(n,e,t,s){e.value=t,e.getSnapshot=s,ZN(e)&&eM(n)}function JN(n,e,t){return t(function(){ZN(e)&&eM(n)})}function ZN(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Tr(n,t)}catch{return!0}}function eM(n){var e=go(n,1);e!==null&&Cr(e,n,1,-1)}function Lk(n){var e=Lr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zp,lastRenderedState:n},e.queue=n,n=n.dispatch=mB.bind(null,dt,n),[e.memoizedState,n]}function em(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function tM(){return tr().memoizedState}function cv(n,e,t,s){var r=Lr();dt.flags|=n,r.memoizedState=em(1|e,t,void 0,s===void 0?null:s)}function Uw(n,e,t,s){var r=tr();s=s===void 0?null:s;var i=void 0;if(It!==null){var o=It.memoizedState;if(i=o.destroy,s!==null&&mC(s,o.deps)){r.memoizedState=em(e,t,i,s);return}}dt.flags|=n,r.memoizedState=em(1|e,t,i,s)}function Dk(n,e){return cv(8390656,8,n,e)}function vC(n,e){return Uw(2048,8,n,e)}function nM(n,e){return Uw(4,2,n,e)}function sM(n,e){return Uw(4,4,n,e)}function rM(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function iM(n,e,t){return t=t!=null?t.concat([n]):null,Uw(4,4,rM.bind(null,e,n),t)}function bC(){}function oM(n,e){var t=tr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&mC(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function aM(n,e){var t=tr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&mC(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function lM(n,e,t){return tu&21?(Tr(t,e)||(t=fN(),dt.lanes|=t,nu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qn=!0),n.memoizedState=t)}function fB(n,e){var t=De;De=t!==0&&4>t?t:4,n(!0);var s=Q1.transition;Q1.transition={};try{n(!1),e()}finally{De=t,Q1.transition=s}}function cM(){return tr().memoizedState}function pB(n,e,t){var s=za(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},uM(n))dM(e,t);else if(t=GN(n,e,t,s),t!==null){var r=jn();Cr(t,n,s,r),hM(t,e,s)}}function mB(n,e,t){var s=za(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(uM(n))dM(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,Tr(a,o)){var c=e.interleaved;c===null?(r.next=r,uC(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=GN(n,e,r,s),t!==null&&(r=jn(),Cr(t,n,s,r),hM(t,e,s))}}function uM(n){var e=n.alternate;return n===dt||e!==null&&e===dt}function dM(n,e){Cp=mb=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function hM(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,YE(n,t)}}var gb={readContext:er,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},gB={readContext:er,useCallback:function(n,e){return Lr().memoizedState=[n,e===void 0?null:e],n},useContext:er,useEffect:Dk,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,cv(4194308,4,rM.bind(null,e,n),t)},useLayoutEffect:function(n,e){return cv(4194308,4,n,e)},useInsertionEffect:function(n,e){return cv(4,2,n,e)},useMemo:function(n,e){var t=Lr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Lr();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=pB.bind(null,dt,n),[s.memoizedState,n]},useRef:function(n){var e=Lr();return n={current:n},e.memoizedState=n},useState:Lk,useDebugValue:bC,useDeferredValue:function(n){return Lr().memoizedState=n},useTransition:function(){var n=Lk(!1),e=n[0];return n=fB.bind(null,n[1]),Lr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=dt,r=Lr();if(it){if(t===void 0)throw Error(H(407));t=t()}else{if(t=e(),Kt===null)throw Error(H(349));tu&30||YN(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,Dk(JN.bind(null,s,i,n),[n]),s.flags|=2048,em(9,QN.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Lr(),e=Kt.identifierPrefix;if(it){var t=oo,s=io;t=(s&~(1<<32-Er(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=Jp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=hB++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},yB={readContext:er,useCallback:oM,useContext:er,useEffect:vC,useImperativeHandle:iM,useInsertionEffect:nM,useLayoutEffect:sM,useMemo:aM,useReducer:J1,useRef:tM,useState:function(){return J1(Zp)},useDebugValue:bC,useDeferredValue:function(n){var e=tr();return lM(e,It.memoizedState,n)},useTransition:function(){var n=J1(Zp)[0],e=tr().memoizedState;return[n,e]},useMutableSource:KN,useSyncExternalStore:XN,useId:cM,unstable_isNewReconciler:!1},vB={readContext:er,useCallback:oM,useContext:er,useEffect:vC,useImperativeHandle:iM,useInsertionEffect:nM,useLayoutEffect:sM,useMemo:aM,useReducer:Z1,useRef:tM,useState:function(){return Z1(Zp)},useDebugValue:bC,useDeferredValue:function(n){var e=tr();return It===null?e.memoizedState=n:lM(e,It.memoizedState,n)},useTransition:function(){var n=Z1(Zp)[0],e=tr().memoizedState;return[n,e]},useMutableSource:KN,useSyncExternalStore:XN,useId:cM,unstable_isNewReconciler:!1};function ar(n,e){if(n&&n.defaultProps){e=ft({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function vA(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:ft({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Hw={isMounted:function(n){return(n=n._reactInternals)?cu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=jn(),r=za(n),i=co(s,r);i.payload=e,t!=null&&(i.callback=t),e=$a(n,i,r),e!==null&&(Cr(e,n,r,s),av(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=jn(),r=za(n),i=co(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=$a(n,i,r),e!==null&&(Cr(e,n,r,s),av(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=jn(),s=za(n),r=co(t,s);r.tag=2,e!=null&&(r.callback=e),e=$a(n,r,s),e!==null&&(Cr(e,n,s,t),av(e,n,s))}};function Ik(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!Wp(t,s)||!Wp(r,i):!0}function fM(n,e,t){var s=!1,r=qa,i=e.contextType;return typeof i=="object"&&i!==null?i=er(i):(r=Zn(e)?Zc:Sn.current,s=e.contextTypes,i=(s=s!=null)?af(n,r):qa),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Hw,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function Ok(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&Hw.enqueueReplaceState(e,e.state,null)}function bA(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},dC(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=er(i):(i=Zn(e)?Zc:Sn.current,r.context=af(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(vA(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Hw.enqueueReplaceState(r,r.state,null),fb(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function df(n,e){try{var t="",s=e;do t+=WF(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function eS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function xA(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var bB=typeof WeakMap=="function"?WeakMap:Map;function pM(n,e,t){t=co(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){vb||(vb=!0,RA=s),xA(n,e)},t}function mM(n,e,t){t=co(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){xA(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){xA(n,e),typeof s!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Fk(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new bB;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=jB.bind(null,n,e,t),e.then(n,n))}function Bk(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function $k(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=co(-1,1),e.tag=2,$a(t,e,1))),t.lanes|=1),n)}var xB=So.ReactCurrentOwner,Qn=!1;function Nn(n,e,t,s){e.child=n===null?HN(e,null,t,s):cf(e,n.child,t,s)}function Vk(n,e,t,s,r){t=t.render;var i=e.ref;return td(e,r),s=gC(n,e,t,s,i,r),t=yC(),n!==null&&!Qn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,yo(n,e,r)):(it&&t&&rC(e),e.flags|=1,Nn(n,e,s,r),e.child)}function zk(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!TC(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,gM(n,e,i,s,r)):(n=fv(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:Wp,t(o,s)&&n.ref===e.ref)return yo(n,e,r)}return e.flags|=1,n=Ua(i,s),n.ref=e.ref,n.return=e,e.child=n}function gM(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(Wp(i,s)&&n.ref===e.ref)if(Qn=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(Qn=!0);else return e.lanes=n.lanes,yo(n,e,r)}return wA(n,e,t,s,r)}function yM(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Vu,_s),_s|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Xe(Vu,_s),_s|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,Xe(Vu,_s),_s|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,Xe(Vu,_s),_s|=s;return Nn(n,e,r,t),e.child}function vM(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function wA(n,e,t,s,r){var i=Zn(t)?Zc:Sn.current;return i=af(e,i),td(e,r),t=gC(n,e,t,s,i,r),s=yC(),n!==null&&!Qn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,yo(n,e,r)):(it&&s&&rC(e),e.flags|=1,Nn(n,e,t,r),e.child)}function Uk(n,e,t,s,r){if(Zn(t)){var i=!0;lb(e)}else i=!1;if(td(e,r),e.stateNode===null)uv(n,e),fM(e,t,s),bA(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=er(u):(u=Zn(t)?Zc:Sn.current,u=af(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==u)&&Ok(e,o,s,u),Ro=!1;var f=e.memoizedState;o.state=f,fb(e,s,o,r),c=e.memoizedState,a!==s||f!==c||Jn.current||Ro?(typeof d=="function"&&(vA(e,t,d,s),c=e.memoizedState),(a=Ro||Ik(e,t,a,s,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,WN(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ar(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=er(c):(c=Zn(t)?Zc:Sn.current,c=af(e,c));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&Ok(e,o,s,c),Ro=!1,f=e.memoizedState,o.state=f,fb(e,s,o,r);var y=e.memoizedState;a!==h||f!==y||Jn.current||Ro?(typeof m=="function"&&(vA(e,t,m,s),y=e.memoizedState),(u=Ro||Ik(e,t,u,s,f,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return SA(n,e,t,s,i,r)}function SA(n,e,t,s,r,i){vM(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&kk(e,t,!1),yo(n,e,i);s=e.stateNode,xB.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=cf(e,n.child,null,i),e.child=cf(e,null,a,i)):Nn(n,e,a,i),e.memoizedState=s.state,r&&kk(e,t,!0),e.child}function bM(n){var e=n.stateNode;e.pendingContext?Tk(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Tk(n,e.context,!1),hC(n,e.containerInfo)}function Hk(n,e,t,s,r){return lf(),oC(r),e.flags|=256,Nn(n,e,t,s),e.child}var AA={dehydrated:null,treeContext:null,retryLane:0};function _A(n){return{baseLanes:n,cachePool:null,transitions:null}}function xM(n,e,t){var s=e.pendingProps,r=lt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Xe(lt,r&1),n===null)return gA(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=qw(o,s,0,null),n=Jc(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=_A(t),e.memoizedState=AA,n):xC(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return wB(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Ua(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Ua(a,i):(i=Jc(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?_A(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=AA,s}return i=n.child,n=i.sibling,s=Ua(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function xC(n,e){return e=qw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ty(n,e,t,s){return s!==null&&oC(s),cf(e,n.child,null,t),n=xC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function wB(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=eS(Error(H(422))),Ty(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=qw({mode:"visible",children:s.children},r,0,null),i=Jc(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&cf(e,n.child,null,o),e.child.memoizedState=_A(o),e.memoizedState=AA,i);if(!(e.mode&1))return Ty(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(H(419)),s=eS(i,s,void 0),Ty(n,e,o,s)}if(a=(o&n.childLanes)!==0,Qn||a){if(s=Kt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,go(n,r),Cr(s,n,r,-1))}return CC(),s=eS(Error(H(421))),Ty(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=LB.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,Cs=Ba(r.nextSibling),Ts=e,it=!0,_r=null,n!==null&&(Xs[Ys++]=io,Xs[Ys++]=oo,Xs[Ys++]=eu,io=n.id,oo=n.overflow,eu=e),e=xC(e,s.children),e.flags|=4096,e)}function Gk(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),yA(n.return,e,t)}function tS(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function wM(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Nn(n,e,s.children,t),s=lt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Gk(n,t,e);else if(n.tag===19)Gk(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Xe(lt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&pb(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),tS(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&pb(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}tS(e,!0,t,null,i);break;case"together":tS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function yo(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),nu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(H(153));if(e.child!==null){for(n=e.child,t=Ua(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ua(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function SB(n,e,t){switch(e.tag){case 3:bM(e),lf();break;case 5:qN(e);break;case 1:Zn(e.type)&&lb(e);break;case 4:hC(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Xe(db,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Xe(lt,lt.current&1),e.flags|=128,null):t&e.child.childLanes?xM(n,e,t):(Xe(lt,lt.current&1),n=yo(n,e,t),n!==null?n.sibling:null);Xe(lt,lt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return wM(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Xe(lt,lt.current),s)break;return null;case 22:case 23:return e.lanes=0,yM(n,e,t)}return yo(n,e,t)}var SM,EA,AM,_M;SM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};EA=function(){};AM=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,xl(ci.current);var i=null;switch(t){case"input":r=qS(n,r),s=qS(n,s),i=[];break;case"select":r=ft({},r,{value:void 0}),s=ft({},s,{value:void 0}),i=[];break;case"textarea":r=YS(n,r),s=YS(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=ob)}JS(t,s);var o;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Bp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Bp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ze("scroll",n),i||a===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};_M=function(n,e,t,s){t!==s&&(e.flags|=4)};function jf(n,e){if(!it)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function cn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function AB(n,e,t){var s=e.pendingProps;switch(iC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return Zn(e.type)&&ab(),cn(e),null;case 3:return s=e.stateNode,uf(),et(Jn),et(Sn),pC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Ey(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(jA(_r),_r=null))),EA(n,e),cn(e),null;case 5:fC(e);var r=xl(Qp.current);if(t=e.type,n!==null&&e.stateNode!=null)AM(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(H(166));return cn(e),null}if(n=xl(ci.current),Ey(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[oi]=e,s[Xp]=i,n=(e.mode&1)!==0,t){case"dialog":Ze("cancel",s),Ze("close",s);break;case"iframe":case"object":case"embed":Ze("load",s);break;case"video":case"audio":for(r=0;r<Yf.length;r++)Ze(Yf[r],s);break;case"source":Ze("error",s);break;case"img":case"image":case"link":Ze("error",s),Ze("load",s);break;case"details":Ze("toggle",s);break;case"input":ek(s,i),Ze("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Ze("invalid",s);break;case"textarea":nk(s,i),Ze("invalid",s)}JS(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&_y(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&_y(s.textContent,a,n),r=["children",""+a]):Bp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ze("scroll",s)}switch(t){case"input":gy(s),tk(s,i,!0);break;case"textarea":gy(s),sk(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ob)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=JR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[oi]=e,n[Xp]=s,SM(n,e,!1,!1),e.stateNode=n;e:{switch(o=ZS(t,s),t){case"dialog":Ze("cancel",n),Ze("close",n),r=s;break;case"iframe":case"object":case"embed":Ze("load",n),r=s;break;case"video":case"audio":for(r=0;r<Yf.length;r++)Ze(Yf[r],n);r=s;break;case"source":Ze("error",n),r=s;break;case"img":case"image":case"link":Ze("error",n),Ze("load",n),r=s;break;case"details":Ze("toggle",n),r=s;break;case"input":ek(n,s),r=qS(n,s),Ze("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=ft({},s,{value:void 0}),Ze("invalid",n);break;case"textarea":nk(n,s),r=YS(n,s),Ze("invalid",n);break;default:r=s}JS(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?tN(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ZR(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&$p(n,c):typeof c=="number"&&$p(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Bp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ze("scroll",n):c!=null&&HE(n,i,c,o))}switch(t){case"input":gy(n),tk(n,s,!1);break;case"textarea":gy(n),sk(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Wa(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?Qu(n,!!s.multiple,i,!1):s.defaultValue!=null&&Qu(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=ob)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(n&&e.stateNode!=null)_M(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(H(166));if(t=xl(Qp.current),xl(ci.current),Ey(e)){if(s=e.stateNode,t=e.memoizedProps,s[oi]=e,(i=s.nodeValue!==t)&&(n=Ts,n!==null))switch(n.tag){case 3:_y(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&_y(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[oi]=e,e.stateNode=s}return cn(e),null;case 13:if(et(lt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(it&&Cs!==null&&e.mode&1&&!(e.flags&128))zN(),lf(),e.flags|=98560,i=!1;else if(i=Ey(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[oi]=e}else lf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),i=!1}else _r!==null&&(jA(_r),_r=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||lt.current&1?Ft===0&&(Ft=3):CC())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return uf(),EA(n,e),n===null&&qp(e.stateNode.containerInfo),cn(e),null;case 10:return cC(e.type._context),cn(e),null;case 17:return Zn(e.type)&&ab(),cn(e),null;case 19:if(et(lt),i=e.memoizedState,i===null)return cn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)jf(i,!1);else{if(Ft!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=pb(n),o!==null){for(e.flags|=128,jf(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Xe(lt,lt.current&1|2),e.child}n=n.sibling}i.tail!==null&&At()>hf&&(e.flags|=128,s=!0,jf(i,!1),e.lanes=4194304)}else{if(!s)if(n=pb(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),jf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return cn(e),null}else 2*At()-i.renderingStartTime>hf&&t!==1073741824&&(e.flags|=128,s=!0,jf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=At(),e.sibling=null,t=lt.current,Xe(lt,s?t&1|2:t&1),e):(cn(e),null);case 22:case 23:return EC(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?_s&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function _B(n,e){switch(iC(e),e.tag){case 1:return Zn(e.type)&&ab(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return uf(),et(Jn),et(Sn),pC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return fC(e),null;case 13:if(et(lt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(H(340));lf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return et(lt),null;case 4:return uf(),null;case 10:return cC(e.type._context),null;case 22:case 23:return EC(),null;case 24:return null;default:return null}}var ky=!1,bn=!1,EB=typeof WeakSet=="function"?WeakSet:Set,Z=null;function $u(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){vt(n,e,s)}else t.current=null}function CA(n,e,t){try{t()}catch(s){vt(n,e,s)}}var Wk=!1;function CB(n,e){if(cA=sb,n=PN(),sC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===n)break t;if(f===t&&++u===r&&(a=o),f===i&&++d===s&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(uA={focusedElem:n,selectionRange:t},sb=!1,Z=e;Z!==null;)if(e=Z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Z=n;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,S=y.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ar(e.type,g),S);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(E){vt(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}return y=Wk,Wk=!1,y}function Tp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&CA(e,t,i)}r=r.next}while(r!==s)}}function Gw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function TA(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function EM(n){var e=n.alternate;e!==null&&(n.alternate=null,EM(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[oi],delete e[Xp],delete e[fA],delete e[lB],delete e[cB])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function CM(n){return n.tag===5||n.tag===3||n.tag===4}function qk(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||CM(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function kA(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=ob));else if(s!==4&&(n=n.child,n!==null))for(kA(n,e,t),n=n.sibling;n!==null;)kA(n,e,t),n=n.sibling}function PA(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(PA(n,e,t),n=n.sibling;n!==null;)PA(n,e,t),n=n.sibling}var sn=null,Sr=!1;function _o(n,e,t){for(t=t.child;t!==null;)TM(n,e,t),t=t.sibling}function TM(n,e,t){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(Ow,t)}catch{}switch(t.tag){case 5:bn||$u(t,e);case 6:var s=sn,r=Sr;sn=null,_o(n,e,t),sn=s,Sr=r,sn!==null&&(Sr?(n=sn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):sn.removeChild(t.stateNode));break;case 18:sn!==null&&(Sr?(n=sn,t=t.stateNode,n.nodeType===8?K1(n.parentNode,t):n.nodeType===1&&K1(n,t),Hp(n)):K1(sn,t.stateNode));break;case 4:s=sn,r=Sr,sn=t.stateNode.containerInfo,Sr=!0,_o(n,e,t),sn=s,Sr=r;break;case 0:case 11:case 14:case 15:if(!bn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&CA(t,e,o),r=r.next}while(r!==s)}_o(n,e,t);break;case 1:if(!bn&&($u(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){vt(t,e,a)}_o(n,e,t);break;case 21:_o(n,e,t);break;case 22:t.mode&1?(bn=(s=bn)||t.memoizedState!==null,_o(n,e,t),bn=s):_o(n,e,t);break;default:_o(n,e,t)}}function Kk(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new EB),e.forEach(function(s){var r=DB.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function sr(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:sn=a.stateNode,Sr=!1;break e;case 3:sn=a.stateNode.containerInfo,Sr=!0;break e;case 4:sn=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(sn===null)throw Error(H(160));TM(i,o,r),sn=null,Sr=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){vt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kM(e,n),e=e.sibling}function kM(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(sr(e,n),Rr(n),s&4){try{Tp(3,n,n.return),Gw(3,n)}catch(g){vt(n,n.return,g)}try{Tp(5,n,n.return)}catch(g){vt(n,n.return,g)}}break;case 1:sr(e,n),Rr(n),s&512&&t!==null&&$u(t,t.return);break;case 5:if(sr(e,n),Rr(n),s&512&&t!==null&&$u(t,t.return),n.flags&32){var r=n.stateNode;try{$p(r,"")}catch(g){vt(n,n.return,g)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&YR(r,i),ZS(a,o);var u=ZS(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?tN(r,h):d==="dangerouslySetInnerHTML"?ZR(r,h):d==="children"?$p(r,h):HE(r,d,h,u)}switch(a){case"input":KS(r,i);break;case"textarea":QR(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Qu(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Qu(r,!!i.multiple,i.defaultValue,!0):Qu(r,!!i.multiple,i.multiple?[]:"",!1))}r[Xp]=i}catch(g){vt(n,n.return,g)}}break;case 6:if(sr(e,n),Rr(n),s&4){if(n.stateNode===null)throw Error(H(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(g){vt(n,n.return,g)}}break;case 3:if(sr(e,n),Rr(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{Hp(e.containerInfo)}catch(g){vt(n,n.return,g)}break;case 4:sr(e,n),Rr(n);break;case 13:sr(e,n),Rr(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(AC=At())),s&4&&Kk(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(bn=(u=bn)||d,sr(e,n),bn=u):sr(e,n),Rr(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Z=n,d=n.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,m=f.child,f.tag){case 0:case 11:case 14:case 15:Tp(4,f,f.return);break;case 1:$u(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){vt(s,t,g)}}break;case 5:$u(f,f.return);break;case 22:if(f.memoizedState!==null){Yk(h);continue}}m!==null?(m.return=f,Z=m):Yk(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=eN("display",o))}catch(g){vt(n,n.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){vt(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:sr(e,n),Rr(n),s&4&&Kk(n);break;case 21:break;default:sr(e,n),Rr(n)}}function Rr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(CM(t)){var s=t;break e}t=t.return}throw Error(H(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&($p(r,""),s.flags&=-33);var i=qk(n);PA(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=qk(n);kA(n,a,o);break;default:throw Error(H(161))}}catch(c){vt(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function TB(n,e,t){Z=n,PM(n)}function PM(n,e,t){for(var s=(n.mode&1)!==0;Z!==null;){var r=Z,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||ky;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||bn;a=ky;var u=bn;if(ky=o,(bn=c)&&!u)for(Z=r;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?Qk(r):c!==null?(c.return=o,Z=c):Qk(r);for(;i!==null;)Z=i,PM(i),i=i.sibling;Z=r,ky=a,bn=u}Xk(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Z=i):Xk(n)}}function Xk(n){for(;Z!==null;){var e=Z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bn||Gw(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!bn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ar(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jk(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}jk(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Hp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}bn||e.flags&512&&TA(e)}catch(f){vt(e,e.return,f)}}if(e===n){Z=null;break}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}}function Yk(n){for(;Z!==null;){var e=Z;if(e===n){Z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Z=t;break}Z=e.return}}function Qk(n){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Gw(4,e)}catch(c){vt(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){vt(e,r,c)}}var i=e.return;try{TA(e)}catch(c){vt(e,i,c)}break;case 5:var o=e.return;try{TA(e)}catch(c){vt(e,o,c)}}}catch(c){vt(e,e.return,c)}if(e===n){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var kB=Math.ceil,yb=So.ReactCurrentDispatcher,wC=So.ReactCurrentOwner,Zs=So.ReactCurrentBatchConfig,ke=0,Kt=null,Pt=null,on=0,_s=0,Vu=Za(0),Ft=0,tm=null,nu=0,Ww=0,SC=0,kp=null,Xn=null,AC=0,hf=1/0,yi=null,vb=!1,RA=null,Va=null,Py=!1,Da=null,bb=0,Pp=0,NA=null,dv=-1,hv=0;function jn(){return ke&6?At():dv!==-1?dv:dv=At()}function za(n){return n.mode&1?ke&2&&on!==0?on&-on:dB.transition!==null?(hv===0&&(hv=fN()),hv):(n=De,n!==0||(n=window.event,n=n===void 0?16:xN(n.type)),n):1}function Cr(n,e,t,s){if(50<Pp)throw Pp=0,NA=null,Error(H(185));G0(n,t,s),(!(ke&2)||n!==Kt)&&(n===Kt&&(!(ke&2)&&(Ww|=t),Ft===4&&jo(n,on)),es(n,s),t===1&&ke===0&&!(e.mode&1)&&(hf=At()+500,zw&&el()))}function es(n,e){var t=n.callbackNode;d3(n,e);var s=nb(n,n===Kt?on:0);if(s===0)t!==null&&ok(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&ok(t),e===1)n.tag===0?uB(Jk.bind(null,n)):BN(Jk.bind(null,n)),oB(function(){!(ke&6)&&el()}),t=null;else{switch(pN(s)){case 1:t=XE;break;case 4:t=dN;break;case 16:t=tb;break;case 536870912:t=hN;break;default:t=tb}t=OM(t,RM.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function RM(n,e){if(dv=-1,hv=0,ke&6)throw Error(H(327));var t=n.callbackNode;if(nd()&&n.callbackNode!==t)return null;var s=nb(n,n===Kt?on:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=xb(n,s);else{e=s;var r=ke;ke|=2;var i=MM();(Kt!==n||on!==e)&&(yi=null,hf=At()+500,Qc(n,e));do try{NB();break}catch(a){NM(n,a)}while(1);lC(),yb.current=i,ke=r,Pt!==null?e=0:(Kt=null,on=0,e=Ft)}if(e!==0){if(e===2&&(r=rA(n),r!==0&&(s=r,e=MA(n,r))),e===1)throw t=tm,Qc(n,0),jo(n,s),es(n,At()),t;if(e===6)jo(n,s);else{if(r=n.current.alternate,!(s&30)&&!PB(r)&&(e=xb(n,s),e===2&&(i=rA(n),i!==0&&(s=i,e=MA(n,i))),e===1))throw t=tm,Qc(n,0),jo(n,s),es(n,At()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(H(345));case 2:ol(n,Xn,yi);break;case 3:if(jo(n,s),(s&130023424)===s&&(e=AC+500-At(),10<e)){if(nb(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){jn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=hA(ol.bind(null,n,Xn,yi),e);break}ol(n,Xn,yi);break;case 4:if(jo(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-Er(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=At()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*kB(s/1960))-s,10<s){n.timeoutHandle=hA(ol.bind(null,n,Xn,yi),s);break}ol(n,Xn,yi);break;case 5:ol(n,Xn,yi);break;default:throw Error(H(329))}}}return es(n,At()),n.callbackNode===t?RM.bind(null,n):null}function MA(n,e){var t=kp;return n.current.memoizedState.isDehydrated&&(Qc(n,e).flags|=256),n=xb(n,e),n!==2&&(e=Xn,Xn=t,e!==null&&jA(e)),n}function jA(n){Xn===null?Xn=n:Xn.push.apply(Xn,n)}function PB(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!Tr(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jo(n,e){for(e&=~SC,e&=~Ww,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Er(e),s=1<<t;n[t]=-1,e&=~s}}function Jk(n){if(ke&6)throw Error(H(327));nd();var e=nb(n,0);if(!(e&1))return es(n,At()),null;var t=xb(n,e);if(n.tag!==0&&t===2){var s=rA(n);s!==0&&(e=s,t=MA(n,s))}if(t===1)throw t=tm,Qc(n,0),jo(n,e),es(n,At()),t;if(t===6)throw Error(H(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ol(n,Xn,yi),es(n,At()),null}function _C(n,e){var t=ke;ke|=1;try{return n(e)}finally{ke=t,ke===0&&(hf=At()+500,zw&&el())}}function su(n){Da!==null&&Da.tag===0&&!(ke&6)&&nd();var e=ke;ke|=1;var t=Zs.transition,s=De;try{if(Zs.transition=null,De=1,n)return n()}finally{De=s,Zs.transition=t,ke=e,!(ke&6)&&el()}}function EC(){_s=Vu.current,et(Vu)}function Qc(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,iB(t)),Pt!==null)for(t=Pt.return;t!==null;){var s=t;switch(iC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ab();break;case 3:uf(),et(Jn),et(Sn),pC();break;case 5:fC(s);break;case 4:uf();break;case 13:et(lt);break;case 19:et(lt);break;case 10:cC(s.type._context);break;case 22:case 23:EC()}t=t.return}if(Kt=n,Pt=n=Ua(n.current,null),on=_s=e,Ft=0,tm=null,SC=Ww=nu=0,Xn=kp=null,bl!==null){for(e=0;e<bl.length;e++)if(t=bl[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}bl=null}return n}function NM(n,e){do{var t=Pt;try{if(lC(),lv.current=gb,mb){for(var s=dt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}mb=!1}if(tu=0,qt=It=dt=null,Cp=!1,Jp=0,wC.current=null,t===null||t.return===null){Ft=1,tm=e,Pt=null;break}e:{var i=n,o=t.return,a=t,c=e;if(e=on,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Bk(o);if(m!==null){m.flags&=-257,$k(m,o,a,i,e),m.mode&1&&Fk(i,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){Fk(i,u,e),CC();break e}c=Error(H(426))}}else if(it&&a.mode&1){var S=Bk(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),$k(S,o,a,i,e),oC(df(c,a));break e}}i=c=df(c,a),Ft!==4&&(Ft=2),kp===null?kp=[i]:kp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=pM(i,c,e);Mk(i,v);break e;case 1:a=c;var x=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Va===null||!Va.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=mM(i,a,e);Mk(i,E);break e}}i=i.return}while(i!==null)}LM(t)}catch(T){e=T,Pt===t&&t!==null&&(Pt=t=t.return);continue}break}while(1)}function MM(){var n=yb.current;return yb.current=gb,n===null?gb:n}function CC(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Kt===null||!(nu&268435455)&&!(Ww&268435455)||jo(Kt,on)}function xb(n,e){var t=ke;ke|=2;var s=MM();(Kt!==n||on!==e)&&(yi=null,Qc(n,e));do try{RB();break}catch(r){NM(n,r)}while(1);if(lC(),ke=t,yb.current=s,Pt!==null)throw Error(H(261));return Kt=null,on=0,Ft}function RB(){for(;Pt!==null;)jM(Pt)}function NB(){for(;Pt!==null&&!n3();)jM(Pt)}function jM(n){var e=IM(n.alternate,n,_s);n.memoizedProps=n.pendingProps,e===null?LM(n):Pt=e,wC.current=null}function LM(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=_B(t,e),t!==null){t.flags&=32767,Pt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ft=6,Pt=null;return}}else if(t=AB(t,e,_s),t!==null){Pt=t;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=n}while(e!==null);Ft===0&&(Ft=5)}function ol(n,e,t){var s=De,r=Zs.transition;try{Zs.transition=null,De=1,MB(n,e,t,s)}finally{Zs.transition=r,De=s}return null}function MB(n,e,t,s){do nd();while(Da!==null);if(ke&6)throw Error(H(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(H(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(h3(n,i),n===Kt&&(Pt=Kt=null,on=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Py||(Py=!0,OM(tb,function(){return nd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Zs.transition,Zs.transition=null;var o=De;De=1;var a=ke;ke|=4,wC.current=null,CB(n,t),kM(t,n),J3(uA),sb=!!cA,uA=cA=null,n.current=t,TB(t),s3(),ke=a,De=o,Zs.transition=i}else n.current=t;if(Py&&(Py=!1,Da=n,bb=r),i=n.pendingLanes,i===0&&(Va=null),o3(t.stateNode),es(n,At()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(vb)throw vb=!1,n=RA,RA=null,n;return bb&1&&n.tag!==0&&nd(),i=n.pendingLanes,i&1?n===NA?Pp++:(Pp=0,NA=n):Pp=0,el(),null}function nd(){if(Da!==null){var n=pN(bb),e=Zs.transition,t=De;try{if(Zs.transition=null,De=16>n?16:n,Da===null)var s=!1;else{if(n=Da,Da=null,bb=0,ke&6)throw Error(H(331));var r=ke;for(ke|=4,Z=n.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Tp(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,m=d.return;if(EM(d),d===u){Z=null;break}if(f!==null){f.return=m,Z=f;break}Z=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Tp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Z=v;break e}Z=i.return}}var x=n.current;for(Z=x;Z!==null;){o=Z;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Z=A;else e:for(o=x;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Gw(9,a)}}catch(T){vt(a,a.return,T)}if(a===o){Z=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Z=E;break e}Z=a.return}}if(ke=r,el(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(Ow,n)}catch{}s=!0}return s}finally{De=t,Zs.transition=e}}return!1}function Zk(n,e,t){e=df(t,e),e=pM(n,e,1),n=$a(n,e,1),e=jn(),n!==null&&(G0(n,1,e),es(n,e))}function vt(n,e,t){if(n.tag===3)Zk(n,n,t);else for(;e!==null;){if(e.tag===3){Zk(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Va===null||!Va.has(s))){n=df(t,n),n=mM(e,n,1),e=$a(e,n,1),n=jn(),e!==null&&(G0(e,1,n),es(e,n));break}}e=e.return}}function jB(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=jn(),n.pingedLanes|=n.suspendedLanes&t,Kt===n&&(on&t)===t&&(Ft===4||Ft===3&&(on&130023424)===on&&500>At()-AC?Qc(n,0):SC|=t),es(n,e)}function DM(n,e){e===0&&(n.mode&1?(e=by,by<<=1,!(by&130023424)&&(by=4194304)):e=1);var t=jn();n=go(n,e),n!==null&&(G0(n,e,t),es(n,t))}function LB(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),DM(n,t)}function DB(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(H(314))}s!==null&&s.delete(e),DM(n,t)}var IM;IM=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Jn.current)Qn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qn=!1,SB(n,e,t);Qn=!!(n.flags&131072)}else Qn=!1,it&&e.flags&1048576&&$N(e,ub,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;uv(n,e),n=e.pendingProps;var r=af(e,Sn.current);td(e,t),r=gC(null,e,s,n,r,t);var i=yC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zn(s)?(i=!0,lb(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,dC(e),r.updater=Hw,e.stateNode=r,r._reactInternals=e,bA(e,s,n,t),e=SA(null,e,s,!0,i,t)):(e.tag=0,it&&i&&rC(e),Nn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(uv(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=OB(s),n=ar(s,n),r){case 0:e=wA(null,e,s,n,t);break e;case 1:e=Uk(null,e,s,n,t);break e;case 11:e=Vk(null,e,s,n,t);break e;case 14:e=zk(null,e,s,ar(s.type,n),t);break e}throw Error(H(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ar(s,r),wA(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ar(s,r),Uk(n,e,s,r,t);case 3:e:{if(bM(e),n===null)throw Error(H(387));s=e.pendingProps,i=e.memoizedState,r=i.element,WN(n,e),fb(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=df(Error(H(423)),e),e=Hk(n,e,s,t,r);break e}else if(s!==r){r=df(Error(H(424)),e),e=Hk(n,e,s,t,r);break e}else for(Cs=Ba(e.stateNode.containerInfo.firstChild),Ts=e,it=!0,_r=null,t=HN(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(lf(),s===r){e=yo(n,e,t);break e}Nn(n,e,s,t)}e=e.child}return e;case 5:return qN(e),n===null&&gA(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,dA(s,r)?o=null:i!==null&&dA(s,i)&&(e.flags|=32),vM(n,e),Nn(n,e,o,t),e.child;case 6:return n===null&&gA(e),null;case 13:return xM(n,e,t);case 4:return hC(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=cf(e,null,s,t):Nn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ar(s,r),Vk(n,e,s,r,t);case 7:return Nn(n,e,e.pendingProps,t),e.child;case 8:return Nn(n,e,e.pendingProps.children,t),e.child;case 12:return Nn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Xe(db,s._currentValue),s._currentValue=o,i!==null)if(Tr(i.value,o)){if(i.children===r.children&&!Jn.current){e=yo(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=co(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),yA(i.return,t,e),a.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),yA(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,td(e,t),r=er(r),s=s(r),e.flags|=1,Nn(n,e,s,t),e.child;case 14:return s=e.type,r=ar(s,e.pendingProps),r=ar(s.type,r),zk(n,e,s,r,t);case 15:return gM(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:ar(s,r),uv(n,e),e.tag=1,Zn(s)?(n=!0,lb(e)):n=!1,td(e,t),fM(e,s,r),bA(e,s,r,t),SA(null,e,s,!0,n,t);case 19:return wM(n,e,t);case 22:return yM(n,e,t)}throw Error(H(156,e.tag))};function OM(n,e){return uN(n,e)}function IB(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(n,e,t,s){return new IB(n,e,t,s)}function TC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function OB(n){if(typeof n=="function")return TC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===WE)return 11;if(n===qE)return 14}return 2}function Ua(n,e){var t=n.alternate;return t===null?(t=Js(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function fv(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")TC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Nu:return Jc(t.children,r,i,e);case GE:o=8,r|=8;break;case US:return n=Js(12,t,e,r|2),n.elementType=US,n.lanes=i,n;case HS:return n=Js(13,t,e,r),n.elementType=HS,n.lanes=i,n;case GS:return n=Js(19,t,e,r),n.elementType=GS,n.lanes=i,n;case qR:return qw(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case GR:o=10;break e;case WR:o=9;break e;case WE:o=11;break e;case qE:o=14;break e;case Po:o=16,s=null;break e}throw Error(H(130,n==null?n:typeof n,""))}return e=Js(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function Jc(n,e,t,s){return n=Js(7,n,s,e),n.lanes=t,n}function qw(n,e,t,s){return n=Js(22,n,s,e),n.elementType=qR,n.lanes=t,n.stateNode={isHidden:!1},n}function nS(n,e,t){return n=Js(6,n,null,e),n.lanes=t,n}function sS(n,e,t){return e=Js(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function FB(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O1(0),this.expirationTimes=O1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O1(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function kC(n,e,t,s,r,i,o,a,c){return n=new FB(n,e,t,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Js(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},dC(i),n}function BB(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ru,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function FM(n){if(!n)return qa;n=n._reactInternals;e:{if(cu(n)!==n||n.tag!==1)throw Error(H(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(n.tag===1){var t=n.type;if(Zn(t))return FN(n,t,e)}return e}function BM(n,e,t,s,r,i,o,a,c){return n=kC(t,s,!0,n,r,i,o,a,c),n.context=FM(null),t=n.current,s=jn(),r=za(t),i=co(s,r),i.callback=e??null,$a(t,i,r),n.current.lanes=r,G0(n,r,s),es(n,s),n}function Kw(n,e,t,s){var r=e.current,i=jn(),o=za(r);return t=FM(t),e.context===null?e.context=t:e.pendingContext=t,e=co(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=$a(r,e,o),n!==null&&(Cr(n,r,o,i),av(n,r,o)),o}function wb(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function eP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function PC(n,e){eP(n,e),(n=n.alternate)&&eP(n,e)}function $B(){return null}var $M=typeof reportError=="function"?reportError:function(n){console.error(n)};function RC(n){this._internalRoot=n}Xw.prototype.render=RC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(H(409));Kw(n,e,null,null)};Xw.prototype.unmount=RC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;su(function(){Kw(null,n,null,null)}),e[mo]=null}};function Xw(n){this._internalRoot=n}Xw.prototype.unstable_scheduleHydration=function(n){if(n){var e=yN();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Mo.length&&e!==0&&e<Mo[t].priority;t++);Mo.splice(t,0,n),t===0&&bN(n)}};function NC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Yw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function tP(){}function VB(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=wb(o);i.call(u)}}var o=BM(e,s,n,0,null,!1,!1,"",tP);return n._reactRootContainer=o,n[mo]=o.current,qp(n.nodeType===8?n.parentNode:n),su(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=wb(c);a.call(u)}}var c=kC(n,0,!1,null,null,!1,!1,"",tP);return n._reactRootContainer=c,n[mo]=c.current,qp(n.nodeType===8?n.parentNode:n),su(function(){Kw(e,c,t,s)}),c}function Qw(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=wb(o);a.call(c)}}Kw(e,o,n,r)}else o=VB(t,e,n,r,s);return wb(o)}mN=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Xf(e.pendingLanes);t!==0&&(YE(e,t|1),es(e,At()),!(ke&6)&&(hf=At()+500,el()))}break;case 13:su(function(){var s=go(n,1);if(s!==null){var r=jn();Cr(s,n,1,r)}}),PC(n,1)}};QE=function(n){if(n.tag===13){var e=go(n,134217728);if(e!==null){var t=jn();Cr(e,n,134217728,t)}PC(n,134217728)}};gN=function(n){if(n.tag===13){var e=za(n),t=go(n,e);if(t!==null){var s=jn();Cr(t,n,e,s)}PC(n,e)}};yN=function(){return De};vN=function(n,e){var t=De;try{return De=n,e()}finally{De=t}};tA=function(n,e,t){switch(e){case"input":if(KS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=Vw(s);if(!r)throw Error(H(90));XR(s),KS(s,r)}}}break;case"textarea":QR(n,t);break;case"select":e=t.value,e!=null&&Qu(n,!!t.multiple,e,!1)}};rN=_C;iN=su;var zB={usingClientEntryPoint:!1,Events:[q0,Du,Vw,nN,sN,_C]},Lf={findFiberByHostInstance:vl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},UB={bundleType:Lf.bundleType,version:Lf.version,rendererPackageName:Lf.rendererPackageName,rendererConfig:Lf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:So.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=lN(n),n===null?null:n.stateNode},findFiberByHostInstance:Lf.findFiberByHostInstance||$B,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ry.isDisabled&&Ry.supportsFiber)try{Ow=Ry.inject(UB),li=Ry}catch{}}Ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zB;Ns.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!NC(e))throw Error(H(200));return BB(n,e,null,t)};Ns.createRoot=function(n,e){if(!NC(n))throw Error(H(299));var t=!1,s="",r=$M;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=kC(n,1,!1,null,null,t,!1,s,r),n[mo]=e.current,qp(n.nodeType===8?n.parentNode:n),new RC(e)};Ns.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(H(188)):(n=Object.keys(n).join(","),Error(H(268,n)));return n=lN(e),n=n===null?null:n.stateNode,n};Ns.flushSync=function(n){return su(n)};Ns.hydrate=function(n,e,t){if(!Yw(e))throw Error(H(200));return Qw(null,n,e,!0,t)};Ns.hydrateRoot=function(n,e,t){if(!NC(n))throw Error(H(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=$M;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=BM(e,null,n,1,t??null,r,!1,i,o),n[mo]=e.current,qp(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Xw(e)};Ns.render=function(n,e,t){if(!Yw(e))throw Error(H(200));return Qw(null,n,e,!1,t)};Ns.unmountComponentAtNode=function(n){if(!Yw(n))throw Error(H(40));return n._reactRootContainer?(su(function(){Qw(null,null,n,!1,function(){n._reactRootContainer=null,n[mo]=null})}),!0):!1};Ns.unstable_batchedUpdates=_C;Ns.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Yw(t))throw Error(H(200));if(n==null||n._reactInternals===void 0)throw Error(H(38));return Qw(n,e,t,!1,s)};Ns.version="18.3.1-next-f1338f8080-20240426";function VM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VM)}catch(n){console.error(n)}}VM(),VR.exports=Ns;var Jw=VR.exports;const HB=Dw(Jw);var nP=Jw;VS.createRoot=nP.createRoot,VS.hydrateRoot=nP.hydrateRoot;function Mn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function sP(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function zM(...n){return e=>{let t=!1;const s=n.map(r=>{const i=sP(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():sP(n[r],null)}}}}function vo(...n){return _.useCallback(zM(...n),n)}function Zw(n,e=[]){let t=[];function s(i,o){const a=_.createContext(o),c=t.length;t=[...t,o];const u=h=>{var v;const{scope:f,children:m,...y}=h,g=((v=f==null?void 0:f[n])==null?void 0:v[c])||a,S=_.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:S,children:m})};u.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[n])==null?void 0:g[c])||a,y=_.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=t.map(o=>_.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return _.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return r.scopeName=n,[s,GB(r,...e)]}function GB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Sb(n){const e=qB(n),t=_.forwardRef((s,r)=>{const{children:i,...o}=s,a=_.Children.toArray(i),c=a.find(XB);if(c){const u=c.props.children,d=a.map(h=>h===c?_.Children.count(u)>1?_.Children.only(null):_.isValidElement(u)?u.props.children:null:h);return p.jsx(e,{...o,ref:r,children:_.isValidElement(u)?_.cloneElement(u,void 0,d):null})}return p.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var WB=Sb("Slot");function qB(n){const e=_.forwardRef((t,s)=>{const{children:r,...i}=t;if(_.isValidElement(r)){const o=QB(r),a=YB(i,r.props);return r.type!==_.Fragment&&(a.ref=s?zM(s,o):o),_.cloneElement(r,a)}return _.Children.count(r)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var KB=Symbol("radix.slottable");function XB(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===KB}function YB(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const c=i(...a);return r(...a),c}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function QB(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function UM(n){const e=n+"CollectionProvider",[t,s]=Zw(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:S,children:v}=g,x=Ae.useRef(null),A=Ae.useRef(new Map).current;return p.jsx(r,{scope:S,itemMap:A,collectionRef:x,children:v})};o.displayName=e;const a=n+"CollectionSlot",c=Sb(a),u=Ae.forwardRef((g,S)=>{const{scope:v,children:x}=g,A=i(a,v),E=vo(S,A.collectionRef);return p.jsx(c,{ref:E,children:x})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Sb(d),m=Ae.forwardRef((g,S)=>{const{scope:v,children:x,...A}=g,E=Ae.useRef(null),T=vo(S,E),P=i(d,v);return Ae.useEffect(()=>(P.itemMap.set(E,{ref:E,...A}),()=>void P.itemMap.delete(E))),p.jsx(f,{[h]:"",ref:T,children:x})});m.displayName=d;function y(g){const S=i(n+"CollectionConsumer",g);return Ae.useCallback(()=>{const x=S.collectionRef.current;if(!x)return[];const A=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(S.itemMap.values()).sort((P,k)=>A.indexOf(P.ref.current)-A.indexOf(k.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,s]}var JB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],In=JB.reduce((n,e)=>{const t=Sb(`Primitive.${e}`),s=_.forwardRef((r,i)=>{const{asChild:o,...a}=r,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function HM(n,e){n&&Jw.flushSync(()=>n.dispatchEvent(e))}function ru(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function ZB(n,e=globalThis==null?void 0:globalThis.document){const t=ru(n);_.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var e4="DismissableLayer",LA="dismissableLayer.update",t4="dismissableLayer.pointerDownOutside",n4="dismissableLayer.focusOutside",rP,GM=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),WM=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,u=_.useContext(GM),[d,h]=_.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=_.useState({}),y=vo(e,k=>h(k)),g=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(S),x=d?g.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,E=x>=v,T=r4(k=>{const R=k.target,M=[...u.branches].some(L=>L.contains(R));!E||M||(r==null||r(k),o==null||o(k),k.defaultPrevented||a==null||a())},f),P=i4(k=>{const R=k.target;[...u.branches].some(L=>L.contains(R))||(i==null||i(k),o==null||o(k),k.defaultPrevented||a==null||a())},f);return ZB(k=>{x===u.layers.size-1&&(s==null||s(k),!k.defaultPrevented&&a&&(k.preventDefault(),a()))},f),_.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(rP=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),iP(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=rP)}},[d,f,t,u]),_.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),iP())},[d,u]),_.useEffect(()=>{const k=()=>m({});return document.addEventListener(LA,k),()=>document.removeEventListener(LA,k)},[]),p.jsx(In.div,{...c,ref:y,style:{pointerEvents:A?E?"auto":"none":void 0,...n.style},onFocusCapture:Mn(n.onFocusCapture,P.onFocusCapture),onBlurCapture:Mn(n.onBlurCapture,P.onBlurCapture),onPointerDownCapture:Mn(n.onPointerDownCapture,T.onPointerDownCapture)})});WM.displayName=e4;var s4="DismissableLayerBranch",qM=_.forwardRef((n,e)=>{const t=_.useContext(GM),s=_.useRef(null),r=vo(e,s);return _.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),p.jsx(In.div,{...n,ref:r})});qM.displayName=s4;function r4(n,e=globalThis==null?void 0:globalThis.document){const t=ru(n),s=_.useRef(!1),r=_.useRef(()=>{});return _.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let c=function(){KM(t4,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function i4(n,e=globalThis==null?void 0:globalThis.document){const t=ru(n),s=_.useRef(!1);return _.useEffect(()=>{const r=i=>{i.target&&!s.current&&KM(n4,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function iP(){const n=new CustomEvent(LA);document.dispatchEvent(n)}function KM(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?HM(r,i):r.dispatchEvent(i)}var o4=WM,a4=qM,iu=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},l4="Portal",XM=_.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[r,i]=_.useState(!1);iu(()=>i(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?HB.createPortal(p.jsx(In.div,{...s,ref:e}),o):null});XM.displayName=l4;function c4(n,e){return _.useReducer((t,s)=>e[t][s]??t,n)}var MC=n=>{const{present:e,children:t}=n,s=u4(e),r=typeof t=="function"?t({present:s.isPresent}):_.Children.only(t),i=vo(s.ref,d4(r));return typeof t=="function"||s.isPresent?_.cloneElement(r,{ref:i}):null};MC.displayName="Presence";function u4(n){const[e,t]=_.useState(),s=_.useRef(null),r=_.useRef(n),i=_.useRef("none"),o=n?"mounted":"unmounted",[a,c]=c4(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const u=Ny(s.current);i.current=a==="mounted"?u:"none"},[a]),iu(()=>{const u=s.current,d=r.current;if(d!==n){const f=i.current,m=Ny(u);n?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),iu(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=Ny(s.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(c("ANIMATION_END"),!r.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},f=m=>{m.target===e&&(i.current=Ny(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(u=>{s.current=u?getComputedStyle(u):null,t(u)},[])}}function Ny(n){return(n==null?void 0:n.animationName)||"none"}function d4(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var h4=BR[" useInsertionEffect ".trim().toString()]||iu;function e1({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,i,o]=f4({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r;{const d=_.useRef(n!==void 0);_.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,s])}const u=_.useCallback(d=>{var h;if(a){const f=p4(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,n,i,o]);return[c,u]}function f4({defaultProp:n,onChange:e}){const[t,s]=_.useState(n),r=_.useRef(t),i=_.useRef(e);return h4(()=>{i.current=e},[e]),_.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,s,i]}function p4(n){return typeof n=="function"}var m4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),g4="VisuallyHidden",jC=_.forwardRef((n,e)=>p.jsx(In.span,{...n,ref:e,style:{...m4,...n.style}}));jC.displayName=g4;var LC="ToastProvider",[DC,y4,v4]=UM("Toast"),[YM,T9]=Zw("Toast",[v4]),[b4,t1]=YM(LC),QM=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=n,[a,c]=_.useState(null),[u,d]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${LC}\`. Expected non-empty \`string\`.`),p.jsx(DC.Provider,{scope:e,children:p.jsx(b4,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:_.useCallback(()=>d(m=>m+1),[]),onToastRemove:_.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};QM.displayName=LC;var JM="ToastViewport",x4=["F8"],DA="toast.viewportPause",IA="toast.viewportResume",ZM=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=x4,label:r="Notifications ({hotkey})",...i}=n,o=t1(JM,t),a=y4(t),c=_.useRef(null),u=_.useRef(null),d=_.useRef(null),h=_.useRef(null),f=vo(e,h,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;_.useEffect(()=>{const S=v=>{var A;s.length!==0&&s.every(E=>v[E]||v.code===E)&&((A=h.current)==null||A.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[s]),_.useEffect(()=>{const S=c.current,v=h.current;if(y&&S&&v){const x=()=>{if(!o.isClosePausedRef.current){const P=new CustomEvent(DA);v.dispatchEvent(P),o.isClosePausedRef.current=!0}},A=()=>{if(o.isClosePausedRef.current){const P=new CustomEvent(IA);v.dispatchEvent(P),o.isClosePausedRef.current=!1}},E=P=>{!S.contains(P.relatedTarget)&&A()},T=()=>{S.contains(document.activeElement)||A()};return S.addEventListener("focusin",x),S.addEventListener("focusout",E),S.addEventListener("pointermove",x),S.addEventListener("pointerleave",T),window.addEventListener("blur",x),window.addEventListener("focus",A),()=>{S.removeEventListener("focusin",x),S.removeEventListener("focusout",E),S.removeEventListener("pointermove",x),S.removeEventListener("pointerleave",T),window.removeEventListener("blur",x),window.removeEventListener("focus",A)}}},[y,o.isClosePausedRef]);const g=_.useCallback(({tabbingDirection:S})=>{const x=a().map(A=>{const E=A.ref.current,T=[E,...j4(E)];return S==="forwards"?T:T.reverse()});return(S==="forwards"?x.reverse():x).flat()},[a]);return _.useEffect(()=>{const S=h.current;if(S){const v=x=>{var T,P,k;const A=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!A){const R=document.activeElement,M=x.shiftKey;if(x.target===S&&M){(T=u.current)==null||T.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),z=D.findIndex(I=>I===R);rS(D.slice(z+1))?x.preventDefault():M?(P=u.current)==null||P.focus():(k=d.current)==null||k.focus()}};return S.addEventListener("keydown",v),()=>S.removeEventListener("keydown",v)}},[a,g]),p.jsxs(a4,{ref:c,role:"region","aria-label":r.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&p.jsx(OA,{ref:u,onFocusFromOutsideViewport:()=>{const S=g({tabbingDirection:"forwards"});rS(S)}}),p.jsx(DC.Slot,{scope:t,children:p.jsx(In.ol,{tabIndex:-1,...i,ref:f})}),y&&p.jsx(OA,{ref:d,onFocusFromOutsideViewport:()=>{const S=g({tabbingDirection:"backwards"});rS(S)}})]})});ZM.displayName=JM;var ej="ToastFocusProxy",OA=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=t1(ej,t);return p.jsx(jC,{tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&s()}})});OA.displayName=ej;var X0="Toast",w4="toast.swipeStart",S4="toast.swipeMove",A4="toast.swipeCancel",_4="toast.swipeEnd",tj=_.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...o}=n,[a,c]=e1({prop:s,defaultProp:r??!0,onChange:i,caller:X0});return p.jsx(MC,{present:t||a,children:p.jsx(T4,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:ru(n.onPause),onResume:ru(n.onResume),onSwipeStart:Mn(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Mn(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Mn(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Mn(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});tj.displayName=X0;var[E4,C4]=YM(X0,{onClose(){}}),T4=_.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...y}=n,g=t1(X0,t),[S,v]=_.useState(null),x=vo(e,I=>v(I)),A=_.useRef(null),E=_.useRef(null),T=r||g.duration,P=_.useRef(0),k=_.useRef(T),R=_.useRef(0),{onToastAdd:M,onToastRemove:L}=g,B=ru(()=>{var N;(S==null?void 0:S.contains(document.activeElement))&&((N=g.viewport)==null||N.focus()),o()}),D=_.useCallback(I=>{!I||I===1/0||(window.clearTimeout(R.current),P.current=new Date().getTime(),R.current=window.setTimeout(B,I))},[B]);_.useEffect(()=>{const I=g.viewport;if(I){const N=()=>{D(k.current),u==null||u()},j=()=>{const O=new Date().getTime()-P.current;k.current=k.current-O,window.clearTimeout(R.current),c==null||c()};return I.addEventListener(DA,j),I.addEventListener(IA,N),()=>{I.removeEventListener(DA,j),I.removeEventListener(IA,N)}}},[g.viewport,T,c,u,D]),_.useEffect(()=>{i&&!g.isClosePausedRef.current&&D(T)},[i,T,g.isClosePausedRef,D]),_.useEffect(()=>(M(),()=>L()),[M,L]);const z=_.useMemo(()=>S?lj(S):null,[S]);return g.viewport?p.jsxs(p.Fragment,{children:[z&&p.jsx(k4,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:z}),p.jsx(E4,{scope:t,onClose:B,children:Jw.createPortal(p.jsx(DC.ItemSlot,{scope:t,children:p.jsx(o4,{asChild:!0,onEscapeKeyDown:Mn(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||B(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(In.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Mn(n.onKeyDown,I=>{I.key==="Escape"&&(a==null||a(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:Mn(n.onPointerDown,I=>{I.button===0&&(A.current={x:I.clientX,y:I.clientY})}),onPointerMove:Mn(n.onPointerMove,I=>{if(!A.current)return;const N=I.clientX-A.current.x,j=I.clientY-A.current.y,O=!!E.current,F=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=F?$(0,N):0,W=F?0:$(0,j),K=I.pointerType==="touch"?10:2,Y={x:V,y:W},re={originalEvent:I,delta:Y};O?(E.current=Y,My(S4,h,re,{discrete:!1})):oP(Y,g.swipeDirection,K)?(E.current=Y,My(w4,d,re,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(N)>K||Math.abs(j)>K)&&(A.current=null)}),onPointerUp:Mn(n.onPointerUp,I=>{const N=E.current,j=I.target;if(j.hasPointerCapture(I.pointerId)&&j.releasePointerCapture(I.pointerId),E.current=null,A.current=null,N){const O=I.currentTarget,F={originalEvent:I,delta:N};oP(N,g.swipeDirection,g.swipeThreshold)?My(_4,m,F,{discrete:!0}):My(A4,f,F,{discrete:!0}),O.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),k4=n=>{const{__scopeToast:e,children:t,...s}=n,r=t1(X0,e),[i,o]=_.useState(!1),[a,c]=_.useState(!1);return N4(()=>o(!0)),_.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:p.jsx(XM,{asChild:!0,children:p.jsx(jC,{...s,children:i&&p.jsxs(p.Fragment,{children:[r.label," ",t]})})})},P4="ToastTitle",nj=_.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return p.jsx(In.div,{...s,ref:e})});nj.displayName=P4;var R4="ToastDescription",sj=_.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return p.jsx(In.div,{...s,ref:e})});sj.displayName=R4;var rj="ToastAction",ij=_.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?p.jsx(aj,{altText:t,asChild:!0,children:p.jsx(IC,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${rj}\`. Expected non-empty \`string\`.`),null)});ij.displayName=rj;var oj="ToastClose",IC=_.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=C4(oj,t);return p.jsx(aj,{asChild:!0,children:p.jsx(In.button,{type:"button",...s,ref:e,onClick:Mn(n.onClick,r.onClose)})})});IC.displayName=oj;var aj=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return p.jsx(In.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function lj(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),M4(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...lj(s))}}),e}function My(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?HM(r,i):r.dispatchEvent(i)}var oP=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function N4(n=()=>{}){const e=ru(n);iu(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function M4(n){return n.nodeType===n.ELEMENT_NODE}function j4(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function rS(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var L4=QM,cj=ZM,uj=tj,dj=nj,hj=sj,fj=ij,pj=IC;function mj(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=mj(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Sf(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=mj(n))&&(s&&(s+=" "),s+=e);return s}const aP=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,lP=Sf,gj=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return lP(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const f=aP(d)||aP(h);return r[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(y=>{let[g,S]=y;return Array.isArray(S)?S.includes({...i,...a}[g]):{...i,...a}[g]===S})?[...u,h,f]:u},[]);return lP(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};var D4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const I4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),me=(n,e)=>{const t=_.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...c},u)=>_.createElement("svg",{ref:u,...D4,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${I4(n)}`,...c},[...e.map(([d,h])=>_.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},O4=me("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),F4=me("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),B4=me("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),OC=me("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),$4=me("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),FC=me("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),V4=me("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),z4=me("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),U4=me("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),yj=me("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),H4=me("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),G4=me("CupSoda",[["path",{d:"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8",key:"8166m8"}],["path",{d:"M5 8h14",key:"pcz4l3"}],["path",{d:"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"yjz344"}],["path",{d:"m12 8 1-6h2",key:"3ybfa4"}]]),W4=me("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),vj=me("Drama",[["path",{d:"M 10 11h.01",key:"1lksi6"}],["path",{d:"M 14 6h.01",key:"1kxpxo"}],["path",{d:"M 18 6h.01",key:"1goweo"}],["path",{d:"M 6.5 13.1h.01",key:"1i19cj"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]]),q4=me("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),bj=me("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),n1=me("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),BC=me("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),xj=me("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),K4=me("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),$C=me("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),X4=me("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),Y4=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),wj=me("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Q4=me("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),J4=me("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Z4=me("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),e5=me("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),t5=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),n5=me("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),s5=me("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),VC=me("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),r5=me("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),i5=me("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]),zC=me("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Sj=me("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Aj=me("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),s1=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function o5(){for(var n=0,e,t,s="";n<arguments.length;)(e=arguments[n++])&&(t=_j(e))&&(s&&(s+=" "),s+=t);return s}function _j(n){if(typeof n=="string")return n;for(var e,t="",s=0;s<n.length;s++)n[s]&&(e=_j(n[s]))&&(t&&(t+=" "),t+=e);return t}var UC="-";function a5(n){var e=c5(n),t=n.conflictingClassGroups,s=n.conflictingClassGroupModifiers,r=s===void 0?{}:s;function i(a){var c=a.split(UC);return c[0]===""&&c.length!==1&&c.shift(),Ej(c,e)||l5(a)}function o(a,c){var u=t[a]||[];return c&&r[a]?[].concat(u,r[a]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function Ej(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],s=e.nextPart.get(t),r=s?Ej(n.slice(1),s):void 0;if(r)return r;if(e.validators.length!==0){var i=n.join(UC);return(o=e.validators.find(function(a){var c=a.validator;return c(i)}))==null?void 0:o.classGroupId}}var cP=/^\[(.+)\]$/;function l5(n){if(cP.test(n)){var e=cP.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function c5(n){var e=n.theme,t=n.prefix,s={nextPart:new Map,validators:[]},r=d5(Object.entries(n.classGroups),t);return r.forEach(function(i){var o=i[0],a=i[1];FA(a,s,o,e)}),s}function FA(n,e,t,s){n.forEach(function(r){if(typeof r=="string"){var i=r===""?e:uP(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(u5(r)){FA(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(function(o){var a=o[0],c=o[1];FA(c,uP(e,a),t,s)})})}function uP(n,e){var t=n;return e.split(UC).forEach(function(s){t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t}function u5(n){return n.isThemeGetter}function d5(n,e){return e?n.map(function(t){var s=t[0],r=t[1],i=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],u=a[1];return[e+c,u]})):o});return[s,i]}):n}function h5(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,s=new Map;function r(i,o){t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return r(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):r(o,a)}}}var Cj="!";function f5(n){var e=n.separator||":",t=e.length===1,s=e[0],r=e.length;return function(o){for(var a=[],c=0,u=0,d,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===s&&(t||o.slice(h,h+r)===e)){a.push(o.slice(u,h)),u=h+r;continue}if(f==="/"){d=h;continue}}f==="["?c++:f==="]"&&c--}var m=a.length===0?o:o.substring(u),y=m.startsWith(Cj),g=y?m.substring(1):m,S=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:S}}}function p5(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(s){var r=s[0]==="[";r?(e.push.apply(e,t.sort().concat([s])),t=[]):t.push(s)}),e.push.apply(e,t.sort()),e}function m5(n){return{cache:h5(n.cacheSize),splitModifiers:f5(n),...a5(n)}}var g5=/\s+/;function y5(n,e){var t=e.splitModifiers,s=e.getClassGroupId,r=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(g5).map(function(o){var a=t(o),c=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,f=s(h?d.substring(0,h):d),m=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=s(d),!f)return{isTailwindClass:!1,originalClassName:o};m=!1}var y=p5(c).join(":"),g=u?y+Cj:y;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=a+c;return i.has(d)?!1:(i.add(d),r(c,u).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function v5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var s,r,i,o=a;function a(u){var d=e[0],h=e.slice(1),f=h.reduce(function(m,y){return y(m)},d());return s=m5(f),r=s.cache.get,i=s.cache.set,o=c,c(u)}function c(u){var d=r(u);if(d)return d;var h=y5(u,s);return i(u,h),h}return function(){return o(o5.apply(null,arguments))}}function Je(n){var e=function(s){return s[n]||[]};return e.isThemeGetter=!0,e}var Tj=/^\[(?:([a-z-]+):)?(.+)\]$/i,b5=/^\d+\/\d+$/,x5=new Set(["px","full","screen"]),w5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,A5=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function rr(n){return wl(n)||x5.has(n)||b5.test(n)||BA(n)}function BA(n){return uu(n,"length",P5)}function _5(n){return uu(n,"size",kj)}function E5(n){return uu(n,"position",kj)}function C5(n){return uu(n,"url",R5)}function jy(n){return uu(n,"number",wl)}function wl(n){return!Number.isNaN(Number(n))}function T5(n){return n.endsWith("%")&&wl(n.slice(0,-1))}function Df(n){return dP(n)||uu(n,"number",dP)}function ve(n){return Tj.test(n)}function If(){return!0}function Eo(n){return w5.test(n)}function k5(n){return uu(n,"",N5)}function uu(n,e,t){var s=Tj.exec(n);return s?s[1]?s[1]===e:t(s[2]):!1}function P5(n){return S5.test(n)}function kj(){return!1}function R5(n){return n.startsWith("url(")}function dP(n){return Number.isInteger(Number(n))}function N5(n){return A5.test(n)}function M5(){var n=Je("colors"),e=Je("spacing"),t=Je("blur"),s=Je("brightness"),r=Je("borderColor"),i=Je("borderRadius"),o=Je("borderSpacing"),a=Je("borderWidth"),c=Je("contrast"),u=Je("grayscale"),d=Je("hueRotate"),h=Je("invert"),f=Je("gap"),m=Je("gradientColorStops"),y=Je("gradientColorStopPositions"),g=Je("inset"),S=Je("margin"),v=Je("opacity"),x=Je("padding"),A=Je("saturate"),E=Je("scale"),T=Je("sepia"),P=Je("skew"),k=Je("space"),R=Je("translate"),M=function(){return["auto","contain","none"]},L=function(){return["auto","hidden","clip","visible","scroll"]},B=function(){return["auto",ve,e]},D=function(){return[ve,e]},z=function(){return["",rr]},I=function(){return["auto",wl,ve]},N=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},j=function(){return["solid","dashed","dotted","double","none"]},O=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},F=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",ve]},V=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},W=function(){return[wl,jy]},K=function(){return[wl,ve]};return{cacheSize:500,theme:{colors:[If],spacing:[rr],blur:["none","",Eo,ve],brightness:W(),borderColor:[n],borderRadius:["none","","full",Eo,ve],borderSpacing:D(),borderWidth:z(),contrast:W(),grayscale:$(),hueRotate:K(),invert:$(),gap:D(),gradientColorStops:[n],gradientColorStopPositions:[T5,BA],inset:B(),margin:B(),opacity:W(),padding:D(),saturate:W(),scale:W(),sepia:$(),skew:K(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",ve]}],container:["container"],columns:[{columns:[Eo]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(N(),[ve])}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Df]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ve]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Df]}],"grid-cols":[{"grid-cols":[If]}],"col-start-end":[{col:["auto",{span:["full",Df]},ve]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[If]}],"row-start-end":[{row:["auto",{span:[Df]},ve]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ve]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ve]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(F())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(F(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(F(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ve,e]}],"min-w":[{"min-w":["min","max","fit",ve,rr]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Eo]},Eo,ve]}],h:[{h:[ve,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ve,rr]}],"max-h":[{"max-h":[ve,e,"min","max","fit"]}],"font-size":[{text:["base",Eo,BA]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",jy]}],"font-family":[{font:[If]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ve]}],"line-clamp":[{"line-clamp":["none",wl,jy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ve,rr]}],"list-image":[{"list-image":["none",ve]}],"list-style-type":[{list:["none","disc","decimal",ve]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(j(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",rr]}],"underline-offset":[{"underline-offset":["auto",ve,rr]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ve]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ve]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(N(),[E5])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",_5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},C5]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(j(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:j()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(j())}],"outline-offset":[{"outline-offset":[ve,rr]}],"outline-w":[{outline:[rr]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[rr]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Eo,k5]}],"shadow-color":[{shadow:[If]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":O()}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Eo,ve]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[A]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ve]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",ve]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",ve]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Df,ve]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[P]}],"skew-y":[{"skew-y":[P]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ve]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ve]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ve]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[rr,jy]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var j5=v5(M5);function di(...n){return j5(Sf(n))}const L5=L4,Pj=Ae.forwardRef(({className:n,...e},t)=>p.jsx(cj,{ref:t,className:di("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Pj.displayName=cj.displayName;const D5=gj("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Rj=Ae.forwardRef(({className:n,variant:e,...t},s)=>p.jsx(uj,{ref:s,className:di(D5({variant:e}),n),...t}));Rj.displayName=uj.displayName;const I5=Ae.forwardRef(({className:n,...e},t)=>p.jsx(fj,{ref:t,className:di("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));I5.displayName=fj.displayName;const Nj=Ae.forwardRef(({className:n,...e},t)=>p.jsx(pj,{ref:t,className:di("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:p.jsx(s1,{className:"h-4 w-4"})}));Nj.displayName=pj.displayName;const Mj=Ae.forwardRef(({className:n,...e},t)=>p.jsx(dj,{ref:t,className:di("text-sm font-semibold",n),...e}));Mj.displayName=dj.displayName;const jj=Ae.forwardRef(({className:n,...e},t)=>p.jsx(hj,{ref:t,className:di("text-sm opacity-90",n),...e}));jj.displayName=hj.displayName;const O5=1,F5=1e6,ao={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let iS=0;function B5(){return iS=(iS+1)%Number.MAX_SAFE_INTEGER,iS.toString()}const oS=new Map,hP=n=>{if(oS.has(n))return;const e=setTimeout(()=>{oS.delete(n),Rp({type:ao.REMOVE_TOAST,toastId:n})},F5);oS.set(n,e)},$5=(n,e)=>{switch(e.type){case ao.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,O5)};case ao.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case ao.DISMISS_TOAST:{const{toastId:t}=e;return t?hP(t):n.toasts.forEach(s=>{hP(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case ao.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},pv=[];let mv={toasts:[]};function Rp(n){mv=$5(mv,n),pv.forEach(e=>{e(mv)})}function Ue({...n}){const e=B5(),t=r=>Rp({type:ao.UPDATE_TOAST,toast:{...r,id:e}}),s=()=>Rp({type:ao.DISMISS_TOAST,toastId:e});return Rp({type:ao.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function Lj(){const[n,e]=Ae.useState(mv);return Ae.useEffect(()=>(pv.push(e),()=>{const t=pv.indexOf(e);t>-1&&pv.splice(t,1)}),[n]),{...n,toast:Ue,dismiss:t=>Rp({type:ao.DISMISS_TOAST,toastId:t})}}function V5(){const{toasts:n}=Lj();return p.jsxs(L5,{children:[n.map(({id:e,title:t,description:s,action:r,...i})=>p.jsxs(Rj,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[t&&p.jsx(Mj,{children:t}),s&&p.jsx(jj,{children:s})]}),r,p.jsx(Nj,{})]},e)),p.jsx(Pj,{})]})}const Dj=_.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),r1=_.createContext({}),i1=_.createContext(null),o1=typeof document<"u",HC=o1?_.useLayoutEffect:_.useEffect,Ij=_.createContext({strict:!1}),GC=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),z5="framerAppearId",Oj="data-"+GC(z5);function U5(n,e,t,s){const{visualElement:r}=_.useContext(r1),i=_.useContext(Ij),o=_.useContext(i1),a=_.useContext(Dj).reducedMotion,c=_.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;_.useInsertionEffect(()=>{u&&u.update(t,o)});const d=_.useRef(!!(t[Oj]&&!window.HandoffComplete));return HC(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),_.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function zu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function H5(n,e,t){return _.useCallback(s=>{s&&n.mount&&n.mount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):zu(t)&&(t.current=s))},[e])}function nm(n){return typeof n=="string"||Array.isArray(n)}function a1(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const WC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qC=["initial",...WC];function l1(n){return a1(n.animate)||qC.some(e=>nm(n[e]))}function Fj(n){return!!(l1(n)||n.variants)}function G5(n,e){if(l1(n)){const{initial:t,animate:s}=n;return{initial:t===!1||nm(t)?t:void 0,animate:nm(s)?s:void 0}}return n.inherit!==!1?e:{}}function W5(n){const{initial:e,animate:t}=G5(n,_.useContext(r1));return _.useMemo(()=>({initial:e,animate:t}),[fP(e),fP(t)])}function fP(n){return Array.isArray(n)?n.join(" "):n}const pP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},sm={};for(const n in pP)sm[n]={isEnabled:e=>pP[n].some(t=>!!e[t])};function q5(n){for(const e in n)sm[e]={...sm[e],...n[e]}}const KC=_.createContext({}),Bj=_.createContext({}),K5=Symbol.for("motionComponentSymbol");function X5({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){n&&q5(n);function i(a,c){let u;const d={..._.useContext(Dj),...a,layoutId:Y5(a)},{isStatic:h}=d,f=W5(a),m=s(a,h);if(!h&&o1){f.visualElement=U5(r,m,d,e);const y=_.useContext(Bj),g=_.useContext(Ij).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,n,y))}return _.createElement(r1.Provider,{value:f},u&&f.visualElement?_.createElement(u,{visualElement:f.visualElement,...d}):null,t(r,a,H5(m,f.visualElement,c),m,h,f.visualElement))}const o=_.forwardRef(i);return o[K5]=r,o}function Y5({layoutId:n}){const e=_.useContext(KC).id;return e&&n!==void 0?e+"-"+n:n}function Q5(n){function e(s,r={}){return X5(n(s,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(s,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const J5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function XC(n){return typeof n!="string"||n.includes("-")?!1:!!(J5.indexOf(n)>-1||/[A-Z]/.test(n))}const Ab={};function Z5(n){Object.assign(Ab,n)}const Y0=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],du=new Set(Y0);function $j(n,{layout:e,layoutId:t}){return du.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ab[n]||n==="opacity")}const ts=n=>!!(n&&n.getVelocity),e$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t$=Y0.length;function n$(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},s,r){let i="";for(let o=0;o<t$;o++){const a=Y0[o];if(n[a]!==void 0){const c=e$[a]||a;i+=`${c}(${n[a]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(n,s?"":i):t&&s&&(i="none"),i}const Vj=n=>e=>typeof e=="string"&&e.startsWith(n),zj=Vj("--"),$A=Vj("var(--"),s$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,r$=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ka=(n,e,t)=>Math.min(Math.max(t,n),e),hu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Np={...hu,transform:n=>Ka(0,1,n)},Ly={...hu,default:1},Mp=n=>Math.round(n*1e5)/1e5,c1=/(-)?([\d]*\.?[\d])+/g,Uj=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,i$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Q0(n){return typeof n=="string"}const J0=n=>({test:e=>Q0(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),To=J0("deg"),ui=J0("%"),oe=J0("px"),o$=J0("vh"),a$=J0("vw"),mP={...ui,parse:n=>ui.parse(n)/100,transform:n=>ui.transform(n*100)},gP={...hu,transform:Math.round},Hj={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:To,rotateX:To,rotateY:To,rotateZ:To,scale:Ly,scaleX:Ly,scaleY:Ly,scaleZ:Ly,skew:To,skewX:To,skewY:To,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Np,originX:mP,originY:mP,originZ:oe,zIndex:gP,fillOpacity:Np,strokeOpacity:Np,numOctaves:gP};function YC(n,e,t,s){const{style:r,vars:i,transform:o,transformOrigin:a}=n;let c=!1,u=!1,d=!0;for(const h in e){const f=e[h];if(zj(h)){i[h]=f;continue}const m=Hj[h],y=r$(f,m);if(du.has(h)){if(c=!0,o[h]=y,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=y):r[h]=y}if(e.transform||(c||s?r.transform=n$(n.transform,t,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${h} ${f} ${m}`}}const QC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gj(n,e,t){for(const s in e)!ts(e[s])&&!$j(s,t)&&(n[s]=e[s])}function l$({transformTemplate:n},e,t){return _.useMemo(()=>{const s=QC();return YC(s,e,{enableHardwareAcceleration:!t},n),Object.assign({},s.vars,s.style)},[e])}function c$(n,e,t){const s=n.style||{},r={};return Gj(r,s,n),Object.assign(r,l$(n,e,t)),n.transformValues?n.transformValues(r):r}function u$(n,e,t){const s={},r=c$(n,e,t);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=r,s}const d$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _b(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||d$.has(n)}let Wj=n=>!_b(n);function h$(n){n&&(Wj=e=>e.startsWith("on")?!_b(e):n(e))}try{h$(require("@emotion/is-prop-valid").default)}catch{}function f$(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(Wj(r)||t===!0&&_b(r)||!e&&!_b(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function yP(n,e,t){return typeof n=="string"?n:oe.transform(e+t*n)}function p$(n,e,t){const s=yP(e,n.x,n.width),r=yP(t,n.y,n.height);return`${s} ${r}`}const m$={offset:"stroke-dashoffset",array:"stroke-dasharray"},g$={offset:"strokeDashoffset",array:"strokeDasharray"};function y$(n,e,t=1,s=0,r=!0){n.pathLength=1;const i=r?m$:g$;n[i.offset]=oe.transform(-s);const o=oe.transform(e),a=oe.transform(t);n[i.array]=`${o} ${a}`}function JC(n,{attrX:e,attrY:t,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},d,h,f){if(YC(n,u,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:g}=n;m.transform&&(g&&(y.transform=m.transform),delete m.transform),g&&(r!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=p$(g,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),s!==void 0&&(m.scale=s),o!==void 0&&y$(m,o,a,c,!1)}const qj=()=>({...QC(),attrs:{}}),ZC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function v$(n,e,t,s){const r=_.useMemo(()=>{const i=qj();return JC(i,e,{enableHardwareAcceleration:!1},ZC(s),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};Gj(i,n.style,n),r.style={...i,...r.style}}return r}function b$(n=!1){return(t,s,r,{latestValues:i},o)=>{const c=(XC(t)?v$:u$)(s,i,o,t),d={...f$(s,typeof t=="string",n),...c,ref:r},{children:h}=s,f=_.useMemo(()=>ts(h)?h.get():h,[h]);return _.createElement(t,{...d,children:f})}}function Kj(n,{style:e,vars:t},s,r){Object.assign(n.style,e,r&&r.getProjectionStyles(s));for(const i in t)n.style.setProperty(i,t[i])}const Xj=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Yj(n,e,t,s){Kj(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(Xj.has(r)?r:GC(r),e.attrs[r])}function eT(n,e){const{style:t}=n,s={};for(const r in t)(ts(t[r])||e.style&&ts(e.style[r])||$j(r,n))&&(s[r]=t[r]);return s}function Qj(n,e){const t=eT(n,e);for(const s in n)if(ts(n[s])||ts(e[s])){const r=Y0.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;t[r]=n[s]}return t}function tT(n,e,t,s={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,r)),e}function Jj(n){const e=_.useRef(null);return e.current===null&&(e.current=n()),e.current}const Eb=n=>Array.isArray(n),x$=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),w$=n=>Eb(n)?n[n.length-1]||0:n;function gv(n){const e=ts(n)?n.get():n;return x$(e)?e.toValue():e}function S$({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},s,r,i){const o={latestValues:A$(s,r,i,n),renderState:e()};return t&&(o.mount=a=>t(s,a,o)),o}const Zj=n=>(e,t)=>{const s=_.useContext(r1),r=_.useContext(i1),i=()=>S$(n,e,s,r);return t?i():Jj(i)};function A$(n,e,t,s){const r={},i=s(n,{});for(const f in i)r[f]=gv(i[f]);let{initial:o,animate:a}=n;const c=l1(n),u=Fj(n);e&&u&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!a1(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const y=tT(n,m);if(!y)return;const{transitionEnd:g,transition:S,...v}=y;for(const x in v){let A=v[x];if(Array.isArray(A)){const E=d?A.length-1:0;A=A[E]}A!==null&&(r[x]=A)}for(const x in g)r[x]=g[x]}),r}const bt=n=>n;class vP{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function _$(n){let e=new vP,t=new vP,s=0,r=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?e:t;return u&&o.add(c),f.add(c)&&h&&r&&(s=e.order.length),c},cancel:c=>{t.remove(c),o.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),s=e.order.length,s)for(let u=0;u<s;u++){const d=e.order[u];d(c),o.has(d)&&(a.schedule(d),n())}r=!1,i&&(i=!1,a.process(c))}};return a}const Dy=["prepare","read","update","preRender","render","postRender"],E$=40;function C$(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=Dy.reduce((h,f)=>(h[f]=_$(()=>t=!0),h),{}),o=h=>i[h].process(r),a=()=>{const h=performance.now();t=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,E$),1),r.timestamp=h,r.isProcessing=!0,Dy.forEach(o),r.isProcessing=!1,t&&e&&(s=!1,n(a))},c=()=>{t=!0,s=!0,r.isProcessing||n(a)};return{schedule:Dy.reduce((h,f)=>{const m=i[f];return h[f]=(y,g=!1,S=!1)=>(t||c(),m.schedule(y,g,S)),h},{}),cancel:h=>Dy.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:Qe,cancel:bo,state:yn,steps:aS}=C$(typeof requestAnimationFrame<"u"?requestAnimationFrame:bt,!0),T$={useVisualState:Zj({scrapeMotionValuesFromProps:Qj,createRenderState:qj,onMount:(n,e,{renderState:t,latestValues:s})=>{Qe.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Qe.render(()=>{JC(t,s,{enableHardwareAcceleration:!1},ZC(e.tagName),n.transformTemplate),Yj(e,t)})}})},k$={useVisualState:Zj({scrapeMotionValuesFromProps:eT,createRenderState:QC})};function P$(n,{forwardMotionProps:e=!1},t,s){return{...XC(n)?T$:k$,preloadedFeatures:t,useRender:b$(e),createVisualElement:s,Component:n}}function lo(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}const eL=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function u1(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const R$=n=>e=>eL(e)&&n(e,u1(e));function uo(n,e,t,s){return lo(n,e,R$(t),s)}const N$=(n,e)=>t=>e(n(t)),Ha=(...n)=>n.reduce(N$);function tL(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const bP=tL("dragHorizontal"),xP=tL("dragVertical");function nL(n){let e=!1;if(n==="y")e=xP();else if(n==="x")e=bP();else{const t=bP(),s=xP();t&&s?e=()=>{t(),s()}:(t&&t(),s&&s())}return e}function sL(){const n=nL(!0);return n?(n(),!1):!0}class tl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function wP(n,e){const t="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),r=(i,o)=>{if(i.pointerType==="touch"||sL())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[s]&&Qe.update(()=>a[s](i,o))};return uo(n.current,t,r,{passive:!n.getProps()[s]})}class M$ extends tl{mount(){this.unmount=Ha(wP(this.node,!0),wP(this.node,!1))}unmount(){}}class j$ extends tl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ha(lo(this.node.current,"focus",()=>this.onFocus()),lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const rL=(n,e)=>e?n===e?!0:rL(n,e.parentElement):!1;function lS(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,u1(t))}class L$ extends tl{constructor(){super(...arguments),this.removeStartListeners=bt,this.removeEndListeners=bt,this.removeAccessibleListeners=bt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=uo(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Qe.update(()=>{!h&&!rL(this.node.current,a.target)?d&&d(a,c):u&&u(a,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=uo(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Ha(i,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||lS("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Qe.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=lo(this.node.current,"keyup",o),lS("down",(a,c)=>{this.startPress(a,c)})},t=lo(this.node.current,"keydown",e),s=()=>{this.isPressing&&lS("cancel",(i,o)=>this.cancelPress(i,o))},r=lo(this.node.current,"blur",s);this.removeAccessibleListeners=Ha(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Qe.update(()=>s(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sL()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Qe.update(()=>s(e,t))}mount(){const e=this.node.getProps(),t=uo(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=lo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ha(t,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const VA=new WeakMap,cS=new WeakMap,D$=n=>{const e=VA.get(n.target);e&&e(n)},I$=n=>{n.forEach(D$)};function O$({root:n,...e}){const t=n||document;cS.has(t)||cS.set(t,{});const s=cS.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(I$,{root:n,...e})),s[r]}function F$(n,e,t){const s=O$(e);return VA.set(n,t),s.observe(n),()=>{VA.delete(n),s.unobserve(n)}}const B$={some:0,all:1};class $$ extends tl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:B$[r]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return F$(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(V$(e,t))&&this.startObserver()}unmount(){}}function V$({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const z$={inView:{Feature:$$},tap:{Feature:L$},focus:{Feature:j$},hover:{Feature:M$}};function iL(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function U$(n){const e={};return n.values.forEach((t,s)=>e[s]=t.get()),e}function H$(n){const e={};return n.values.forEach((t,s)=>e[s]=t.getVelocity()),e}function d1(n,e,t){const s=n.getProps();return tT(s,e,t!==void 0?t:s.custom,U$(n),H$(n))}let G$=bt,nT=bt;const Ga=n=>n*1e3,ho=n=>n/1e3,W$={current:!1},oL=n=>Array.isArray(n)&&typeof n[0]=="number";function aL(n){return!!(!n||typeof n=="string"&&lL[n]||oL(n)||Array.isArray(n)&&n.every(aL))}const Qf=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,lL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qf([0,.65,.55,1]),circOut:Qf([.55,0,1,.45]),backIn:Qf([.31,.01,.66,-.59]),backOut:Qf([.33,1.53,.69,.99])};function cL(n){if(n)return oL(n)?Qf(n):Array.isArray(n)?n.map(cL):lL[n]}function q$(n,e,t,{delay:s=0,duration:r,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:t};c&&(u.offset=c);const d=cL(a);return Array.isArray(d)&&(u.easing=d),n.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function K$(n,{repeat:e,repeatType:t="loop"}){const s=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[s]}const uL=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,X$=1e-7,Y$=12;function Q$(n,e,t,s,r){let i,o,a=0;do o=e+(t-e)/2,i=uL(o,s,r)-n,i>0?t=o:e=o;while(Math.abs(i)>X$&&++a<Y$);return o}function Z0(n,e,t,s){if(n===e&&t===s)return bt;const r=i=>Q$(i,0,1,n,t);return i=>i===0||i===1?i:uL(r(i),e,s)}const J$=Z0(.42,0,1,1),Z$=Z0(0,0,.58,1),dL=Z0(.42,0,.58,1),eV=n=>Array.isArray(n)&&typeof n[0]!="number",hL=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,fL=n=>e=>1-n(1-e),sT=n=>1-Math.sin(Math.acos(n)),pL=fL(sT),tV=hL(sT),mL=Z0(.33,1.53,.69,.99),rT=fL(mL),nV=hL(rT),sV=n=>(n*=2)<1?.5*rT(n):.5*(2-Math.pow(2,-10*(n-1))),rV={linear:bt,easeIn:J$,easeInOut:dL,easeOut:Z$,circIn:sT,circInOut:tV,circOut:pL,backIn:rT,backInOut:nV,backOut:mL,anticipate:sV},SP=n=>{if(Array.isArray(n)){nT(n.length===4);const[e,t,s,r]=n;return Z0(e,t,s,r)}else if(typeof n=="string")return rV[n];return n},iT=(n,e)=>t=>!!(Q0(t)&&i$.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),gL=(n,e,t)=>s=>{if(!Q0(s))return s;const[r,i,o,a]=s.match(c1);return{[n]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},iV=n=>Ka(0,255,n),uS={...hu,transform:n=>Math.round(iV(n))},Sl={test:iT("rgb","red"),parse:gL("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+uS.transform(n)+", "+uS.transform(e)+", "+uS.transform(t)+", "+Mp(Np.transform(s))+")"};function oV(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const zA={test:iT("#"),parse:oV,transform:Sl.transform},Uu={test:iT("hsl","hue"),parse:gL("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+ui.transform(Mp(e))+", "+ui.transform(Mp(t))+", "+Mp(Np.transform(s))+")"},Pn={test:n=>Sl.test(n)||zA.test(n)||Uu.test(n),parse:n=>Sl.test(n)?Sl.parse(n):Uu.test(n)?Uu.parse(n):zA.parse(n),transform:n=>Q0(n)?n:n.hasOwnProperty("red")?Sl.transform(n):Uu.transform(n)},ut=(n,e,t)=>-t*n+t*e+n;function dS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function aV({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,i=0,o=0;if(!e)r=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;r=dS(c,a,n+1/3),i=dS(c,a,n),o=dS(c,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}const hS=(n,e,t)=>{const s=n*n;return Math.sqrt(Math.max(0,t*(e*e-s)+s))},lV=[zA,Sl,Uu],cV=n=>lV.find(e=>e.test(n));function AP(n){const e=cV(n);let t=e.parse(n);return e===Uu&&(t=aV(t)),t}const yL=(n,e)=>{const t=AP(n),s=AP(e),r={...t};return i=>(r.red=hS(t.red,s.red,i),r.green=hS(t.green,s.green,i),r.blue=hS(t.blue,s.blue,i),r.alpha=ut(t.alpha,s.alpha,i),Sl.transform(r))};function uV(n){var e,t;return isNaN(n)&&Q0(n)&&(((e=n.match(c1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Uj))===null||t===void 0?void 0:t.length)||0)>0}const vL={regex:s$,countKey:"Vars",token:"${v}",parse:bt},bL={regex:Uj,countKey:"Colors",token:"${c}",parse:Pn.parse},xL={regex:c1,countKey:"Numbers",token:"${n}",parse:hu.parse};function fS(n,{regex:e,countKey:t,token:s,parse:r}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,s),n.values.push(...i.map(r)))}function Cb(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&fS(t,vL),fS(t,bL),fS(t,xL),t}function wL(n){return Cb(n).values}function SL(n){const{values:e,numColors:t,numVars:s,tokenised:r}=Cb(n),i=e.length;return o=>{let a=r;for(let c=0;c<i;c++)c<s?a=a.replace(vL.token,o[c]):c<s+t?a=a.replace(bL.token,Pn.transform(o[c])):a=a.replace(xL.token,Mp(o[c]));return a}}const dV=n=>typeof n=="number"?0:n;function hV(n){const e=wL(n);return SL(n)(e.map(dV))}const Xa={test:uV,parse:wL,createTransformer:SL,getAnimatableNone:hV},AL=(n,e)=>t=>`${t>0?e:n}`;function _L(n,e){return typeof n=="number"?t=>ut(n,e,t):Pn.test(n)?yL(n,e):n.startsWith("var(")?AL(n,e):CL(n,e)}const EL=(n,e)=>{const t=[...n],s=t.length,r=n.map((i,o)=>_L(i,e[o]));return i=>{for(let o=0;o<s;o++)t[o]=r[o](i);return t}},fV=(n,e)=>{const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=_L(n[r],e[r]));return r=>{for(const i in s)t[i]=s[i](r);return t}},CL=(n,e)=>{const t=Xa.createTransformer(e),s=Cb(n),r=Cb(e);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?Ha(EL(s.values,r.values),t):AL(n,e)},rm=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},_P=(n,e)=>t=>ut(n,e,t);function pV(n){return typeof n=="number"?_P:typeof n=="string"?Pn.test(n)?yL:CL:Array.isArray(n)?EL:typeof n=="object"?fV:_P}function mV(n,e,t){const s=[],r=t||pV(n[0]),i=n.length-1;for(let o=0;o<i;o++){let a=r(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||bt:e;a=Ha(c,a)}s.push(a)}return s}function TL(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const i=n.length;if(nT(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=mV(e,s,r),a=o.length,c=u=>{let d=0;if(a>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const h=rm(n[d],n[d+1],u);return o[d](h)};return t?u=>c(Ka(n[0],n[i-1],u)):c}function gV(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=rm(0,e,s);n.push(ut(t,1,r))}}function yV(n){const e=[0];return gV(e,n.length-1),e}function vV(n,e){return n.map(t=>t*e)}function bV(n,e){return n.map(()=>e||dL).splice(0,n.length-1)}function Tb({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=eV(s)?s.map(SP):SP(s),i={done:!1,value:e[0]},o=vV(t&&t.length===e.length?t:yV(e),n),a=TL(o,e,{ease:Array.isArray(r)?r:bV(e,r)});return{calculatedDuration:n,next:c=>(i.value=a(c),i.done=c>=n,i)}}function kL(n,e){return e?n*(1e3/e):0}const xV=5;function PL(n,e,t){const s=Math.max(e-xV,0);return kL(t-n(s),e-s)}const pS=.001,wV=.01,EP=10,SV=.05,AV=1;function _V({duration:n=800,bounce:e=.25,velocity:t=0,mass:s=1}){let r,i;G$(n<=Ga(EP));let o=1-e;o=Ka(SV,AV,o),n=Ka(wV,EP,ho(n)),o<1?(r=u=>{const d=u*o,h=d*n,f=d-t,m=UA(u,o),y=Math.exp(-h);return pS-f/m*y},i=u=>{const h=u*o*n,f=h*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,y=Math.exp(-h),g=UA(Math.pow(u,2),o);return(-r(u)+pS>0?-1:1)*((f-m)*y)/g}):(r=u=>{const d=Math.exp(-u*n),h=(u-t)*n+1;return-pS+d*h},i=u=>{const d=Math.exp(-u*n),h=(t-u)*(n*n);return d*h});const a=5/n,c=CV(r,i,a);if(n=Ga(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:n}}}const EV=12;function CV(n,e,t){let s=t;for(let r=1;r<EV;r++)s=s-n(s)/e(s);return s}function UA(n,e){return n*Math.sqrt(1-e*e)}const TV=["duration","bounce"],kV=["stiffness","damping","mass"];function CP(n,e){return e.some(t=>n[t]!==void 0)}function PV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!CP(n,kV)&&CP(n,TV)){const t=_V(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function RL({keyframes:n,restDelta:e,restSpeed:t,...s}){const r=n[0],i=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=PV({...s,velocity:-ho(s.velocity||0)}),m=h||0,y=c/(2*Math.sqrt(a*u)),g=i-r,S=ho(Math.sqrt(a/u)),v=Math.abs(g)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let x;if(y<1){const A=UA(S,y);x=E=>{const T=Math.exp(-y*S*E);return i-T*((m+y*S*g)/A*Math.sin(A*E)+g*Math.cos(A*E))}}else if(y===1)x=A=>i-Math.exp(-S*A)*(g+(m+S*g)*A);else{const A=S*Math.sqrt(y*y-1);x=E=>{const T=Math.exp(-y*S*E),P=Math.min(A*E,300);return i-T*((m+y*S*g)*Math.sinh(P)+A*g*Math.cosh(P))/A}}return{calculatedDuration:f&&d||null,next:A=>{const E=x(A);if(f)o.done=A>=d;else{let T=m;A!==0&&(y<1?T=PL(x,A,E):T=0);const P=Math.abs(T)<=t,k=Math.abs(i-E)<=e;o.done=P&&k}return o.value=o.done?i:E,o}}}function TP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:d}){const h=n[0],f={done:!1,value:h},m=R=>a!==void 0&&R<a||c!==void 0&&R>c,y=R=>a===void 0?c:c===void 0||Math.abs(a-R)<Math.abs(c-R)?a:c;let g=t*e;const S=h+g,v=o===void 0?S:o(S);v!==S&&(g=v-h);const x=R=>-g*Math.exp(-R/s),A=R=>v+x(R),E=R=>{const M=x(R),L=A(R);f.done=Math.abs(M)<=u,f.value=f.done?v:L};let T,P;const k=R=>{m(f.value)&&(T=R,P=RL({keyframes:[f.value,y(f.value)],velocity:PL(A,R,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return k(0),{calculatedDuration:null,next:R=>{let M=!1;return!P&&T===void 0&&(M=!0,E(R),k(R)),T!==void 0&&R>T?P.next(R-T):(!M&&E(R),f)}}}const RV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Qe.update(e,!0),stop:()=>bo(e),now:()=>yn.isProcessing?yn.timestamp:performance.now()}},kP=2e4;function PP(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<kP;)e+=t,s=n.next(e);return e>=kP?1/0:e}const NV={decay:TP,inertia:TP,tween:Tb,keyframes:Tb,spring:RL};function kb({autoplay:n=!0,delay:e=0,driver:t=RV,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,y=!1,g,S;const v=()=>{S=new Promise(W=>{g=W})};v();let x;const A=NV[r]||Tb;let E;A!==Tb&&typeof s[0]!="number"&&(E=TL([0,100],s,{clamp:!1}),s=[0,100]);const T=A({...f,keyframes:s});let P;a==="mirror"&&(P=A({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let k="idle",R=null,M=null,L=null;T.calculatedDuration===null&&i&&(T.calculatedDuration=PP(T));const{calculatedDuration:B}=T;let D=1/0,z=1/0;B!==null&&(D=B+o,z=D*(i+1)-o);let I=0;const N=W=>{if(M===null)return;m>0&&(M=Math.min(M,W)),m<0&&(M=Math.min(W-z/m,M)),R!==null?I=R:I=Math.round(W-M)*m;const K=I-e*(m>=0?1:-1),Y=m>=0?K<0:K>z;I=Math.max(K,0),k==="finished"&&R===null&&(I=z);let re=I,fe=T;if(i){const ne=Math.min(I,z)/D;let ie=Math.floor(ne),Pe=ne%1;!Pe&&ne>=1&&(Pe=1),Pe===1&&ie--,ie=Math.min(ie,i+1),!!(ie%2)&&(a==="reverse"?(Pe=1-Pe,o&&(Pe-=o/D)):a==="mirror"&&(fe=P)),re=Ka(0,1,Pe)*D}const xe=Y?{done:!1,value:s[0]}:fe.next(re);E&&(xe.value=E(xe.value));let{done:X}=xe;!Y&&B!==null&&(X=m>=0?I>=z:I<=0);const G=R===null&&(k==="finished"||k==="running"&&X);return h&&h(xe.value),G&&F(),xe},j=()=>{x&&x.stop(),x=void 0},O=()=>{k="idle",j(),g(),v(),M=L=null},F=()=>{k="finished",d&&d(),j(),g()},$=()=>{if(y)return;x||(x=t(N));const W=x.now();c&&c(),R!==null?M=W-R:(!M||k==="finished")&&(M=W),k==="finished"&&v(),L=M,R=null,k="running",x.start()};n&&$();const V={then(W,K){return S.then(W,K)},get time(){return ho(I)},set time(W){W=Ga(W),I=W,R!==null||!x||m===0?R=W:M=x.now()-W/m},get duration(){const W=T.calculatedDuration===null?PP(T):T.calculatedDuration;return ho(W)},get speed(){return m},set speed(W){W===m||!x||(m=W,V.time=ho(I))},get state(){return k},play:$,pause:()=>{k="paused",R=I},stop:()=>{y=!0,k!=="idle"&&(k="idle",u&&u(),O())},cancel:()=>{L!==null&&N(L),O()},complete:()=>{k="finished"},sample:W=>(M=0,N(W))};return V}function MV(n){let e;return()=>(e===void 0&&(e=n()),e)}const jV=MV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),LV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Iy=10,DV=2e4,IV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!aL(e.ease);function OV(n,e,{onUpdate:t,onComplete:s,...r}){if(!(jV()&&LV.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const d=()=>{c=new Promise(A=>{a=A})};d();let{keyframes:h,duration:f=300,ease:m,times:y}=r;if(IV(e,r)){const A=kb({...r,repeat:0,delay:0});let E={done:!1,value:h[0]};const T=[];let P=0;for(;!E.done&&P<DV;)E=A.sample(P),T.push(E.value),P+=Iy;y=void 0,h=T,f=P-Iy,m="linear"}const g=q$(n.owner.current,e,h,{...r,duration:f,ease:m,times:y}),S=()=>{u=!1,g.cancel()},v=()=>{u=!0,Qe.update(S),a(),d()};return g.onfinish=()=>{u||(n.set(K$(h,r)),s&&s(),v())},{then(A,E){return c.then(A,E)},attachTimeline(A){return g.timeline=A,g.onfinish=null,bt},get time(){return ho(g.currentTime||0)},set time(A){g.currentTime=Ga(A)},get speed(){return g.playbackRate},set speed(A){g.playbackRate=A},get duration(){return ho(f)},play:()=>{o||(g.play(),bo(S))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:A}=g;if(A){const E=kb({...r,autoplay:!1});n.setWithVelocity(E.sample(A-Iy).value,E.sample(A).value,Iy)}v()},complete:()=>{u||g.finish()},cancel:v}}function FV({keyframes:n,delay:e,onUpdate:t,onComplete:s}){const r=()=>(t&&t(n[n.length-1]),s&&s(),{time:0,speed:1,duration:0,play:bt,pause:bt,stop:bt,then:i=>(i(),Promise.resolve()),cancel:bt,complete:bt});return e?kb({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const BV={type:"spring",stiffness:500,damping:25,restSpeed:10},$V=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),VV={type:"keyframes",duration:.8},zV={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},UV=(n,{keyframes:e})=>e.length>2?VV:du.has(n)?n.startsWith("scale")?$V(e[1]):BV:zV,HA=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Xa.test(e)||e==="0")&&!e.startsWith("url(")),HV=new Set(["brightness","contrast","saturate","opacity"]);function GV(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(c1)||[];if(!s)return n;const r=t.replace(s,"");let i=HV.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+r+")"}const WV=/([a-z-]*)\(.*?\)/g,GA={...Xa,getAnimatableNone:n=>{const e=n.match(WV);return e?e.map(GV).join(" "):n}},qV={...Hj,color:Pn,backgroundColor:Pn,outlineColor:Pn,fill:Pn,stroke:Pn,borderColor:Pn,borderTopColor:Pn,borderRightColor:Pn,borderBottomColor:Pn,borderLeftColor:Pn,filter:GA,WebkitFilter:GA},oT=n=>qV[n];function NL(n,e){let t=oT(n);return t!==GA&&(t=Xa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const ML=n=>/^0[^.\s]+$/.test(n);function KV(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||ML(n)}function XV(n,e,t,s){const r=HA(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const o=s.from!==void 0?s.from:n.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),KV(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(r&&c.length&&a)for(let u=0;u<c.length;u++){const d=c[u];i[d]=NL(e,a)}return i}function YV({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function aT(n,e){return n[e]||n.default||n}const QV={skipAnimations:!1},lT=(n,e,t,s={})=>r=>{const i=aT(s,n)||{},o=i.delay||s.delay||0;let{elapsed:a=0}=s;a=a-Ga(o);const c=XV(e,n,t,i),u=c[0],d=c[c.length-1],h=HA(n,u),f=HA(n,d);let m={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:y=>{e.set(y),i.onUpdate&&i.onUpdate(y)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(YV(i)||(m={...m,...UV(n,m)}),m.duration&&(m.duration=Ga(m.duration)),m.repeatDelay&&(m.repeatDelay=Ga(m.repeatDelay)),!h||!f||W$.current||i.type===!1||QV.skipAnimations)return FV(m);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=OV(e,n,m);if(y)return y}return kb(m)};function Pb(n){return!!(ts(n)&&n.add)}const jL=n=>/^\-?\d*\.?\d+$/.test(n);function cT(n,e){n.indexOf(e)===-1&&n.push(e)}function uT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class dT{constructor(){this.subscriptions=[]}add(e){return cT(this.subscriptions,e),()=>uT(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const JV=n=>!isNaN(parseFloat(n));class ZV{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:o}=yn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Qe.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Qe.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=JV(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new dT);const s=this.events[e].add(t);return e==="change"?()=>{s(),Qe.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?kL(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ff(n,e){return new ZV(n,e)}const LL=n=>e=>e.test(n),ez={test:n=>n==="auto",parse:n=>n},DL=[hu,oe,ui,To,a$,o$,ez],Of=n=>DL.find(LL(n)),tz=[...DL,Pn,Xa],nz=n=>tz.find(LL(n));function sz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ff(t))}function rz(n,e){const t=d1(n,e);let{transitionEnd:s={},transition:r={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...s};for(const o in i){const a=w$(i[o]);sz(n,o,a)}}function iz(n,e,t){var s,r;const i=Object.keys(e).filter(a=>!n.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=e[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=t[c])!==null&&s!==void 0?s:n.readValue(c))!==null&&r!==void 0?r:e[c]),d!=null&&(typeof d=="string"&&(jL(d)||ML(d))?d=parseFloat(d):!nz(d)&&Xa.test(u)&&(d=NL(c,u)),n.addValue(c,ff(d,{owner:n})),t[c]===void 0&&(t[c]=d),d!==null&&n.setBaseTarget(c,d))}}function oz(n,e){return e?(e[n]||e.default||e).from:void 0}function az(n,e,t){const s={};for(const r in n){const i=oz(r,e);if(i!==void 0)s[r]=i;else{const o=t.getValue(r);o&&(s[r]=o.get())}}return s}function lz({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function cz(n,e){const t=n.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}else return t!==e}function IL(n,e,{delay:t=0,transitionOverride:s,type:r}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const c=n.getValue("willChange");s&&(i=s);const u=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const f=n.getValue(h),m=a[h];if(!f||m===void 0||d&&lz(d,h))continue;const y={delay:t,elapsed:0,...aT(i||{},h)};if(window.HandoffAppearAnimations){const v=n.getProps()[Oj];if(v){const x=window.HandoffAppearAnimations(v,h,f,Qe);x!==null&&(y.elapsed=x,y.isHandoff=!0)}}let g=!y.isHandoff&&!cz(f,m);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(lT(h,f,m,n.shouldReduceMotion&&du.has(h)?{type:!1}:y));const S=f.animation;Pb(c)&&(c.add(h),S.then(()=>c.remove(h))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&rz(n,o)}),u}function WA(n,e,t={}){const s=d1(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const i=s?()=>Promise.all(IL(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return uz(n,e,u+c,d,h,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(t.delay)])}function uz(n,e,t=0,s=0,r=1,i){const o=[],a=(n.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>a-u*s;return Array.from(n.variantChildren).sort(dz).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(WA(u,e,{...i,delay:t+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function dz(n,e){return n.sortNodePosition(e)}function hz(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>WA(n,i,t));s=Promise.all(r)}else if(typeof e=="string")s=WA(n,e,t);else{const r=typeof e=="function"?d1(n,e,t.custom):e;s=Promise.all(IL(n,r,t))}return s.then(()=>n.notify("AnimationComplete",e))}const fz=[...WC].reverse(),pz=WC.length;function mz(n){return e=>Promise.all(e.map(({animation:t,options:s})=>hz(n,t,s)))}function gz(n){let e=mz(n);const t=vz();let s=!0;const r=(c,u)=>{const d=d1(n,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){e=c(n)}function o(c,u){const d=n.getProps(),h=n.getVariantContext(!0)||{},f=[],m=new Set;let y={},g=1/0;for(let v=0;v<pz;v++){const x=fz[v],A=t[x],E=d[x]!==void 0?d[x]:h[x],T=nm(E),P=x===u?A.isActive:null;P===!1&&(g=v);let k=E===h[x]&&E!==d[x]&&T;if(k&&s&&n.manuallyAnimateOnMount&&(k=!1),A.protectedKeys={...y},!A.isActive&&P===null||!E&&!A.prevProp||a1(E)||typeof E=="boolean")continue;let M=yz(A.prevProp,E)||x===u&&A.isActive&&!k&&T||v>g&&T,L=!1;const B=Array.isArray(E)?E:[E];let D=B.reduce(r,{});P===!1&&(D={});const{prevResolvedValues:z={}}=A,I={...z,...D},N=j=>{M=!0,m.has(j)&&(L=!0,m.delete(j)),A.needsAnimating[j]=!0};for(const j in I){const O=D[j],F=z[j];if(y.hasOwnProperty(j))continue;let $=!1;Eb(O)&&Eb(F)?$=!iL(O,F):$=O!==F,$?O!==void 0?N(j):m.add(j):O!==void 0&&m.has(j)?N(j):A.protectedKeys[j]=!0}A.prevProp=E,A.prevResolvedValues=D,A.isActive&&(y={...y,...D}),s&&n.blockInitialAnimation&&(M=!1),M&&(!k||L)&&f.push(...B.map(j=>({animation:j,options:{type:x,...c}})))}if(m.size){const v={};m.forEach(x=>{const A=n.getBaseTarget(x);A!==void 0&&(v[x]=A)}),f.push({animation:v})}let S=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(S=!1),s=!1,S?e(f):Promise.resolve()}function a(c,u,d){var h;if(t[c].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(c,u)}),t[c].isActive=u;const f=o(d,c);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>t}}function yz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!iL(e,n):!1}function nl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function vz(){return{animate:nl(!0),whileInView:nl(),whileHover:nl(),whileTap:nl(),whileDrag:nl(),whileFocus:nl(),exit:nl()}}class bz extends tl{constructor(e){super(e),e.animationState||(e.animationState=gz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),a1(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let xz=0;class wz extends tl{constructor(){super(...arguments),this.id=xz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Sz={animation:{Feature:bz},exit:{Feature:wz}},RP=(n,e)=>Math.abs(n-e);function Az(n,e){const t=RP(n.x,e.x),s=RP(n.y,e.y);return Math.sqrt(t**2+s**2)}class OL{constructor(e,t,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=gS(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=Az(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:g}=yn;this.history.push({...y,timestamp:g});const{onStart:S,onMove:v}=this.handlers;f||(S&&S(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=mS(f,this.transformPagePoint),Qe.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=gS(h.type==="pointercancel"?this.lastMoveEventInfo:mS(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,S),y&&y(h,S)},!eL(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const o=u1(e),a=mS(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=yn;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,gS(a,this.history)),this.removeListeners=Ha(uo(this.contextWindow,"pointermove",this.handlePointerMove),uo(this.contextWindow,"pointerup",this.handlePointerUp),uo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),bo(this.updatePoint)}}function mS(n,e){return e?{point:e(n.point)}:n}function NP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function gS({point:n},e){return{point:n,delta:NP(n,FL(e)),offset:NP(n,_z(e)),velocity:Ez(e,.1)}}function _z(n){return n[0]}function FL(n){return n[n.length-1]}function Ez(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=FL(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Ga(e)));)t--;if(!s)return{x:0,y:0};const i=ho(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ps(n){return n.max-n.min}function qA(n,e=0,t=.01){return Math.abs(n-e)<=t}function MP(n,e,t,s=.5){n.origin=s,n.originPoint=ut(e.min,e.max,n.origin),n.scale=Ps(t)/Ps(e),(qA(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ut(t.min,t.max,n.origin)-n.originPoint,(qA(n.translate)||isNaN(n.translate))&&(n.translate=0)}function jp(n,e,t,s){MP(n.x,e.x,t.x,s?s.originX:void 0),MP(n.y,e.y,t.y,s?s.originY:void 0)}function jP(n,e,t){n.min=t.min+e.min,n.max=n.min+Ps(e)}function Cz(n,e,t){jP(n.x,e.x,t.x),jP(n.y,e.y,t.y)}function LP(n,e,t){n.min=e.min-t.min,n.max=n.min+Ps(e)}function Lp(n,e,t){LP(n.x,e.x,t.x),LP(n.y,e.y,t.y)}function Tz(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?ut(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?ut(t,n,s.max):Math.min(n,t)),n}function DP(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function kz(n,{top:e,left:t,bottom:s,right:r}){return{x:DP(n.x,t,r),y:DP(n.y,e,s)}}function IP(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function Pz(n,e){return{x:IP(n.x,e.x),y:IP(n.y,e.y)}}function Rz(n,e){let t=.5;const s=Ps(n),r=Ps(e);return r>s?t=rm(e.min,e.max-s,n.min):s>r&&(t=rm(n.min,n.max-r,e.min)),Ka(0,1,t)}function Nz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const KA=.35;function Mz(n=KA){return n===!1?n=0:n===!0&&(n=KA),{x:OP(n,"left","right"),y:OP(n,"top","bottom")}}function OP(n,e,t){return{min:FP(n,e),max:FP(n,t)}}function FP(n,e){return typeof n=="number"?n:n[e]||0}const BP=()=>({translate:0,scale:1,origin:0,originPoint:0}),Hu=()=>({x:BP(),y:BP()}),$P=()=>({min:0,max:0}),Tt=()=>({x:$P(),y:$P()});function Is(n){return[n("x"),n("y")]}function BL({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function jz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Lz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function yS(n){return n===void 0||n===1}function XA({scale:n,scaleX:e,scaleY:t}){return!yS(n)||!yS(e)||!yS(t)}function al(n){return XA(n)||$L(n)||n.z||n.rotate||n.rotateX||n.rotateY}function $L(n){return VP(n.x)||VP(n.y)}function VP(n){return n&&n!=="0%"}function Rb(n,e,t){const s=n-t,r=e*s;return t+r}function zP(n,e,t,s,r){return r!==void 0&&(n=Rb(n,r,s)),Rb(n,t,s)+e}function YA(n,e=0,t=1,s,r){n.min=zP(n.min,e,t,s,r),n.max=zP(n.max,e,t,s,r)}function VL(n,{x:e,y:t}){YA(n.x,e.translate,e.scale,e.originPoint),YA(n.y,t.translate,t.scale,t.originPoint)}function Dz(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=t[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Gu(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,VL(n,o)),s&&al(i.latestValues)&&Gu(n,i.latestValues))}e.x=UP(e.x),e.y=UP(e.y)}function UP(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function No(n,e){n.min=n.min+e,n.max=n.max+e}function HP(n,e,[t,s,r]){const i=e[r]!==void 0?e[r]:.5,o=ut(n.min,n.max,i);YA(n,e[t],e[s],o,e.scale)}const Iz=["x","scaleX","originX"],Oz=["y","scaleY","originY"];function Gu(n,e){HP(n.x,e,Iz),HP(n.y,e,Oz)}function zL(n,e){return BL(Lz(n.getBoundingClientRect(),e))}function Fz(n,e,t){const s=zL(n,t),{scroll:r}=e;return r&&(No(s.x,r.offset.x),No(s.y,r.offset.y)),s}const UL=({current:n})=>n?n.ownerDocument.defaultView:null,Bz=new WeakMap;class $z{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Tt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(u1(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=nL(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Is(S=>{let v=this.getAxisMotionValue(S).get()||0;if(ui.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const A=x.layout.layoutBox[S];A&&(v=Ps(A)*(parseFloat(v)/100))}}this.originPoint[S]=v}),y&&Qe.update(()=>y(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=h;if(m&&this.currentDirection===null){this.currentDirection=Vz(S),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,S),this.updateAxis("y",h.point,S),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),c=()=>Is(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new OL(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:UL(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Qe.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!Oy(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=Tz(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&zu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=kz(r.layoutBox,t):this.constraints=!1,this.elastic=Mz(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Is(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Nz(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!zu(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=Fz(s,r.root,this.visualElement.getTransformPagePoint());let o=Pz(r.layout.layoutBox,i);if(t){const a=t(jz(o));this.hasMutatedConstraints=!!a,a&&(o=BL(a))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Is(d=>{if(!Oy(d,t,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:s?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return s.start(lT(e,s,0,t))}stopAnimation(){Is(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Is(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Is(t=>{const{drag:s}=this.getProps();if(!Oy(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];i.set(e[t]-ut(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!zu(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Is(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();r[o]=Rz({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Is(o=>{if(!Oy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ut(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;Bz.set(this.visualElement,this);const e=this.visualElement.current,t=uo(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();zu(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const o=lo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Is(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=KA,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Oy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Vz(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class zz extends tl{constructor(e){super(e),this.removeGroupControls=bt,this.removeListeners=bt,this.controls=new $z(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||bt}unmount(){this.removeGroupControls(),this.removeListeners()}}const GP=n=>(e,t)=>{n&&Qe.update(()=>n(e,t))};class Uz extends tl{constructor(){super(...arguments),this.removePointerDownListener=bt}onPointerDown(e){this.session=new OL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:GP(e),onStart:GP(t),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Qe.update(()=>r(i,o))}}}mount(){this.removePointerDownListener=uo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Hz(){const n=_.useContext(i1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:s}=n,r=_.useId();return _.useEffect(()=>s(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const yv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function WP(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ff={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(oe.test(n))n=parseFloat(n);else return n;const t=WP(n,e.target.x),s=WP(n,e.target.y);return`${t}% ${s}%`}},Gz={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=Xa.parse(n);if(r.length>5)return s;const i=Xa.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,c=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=c;const u=ut(a,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class Wz extends Ae.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;Z5(qz),i&&(t.group&&t.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Qe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function HL(n){const[e,t]=Hz(),s=_.useContext(KC);return Ae.createElement(Wz,{...n,layoutGroup:s,switchLayoutGroup:_.useContext(Bj),isPresent:e,safeToRemove:t})}const qz={borderRadius:{...Ff,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ff,borderTopRightRadius:Ff,borderBottomLeftRadius:Ff,borderBottomRightRadius:Ff,boxShadow:Gz},GL=["TopLeft","TopRight","BottomLeft","BottomRight"],Kz=GL.length,qP=n=>typeof n=="string"?parseFloat(n):n,KP=n=>typeof n=="number"||oe.test(n);function Xz(n,e,t,s,r,i){r?(n.opacity=ut(0,t.opacity!==void 0?t.opacity:1,Yz(s)),n.opacityExit=ut(e.opacity!==void 0?e.opacity:1,0,Qz(s))):i&&(n.opacity=ut(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let o=0;o<Kz;o++){const a=`border${GL[o]}Radius`;let c=XP(e,a),u=XP(t,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||KP(c)===KP(u)?(n[a]=Math.max(ut(qP(c),qP(u),s),0),(ui.test(u)||ui.test(c))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=ut(e.rotate||0,t.rotate||0,s))}function XP(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Yz=WL(0,.5,pL),Qz=WL(.5,.95,bt);function WL(n,e,t){return s=>s<n?0:s>e?1:t(rm(n,e,s))}function YP(n,e){n.min=e.min,n.max=e.max}function js(n,e){YP(n.x,e.x),YP(n.y,e.y)}function QP(n,e,t,s,r){return n-=e,n=Rb(n,1/t,s),r!==void 0&&(n=Rb(n,1/r,s)),n}function Jz(n,e=0,t=1,s=.5,r,i=n,o=n){if(ui.test(e)&&(e=parseFloat(e),e=ut(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ut(i.min,i.max,s);n===i&&(a-=e),n.min=QP(n.min,e,t,a,r),n.max=QP(n.max,e,t,a,r)}function JP(n,e,[t,s,r],i,o){Jz(n,e[t],e[s],e[r],e.scale,i,o)}const Zz=["x","scaleX","originX"],eU=["y","scaleY","originY"];function ZP(n,e,t,s){JP(n.x,e,Zz,t?t.x:void 0,s?s.x:void 0),JP(n.y,e,eU,t?t.y:void 0,s?s.y:void 0)}function e2(n){return n.translate===0&&n.scale===1}function qL(n){return e2(n.x)&&e2(n.y)}function tU(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function KL(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function t2(n){return Ps(n.x)/Ps(n.y)}class nU{constructor(){this.members=[]}add(e){cT(this.members,e),e.scheduleRender()}remove(e){if(uT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function n2(n,e,t){let s="";const r=n.x.translate/e.x,i=n.y.translate/e.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:u,rotateY:d}=t;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(s+=`scale(${o}, ${a})`),s||"none"}const sU=(n,e)=>n.depth-e.depth;class rU{constructor(){this.children=[],this.isDirty=!1}add(e){cT(this.children,e),this.isDirty=!0}remove(e){uT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sU),this.isDirty=!1,this.children.forEach(e)}}function iU(n,e){const t=performance.now(),s=({timestamp:r})=>{const i=r-t;i>=e&&(bo(s),n(i-e))};return Qe.read(s,!0),()=>bo(s)}function oU(n){window.MotionDebug&&window.MotionDebug.record(n)}function aU(n){return n instanceof SVGElement&&n.tagName!=="svg"}function lU(n,e,t){const s=ts(n)?n:ff(n);return s.start(lT("",s,e,t)),s.animation}const s2=["","X","Y","Z"],cU={visibility:"hidden"},r2=1e3;let uU=0;const ll={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function XL({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=uU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ll.totalNodes=ll.resolvedTargetDeltas=ll.recalculatedProjection=0,this.nodes.forEach(fU),this.nodes.forEach(vU),this.nodes.forEach(bU),this.nodes.forEach(pU),oU(ll)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new rU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new dT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=aU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=iU(f,250),yv.hasAnimatedSinceResize&&(yv.hasAnimatedSinceResize=!1,this.nodes.forEach(o2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||_U,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!KL(this.targetLayout,y)||m,A=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,A);const E={...aT(g,"layout"),onPlay:S,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||o2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,bo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(i2);return}this.isUpdating||this.nodes.forEach(gU),this.isUpdating=!1,this.nodes.forEach(yU),this.nodes.forEach(dU),this.nodes.forEach(hU),this.clearAllSnapshots();const a=performance.now();yn.delta=Ka(0,1e3/60,a-yn.timestamp),yn.timestamp=a,yn.isProcessing=!0,aS.update.process(yn),aS.preRender.process(yn),aS.render.process(yn),yn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(mU),this.sharedNodes.forEach(wU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Tt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!qL(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||al(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),EU(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Tt();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(No(a.x,c.offset.x),No(a.y,c.offset.y)),a}removeElementScroll(o){const a=Tt();js(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){js(a,o);const{scroll:f}=this.root;f&&(No(a.x,-f.offset.x),No(a.y,-f.offset.y))}No(a.x,d.offset.x),No(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const c=Tt();js(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Gu(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),al(d.latestValues)&&Gu(c,d.latestValues)}return al(this.latestValues)&&Gu(c,this.latestValues),c}removeTransform(o){const a=Tt();js(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!al(u.latestValues))continue;XA(u.latestValues)&&u.updateSnapshot();const d=Tt(),h=u.measurePageBox();js(d,h),ZP(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return al(this.latestValues)&&ZP(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==yn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=yn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),Lp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Tt(),this.targetWithTransforms=Tt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Cz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):js(this.target,this.layout.layoutBox),VL(this.target,this.targetDelta)):js(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Tt(),this.relativeTargetOrigin=Tt(),Lp(this.relativeTargetOrigin,this.target,m.target),js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ll.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||XA(this.parent.latestValues)||$L(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===yn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;js(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;Dz(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Hu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Hu(),this.projectionDeltaWithTransform=Hu());const g=this.projectionTransform;jp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=n2(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),ll.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Hu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Tt(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,S=this.getStack(),v=!S||S.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(AU));this.animationProgress=0;let A;this.mixTargetDelta=E=>{const T=E/1e3;a2(h.x,o.x,T),a2(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SU(this.relativeTarget,this.relativeTargetOrigin,f,T),A&&tU(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Tt()),js(A,this.relativeTarget)),g&&(this.animationValues=d,Xz(d,u,this.latestValues,T,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(bo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qe.update(()=>{yv.hasAnimatedSinceResize=!0,this.currentAnimation=lU(0,r2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&YL(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Tt();const h=Ps(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Ps(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}js(a,c),Gu(a,d),jp(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new nU),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<s2.length;d++){const h="rotate"+s2[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return cU;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=gv(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=gv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!al(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=n2(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Ab){if(f[g]===void 0)continue;const{correct:S,applyTo:v}=Ab[g],x=u.transform==="none"?f[g]:S(f[g],h);if(v){const A=v.length;for(let E=0;E<A;E++)u[v[E]]=x}else u[g]=x}return this.options.layoutId&&(u.pointerEvents=h===this?gv(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(i2),this.root.sharedNodes.clear()}}}function dU(n){n.updateLayout()}function hU(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?Is(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=Ps(f);f.min=s[h].min,f.max=f.min+m}):YL(i,t.layoutBox,s)&&Is(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=Ps(s[h]);f.max=f.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=Hu();jp(a,s,t.layoutBox);const c=Hu();o?jp(c,n.applyTransform(r,!0),t.measuredBox):jp(c,s,t.layoutBox);const u=!qL(a);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=Tt();Lp(y,t.layoutBox,f.layoutBox);const g=Tt();Lp(g,s,m.layoutBox),KL(y,g)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function fU(n){ll.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function pU(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function mU(n){n.clearSnapshot()}function i2(n){n.clearMeasurements()}function gU(n){n.isLayoutDirty=!1}function yU(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function o2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function vU(n){n.resolveTargetDelta()}function bU(n){n.calcProjection()}function xU(n){n.resetRotation()}function wU(n){n.removeLeadSnapshot()}function a2(n,e,t){n.translate=ut(e.translate,0,t),n.scale=ut(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function l2(n,e,t,s){n.min=ut(e.min,t.min,s),n.max=ut(e.max,t.max,s)}function SU(n,e,t,s){l2(n.x,e.x,t.x,s),l2(n.y,e.y,t.y,s)}function AU(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const _U={duration:.45,ease:[.4,0,.1,1]},c2=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),u2=c2("applewebkit/")&&!c2("chrome/")?Math.round:bt;function d2(n){n.min=u2(n.min),n.max=u2(n.max)}function EU(n){d2(n.x),d2(n.y)}function YL(n,e,t){return n==="position"||n==="preserve-aspect"&&!qA(t2(e),t2(t),.2)}const CU=XL({attachResizeListener:(n,e)=>lo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vS={current:void 0},QL=XL({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!vS.current){const n=new CU({});n.mount(window),n.setOptions({layoutScroll:!0}),vS.current=n}return vS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),TU={pan:{Feature:Uz},drag:{Feature:zz,ProjectionNode:QL,MeasureLayout:HL}},kU=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function PU(n){const e=kU.exec(n);if(!e)return[,];const[,t,s]=e;return[t,s]}function QA(n,e,t=1){const[s,r]=PU(n);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return jL(o)?parseFloat(o):o}else return $A(r)?QA(r,e,t+1):r}function RU(n,{...e},t){const s=n.current;if(!(s instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const i=r.get();if(!$A(i))return;const o=QA(i,s);o&&r.set(o)});for(const r in e){const i=e[r];if(!$A(i))continue;const o=QA(i,s);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=i))}return{target:e,transitionEnd:t}}const NU=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),JL=n=>NU.has(n),MU=n=>Object.keys(n).some(JL),h2=n=>n===hu||n===oe,f2=(n,e)=>parseFloat(n.split(", ")[e]),p2=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return f2(r[1],e);{const i=s.match(/^matrix\((.+)\)$/);return i?f2(i[1],n):0}},jU=new Set(["x","y","z"]),LU=Y0.filter(n=>!jU.has(n));function DU(n){const e=[];return LU.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const pf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:p2(4,13),y:p2(5,14)};pf.translateX=pf.x;pf.translateY=pf.y;const IU=(n,e,t)=>{const s=e.measureViewportBox(),r=e.current,i=getComputedStyle(r),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=pf[u](s,i)}),e.render();const c=e.measureViewportBox();return t.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),n[u]=pf[u](c,i)}),n},OU=(n,e,t={},s={})=>{e={...e},s={...s};const r=Object.keys(e).filter(JL);let i=[],o=!1;const a=[];if(r.forEach(c=>{const u=n.getValue(c);if(!n.hasValue(c))return;let d=t[c],h=Of(d);const f=e[c];let m;if(Eb(f)){const y=f.length,g=f[0]===null?1:0;d=f[g],h=Of(d);for(let S=g;S<y&&f[S]!==null;S++)m?nT(Of(f[S])===m):m=Of(f[S])}else m=Of(f);if(h!==m)if(h2(h)&&h2(m)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof f=="string"?e[c]=parseFloat(f):Array.isArray(f)&&m===oe&&(e[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):e[c]=h.transform(f):(o||(i=DU(n),o=!0),a.push(c),s[c]=s[c]!==void 0?s[c]:e[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=IU(e,n,a);return i.length&&i.forEach(([d,h])=>{n.getValue(d).set(h)}),n.render(),o1&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:e,transitionEnd:s}};function FU(n,e,t,s){return MU(e)?OU(n,e,t,s):{target:e,transitionEnd:s}}const BU=(n,e,t,s)=>{const r=RU(n,e,s);return e=r.target,s=r.transitionEnd,FU(n,e,t,s)},JA={current:null},ZL={current:!1};function $U(){if(ZL.current=!0,!!o1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>JA.current=n.matches;n.addListener(e),e()}else JA.current=!1}function VU(n,e,t){const{willChange:s}=e;for(const r in e){const i=e[r],o=t[r];if(ts(i))n.addValue(r,i),Pb(s)&&s.add(r);else if(ts(o))n.addValue(r,ff(i,{owner:n})),Pb(s)&&s.remove(r);else if(o!==i)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,ff(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const m2=new WeakMap,eD=Object.keys(sm),zU=eD.length,g2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],UU=qC.length;class HU{constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Qe.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=l1(t),this.isVariantNode=Fj(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{});for(const h in d){const f=d[h];a[h]!==void 0&&ts(f)&&(f.set(a[h],!1),Pb(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,m2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),ZL.current||$U(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:JA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){m2.delete(this.current),this.projection&&this.projection.unmount(),bo(this.notifyUpdate),bo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const s=du.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Qe.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},s,r,i){let o,a;for(let c=0;c<zU;c++){const u=eD[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=sm[u];f&&(o=f),d(t)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=t;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&zu(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Tt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<g2.length;s++){const r=g2[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=VU(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const t={};for(let s=0;s<UU;s++){const r=qC[s],i=this.props[r];(nm(i)||i===!1)&&(t[r]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=ff(t,{owner:this}),this.addValue(e,s)),s}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(t=tT(this.props,s))===null||t===void 0?void 0:t[e]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ts(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new dT),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class tD extends HU{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...s},{transformValues:r},i){let o=az(s,e||{},this);if(r&&(t&&(t=r(t)),s&&(s=r(s)),o&&(o=r(o))),i){iz(this,s,o);const a=BU(this,s,o,t);t=a.transitionEnd,s=a.target}return{transition:e,transitionEnd:t,...s}}}function GU(n){return window.getComputedStyle(n)}class WU extends tD{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(du.has(t)){const s=oT(t);return s&&s.default||0}else{const s=GU(e),r=(zj(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return zL(e,t)}build(e,t,s,r){YC(e,t,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return eT(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ts(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,s,r){Kj(e,t,s,r)}}class qU extends tD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(du.has(t)){const s=oT(t);return s&&s.default||0}return t=Xj.has(t)?t:GC(t),e.getAttribute(t)}measureInstanceViewportBox(){return Tt()}scrapeMotionValuesFromProps(e,t){return Qj(e,t)}build(e,t,s,r){JC(e,t,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,s,r){Yj(e,t,s,r)}mount(e){this.isSVGTag=ZC(e.tagName),super.mount(e)}}const KU=(n,e)=>XC(n)?new qU(e,{enableHardwareAcceleration:!1}):new WU(e,{enableHardwareAcceleration:!0}),XU={layout:{ProjectionNode:QL,MeasureLayout:HL}},YU={...Sz,...z$,...TU,...XU},ee=Q5((n,e)=>P$(n,e,YU,KU));function nD(){const n=_.useRef(!1);return HC(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function QU(){const n=nD(),[e,t]=_.useState(0),s=_.useCallback(()=>{n.current&&t(e+1)},[e]);return[_.useCallback(()=>Qe.postRender(s),[s]),e]}class JU extends _.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ZU({children:n,isPresent:e}){const t=_.useId(),s=_.useRef(null),r=_.useRef({width:0,height:0,top:0,left:0});return _.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=r.current;if(e||!s.current||!i||!o)return;s.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),_.createElement(JU,{isPresent:e,childRef:s,sizeRef:r},_.cloneElement(n,{ref:s}))}const bS=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o})=>{const a=Jj(e6),c=_.useId(),u=_.useMemo(()=>({id:c,initial:e,isPresent:t,custom:r,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;s&&s()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[t]);return _.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[t]),_.useEffect(()=>{!t&&!a.size&&s&&s()},[t]),o==="popLayout"&&(n=_.createElement(ZU,{isPresent:t},n)),_.createElement(i1.Provider,{value:u},n)};function e6(){return new Map}function t6(n){return _.useEffect(()=>()=>n(),[])}const cl=n=>n.key||"";function n6(n,e){n.forEach(t=>{const s=cl(t);e.set(s,t)})}function s6(n){const e=[];return _.Children.forEach(n,t=>{_.isValidElement(t)&&e.push(t)}),e}const fo=({children:n,custom:e,initial:t=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=_.useContext(KC).forceRender||QU()[0],c=nD(),u=s6(n);let d=u;const h=_.useRef(new Map).current,f=_.useRef(d),m=_.useRef(new Map).current,y=_.useRef(!0);if(HC(()=>{y.current=!1,n6(u,m),f.current=d}),t6(()=>{y.current=!0,m.clear(),h.clear()}),y.current)return _.createElement(_.Fragment,null,d.map(x=>_.createElement(bS,{key:cl(x),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:o},x)));d=[...d];const g=f.current.map(cl),S=u.map(cl),v=g.length;for(let x=0;x<v;x++){const A=g[x];S.indexOf(A)===-1&&!h.has(A)&&h.set(A,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((x,A)=>{if(S.indexOf(A)!==-1)return;const E=m.get(A);if(!E)return;const T=g.indexOf(A);let P=x;if(!P){const k=()=>{h.delete(A);const R=Array.from(m.keys()).filter(M=>!S.includes(M));if(R.forEach(M=>m.delete(M)),f.current=u.filter(M=>{const L=cl(M);return L===A||R.includes(L)}),!h.size){if(c.current===!1)return;a(),s&&s()}};P=_.createElement(bS,{key:cl(E),isPresent:!1,onExitComplete:k,custom:e,presenceAffectsLayout:i,mode:o},E),h.set(A,P)}d.splice(T,0,P)}),d=d.map(x=>{const A=x.key;return h.has(A)?x:_.createElement(bS,{key:cl(x),isPresent:!0,presenceAffectsLayout:i,mode:o},x)}),_.createElement(_.Fragment,null,h.size?d:d.map(x=>_.cloneElement(x)))},r6=gj("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Te=_.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?WB:"button";return p.jsx(o,{className:di(r6({variant:e,size:t,className:n})),ref:i,...r})});Te.displayName="Button";const i6=()=>{const[n,e]=_.useState(!1),[t,s]=_.useState(!1);_.useEffect(()=>{const o=()=>{s(window.scrollY>20)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const r=[{name:"Inicio",href:"#hero"},{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Miniversos",href:"#transmedia"},{name:"Textos",href:"#dialogo-critico"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}],i=o=>{e(!1);const a=document.querySelector(o);a&&a.scrollIntoView({behavior:"smooth"})};return p.jsx(ee.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-black/60 backdrop-blur-lg border-b border-slate-100/10":"bg-transparent"}`,children:p.jsxs("nav",{className:"container mx-auto px-6 py-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(ee.div,{whileHover:{scale:1.05,textShadow:"0 0 8px rgba(233, 213, 255, 0.5)"},className:"font-display text-2xl font-bold text-gradient cursor-pointer",onClick:()=>i("#hero"),children:"#GatoEncerrado "}),p.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[r.map(o=>p.jsx(ee.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>i(o.href),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md",children:o.name},o.name)),p.jsx(ee.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>i("#contact"),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md ml-4 border border-purple-300/30 hover:bg-purple-500/20",children:"Contacto"})]}),p.jsx(Te,{variant:"ghost",size:"icon",className:"md:hidden text-slate-200",onClick:()=>e(!n),children:n?p.jsx(s1,{size:24}):p.jsx(Y4,{size:24})})]}),n&&p.jsxs(ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-4 bg-black/80 backdrop-blur-md rounded-lg p-4 border border-slate-100/10",children:[r.map(o=>p.jsx("button",{onClick:()=>i(o.href),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors",children:o.name},o.name)),p.jsx("button",{onClick:()=>i("#contact"),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2 border-t border-slate-100/10",children:"Contacto"})]})]})})},o6="modulepreload",a6=function(n){return"/"+n},y2={},Ao=function(e,t,s){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=a6(i),i in y2)return;y2[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let d=r.length-1;d>=0;d--){const h=r[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":o6,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},l6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ao(()=>Promise.resolve().then(()=>ty),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class hT extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class v2 extends hT{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class b2 extends hT{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class x2 extends hT{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ZA;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(ZA||(ZA={}));var c6=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class u6{constructor(e,{headers:t={},customFetch:s,region:r=ZA.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=l6(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return c6(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o,signal:a}=t;let c={},{region:u}=t;u||(u=this.region);const d=new URL(`${this.url}/${e}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:h,signal:a}).catch(S=>{throw S.name==="AbortError"?S:new v2(S)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new b2(f);if(!f.ok)throw new x2(f);let y=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield f.json():y==="application/octet-stream"?g=yield f.blob():y==="text/event-stream"?g=f:y==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(r){return r instanceof Error&&r.name==="AbortError"?{data:null,error:new v2(r)}:{data:null,error:r,response:r instanceof x2||r instanceof b2?r.context:void 0}}})}}var Yn={},fT={},h1={},ey={},f1={},p1={},d6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mf=d6();const h6=mf.fetch,f6=mf.fetch.bind(mf),p6=mf.Headers,m6=mf.Request,g6=mf.Response,ty=Object.freeze(Object.defineProperty({__proto__:null,Headers:p6,Request:m6,Response:g6,default:f6,fetch:h6},Symbol.toStringTag,{value:"Module"})),y6=vF(ty);var m1={};Object.defineProperty(m1,"__esModule",{value:!0});let v6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};m1.default=v6;var sD=wn&&wn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(p1,"__esModule",{value:!0});const b6=sD(y6),x6=sD(m1);let w6=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=b6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c,u;let d=null,h=null,f=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const S=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");S&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const S=await i.text();try{d=JSON.parse(S),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,y="OK")}catch{i.status===404&&S===""?(m=204,y="No Content"):d={message:S}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,y="OK"),d&&this.shouldThrowOnError)throw new x6.default(d)}return{error:d,data:h,count:f,status:m,statusText:y}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};p1.default=w6;var S6=wn&&wn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(f1,"__esModule",{value:!0});const A6=S6(p1);let _6=class extends A6.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};f1.default=_6;var E6=wn&&wn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ey,"__esModule",{value:!0});const C6=E6(f1);let T6=class extends C6.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};ey.default=T6;var k6=wn&&wn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(h1,"__esModule",{value:!0});const Bf=k6(ey);let P6=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Bf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Bf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Bf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var s;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Bf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Bf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};h1.default=P6;var rD=wn&&wn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fT,"__esModule",{value:!0});const R6=rD(h1),N6=rD(ey);let M6=class iD{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new R6.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new iD(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var o;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;s||r?(a=s?"HEAD":"GET",Object.entries(t).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(a="POST",u=t);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new N6.default({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};fT.default=M6;var Af=wn&&wn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Yn,"__esModule",{value:!0});Yn.PostgrestError=Yn.PostgrestBuilder=Yn.PostgrestTransformBuilder=Yn.PostgrestFilterBuilder=Yn.PostgrestQueryBuilder=Yn.PostgrestClient=void 0;const oD=Af(fT);Yn.PostgrestClient=oD.default;const aD=Af(h1);Yn.PostgrestQueryBuilder=aD.default;const lD=Af(ey);Yn.PostgrestFilterBuilder=lD.default;const cD=Af(f1);Yn.PostgrestTransformBuilder=cD.default;const uD=Af(p1);Yn.PostgrestBuilder=uD.default;const dD=Af(m1);Yn.PostgrestError=dD.default;var j6=Yn.default={PostgrestClient:oD.default,PostgrestQueryBuilder:aD.default,PostgrestFilterBuilder:lD.default,PostgrestTransformBuilder:cD.default,PostgrestBuilder:uD.default,PostgrestError:dD.default};const{PostgrestClient:L6,PostgrestQueryBuilder:L9,PostgrestFilterBuilder:D9,PostgrestTransformBuilder:I9,PostgrestBuilder:O9,PostgrestError:F9}=j6;class D6{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const I6="2.15.6",O6=`realtime-js/${I6}`,F6="1.0.0",e_=1e4,B6=1e3,$6=100;var Dp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Dp||(Dp={}));var Nt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Nt||(Nt={}));var Ar;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Ar||(Ar={}));var t_;(function(n){n.websocket="websocket"})(t_||(t_={}));var fl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(fl||(fl={}));class V6{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const c=s.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class hD{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(We||(We={}));const w2=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=z6(o,n,e,r),i),{}):{}},z6=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?fD(i,o):n_(o)},fD=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return W6(e,t)}switch(n){case We.bool:return U6(e);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return H6(e);case We.json:case We.jsonb:return G6(e);case We.timestamp:return q6(e);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return n_(e);default:return n_(e)}},n_=n=>n,U6=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},H6=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},G6=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},W6=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>fD(e,a))}return n},q6=n=>typeof n=="string"?n.replace(" ","T"):n,pD=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class xS{constructor(e,t,s={},r=e_){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var S2;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(S2||(S2={}));class Ip{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ip.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=Ip.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ip.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(S=>S.presence_ref),m=h.map(S=>S.presence_ref),y=d.filter(S=>m.indexOf(S.presence_ref)<0),g=h.filter(S=>f.indexOf(S.presence_ref)<0);y.length>0&&(a[u]=y),g.length>0&&(c[u]=g)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}s(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var A2;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(A2||(A2={}));var Op;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Op||(Op={}));var vi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(vi||(vi={}));class pT{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new xS(this,Ar.join,this.params,this.timeout),this.rejoinTimer=new hD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Nt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ar.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Ip(this),this.broadcastEndpointURL=pD(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Nt.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[Op.PRESENCE]&&this.bindings[Op.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(vi.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(vi.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(vi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,S=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<S;x++){const A=g[x],{filter:{event:E,schema:T,table:P,filter:k}}=A,R=m&&m[x];if(R&&R.event===E&&R.schema===T&&R.table===P&&R.filter===k)v.push(Object.assign(Object.assign({},A),{id:R.id}));else{this.unsubscribe(),this.state=Nt.errored,e==null||e(vi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(vi.SUBSCRIBED);return}}).receive("error",m=>{this.state=Nt.errored,e==null||e(vi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Nt.joined&&e===Op.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Nt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ar.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new xS(this,Ar.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Nt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new xS(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>$6){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=Ar;if(s&&[a,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var y,g,S;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((S=(g=m.filter)===null||g===void 0?void 0:g.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(m=>m.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,g,S,v,x,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,T=(y=m.filter)===null||y===void 0?void 0:y.event;return E&&((g=t.ids)===null||g===void 0?void 0:g.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const E=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return E==="*"||E===((A=t==null?void 0:t.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:g,table:S,commit_timestamp:v,type:x,errors:A}=y;f=Object.assign(Object.assign({},{schema:g,table:S,commit_timestamp:v,eventType:x,new:{},old:{},errors:A}),this._getPayloadRecords(y))}m.callback(f,s)})}_isClosed(){return this.state===Nt.closed}_isJoined(){return this.state===Nt.joined}_isJoining(){return this.state===Nt.joining}_isLeaving(){return this.state===Nt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&pT.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ar.close,{},e)}_onError(e){this._on(Ar.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Nt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=w2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=w2(e.columns,e.old_record)),t}}const wS=()=>{},Fy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},K6=[1e3,2e3,5e3,1e4],X6=1e4,Y6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Q6{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=e_,this.transport=null,this.heartbeatIntervalMs=Fy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wS,this.ref=0,this.reconnectTimer=null,this.logger=wS,this.conn=null,this.sendBuffer=[],this.serializer=new V6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>Ao(()=>Promise.resolve().then(()=>ty),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${t_.websocket}`,this.httpEndpoint=pD(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=D6.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:F6}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Dp.connecting:return fl.Connecting;case Dp.open:return fl.Open;case Dp.closing:return fl.Closing;default:return fl.Closed}}isConnected(){return this.connectionState()===fl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new pT(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(B6,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Fy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:o}=t,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${r} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ar.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([Y6],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:O6};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Ar.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new hD(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,o,a,c,u,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:e_,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Fy.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:wS,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>K6[h-1]||X6,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class mT extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Dt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class J6 extends mT{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class s_ extends mT{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Z6=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const mD=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Ao(()=>Promise.resolve().then(()=>ty),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},e8=()=>Z6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ao(()=>Promise.resolve().then(()=>ty),void 0)).Response:Response}),r_=n=>{if(Array.isArray(n))return n.map(t=>r_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=r_(s)}),e},t8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var fu=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const SS=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),n8=(n,e,t)=>fu(void 0,void 0,void 0,function*(){const s=yield e8();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new J6(SS(r),i,o))}).catch(r=>{e(new s_(SS(r),r))}):e(new s_(SS(n),n))}),s8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?r:(t8(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function ny(n,e,t,s,r,i){return fu(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,s8(e,s,r,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>n8(c,a,s))})})}function Nb(n,e,t,s){return fu(this,void 0,void 0,function*(){return ny(n,"GET",e,t,s)})}function Dr(n,e,t,s,r){return fu(this,void 0,void 0,function*(){return ny(n,"POST",e,s,r,t)})}function i_(n,e,t,s,r){return fu(this,void 0,void 0,function*(){return ny(n,"PUT",e,s,r,t)})}function r8(n,e,t,s){return fu(this,void 0,void 0,function*(){return ny(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function gD(n,e,t,s,r){return fu(this,void 0,void 0,function*(){return ny(n,"DELETE",e,s,r,t)})}var An=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const i8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class o8{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=mD(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return An(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},_2),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield(e=="PUT"?i_:Dr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Dt(i))return{data:null,error:i};throw i}})}upload(e,t,s){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return An(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:_2.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield i_(this.fetch,a.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Dt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return An(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Dr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new mT("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}update(e,t,s){return An(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return An(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}copy(e,t,s){return An(this,void 0,void 0,function*(){try{return{data:{path:(yield Dr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return An(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Dr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return An(this,void 0,void 0,function*(){try{const r=yield Dr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}download(e,t){return An(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Nb(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Dt(a))return{data:null,error:a};throw a}})}info(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Nb(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:r_(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}exists(e){return An(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield r8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s)&&s instanceof s_){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${u}`)}}}remove(e){return An(this,void 0,void 0,function*(){try{return{data:yield gD(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}list(e,t,s){return An(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},i8),t),{prefix:e||""});return{data:yield Dr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}listV2(e,t){return An(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Dr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const a8="2.12.1",l8={"X-Client-Info":`storage-js/${a8}`};var yu=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class c8{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},l8),t),this.fetch=mD(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return yu(this,void 0,void 0,function*(){try{return{data:yield Nb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Dt(e))return{data:null,error:e};throw e}})}getBucket(e){return yu(this,void 0,void 0,function*(){try{return{data:yield Nb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return yu(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return yu(this,void 0,void 0,function*(){try{return{data:yield i_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Dt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return yu(this,void 0,void 0,function*(){try{return{data:yield Dr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return yu(this,void 0,void 0,function*(){try{return{data:yield gD(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Dt(t))return{data:null,error:t};throw t}})}}class u8 extends c8{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new o8(this.url,this.headers,e,this.fetch)}}const d8="2.30.0",h8={"X-Client-Info":`supabase-js/${d8}`};var o_={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof wn<"u"&&wn,s=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof wn<"u"&&wn||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(N){return N&&DataView.prototype.isPrototypeOf(N)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(N){return N&&d.indexOf(Object.prototype.toString.call(N))>-1};function f(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function m(N){return typeof N!="string"&&(N=String(N)),N}function y(N){var j={next:function(){var O=N.shift();return{done:O===void 0,value:O}}};return c.iterable&&(j[Symbol.iterator]=function(){return j}),j}function g(N){this.map={},N instanceof g?N.forEach(function(j,O){this.append(O,j)},this):Array.isArray(N)?N.forEach(function(j){if(j.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+j.length);this.append(j[0],j[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(j){this.append(j,N[j])},this)}g.prototype.append=function(N,j){N=f(N),j=m(j);var O=this.map[N];this.map[N]=O?O+", "+j:j},g.prototype.delete=function(N){delete this.map[f(N)]},g.prototype.get=function(N){return N=f(N),this.has(N)?this.map[N]:null},g.prototype.has=function(N){return this.map.hasOwnProperty(f(N))},g.prototype.set=function(N,j){this.map[f(N)]=m(j)},g.prototype.forEach=function(N,j){for(var O in this.map)this.map.hasOwnProperty(O)&&N.call(j,this.map[O],O,this)},g.prototype.keys=function(){var N=[];return this.forEach(function(j,O){N.push(O)}),y(N)},g.prototype.values=function(){var N=[];return this.forEach(function(j){N.push(j)}),y(N)},g.prototype.entries=function(){var N=[];return this.forEach(function(j,O){N.push([O,j])}),y(N)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function S(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function v(N){return new Promise(function(j,O){N.onload=function(){j(N.result)},N.onerror=function(){O(N.error)}})}function x(N){var j=new FileReader,O=v(j);return j.readAsArrayBuffer(N),O}function A(N){var j=new FileReader,O=v(j),F=/charset=([A-Za-z0-9_-]+)/.exec(N.type),$=F?F[1]:"utf-8";return j.readAsText(N,$),O}function E(N){for(var j=new Uint8Array(N),O=new Array(j.length),F=0;F<j.length;F++)O[F]=String.fromCharCode(j[F]);return O.join("")}function T(N){if(N.slice)return N.slice(0);var j=new Uint8Array(N.byteLength);return j.set(new Uint8Array(N)),j.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:c.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:c.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():c.arrayBuffer&&c.blob&&u(N)?(this._bodyArrayBuffer=T(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||h(N))?this._bodyArrayBuffer=T(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var N=S(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=S(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=S(this);if(N)return N;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var k=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(N){var j=N.toUpperCase();return k.indexOf(j)>-1?j:N}function M(N,j){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');j=j||{};var O=j.body;if(N instanceof M){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,j.headers||(this.headers=new g(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!O&&N._bodyInit!=null&&(O=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=j.credentials||this.credentials||"same-origin",(j.headers||!this.headers)&&(this.headers=new g(j.headers)),this.method=R(j.method||this.method||"GET"),this.mode=j.mode||this.mode||null,this.signal=j.signal||this.signal||function(){if("AbortController"in a){var V=new AbortController;return V.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(j.cache==="no-store"||j.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function L(N){var j=new FormData;return N.trim().split("&").forEach(function(O){if(O){var F=O.split("="),$=F.shift().replace(/\+/g," "),V=F.join("=").replace(/\+/g," ");j.append(decodeURIComponent($),decodeURIComponent(V))}}),j}function B(N){var j=new g,O=N.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var $=F.split(":"),V=$.shift().trim();if(V){var W=$.join(":").trim();try{j.append(V,W)}catch(K){console.warn("Response "+K.message)}}}),j}P.call(M.prototype);function D(N,j){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(j||(j={}),this.type="default",this.status=j.status===void 0?200:j.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=j.statusText===void 0?"":""+j.statusText,this.headers=new g(j.headers),this.url=j.url||"",this._initBody(N)}P.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},D.error=function(){var N=new D(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var z=[301,302,303,307,308];D.redirect=function(N,j){if(z.indexOf(j)===-1)throw new RangeError("Invalid status code");return new D(null,{status:j,headers:{location:N}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(j,O){this.message=j,this.name=O;var F=Error(j);this.stack=F.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function I(N,j){return new Promise(function(O,F){var $=new M(N,j);if($.signal&&$.signal.aborted)return F(new o.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function W(){V.abort()}V.onload=function(){var re={statusText:V.statusText,headers:B(V.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(V.status<200||V.status>599)?re.status=200:re.status=V.status,re.url="responseURL"in V?V.responseURL:re.headers.get("X-Request-URL");var fe="response"in V?V.response:V.responseText;setTimeout(function(){O(new D(fe,re))},0)},V.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},V.onabort=function(){setTimeout(function(){F(new o.DOMException("Aborted","AbortError"))},0)};function K(re){try{return re===""&&a.location.href?a.location.href:re}catch{return re}}if(V.open($.method,K($.url),!0),$.credentials==="include"?V.withCredentials=!0:$.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(c.blob?V.responseType="blob":c.arrayBuffer&&(V.responseType="arraybuffer")),j&&typeof j.headers=="object"&&!(j.headers instanceof g||a.Headers&&j.headers instanceof a.Headers)){var Y=[];Object.getOwnPropertyNames(j.headers).forEach(function(re){Y.push(f(re)),V.setRequestHeader(re,m(j.headers[re]))}),$.headers.forEach(function(re,fe){Y.indexOf(fe)===-1&&V.setRequestHeader(fe,re)})}else $.headers.forEach(function(re,fe){V.setRequestHeader(fe,re)});$.signal&&($.signal.addEventListener("abort",W),V.onreadystatechange=function(){V.readyState===4&&$.signal.removeEventListener("abort",W)}),V.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=g,a.Request=M,a.Response=D),o.Headers=g,o.Request=M,o.Response=D,o.fetch=I,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var r=t.fetch?t:s;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,n.exports=e})(o_,o_.exports);var gT=o_.exports;const yD=Dw(gT),f8=kR({__proto__:null,default:yD},[gT]);var p8=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const m8=n=>{let e;return n?e=n:typeof fetch>"u"?e=yD:e=fetch,(...t)=>e(...t)},g8=()=>typeof Headers>"u"?gT.Headers:Headers,y8=(n,e,t)=>{const s=m8(t),r=g8();return(i,o)=>p8(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};function v8(n){return n.replace(/\/$/,"")}function b8(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:c,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},u),i)}}function x8(n){return Math.round(Date.now()/1e3)+n}function w8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const fi=()=>typeof document<"u",sl={tested:!1,writable:!1},vv=()=>{if(!fi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(sl.tested)return sl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),sl.tested=!0,sl.writable=!0}catch{sl.tested=!0,sl.writable=!1}return sl.writable};function Fn(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const s=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),r=s.exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const vD=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await Ao(()=>Promise.resolve().then(()=>f8),void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},S8=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",$f=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},By=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},AS=async(n,e)=>{await n.removeItem(e)};function A8(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,c,u,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=e.indexOf(n.charAt(d++)),a=e.indexOf(n.charAt(d++)),c=e.indexOf(n.charAt(d++)),u=e.indexOf(n.charAt(d++)),s=o<<2|a>>4,r=(a&15)<<4|c>>2,i=(c&3)<<6|u,t=t+String.fromCharCode(s),c!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class g1{constructor(){this.promise=new g1.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}g1.promiseConstructor=Promise;function E2(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(A8(s))}function _8(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function E8(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function C8(n){return("0"+n.toString(16)).substr(-2)}function $y(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,C8).join("")}async function T8(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function k8(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vy(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await T8(n);return k8(e)}const P8="__stack_guard__",R8="__",N8=/__stack_guard__([a-zA-Z0-9_-]+)__/;let C2=!1,yT;function a_(n){var e,t;yT();let s;try{throw new Error}catch(i){s=i}const r=(t=(e=s.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let i=0;i<r.length;i+=1){const a=r[i].match(N8);if(a&&a[1]===n)return!0}return!1}async function l_(n,e){await yT();const t=`${P8}${n}${R8}`;return await{[t]:async()=>await e()}[t]()}yT=async()=>{C2||(C2=!0,await l_("ENV_CHECK",async()=>{const n=a_("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class vT extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Ce(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class M8 extends vT{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function j8(n){return Ce(n)&&n.name==="AuthApiError"}class bD extends vT{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class _f extends vT{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vu extends _f{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class _S extends _f{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class zy extends _f{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class hi extends _f{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ES extends _f{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class c_ extends _f{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function T2(n){return Ce(n)&&n.name==="AuthRetryableFetchError"}var L8=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const Jf=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),D8=[502,503,504];async function k2(n){if(!S8(n))throw new c_(Jf(n),0);if(D8.includes(n.status))throw new c_(Jf(n),n.status);let e;try{e=await n.json()}catch(t){throw new bD(Jf(t),t)}throw new M8(Jf(e),n.status||500)}const I8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function Re(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await O8(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function O8(n,e,t,s,r,i){const o=I8(e,s,r,i);let a;try{a=await n(t,o)}catch(c){throw console.error(c),new c_(Jf(c),0)}if(a.ok||await k2(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await k2(c)}}function Co(n){var e;let t=null;V8(n)&&(t=Object.assign({},n),t.expires_at=x8(n.expires_in));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function pl(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function F8(n){return{data:n,error:null}}function B8(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=L8(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function $8(n){return n}function V8(n){return n.access_token&&n.refresh_token&&n.expires_in}var z8=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class U8{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=vD(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ce(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:pl})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=z8(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:B8,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Ce(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:pl})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:$8});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(y.split(";")[1].split("=")[1]);u[`${S}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ce(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:pl})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:pl})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:pl})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ce(t))return{data:null,error:t};throw t}}}const H8="2.43.1",G8="http://localhost:9999",W8="supabase.auth.token",q8={"X-Client-Info":`gotrue-js/${H8}`},P2=10,R2={getItem:n=>vv()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{vv()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{vv()&&globalThis.localStorage.removeItem(n)}};function K8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}K8();const X8={url:G8,storageKey:W8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:q8,flowType:"implicit",debug:!1},Uy=30*1e3,N2=3;class im{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=im.nextInstanceID,im.nextInstanceID+=1,this.instanceID>0&&fi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},X8),e);if(this.logDebugMessages=s.debug,this.inMemorySession=null,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.persistSession=s.persistSession,this.storage=s.storage||R2,this.admin=new U8({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vD(s.fetch),this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===R2&&!vv()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),fi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=l_("_initialize",async()=>{try{const e=fi()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromUrl(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),await this._removeSession(),{error:s};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Ce(e)?{error:e}:{error:new bD("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,s,r;try{await this._removeSession();let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,y=null;if(this.flowType==="pkce"){const g=$y();await $f(this.storage,`${this.storageKey}-code-verifier`,g),m=await Vy(g),y=g===m?"plain":"s256"}i=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:Co})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Co})}else throw new zy("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Ce(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Co})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Co})}else throw new zy("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new _S}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:{user:s.user,session:s.session},error:r})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await By(this.storage,`${this.storageKey}-code-verifier`),{data:s,error:r}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Co});return await AS(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new _S}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:r})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Co}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new _S}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:c}=e;let u=null,d=null;if(this.flowType==="pkce"){const f=$y();await $f(this.storage,`${this.storageKey}-code-verifier`,f),u=await Vy(f),d=f===u?"plain":"s256"}const{error:h}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new zy("You must provide either an email or phone number.")}catch(a){if(Ce(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:r,error:i}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,xform:Co});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,a=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(r){if(Ce(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{return await this._removeSession(),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:F8})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new vu;const{error:r}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await Re(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await Re(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new zy("You must provide either an email or phone number and a type")}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await l_("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!a_("_useSession"))throw new Error("Please use #_useSession()");a_("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const i=await By(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var s,r;if(!e){const{data:i,error:o}=t;if(o)throw o;e=(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0}return await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pl})})}catch(t){if(Ce(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new vu;const o=r.session,{data:a,error:c}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:o.access_token,xform:pl});if(c)throw c;return o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Ce(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return E2(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vu;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=E2(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this.getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ce(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new vu;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ce(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!fi())throw new hi("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new hi("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new ES("Not a valid PKCE flow url.");if(e){const S=Fn("code");if(!S)throw new ES("No code detected.");const{data:v,error:x}=await this.exchangeCodeForSession(S);if(x)throw x;if(!v.session)throw new ES("No session detected.");let A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:v.session,redirectType:null},error:null}}const t=Fn("error_description");if(t){const S=Fn("error_code");if(!S)throw new hi("No error_code detected.");const v=Fn("error");throw v?new hi(t,{error:v,code:S}):new hi("No error detected.")}const s=Fn("provider_token"),r=Fn("provider_refresh_token"),i=Fn("access_token");if(!i)throw new hi("No access_token detected.");const o=Fn("expires_in");if(!o)throw new hi("No expires_in detected.");const a=Fn("refresh_token");if(!a)throw new hi("No refresh_token detected.");const c=Fn("token_type");if(!c)throw new hi("No token_type detected.");const d=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:f}=await this.getUser(i);if(f)throw f;const m=h.user,y={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:parseInt(o),expires_at:d,refresh_token:a,token_type:c,user:m},g=Fn("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:y,redirectType:g},error:null}}catch(t){if(Ce(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return fi()&&(!!Fn("access_token")||!!Fn("error_description"))}async _isPKCEFlow(){const e=await By(this.storage,`${this.storageKey}-code-verifier`);return!!Fn("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(j8(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await AS(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=w8(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),this._emitInitialSession(t),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if(this.flowType==="pkce"){const i=$y();await $f(this.storage,`${this.storageKey}-code-verifier`,i),s=await Vy(i),r=i===s?"plain":"s256"}try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await E8(async r=>(await _8(r*200),this._debug(t,"refreshing attempt",r),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Co})),(r,i,o)=>o&&o.error&&T2(o.error)&&Date.now()+(r+1)*200-s<Uy)}catch(s){if(this._debug(t,"error",s),Ce(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),fi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await By(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+P2;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${P2}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),T2(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new vu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new g1;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new vu;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Ce(i)){const o={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),$f(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await AS(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Uy);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Uy);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Uy}ms, refresh threshold is ${N2} ticks`),r<=N2&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const s=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const r=$y();await $f(this.storage,`${this.storageKey}-code-verifier`,r);const i=await Vy(r),o=r===i?"plain":"s256";this._debug("PKCE","code verifier",`${r.substring(0,5)}...`,"code challenge",i,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(t!=null&&t.queryParams){const r=new URLSearchParams(t.queryParams);s.push(r.toString())}return`${this.url}/authorize?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:c}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Ce(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}})}}im.nextInstanceID=0;class Y8 extends im{constructor(e){super(e)}}var Q8=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const J8={headers:h8},Z8={schema:"public"},eH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tH={};class nH{constructor(e,t,s){var r,i,o,a,c,u,d,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=v8(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:Z8,realtime:tH,auth:Object.assign(Object.assign({},eH),{storageKey:m}),global:J8},g=b8(s??{},y);this.storageKey=(i=(r=g.auth)===null||r===void 0?void 0:r.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,(u=g.global)===null||u===void 0?void 0:u.fetch),this.fetch=y8(t,this._getAccessToken.bind(this),(d=g.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new L6(`${f}/rest/v1`,{headers:this.headers,schema:(h=g.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new u6(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new u8(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Q8(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,debug:a},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Y8({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,debug:a,fetch:u})}_initRealtimeClient(e){return new Q6(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const sH=(n,e,t)=>new nH(n,e,t),rH="https://ytubybkoucltwnselbhc.supabase.co",iH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo",Ot=sH(rH,iH),M2=["#f472b6","#a855f7","#facc15","#34d399"],oH=({seed:n})=>{const e=_.useMemo(()=>Array.from({length:12},(t,s)=>({left:Math.random()*100,delay:Math.random()*.2,color:M2[s%M2.length]})),[n]);return p.jsx("div",{className:"confetti-layer","aria-hidden":"true",children:e.map((t,s)=>p.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${Math.random()*20}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${s}`))})},aH=()=>{const[n,e]=_.useState([]),t=_.useCallback(()=>{const s=Date.now();e(r=>[...r,s]),setTimeout(()=>{e(r=>r.filter(i=>i!==s))},1100)},[]);return{bursts:n,fireConfetti:t}},lH="/assets/logoapp.png",Zf=[{value:"recordatorio",label:"Recordatorio de la funcin",description:"Recibe el aviso oficial justo antes de que abra la funcin en diciembre."},{value:"reservaciones",label:"Informacin sobre reservaciones",description:"Accede a la lnea de reservaciones y consulta los paquetes que an quedan."}],cH="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Gato%20Encerrado%20%C2%B7%2028%20de%20diciembre&dates=20241228T210000Z/20241228T223000Z&details=Funci%C3%B3n%20especial%20en%20CEC&location=CECUT",uH={}.VITE_SMS_NUMBER||"+5215550112233",dH=encodeURIComponent("Recordarme la funcin #GatoEncerrado el 28 de diciembre en CECUT."),hH=[{id:"calendar",label:"Aadir a mi calendario",description:"Calendario de Google prellenado con lugar y horario.",href:cH},{id:"sms",label:"Enviar notificacin va SMS",description:"Recibe una alerta en tu celular el da del evento.",href:`sms:${uH}?body=${dH}`}],xD=[{id:"taza-250",title:"Taza",price:"$250",helper:"Edicin especial disponible el da del evento."},{id:"taza-causa-600",title:"Taza con causa",price:"$600",helper:"Incluye membresa de 6 meses. Se entrega el 28 de diciembre."},{id:"novela-400",title:"Novela Mi Gato Encerrado",price:"$400",helper:"Primera edicin con QR secreto."},{id:"combo-900",title:"Combo dos tazas + novela",price:"$900",helper:"Paquete completo disponible solo el da del evento."}],fH=xD.reduce((n,e)=>(n[e.id]=`${e.title}  ${e.price}`,n),{}),j2={fullName:"",email:"",city:"",interest:Zf[0].value,notes:"",packages:[]},pH={hidden:{opacity:0},visible:{opacity:.85}},mH={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},bT=({open:n,onClose:e,initialInterest:t=Zf[0].value})=>{const[s,r]=_.useState(j2),[i,o]=_.useState("idle"),[a,c]=_.useState(""),{bursts:u,fireConfetti:d}=aH();_.useEffect(()=>{n&&(r({...j2,interest:t}),o("idle"),c(""))},[n,t]),_.useEffect(()=>{if(!n)return;const S=v=>{v.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[n,e]);const h=_.useCallback(S=>{const{name:v,value:x}=S.target;r(A=>({...A,[v]:x}))},[]),f=_.useCallback(S=>{r(v=>{const x=v.packages.includes(S);return{...v,packages:x?v.packages.filter(A=>A!==S):[...v.packages,S]}})},[]),m=_.useMemo(()=>Zf.find(S=>S.value===s.interest)??Zf[0],[s.interest]),y=_.useCallback(async S=>{if(S.preventDefault(),i!=="loading"){if(!s.fullName.trim()||!s.email.trim()){Ue({description:"Por favor completa tu nombre y correo electrnico."});return}o("loading"),c("");try{const v=s.packages.length>0?`Paquetes apartados (sin pago): ${s.packages.map(E=>fH[E]).join(", ")}`:null,x={full_name:s.fullName.trim(),email:s.email.trim().toLowerCase(),city:s.city.trim()||null,interest:s.interest,channel:"landing",object_type:"boleto",event:"funcion-2024-12-28",notes:[v,s.notes.trim()].filter(Boolean).join(" | ")||null},{error:A}=await Ot.from("rsvp_extended").insert(x);if(A){o("error"),c("No pudimos registrar tu solicitud. Intenta nuevamente.");return}await gH({email:x.email,name:x.full_name,interestLabel:m.label,interestValue:x.interest,city:x.city,notes:x.notes}),d(),o("success"),Ue({description:"Gracias! Te enviaremos las prximas novedades."})}catch{o("error"),c("Ocurri un error inesperado. Intenta ms tarde.")}}},[s,m.label,i,d]),g=_.useCallback(()=>{i!=="loading"&&(e==null||e())},[e,i]);return p.jsx(fo,{children:n&&p.jsxs(ee.div,{className:"fixed inset-0 z-50 flex items-start justify-center px-4 py-6 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ee.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:pH,onClick:g}),p.jsxs(ee.div,{role:"dialog","aria-modal":"true",variants:mH,className:"relative z-10 w-full max-w-3xl rounded-3xl border border-white/10 bg-slate-950/95 p-6 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[u.map(S=>p.jsx(oH,{seed:S},S)),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:lH,alt:"#GatoEncerrado",className:"h-12 w-auto object-contain rounded-full border border-white/20 bg-white/5 p-1 shadow-lg"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"28 de diciembre  CECUT"}),p.jsx("h2",{className:"font-display text-3xl text-slate-50",children:"Compra tu boleto y aparta tu lugar en el universo de #GatoEncerrado"})]})]}),p.jsx("button",{onClick:g,className:"self-end text-slate-400 hover:text-white transition",children:""})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-5 text-sm text-slate-300/90 leading-relaxed",children:[p.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4 space-y-3",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100",children:"Compra presencial en taquilla del CECUT"}),p.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[p.jsx("li",{children:" Taquilla del CECUT  Preventa disponible hasta agotar localidades."}),p.jsx("li",{children:" Llvate una taza como incentivo de preventa."}),p.jsx("li",{children:" Las tazas se entregan exclusivamente en taquilla, hasta agotar existencias."}),p.jsxs("li",{children:[" Tambin puedes comprar en lnea:"," ",p.jsx("a",{href:"https://www.taquillacecut.com.mx/eventos/saladeespectaculos/2025-12-28",target:"_blank",rel:"noopener noreferrer",className:"text-purple-300 underline underline-offset-4 hover:text-white",children:"taquillacecut.com.mx  Entrada 28/12"})]})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4 space-y-3",children:[p.jsx("h3",{className:"font-display text-lg text-purple-200",children:"Mesa con Merch el da de la funcin"}),p.jsx("p",{className:"text-xs text-slate-400/80",children:"Si deseas apartar o pagar por adelantado, djalo marcado y te enviaremos un enlace seguro para completar tu registro."}),p.jsx("div",{className:"grid sm:grid-cols-2 gap-3 text-sm text-slate-200",children:xD.map(S=>p.jsxs("label",{className:"flex items-start gap-3 rounded-xl border border-white/10 bg-black/30 px-3 py-2",children:[p.jsx("input",{type:"checkbox",checked:s.packages.includes(S.id),onChange:()=>f(S.id),className:"mt-1 h-4 w-4 rounded border-slate-400 bg-black/40 text-purple-500 focus:ring-purple-400"}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("p",{className:"font-semibold text-slate-100",children:[S.title," ",p.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",S.price]})]}),p.jsx("p",{className:"text-xs text-slate-400",children:S.helper})]})]},S.id))})]})]}),p.jsxs("form",{className:"space-y-5",onSubmit:y,children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),p.jsx("input",{name:"fullName",type:"text",required:!0,value:s.fullName,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo te llamas?"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),p.jsx("input",{name:"email",type:"email",required:!0,value:s.email,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Ciudad"}),p.jsx("input",{name:"city",type:"text",value:s.city,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Desde dnde nos visitas?"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Qu quieres recibir?"}),p.jsx("select",{name:"interest",value:s.interest,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",children:Zf.map(S=>p.jsx("option",{value:S.value,children:S.label},S.value))}),p.jsx("p",{className:"text-xs text-slate-400/80",children:m.description})]}),p.jsxs("div",{className:"glass-effect rounded-2xl border border-white/5 bg-black/25 p-4 space-y-3",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100",children:"Accin preferida"}),s.interest==="recordatorio"?p.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:hH.map(S=>p.jsxs("a",{href:S.href,target:"_blank",rel:"noreferrer",className:"flex flex-col gap-2 rounded-xl border border-white/10 bg-slate-900/40 px-4 py-3 text-slate-100 hover:border-purple-400/80 hover:bg-slate-900/70 transition",children:[p.jsx("span",{className:"text-sm font-semibold",children:S.label}),p.jsx("span",{className:"text-xs text-slate-400/80",children:S.description})]},S.id))}):p.jsx("div",{className:"space-y-3",children:p.jsx("p",{className:"text-xs text-slate-300/80",children:"Recibirs en tu correo (y en el CTA de confirmacin) la lnea de reservaciones para concretar el paquete que quieras. Nos encargamos de enviarte la liga segura sin saturar este formulario."})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),p.jsx("textarea",{name:"notes",rows:3,value:s.notes,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Necesitas facilidades especiales o tienes un cdigo de preventa?"})]}),i==="error"&&p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:a}),i==="success"&&p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu registro qued guardado. Revisaremos tu correo con los siguientes pasos."}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(Te,{type:"submit",disabled:i==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:i==="loading"?"Enviando":"Guardar mi registro"}),p.jsx("button",{type:"button",onClick:g,className:"text-sm text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]})]})]})})};async function gH({email:n,name:e,interestLabel:t,interestValue:s,city:r,notes:i}){if(n)try{const{error:o}=await Ot.functions.invoke("send-reserve-confirmation",{body:{email:n,name:e,interestLabel:t,interestValue:s,city:r,notes:i}});o&&console.error("[ReserveModal] Error en sendReserveConfirmationEmail:",o)}catch(o){console.error("[ReserveModal] Excepcin en sendReserveConfirmationEmail:",o)}}const yH="/assets/bg-logo-ba7fccc4.png",vH=()=>{const[n,e]=_.useState(!1),t=_.useCallback(()=>{const i=document.querySelector("#about");i==null||i.scrollIntoView({behavior:"smooth"})},[]),s=_.useCallback(()=>{e(!0)},[]),r=_.useCallback(()=>{e(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"hero",className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[p.jsxs("div",{className:"absolute inset-0 bg-black",children:[p.jsxs("div",{className:"absolute inset-0 opacity-30",children:[p.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 bg-gradient-to-br from-violet-900/90 via-transparent to-transparent blur-4xl"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-pink-600/40 via-transparent to-transparent blur-3xl"})]}),p.jsx("img",{className:"absolute inset-0 w-full h-full object-cover opacity-15 mix-blend-luminosity pointer-events-none",style:{filter:"contrast(20%) brightness(105%)"},alt:"Textura de teln de teatro de terciopelo oscuro",src:yH})]}),p.jsxs("div",{className:"container mx-auto px-6 text-center relative z-10",children:[p.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"max-w-4xl mx-auto",children:[p.jsx(ee.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.2},className:"font-display text-5xl md:text-7xl font-medium italic mb-6 text-gradient",style:{textShadow:"0 0 20px rgba(233, 213, 255, 0.3)"},children:"#GatoEncerrado"}),p.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.5},className:"text-xl md:text-2xl text-slate-300/80 mb-12 leading-relaxed font-light",children:"Lo ves aqu, pero su voz tambin habita otras dimensiones."}),p.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.8},className:"flex flex-col gap-4 justify-center items-center",children:[p.jsxs(Te,{onClick:()=>s("preventa"),className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[p.jsx(zC,{size:20}),"Compra tu boleto"]}),p.jsx(Te,{variant:"ghost",onClick:t,className:"text-slate-300 hover:text-white hover:bg-white/5 px-8 py-3 rounded-full font-semibold flex items-center gap-2 text-base",children:"Conoce la Obra"})]})]}),p.jsx(ee.div,{animate:{y:[0,10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-50 left-1/2 -translate-x-1/2 text-slate-500",children:p.jsx(F4,{size:24})})]})]}),p.jsx(bT,{open:n,onClose:r,initialInterest:"preventa"})]})},wD="trailers",bH="trailer",xH=/\.(mp4|mov|webm|mkv|m4v)$/i,wH=(n="")=>{var t;switch((t=n.split(".").pop())==null?void 0:t.toLowerCase()){case"webm":return"video/webm";case"mov":return"video/quicktime";case"mkv":return"video/x-matroska";case"m4v":return"video/x-m4v";case"mp4":default:return"video/mp4"}},SD=async(n="")=>{const{data:e,error:t}=await Ot.storage.from(wD).list(n,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});if(t)throw new Error(t.message);if(!Array.isArray(e)||e.length===0)return[];const s=[];for(const r of e){const i=n?`${n}/${r.name}`:r.name;if(!r.metadata){const o=await SD(i);s.push(...o);continue}s.push({...r,fullPath:i})}return s};async function SH(n=bH){var e;try{let t;try{t=await SD("")}catch(o){return console.error("Error al listar trailers:",o.message),null}if(!Array.isArray(t)||t.length===0)return null;const s=n==null?void 0:n.toLowerCase();let r=t.find(o=>{const a=o.fullPath.toLowerCase();return s&&(a===s||a.endsWith(`/${s}`)||a.includes(`/${s}.`)||a===`${s}.mp4`||a.startsWith(`${s}.`))});if(r||(r=t.find(o=>xH.test(o.fullPath))),!r)return null;const{data:i}=Ot.storage.from(wD).getPublicUrl(r.fullPath);return i!=null&&i.publicUrl?{url:i.publicUrl,name:r.fullPath,mimeType:((e=r.metadata)==null?void 0:e.mimetype)||wH(r.fullPath)}:null}catch(t){return console.error("Excepcin al obtener el triler:",t),null}}const AH="Es un gato encerrado existe como obra y como #UniversoTransmedia: es, al mismo tiempo, un relato ntimo en un escenario y una constelacin de la mente y del dolor humano en mltiples lenguajes artsticos. Nuestra obra es el corazn que hace pulsar aquellas preguntas que no estn aqu para contestarse, sino para sentirlas en compaa. En pocas palabras, cuando la obra est latente, el universo #GatoEncerrado contina latiendo en otras narrativas. Un recordatorio de que el corazn nunca se encierra del todo.",_H=[{quote:"Salir de la funcin fue como despertar con nuevos recuerdos. La obra me oblig a conversar con mis propias ausencias.",author:"Maru Solano",role:"Espectadora / Tijuana"},{quote:"Es un Gato Encerrado nos recuerda que el teatro puede ser tambin archivo emocional y dispositivo de memoria.",author:"Dr. Luis Miguel Snchez",role:"Crtico invitado"}],EH=()=>{const[n,e]=_.useState(null),[t,s]=_.useState(!1),[r,i]=_.useState(!1),[o,a]=_.useState(!1),[c,u]=_.useState("preventa"),d=_.useCallback(g=>{u(g),a(!0)},[]),h=_.useCallback(()=>{a(!1)},[]),f=_.useCallback(()=>{var S,v;const g=document.getElementById("blog-submit-cta");if(g){g.scrollIntoView({behavior:"smooth",block:"center"}),(S=g.focus)==null||S.call(g);return}(v=document.querySelector("#blog-contribuye"))==null||v.scrollIntoView({behavior:"smooth",block:"start"})},[]),m=_.useCallback(async()=>{if(!r){if(n!=null&&n.url){s(!0);return}try{i(!0);const g=await SH("trailer");g!=null&&g.url?(e(g),s(!0)):Ue({description:"El triler an no est disponible. Intenta ms tarde."})}catch(g){console.error("Error al obtener el triler:",g),Ue({description:"No se pudo cargar el triler. Intntalo de nuevo ms tarde."})}finally{i(!1)}}},[r,n]),y=_.useCallback(()=>{s(!1);const g=document.getElementById("gato-encerrado-trailer");g&&typeof g.pause=="function"&&g.pause()},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"about",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Sobre la Obra"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light whitespace-pre-line",children:AH})]}),p.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12",children:p.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[p.jsxs("div",{className:"relative order-2 md:order-1",children:[p.jsx("img",{className:"w-full h-96 object-cover rounded-xl shadow-2xl shadow-black/50",alt:"Escena de la obra #GatoEncerrado, luz tenue y misteriosa",src:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/DSC02497.jpg"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl","aria-hidden":"true"})]}),p.jsxs("div",{className:"order-1 md:order-2",children:[p.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"La Mente de Silvestre"}),p.jsxs("p",{className:"text-slate-300/80 leading-relaxed mb-8 font-light",children:["Silvestre vive en ",p.jsx("strong",{children:"Es un gato encerrado"}),". Este es el ",p.jsx("i",{children:"rincn onrico"})," donde enfrenta sus desdoblamientos y dilemas existenciales. Aqu, lo real y lo imaginario ya no compiten. Y t espectador, visitante, cmplice puedes entrar sin tocar la puerta, porque quizs t tambin tienes un gato encerrado en el pecho."]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs(Te,{onClick:m,disabled:r,className:"bg-purple-500/20 border border-purple-400/30 text-purple-300 hover:bg-purple-500/30 hover:text-purple-200 disabled:opacity-60 disabled:cursor-not-allowed px-6 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow",children:[p.jsx(BC,{size:20}),r?"Cargando":"Ver Triler"]}),p.jsxs(Te,{variant:"outline",onClick:()=>d("preventa"),className:"border-slate-100/20 text-slate-200 hover:bg-slate-100/10 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[p.jsx(zC,{size:20}),"RSVP"]})]})]})]})}),p.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-16 glass-effect rounded-2xl p-8 md:p-12",children:p.jsxs("div",{className:"grid md:grid-cols-[3fr_2fr] gap-8 items-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"uppercase tracking-[0.35em] text-xs text-slate-400/80 mb-4",children:"Perspectivas del pblico"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-6 italic",children:"Qu provoca La Obra?"}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-6 font-light",children:"Reunimos testimonios, crticas y preguntas abiertas que continan la conversacin. Haz scroll hacia Textos y Blog para leer ms y expandir tu propia mirada."}),p.jsx(Te,{variant:"outline",onClick:f,className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/20 w-full sm:w-auto whitespace-normal break-words text-center leading-snug",children:"Clica aqu si ya tienes un perspectiva que compartir"})]}),p.jsx("div",{className:"space-y-6",children:_H.map(g=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-6",children:[p.jsx(Z4,{className:"text-purple-300 mb-4",size:28}),p.jsx("p",{className:"text-slate-200 italic leading-relaxed mb-4",children:g.quote}),p.jsxs("div",{className:"text-sm text-slate-400",children:[p.jsx("p",{className:"text-slate-200 font-semibold",children:g.author}),p.jsx("p",{children:g.role})]})]},g.author))})]})})]}),p.jsx(fo,{children:t&&(n==null?void 0:n.url)&&p.jsxs(ee.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(ee.div,{className:"absolute inset-0 bg-black/70",onClick:y,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsxs(ee.div,{className:"relative z-10 w-full max-w-4xl overflow-hidden rounded-3xl bg-slate-950/90 backdrop-blur-xl border border-white/10 shadow-2xl",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:[p.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10 text-slate-200 uppercase tracking-[0.35em] text-xs",children:[p.jsx("span",{children:"Triler #GatoEncerrado"}),p.jsx("button",{onClick:y,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar triler",children:""})]}),p.jsx("div",{className:"relative aspect-video bg-black",children:p.jsx("video",{id:"gato-encerrado-trailer",src:n.url,controls:!0,autoPlay:!0,className:"h-full w-full object-contain"},n.url)})]})]})})]}),p.jsx(bT,{open:o,onClose:h,initialInterest:c})]})},Vf=[{id:"waitlist",label:"Prximamente"},{id:"experiences",label:"Miniversos activos"}],CH=[{title:"Microficciones sonoras",description:"Voces internas de Silvestre publicadas en notas de voz efmeras.",action:"Pronto recibirs el enlace secreto."},{title:"Bitcora interactiva",description:"Un recorrido visual por los objetos que habitan la habitacin de Silvestre.",action:"Se liberar con la novela impresa."},{title:"Constelacin de espectadores",description:"Mapa colaborativo donde la comunidad comparte sueos y teoras.",action:"Disponible a partir de enero 2025."}],L2={fullName:"",email:"",interest:"miniversos",message:""},TH={hidden:{opacity:0},visible:{opacity:.85}},kH={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},PH=({open:n,onClose:e})=>{const[t,s]=_.useState(Vf[0].id),[r,i]=_.useState(L2),[o,a]=_.useState("idle"),[c,u]=_.useState("");_.useEffect(()=>{n&&(s(Vf[0].id),i(L2),a("idle"),u(""))},[n]),_.useEffect(()=>{if(!n)return;const y=g=>{g.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[n,e]);const d=_.useCallback(y=>{const{name:g,value:S}=y.target;i(v=>({...v,[g]:S}))},[]),h=_.useMemo(()=>{var y;return((y=Vf.find(g=>g.id===t))==null?void 0:y.label)??Vf[0].label},[t]),f=_.useCallback(async y=>{var g;if(y.preventDefault(),o!=="loading"){if(!r.fullName.trim()||!r.email.trim()){Ue({description:"Por favor completa tu nombre y correo."});return}a("loading"),u("");try{const S={full_name:r.fullName.trim(),email:r.email.trim().toLowerCase(),city:null,interest:"miniversos",channel:"landing",object_type:"experiencia-digital",event:"miniversos",notes:r.message.trim()||null},{error:v}=await Ot.from("rsvp_extended").insert(S);if(v){console.error("[MiniverseModal] Error al registrar miniverso:",v),a("error"),u((g=v.message)!=null&&g.includes("rsvp_extended")?"Crea la tabla rsvp_extended en Supabase para habilitar este formulario.":"No pudimos registrar tu inters. Intenta de nuevo.");return}a("success"),Ue({description:"Gracias. Te enviaremos una seal cuando el prximo miniverso cobre vida."})}catch(S){console.error("[MiniverseModal] Excepcin al guardar:",S),a("error"),u("Ocurri un error inesperado. Intenta ms tarde.")}}},[r,o]),m=_.useCallback(()=>{o!=="loading"&&(e==null||e())},[e,o]);return p.jsx(fo,{children:n?p.jsxs(ee.div,{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center px-3 py-6 sm:px-4 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ee.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:TH,onClick:m,"aria-hidden":"true"}),p.jsxs(ee.div,{role:"dialog","aria-modal":"true","aria-labelledby":"miniverse-modal-title",variants:kH,className:"relative z-10 w-full max-w-4xl rounded-3xl border border-white/10 bg-slate-950/95 p-5 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"Universos expandidos #GatoEncerrado"}),p.jsx("h2",{id:"miniverse-modal-title",className:"font-display text-3xl text-slate-50",children:"Explora los miniversos"}),p.jsx("p",{className:"text-sm text-slate-400/80",children:"Lo que empieza en el escenario contina en otros formatos. Aqu reunimos las experiencias emergentes."})]}),p.jsx("button",{onClick:m,className:"self-end text-slate-400 hover:text-white transition","aria-label":"Cerrar explorador de miniversos",children:""})]}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Vf.map(y=>p.jsx("button",{onClick:()=>s(y.id),className:`rounded-full border px-4 py-2 text-sm transition ${t===y.id?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:y.label},y.id))}),p.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t==="waitlist"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"space-y-4 text-slate-300/90 text-sm leading-relaxed",children:[p.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100 mb-3",children:"Qu necesitas saber?"}),p.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[p.jsx("li",{children:" Algunos miniversos an estn bajo construccin."}),p.jsx("li",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),p.jsx("li",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4",children:[p.jsx("h3",{className:"font-display text-lg text-purple-200 mb-3",children:"Qu recibirs?"}),p.jsx("p",{children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]})]}),p.jsxs("form",{className:"space-y-5",onSubmit:f,children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),p.jsx("input",{name:"fullName",type:"text",required:!0,value:r.fullName,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),p.jsx("input",{name:"email",type:"email",required:!0,value:r.email,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),p.jsx("textarea",{name:"message",rows:3,value:r.message,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Comparte qu miniverso te emociona ms o si traes alguna propuesta."})]}),o==="error"?p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:c}):null,o==="success"?p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Quedas en lista para las prximas experiencias. Llegar un correo con la primera pista."}):null,p.jsx(Te,{type:"submit",disabled:o==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:o==="loading"?"Guardando":"Quiero recibir las activaciones"})]})]}):p.jsx("div",{className:"md:col-span-2 grid md:grid-cols-3 gap-6",children:CH.map(y=>p.jsxs("div",{className:"glass-effect rounded-2xl border border-white/10 p-6",children:[p.jsx("h3",{className:"font-display text-xl text-slate-100 mb-3",children:y.title}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed mb-4",children:y.description}),p.jsx("span",{className:"text-xs uppercase tracking-[0.25em] text-purple-200/80",children:y.action})]},y.title))})}),p.jsxs("div",{className:"mt-8 flex items-center justify-between text-xs text-slate-500",children:[p.jsx("span",{children:h}),p.jsx("button",{onClick:m,className:"text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]}):null})},RH=()=>{const[n,e]=_.useState(""),[t,s]=_.useState(!1),[r,i]=_.useState("");async function o(){try{s(!0),i("");const a=await fetch("http://localhost:8787/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),c=await a.json();if(!a.ok)throw new Error((c==null?void 0:c.error)||"No se pudo crear la sesin");window.location.href=c.url}catch(a){i(a.message)}finally{s(!1)}}return p.jsxs("div",{className:"max-w-lg mx-auto text-center space-y-3",children:[p.jsx(ee.p,{className:"text-md text-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:"Tu suscripcin mantiene vivo el universo transmedia y respalda la causa que sostiene a #GatoEncerrado."}),p.jsx("input",{type:"email",placeholder:"tu@email.com",value:n,onChange:a=>e(a.target.value),className:"w-full px-3 py-2 rounded text-black"}),p.jsx("button",{onClick:o,disabled:t||!n,className:"bg-white/90 text-black px-4 py-2 rounded disabled:opacity-50",children:t?"Creando sesin":"Continuar con Stripe"}),r&&p.jsx("p",{className:"text-red-300 text-sm",children:r})]})},AD="blog_posts",Hy=[],D2=()=>`post-${Math.random().toString(36).slice(2,10)}`,u_=n=>({id:n.id??n.slug??D2(),slug:n.slug??`post-${n.id??D2()}`,title:n.title??"Entrada sin ttulo",excerpt:n.excerpt??n.summary??"",author:n.author??n.byline??"Autora pendiente",author_role:n.author_role??n.role??"",content:n.content??n.body??"",published_at:n.published_at??n.publish_date??null,read_time_minutes:n.read_time_minutes??n.read_time??null,tags:n.tags??[],featured_image_url:n.featured_image_url??n.cover_image??null});async function NH(){try{const{data:n,error:e}=await Ot.from(AD).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).order("published_at",{ascending:!1}).limit(20);if(e)return console.error("[blogService] Error al obtener posts:",e.message),Hy;if(!Array.isArray(n)||n.length===0)return Hy;const t=n.filter(r=>r.is_published===!0||r.is_published===null||typeof r.is_published>"u").map(u_),s=Hy.filter(r=>!t.some(i=>i.slug===r.slug)).map(u_);return[...t,...s]}catch(n){return console.error("[blogService] Excepcin al obtener posts:",n),Hy}}async function MH(n){if(!n)return null;try{const{data:e,error:t}=await Ot.from(AD).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).eq("slug",n).maybeSingle();return t?(console.error("[blogService] Error al obtener post por slug:",t.message),null):!e||e.is_published===!1?null:u_(e)}catch(e){return console.error("[blogService] Excepcin al buscar post por slug:",e),null}}const Rn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),d_=[.001,0,0,.001,0,0],CS=1.35,As={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ai={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},om="pdfjs_internal_editor_",ae={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},be={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},_D={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Fp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},xt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Su={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},sy={ERRORS:0,WARNINGS:1,INFOS:5},gf={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Gy={moveTo:0,lineTo:1,curveTo:2,closePath:3},ED={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let y1=sy.WARNINGS;function jH(n){Number.isInteger(n)&&(y1=n)}function LH(){return y1}function v1(n){y1>=sy.INFOS&&console.info(`Info: ${n}`)}function le(n){y1>=sy.WARNINGS&&console.warn(`Warning: ${n}`)}function He(n){throw new Error(n)}function Se(n,e){n||He(e)}function DH(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function xT(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=$H(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return DH(s)?s:null}function wT(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&xT(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function he(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const pu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class I2 extends pu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class TS extends pu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Mb extends pu{constructor(e){super(e,"InvalidPDFException")}}class am extends pu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class IH extends pu{constructor(e){super(e,"FormatError")}}class xo extends pu{constructor(e){super(e,"AbortException")}}function CD(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&He("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function ry(n){typeof n!="string"&&He("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function OH(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function FH(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function BH(){try{return new Function(""),!0}catch{return!1}}class Xt{static get isLittleEndian(){return he(this,"isLittleEndian",FH())}static get isEvalSupported(){return he(this,"isEvalSupported",BH())}static get isOffscreenCanvasSupported(){return he(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return he(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return he(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return he(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const kS=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var od,bv,mm,h_;class Q{static makeHexColor(e,t,s){return`#${kS[e]}${kS[t]}${kS[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[s+d],f=e[s+d+1];e[s+d]=h*r+f*o+c,e[s+d+1]=h*i+f*a+u}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],m=e[3];let y=r*d+c,g=y,S=r*f+c,v=S,x=a*h+u,A=x,E=a*m+u,T=E;if(i!==0||o!==0){const P=i*d,k=i*f,R=o*h,M=o*m;y+=R,v+=R,S+=M,g+=M,x+=P,T+=P,E+=k,A+=k}s[0]=Math.min(s[0],y,S,g,v),s[1]=Math.min(s[1],x,E,A,T),s[2]=Math.max(s[2],y,S,g,v),s[3]=Math.max(s[3],x,E,A,T)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,c=s*i+r*o,u=i**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,a,c,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c),C(this,mm,h_).call(this,e,s,i,a,t,r,o,c,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),u),C(this,mm,h_).call(this,e,s,i,a,t,r,o,c,3*(-t+3*(r-o)+c),6*(t-2*r+o),3*(r-t),u)}}od=new WeakSet,bv=function(e,t,s,r,i,o,a,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,m=f*u,y=h*(h*(h*e+3*u*t)+3*f*s)+m*r,g=h*(h*(h*i+3*u*o)+3*f*a)+m*c;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],g)},mm=new WeakSet,h_=function(e,t,s,r,i,o,a,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&C(this,od,bv).call(this,e,t,s,r,i,o,a,c,-h/d,f);return}const m=d**2-4*h*u;if(m<0)return;const y=Math.sqrt(m),g=2*u;C(this,od,bv).call(this,e,t,s,r,i,o,a,c,(-d+y)/g,f),C(this,od,bv).call(this,e,t,s,r,i,o,a,c,(-d-y)/g,f)},b(Q,od),b(Q,mm);function $H(n){return decodeURIComponent(escape(n))}let PS=null,O2=null;function TD(n){return PS||(PS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,O2=new Map([["","t"]])),n.replaceAll(PS,(e,t,s)=>t?t.normalize("NFKC"):O2.get(s))}function ST(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),CD(n)}const AT="pdfjs_internal_id_";function VH(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function vn(n,e,t){return Math.min(Math.max(n,e),t)}function kD(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(CD(n))}function zH(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):ry(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class lm{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(lm.shouldBuildText(a))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class _T{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var h,f;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",c=e.div;if(c.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);o.append(m),a&&lm.shouldBuildText(r.name)&&u.push(m)}return{textDivs:u}}const d=[[r,-1,o]];for(;d.length>0;){const[m,y,g]=d.at(-1);if(y+1===m.children.length){d.pop();continue}const S=m.children[++d.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const A=document.createTextNode(S.value);u.push(A),g.append(A);continue}const x=(h=S==null?void 0:S.attributes)!=null&&h.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(g.append(x),S.attributes&&this.setAttributes({html:x,element:S,storage:t,intent:i,linkService:s}),((f=S.children)==null?void 0:f.length)>0)d.push([S,-1,x]);else if(S.value){const A=document.createTextNode(S.value);a&&lm.shouldBuildText(v)&&u.push(A),x.append(A)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const pi="http://www.w3.org/2000/svg",ml=class ml{};U(ml,"CSS",96),U(ml,"PDF",72),U(ml,"PDF_TO_CSS_UNITS",ml.CSS/ml.PDF);let wo=ml;async function Ef(n,e="text"){if(ep(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class iy{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,m;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,f=0,m=1;break;case 90:d=0,h=1,f=1,m=0;break;case 270:d=0,h=-1,f=-1,m=0;break;case 0:d=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,m=-m);let y,g,S,v;d===0?(y=Math.abs(u-e[1])*s+i,g=Math.abs(c-e[0])*s+o,S=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(y=Math.abs(c-e[0])*s+i,g=Math.abs(u-e[1])*s+o,S=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[d*s,h*s,f*s,m*s,y-d*s*c-f*s*u,g-h*s*c-m*s*u],this.width=S,this.height=v}get rawDims(){const e=this.viewBox;return he(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new iy({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return Q.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];Q.applyTransform(t,this.transform);const s=[e[2],e[3]];return Q.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return Q.applyInverseTransform(s,this.transform),s}}class b1 extends pu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function oy(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function x1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function PD(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function RD(n,e="document.pdf"){if(typeof n!="string")return e;if(oy(n))return le('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const u of a)if(i.test(u))return r(u);const c=Array.from(s.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return r(u)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return r(c[0])}return e}class F2{constructor(){U(this,"started",Object.create(null));U(this,"times",[])}time(e){e in this.started&&le(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||le(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function ep(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Rs(n){n.preventDefault()}function ct(n){n.preventDefault(),n.stopPropagation()}function UH(n){console.log("Deprecated API usage: "+n)}var gm;class cm{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,gm)||w(this,gm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,gm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(s,r,i,o,a,c))}}gm=new WeakMap,b(cm,gm,void 0);function ND(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new iy({viewBox:i,userUnit:1,scale:e,rotation:t})}function Cf(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(le(`Not a valid color format: "${n}"`),[0,0,0])}function HH(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Cf(s))}e.remove()}function at(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function Nr(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function Ya(n,e,t=!1,s=!0){if(e instanceof iy){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=Xt.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${i}px`,d=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class kr{constructor(){const{pixelRatio:e}=kr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,a=1/0,c=1/0;s=kr.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(a=r/e,c=r/t);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const jb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class GH{static get isDarkMode(){var e;return he(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class MD{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),he(this,"commentForegroundColor",Cf(s))}}function jD(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function B2(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),o=Math.min(t,s,r),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const c=i-o;switch(e[1]=a<.5?c/(i+o):c/(2-i-o),i){case t:e[0]=((s-r)/c+(s<r?6:0))*60;break;case s:e[0]=((r-t)/c+2)*60;break;case r:e[0]=((t-s)/c+4)*60;break}}e[2]=a}function f_(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,o=i*(1-Math.abs(t/60%2-1)),a=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function $2(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function V2(n,e,t){f_(n,t),t.map($2);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];f_(e,t),t.map($2);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const z2=new Map;function LD(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=z2.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);B2(n,o);const a=r.subarray(6,9);B2(e,a);const c=a[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),V2(o,a,i)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const m=o[2]=(d+h)/2;c===V2(o,a,i)<u?d=m:h=m}o[2]=c?h:d}return f_(o,i),s=Q.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),z2.set(t,s),s}function ET({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,c=o.length;a<c;++a){const u=o[a];i.append(document.createTextNode(u)),a<c-1&&i.append(document.createElement("br"))}r.append(i)}else _T.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}var Lo,Do,Os,Fs,ym,Io,ad,ld,vm,Gb,DD,Wb,ID,qb,OD,Oo,Au,Al,tp;const bi=class bi{constructor(e){b(this,Wb);b(this,qb);b(this,Oo);b(this,Al);b(this,Lo,null);b(this,Do,null);b(this,Os,void 0);b(this,Fs,null);b(this,ym,null);b(this,Io,null);b(this,ad,null);b(this,ld,null);w(this,Os,e),l(bi,vm)||w(bi,vm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=w(this,Lo,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Os)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Rs,{signal:t}),e.addEventListener("pointerdown",C(bi,Gb,DD),{signal:t}));const s=w(this,Fs,document.createElement("div"));s.className="buttons",e.append(s);const r=l(this,Os).toolbarPosition;if(r){const{style:i}=e,o=l(this,Os)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,Lo)}hide(){var e;l(this,Lo).classList.add("hidden"),(e=l(this,Do))==null||e.hideDropdown()}show(){var e,t;l(this,Lo).classList.remove("hidden"),(e=l(this,ym))==null||e.shown(),(t=l(this,Io))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=l(this,Os),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",l(bi,vm)[e]),C(this,Oo,Au).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,Fs).append(s)}async addAltText(e){const t=await e.render();C(this,Oo,Au).call(this,t),l(this,Fs).append(t,l(this,Al,tp)),w(this,ym,e)}addComment(e,t=null){if(l(this,Io))return;const s=e.renderForToolbar();if(!s)return;C(this,Oo,Au).call(this,s);const r=w(this,ad,l(this,Al,tp));t?(l(this,Fs).insertBefore(s,t),l(this,Fs).insertBefore(r,t)):l(this,Fs).append(s,r),w(this,Io,e),e.toolbar=this}addColorPicker(e){if(l(this,Do))return;w(this,Do,e);const t=e.renderButton();C(this,Oo,Au).call(this,t),l(this,Fs).append(t,l(this,Al,tp))}async addEditSignatureButton(e){const t=w(this,ld,await e.renderEditButton(l(this,Os)));C(this,Oo,Au).call(this,t),l(this,Fs).append(t,l(this,Al,tp))}removeButton(e){var t,s;switch(e){case"comment":(t=l(this,Io))==null||t.removeToolbarCommentButton(),w(this,Io,null),(s=l(this,ad))==null||s.remove(),w(this,ad,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=l(this,Fs).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){l(this,ld)&&(l(this,ld).title=e)}remove(){var e;l(this,Lo).remove(),(e=l(this,Do))==null||e.destroy(),w(this,Do,null)}};Lo=new WeakMap,Do=new WeakMap,Os=new WeakMap,Fs=new WeakMap,ym=new WeakMap,Io=new WeakMap,ad=new WeakMap,ld=new WeakMap,vm=new WeakMap,Gb=new WeakSet,DD=function(e){e.stopPropagation()},Wb=new WeakSet,ID=function(e){l(this,Os)._focusEventsAllowed=!1,ct(e)},qb=new WeakSet,OD=function(e){l(this,Os)._focusEventsAllowed=!0,ct(e)},Oo=new WeakSet,Au=function(e){const t=l(this,Os)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",C(this,Wb,ID).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,qb,OD).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rs,{signal:t}),!0)},Al=new WeakSet,tp=function(){const e=document.createElement("div");return e.className="divider",e},b(bi,Gb),b(bi,vm,null);let p_=bi;var bm,_l,Si,Kb,FD,Xb,BD,xm,m_;class WH{constructor(e){b(this,Kb);b(this,Xb);b(this,xm);b(this,bm,null);b(this,_l,null);b(this,Si,void 0);w(this,Si,e)}show(e,t,s){const[r,i]=C(this,Xb,BD).call(this,t,s),{style:o}=l(this,_l)||w(this,_l,C(this,Kb,FD).call(this));e.append(l(this,_l)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,_l).remove()}}bm=new WeakMap,_l=new WeakMap,Si=new WeakMap,Kb=new WeakSet,FD=function(){const e=w(this,_l,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=l(this,Si)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Rs,{signal:t});const s=w(this,bm,document.createElement("div"));return s.className="buttons",e.append(s),l(this,Si).hasCommentManager()&&C(this,xm,m_).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Si).commentSelection("floating_button")}),C(this,xm,m_).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Si).highlightSelection("floating_button")}),e},Xb=new WeakSet,BD=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},xm=new WeakSet,m_=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const a=l(this,Si)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Rs,{signal:a}),i.addEventListener("click",r,{signal:a})),l(this,bm).append(i)};function $D(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var Yb;class qH{constructor(){b(this,Yb,0)}get id(){return`${om}${Rt(this,Yb)._++}`}}Yb=new WeakMap;var cd,wm,dn,ud,xv;const UT=class UT{constructor(){b(this,ud);b(this,cd,ST());b(this,wm,0);b(this,dn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return he(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return C(this,ud,xv).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return C(this,ud,xv).call(this,e,e)}async getFromBlob(e,t){const s=await t;return C(this,ud,xv).call(this,e,s)}async getFromId(e){l(this,dn)||w(this,dn,new Map);const t=l(this,dn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,dn)||w(this,dn,new Map);let s=l(this,dn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${l(this,cd)}_${Rt(this,wm)._++}`,refCounter:1,isSvg:!1},l(this,dn).set(e,s),l(this,dn).set(s.id,s),s}getSvgUrl(e){const t=l(this,dn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,dn)||w(this,dn,new Map);const t=l(this,dn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,cd)}_`)}};cd=new WeakMap,wm=new WeakMap,dn=new WeakMap,ud=new WeakSet,xv=async function(e,t){l(this,dn)||w(this,dn,new Map);let s=l(this,dn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,cd)}_${Rt(this,wm)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await Ef(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=UT._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,d)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const h=s.svgUrl=o.result;a.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(r),await c}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){le(r),s=null}return l(this,dn).set(e,s),s&&l(this,dn).set(s.id,s),s};let g_=UT;var wt,Fo,Sm,ot;class KH{constructor(e=128){b(this,wt,[]);b(this,Fo,!1);b(this,Sm,void 0);b(this,ot,-1);w(this,Sm,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),l(this,Fo))return;const c={cmd:e,undo:t,post:s,type:i};if(l(this,ot)===-1){l(this,wt).length>0&&(l(this,wt).length=0),w(this,ot,0),l(this,wt).push(c);return}if(o&&l(this,wt)[l(this,ot)].type===i){a&&(c.undo=l(this,wt)[l(this,ot)].undo),l(this,wt)[l(this,ot)]=c;return}const u=l(this,ot)+1;u===l(this,Sm)?l(this,wt).splice(0,1):(w(this,ot,u),u<l(this,wt).length&&l(this,wt).splice(u)),l(this,wt).push(c)}undo(){if(l(this,ot)===-1)return;w(this,Fo,!0);const{undo:e,post:t}=l(this,wt)[l(this,ot)];e(),t==null||t(),w(this,Fo,!1),w(this,ot,l(this,ot)-1)}redo(){if(l(this,ot)<l(this,wt).length-1){w(this,ot,l(this,ot)+1),w(this,Fo,!0);const{cmd:e,post:t}=l(this,wt)[l(this,ot)];e(),t==null||t(),w(this,Fo,!1)}}hasSomethingToUndo(){return l(this,ot)!==-1}hasSomethingToRedo(){return l(this,ot)<l(this,wt).length-1}cleanType(e){if(l(this,ot)!==-1){for(let t=l(this,ot);t>=0;t--)if(l(this,wt)[t].type!==e){l(this,wt).splice(t+1,l(this,ot)-t),w(this,ot,t);return}l(this,wt).length=0,w(this,ot,-1)}}destroy(){w(this,wt,null)}}wt=new WeakMap,Fo=new WeakMap,Sm=new WeakMap,ot=new WeakMap;var Qb,VD;class ay{constructor(e){b(this,Qb);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Xt.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(C(this,Qb,VD).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||ct(t))}}Qb=new WeakSet,VD=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Jb=class Jb{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return HH(e),he(this,"_colors",e)}convert(e){const t=Cf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return Jb._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Q.makeHexColor(...t):e}};U(Jb,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let y_=Jb;var dd,is,hd,mt,jt,fd,Bs,pd,$s,hn,Bo,$o,md,Vo,Ir,Vs,El,Am,_m,gd,Em,Or,zo,yd,Uo,Fr,Zb,Ho,vd,Cm,Go,Cl,bd,Wo,Tm,Ct,je,Ai,qo,Ko,km,xd,Pm,Xo,Br,_i,Rm,Nm,zs,wd,wv,Mm,v_,ex,zD,tx,UD,Tl,np,nx,HD,sx,GD,rx,WD,jm,b_,ix,qD,Lm,x_,Dm,w_,ox,KD,Qt,_n,lr,mi,ax,XD,lx,YD,Im,S_,cx,QD,kl,sp,Om,A_;const qu=class qu{constructor(e,t,s,r,i,o,a,c,u,d,h,f,m,y,g,S){b(this,wd);b(this,Mm);b(this,ex);b(this,tx);b(this,Tl);b(this,nx);b(this,sx);b(this,rx);b(this,jm);b(this,ix);b(this,Lm);b(this,Dm);b(this,ox);b(this,Qt);b(this,lr);b(this,ax);b(this,lx);b(this,Im);b(this,cx);b(this,kl);b(this,Om);b(this,dd,new AbortController);b(this,is,null);b(this,hd,null);b(this,mt,new Map);b(this,jt,new Map);b(this,fd,null);b(this,Bs,null);b(this,pd,null);b(this,$s,new KH);b(this,hn,null);b(this,Bo,null);b(this,$o,null);b(this,md,0);b(this,Vo,new Set);b(this,Ir,null);b(this,Vs,null);b(this,El,new Set);U(this,"_editorUndoBar",null);b(this,Am,!1);b(this,_m,!1);b(this,gd,!1);b(this,Em,null);b(this,Or,null);b(this,zo,null);b(this,yd,null);b(this,Uo,!1);b(this,Fr,null);b(this,Zb,new qH);b(this,Ho,!1);b(this,vd,!1);b(this,Cm,!1);b(this,Go,null);b(this,Cl,null);b(this,bd,null);b(this,Wo,null);b(this,Tm,null);b(this,Ct,ae.NONE);b(this,je,new Set);b(this,Ai,null);b(this,qo,null);b(this,Ko,null);b(this,km,null);b(this,xd,null);b(this,Pm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});b(this,Xo,[0,0]);b(this,Br,null);b(this,_i,null);b(this,Rm,null);b(this,Nm,null);b(this,zs,null);const v=this._signal=l(this,dd).signal;w(this,_i,e),w(this,Rm,t),w(this,Nm,s),w(this,fd,r),w(this,hn,i),w(this,qo,o),w(this,xd,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),window.addEventListener("pointerdown",()=>{w(this,vd,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{w(this,vd,!1)},{capture:!0,signal:v}),C(this,nx,HD).call(this),C(this,ox,KD).call(this),C(this,jm,b_).call(this),w(this,Bs,c.annotationStorage),w(this,Em,c.filterFactory),w(this,Ko,u),w(this,yd,d||null),w(this,Am,h),w(this,_m,f),w(this,gd,m),w(this,Tm,y||null),this.viewParameters={realScale:wo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=S!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=qu.prototype,t=o=>l(o,_i).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return he(this,"_keyboardManager",new ay([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,_i).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,_i).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,a,c,u;(e=l(this,zs))==null||e.resolve(),w(this,zs,null),(t=l(this,dd))==null||t.abort(),w(this,dd,null),this._signal=null;for(const d of l(this,jt).values())d.destroy();l(this,jt).clear(),l(this,mt).clear(),l(this,El).clear(),(s=l(this,Wo))==null||s.clear(),w(this,is,null),l(this,je).clear(),l(this,$s).destroy(),(r=l(this,fd))==null||r.destroy(),(i=l(this,hn))==null||i.destroy(),(o=l(this,qo))==null||o.destroy(),(a=l(this,Fr))==null||a.hide(),w(this,Fr,null),(c=l(this,bd))==null||c.destroy(),w(this,bd,null),w(this,hd,null),l(this,Or)&&(clearTimeout(l(this,Or)),w(this,Or,null)),l(this,Br)&&(clearTimeout(l(this,Br)),w(this,Br,null)),(u=this._editorUndoBar)==null||u.destroy(),w(this,xd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,Tm)}get useNewAltTextFlow(){return l(this,_m)}get useNewAltTextWhenAddingImage(){return l(this,gd)}get hcmFilter(){return he(this,"hcmFilter",l(this,Ko)?l(this,Em).addHCMFilter(l(this,Ko).foreground,l(this,Ko).background):"none")}get direction(){return he(this,"direction",getComputedStyle(l(this,_i)).direction)}get _highlightColors(){return he(this,"_highlightColors",l(this,yd)?new Map(l(this,yd).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return he(this,"highlightColors",null);const t=new Map,s=!!l(this,Ko);for(const[r,i]of e){const o=r.endsWith("_HCM");if(s&&o){t.set(r.replace("_HCM",""),i);continue}!s&&!o&&t.set(r,i)}return he(this,"highlightColors",t)}get highlightColorNames(){return he(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),w(this,$o,e)}setMainHighlightColorPicker(e){w(this,bd,e)}editAltText(e,t=!1){var s;(s=l(this,fd))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!l(this,hn)}editComment(e,t,s,r){var i;(i=l(this,hn))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=l(this,jt).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=l(this,hn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=l(this,hn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=l(this,hn))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=l(this,hn))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=l(this,hn))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=l(this,hn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(l(this,jt).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=l(this,qo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,qo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":w(this,gd,t);break}}onPageChanging({pageNumber:e}){w(this,md,e-1)}focusMainContainer(){l(this,_i).focus()}findParent(e,t){for(const s of l(this,jt).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){l(this,Rm).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,El).add(e)}removeShouldRescale(e){l(this,El).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*wo.PDF_TO_CSS_UNITS;for(const s of l(this,El))s.onScaleChanging();(t=l(this,$o))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=s,c=s.toString(),d=C(this,wd,wv).call(this,s).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;s.empty();const f=C(this,Mm,v_).call(this,d),m=l(this,Ct)===ae.NONE,y=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(m){this.switchToMode(ae.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,Bs))return null;const t=`${om}${e}`,s=l(this,Bs).getRawValue(t);return s&&l(this,Bs).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&l(this,Bs)&&!l(this,Bs).has(e.id)&&l(this,Bs).setValue(e.id,e)}a11yAlert(e,t=null){const s=l(this,Nm);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Uo)&&(w(this,Uo,!1),C(this,Tl,np).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,je))if(t.div.contains(e)){w(this,Cl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Cl))return;const[e,t]=l(this,Cl);w(this,Cl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,jm,b_).call(this),C(this,Lm,x_).call(this)}removeEditListeners(){C(this,ix,qD).call(this),C(this,Dm,w_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of l(this,Vs))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of l(this,Vs))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=l(this,is))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,je)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of l(this,Vs))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){le(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of s){const u=await r.deserialize(c);if(!u)return;i.push(u)}const o=()=>{for(const c of i)C(this,Im,S_).call(this,c);C(this,Om,A_).call(this,i)},a=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){le(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Ct)!==ae.NONE&&!this.isEditorHandlingKeyboard&&qu._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Uo)&&(w(this,Uo,!1),C(this,Tl,np).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(C(this,sx,GD).call(this),C(this,Lm,x_).call(this),C(this,Qt,_n).call(this,{isEditing:l(this,Ct)!==ae.NONE,isEmpty:C(this,kl,sp).call(this),hasSomethingToUndo:l(this,$s).hasSomethingToUndo(),hasSomethingToRedo:l(this,$s).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,rx,WD).call(this),C(this,Dm,w_).call(this),C(this,Qt,_n).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,Vs)){w(this,Vs,e);for(const t of l(this,Vs))C(this,lr,mi).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,Zb).id}get currentLayer(){return l(this,jt).get(l(this,md))}getLayer(e){return l(this,jt).get(e)}get currentPageIndex(){return l(this,md)}addLayer(e){l(this,jt).set(e.pageIndex,e),l(this,Ho)?e.enable():e.disable()}removeLayer(e){l(this,jt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var o,a,c,u,d,h;if(l(this,Ct)!==e&&!(l(this,zs)&&(await l(this,zs).promise,!l(this,zs)))){if(w(this,zs,Promise.withResolvers()),(o=l(this,$o))==null||o.commitOrRemove(),l(this,Ct)===ae.POPUP&&((a=l(this,hn))==null||a.hideSidebar()),(c=l(this,hn))==null||c.destroyPopup(),w(this,Ct,e),e===ae.NONE){this.setEditingState(!1),C(this,lx,YD).call(this);for(const f of l(this,mt).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),l(this,zs).resolve();return}for(const f of l(this,mt).values())f.addStandaloneCommentButton();e===ae.SIGNATURE&&await((d=l(this,qo))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await C(this,ax,XD).call(this),this.unselectAll();for(const f of l(this,jt).values())f.updateMode(e);if(e===ae.POPUP){l(this,hd)||w(this,hd,await l(this,xd).getAnnotationsByType(new Set(l(this,Vs).map(y=>y._editorType))));const f=new Set,m=[];for(const y of l(this,mt).values()){const{annotationElementId:g,hasComment:S,deleted:v}=y;g&&f.add(g),S&&!v&&m.push(y.getData())}for(const y of l(this,hd)){const{id:g,popupRef:S,contentsObj:v}=y;S&&(v!=null&&v.str)&&!f.has(g)&&!l(this,Vo).has(g)&&m.push(y)}(h=l(this,hn))==null||h.showSidebar(m)}if(!t){s&&this.addNewEditorFromKeyboard(),l(this,zs).resolve();return}for(const f of l(this,mt).values())f.uid===t?(this.setSelected(f),i?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();l(this,zs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Ct)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,Vs)){switch(e){case be.CREATE:this.currentLayer.addNewEditor(t);return;case be.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,km)||w(this,km,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of l(this,je))s.updateParams(e,t);else for(const s of l(this,Vs))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of l(this,mt).values())o.editorType===e&&o.show(t);(((i=l(this,km))==null?void 0:i.get(be.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,lr,mi).call(this,[[be.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Cm)!==e){w(this,Cm,e);for(const t of l(this,jt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of l(this,mt).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,mt).get(e)}addEditor(e){l(this,mt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(l(this,Or)&&clearTimeout(l(this,Or)),w(this,Or,setTimeout(()=>{this.focusMainContainer(),w(this,Or,null)},0))),l(this,mt).delete(e.id),e.annotationElementId&&((t=l(this,Wo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!l(this,Vo).has(e.annotationElementId))&&((s=l(this,Bs))==null||s.remove(e.id))}addDeletedAnnotationElement(e){l(this,Vo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,Vo).has(e)}removeDeletedAnnotationElement(e){l(this,Vo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,is)!==e&&(w(this,is,e),e&&C(this,lr,mi).call(this,e.propertiesToUpdate))}updateUI(e){l(this,cx,QD)===e&&C(this,lr,mi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,lr,mi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,je).has(e)){l(this,je).delete(e),e.unselect(),C(this,Qt,_n).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,je).add(e),e.select(),C(this,lr,mi).call(this,e.propertiesToUpdate),C(this,Qt,_n).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=l(this,$o))==null||t.commitOrRemove();for(const s of l(this,je))s!==e&&s.unselect();l(this,je).clear(),l(this,je).add(e),e.select(),C(this,lr,mi).call(this,e.propertiesToUpdate),C(this,Qt,_n).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,je).has(e)}get firstSelectedEditor(){return l(this,je).values().next().value}unselect(e){e.unselect(),l(this,je).delete(e),C(this,Qt,_n).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,je).size!==0}get isEnterHandled(){return l(this,je).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,$s).undo(),C(this,Qt,_n).call(this,{hasSomethingToUndo:l(this,$s).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,kl,sp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,$s).redo(),C(this,Qt,_n).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,$s).hasSomethingToRedo(),isEmpty:C(this,kl,sp).call(this)})}addCommands(e){l(this,$s).add(e),C(this,Qt,_n).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,kl,sp).call(this)})}cleanUndoStack(e){l(this,$s).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,je)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)C(this,Im,S_).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=l(this,is))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,is)||this.hasSelection}selectAll(){for(const e of l(this,je))e.commit();C(this,Om,A_).call(this,l(this,mt).values())}unselectAll(){var e;if(!(l(this,is)&&(l(this,is).commitOrRemove(),l(this,Ct)!==ae.NONE))&&!((e=l(this,$o))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,je))t.unselect();l(this,je).clear(),C(this,Qt,_n).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,Xo)[0]+=e,l(this,Xo)[1]+=t;const[r,i]=l(this,Xo),o=[...l(this,je)],a=1e3;l(this,Br)&&clearTimeout(l(this,Br)),w(this,Br,setTimeout(()=>{w(this,Br,null),l(this,Xo)[0]=l(this,Xo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,mt).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of o)l(this,mt).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),w(this,Ir,new Map);for(const e of l(this,je))l(this,Ir).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Ir))return!1;this.disableUserSelect(!1);const e=l(this,Ir);w(this,Ir,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(l(this,mt).has(r.id)){const c=l(this,jt).get(a);c?r._setParentAndPosition(c,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,Ir))for(const s of l(this,Ir).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,je).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,is)===e}getActive(){return l(this,is)}getMode(){return l(this,Ct)}isEditingMode(){return l(this,Ct)!==ae.NONE}get imageManager(){return he(this,"imageManager",new g_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-r)/o,y:1-(u+h-s)/i,width:f/o,height:h/i});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-s)/i,y:1-(d+f-r)/o,width:h/i,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-r)/o,y:(u-s)/i,width:f/o,height:h/i});break;default:a=(u,d,h,f)=>({x:(u-s)/i,y:(d-r)/o,width:h/i,height:f/o});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:m,width:y,height:g}of h.getClientRects())y===0||g===0||c.push(a(f,m,y,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,pd)||w(this,pd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,pd))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,pd))==null?void 0:r.get(e.data.id);if(!t)return;const s=l(this,Bs).getRawValue(t);s&&(l(this,Ct)===ae.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=l(this,Wo))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),l(this,Wo).delete(e))}addMissingCanvas(e,t){(l(this,Wo)||w(this,Wo,new Map)).set(e,t)}};dd=new WeakMap,is=new WeakMap,hd=new WeakMap,mt=new WeakMap,jt=new WeakMap,fd=new WeakMap,Bs=new WeakMap,pd=new WeakMap,$s=new WeakMap,hn=new WeakMap,Bo=new WeakMap,$o=new WeakMap,md=new WeakMap,Vo=new WeakMap,Ir=new WeakMap,Vs=new WeakMap,El=new WeakMap,Am=new WeakMap,_m=new WeakMap,gd=new WeakMap,Em=new WeakMap,Or=new WeakMap,zo=new WeakMap,yd=new WeakMap,Uo=new WeakMap,Fr=new WeakMap,Zb=new WeakMap,Ho=new WeakMap,vd=new WeakMap,Cm=new WeakMap,Go=new WeakMap,Cl=new WeakMap,bd=new WeakMap,Wo=new WeakMap,Tm=new WeakMap,Ct=new WeakMap,je=new WeakMap,Ai=new WeakMap,qo=new WeakMap,Ko=new WeakMap,km=new WeakMap,xd=new WeakMap,Pm=new WeakMap,Xo=new WeakMap,Br=new WeakMap,_i=new WeakMap,Rm=new WeakMap,Nm=new WeakMap,zs=new WeakMap,wd=new WeakSet,wv=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Mm=new WeakSet,v_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of l(this,jt).values())if(s.hasTextLayer(e))return s;return null},ex=new WeakSet,zD=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=C(this,wd,wv).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(l(this,Fr)||w(this,Fr,new WH(this)),l(this,Fr).show(s,r,this.direction==="ltr"))},tx=new WeakSet,UD=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Ai)&&((i=l(this,Fr))==null||i.hide(),w(this,Ai,null),C(this,Qt,_n).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Ai))return;const r=C(this,wd,wv).call(this,e).closest(".textLayer");if(!r){l(this,Ai)&&((o=l(this,Fr))==null||o.hide(),w(this,Ai,null),C(this,Qt,_n).call(this,{hasSelectedText:!1}));return}if((a=l(this,Fr))==null||a.hide(),w(this,Ai,t),C(this,Qt,_n).call(this,{hasSelectedText:!0}),!(l(this,Ct)!==ae.HIGHLIGHT&&l(this,Ct)!==ae.NONE)&&(l(this,Ct)===ae.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),w(this,Uo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Ct)===ae.HIGHLIGHT?C(this,Mm,v_).call(this,r):null;if(c==null||c.toggleDrawing(),l(this,vd)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&C(this,Tl,np).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),C(this,Tl,np).call(this,"main_toolbar")}},Tl=new WeakSet,np=function(e=""){l(this,Ct)===ae.HIGHLIGHT?this.highlightSelection(e):l(this,Am)&&C(this,ex,zD).call(this)},nx=new WeakSet,HD=function(){document.addEventListener("selectionchange",C(this,tx,UD).bind(this),{signal:this._signal})},sx=new WeakSet,GD=function(){if(l(this,zo))return;w(this,zo,new AbortController);const e=this.combinedSignal(l(this,zo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},rx=new WeakSet,WD=function(){var e;(e=l(this,zo))==null||e.abort(),w(this,zo,null)},jm=new WeakSet,b_=function(){if(l(this,Go))return;w(this,Go,new AbortController);const e=this.combinedSignal(l(this,Go));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},ix=new WeakSet,qD=function(){var e;(e=l(this,Go))==null||e.abort(),w(this,Go,null)},Lm=new WeakSet,x_=function(){if(l(this,Bo))return;w(this,Bo,new AbortController);const e=this.combinedSignal(l(this,Bo));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Dm=new WeakSet,w_=function(){var e;(e=l(this,Bo))==null||e.abort(),w(this,Bo,null)},ox=new WeakSet,KD=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Qt=new WeakSet,_n=function(e){Object.entries(e).some(([s,r])=>l(this,Pm)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Pm),e)}),l(this,Ct)===ae.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,lr,mi).call(this,[[be.HIGHLIGHT_FREE,!0]]))},lr=new WeakSet,mi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},ax=new WeakSet,XD=async function(){if(!l(this,Ho)){w(this,Ho,!0);const e=[];for(const t of l(this,jt).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,mt).values())t.enable()}},lx=new WeakSet,YD=function(){if(this.unselectAll(),l(this,Ho)){w(this,Ho,!1);for(const e of l(this,jt).values())e.disable();for(const e of l(this,mt).values())e.disable()}},Im=new WeakSet,S_=function(e){const t=l(this,jt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},cx=new WeakSet,QD=function(){let e=null;for(e of l(this,je));return e},kl=new WeakSet,sp=function(){if(l(this,mt).size===0)return!0;if(l(this,mt).size===1)for(const e of l(this,mt).values())return e.isEmpty();return!1},Om=new WeakSet,A_=function(e){for(const t of l(this,je))t.unselect();l(this,je).clear();for(const t of e)t.isEmpty()||(l(this,je).add(t),t.select());C(this,Qt,_n).call(this,{hasSelectedEditor:this.hasSelection})},U(qu,"TRANSLATE_SMALL",1),U(qu,"TRANSLATE_BIG",10);let Qa=qu;var Bt,$r,cr,Sd,Vr,os,Ad,zr,Vn,Ei,Pl,Ur,Yo,Rl,rp,_d,Sv;const En=class En{constructor(e){b(this,Rl);b(this,_d);b(this,Bt,null);b(this,$r,!1);b(this,cr,null);b(this,Sd,null);b(this,Vr,null);b(this,os,null);b(this,Ad,!1);b(this,zr,null);b(this,Vn,null);b(this,Ei,null);b(this,Pl,null);b(this,Ur,!1);w(this,Vn,e),w(this,Ur,e._uiManager.useNewAltTextFlow),l(En,Yo)||w(En,Yo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){En._l10n??(En._l10n=e)}async render(){const e=w(this,cr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=w(this,Sd,document.createElement("span"));e.append(t),l(this,Ur)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(En,Yo).missing),t.setAttribute("data-l10n-id",l(En,Yo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Vn)._uiManager._signal;e.addEventListener("contextmenu",Rs,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),l(this,Vn)._uiManager.editAltText(l(this,Vn)),l(this,Ur)&&l(this,Vn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Rl,rp)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(w(this,Ad,!0),r(i))},{signal:s}),await C(this,_d,Sv).call(this),e}finish(){l(this,cr)&&(l(this,cr).focus({focusVisible:l(this,Ad)}),w(this,Ad,!1))}isEmpty(){return l(this,Ur)?l(this,Bt)===null:!l(this,Bt)&&!l(this,$r)}hasData(){return l(this,Ur)?l(this,Bt)!==null||!!l(this,Ei):this.isEmpty()}get guessedText(){return l(this,Ei)}async setGuessedText(e){l(this,Bt)===null&&(w(this,Ei,e),w(this,Pl,await En._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,_d,Sv).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Ur)||l(this,Bt)){(t=l(this,zr))==null||t.remove(),w(this,zr,null);return}if(!l(this,zr)){const s=w(this,zr,document.createElement("div"));s.className="noAltTextBadge",l(this,Vn).div.append(s)}l(this,zr).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Bt);return!e&&l(this,Ei)===t&&(t=l(this,Pl)),{altText:t,decorative:l(this,$r),guessedText:l(this,Ei),textWithDisclaimer:l(this,Pl)}}get data(){return{altText:l(this,Bt),decorative:l(this,$r)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(w(this,Ei,s),w(this,Pl,r)),!(l(this,Bt)===e&&l(this,$r)===t)&&(i||(w(this,Bt,e),w(this,$r,t)),C(this,_d,Sv).call(this))}toggle(e=!1){l(this,cr)&&(!e&&l(this,os)&&(clearTimeout(l(this,os)),w(this,os,null)),l(this,cr).disabled=!e)}shown(){l(this,Vn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Rl,rp)}})}destroy(){var e,t;(e=l(this,cr))==null||e.remove(),w(this,cr,null),w(this,Sd,null),w(this,Vr,null),(t=l(this,zr))==null||t.remove(),w(this,zr,null)}};Bt=new WeakMap,$r=new WeakMap,cr=new WeakMap,Sd=new WeakMap,Vr=new WeakMap,os=new WeakMap,Ad=new WeakMap,zr=new WeakMap,Vn=new WeakMap,Ei=new WeakMap,Pl=new WeakMap,Ur=new WeakMap,Yo=new WeakMap,Rl=new WeakSet,rp=function(){return l(this,Bt)&&"added"||l(this,Bt)===null&&this.guessedText&&"review"||"missing"},_d=new WeakSet,Sv=async function(){var r,i,o;const e=l(this,cr);if(!e)return;if(l(this,Ur)){if(e.classList.toggle("done",!!l(this,Bt)),e.setAttribute("data-l10n-id",l(En,Yo)[l(this,Rl,rp)]),(r=l(this,Sd))==null||r.setAttribute("data-l10n-id",l(En,Yo)[`${l(this,Rl,rp)}-label`]),!l(this,Bt)){(i=l(this,Vr))==null||i.remove();return}}else{if(!l(this,Bt)&&!l(this,$r)){e.classList.remove("done"),(o=l(this,Vr))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,Vr);if(!t){w(this,Vr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Vn).id}`;const a=100,c=l(this,Vn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,os)),w(this,os,null)},{once:!0}),e.addEventListener("mouseenter",()=>{w(this,os,setTimeout(()=>{w(this,os,null),l(this,Vr).classList.add("show"),l(this,Vn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,os)&&(clearTimeout(l(this,os)),w(this,os,null)),(u=l(this,Vr))==null||u.classList.remove("show")},{signal:c})}l(this,$r)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Bt)),t.parentNode||e.append(t);const s=l(this,Vn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},b(En,Yo,null),U(En,"_l10n",null);let Lb=En;var Jt,Us,Nl,Ke,Fm,Ml,ur,jl,Ll,Dl,Bm,__;class Wy{constructor(e){b(this,Bm);b(this,Jt,null);b(this,Us,null);b(this,Nl,!1);b(this,Ke,null);b(this,Fm,null);b(this,Ml,null);b(this,ur,null);b(this,jl,null);b(this,Ll,!1);b(this,Dl,null);w(this,Ke,e)}renderForToolbar(){const e=w(this,Us,document.createElement("button"));return e.className="comment",C(this,Bm,__).call(this,e,!1)}renderForStandalone(){const e=w(this,Jt,document.createElement("button"));e.className="annotationCommentButton";const t=l(this,Ke).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(l(this,Ke)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=l(this,Ke).commentButtonColor;r&&(s.backgroundColor=r)}return C(this,Bm,__).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=l(this,Jt)??l(this,Us))==null||e.focus()},0)}onUpdatedColor(){if(!l(this,Jt))return;const e=l(this,Ke).commentButtonColor;e&&(l(this,Jt).style.backgroundColor=e),l(this,Ke)._uiManager.updatePopupColor(l(this,Ke))}get commentButtonWidth(){var e;return(((e=l(this,Jt))==null?void 0:e.getBoundingClientRect().width)??0)/l(this,Ke).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Dl))return l(this,Dl);if(!l(this,Jt))return null;const{x:e,y:t,height:s}=l(this,Jt).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=l(this,Ke).parent.boundingClientRect;return[(e-r)/o,(t+s-i)/a]}set commentPopupPositionInLayer(e){w(this,Dl,e)}hasDefaultPopupPosition(){return l(this,Dl)===null}removeStandaloneCommentButton(){var e;(e=l(this,Jt))==null||e.remove(),w(this,Jt,null)}removeToolbarCommentButton(){var e;(e=l(this,Us))==null||e.remove(),w(this,Us,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Jt)&&(l(this,Jt).classList.toggle("selected",e),l(this,Jt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=l(this,Ke).commentButtonPosition;const{width:d,height:h,x:f,y:m}=l(this,Ke);s=f+s*d,r=m+r*h}const i=l(this,Ke).parent.boundingClientRect,{x:o,y:a,width:c,height:u}=i;l(this,Ke)._uiManager.editComment(l(this,Ke),o+s*c,a+r*u,{...e,parentDimensions:i})}finish(){l(this,Us)&&(l(this,Us).focus({focusVisible:l(this,Nl)}),w(this,Nl,!1))}isDeleted(){return l(this,Ll)||l(this,ur)===""}isEmpty(){return l(this,ur)===null}hasBeenEdited(){return this.isDeleted()||l(this,ur)!==l(this,Fm)}serialize(){return this.data}get data(){return{text:l(this,ur),richText:l(this,Ml),date:l(this,jl),deleted:this.isDeleted()}}set data(e){if(e!==l(this,ur)&&w(this,Ml,null),e===null){w(this,ur,""),w(this,Ll,!0);return}w(this,ur,e),w(this,jl,new Date),w(this,Ll,!1)}setInitialText(e,t=null){w(this,Fm,e),this.data=e,w(this,jl,null),w(this,Ml,t)}shown(){}destroy(){var e,t;(e=l(this,Us))==null||e.remove(),w(this,Us,null),(t=l(this,Jt))==null||t.remove(),w(this,Jt,null),w(this,ur,""),w(this,Ml,null),w(this,jl,null),w(this,Ke,null),w(this,Nl,!1),w(this,Ll,!1)}}Jt=new WeakMap,Us=new WeakMap,Nl=new WeakMap,Ke=new WeakMap,Fm=new WeakMap,Ml=new WeakMap,ur=new WeakMap,jl=new WeakMap,Ll=new WeakMap,Dl=new WeakMap,Bm=new WeakSet,__=function(e,t){if(!l(this,Ke)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,Ke)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=l(this,Ke)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Rs,{signal:s}),t&&(e.addEventListener("focusin",i=>{l(this,Ke)._focusEventsAllowed=!1,ct(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{l(this,Ke)._focusEventsAllowed=!0,ct(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===l(this,Us)?this.edit():l(this,Ke).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(w(this,Nl,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{l(this,Ke).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{l(this,Ke).toggleComment(!1,!1)},{signal:s}),e};var Ed,Il,$m,Vm,zm,Um,Hm,Ci,Ol,Ti,Fl,ki,ux,JD,dx,ZD,hx,eI;const HT=class HT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){b(this,ux);b(this,dx);b(this,hx);b(this,Ed,void 0);b(this,Il,!1);b(this,$m,null);b(this,Vm,void 0);b(this,zm,void 0);b(this,Um,void 0);b(this,Hm,void 0);b(this,Ci,null);b(this,Ol,void 0);b(this,Ti,null);b(this,Fl,void 0);b(this,ki,null);w(this,Ed,e),w(this,$m,s),w(this,Vm,t),w(this,zm,r),w(this,Um,i),w(this,Hm,o),w(this,Fl,new AbortController),w(this,Ol,AbortSignal.any([a,l(this,Fl).signal])),e.addEventListener("touchstart",C(this,ux,JD).bind(this),{passive:!1,signal:l(this,Ol)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/kr.pixelRatio}destroy(){var e,t;(e=l(this,Fl))==null||e.abort(),w(this,Fl,null),(t=l(this,Ci))==null||t.abort(),w(this,Ci,null)}};Ed=new WeakMap,Il=new WeakMap,$m=new WeakMap,Vm=new WeakMap,zm=new WeakMap,Um=new WeakMap,Hm=new WeakMap,Ci=new WeakMap,Ol=new WeakMap,Ti=new WeakMap,Fl=new WeakMap,ki=new WeakMap,ux=new WeakSet,JD=function(e){var r,i,o;if((r=l(this,Vm))!=null&&r.call(this))return;if(e.touches.length===1){if(l(this,Ci))return;const a=w(this,Ci,new AbortController),c=AbortSignal.any([l(this,Ol),a.signal]),u=l(this,Ed),d={capture:!0,signal:c,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=l(this,Ci))==null||m.abort(),w(this,Ci,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ct(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!l(this,ki)){w(this,ki,new AbortController);const a=AbortSignal.any([l(this,Ol),l(this,ki).signal]),c=l(this,Ed),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",C(this,dx,ZD).bind(this),u);const d=C(this,hx,eI).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",ct,u),c.addEventListener("pointermove",ct,u),c.addEventListener("pointercancel",ct,u),c.addEventListener("pointerup",ct,u),(i=l(this,zm))==null||i.call(this)}if(ct(e),e.touches.length!==2||(o=l(this,$m))!=null&&o.call(this)){w(this,Ti,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),w(this,Ti,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},dx=new WeakSet,ZD=function(e){var E;if(!l(this,Ti)||e.touches.length!==2)return;ct(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:a}=s,c=l(this,Ti),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,m=h-u,y=f-d,g=o-r,S=a-i,v=Math.hypot(g,S)||1,x=Math.hypot(m,y)||1;if(!l(this,Il)&&Math.abs(x-v)<=HT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=o,c.touch1Y=a,!l(this,Il)){w(this,Il,!0);return}const A=[(r+o)/2,(i+a)/2];(E=l(this,Um))==null||E.call(this,A,x,v)},hx=new WeakSet,eI=function(e){var t;e.touches.length>=2||(l(this,ki)&&(l(this,ki).abort(),w(this,ki,null),(t=l(this,Hm))==null||t.call(this)),l(this,Ti)&&(ct(e),w(this,Ti,null),w(this,Il,!1)))};let um=HT;var Bl,dr,nt,$e,Pi,Cd,Qo,Gm,Zt,$l,Ri,Hr,Jo,Wm,Vl,as,qm,zl,Ni,Gr,Td,kd,Hs,Ul,Km,fx,Xm,E_,Ym,C_,Pd,Av,px,tI,mx,nI,Qm,T_,Rd,_v,Jm,k_,gx,sI,yx,rI,vx,iI,Zm,P_,bx,oI,eg,R_,xx,aI,wx,lI,Sx,cI,tg,N_,Hl,ip;const ce=class ce{constructor(e){b(this,Xm);b(this,Pd);b(this,px);b(this,mx);b(this,Qm);b(this,Rd);b(this,Jm);b(this,gx);b(this,yx);b(this,vx);b(this,Zm);b(this,bx);b(this,eg);b(this,xx);b(this,wx);b(this,Sx);b(this,tg);b(this,Hl);b(this,Bl,null);b(this,dr,null);b(this,nt,null);b(this,$e,null);b(this,Pi,null);b(this,Cd,!1);b(this,Qo,null);b(this,Gm,"");b(this,Zt,null);b(this,$l,null);b(this,Ri,null);b(this,Hr,null);b(this,Jo,null);b(this,Wm,"");b(this,Vl,!1);b(this,as,null);b(this,qm,!1);b(this,zl,!1);b(this,Ni,!1);b(this,Gr,null);b(this,Td,0);b(this,kd,0);b(this,Hs,null);b(this,Ul,null);U(this,"isSelected",!1);U(this,"_isCopy",!1);U(this,"_editToolbar",null);U(this,"_initialOptions",Object.create(null));U(this,"_initialData",null);U(this,"_isVisible",!0);U(this,"_uiManager",null);U(this,"_focusEventsAllowed",!0);b(this,Km,!1);b(this,fx,ce._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=ce.prototype._resizeWithKeyboard,t=Qa.TRANSLATE_SMALL,s=Qa.TRANSLATE_BIG;return he(this,"_resizerKeyboardManager",new ay([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],ce.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return he(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new XH({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ce._l10n??(ce._l10n=e),ce._l10nResizer||(ce._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),ce._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);ce._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){He("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Km)}set _isDraggable(e){var t;w(this,Km,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,fx)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(C(this,Hl,ip).call(this),(t=l(this,Hr))==null||t.remove(),w(this,Hr,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Vl)?w(this,Vl,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){C(this,Xm,E_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,as)||w(this,as,[this.x,this.y,this.width,this.height]),C(this,Xm,E_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,as)||w(this,as,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:d}=s;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,as)&&(l(this,as)[0]!==this.x||l(this,as)[1]!==this.y)}get _hasBeenResized(){return!!l(this,as)&&(l(this,as)[2]!==this.width||l(this,as)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=ce,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:c}=this;if(a*=s,c*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=vn(i,0,s-a),o=vn(o,0,r-c);break;case 90:i=vn(i,0,s-c),o=vn(o,a,r);break;case 180:i=vn(i,a,s),o=vn(o,c,r);break;case 270:i=vn(i,c,s),o=vn(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[u,d]=this.getBaseTranslation();i+=u,o+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return C(s=ce,Ym,C_).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return C(s=ce,Ym,C_).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,nt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,zl))return this._editToolbar;this._editToolbar=new p_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=l(this,nt))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,nt)||(Lb.initialize(ce._l10n),w(this,nt,new Lb(this)),l(this,Bl)&&(l(this,nt).data=l(this,Bl),w(this,Bl,null))),l(this,nt)}get altTextData(){var e;return(e=l(this,nt))==null?void 0:e.data}set altTextData(e){l(this,nt)&&(l(this,nt).data=e)}get guessedAltText(){var e;return(e=l(this,nt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,nt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,nt))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,nt)&&!l(this,nt).isEmpty()}hasAltTextData(){var e;return((e=l(this,nt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=l(this,$e))==null||e.focusButton()}addCommentButton(){return l(this,$e)||w(this,$e,new Wy(this))}addStandaloneCommentButton(){if(l(this,Pi)){this._uiManager.isEditingMode()&&l(this,Pi).classList.remove("hidden");return}this.hasComment&&(w(this,Pi,l(this,$e).renderForStandalone()),this.div.append(l(this,Pi)))}removeStandaloneCommentButton(){l(this,$e).removeStandaloneCommentButton(),w(this,Pi,null)}hideStandaloneCommentButton(){var e;(e=l(this,Pi))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=l(this,$e);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,$e)||w(this,$e,new Wy(this)),l(this,$e).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(l(this,$e)||w(this,$e,new Wy(this)),l(this,$e).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=l(this,$e))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=l(this,$e))==null?void 0:e.isDeleted()}get hasComment(){return!!l(this,$e)&&!l(this,$e).isEmpty()&&!l(this,$e).isDeleted()}async editComment(e){l(this,$e)||w(this,$e,new Wy(this)),l(this,$e).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,$e).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,c=r-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,$e).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,Cd)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),C(this,eg,R_).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),$D(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Ul)||w(this,Ul,new um({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,gx,sI).bind(this),onPinching:C(this,yx,rI).bind(this),onPinchEnd:C(this,vx,iI).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Xt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(w(this,Vl,!0),this._isDraggable){C(this,bx,oI).call(this,e);return}C(this,Zm,P_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Gr)&&clearTimeout(l(this,Gr)),w(this,Gr,setTimeout(()=>{var e;w(this,Gr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/r,d=t/r,h=this.x*i,f=this.y*o,m=this.width*i,y=this.height*o;switch(s){case 0:return[h+u+a,o-f-d-y+c,h+u+m+a,o-f-d+c];case 90:return[h+d+a,o-f+u+c,h+d+y+a,o-f+u+m+c];case 180:return[h-u-m+a,o-f+d+c,h-u+a,o-f+d+y+c];case 270:return[h-d-y+a,o-f-u-m+c,h-d+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,c=o-r;switch(this.rotation){case 0:return[s,t-o,a,c];case 90:return[s,t-r,c,a];case 180:return[i,t-r,a,c];case 270:return[i,t-o,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=l(this,$e))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:o},uid:a,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||d,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),w(this,zl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),w(this,zl,!1),!0):!1}isInEditMode(){return l(this,zl)}shouldGetKeyboardEvents(){return l(this,Ni)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){C(this,eg,R_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,w(r,Bl,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,c,u,d]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=c/o,r.width=u/i,r.height=d/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,Jo))==null||e.abort(),w(this,Jo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Gr)&&(clearTimeout(l(this,Gr)),w(this,Gr,null)),C(this,Hl,ip).call(this),this.removeEditToolbar(),l(this,Hs)){for(const s of l(this,Hs).values())clearTimeout(s);w(this,Hs,null)}this.parent=null,(t=l(this,Ul))==null||t.destroy(),w(this,Ul,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,px,tI).call(this),l(this,Zt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,o]=this.getPDFRect();return[ce._round(s+(i-s)*e),ce._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,$e).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,$e).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,$e).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,$e).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){l(this,$e).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),w(this,Ri,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,Zt).children;if(!l(this,dr)){w(this,dr,Array.from(t));const o=C(this,xx,aI).bind(this),a=C(this,wx,lI).bind(this),c=this._uiManager._signal;for(const u of l(this,dr)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",C(this,Sx,cI).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",ce._l10nResizer[d])}}const s=l(this,dr)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,dr).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)l(this,Zt).append(l(this,Zt).firstChild);else if(i>r)for(let a=0;a<i-r;a++)l(this,Zt).firstChild.before(l(this,Zt).lastChild);let o=0;for(const a of t){const u=l(this,dr)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",ce._l10nResizer[u])}}C(this,tg,N_).call(this,0),w(this,Ni,!0),l(this,Zt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Ni)&&C(this,Jm,k_).call(this,l(this,Wm),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,Hl,ip).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=l(this,nt))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=l(this,Zt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=l(this,nt))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,qm)}set isEditing(e){w(this,qm,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Hs)||w(this,Hs,new Map);const{action:s}=e;let r=l(this,Hs).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,Hs).delete(s),l(this,Hs).size===0&&w(this,Hs,null)},ce._telemetryTimeout),l(this,Hs).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),w(this,Cd,!1)}disable(){this.div&&(this.div.tabIndex=-1),w(this,Cd,!0)}updateFakeAnnotationElement(e){if(!l(this,Hr)&&!this.deleted){w(this,Hr,e.addFakeAnnotation(this));return}if(this.deleted){l(this,Hr).remove(),w(this,Hr,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,Hr).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Bl=new WeakMap,dr=new WeakMap,nt=new WeakMap,$e=new WeakMap,Pi=new WeakMap,Cd=new WeakMap,Qo=new WeakMap,Gm=new WeakMap,Zt=new WeakMap,$l=new WeakMap,Ri=new WeakMap,Hr=new WeakMap,Jo=new WeakMap,Wm=new WeakMap,Vl=new WeakMap,as=new WeakMap,qm=new WeakMap,zl=new WeakMap,Ni=new WeakMap,Gr=new WeakMap,Td=new WeakMap,kd=new WeakMap,Hs=new WeakMap,Ul=new WeakMap,Km=new WeakMap,fx=new WeakMap,Xm=new WeakSet,E_=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ym=new WeakSet,C_=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Pd=new WeakSet,Av=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},px=new WeakSet,tI=function(){if(l(this,Zt))return;w(this,Zt,document.createElement("div")),l(this,Zt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");l(this,Zt).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",C(this,mx,nI).bind(this,s),{signal:t}),r.addEventListener("contextmenu",Rs,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,Zt))},mx=new WeakSet,nI=function(e,t){var d;t.preventDefault();const{isMac:s}=Xt.platform;if(t.button!==0||t.ctrlKey&&s)return;(d=l(this,nt))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,w(this,$l,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,Jm,k_).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ct,{passive:!1,signal:o}),window.addEventListener("contextmenu",Rs,{signal:o}),w(this,Ri,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=l(this,nt))==null||h.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=c,C(this,Rd,_v).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},Qm=new WeakSet,T_=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Rd=new WeakSet,_v=function(){if(!l(this,Ri))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=l(this,Ri);w(this,Ri,null);const i=this.x,o=this.y,a=this.width,c=this.height;i===e&&o===t&&a===s&&c===r||this.addCommands({cmd:C(this,Qm,T_).bind(this,i,o,a,c),undo:C(this,Qm,T_).bind(this,e,t,s,r),mustExec:!0})},Jm=new WeakSet,k_=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,c=this.height,u=ce.MIN_SIZE/s,d=ce.MIN_SIZE/r,h=C(this,Pd,Av).call(this,this.rotation),f=(j,O)=>[h[0]*j+h[2]*O,h[1]*j+h[3]*O],m=C(this,Pd,Av).call(this,360-this.rotation),y=(j,O)=>[m[0]*j+m[2]*O,m[1]*j+m[3]*O];let g,S,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(j,O)=>[0,0],S=(j,O)=>[j,O];break;case"topMiddle":g=(j,O)=>[j/2,0],S=(j,O)=>[j/2,O];break;case"topRight":v=!0,g=(j,O)=>[j,0],S=(j,O)=>[0,O];break;case"middleRight":x=!0,g=(j,O)=>[j,O/2],S=(j,O)=>[0,O/2];break;case"bottomRight":v=!0,g=(j,O)=>[j,O],S=(j,O)=>[0,0];break;case"bottomMiddle":g=(j,O)=>[j/2,O],S=(j,O)=>[j/2,0];break;case"bottomLeft":v=!0,g=(j,O)=>[0,O],S=(j,O)=>[j,0];break;case"middleLeft":x=!0,g=(j,O)=>[0,O/2],S=(j,O)=>[j,O/2];break}const A=g(a,c),E=S(a,c);let T=f(...E);const P=ce._round(i+T[0]),k=ce._round(o+T[1]);let R=1,M=1,L,B;if(t.fromKeyboard)({deltaX:L,deltaY:B}=t);else{const{screenX:j,screenY:O}=t,[F,$]=l(this,$l);[L,B]=this.screenToPageTranslation(j-F,O-$),l(this,$l)[0]=j,l(this,$l)[1]=O}if([L,B]=y(L/s,B/r),v){const j=Math.hypot(a,c);R=M=Math.max(Math.min(Math.hypot(E[0]-A[0]-L,E[1]-A[1]-B)/j,1/a,1/c),u/a,d/c)}else x?R=vn(Math.abs(E[0]-A[0]-L),u,1)/a:M=vn(Math.abs(E[1]-A[1]-B),d,1)/c;const D=ce._round(a*R),z=ce._round(c*M);T=f(...S(D,z));const I=P-T[0],N=k-T[1];l(this,as)||w(this,as,[this.x,this.y,this.width,this.height]),this.width=D,this.height=z,this.x=I,this.y=N,this.setDims(),this.fixAndSetPosition(),this._onResizing()},gx=new WeakSet,sI=function(){var e;w(this,Ri,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,nt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},yx=new WeakSet,rI=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=C(this,Pd,Av).call(this,this.rotation),a=(P,k)=>[o[0]*P+o[2]*k,o[1]*P+o[3]*k],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,m=this.height,y=ce.MIN_SIZE/c,g=ce.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/m),y/f,g/m);const S=ce._round(f*i),v=ce._round(m*i);if(S===f&&v===m)return;l(this,as)||w(this,as,[d,h,f,m]);const x=a(f/2,m/2),A=ce._round(d+x[0]),E=ce._round(h+x[1]),T=a(S/2,v/2);this.x=A-T[0],this.y=E-T[1],this.width=S,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},vx=new WeakSet,iI=function(){var e;(e=l(this,nt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,Rd,_v).call(this)},Zm=new WeakSet,P_=function(e){const{isMac:t}=Xt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},bx=new WeakSet,oI=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=u=>{r.abort(),w(this,Qo,null),w(this,Vl,!1),this._uiManager.endDragSession()||C(this,Zm,P_).call(this,u),s&&this._onStopDragging()};t&&(w(this,Td,e.clientX),w(this,kd,e.clientY),w(this,Qo,e.pointerId),w(this,Gm,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==l(this,Qo)){ct(u);return}const[m,y]=this.screenToPageTranslation(d-l(this,Td),h-l(this,kd));w(this,Td,d),w(this,kd,h),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",ct,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,Gm)&&(l(this,Ul)||u.isPrimary)&&a(u),ct(u)},o));const c=u=>{if(!l(this,Qo)||l(this,Qo)===u.pointerId){a(u);return}ct(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},eg=new WeakSet,R_=function(){if(l(this,Jo)||!this.div)return;w(this,Jo,new AbortController);const e=this._uiManager.combinedSignal(l(this,Jo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},xx=new WeakSet,aI=function(e){ce._resizerKeyboardManager.exec(this,e)},wx=new WeakSet,lI=function(e){var t;l(this,Ni)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,Zt)&&C(this,Hl,ip).call(this)},Sx=new WeakSet,cI=function(e){w(this,Wm,l(this,Ni)?e:"")},tg=new WeakSet,N_=function(e){if(l(this,dr))for(const t of l(this,dr))t.tabIndex=e},Hl=new WeakSet,ip=function(){w(this,Ni,!1),C(this,tg,N_).call(this,-1),C(this,Rd,_v).call(this)},b(ce,Ym),U(ce,"_l10n",null),U(ce,"_l10nResizer",null),U(ce,"_borderLineWidth",-1),U(ce,"_colorManager",new y_),U(ce,"_zIndex",1),U(ce,"_telemetryTimeout",1e3);let Ye=ce;class XH extends Ye{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const U2=3285377520,Ls=4294901760,Mr=65535;class uI{constructor(e){this.h1=e?e&4294967295:U2,this.h2=e?e&4294967295:U2}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,S=e.length;g<S;g++){const v=e.charCodeAt(g);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,m=h&Mr,y=f&Mr;for(let g=0;g<r;g++)g&1?(a=o[g],a=a*h&Ls|a*m&Mr,a=a<<15|a>>>17,a=a*f&Ls|a*y&Mr,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[g],c=c*h&Ls|c*m&Mr,c=c<<15|c>>>17,c=c*f&Ls|c*y&Mr,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*h&Ls|a*m&Mr,a=a<<15|a>>>17,a=a*f&Ls|a*y&Mr,r&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ls|e*36045&Mr,t=t*4283543511&Ls|((t<<16|e>>>16)*2950163797&Ls)>>>16,e^=t>>>1,e=e*444984403&Ls|e*60499&Mr,t=t*3301882366&Ls|((t<<16|e>>>16)*3120437893&Ls)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const M_=Object.freeze({map:null,hash:"",transfer:void 0});var Gl,Wl,Mi,en,Ax,dI;class CT{constructor(){b(this,Ax);b(this,Gl,!1);b(this,Wl,null);b(this,Mi,null);b(this,en,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=l(this,en).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return l(this,en).get(e)}remove(e){const t=l(this,en).get(e);if(t!==void 0&&(t instanceof Ye&&l(this,Mi).delete(t.annotationElementId),l(this,en).delete(e),l(this,en).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of l(this,en).values())if(s instanceof Ye)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=l(this,en).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,l(this,en).set(e,t);r&&C(this,Ax,dI).call(this),t instanceof Ye&&((l(this,Mi)||w(this,Mi,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,en).has(e)}get size(){return l(this,en).size}resetModified(){l(this,Gl)&&(w(this,Gl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new hI(this)}get serializable(){if(l(this,en).size===0)return M_;const e=new Map,t=new uI,s=[],r=Object.create(null);let i=!1;for(const[o,a]of l(this,en)){const c=a instanceof Ye?a.serialize(!1,r):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:M_}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of l(this,en).values()){if(!(i instanceof Ye)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){w(this,Wl,null)}updateEditor(e,t){var r;const s=(r=l(this,Mi))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=l(this,Mi))==null?void 0:t.get(e))||null}get modifiedIds(){if(l(this,Wl))return l(this,Wl);const e=[];if(l(this,Mi))for(const t of l(this,Mi).values())t.serialize()&&e.push(t.annotationElementId);return w(this,Wl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,en).entries()}}Gl=new WeakMap,Wl=new WeakMap,Mi=new WeakMap,en=new WeakMap,Ax=new WeakSet,dI=function(){l(this,Gl)||(w(this,Gl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var ng;class hI extends CT{constructor(t){super();b(this,ng,void 0);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);w(this,ng,{map:o,hash:r,transfer:i})}get print(){He("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,ng)}get modifiedIds(){return he(this,"modifiedIds",{ids:new Set,hash:""})}}ng=new WeakMap;var Nd;class YH{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){b(this,Nd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Nd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||l(this,Nd).has(e.loadedName))){if(Se(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),l(this,Nd).add(r),s==null||s(e)}catch{le(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}He("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw le(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return he(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return he(this,"isSyncFontLoadingSupported",Rn||Xt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Se(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return he(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function r(E,T,P,k){const R=E.substring(0,T),M=E.substring(T+P);return R+k+M}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function d(E,T){if(++u>30){le("Load test font never loaded."),T();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,E,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,h.length,h);const y=16,g=1482184792;let S=s(f,y);for(i=0,o=h.length-3;i<o;i+=4)S=S-g+s(h,i)|0;i<h.length&&(S=S-g+s(h+"XXX",i)|0),f=r(f,y,4,OH(S));const v=`url(data:font/opentype;base64,${btoa(f)});`,x=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(x);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const E of[e.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,A.append(T)}this._document.body.append(A),d(h,()=>{A.remove(),t.complete()})}}Nd=new WeakMap;var Ie;class QH{constructor(e,t=null,s,r){b(this,Ie,void 0);this.compiledGlyphs=Object.create(null),w(this,Ie,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${kD(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){le(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return l(this,Ie).black}get bold(){return l(this,Ie).bold}get disableFontFace(){return l(this,Ie).disableFontFace??!1}get fontExtraProperties(){return l(this,Ie).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,Ie).isInvalidPDFjsFont}get isType3Font(){return l(this,Ie).isType3Font}get italic(){return l(this,Ie).italic}get missingFile(){return l(this,Ie).missingFile}get remeasure(){return l(this,Ie).remeasure}get vertical(){return l(this,Ie).vertical}get ascent(){return l(this,Ie).ascent}get defaultWidth(){return l(this,Ie).defaultWidth}get descent(){return l(this,Ie).descent}get bbox(){return l(this,Ie).bbox}get fontMatrix(){return l(this,Ie).fontMatrix}get fallbackName(){return l(this,Ie).fallbackName}get loadedName(){return l(this,Ie).loadedName}get mimetype(){return l(this,Ie).mimetype}get name(){return l(this,Ie).name}get data(){return l(this,Ie).data}clearData(){l(this,Ie).clearData()}get cssFontInfo(){return l(this,Ie).cssFontInfo}get systemFontInfo(){return l(this,Ie).systemFontInfo}get defaultVMetrics(){return l(this,Ie).defaultVMetrics}}Ie=new WeakMap;function JH(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Rn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ZH(n){if(Rn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return ry(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function qy(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const j_=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,eG=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",fI=VH.bind(null,j_,eG);var ji,_x;class tG{constructor(){b(this,ji,new Map);b(this,_x,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};l(this,_x).then(()=>{for(const[r]of l(this,ji))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){le("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}l(this,ji).set(t,r)}removeEventListener(e,t){const s=l(this,ji).get(t);s==null||s(),l(this,ji).delete(t)}terminate(){for(const[,e]of l(this,ji))e==null||e();l(this,ji).clear()}}ji=new WeakMap,_x=new WeakMap;const Ky={DATA:1,ERROR:2},Et={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function H2(){}function Bn(n){if(n instanceof xo||n instanceof Mb||n instanceof I2||n instanceof am||n instanceof TS)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||He('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new xo(n.message);case"InvalidPDFException":return new Mb(n.message);case"PasswordException":return new I2(n.message,n.code);case"ResponseException":return new am(n.message,n.status,n.missing);case"UnknownErrorException":return new TS(n.message,n.details)}return new TS(n.message,n.toString())}var Md,Ex,pI,Cx,mI,Tx,gI,jd,Ev;class op{constructor(e,t,s){b(this,Ex);b(this,Cx);b(this,Tx);b(this,jd);b(this,Md,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",C(this,Ex,pI).bind(this),{signal:l(this,Md).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:o,targetName:a,stream:Et.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Se(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Et.CANCEL,streamId:i,reason:Bn(u)}),d.promise}},s)}destroy(){var e;(e=l(this,Md))==null||e.abort(),w(this,Md,null)}}Md=new WeakMap,Ex=new WeakSet,pI=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Tx,gI).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Ky.DATA)r.resolve(e.data);else if(e.callback===Ky.ERROR)r.reject(Bn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:Ky.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:Ky.ERROR,callbackId:e.callbackId,reason:Bn(o)})});return}if(e.streamId){C(this,Cx,mI).call(this,e);return}t(e.data)},Cx=new WeakSet,mI=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:Et.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Et.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Se(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Et.ERROR,streamId:t,reason:Bn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(a,e.data,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Et.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Et.START_COMPLETE,streamId:t,reason:Bn(u)})})},Tx=new WeakSet,gI=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Et.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Bn(e.reason));break;case Et.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Bn(e.reason));break;case Et.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:Et.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||H2).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Et.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Et.PULL_COMPLETE,streamId:t,reason:Bn(u)})});break;case Et.ENQUEUE:if(Se(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Et.CLOSE:if(Se(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,jd,Ev).call(this,o,t);break;case Et.ERROR:Se(o,"error should have stream controller"),o.controller.error(Bn(e.reason)),C(this,jd,Ev).call(this,o,t);break;case Et.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Bn(e.reason)),C(this,jd,Ev).call(this,o,t);break;case Et.CANCEL:if(!a)break;const c=Bn(e.reason);Promise.try(a.onCancel||H2,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Et.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Et.CANCEL_COMPLETE,streamId:t,reason:Bn(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},jd=new WeakSet,Ev=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var sg;class yI{constructor({enableHWA:e=!1}){b(this,sg,!1);w(this,sg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,sg)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){He("Abstract method `_createCanvas` called.")}}sg=new WeakMap;class nG extends yI{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class vI{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){He("Abstract method `_fetch` called.")}}class G2 extends vI{async _fetch(e){const t=await Ef(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):ry(t)}}class bI{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var ql,Ld,Li,Di,fn,Kl,Xl,$t,un,Yl,ap,Zo,_u,Dd,Cv,ea,Eu,kx,xI,rg,L_,ta,Cu,Ql,lp,Jl,cp,ig,D_,Zl,up;class sG extends bI{constructor({docId:t,ownerDocument:s=globalThis.document}){super();b(this,$t);b(this,Yl);b(this,Zo);b(this,Dd);b(this,ea);b(this,kx);b(this,rg);b(this,ta);b(this,Ql);b(this,Jl);b(this,ig);b(this,Zl);b(this,ql,void 0);b(this,Ld,void 0);b(this,Li,void 0);b(this,Di,void 0);b(this,fn,void 0);b(this,Kl,void 0);b(this,Xl,0);w(this,Di,t),w(this,fn,s)}addFilter(t){if(!t)return"none";let s=l(this,$t,un).get(t);if(s)return s;const[r,i,o]=C(this,Dd,Cv).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=l(this,$t,un).get(a),s)return l(this,$t,un).set(t,s),s;const c=`g_${l(this,Di)}_transfer_map_${Rt(this,Xl)._++}`,u=C(this,ea,Eu).call(this,c);l(this,$t,un).set(t,u),l(this,$t,un).set(a,u);const d=C(this,ta,Cu).call(this,c);return C(this,Jl,cp).call(this,r,i,o,d),u}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let o=l(this,Yl,ap).get(i);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},l(this,Yl,ap).set(i,o)),!t||!s))return o.url;const a=C(this,Zl,up).call(this,t);t=Q.makeHexColor(...a);const c=C(this,Zl,up).call(this,s);if(s=Q.makeHexColor(...c),l(this,Zo,_u).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const S=g/255;u[g]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=u.join(","),h=`g_${l(this,Di)}_hcm_filter`,f=o.filter=C(this,ta,Cu).call(this,h);C(this,Jl,cp).call(this,d,d,d,f),C(this,rg,L_).call(this,f);const m=(g,S)=>{const v=a[g]/255,x=c[g]/255,A=new Array(S+1);for(let E=0;E<=S;E++)A[E]=v+E/S*(x-v);return A.join(",")};return C(this,Jl,cp).call(this,m(0,5),m(1,5),m(2,5),f),o.url=C(this,ea,Eu).call(this,h),o.url}addAlphaFilter(t){let s=l(this,$t,un).get(t);if(s)return s;const[r]=C(this,Dd,Cv).call(this,[t]),i=`alpha_${r}`;if(s=l(this,$t,un).get(i),s)return l(this,$t,un).set(t,s),s;const o=`g_${l(this,Di)}_alpha_map_${Rt(this,Xl)._++}`,a=C(this,ea,Eu).call(this,o);l(this,$t,un).set(t,a),l(this,$t,un).set(i,a);const c=C(this,ta,Cu).call(this,o);return C(this,ig,D_).call(this,r,c),a}addLuminosityFilter(t){let s=l(this,$t,un).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=C(this,Dd,Cv).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=l(this,$t,un).get(i),s)return l(this,$t,un).set(t,s),s;const o=`g_${l(this,Di)}_luminosity_map_${Rt(this,Xl)._++}`,a=C(this,ea,Eu).call(this,o);l(this,$t,un).set(t,a),l(this,$t,un).set(i,a);const c=C(this,ta,Cu).call(this,o);return C(this,kx,xI).call(this,c),t&&C(this,ig,D_).call(this,r,c),a}addHighlightHCMFilter(t,s,r,i,o){var x;const a=`${s}-${r}-${i}-${o}`;let c=l(this,Yl,ap).get(t);if((c==null?void 0:c.key)===a||(c?((x=c.filter)==null||x.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,Yl,ap).set(t,c)),!s||!r))return c.url;const[u,d]=[s,r].map(C(this,Zl,up).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[i,o].map(C(this,Zl,up).bind(this));f<h&&([h,f,m,y]=[f,h,y,m]),l(this,Zo,_u).style.color="";const g=(A,E,T)=>{const P=new Array(256),k=(f-h)/T,R=A/255,M=(E-A)/(255*T);let L=0;for(let B=0;B<=T;B++){const D=Math.round(h+B*k),z=R+B*M;for(let I=L;I<=D;I++)P[I]=z;L=D+1}for(let B=L;B<256;B++)P[B]=P[L-1];return P.join(",")},S=`g_${l(this,Di)}_hcm_${t}_filter`,v=c.filter=C(this,ta,Cu).call(this,S);return C(this,rg,L_).call(this,v),C(this,Jl,cp).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),c.url=C(this,ea,Eu).call(this,S),c.url}destroy(t=!1){var s,r,i,o;t&&((s=l(this,Kl))!=null&&s.size)||((r=l(this,Li))==null||r.parentNode.parentNode.remove(),w(this,Li,null),(i=l(this,Ld))==null||i.clear(),w(this,Ld,null),(o=l(this,Kl))==null||o.clear(),w(this,Kl,null),w(this,Xl,0))}}ql=new WeakMap,Ld=new WeakMap,Li=new WeakMap,Di=new WeakMap,fn=new WeakMap,Kl=new WeakMap,Xl=new WeakMap,$t=new WeakSet,un=function(){return l(this,Ld)||w(this,Ld,new Map)},Yl=new WeakSet,ap=function(){return l(this,Kl)||w(this,Kl,new Map)},Zo=new WeakSet,_u=function(){if(!l(this,Li)){const t=l(this,fn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=l(this,fn).createElementNS(pi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),w(this,Li,l(this,fn).createElementNS(pi,"defs")),t.append(r),r.append(l(this,Li)),l(this,fn).body.append(t)}return l(this,Li)},Dd=new WeakSet,Cv=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[s,r,i]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=r[u]/255,c[u]=i[u]/255;return[o.join(","),a.join(","),c.join(",")]},ea=new WeakSet,Eu=function(t){if(l(this,ql)===void 0){w(this,ql,"");const s=l(this,fn).URL;s!==l(this,fn).baseURI&&(oy(s)?le('#createUrl: ignore "data:"-URL for performance reasons.'):w(this,ql,wT(s,"")))}return`url(${l(this,ql)}#${t})`},kx=new WeakSet,xI=function(t){const s=l(this,fn).createElementNS(pi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},rg=new WeakSet,L_=function(t){const s=l(this,fn).createElementNS(pi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},ta=new WeakSet,Cu=function(t){const s=l(this,fn).createElementNS(pi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),l(this,Zo,_u).append(s),s},Ql=new WeakSet,lp=function(t,s,r){const i=l(this,fn).createElementNS(pi,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},Jl=new WeakSet,cp=function(t,s,r,i){const o=l(this,fn).createElementNS(pi,"feComponentTransfer");i.append(o),C(this,Ql,lp).call(this,o,"feFuncR",t),C(this,Ql,lp).call(this,o,"feFuncG",s),C(this,Ql,lp).call(this,o,"feFuncB",r)},ig=new WeakSet,D_=function(t,s){const r=l(this,fn).createElementNS(pi,"feComponentTransfer");s.append(r),C(this,Ql,lp).call(this,r,"feFuncA",t)},Zl=new WeakSet,up=function(t){return l(this,Zo,_u).style.color=t,Cf(getComputedStyle(l(this,Zo,_u)).getPropertyValue("color"))};class wI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){He("Abstract method `_fetch` called.")}}class W2 extends wI{async _fetch(e){const t=await Ef(e,"arraybuffer");return new Uint8Array(t)}}class SI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){He("Abstract method `_fetch` called.")}}class q2 extends SI{async _fetch(e){const t=await Ef(e,"arraybuffer");return new Uint8Array(t)}}Rn&&le("Please use the `legacy` build in Node.js environments.");async function TT(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class rG extends bI{}class iG extends yI{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class oG extends vI{async _fetch(e){return TT(e)}}class aG extends wI{async _fetch(e){return TT(e)}}class lG extends SI{async _fetch(e){return TT(e)}}const bu="__forcedDependency",{floor:K2,ceil:X2}=Math;function Xy(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const I_=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Id,na;class cG{constructor(e,t){b(this,Id,void 0);b(this,na,void 0);w(this,Id,e),w(this,na,t)}get length(){return l(this,Id).length}isEmpty(e){return l(this,Id)[e]===I_}minX(e){return l(this,na)[e*4+0]/256}minY(e){return l(this,na)[e*4+1]/256}maxX(e){return(l(this,na)[e*4+2]+1)/256}maxY(e){return(l(this,na)[e*4+3]+1)/256}}Id=new WeakMap,na=new WeakMap;const Yy=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var zn,Un,ec,hr,tc,Ii,Le,Oe,Oi,Hn,og,Od,nc,sc,Fi,pn,Wr,ag,O_;class uG{constructor(e,t,s=!1){b(this,ag);b(this,zn,{__proto__:null});b(this,Un,{__proto__:null,transform:[],moveText:[],sameLineText:[],[bu]:[]});b(this,ec,new Map);b(this,hr,[]);b(this,tc,[]);b(this,Ii,[[1,0,0,1,0,0]]);b(this,Le,[-1/0,-1/0,1/0,1/0]);b(this,Oe,new Float64Array([1/0,1/0,-1/0,-1/0]));b(this,Oi,-1);b(this,Hn,new Set);b(this,og,new Map);b(this,Od,new Map);b(this,nc,void 0);b(this,sc,void 0);b(this,Fi,void 0);b(this,pn,void 0);b(this,Wr,void 0);w(this,nc,e.width),w(this,sc,e.height),C(this,ag,O_).call(this,t),s&&w(this,Wr,new Map)}growOperationsCount(e){e>=l(this,pn).length&&C(this,ag,O_).call(this,e,l(this,pn))}save(e){return w(this,zn,{__proto__:l(this,zn)}),w(this,Un,{__proto__:l(this,Un),transform:{__proto__:l(this,Un).transform},moveText:{__proto__:l(this,Un).moveText},sameLineText:{__proto__:l(this,Un).sameLineText},[bu]:{__proto__:l(this,Un)[bu]}}),w(this,Le,{__proto__:l(this,Le)}),l(this,hr).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(l(this,zn));if(t===null)return this;w(this,zn,t),w(this,Un,Object.getPrototypeOf(l(this,Un))),w(this,Le,Object.getPrototypeOf(l(this,Le)));const s=l(this,hr).pop();return s!==void 0&&((r=Yy(l(this,Wr),e))==null||r.dependencies.add(s),l(this,pn)[e]=l(this,pn)[s]),this}recordOpenMarker(e){return l(this,hr).push(e),this}getOpenMarker(){return l(this,hr).length===0?null:l(this,hr).at(-1)}recordCloseMarker(e){var s;const t=l(this,hr).pop();return t!==void 0&&((s=Yy(l(this,Wr),e))==null||s.dependencies.add(t),l(this,pn)[e]=l(this,pn)[t]),this}beginMarkedContent(e){return l(this,tc).push(e),this}endMarkedContent(e){var s;const t=l(this,tc).pop();return t!==void 0&&((s=Yy(l(this,Wr),e))==null||s.dependencies.add(t),l(this,pn)[e]=l(this,pn)[t]),this}pushBaseTransform(e){return l(this,Ii).push(Q.multiplyByDOMMatrix(l(this,Ii).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,Ii).length>1&&l(this,Ii).pop(),this}recordSimpleData(e,t){return l(this,zn)[e]=t,this}recordIncrementalData(e,t){return l(this,Un)[e].push(t),this}resetIncrementalData(e,t){return l(this,Un)[e].length=0,this}recordNamedData(e,t){return l(this,ec).set(e,t),this}recordSimpleDataFromNamed(e,t,s){l(this,zn)[e]=l(this,ec).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(bu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in l(this,zn)&&this.recordFutureForcedDependency(t,l(this,zn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of l(this,Hn))this.recordFutureForcedDependency(bu,e);return this}resetBBox(e){return l(this,Oi)!==e&&(w(this,Oi,e),l(this,Oe)[0]=1/0,l(this,Oe)[1]=1/0,l(this,Oe)[2]=-1/0,l(this,Oe)[3]=-1/0),this}recordClipBox(e,t,s,r,i,o){const a=Q.multiplyByDOMMatrix(l(this,Ii).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Q.axialAlignedBoundingBox([s,i,r,o],a,c);const u=Q.intersect(l(this,Le),c);return u?(l(this,Le)[0]=u[0],l(this,Le)[1]=u[1],l(this,Le)[2]=u[2],l(this,Le)[3]=u[3]):(l(this,Le)[0]=l(this,Le)[1]=1/0,l(this,Le)[2]=l(this,Le)[3]=-1/0),this}recordBBox(e,t,s,r,i,o){const a=l(this,Le);if(a[0]===1/0)return this;const c=Q.multiplyByDOMMatrix(l(this,Ii).at(-1),t.getTransform());if(a[0]===-1/0)return Q.axialAlignedBoundingBox([s,i,r,o],c,l(this,Oe)),this;const u=[1/0,1/0,-1/0,-1/0];return Q.axialAlignedBoundingBox([s,i,r,o],c,u),l(this,Oe)[0]=Math.min(l(this,Oe)[0],Math.max(u[0],a[0])),l(this,Oe)[1]=Math.min(l(this,Oe)[1],Math.max(u[1],a[1])),l(this,Oe)[2]=Math.max(l(this,Oe)[2],Math.min(u[2],a[2])),l(this,Oe)[3]=Math.max(l(this,Oe)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,o=0,a){const c=s.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&l(this,Od).get(s),u!==!1&&(d=[0,0,0,0],Q.axialAlignedBoundingBox(c,s.fontMatrix,d),(r!==1||i!==0||o!==0)&&Q.scaleMinMax([r,0,0,-r,i,o],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return c&&d&&u===void 0&&(u=d[0]<=i-h.actualBoundingBoxLeft&&d[2]>=i+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,l(this,Od).set(s,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-h.actualBoundingBoxLeft,i+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,Oe)[0]=Math.max(0,l(this,Le)[0]),l(this,Oe)[1]=Math.max(0,l(this,Le)[1]),l(this,Oe)[2]=Math.min(l(this,nc),l(this,Le)[2]),l(this,Oe)[3]=Math.min(l(this,sc),l(this,Le)[3]),this}getSimpleIndex(e){return l(this,zn)[e]}recordDependencies(e,t){const s=l(this,Hn),r=l(this,zn),i=l(this,Un);for(const o of t)o in l(this,zn)?s.add(r[o]):o in i&&i[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return l(this,ec).has(t)&&l(this,Hn).add(l(this,ec).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[bu]),l(this,Wr)){const s=Yy(l(this,Wr),e),{dependencies:r}=s;l(this,Hn).forEach(r.add,r),l(this,hr).forEach(r.add,r),l(this,tc).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(l(this,Oi)===e){const s=K2(l(this,Oe)[0]*256/l(this,nc)),r=K2(l(this,Oe)[1]*256/l(this,sc)),i=X2(l(this,Oe)[2]*256/l(this,nc)),o=X2(l(this,Oe)[3]*256/l(this,sc));Xy(l(this,Fi),e,s,r,i,o);for(const a of l(this,Hn))a!==e&&Xy(l(this,Fi),a,s,r,i,o);for(const a of l(this,hr))a!==e&&Xy(l(this,Fi),a,s,r,i,o);for(const a of l(this,tc))a!==e&&Xy(l(this,Fi),a,s,r,i,o);t||(l(this,Hn).clear(),w(this,Oi,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(l(this,Hn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,Oi)===e&&(w(this,Oi,-1),l(this,Le)[0]=Math.max(l(this,Le)[0],l(this,Oe)[0]),l(this,Le)[1]=Math.max(l(this,Le)[1],l(this,Oe)[1]),l(this,Le)[2]=Math.min(l(this,Le)[2],l(this,Oe)[2]),l(this,Le)[3]=Math.min(l(this,Le)[3],l(this,Oe)[3]),t||l(this,Hn).clear()),this}_takePendingDependencies(){const e=l(this,Hn);return w(this,Hn,new Set),e}_extractOperation(e){const t=l(this,og).get(e);return l(this,og).delete(e),t}_pushPendingDependencies(e){for(const t of e)l(this,Hn).add(t)}take(){return l(this,Od).clear(),new cG(l(this,pn),l(this,Fi))}takeDebugMetadata(){return l(this,Wr)}}zn=new WeakMap,Un=new WeakMap,ec=new WeakMap,hr=new WeakMap,tc=new WeakMap,Ii=new WeakMap,Le=new WeakMap,Oe=new WeakMap,Oi=new WeakMap,Hn=new WeakMap,og=new WeakMap,Od=new WeakMap,nc=new WeakMap,sc=new WeakMap,Fi=new WeakMap,pn=new WeakMap,Wr=new WeakMap,ag=new WeakSet,O_=function(e,t){const s=new ArrayBuffer(e*4);w(this,Fi,new Uint8ClampedArray(s)),w(this,pn,new Uint32Array(s)),t&&t.length>0?(l(this,pn).set(t),l(this,pn).fill(I_,t.length)):l(this,pn).fill(I_)};var Ve,gt,fr,Fd,Bd;const GT=class GT{constructor(e,t,s){b(this,Ve,void 0);b(this,gt,void 0);b(this,fr,void 0);b(this,Fd,0);b(this,Bd,0);if(e instanceof GT&&l(e,fr)===!!s)return e;w(this,Ve,e),w(this,gt,t),w(this,fr,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Rt(this,Bd)._++,l(this,Ve).save(l(this,gt)),this}restore(e){return l(this,Bd)>0&&(l(this,Ve).restore(l(this,gt)),Rt(this,Bd)._--),this}recordOpenMarker(e){return Rt(this,Fd)._++,this}getOpenMarker(){return l(this,Fd)>0?l(this,gt):l(this,Ve).getOpenMarker()}recordCloseMarker(e){return Rt(this,Fd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,Ve).pushBaseTransform(e),this}popBaseTransform(){return l(this,Ve).popBaseTransform(),this}recordSimpleData(e,t){return l(this,Ve).recordSimpleData(e,l(this,gt)),this}recordIncrementalData(e,t){return l(this,Ve).recordIncrementalData(e,l(this,gt)),this}resetIncrementalData(e,t){return l(this,Ve).resetIncrementalData(e,l(this,gt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return l(this,Ve).recordSimpleDataFromNamed(e,t,l(this,gt)),this}recordFutureForcedDependency(e,t){return l(this,Ve).recordFutureForcedDependency(e,l(this,gt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,Ve).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,Ve).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,fr)||l(this,Ve).resetBBox(l(this,gt)),this}recordClipBox(e,t,s,r,i,o){return l(this,fr)||l(this,Ve).recordClipBox(l(this,gt),t,s,r,i,o),this}recordBBox(e,t,s,r,i,o){return l(this,fr)||l(this,Ve).recordBBox(l(this,gt),t,s,r,i,o),this}recordCharacterBBox(e,t,s,r,i,o,a){return l(this,fr)||l(this,Ve).recordCharacterBBox(l(this,gt),t,s,r,i,o,a),this}recordFullPageBBox(e){return l(this,fr)||l(this,Ve).recordFullPageBBox(l(this,gt)),this}getSimpleIndex(e){return l(this,Ve).getSimpleIndex(e)}recordDependencies(e,t){return l(this,Ve).recordDependencies(l(this,gt),t),this}recordNamedDependency(e,t){return l(this,Ve).recordNamedDependency(l(this,gt),t),this}recordOperation(e){return l(this,Ve).recordOperation(l(this,gt),!0),this}recordShowTextOperation(e){return l(this,Ve).recordShowTextOperation(l(this,gt),!0),this}bboxToClipBoxDropOperation(e){return l(this,fr)||l(this,Ve).bboxToClipBoxDropOperation(l(this,gt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Ve=new WeakMap,gt=new WeakMap,fr=new WeakMap,Fd=new WeakMap,Bd=new WeakMap;let Db=GT;const Ds={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},rn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function F_(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class kT{isModifyingCurrentTransform(){return!1}getPattern(){He("Abstract method `getPattern` called.")}}class dG extends kT{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===rn.STROKE||r===rn.FILL){const o=t.current.getClippedPathBoundingBox(r,at(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),s=Q.transform(s,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),F_(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(s);i.setTransform(h)}else F_(e,this._bbox),i=this._createGradient(e);return i}}function RS(n,e,t,s,r,i,o,a){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f),c[s+1]>c[r+1]&&(f=s,s=r,r=f,f=o,o=a,a=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,S=(c[s+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,x=(c[r+1]+e.offsetY)*e.scaleY;if(y>=x)return;const A=u[i],E=u[i+1],T=u[i+2],P=u[o],k=u[o+1],R=u[o+2],M=u[a],L=u[a+1],B=u[a+2],D=Math.round(y),z=Math.round(x);let I,N,j,O,F,$,V,W;for(let K=D;K<=z;K++){if(K<S){const X=K<y?0:(y-K)/(y-S);I=m-(m-g)*X,N=A-(A-P)*X,j=E-(E-k)*X,O=T-(T-R)*X}else{let X;K>x?X=1:S===x?X=0:X=(S-K)/(S-x),I=g-(g-v)*X,N=P-(P-M)*X,j=k-(k-L)*X,O=R-(R-B)*X}let Y;K<y?Y=0:K>x?Y=1:Y=(y-K)/(y-x),F=m-(m-v)*Y,$=A-(A-M)*Y,V=E-(E-L)*Y,W=T-(T-B)*Y;const re=Math.round(Math.min(I,F)),fe=Math.round(Math.max(I,F));let xe=h*K+re*4;for(let X=re;X<=fe;X++)Y=(I-X)/(I-F),Y<0?Y=0:Y>1&&(Y=1),d[xe++]=N-(N-$)*Y|0,d[xe++]=j-(j-V)*Y|0,d[xe++]=O-(O-W)*Y|0,d[xe++]=255}}function hG(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(s.length/a)-1,u=a-1;for(i=0;i<c;i++){let d=i*a;for(let h=0;h<u;h++,d++)RS(n,t,s[d],s[d+1],s[d+a],r[d],r[d+1],r[d+a]),RS(n,t,s[d+a+1],s[d+1],s[d+a],r[d+a+1],r[d+1],r[d+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)RS(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class fG extends kT{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=u/h,y=d/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/m,scaleY:1/y},S=h+2*2,v=f+2*2,x=s.getCanvas("mesh",S,v),A=x.context,E=A.createImageData(h,f);if(t){const P=E.data;for(let k=0,R=P.length;k<R;k+=4)P[k]=t[0],P[k+1]=t[1],P[k+2]=t[2],P[k+3]=255}for(const P of this._figures)hG(E,P,g);return A.putImageData(E,2,2),{canvas:x.canvas,offsetX:a-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){F_(e,this._bbox);const i=new Float32Array(2);if(r===rn.SHADING)Q.singularValueDecompose2dScale(at(e),i);else if(this.matrix){Q.singularValueDecompose2dScale(this.matrix,i);const[a,c]=i;Q.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=c}else Q.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===rn.SHADING?null:this._background,t.cachedCanvases);return r!==rn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class pG extends kT{getPattern(){return"hotpink"}}function mG(n){switch(n[0]){case"RadialAxial":return new dG(n);case"Mesh":return new fG(n);case"Dummy":return new pG}throw new Error(`Unknown IR type: ${n[0]}`)}const Y2={COLORED:1,UNCOLORED:2},Px=class Px{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var $,V;const{bbox:s,operatorList:r,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),v1("TilingType: "+o);const h=s[0],f=s[1],m=s[2],y=s[3],g=m-h,S=y-f,v=new Float32Array(2);Q.singularValueDecompose2dScale(this.matrix,v);const[x,A]=v;Q.singularValueDecompose2dScale(this.baseTransform,v);const E=x*v[0],T=A*v[1];let P=g,k=S,R=!1,M=!1;const L=Math.ceil(u*E),B=Math.ceil(d*T),D=Math.ceil(g*E),z=Math.ceil(S*T);L>=D?P=u:R=!0,B>=z?k=d:M=!0;const I=this.getSizeAndScale(P,this.ctx.canvas.width,E),N=this.getSizeAndScale(k,this.ctx.canvas.height,T),j=e.cachedCanvases.getCanvas("pattern",I.size,N.size),O=j.context,F=c.createCanvasGraphics(O,t);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,i,a),O.translate(-I.scale*h,-N.scale*f),F.transform(0,I.scale,0,0,N.scale,0,0),O.save(),($=F.dependencyTracker)==null||$.save(),this.clipBbox(F,h,f,m,y),F.baseTransform=at(F.ctx),F.executeOperatorList(r),F.endDrawing(),(V=F.dependencyTracker)==null||V.restore(),O.restore(),R||M){const W=j.canvas;R&&(P=u),M&&(k=d);const K=this.getSizeAndScale(P,this.ctx.canvas.width,E),Y=this.getSizeAndScale(k,this.ctx.canvas.height,T),re=K.size,fe=Y.size,xe=e.cachedCanvases.getCanvas("pattern-workaround",re,fe),X=xe.context,G=R?Math.floor(g/u):0,ne=M?Math.floor(S/d):0;for(let ie=0;ie<=G;ie++)for(let Pe=0;Pe<=ne;Pe++)X.drawImage(W,re*ie,fe*Pe,re,fe,0,0,re,fe);return{canvas:xe.canvas,scaleX:K.scale,scaleY:Y.scale,offsetX:h,offsetY:f}}return{canvas:j.canvas,scaleX:I.scale,scaleY:N.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(Px.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),Q.axialAlignedBoundingBox([t,s,r,i],at(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case Y2.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case Y2.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new IH(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let o=s;r!==rn.SHADING&&(o=Q.transform(o,t.baseTransform),this.matrix&&(o=Q.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let c=new DOMMatrix(o);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(c),u}};U(Px,"MAX_PATTERN_SIZE",3e3);let B_=Px;function gG({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=Xt.isLittleEndian?4278190080:255,[c,u]=o?[i,a]:[a,i],d=s>>3,h=s&7,f=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<r;y++){for(const S=e+d;e<S;e++){const v=e<f?n[e]:255;t[m++]=v&128?u:c,t[m++]=v&64?u:c,t[m++]=v&32?u:c,t[m++]=v&16?u:c,t[m++]=v&8?u:c,t[m++]=v&4?u:c,t[m++]=v&2?u:c,t[m++]=v&1?u:c}if(h===0)continue;const g=e<f?n[e++]:255;for(let S=0;S<h;S++)t[m++]=g&1<<7-S?u:c}return{srcPos:e,destPos:m}}const Q2=16,J2=100,yG=15,Z2=10,Kn=16,NS=new DOMMatrix,Es=new Float32Array(2),Wu=new Float32Array([1/0,1/0,-1/0,-1/0]);function vG(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,a){e.transform(t,s,r,i,o,a),this.__originalTransform(t,s,r,i,o,a)},n.setTransform=function(t,s,r,i,o,a){e.setTransform(t,s,r,i,o,a),this.__originalSetTransform(t,s,r,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class bG{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Qy(n,e,t,s,r,i,o,a,c,u){const[d,h,f,m,y,g]=at(n);if(h===0&&f===0){const x=o*d+y,A=Math.round(x),E=a*m+g,T=Math.round(E),P=(o+c)*d+y,k=Math.abs(Math.round(P)-A)||1,R=(a+u)*m+g,M=Math.abs(Math.round(R)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),A,T),n.drawImage(e,t,s,r,i,0,0,k,M),n.setTransform(d,h,f,m,y,g),[k,M]}if(d===0&&m===0){const x=a*f+y,A=Math.round(x),E=o*h+g,T=Math.round(E),P=(a+u)*f+y,k=Math.abs(Math.round(P)-A)||1,R=(o+c)*h+g,M=Math.abs(Math.round(R)-T)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,A,T),n.drawImage(e,t,s,r,i,0,0,M,k),n.setTransform(d,h,f,m,y,g),[M,k]}n.drawImage(e,t,s,r,i,o,a,c,u);const S=Math.hypot(d,h),v=Math.hypot(f,m);return[S*c,v*u]}class eR{constructor(e,t,s){U(this,"alphaIsShape",!1);U(this,"fontSize",0);U(this,"fontSizeScale",1);U(this,"textMatrix",null);U(this,"textMatrixScale",1);U(this,"fontMatrix",d_);U(this,"leading",0);U(this,"x",0);U(this,"y",0);U(this,"lineX",0);U(this,"lineY",0);U(this,"charSpacing",0);U(this,"wordSpacing",0);U(this,"textHScale",1);U(this,"textRenderingMode",Yt.FILL);U(this,"textRise",0);U(this,"fillColor","#000000");U(this,"strokeColor","#000000");U(this,"patternFill",!1);U(this,"patternStroke",!1);U(this,"fillAlpha",1);U(this,"strokeAlpha",1);U(this,"lineWidth",1);U(this,"activeSMask",null);U(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Wu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=rn.FILL,t=null){const s=this.minMax.slice();if(e===rn.STROKE){t||He("Stroke bounding box must include transform."),Q.singularValueDecompose2dScale(t,Es);const r=Es[0]*this.lineWidth/2,i=Es[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=Q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Wu,0)}getClippedPathBoundingBox(e=rn.FILL,t=null){return Q.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function tR(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Kn,i=(t-r)/Kn,o=r===0?i:i+1,a=n.createImageData(s,Kn);let c=0,u;const d=e.data,h=a.data;let f,m,y,g;if(e.kind===Fp.GRAYSCALE_1BPP){const S=d.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),x=v.length,A=s+7>>3,E=4294967295,T=Xt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<i?Kn:r,u=0,m=0;m<y;m++){const P=S-c;let k=0;const R=P>A?s:P*8-7,M=R&-8;let L=0,B=0;for(;k<M;k+=8)B=d[c++],v[u++]=B&128?E:T,v[u++]=B&64?E:T,v[u++]=B&32?E:T,v[u++]=B&16?E:T,v[u++]=B&8?E:T,v[u++]=B&4?E:T,v[u++]=B&2?E:T,v[u++]=B&1?E:T;for(;k<R;k++)L===0&&(B=d[c++],L=128),v[u++]=B&L?E:T,L>>=1}for(;u<x;)v[u++]=0;n.putImageData(a,0,f*Kn)}}else if(e.kind===Fp.RGBA_32BPP){for(m=0,g=s*Kn*4,f=0;f<i;f++)h.set(d.subarray(c,c+g)),c+=g,n.putImageData(a,0,m),m+=Kn;f<o&&(g=s*r*4,h.set(d.subarray(c,c+g)),n.putImageData(a,0,m))}else if(e.kind===Fp.RGB_24BPP)for(y=Kn,g=s*y,f=0;f<o;f++){for(f>=i&&(y=r,g=s*y),u=0,m=g;m--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(a,0,f*Kn)}else throw new Error(`bad image kind: ${e.kind}`)}function nR(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Kn,i=(t-r)/Kn,o=r===0?i:i+1,a=n.createImageData(s,Kn);let c=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<i?Kn:r;({srcPos:c}=gG({src:u,srcPos:c,dest:d,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,h*Kn)}}function zf(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Jy(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function sR(n,e){if(e)return!0;Q.singularValueDecompose2dScale(n,Es);const t=Math.fround(kr.pixelRatio*wo.PDF_TO_CSS_UNITS);return Es[0]<=t&&Es[1]<=t}const xG=["butt","round","square"],wG=["miter","round","bevel"],SG={},rR={};var lg,$_,cg,V_,ug,z_;const WT=class WT{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},c,u,d){b(this,lg);b(this,cg);b(this,ug);this.ctx=e,this.current=new eR(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new bG(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...at(this.compositeCtx))}this.ctx.save(),Jy(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=at(this.ctx)}executeOperatorList(e,t,s,r,i){var v;const o=e.argsArray,a=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const d=u-c>Z2&&typeof s=="function",h=d?Date.now()+yG:0;let f=0;const m=this.commonObjs,y=this.objs;let g,S;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,s),c;if(!i||i(c))if(g=a[c],S=o[c]??null,g!==gf.dependency)S===null?this[g](c):this[g](c,...S);else for(const x of S){(v=this.dependencyTracker)==null||v.recordNamedData(x,c);const A=x.startsWith("g_")?m:y;if(!A.has(x))return A.get(x,s),c}if(c++,c===u)return c;if(d&&++f>Z2){if(Date.now()>h)return s(),c;f=0}}}endDrawing(){C(this,lg,$_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,cg,V_).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,c=r,u="prescale1",d,h;for(;i>2&&a>1||o>2&&c>1;){let f=a,m=c;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),d=this.cachedCanvases.getCanvas(u,f,m),h=d.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,a,c,0,0,f,m),e=d.canvas,a=f,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e,t){var L,B;const s=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,c=at(s);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const D=t.bitmap||t.data.buffer;d=JSON.stringify(a?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(D),u||(u=new Map,this._cachedBitmapsMap.set(D,u));const z=u.get(d);if(z&&!a){const I=Math.round(Math.min(c[0],c[2])+c[4]),N=Math.round(Math.min(c[1],c[3])+c[5]);return(L=this.dependencyTracker)==null||L.recordDependencies(e,Ds.transformAndFill),{canvas:z,offsetX:I,offsetY:N}}h=z}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),nR(f.context,t));let m=Q.transform(c,[1/r,0,0,-1/i,0,0]);m=Q.transform(m,[1,0,0,1,0,-i]);const y=Wu.slice();Q.axialAlignedBoundingBox([0,0,r,i],m,y);const[g,S,v,x]=y,A=Math.round(v-g)||1,E=Math.round(x-S)||1,T=this.cachedCanvases.getCanvas("fillCanvas",A,E),P=T.context,k=g,R=S;P.translate(-k,-R),P.transform(...m),h||(h=this._scaleImage(f.canvas,Nr(P)),h=h.img,u&&a&&u.set(d,h)),P.imageSmoothingEnabled=sR(at(P),t.interpolate),Qy(P,h,0,0,h.width,h.height,0,0,r,i),P.globalCompositeOperation="source-in";const M=Q.transform(Nr(P),[1,0,0,1,-k,-R]);return P.fillStyle=a?o.getPattern(s,this,M,rn.FILL,e):o,P.fillRect(0,0,r,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,T.canvas)),(B=this.dependencyTracker)==null||B.recordDependencies(e,Ds.transformAndFill),{canvas:T.canvas,offsetX:Math.round(k),offsetY:Math.round(R)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=xG[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=wG[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,o,a;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),zf(this.suspendedCtx,o),vG(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),zf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,c=r[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,s,a,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,c,u,d,h){let f=e.canvas,m=c-d,y=u-h;if(o)if(m<0||y<0||m+s>f.width||y+r>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,r),v=S.context;v.drawImage(f,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,s,r),v.globalCompositeOperation="source-over",f=S.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(m,y,s,r),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(c,u,s,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,m,y,s,r,c,u,s,r),t.restore()}save(e){var s;this.inSMaskMode&&zf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&zf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o,a){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===gf.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=s[0]=new Path2D;for(let a=0,c=i.length;a<c;)switch(i[a++]){case Gy.moveTo:o.moveTo(i[a++],i[a++]);break;case Gy.lineTo:o.lineTo(i[a++],i[a++]);break;case Gy.curveTo:o.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case Gy.closePath:o.closePath();break;default:le(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=o}Q.axialAlignedBoundingBox(r,at(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Nr(r),rn.STROKE,e),a){const c=new Path2D;c.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=c}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Ds.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(rn.STROKE,at(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,d,h;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=i.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),r.save(),r.fillStyle=i.getPattern(r,this,Nr(r),rn.FILL,e),f){const m=new Path2D;m.addPath(t,r.getTransform().invertSelf().multiplySelf(f)),t=m}a=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Ds.fill),a&&(r.restore(),(h=this.dependencyTracker)==null||h.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,Ds.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=SG}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=rR}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:o,x:a,y:c,fontSize:u,path:d}of t)d&&r.addPath(d,new DOMMatrix(o).preMultiplySelf(i).translate(a,c).scale(u,-u));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||d_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&le("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",a=((f=r.systemFontInfo)==null?void 0:f.css)||`"${o}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const u=r.italic?"italic":"normal";let d=s;s<Q2?d=Q2:s>J2&&(d=J2),this.current.fontSizeScale=s/d,this.ctx.font=`${u} ${c} ${d}px ${a}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,o){var v,x,A,E;const a=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Yt.FILL_STROKE_MASK,m=!!(d&Yt.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,g=c.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||m||y||g)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,t)),S&&(u.disableFontFace||y||g)){a.save(),a.translate(s,r),a.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,a,u);let T;if(f===Yt.FILL||f===Yt.FILL_STROKE)if(i){T=a.getTransform(),a.setTransform(...i);const P=C(this,ug,z_).call(this,S,T,i);a.fill(P)}else a.fill(S);if(f===Yt.STROKE||f===Yt.FILL_STROKE)if(o){T||(T=a.getTransform()),a.setTransform(...o);const{a:P,b:k,c:R,d:M}=T,L=Q.inverseTransform(o),B=Q.transform([P,k,R,M,0,0],L);Q.singularValueDecompose2dScale(B,Es),a.lineWidth*=Math.max(Es[0],Es[1])/h,a.stroke(C(this,ug,z_).call(this,S,T,o))}else a.lineWidth/=h,a.stroke(S);a.restore()}else(f===Yt.FILL||f===Yt.FILL_STROKE)&&(a.fillText(t,s,r),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,a,u,h,s,r,()=>a.measureText(t))),(f===Yt.STROKE||f===Yt.FILL_STROKE)&&(this.dependencyTracker&&((A=this.dependencyTracker)==null||A.recordCharacterBBox(e,a,u,h,s,r,()=>a.measureText(t)).recordDependencies(e,Ds.stroke)),a.strokeText(t,s,r));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:at(a),x:s,y:r,fontSize:h,path:S}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,u,h,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return he(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var R,M,L,B;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ds.showText).resetBBox(e),this.current.textRenderingMode&Yt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(M=this.dependencyTracker)==null||M.recordOperation(e);return}const o=this.ctx,a=s.fontSizeScale,c=s.charSpacing,u=s.wordSpacing,d=s.fontDirection,h=s.textHScale*d,f=t.length,m=r.vertical,y=m?1:-1,g=r.defaultVMetrics,S=i*s.fontMatrix[0],v=s.textRenderingMode===Yt.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),d>0?o.scale(h,-1):o.scale(h,1);let x,A;if(s.patternFill){o.save();const D=s.fillColor.getPattern(o,this,Nr(o),rn.FILL,e);x=at(o),o.restore(),o.fillStyle=D}if(s.patternStroke){o.save();const D=s.strokeColor.getPattern(o,this,Nr(o),rn.STROKE,e);A=at(o),o.restore(),o.strokeStyle=D}let E=s.lineWidth;const T=s.textMatrixScale;if(T===0||E===0){const D=s.textRenderingMode&Yt.FILL_STROKE_MASK;(D===Yt.STROKE||D===Yt.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=T;if(a!==1&&(o.scale(a,a),E/=a),o.lineWidth=E,r.isInvalidPDFjsFont){const D=[];let z=0;for(const N of t)D.push(N.unicode),z+=N.width;const I=D.join("");if(o.fillText(I,0,0),this.dependencyTracker!==null){const N=o.measureText(I);this.dependencyTracker.recordBBox(e,this.ctx,-N.actualBoundingBoxLeft,N.actualBoundingBoxRight,-N.actualBoundingBoxAscent,N.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=z*S*h,o.restore(),this.compose();return}let P=0,k;for(k=0;k<f;++k){const D=t[k];if(typeof D=="number"){P+=y*D*i/1e3;continue}let z=!1;const I=(D.isSpace?u:0)+c,N=D.fontChar,j=D.accent;let O,F,$=D.width;if(m){const K=D.vmetric||g,Y=-(D.vmetric?K[1]:$*.5)*S,re=K[2]*S;$=K?-K[0]:$,O=Y/a,F=(P+re)/a}else O=P/a,F=0;let V;if(r.remeasure&&$>0){V=o.measureText(N);const K=V.width*1e3/i*a;if($<K&&this.isFontSubpixelAAEnabled){const Y=$/K;z=!0,o.save(),o.scale(Y,1),O/=Y}else $!==K&&(O+=($-K)/2e3*i/a)}if(this.contentVisible&&(D.isInFont||r.missingFile)){if(v&&!j)o.fillText(N,O,F),(L=this.dependencyTracker)==null||L.recordCharacterBBox(e,o,V?{bbox:null}:r,i/a,O,F,()=>V??o.measureText(N));else if(this.paintChar(e,N,O,F,x,A),j){const K=O+i*j.offset.x/a,Y=F-i*j.offset.y/a;this.paintChar(e,j.fontChar,K,Y,x,A)}}const W=m?$*S-I*d:$*S+I*d;P+=W,z&&o.restore()}m?s.y-=P:s.x+=P*h,o.restore(),this.compose(),(B=this.dependencyTracker)==null||B.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,o=r.fontSize,a=r.fontDirection,c=i.vertical?1:-1,u=r.charSpacing,d=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||d_,m=t.length,y=r.textRenderingMode===Yt.INVISIBLE;let g,S,v,x;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(h,a);const A=this.dependencyTracker;for(this.dependencyTracker=A?new Db(A,e):null,g=0;g<m;++g){if(S=t[g],typeof S=="number"){x=c*S*o/1e3,this.ctx.translate(x,0),r.x+=x*h;continue}const E=(S.isSpace?d:0)+u,T=i.charProcOperatorList[S.operatorListId];T?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(T),this.restore()):le(`Type3 character "${S.operatorListId}" is not available.`);const P=[S.width,0];Q.applyTransform(P,f),v=P[0]*o+E,s.translate(v,0),r.x+=v*h}s.restore(),A&&(this.dependencyTracker=A)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,o,a){var u;const c=new Path2D;c.rect(r,i,o-r,a-i),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,r,o,i,a).recordClipBox(e,this.ctx,r,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||at(this.ctx),i={createCanvasGraphics:(o,a)=>new WT(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Db(this.dependencyTracker,a,!0):null)};s=new B_(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=mG(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,Nr(s),rn.SHADING,e);const i=Nr(s);if(i){const{width:a,height:c}=s.canvas,u=Wu.slice();Q.axialAlignedBoundingBox([0,0,a,c],i,u);const[d,h,f,m]=u;this.ctx.fillRect(d,h,f-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ds.transform).recordDependencies(e,Ds.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){He("Should not call beginInlineImage")}beginImageData(){He("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=at(this.ctx),s)){Q.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,a,c]=s,u=new Path2D;u.rect(i,o,a-i,c-o),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,a,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var A;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||v1("TODO: Support non-isolated groups."),t.knockout&&le("Knockout groups not supported.");const r=at(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Wu.slice();Q.axialAlignedBoundingBox(t.bbox,at(s),i);const o=[0,0,s.canvas.width,s.canvas.height];i=Q.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),c=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),d=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),m=f.context;m.translate(-a,-c),m.transform(...r);let y=new Path2D;const[g,S,v,x]=t.bbox;if(y.rect(g,S,v-g,x-S),t.matrix){const E=new Path2D;E.addPath(y,new DOMMatrix(t.matrix)),y=E}m.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:a,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(a,c),s.save()),zf(s,m),this.ctx=m,(A=this.dependencyTracker)==null||A.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=at(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=Wu.slice();Q.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,a),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,s,r,i,o){if(C(this,lg,$_).call(this),Jy(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const a=s[2]-s[0],c=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=a,s[3]=c,Q.singularValueDecompose2dScale(at(this.ctx),Es);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Es[0],0,0,-Es[1],0,c*Es[1]),Jy(this.ctx)}else{Jy(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],a,c),this.ctx.clip(u)}}this.current=new eR(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),C(this,cg,V_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,o,a){var h,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=at(c);c.transform(s,r,i,o,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let y=0,g=a.length;y<g;y+=2){const S=Q.transform(u,[s,r,i,o,a[y],a[y+1]]);c.drawImage(d.canvas,S[4],S[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,S[4],S[4]+d.canvas.width,S[5],S[5]+d.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,c;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Ds.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:m}=u,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),g=y.context;g.save();const S=this.getObject(e,d,u);nR(g,S),g.globalCompositeOperation="source-in",g.fillStyle=i?r.getPattern(g,this,Nr(s),rn.FILL,e):r,g.fillRect(0,0,h,f),g.restore(),s.save(),s.transform(...m),s.scale(1,-1),Qy(s,y.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,h,0,f),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){le("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){le("Dependent image isn't ready yet");return}const a=o.width,c=o.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[s,0,0,r,i[d],i[d+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/s,-1/r);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",s,r).context;tR(h,t),a=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(a,Nr(i));i.imageSmoothingEnabled=sR(at(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,Ds.imageXObject).recordOperation(e),Qy(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,a,c;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;tR(f,t),i=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)r.save(),r.transform(...u.transform),r.scale(1,-1),Qy(r,i,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ds.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,a;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===rR?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=at(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const c=Math.abs(t),u=Math.abs(i);if(c===u)if(e===0)o=a=1/c;else{const d=c*e;o=a=d<1?1/d:1}else if(e===0)o=1/c,a=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const c=Math.abs(t*i-s*r),u=Math.hypot(t,s),d=Math.hypot(r,i);if(e===0)o=d/c,a=u/c;else{const h=e*c;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(i,o),NS.a=1/i,NS.d=1/o;const c=new Path2D;if(c.addPath(e,NS),a.length>0){const u=Math.max(i,o);s.setLineDash(a.map(d=>d/u)),s.lineDashOffset/=u}s.lineWidth=r||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};lg=new WeakSet,$_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},cg=new WeakSet,V_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},ug=new WeakSet,z_=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let sd=WT;for(const n in gf)sd.prototype[n]!==void 0&&(sd.prototype[gf[n]]=sd.prototype[n]);var $d,Vd,dg,zd,Tv;const Ku=class Ku{constructor(e){b(this,zd);b(this,$d,void 0);b(this,Vd,void 0);b(this,dg,void 0);w(this,$d,e),w(this,Vd,new DataView(l(this,$d))),w(this,dg,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const u of Ku.strings){const d=t.encode(e[u]);s[u]=d,r+=4+d.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),a=new DataView(i);let c=0;for(const u of Ku.strings){const d=s[u],h=d.length;a.setUint32(c,h),o.set(d,c+4),c+=4+h}return Se(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return C(this,zd,Tv).call(this,0)}get fontWeight(){return C(this,zd,Tv).call(this,1)}get italicAngle(){return C(this,zd,Tv).call(this,2)}};$d=new WeakMap,Vd=new WeakMap,dg=new WeakMap,zd=new WeakSet,Tv=function(e){Se(e<Ku.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=l(this,Vd).getUint32(t)+4;const s=l(this,Vd).getUint32(t);return l(this,dg).decode(new Uint8Array(l(this,$d),t+4,s))},U(Ku,"strings",["fontFamily","fontWeight","italicAngle"]);let Ib=Ku;var sa,qr,rc,ic,dp;const Xu=class Xu{constructor(e){b(this,ic);b(this,sa,void 0);b(this,qr,void 0);b(this,rc,void 0);w(this,sa,e),w(this,qr,new DataView(l(this,sa))),w(this,rc,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const f of Xu.strings){const m=t.encode(e[f]);s[f]=m,r+=4+m.length}r+=4;let i,o,a=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,r=0;for(const f of Xu.strings){const m=s[f],y=m.length;r+=4+y,d.setUint32(h,y),u.set(m,h+4),h+=4+y}return d.setUint32(h-r-4,r),e.style&&(d.setUint32(h,i.length),u.set(i,h+4),h+=4+i.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),Se(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return l(this,qr).getUint8(0)!==0}get css(){return C(this,ic,dp).call(this,0)}get loadedName(){return C(this,ic,dp).call(this,1)}get baseFontName(){return C(this,ic,dp).call(this,2)}get src(){return C(this,ic,dp).call(this,3)}get style(){let e=1;e+=4+l(this,qr).getUint32(e);const t=l(this,qr).getUint32(e),s=l(this,rc).decode(new Uint8Array(l(this,sa),e+4,t));e+=4+t;const r=l(this,qr).getUint32(e),i=l(this,rc).decode(new Uint8Array(l(this,sa),e+4,r));return{style:s,weight:i}}};sa=new WeakMap,qr=new WeakMap,rc=new WeakMap,ic=new WeakSet,dp=function(e){Se(e<Xu.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=l(this,qr).getUint32(t)+4;const s=l(this,qr).getUint32(t);return l(this,rc).decode(new Uint8Array(l(this,sa),t+4,s))},U(Xu,"strings",["css","loadedName","baseFontName","src"]);let Ob=Xu;var Ud,Hd,Gd,Wd,ls,Kr,hg,Fe,cs,ir,qd,kv,oc,hp;const de=class de{constructor({data:e,extra:t}){b(this,cs);b(this,qd);b(this,oc);b(this,Kr,void 0);b(this,hg,void 0);b(this,Fe,void 0);w(this,Kr,e),w(this,hg,new TextDecoder),w(this,Fe,new DataView(l(this,Kr))),t&&Object.assign(this,t)}get black(){return C(this,cs,ir).call(this,0)}get bold(){return C(this,cs,ir).call(this,1)}get disableFontFace(){return C(this,cs,ir).call(this,2)}get fontExtraProperties(){return C(this,cs,ir).call(this,3)}get isInvalidPDFjsFont(){return C(this,cs,ir).call(this,4)}get isType3Font(){return C(this,cs,ir).call(this,5)}get italic(){return C(this,cs,ir).call(this,6)}get missingFile(){return C(this,cs,ir).call(this,7)}get remeasure(){return C(this,cs,ir).call(this,8)}get vertical(){return C(this,cs,ir).call(this,9)}get ascent(){return C(this,qd,kv).call(this,0)}get defaultWidth(){return C(this,qd,kv).call(this,1)}get descent(){return C(this,qd,kv).call(this,2)}get bbox(){let e=l(de,Hd);if(l(this,Fe).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(l(this,Fe).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=l(de,Gd);if(l(this,Fe).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(l(this,Fe).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=l(de,Wd);if(l(this,Fe).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(l(this,Fe).getInt16(e,!0)),e+=2;return s}get fallbackName(){return C(this,oc,hp).call(this,0)}get loadedName(){return C(this,oc,hp).call(this,1)}get mimetype(){return C(this,oc,hp).call(this,2)}get name(){return C(this,oc,hp).call(this,3)}get data(){let e=l(de,ls);const t=l(this,Fe).getUint32(e);e+=4+t;const s=l(this,Fe).getUint32(e);e+=4+s;const r=l(this,Fe).getUint32(e);e+=4+r;const i=l(this,Fe).getUint32(e);if(i!==0)return new Uint8Array(l(this,Kr),e+4,i)}clearData(){let e=l(de,ls);const t=l(this,Fe).getUint32(e);e+=4+t;const s=l(this,Fe).getUint32(e);e+=4+s;const r=l(this,Fe).getUint32(e);e+=4+r;const i=l(this,Fe).getUint32(e);new Uint8Array(l(this,Kr),e+4,i).fill(0),l(this,Fe).setUint32(e,0)}get cssFontInfo(){let e=l(de,ls);const t=l(this,Fe).getUint32(e);e+=4+t;const s=l(this,Fe).getUint32(e);e+=4+s;const r=l(this,Fe).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(l(this,Kr),e+4,r)),new Ib(i.buffer)}get systemFontInfo(){let e=l(de,ls);const t=l(this,Fe).getUint32(e);e+=4+t;const s=l(this,Fe).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(l(this,Kr),e+4,s)),new Ob(r.buffer)}static write(e){const t=e.systemFontInfo?Ob.write(e.systemFontInfo):null,s=e.cssFontInfo?Ib.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const g of de.strings)i[g]=r.encode(e[g]),o+=4+i[g].length;const a=l(de,ls)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=de.bools.length;let m=0,y=0;for(let g=0;g<f;g++){const S=e[de.bools[g]];m|=(S===void 0?0:S?2:1)<<y,y+=2,(y===8||g===f-1)&&(d.setUint8(h++,m),m=0,y=0)}Se(h===l(de,Ud),"FontInfo.write: Boolean properties offset mismatch");for(const g of de.numbers)d.setFloat64(h,e[g]),h+=8;if(Se(h===l(de,Hd),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(Se(h===l(de,Gd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(Se(h===l(de,Wd),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=3*2;Se(h===l(de,ls),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(l(de,ls),0),h+=4;for(const g of de.strings){const S=i[g],v=S.length;d.setUint32(h,v),u.set(S,h+4),h+=4+v}if(d.setUint32(l(de,ls),h-l(de,ls)-4),!t)d.setUint32(h,0),h+=4;else{const g=t.byteLength;d.setUint32(h,g),Se(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!s)d.setUint32(h,0),h+=4;else{const g=s.byteLength;d.setUint32(h,g),Se(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Se(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};Ud=new WeakMap,Hd=new WeakMap,Gd=new WeakMap,Wd=new WeakMap,ls=new WeakMap,Kr=new WeakMap,hg=new WeakMap,Fe=new WeakMap,cs=new WeakSet,ir=function(e){Se(e<de.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=l(this,Fe).getUint8(t)>>s&3;return r===0?void 0:r===2},qd=new WeakSet,kv=function(e){return Se(e<de.numbers.length,"Invalid number index"),l(this,Fe).getFloat64(l(de,Ud)+e*8)},oc=new WeakSet,hp=function(e){Se(e<de.strings.length,"Invalid string index");let t=l(de,ls)+4;for(let i=0;i<e;i++)t+=l(this,Fe).getUint32(t)+4;const s=l(this,Fe).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(l(this,Kr),t+4,s)),l(this,hg).decode(r)},U(de,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),U(de,"numbers",["ascent","defaultWidth","descent"]),U(de,"strings",["fallbackName","loadedName","mimetype","name"]),b(de,Ud,Math.ceil(de.bools.length*2/8)),b(de,Hd,l(de,Ud)+de.numbers.length*8),b(de,Gd,l(de,Hd)+1+2*4),b(de,Wd,l(de,Gd)+1+8*6),b(de,ls,l(de,Wd)+1+2*3);let U_=de;var fg,pg;class Qs{static get workerPort(){return l(this,fg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");w(this,fg,e)}static get workerSrc(){return l(this,pg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");w(this,pg,e)}}fg=new WeakMap,pg=new WeakMap,b(Qs,fg,null),b(Qs,pg,"");var Kd,mg;class AG{constructor({parsedData:e,rawData:t}){b(this,Kd,void 0);b(this,mg,void 0);w(this,Kd,e),w(this,mg,t)}getRaw(){return l(this,mg)}get(e){return l(this,Kd).get(e)??null}[Symbol.iterator](){return l(this,Kd).entries()}}Kd=new WeakMap,mg=new WeakMap;const Tu=Symbol("INTERNAL");var gg,yg,vg,Xd;class _G{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){b(this,gg,!1);b(this,yg,!1);b(this,vg,!1);b(this,Xd,!0);w(this,gg,!!(e&As.DISPLAY)),w(this,yg,!!(e&As.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(l(this,vg))return l(this,Xd);if(!l(this,Xd))return!1;const{print:e,view:t}=this.usage;return l(this,gg)?(t==null?void 0:t.viewState)!=="OFF":l(this,yg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Tu&&He("Internal method `_setVisible` called."),w(this,vg,s),w(this,Xd,t)}}gg=new WeakMap,yg=new WeakMap,vg=new WeakMap,Xd=new WeakMap;var ra,Be,Yd,Qd,bg,H_;class EG{constructor(e,t=As.DISPLAY){b(this,bg);b(this,ra,null);b(this,Be,new Map);b(this,Yd,null);b(this,Qd,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,w(this,Qd,e.order);for(const s of e.groups)l(this,Be).set(s.id,new _G(t,s));if(e.baseState==="OFF")for(const s of l(this,Be).values())s._setVisible(Tu,!1);for(const s of e.on)l(this,Be).get(s)._setVisible(Tu,!0);for(const s of e.off)l(this,Be).get(s)._setVisible(Tu,!1);w(this,Yd,this.getHash())}}isVisible(e){if(l(this,Be).size===0)return!0;if(!e)return v1("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Be).has(e.id)?l(this,Be).get(e.id).visible:(le(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,bg,H_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Be).has(t))return le(`Optional content group not found: ${t}`),!0;if(l(this,Be).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Be).has(t))return le(`Optional content group not found: ${t}`),!0;if(!l(this,Be).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Be).has(t))return le(`Optional content group not found: ${t}`),!0;if(!l(this,Be).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Be).has(t))return le(`Optional content group not found: ${t}`),!0;if(l(this,Be).get(t).visible)return!1}return!0}return le(`Unknown optional content policy ${e.policy}.`),!0}return le(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=l(this,Be).get(e);if(!r){le(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=l(this,Be).get(a))==null||i._setVisible(Tu,!1,!0));r._setVisible(Tu,!!t,!0),w(this,ra,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=l(this,Be).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}w(this,ra,null)}get hasInitialVisibility(){return l(this,Yd)===null||this.getHash()===l(this,Yd)}getOrder(){return l(this,Be).size?l(this,Qd)?l(this,Qd).slice():[...l(this,Be).keys()]:null}getGroup(e){return l(this,Be).get(e)||null}getHash(){if(l(this,ra)!==null)return l(this,ra);const e=new uI;for(const[t,s]of l(this,Be))e.update(`${t}:${s.visible}`);return w(this,ra,e.hexdigest())}[Symbol.iterator](){return l(this,Be).entries()}}ra=new WeakMap,Be=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,bg=new WeakSet,H_=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=C(this,bg,H_).call(this,i);else if(l(this,Be).has(i))o=l(this,Be).get(i).visible;else return le(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class CG{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Se(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Se(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Se(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new TG(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new kG(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class TG{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=x1(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class kG{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function PG(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=c(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),m=ry(h);h=f.decode(m),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function o(d){const h=[];let f;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(d))!==null;){let[,g,S,v]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[S,v]}const y=[];for(let g=0;g<h.length&&g in h;++g){let[S,v]=h[g];v=a(v),S&&(v=unescape(v),g===0&&(v=c(v))),y.push(v)}return y.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),y=d.slice(h+1).replace(/^[^']*'/,"");return r(f,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,S){return String.fromCharCode(parseInt(S,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function AI(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function w1(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function _I({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function EI(n){const e=n.get("Content-Disposition");if(e){let t=PG(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(x1(t))return t}return null}function ly(n,e){return new am(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function CI(n){return n===200||n===206}function TI(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function kI(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(le(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class RG{constructor(e){U(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=AI(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Se(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new NG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new MG(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class NG{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,TI(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=w1(i.url),!CI(i.status))throw ly(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:c}=_I({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=EI(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new xo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:kI(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class MG{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,TI(i,this._withCredentials,this._abortController)).then(a=>{const c=w1(a.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!CI(a.status))throw ly(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:kI(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const MS=200,jS=206;function jG(n){const e=n.response;return typeof e!="string"?e:ry(e).buffer}class LG{constructor({url:e,httpHeaders:t,withCredentials:s}){U(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=AI(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=jS):r.expectedStatus=MS,t.responseType="arraybuffer",Se(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||MS;if(!(i===MS&&s.expectedStatus===jS)&&i!==s.expectedStatus){s.onError(r.status);return}const a=jG(r);if(i===jS){const c=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:a}):(le('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class DG{constructor(e){this._source=e,this._manager=new LG(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Se(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new IG(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new OG(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class IG{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=w1(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=_I({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=EI(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=ly(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class OG{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=w1((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=ly(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const FG=/^[a-z][a-z0-9\-+.]+:/i;function BG(n){if(FG.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class $G{constructor(e){this.source=e,this.url=BG(e.url),Se(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Se(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new VG(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new zG(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class VG{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=ly(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new xo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class zG{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Uf=Symbol("INITIAL_DATA");var us,xg,G_;class PI{constructor(){b(this,xg);b(this,us,Object.create(null))}get(e,t=null){if(t){const r=C(this,xg,G_).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=l(this,us)[e];if(!s||s.data===Uf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=l(this,us)[e];return!!t&&t.data!==Uf}delete(e){const t=l(this,us)[e];return!t||t.data===Uf?!1:(delete l(this,us)[e],!0)}resolve(e,t=null){const s=C(this,xg,G_).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in l(this,us)){const{data:s}=l(this,us)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}w(this,us,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,us)){const{data:t}=l(this,us)[e];t!==Uf&&(yield[e,t])}}}us=new WeakMap,xg=new WeakSet,G_=function(e){var t;return(t=l(this,us))[e]||(t[e]={...Promise.withResolvers(),data:Uf})};const UG=1e5,iR=30;var CR,ia,Gn,wg,Sg,ac,Bi,Ag,_g,lc,Jd,Zd,oa,eh,Eg,th,cc,Cg,Tg,rt,nh,uc,kg,aa,sh,Rx,RI,Nx,NI,Pg,W_,rh,Pv,Rg,q_,Mx,MI,jx,jI;let dm=(rt=class{constructor({textContentSource:e,container:t,viewport:s}){b(this,Rx);b(this,Nx);b(this,Pg);b(this,ia,Promise.withResolvers());b(this,Gn,null);b(this,wg,!1);b(this,Sg,!!((CR=globalThis.FontInspector)!=null&&CR.enabled));b(this,ac,null);b(this,Bi,null);b(this,Ag,0);b(this,_g,0);b(this,lc,null);b(this,Jd,null);b(this,Zd,0);b(this,oa,0);b(this,eh,Object.create(null));b(this,Eg,[]);b(this,th,null);b(this,cc,[]);b(this,Cg,new WeakMap);b(this,Tg,null);var c;if(e instanceof ReadableStream)w(this,th,e);else if(typeof e=="object")w(this,th,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');w(this,Gn,w(this,Jd,t)),w(this,oa,s.scale*kr.pixelRatio),w(this,Zd,s.rotation),w(this,Bi,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;w(this,Tg,[1,0,0,-1,-o,a+i]),w(this,_g,r),w(this,Ag,i),C(c=rt,Mx,MI).call(c),Ya(t,s),l(this,ia).promise.finally(()=>{l(rt,sh).delete(this),w(this,Bi,null),w(this,eh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Xt.platform;return he(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,lc).read().then(({value:t,done:s})=>{if(s){l(this,ia).resolve();return}l(this,ac)??w(this,ac,t.lang),Object.assign(l(this,eh),t.styles),C(this,Rx,RI).call(this,t.items),e()},l(this,ia).reject)};return w(this,lc,l(this,th).getReader()),l(rt,sh).add(this),e(),l(this,ia).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*kr.pixelRatio,r=e.rotation;if(r!==l(this,Zd)&&(t==null||t(),w(this,Zd,r),Ya(l(this,Jd),{rotation:r})),s!==l(this,oa)){t==null||t(),w(this,oa,s);const o={div:null,properties:null,ctx:C(i=rt,rh,Pv).call(i,l(this,ac))};for(const a of l(this,cc))o.properties=l(this,Cg).get(a),o.div=a,C(this,Pg,W_).call(this,o)}}cancel(){var t;const e=new xo("TextLayer task cancelled.");(t=l(this,lc))==null||t.cancel(e).catch(()=>{}),w(this,lc,null),l(this,ia).reject(e)}get textDivs(){return l(this,cc)}get textContentItemsStr(){return l(this,Eg)}static cleanup(){if(!(l(this,sh).size>0)){l(this,nh).clear();for(const{canvas:e}of l(this,uc).values())e.remove();l(this,uc).clear()}}},ia=new WeakMap,Gn=new WeakMap,wg=new WeakMap,Sg=new WeakMap,ac=new WeakMap,Bi=new WeakMap,Ag=new WeakMap,_g=new WeakMap,lc=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,oa=new WeakMap,eh=new WeakMap,Eg=new WeakMap,th=new WeakMap,cc=new WeakMap,Cg=new WeakMap,Tg=new WeakMap,nh=new WeakMap,uc=new WeakMap,kg=new WeakMap,aa=new WeakMap,sh=new WeakMap,Rx=new WeakSet,RI=function(e){var r,i;if(l(this,wg))return;(i=l(this,Bi)).ctx??(i.ctx=C(r=rt,rh,Pv).call(r,l(this,ac)));const t=l(this,cc),s=l(this,Eg);for(const o of e){if(t.length>UG){le("Ignoring additional textDivs for performance reasons."),w(this,wg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Gn);w(this,Gn,document.createElement("span")),l(this,Gn).classList.add("markedContent"),o.id&&l(this,Gn).setAttribute("id",`${o.id}`),a.append(l(this,Gn))}else o.type==="endMarkedContent"&&w(this,Gn,l(this,Gn).parentNode);continue}s.push(o.str),C(this,Nx,NI).call(this,o)}},Nx=new WeakSet,NI=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,cc).push(t);const r=Q.transform(l(this,Tg),e.transform);let i=Math.atan2(r[1],r[0]);const o=l(this,eh)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=l(this,Sg)&&o.fontSubstitution||o.fontFamily;a=rt.fontFamilyMap.get(a)||a;const c=Math.hypot(r[2],r[3]),u=c*C(g=rt,jx,jI).call(g,a,o,l(this,ac));let d,h;i===0?(d=r[4],h=r[5]-u):(d=r[4]+u*Math.sin(i),h=r[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",m=t.style;l(this,Gn)===l(this,Jd)?(m.left=`${(100*d/l(this,_g)).toFixed(2)}%`,m.top=`${(100*h/l(this,Ag)).toFixed(2)}%`):(m.left=`${f}${d.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(l(rt,aa)*c).toFixed(2)}px)`,m.fontFamily=a,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Sg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);S!==v&&Math.max(S,v)/Math.min(S,v)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),l(this,Cg).set(t,s),l(this,Bi).div=t,l(this,Bi).properties=s,C(this,Pg,W_).call(this,l(this,Bi)),s.hasText&&l(this,Gn).append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),l(this,Gn).append(S)}},Pg=new WeakSet,W_=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(l(rt,aa)>1&&(o=`scale(${1/l(rt,aa)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:d}=s;C(a=rt,Rg,q_).call(a,r,d*l(this,oa),c);const{width:h}=r.measureText(t.textContent);h>0&&(o=`scaleX(${u*l(this,oa)/h}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},rh=new WeakSet,Pv=function(e=null){let t=l(this,uc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,uc).set(e,t),l(this,kg).set(t,{size:0,family:""})}return t},Rg=new WeakSet,q_=function(e,t,s){const r=l(this,kg).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},Mx=new WeakSet,MI=function(){if(l(this,aa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),w(this,aa,e.getBoundingClientRect().height),e.remove()},jx=new WeakSet,jI=function(e,t,s){const r=l(this,nh).get(e);if(r)return r;const i=C(this,rh,Pv).call(this,s);i.canvas.width=i.canvas.height=iR,C(this,Rg,q_).call(this,i,iR,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+c):(Xt.platform.isFirefox&&le("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),l(this,nh).set(e,u),u},b(rt,rh),b(rt,Rg),b(rt,Mx),b(rt,jx),b(rt,nh,new Map),b(rt,uc,new Map),b(rt,kg,new WeakMap),b(rt,aa,null),b(rt,sh,new Set),rt);const HG=100;function PT(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new K_,{docId:t}=e,s=n.url?JH(n.url):null,r=n.data?ZH(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof RT?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof yf?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!oy(n.docBaseUrl)?n.docBaseUrl:null,m=qy(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(Rn?oG:G2),S=qy(n.iccUrl),v=qy(n.standardFontDataUrl),x=n.StandardFontDataFactory||(Rn?aG:W2),A=qy(n.wasmUrl),E=n.WasmFactory||(Rn?lG:q2),T=n.stopAtErrors!==!0,P=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,k=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Rn,M=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Rn&&(Xt.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,B=typeof n.disableFontFace=="boolean"?n.disableFontFace:Rn,D=n.fontExtraProperties===!0,z=n.enableXfa===!0,I=n.ownerDocument||globalThis.document,N=n.disableRange===!0,j=n.disableStream===!0,O=n.disableAutoFetch===!0,F=n.pdfBug===!0,$=n.CanvasFactory||(Rn?iG:nG),V=n.FilterFactory||(Rn?rG:sG),W=n.enableHWA===!0,K=n.useWasm!==!1,Y=c?c.length:n.length??NaN,re=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Rn&&!B,fe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===G2&&x===W2&&E===q2&&m&&v&&A&&ep(m,document.baseURI)&&ep(v,document.baseURI)&&ep(A,document.baseURI)),xe=null;jH(h);const X={canvasFactory:new $({ownerDocument:I,enableHWA:W}),filterFactory:new V({docId:t,ownerDocument:I}),cMapReaderFactory:fe?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:fe?null:new x({baseUrl:v}),wasmFactory:fe?null:new E({baseUrl:A})};d||(d=yf.create({verbosity:h,port:Qs.workerPort}),e._worker=d);const G={docId:t,apiVersion:"5.4.296",data:r,password:a,disableAutoFetch:O,rangeChunkSize:u,length:Y,docBaseUrl:f,enableXfa:z,evaluatorOptions:{maxImageSize:P,disableFontFace:B,ignoreErrors:T,isEvalSupported:k,isOffscreenCanvasSupported:R,isImageDecoderSupported:M,canvasMaxAreaInBytes:L,fontExtraProperties:D,useSystemFonts:re,useWasm:K,useWorkerFetch:fe,cMapUrl:m,iccUrl:S,standardFontDataUrl:v,wasmUrl:A}},ne={ownerDocument:I,pdfBug:F,styleElement:xe,loadingParams:{disableAutoFetch:O,enableXfa:z}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ie=d.messageHandler.sendWithPromise("GetDocRequest",G,r?[r.buffer]:null);let Pe;if(c)Pe=new CG(c,{disableRange:N,disableStream:j});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const ns=ep(s)?RG:Rn?$G:DG;Pe=new ns({url:s,length:Y,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:N,disableStream:j})}return ie.then(ns=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const _e=new op(t,ns,d.port),Ge=new qG(_e,e,Pe,ne,X,W);e._transport=Ge,_e.send("Ready",null)})}).catch(e._capability.reject),e}var Lx;const Dx=class Dx{constructor(){U(this,"_capability",Promise.withResolvers());U(this,"_transport",null);U(this,"_worker",null);U(this,"docId",`d${Rt(Dx,Lx)._++}`);U(this,"destroyed",!1);U(this,"onPassword",null);U(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Lx=new WeakMap,b(Dx,Lx,0);let K_=Dx;var dc,Ng,Mg,jg,Lg,TR;let RT=(TR=class{constructor(e,t,s=!1,r=null){b(this,dc,Promise.withResolvers());b(this,Ng,[]);b(this,Mg,[]);b(this,jg,[]);b(this,Lg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){l(this,Lg).push(e)}addProgressListener(e){l(this,jg).push(e)}addProgressiveReadListener(e){l(this,Mg).push(e)}addProgressiveDoneListener(e){l(this,Ng).push(e)}onDataRange(e,t){for(const s of l(this,Lg))s(e,t)}onDataProgress(e,t){l(this,dc).promise.then(()=>{for(const s of l(this,jg))s(e,t)})}onDataProgressiveRead(e){l(this,dc).promise.then(()=>{for(const t of l(this,Mg))t(e)})}onDataProgressiveDone(){l(this,dc).promise.then(()=>{for(const e of l(this,Ng))e()})}transportReady(){l(this,dc).resolve()}requestDataRange(e,t){He("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},dc=new WeakMap,Ng=new WeakMap,Mg=new WeakMap,jg=new WeakMap,Lg=new WeakMap,TR);class GG{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return he(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $i,hc,fp;class WG{constructor(e,t,s,r=!1){b(this,hc);b(this,$i,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new F2:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new PI,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new iy({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return he(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=ai.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:y=null}){var M,L,B;(M=this._stats)==null||M.time("Overall");const g=this._transport.getRenderingIntent(r,i,h,f),{renderingIntent:S,cacheKey:v}=g;w(this,$i,!1),c||(c=this._transport.getOptionalContentConfig(S));let x=this._intentStates.get(v);x||(x=Object.create(null),this._intentStates.set(v,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const A=!!(S&As.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(g));const E=!!(this._pdfBug&&((B=globalThis.StepperManager)!=null&&B.enabled)),T=!this.recordedBBoxes&&(m||E),P=D=>{var z,I;if(x.renderTasks.delete(k),T){const N=(z=k.gfx)==null?void 0:z.dependencyTracker.take();N&&(k.stepper&&k.stepper.setOperatorBBoxes(N,k.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=N))}A&&w(this,$i,!0),C(this,hc,fp).call(this),D?(k.capability.reject(D),this._abortOperatorList({intentState:x,reason:D instanceof Error?D:new Error(D)})):k.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},k=new X_({callback:P,params:{canvas:t,canvasContext:e,dependencyTracker:T?new uG(t,x.operatorList.length,E):null,viewport:s,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(x.renderTasks||(x.renderTasks=new Set)).add(k);const R=k.task;return Promise.all([x.displayReadyCapability.promise,c]).then(([D,z])=>{var I;if(this.destroyed){P();return}if((I=this._stats)==null||I.time("Rendering"),!(z.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");k.initializeGraphics({transparency:D,optionalContentConfig:z}),k.operatorListChanged()}).catch(P),R}getOperatorList({intent:e="display",annotationMode:t=ai.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>lm.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:c,done:u}){if(u){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),w(this,$i,!1),Promise.all(e)}cleanup(e=!1){w(this,$i,!0);const t=C(this,hc,fp).call(this);return e&&t&&this._stats&&(this._stats=new F2),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&C(this,hc,fp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();C(this,hc,fp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof b1){let r=HG;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new xo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}$i=new WeakMap,hc=new WeakSet,fp=function(){if(!l(this,$i)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),w(this,$i,!1),!0};var la,pr,Vi,fc,Ix,pc,mc,ih,Rv,Ox,LI,Fx,DI,gc,pp,oh,Nv;const tt=class tt{constructor({name:e=null,port:t=null,verbosity:s=LH()}={}){b(this,ih);b(this,Ox);b(this,Fx);b(this,gc);b(this,la,Promise.withResolvers());b(this,pr,null);b(this,Vi,null);b(this,fc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(l(tt,mc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(tt,mc).set(t,this),C(this,Ox,LI).call(this,t)}else C(this,Fx,DI).call(this)}get promise(){return l(this,la).promise}get port(){return l(this,Vi)}get messageHandler(){return l(this,pr)}destroy(){var e,t;this.destroyed=!0,(e=l(this,fc))==null||e.terminate(),w(this,fc,null),l(tt,mc).delete(l(this,Vi)),w(this,Vi,null),(t=l(this,pr))==null||t.destroy(),w(this,pr,null)}static create(e){const t=l(this,mc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new tt(e)}static get workerSrc(){if(Qs.workerSrc)return Qs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return he(this,"_setupFakeWorkerGlobal",(async()=>l(this,oh,Nv)?l(this,oh,Nv):(await Ao(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};la=new WeakMap,pr=new WeakMap,Vi=new WeakMap,fc=new WeakMap,Ix=new WeakMap,pc=new WeakMap,mc=new WeakMap,ih=new WeakSet,Rv=function(){l(this,la).resolve(),l(this,pr).send("configure",{verbosity:this.verbosity})},Ox=new WeakSet,LI=function(e){w(this,Vi,e),w(this,pr,new op("main","worker",e)),l(this,pr).on("ready",()=>{}),C(this,ih,Rv).call(this)},Fx=new WeakSet,DI=function(){if(l(tt,pc)||l(tt,oh,Nv)){C(this,gc,pp).call(this);return}let{workerSrc:e}=tt;try{tt._isSameOrigin(window.location,e)||(e=tt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new op("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?l(this,la).reject(new Error("Worker was destroyed")):C(this,gc,pp).call(this)},i=new AbortController;t.addEventListener("error",()=>{l(this,fc)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}w(this,pr,s),w(this,Vi,t),w(this,fc,t),C(this,ih,Rv).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{C(this,gc,pp).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{v1("The worker has been disabled.")}C(this,gc,pp).call(this)},gc=new WeakSet,pp=function(){l(tt,pc)||(le("Setting up fake worker."),w(tt,pc,!0)),tt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,la).reject(new Error("Worker was destroyed"));return}const t=new tG;w(this,Vi,t);const s=`fake${Rt(tt,Ix)._++}`,r=new op(s+"_worker",s,t);e.setup(r,t),w(this,pr,new op(s,s+"_worker",t)),C(this,ih,Rv).call(this)}).catch(e=>{l(this,la).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},oh=new WeakSet,Nv=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},b(tt,oh),b(tt,Ix,0),b(tt,pc,!1),b(tt,mc,new WeakMap),Rn&&(w(tt,pc,!0),Qs.workerSrc||(Qs.workerSrc="./pdf.worker.mjs")),tt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},tt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},tt.fromPort=e=>{if(UH("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return tt.create(e)};let yf=tt;var zi,Xr,ah,lh,Ui,yc,mp;class qG{constructor(e,t,s,r,i,o){b(this,yc);b(this,zi,new Map);b(this,Xr,new Map);b(this,ah,new Map);b(this,lh,new Map);b(this,Ui,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PI,this.fontLoader=new YH({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return he(this,"annotationStorage",new CT)}getRenderingIntent(e,t=ai.ENABLE,s=null,r=!1,i=!1){let o=As.DISPLAY,a=M_;switch(e){case"any":o=As.ANY;break;case"display":break;case"print":o=As.PRINT;break;default:le(`getRenderingIntent - invalid intent: ${e}`)}const c=o&As.PRINT&&s instanceof hI?s:this.annotationStorage;switch(t){case ai.DISABLE:o+=As.ANNOTATIONS_DISABLE;break;case ai.ENABLE:break;case ai.ENABLE_FORMS:o+=As.ANNOTATIONS_FORMS;break;case ai.ENABLE_STORAGE:o+=As.ANNOTATIONS_STORAGE,a=c.serializable;break;default:le(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=As.IS_EDITING),i&&(o+=As.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,Ui))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,Xr).values())e.push(r._destroy());l(this,Xr).clear(),l(this,ah).clear(),l(this,lh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,zi).clear(),this.filterFactory.destroy(),dm.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new xo("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Se(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Se(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{Se(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}Se(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new GG(s,this))}),e.on("DocException",s=>{t._capability.reject(Bn(s))}),e.on("PasswordRequest",s=>{w(this,Ui,Promise.withResolvers());try{if(!t.onPassword)throw Bn(s);const r=i=>{i instanceof Error?l(this,Ui).reject(i):l(this,Ui).resolve({password:i})};t.onPassword(r,s.code)}catch(r){l(this,Ui).reject(r)}return l(this,Ui).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Xr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const h=i.error;le(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const a=new U_(i),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new QH(a,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:d}=i;Se(d,"The imageRef must be defined.");for(const h of l(this,Xr).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var c;if(this.destroyed)return;const a=l(this,Xr).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&le("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=l(this,ah).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,lh).set(i.refStr,e);const o=new WG(t,i,this,this._params.pdfBug);return l(this,Xr).set(t,o),o});return l(this,ah).set(t,r),r}getPageIndex(e){return j_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,yc,mp).call(this,"GetFieldObjects")}hasJSActions(){return C(this,yc,mp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return C(this,yc,mp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,yc,mp).call(this,"GetOptionalContentConfig").then(t=>new EG(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,zi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new AG(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,zi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,Xr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,zi).clear(),this.filterFactory.destroy(!0),dm.cleanup()}}cachedPageNumber(e){if(!j_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,lh).get(t)??null}}zi=new WeakMap,Xr=new WeakMap,ah=new WeakMap,lh=new WeakMap,Ui=new WeakMap,yc=new WeakSet,mp=function(e,t=null){const s=l(this,zi).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return l(this,zi).set(e,r),r};var ca;class KG{constructor(e){b(this,ca,null);U(this,"onContinue",null);U(this,"onError",null);w(this,ca,e)}get promise(){return l(this,ca).capability.promise}cancel(e=0){l(this,ca).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,ca).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,ca);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ca=new WeakMap;var ua,vc;const gl=class gl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:y=null}){b(this,ua,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new KG(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(l(gl,vc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(gl,vc).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new sd(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,ua)&&(window.cancelAnimationFrame(l(this,ua)),w(this,ua,null)),l(gl,vc).delete(this._canvas),e||(e=new b1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?w(this,ua,window.requestAnimationFrame(()=>{w(this,ua,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(gl,vc).delete(this._canvas),this.callback())))}};ua=new WeakMap,vc=new WeakMap,b(gl,vc,new WeakSet);let X_=gl;const NT="5.4.296",II="f56dc8601";var ds,bc,ch,Lt,Dg,uh,Hi,Ig,da,mr,Og,Fg,Y_,Bg,Q_,$g,J_,Gi,ul,Bx,OI,Yr,ko;const $n=class $n{constructor({editor:e=null,uiManager:t=null}){b(this,Fg);b(this,Bg);b(this,$g);b(this,Gi);b(this,Bx);b(this,Yr);b(this,ds,null);b(this,bc,null);b(this,ch,void 0);b(this,Lt,null);b(this,Dg,!1);b(this,uh,!1);b(this,Hi,null);b(this,Ig,void 0);b(this,da,null);b(this,mr,null);var s,r;e?(w(this,uh,!1),w(this,Hi,e)):w(this,uh,!0),w(this,mr,(e==null?void 0:e._uiManager)||t),w(this,Ig,l(this,mr)._eventBus),w(this,ch,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=l(this,mr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),l($n,Og)||w($n,Og,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return he(this,"_keyboardManager",new ay([[["Escape","mac+Escape"],$n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],$n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],$n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],$n.prototype._moveToPrevious],[["Home","mac+Home"],$n.prototype._moveToBeginning],[["End","mac+End"],$n.prototype._moveToEnd]]))}renderButton(){const e=w(this,ds,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Hi)&&(e.ariaControls=`${l(this,Hi).id}_colorpicker_dropdown`);const t=l(this,mr)._signal;e.addEventListener("click",C(this,Gi,ul).bind(this),{signal:t}),e.addEventListener("keydown",C(this,$g,J_).bind(this),{signal:t});const s=w(this,bc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=l(this,ch),e.append(s),e}renderMainDropdown(){const e=w(this,Lt,C(this,Fg,Y_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,ds)){C(this,Gi,ul).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,Bg,Q_).call(this,t,e)}_moveToNext(e){var t,s;if(!l(this,Yr,ko)){C(this,Gi,ul).call(this,e);return}if(e.target===l(this,ds)){(t=l(this,Lt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=l(this,Lt))==null?void 0:t.firstChild)||e.target===l(this,ds)){l(this,Yr,ko)&&this._hideDropdownFromKeyboard();return}l(this,Yr,ko)||C(this,Gi,ul).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!l(this,Yr,ko)){C(this,Gi,ul).call(this,e);return}(t=l(this,Lt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,Yr,ko)){C(this,Gi,ul).call(this,e);return}(t=l(this,Lt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Lt))==null||e.classList.add("hidden"),l(this,ds).ariaExpanded="false",(t=l(this,da))==null||t.abort(),w(this,da,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,uh)){if(!l(this,Yr,ko)){(e=l(this,Hi))==null||e.unselect();return}this.hideDropdown(),l(this,ds).focus({preventScroll:!0,focusVisible:l(this,Dg)})}}updateColor(e){if(l(this,bc)&&(l(this,bc).style.backgroundColor=e),!l(this,Lt))return;const t=l(this,mr).highlightColors.values();for(const s of l(this,Lt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=l(this,ds))==null||e.remove(),w(this,ds,null),w(this,bc,null),(t=l(this,Lt))==null||t.remove(),w(this,Lt,null)}};ds=new WeakMap,bc=new WeakMap,ch=new WeakMap,Lt=new WeakMap,Dg=new WeakMap,uh=new WeakMap,Hi=new WeakMap,Ig=new WeakMap,da=new WeakMap,mr=new WeakMap,Og=new WeakMap,Fg=new WeakSet,Y_=function(){const e=document.createElement("div"),t=l(this,mr)._signal;e.addEventListener("contextmenu",Rs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Hi)&&(e.id=`${l(this,Hi).id}_colorpicker_dropdown`);for(const[s,r]of l(this,mr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",l($n,Og)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===l(this,ch),i.addEventListener("click",C(this,Bg,Q_).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",C(this,$g,J_).bind(this),{signal:t}),e},Bg=new WeakSet,Q_=function(e,t){t.stopPropagation(),l(this,Ig).dispatch("switchannotationeditorparams",{source:this,type:be.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},$g=new WeakSet,J_=function(e){$n._keyboardManager.exec(this,e)},Gi=new WeakSet,ul=function(e){if(l(this,Yr,ko)){this.hideDropdown();return}if(w(this,Dg,e.detail===0),l(this,da)||(w(this,da,new AbortController),window.addEventListener("pointerdown",C(this,Bx,OI).bind(this),{signal:l(this,mr).combinedSignal(l(this,da))})),l(this,ds).ariaExpanded="true",l(this,Lt)){l(this,Lt).classList.remove("hidden");return}const t=w(this,Lt,C(this,Fg,Y_).call(this));l(this,ds).append(t)},Bx=new WeakSet,OI=function(e){var t;(t=l(this,Lt))!=null&&t.contains(e.target)||this.hideDropdown()},Yr=new WeakSet,ko=function(){return l(this,Lt)&&!l(this,Lt).classList.contains("hidden")},b($n,Og,null);let hm=$n;var Qr,Vg,dh,zg;const yl=class yl{constructor(e){b(this,Qr,null);b(this,Vg,null);b(this,dh,null);w(this,Vg,e),w(this,dh,e._uiManager),l(yl,zg)||w(yl,zg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,Qr))return l(this,Qr);const{editorType:e,colorType:t,colorValue:s}=l(this,Vg),r=w(this,Qr,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",l(yl,zg)[e]),r.addEventListener("input",()=>{l(this,dh).updateParams(t,r.value)},{signal:l(this,dh)._signal}),r}update(e){l(this,Qr)&&(l(this,Qr).value=e)}destroy(){var e;(e=l(this,Qr))==null||e.remove(),w(this,Qr,null)}hideDropdown(){}};Qr=new WeakMap,Vg=new WeakMap,dh=new WeakMap,zg=new WeakMap,b(yl,zg,null);let Fb=yl;function oR(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Hf(n){return Math.max(0,Math.min(255,255*n))}class aR{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Hf(e),[e,e,e]}static G_HTML([e]){const t=oR(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(Hf)}static RGB_HTML(e){return`#${e.map(oR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[Hf(1-Math.min(1,e+r)),Hf(1-Math.min(1,s+r)),Hf(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class XG{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){He("Abstract method `_createSVG` called.")}}class fm extends XG{_createSVG(e){return document.createElementNS(pi,e)}}const YG=9,ou=new WeakSet,QG=new Date().getTimezoneOffset()*60*1e3;class lR{static create(e){switch(e.data.annotationType){case xt.LINK:return new MT(e);case xt.TEXT:return new ZG(e);case xt.WIDGET:switch(e.data.fieldType){case"Tx":return new eW(e);case"Btn":return e.data.radioButton?new $I(e):e.data.checkBox?new nW(e):new sW(e);case"Ch":return new rW(e);case"Sig":return new tW(e)}return new mu(e);case xt.POPUP:return new eE(e);case xt.FREETEXT:return new GI(e);case xt.LINE:return new oW(e);case xt.SQUARE:return new aW(e);case xt.CIRCLE:return new lW(e);case xt.POLYLINE:return new WI(e);case xt.CARET:return new uW(e);case xt.INK:return new jT(e);case xt.POLYGON:return new cW(e);case xt.HIGHLIGHT:return new qI(e);case xt.UNDERLINE:return new dW(e);case xt.SQUIGGLY:return new hW(e);case xt.STRIKEOUT:return new fW(e);case xt.STAMP:return new KI(e);case xt.FILEATTACHMENT:return new pW(e);default:return new ht(e)}}}var xc,hh,Gs,Ug,Z_;const qT=class qT{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){b(this,Ug);b(this,xc,null);b(this,hh,!1);b(this,Gs,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return qT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],i=t[c+2]):t[c+1]===o&&(i=Math.max(i,t[c+2]));return[i,o]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],i=c[u]):c[u+1]===o&&(i=Math.max(i,c[u]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${om}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${om}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=l(this,Gs))==null?void 0:e.popup)||this.popup)==null||t.remove(),w(this,Gs,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(l(this,xc)||w(this,xc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&C(this,Ug,Z_).call(this,t);let r=((i=l(this,Gs))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=l(this,Gs).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),w(this,Gs,null),this.popup=null))}resetEdited(){var e;l(this,xc)&&(C(this,Ug,Z_).call(this,l(this,xc).rect),(e=l(this,Gs))==null||e.popup.resetEdited(),w(this,xc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof mu)&&!(this instanceof MT)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof eE){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:a,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(g>0||S>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=x}else if(this instanceof $I){const x=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=x}switch(t.borderStyle.style){case Su.SOLID:o.borderStyle="solid";break;case Su.DASHED:o.borderStyle="dashed";break;case Su.BEVELED:le("Unimplemented border style: beveled");break;case Su.INSET:le("Unimplemented border style: inset");break;case Su.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(w(this,hh,!0),o.borderColor=Q.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=Q.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:m}=r.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-m)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/d}%`,o.height=`${100*c/h}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=aR[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:aR[`${o}_rgb`](a)})};return he(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,S,v,x]=e.subarray(2,6);if(r===g&&i===S&&t===v&&s===x)return}const{style:o}=this.container;let a;if(l(this,hh)){const{borderColor:g,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const c=r-t,u=i-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const m=d.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let g=2,S=e.length;g<S;g+=8){const v=e[g],x=e[g+1],A=e[g+2],E=e[g+3],T=d.createElement("rect"),P=(A-t)/c,k=(i-x)/u,R=(v-A)/c,M=(x-E)/u;T.setAttribute("x",P),T.setAttribute("y",k),T.setAttribute("width",R),T.setAttribute("height",M),m.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${k}" width="${R}" height="${M}"/>`)}l(this,hh)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=w(this,Gs,new eE({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(l(this,Gs)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,Gs)}render(){He("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!ou.has(u)){le(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&ou.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};xc=new WeakMap,hh=new WeakMap,Gs=new WeakMap,Ug=new WeakSet,Z_=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let ht=qT;class JG extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Wi,dl,$x,FI,Vx,BI;class MT extends ht{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});b(this,Wi);b(this,$x);b(this,Vx);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(C(this,$x,FI).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(C(this,Vx,BI).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&C(this,Wi,dl).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),C(this,Wi,dl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),C(this,Wi,dl).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),C(this,Wi,dl).call(this),!this._fieldObjects){le('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:i,refs:o,include:a}=s,c=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)f.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===a&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:m}=f;switch(d.push(m),f.type){case"text":{const g=f.defaultValue||"";u.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!ou.has(y)){le(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Wi=new WeakSet,dl=function(){this.container.setAttribute("data-internal-link","")},$x=new WeakSet,FI=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,i),!1},C(this,Wi,dl).call(this)},Vx=new WeakSet,BI=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),C(this,Wi,dl).call(this)};class ZG extends ht{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class mu extends ht{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Xt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[c,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Q.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||YG,i=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(CS*r))||1,h=u/d;o=Math.min(r,c(h/CS))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,c(u/CS))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=Q.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class eW extends mu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),ou.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(s,"value",S.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",S=>{const v=this.data.defaultFieldValue??"";s.value=d.userValue=v,d.formattedValue=null});let g=S=>{const{formattedValue:v}=d;v!=null&&(S.target.value=v),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var A;if(d.focused)return;const{target:x}=v;if(y&&(x.type=f,m&&(x.step=m)),d.userValue){const E=d.userValue;if(y)if(f==="time"){const T=new Date(E),P=[T.getHours(),T.getMinutes(),T.getSeconds()];x.value=P.map(k=>k.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-QG).toISOString().split(f==="date"?"T":".",1)[0];else x.value=E}d.lastCommittedValue=x.value,d.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(A){d.userValue=A.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),A.target.value=d.userValue},formattedValue(A){const{formattedValue:E}=A.detail;d.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E);const T={formattedValue:E};y&&(T.value=E),e.setValue(t,T)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var k;const{charLimit:E}=A.detail,{target:T}=A;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let P=d.userValue;!P||P.length<=E||(P=P.slice(0,E),T.value=d.userValue=P,e.setValue(t,{value:P}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),s.addEventListener("keydown",v=>{var E;d.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:A}=v.target;d.lastCommittedValue!==A&&(d.lastCommittedValue=A,d.userValue=A,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const S=g;g=null,s.addEventListener("blur",v=>{var E,T;if(!d.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{target:x}=v;let{value:A}=x;if(y){if(A&&f==="time"){const P=A.split(":").map(k=>parseInt(k,10));A=new Date(2e3,0,1,P[0],P[1],P[2]||0).valueOf(),x.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();x.type="text"}d.userValue=A,d.lastCommittedValue!==A&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),S(v)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",v=>{var M;d.lastCommittedValue=null;const{data:x,target:A}=v,{value:E,selectionStart:T,selectionEnd:P}=A;let k=T,R=P;switch(v.inputType){case"deleteWordBackward":{const L=E.substring(0,T).match(/\w*[^\w]*$/);L&&(k-=L[0].length);break}case"deleteWordForward":{const L=E.substring(T).match(/^[^\w]*\w*/);L&&(R+=L[0].length);break}case"deleteContentBackward":T===P&&(k-=1);break;case"deleteContentForward":T===P&&(R+=1);break}v.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:x||"",willCommit:!1,selStart:k,selEnd:R}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class tW extends mu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class nW extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return ou.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,s)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(s,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $I extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(ou.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===s;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sW extends MT{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class rW extends mu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");ou.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),r.append(h)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),o=()=>{d.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:m}=r;return m?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const m=f.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of r.options)g.selected=y.has(g.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){r.multiple=!0},remove(f){const m=r.options,y=f.detail.remove;m[y].selected=!1,r.remove(y),m.length>0&&Array.prototype.findIndex.call(m,S=>S.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:m,displayValue:y,exportValue:g}=f.detail.insert,S=r.children[m],v=document.createElement("option");v.textContent=y,v.value=g,S?S.before(v):r.append(v),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:m}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of m){const{displayValue:g,exportValue:S}=y,v=document.createElement("option");v.textContent=g,v.value=S,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const m=new Set(f.detail.indices);for(const y of f.target.options)y.selected=m.has(y.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{var m;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var Hg,tE;class eE extends ht{constructor(t){const{data:s,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&ht._hasPopupData(s)});b(this,Hg);if(this.elements=r,o&&ht._hasPopupData(s)){const a=this.popup=C(this,Hg,tE).call(this);for(const c of r)c.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=C(this,Hg,tE).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${AT}${i}`).join(",")),this.container}}Hg=new WeakSet,tE=function(){return new iW({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var hs,ha,zx,Ux,fh,ph,yt,Jr,fa,wc,mh,gh,Zr,fs,qi,Ki,Vt,Xi,pa,Gg,Yi,yh,Sc,ma,mn,ga,vh,Mv,Wg,nE,qg,sE,Kg,rE,bh,jv,Xg,iE,Hx,VI,Gx,zI,Wx,UI,qx,HI,xh,Lv,wh,Dv,Yg,oE;class iW{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){b(this,vh);b(this,Wg);b(this,qg);b(this,Kg);b(this,bh);b(this,Xg);b(this,Hx);b(this,Gx);b(this,Wx);b(this,qx);b(this,xh);b(this,wh);b(this,Yg);b(this,hs,null);b(this,ha,C(this,Wx,UI).bind(this));b(this,zx,C(this,Yg,oE).bind(this));b(this,Ux,C(this,wh,Dv).bind(this));b(this,fh,C(this,xh,Lv).bind(this));b(this,ph,null);b(this,yt,null);b(this,Jr,null);b(this,fa,null);b(this,wc,null);b(this,mh,null);b(this,gh,null);b(this,Zr,!1);b(this,fs,null);b(this,qi,null);b(this,Ki,null);b(this,Vt,null);b(this,Xi,null);b(this,pa,null);b(this,Gg,null);b(this,Yi,null);b(this,yh,null);b(this,Sc,null);b(this,ma,!1);b(this,mn,null);b(this,ga,null);w(this,yt,e),w(this,yh,r),w(this,Jr,o),w(this,Yi,a),w(this,mh,c),w(this,ph,t),w(this,Gg,u),w(this,gh,d),w(this,wc,s),w(this,hs,f),w(this,mn,s[0]),w(this,fa,cm.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(C(this,vh,Mv).call(this),l(this,yt).hidden=!0,h&&C(this,xh,Lv).call(this))}renderCommentButton(){if(l(this,Vt)||(l(this,Xi)||C(this,Wg,nE).call(this),!l(this,Xi)))return;const{signal:e}=w(this,qi,new AbortController),t=!!l(this,mn).extraPopupElement,s=()=>{l(this,hs).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{l(this,hs).toggleCommentPopup(this,!1,!0,!t)},i=()=>{l(this,hs).toggleCommentPopup(this,!1,!1)};if(t){w(this,Vt,l(this,mn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",l(this,ha),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=w(this,Vt,document.createElement("button"));o.className="annotationCommentButton";const a=l(this,mn).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,Kg,rE).call(this),C(this,qg,sE).call(this),o.addEventListener("keydown",l(this,ha),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=l(this,mn).commentData;return e?l(this,mh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=l(this,Vt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=l(this,mn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return l(this,Vt)}get comment(){return l(this,ga)||w(this,ga,l(this,mn).commentText),l(this,ga)}set comment(e){e!==this.comment&&(l(this,mn).commentText=w(this,ga,e))}get parentBoundingClientRect(){return l(this,mn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Vt)&&(l(this,Vt).classList.toggle("selected",e),l(this,Vt).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Vt).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,pa))return l(this,pa);const{x:e,y:t,height:s}=l(this,Vt).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=l(this,mn).layer.getBoundingClientRect();return[(e-r)/o,(t+s-i)/a]}set commentPopupPosition(e){w(this,pa,e)}hasDefaultPopupPosition(){return l(this,pa)===null}get commentButtonPosition(){return l(this,Xi)}get commentButtonWidth(){return l(this,Vt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=l(this,pa)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:i,y:o,width:a,height:c}=r;l(this,hs).showDialog(null,this,i+t*a,o+s*c,{...e,parentDimensions:r})}render(){var s,r;if(l(this,fs))return;const e=w(this,fs,document.createElement("div"));if(e.className="popup",l(this,ph)){const i=e.style.outlineColor=Q.makeHexColor(...l(this,ph));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=l(this,yh))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=l(this,yh)}if(e.append(t),l(this,fa)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,fa).valueOf()})),i.dateTime=l(this,fa).toISOString(),t.append(i)}ET({html:l(this,bh,jv)||l(this,Jr).str,dir:(r=l(this,Jr))==null?void 0:r.dir,className:"popupContent"},e),l(this,yt).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(l(this,hs)){s?(this.remove(),w(this,ga,null)):t&&(t.deleted?this.remove():(C(this,Kg,rE).call(this),w(this,ga,t.text))),e&&(w(this,Xi,null),C(this,Wg,nE).call(this),C(this,qg,sE).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}C(this,vh,Mv).call(this),l(this,Sc)||w(this,Sc,{contentsObj:l(this,Jr),richText:l(this,Yi)}),e&&w(this,Ki,null),t&&t.text&&(w(this,Yi,C(this,Gx,zI).call(this,t.text)),w(this,fa,cm.toDateObject(t.date)),w(this,Jr,null)),(r=l(this,fs))==null||r.remove(),w(this,fs,null)}resetEdited(){var e;l(this,Sc)&&({contentsObj:Rt(this,Jr)._,richText:Rt(this,Yi)._}=l(this,Sc),w(this,Sc,null),(e=l(this,fs))==null||e.remove(),w(this,fs,null),w(this,Ki,null))}remove(){var e,t,s;if((e=l(this,qi))==null||e.abort(),w(this,qi,null),(t=l(this,fs))==null||t.remove(),w(this,fs,null),w(this,ma,!1),w(this,Zr,!1),(s=l(this,Vt))==null||s.remove(),w(this,Vt,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){w(this,ma,this.isVisible),l(this,ma)&&(l(this,yt).hidden=!0)}maybeShow(){l(this,hs)||(C(this,vh,Mv).call(this),l(this,ma)&&(l(this,fs)||C(this,wh,Dv).call(this),w(this,ma,!1),l(this,yt).hidden=!1))}get isVisible(){return l(this,hs)?!1:l(this,yt).hidden===!1}}hs=new WeakMap,ha=new WeakMap,zx=new WeakMap,Ux=new WeakMap,fh=new WeakMap,ph=new WeakMap,yt=new WeakMap,Jr=new WeakMap,fa=new WeakMap,wc=new WeakMap,mh=new WeakMap,gh=new WeakMap,Zr=new WeakMap,fs=new WeakMap,qi=new WeakMap,Ki=new WeakMap,Vt=new WeakMap,Xi=new WeakMap,pa=new WeakMap,Gg=new WeakMap,Yi=new WeakMap,yh=new WeakMap,Sc=new WeakMap,ma=new WeakMap,mn=new WeakMap,ga=new WeakMap,vh=new WeakSet,Mv=function(){var t;if(l(this,qi))return;w(this,qi,new AbortController);const{signal:e}=l(this,qi);for(const s of this.trigger)s.addEventListener("click",l(this,fh),{signal:e}),s.addEventListener("pointerenter",l(this,Ux),{signal:e}),s.addEventListener("pointerleave",l(this,zx),{signal:e}),s.classList.add("popupTriggerArea");for(const s of l(this,wc))(t=s.container)==null||t.addEventListener("keydown",l(this,ha),{signal:e})},Wg=new WeakSet,nE=function(){const e=l(this,wc).find(t=>t.hasCommentButton);e&&w(this,Xi,e._normalizePoint(e.commentButtonPosition))},qg=new WeakSet,sE=function(){if(l(this,mn).extraPopupElement&&!l(this,mn).editor)return;this.renderCommentButton();const[e,t]=l(this,Xi),{style:s}=l(this,Vt);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},Kg=new WeakSet,rE=function(){l(this,mn).extraPopupElement||(this.renderCommentButton(),l(this,Vt).style.backgroundColor=this.commentButtonColor||"")},bh=new WeakSet,jv=function(){const e=l(this,Yi),t=l(this,Jr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,Yi).html||null},Xg=new WeakSet,iE=function(){var e,t,s;return((s=(t=(e=l(this,bh,jv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},Hx=new WeakSet,VI=function(){var e,t,s;return((s=(t=(e=l(this,bh,jv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},Gx=new WeakSet,zI=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,Hx,VI),fontSize:l(this,Xg,iE)?`calc(${l(this,Xg,iE)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},Wx=new WeakSet,UI=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,Zr))&&C(this,xh,Lv).call(this)},qx=new WeakSet,HI=function(){if(l(this,Ki)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=l(this,mh);let o=!!l(this,gh),a=o?l(this,gh):l(this,Gg);for(const y of l(this,wc))if(!a||Q.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const c=Q.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=5,d=o?a[2]-a[0]+u:0,h=c[0]+d,f=c[1];w(this,Ki,[100*(h-r)/t,100*(f-i)/s]);const{style:m}=l(this,yt);m.left=`${l(this,Ki)[0]}%`,m.top=`${l(this,Ki)[1]}%`},xh=new WeakSet,Lv=function(){if(l(this,hs)){l(this,hs).toggleCommentPopup(this,!1);return}w(this,Zr,!l(this,Zr)),l(this,Zr)?(C(this,wh,Dv).call(this),l(this,yt).addEventListener("click",l(this,fh)),l(this,yt).addEventListener("keydown",l(this,ha))):(C(this,Yg,oE).call(this),l(this,yt).removeEventListener("click",l(this,fh)),l(this,yt).removeEventListener("keydown",l(this,ha)))},wh=new WeakSet,Dv=function(){l(this,fs)||this.render(),this.isVisible?l(this,Zr)&&l(this,yt).classList.add("focused"):(C(this,qx,HI).call(this),l(this,yt).hidden=!1,l(this,yt).style.zIndex=parseInt(l(this,yt).style.zIndex)+1e3)},Yg=new WeakSet,oE=function(){l(this,yt).classList.remove("focused"),!(l(this,Zr)||!this.isVisible)&&(l(this,yt).hidden=!0,l(this,yt).style.zIndex=parseInt(l(this,yt).style.zIndex)-1e3)};class GI extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ae.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Qg;class oW extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Qg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=w(this,Qg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Qg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qg=new WeakMap;var Jg;class aW extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Jg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=w(this,Jg,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Jg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jg=new WeakMap;var Zg;class lW extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,Zg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=w(this,Zg,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,Zg)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zg=new WeakMap;var e0;class WI extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,e0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=s.length;h<f;h+=2){const m=s[h]-t[0],y=t[3]-s[h+1];u.push(`${m},${y}`)}u=u.join(" ");const d=w(this,e0,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,e0)}addHighlightArea(){this.container.classList.add("highlightArea")}}e0=new WeakMap;class cW extends WI{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class uW extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var t0,Ac,n0,aE;class jT extends ht{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});b(this,n0);b(this,t0,null);b(this,Ac,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ae.HIGHLIGHT:ae.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:c,height:u}=C(this,n0,aE).call(this,s,t),d=this.svgFactory.create(c,u,!0),h=w(this,t0,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,m=r.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);l(this,Ac).push(y),y.setAttribute("points",r[f].join(",")),h.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=l(this,t0);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,c=l(this,Ac).length;a<c;a++)l(this,Ac)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:c,height:u}=C(this,n0,aE).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Ac)}addHighlightArea(){this.container.classList.add("highlightArea")}}t0=new WeakMap,Ac=new WeakMap,n0=new WeakSet,aE=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class qI extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ae.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class dW extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class hW extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class fW extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class KI extends ht{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ae.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var s0,r0,lE;class pW extends ht{constructor(t){var r;super(t,{isRenderable:!0});b(this,r0);b(this,s0,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",C(this,r0,lE).bind(this)),w(this,s0,r);const{isMac:i}=Xt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&C(this,r0,lE).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,s0)}addHighlightArea(){this.container.classList.add("highlightArea")}}s0=new WeakMap,r0=new WeakSet,lE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Sh,_c,Ah,ya,i0,Ec,o0,cE,a0,uE,l0;let LT=(l0=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:d}){b(this,o0);b(this,a0);b(this,Sh,null);b(this,_c,null);b(this,Ah,null);b(this,ya,new Map);b(this,i0,null);b(this,Ec,null);this.div=e,w(this,Sh,t),w(this,_c,s),w(this,i0,a||null),w(this,Ec,u||null),w(this,Ah,d||new CT),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return l(this,ya).size>0}async render(e){var o,a,c;const{annotations:t}=e,s=this.div;Ya(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:l(this,Ec),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new fm,annotationStorage:l(this,Ah),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===xt.POPUP;if(d){const m=r.get(u.id);if(!m)continue;i.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;i.data=u;const h=lR.create(i);if(!h.isRenderable)continue;if(!d&&u.popupRef){const m=r.get(u.popupRef);m?m.push(h):r.set(u.popupRef,[h])}const f=h.render();u.hidden&&(f.style.visibility="hidden"),await C(this,o0,cE).call(this,f,u.id,i.elements),(a=(o=h.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),h._isEditable&&(l(this,ya).set(h.data.id,h),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(h))}C(this,a0,uE).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:l(this,Ec),svgFactory:new fm,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=l0._defaultBorderStyle),t.data=s;const r=lR.create(t);if(!r.isRenderable)continue;const i=r.render();await C(this,o0,cE).call(this,i,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Ya(t,{rotation:e.rotation}),C(this,a0,uE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,ya).values())}getEditableAnnotation(e){return l(this,ya).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:s,rotation:r}=e,i=new JG({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,Ec),annotationStorage:l(this,Ah)}),o=i.render();return t.append(o),(a=l(this,Sh))==null||a.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return he(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Su.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Sh=new WeakMap,_c=new WeakMap,Ah=new WeakMap,ya=new WeakMap,i0=new WeakMap,Ec=new WeakMap,o0=new WeakSet,cE=async function(e,t,s){var a,c;const r=e.firstChild||e,i=r.id=`${AT}${t}`,o=await((a=l(this,i0))==null?void 0:a.getAriaAttributes(i));if(o)for(const[u,d]of o)r.setAttribute(u,d);s?s.at(-1).container.after(e):(this.div.append(e),(c=l(this,Sh))==null||c.moveElementInDOM(this.div,e,r,!1))},a0=new WeakSet,uE=function(){var t;if(!l(this,_c))return;const e=this.div;for(const[s,r]of l(this,_c)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=l(this,ya).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}l(this,_c).clear()},l0);const Zy=/\r\n?|\n/g;var ps,c0,Cc,ms,Kx,XI,Xx,YI,Yx,QI,_h,Iv,Eh,Ov,Ch,Fv,Qx,JI,u0,hE,Jx,ZI;const qe=class qe extends Ye{constructor(t){super({...t,name:"freeTextEditor"});b(this,Kx);b(this,Xx);b(this,Yx);b(this,_h);b(this,Ch);b(this,Qx);b(this,Jx);b(this,ps,"");b(this,c0,`${this.id}-editor`);b(this,Cc,null);b(this,ms,void 0);U(this,"_colorPicker",null);this.color=t.color||qe._defaultColor||Ye._defaultLineColor,w(this,ms,t.fontSize||qe._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=qe.prototype,s=o=>o.isEmpty(),r=Qa.TRANSLATE_SMALL,i=Qa.TRANSLATE_BIG;return he(this,"_keyboardManager",new ay([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){Ye.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case be.FREETEXT_SIZE:qe._defaultFontSize=s;break;case be.FREETEXT_COLOR:qe._defaultColor=s;break}}updateParams(t,s){switch(t){case be.FREETEXT_SIZE:C(this,Kx,XI).call(this,s);break;case be.FREETEXT_COLOR:C(this,Xx,YI).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[be.FREETEXT_SIZE,qe._defaultFontSize],[be.FREETEXT_COLOR,qe._defaultColor||Ye._defaultLineColor]]}get propertiesToUpdate(){return[[be.FREETEXT_SIZE,l(this,ms)],[be.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Fb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return be.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-qe._internalPadding*t,-(qe._internalPadding+l(this,ms))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),w(this,Cc,new AbortController);const t=this._uiManager.combinedSignal(l(this,Cc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,c0)),this._isDraggable=!0,(t=l(this,Cc))==null||t.abort(),w(this,Cc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,ps),s=w(this,ps,C(this,Yx,QI).call(this).trimEnd());if(t===s)return;const r=i=>{if(w(this,ps,i),!i){this.remove();return}C(this,Ch,Fv).call(this),this._uiManager.rebuild(this),C(this,_h,Iv).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),C(this,_h,Iv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){qe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,c0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,ms)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(a[0]-f)/d,g=s+this.height-(a[1]-m)/h;break;case 90:y=t+(a[0]-f)/d,g=s-(a[1]-m)/h,[c,u]=[u,-c];break;case 180:y=t-this.width+(a[0]-f)/d,g=s-(a[1]-m)/h,[c,u]=[-c,-u];break;case 270:y=t+(a[0]-f-this.height*h)/d,g=s+(a[1]-m-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(y*i,g*o,c,u)}else this._moveAfterPaste(t,s);C(this,Ch,Fv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,S;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=C(y=qe,u0,hE).call(y,s.getData("text")||"").replaceAll(Zy,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(Zy,"")),v!==this.editorDiv){let x=d;for(const A of this.editorDiv.childNodes){if(A===v){x=h;continue}x.push(C(g=qe,Eh,Ov).call(g,A))}}d.push(c.nodeValue.slice(0,u).replaceAll(Zy,""))}else if(c===this.editorDiv){let v=d,x=0;for(const A of this.editorDiv.childNodes)x++===u&&(v=h),v.push(C(S=qe,Eh,Ov).call(S,A))}w(this,ps,`${d.join(`
`)}${i}${h.join(`
`)}`),C(this,Ch,Fv).call(this);const f=new Range;let m=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(m<=x){f.setStart(v,m),f.setEnd(v,m);break}m-=x}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=qe._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var a;let i=null;if(t instanceof GI){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:m,richText:y,contentsObj:g,creationDate:S,modificationDate:v},textContent:x,textPosition:A,parent:{page:{pageNumber:E}}}=t;if(!x||x.length===0)return null;i=t={annotationType:ae.FREETEXT,color:Array.from(u),fontSize:c,value:x.join(`
`),position:A,pageIndex:E-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(g==null?void 0:g.str)||null,richText:y,creationDate:S,modificationDate:v}}const o=await super.deserialize(t,s,r);return w(o,ms,t.fontSize),o.color=Q.makeHexColor(...t.color),w(o,ps,C(a=qe,u0,hE).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:l(this,ms),value:C(this,Qx,JI).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!C(this,Jx,ZI).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${l(this,ms)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of l(this,ps).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,ps)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ps=new WeakMap,c0=new WeakMap,Cc=new WeakMap,ms=new WeakMap,Kx=new WeakSet,XI=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-l(this,ms))*this.parentScale),w(this,ms,i),C(this,_h,Iv).call(this)},r=l(this,ms);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:be.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Xx=new WeakSet,YI=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:be.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Yx=new WeakSet,QI=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(C(r=qe,Eh,Ov).call(r,i)),s=i);return t.join(`
`)},_h=new WeakSet,Iv=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Eh=new WeakSet,Ov=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Zy,"")},Ch=new WeakSet,Fv=function(){if(this.editorDiv.replaceChildren(),!!l(this,ps))for(const t of l(this,ps).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},Qx=new WeakSet,JI=function(){return l(this,ps).replaceAll(""," ")},u0=new WeakSet,hE=function(t){return t.replaceAll(" ","")},Jx=new WeakSet,ZI=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,c)=>a!==i[c])||t.pageIndex!==o},b(qe,Eh),b(qe,u0),U(qe,"_freeTextDefaultContent",""),U(qe,"_internalPadding",0),U(qe,"_defaultColor",null),U(qe,"_defaultFontSize",10),U(qe,"_type","freetext"),U(qe,"_editorType",ae.FREETEXT);let dE=qe;class J{toSVGPath(){He("Abstract method `toSVGPath` must be implemented.")}get box(){He("Abstract getter `box` must be implemented.")}serialize(e,t){He("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}U(J,"PRECISION",1e-4);var gs,gr,Th,kh,ei,pe,Tc,kc,d0,h0,Ph,Rh,va,f0,Zx,ew,Pc,gp,tw,eO,nw,tO,sw,nO,rw,sO,iw,rO,ow,iO;const xi=class xi{constructor({x:e,y:t},s,r,i,o,a=0){b(this,Pc);b(this,tw);b(this,nw);b(this,sw);b(this,rw);b(this,iw);b(this,ow);b(this,gs,void 0);b(this,gr,[]);b(this,Th,void 0);b(this,kh,void 0);b(this,ei,[]);b(this,pe,new Float32Array(18));b(this,Tc,void 0);b(this,kc,void 0);b(this,d0,void 0);b(this,h0,void 0);b(this,Ph,void 0);b(this,Rh,void 0);b(this,va,[]);w(this,gs,s),w(this,Rh,i*r),w(this,kh,o),l(this,pe).set([NaN,NaN,NaN,NaN,e,t],6),w(this,Th,a),w(this,h0,l(xi,f0)*r),w(this,d0,l(xi,ew)*r),w(this,Ph,r),l(this,va).push(e,t)}isEmpty(){return isNaN(l(this,pe)[8])}add({x:e,y:t}){var M;w(this,Tc,e),w(this,kc,t);const[s,r,i,o]=l(this,gs);let[a,c,u,d]=l(this,pe).subarray(8,12);const h=e-u,f=t-d,m=Math.hypot(h,f);if(m<l(this,d0))return!1;const y=m-l(this,h0),g=y/m,S=g*h,v=g*f;let x=a,A=c;a=u,c=d,u+=S,d+=v,(M=l(this,va))==null||M.push(e,t);const E=-v/y,T=S/y,P=E*l(this,Rh),k=T*l(this,Rh);return l(this,pe).set(l(this,pe).subarray(2,8),0),l(this,pe).set([u+P,d+k],4),l(this,pe).set(l(this,pe).subarray(14,18),12),l(this,pe).set([u-P,d-k],16),isNaN(l(this,pe)[6])?(l(this,ei).length===0&&(l(this,pe).set([a+P,c+k],2),l(this,ei).push(NaN,NaN,NaN,NaN,(a+P-s)/i,(c+k-r)/o),l(this,pe).set([a-P,c-k],14),l(this,gr).push(NaN,NaN,NaN,NaN,(a-P-s)/i,(c-k-r)/o)),l(this,pe).set([x,A,a,c,u,d],6),!this.isEmpty()):(l(this,pe).set([x,A,a,c,u,d],6),Math.abs(Math.atan2(A-c,x-a)-Math.atan2(v,S))<Math.PI/2?([a,c,u,d]=l(this,pe).subarray(2,6),l(this,ei).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/i,((c+d)/2-r)/o),[a,c,x,A]=l(this,pe).subarray(14,18),l(this,gr).push(NaN,NaN,NaN,NaN,((x+a)/2-s)/i,((A+c)/2-r)/o),!0):([x,A,a,c,u,d]=l(this,pe).subarray(0,6),l(this,ei).push(((x+5*a)/6-s)/i,((A+5*c)/6-r)/o,((5*a+u)/6-s)/i,((5*c+d)/6-r)/o,((a+u)/2-s)/i,((c+d)/2-r)/o),[u,d,a,c,x,A]=l(this,pe).subarray(12,18),l(this,gr).push(((x+5*a)/6-s)/i,((A+5*c)/6-r)/o,((5*a+u)/6-s)/i,((5*c+d)/6-r)/o,((a+u)/2-s)/i,((c+d)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,ei),t=l(this,gr);if(isNaN(l(this,pe)[6])&&!this.isEmpty())return C(this,tw,eO).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);C(this,sw,nO).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return C(this,nw,tO).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new oO(e,t,s,r,i,o)}getOutlines(){var h;const e=l(this,ei),t=l(this,gr),s=l(this,pe),[r,i,o,a]=l(this,gs),c=new Float32Array((((h=l(this,va))==null?void 0:h.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(l(this,va)[f]-r)/o,c[f+1]=(l(this,va)[f+1]-i)/a;if(c[c.length-2]=(l(this,Tc)-r)/o,c[c.length-1]=(l(this,kc)-i)/a,isNaN(s[6])&&!this.isEmpty())return C(this,rw,sO).call(this,c);const u=new Float32Array(l(this,ei).length+24+l(this,gr).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=C(this,ow,iO).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+m],u[d+1]=t[f+m+1],d+=2}return C(this,iw,rO).call(this,u,d),this.newFreeDrawOutline(u,c,l(this,gs),l(this,Ph),l(this,Th),l(this,kh))}};gs=new WeakMap,gr=new WeakMap,Th=new WeakMap,kh=new WeakMap,ei=new WeakMap,pe=new WeakMap,Tc=new WeakMap,kc=new WeakMap,d0=new WeakMap,h0=new WeakMap,Ph=new WeakMap,Rh=new WeakMap,va=new WeakMap,f0=new WeakMap,Zx=new WeakMap,ew=new WeakMap,Pc=new WeakSet,gp=function(){const e=l(this,pe).subarray(4,6),t=l(this,pe).subarray(16,18),[s,r,i,o]=l(this,gs);return[(l(this,Tc)+(e[0]-t[0])/2-s)/i,(l(this,kc)+(e[1]-t[1])/2-r)/o,(l(this,Tc)+(t[0]-e[0])/2-s)/i,(l(this,kc)+(t[1]-e[1])/2-r)/o]},tw=new WeakSet,eO=function(){const[e,t,s,r]=l(this,gs),[i,o,a,c]=C(this,Pc,gp).call(this);return`M${(l(this,pe)[2]-e)/s} ${(l(this,pe)[3]-t)/r} L${(l(this,pe)[4]-e)/s} ${(l(this,pe)[5]-t)/r} L${i} ${o} L${a} ${c} L${(l(this,pe)[16]-e)/s} ${(l(this,pe)[17]-t)/r} L${(l(this,pe)[14]-e)/s} ${(l(this,pe)[15]-t)/r} Z`},nw=new WeakSet,tO=function(e){const t=l(this,gr);e.push(`L${t[4]} ${t[5]} Z`)},sw=new WeakSet,nO=function(e){const[t,s,r,i]=l(this,gs),o=l(this,pe).subarray(4,6),a=l(this,pe).subarray(16,18),[c,u,d,h]=C(this,Pc,gp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${c} ${u} L${d} ${h} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},rw=new WeakSet,sO=function(e){const t=l(this,pe),[s,r,i,o]=l(this,gs),[a,c,u,d]=C(this,Pc,gp).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(h,e,l(this,gs),l(this,Ph),l(this,Th),l(this,kh))},iw=new WeakSet,rO=function(e,t){const s=l(this,gr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},ow=new WeakSet,iO=function(e,t){const s=l(this,pe).subarray(4,6),r=l(this,pe).subarray(16,18),[i,o,a,c]=l(this,gs),[u,d,h,f]=C(this,Pc,gp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/c],t),t+=24},b(xi,f0,8),b(xi,Zx,2),b(xi,ew,l(xi,f0)+l(xi,Zx));let Bb=xi;var Nh,Rc,Qi,p0,ys,m0,St,aw,aO;class oO extends J{constructor(t,s,r,i,o,a){super();b(this,aw);b(this,Nh,void 0);b(this,Rc,new Float32Array(4));b(this,Qi,void 0);b(this,p0,void 0);b(this,ys,void 0);b(this,m0,void 0);b(this,St,void 0);w(this,St,t),w(this,ys,s),w(this,Nh,r),w(this,m0,i),w(this,Qi,o),w(this,p0,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,aw,aO).call(this,a);const[c,u,d,h]=l(this,Rc);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,m=s.length;f<m;f+=2)s[f]=(s[f]-c)/d,s[f+1]=(s[f+1]-u)/h}toSVGPath(){const t=[`M${l(this,St)[4]} ${l(this,St)[5]}`];for(let s=6,r=l(this,St).length;s<r;s+=6){if(isNaN(l(this,St)[s])){t.push(`L${l(this,St)[s+4]} ${l(this,St)[s+5]}`);continue}t.push(`C${l(this,St)[s]} ${l(this,St)[s+1]} ${l(this,St)[s+2]} ${l(this,St)[s+3]} ${l(this,St)[s+4]} ${l(this,St)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,c=i-s;let u,d;switch(o){case 0:u=J._rescale(l(this,St),t,i,a,-c),d=J._rescale(l(this,ys),t,i,a,-c);break;case 90:u=J._rescaleAndSwap(l(this,St),t,s,a,c),d=J._rescaleAndSwap(l(this,ys),t,s,a,c);break;case 180:u=J._rescale(l(this,St),r,s,-a,c),d=J._rescale(l(this,ys),r,s,-a,c);break;case 270:u=J._rescaleAndSwap(l(this,St),r,i,-a,-c),d=J._rescaleAndSwap(l(this,ys),r,i,-a,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return l(this,Rc)}newOutliner(t,s,r,i,o,a=0){return new Bb(t,s,r,i,o,a)}getNewOutline(t,s){const[r,i,o,a]=l(this,Rc),[c,u,d,h]=l(this,Nh),f=o*d,m=a*h,y=r*d+c,g=i*h+u,S=this.newOutliner({x:l(this,ys)[0]*f+y,y:l(this,ys)[1]*m+g},l(this,Nh),l(this,m0),t,l(this,p0),s??l(this,Qi));for(let v=2;v<l(this,ys).length;v+=2)S.add({x:l(this,ys)[v]*f+y,y:l(this,ys)[v+1]*m+g});return S.getOutlines()}}Nh=new WeakMap,Rc=new WeakMap,Qi=new WeakMap,p0=new WeakMap,ys=new WeakMap,m0=new WeakMap,St=new WeakMap,aw=new WeakSet,aO=function(t){const s=l(this,St);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,c=i,u=r,d=i;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,g=s.length;y<g;y+=6){const S=s[y+4],v=s[y+5];isNaN(s[y])?(Q.pointBoundingBox(S,v,o),c>v?(a=S,c=v):c===v&&(a=h(a,S)),d<v?(u=S,d=v):d===v&&(u=h(u,S))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,Q.bezierBoundingBox(r,i,...s.slice(y,y+6),f),Q.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(a=f[0],c=f[1]):c===f[1]&&(a=h(a,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),r=S,i=v}const m=l(this,Rc);m[0]=o[0]-l(this,Qi),m[1]=o[1]-l(this,Qi),m[2]=o[2]-o[0]+2*l(this,Qi),m[3]=o[3]-o[1]+2*l(this,Qi),this.firstPoint=[a,c],this.lastPoint=[u,d]};var g0,y0,v0,ba,yr,lw,lO,Mh,Bv,cw,cO,uw,uO,b0,pE;class fE{constructor(e,t=0,s=0,r=!0){b(this,lw);b(this,Mh);b(this,cw);b(this,uw);b(this,b0);b(this,g0,void 0);b(this,y0,void 0);b(this,v0,void 0);b(this,ba,[]);b(this,yr,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:S,y:v,width:x,height:A}of e){const E=Math.floor((S-t)/a)*a,T=Math.ceil((S+x+t)/a)*a,P=Math.floor((v-t)/a)*a,k=Math.ceil((v+A+t)/a)*a,R=[E,P,k,!0],M=[T,P,k,!1];l(this,ba).push(R,M),Q.rectBoundingBox(E,P,T,k,i)}const c=i[2]-i[0]+2*s,u=i[3]-i[1]+2*s,d=i[0]-s,h=i[1]-s;let f=r?-1/0:1/0,m=1/0;const y=l(this,ba).at(r?-1:-2),g=[y[0],y[2]];for(const S of l(this,ba)){const[v,x,A,E]=S;!E&&r?x<m?(m=x,f=v):x===m&&(f=Math.max(f,v)):E&&!r&&(x<m?(m=x,f=v):x===m&&(f=Math.min(f,v))),S[0]=(v-d)/c,S[1]=(x-h)/u,S[2]=(A-h)/u}w(this,g0,new Float32Array([d,h,c,u])),w(this,y0,[f,m]),w(this,v0,g)}getOutlines(){l(this,ba).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of l(this,ba))t[3]?(e.push(...C(this,b0,pE).call(this,t)),C(this,cw,cO).call(this,t)):(C(this,uw,uO).call(this,t),e.push(...C(this,b0,pE).call(this,t)));return C(this,lw,lO).call(this,e)}}g0=new WeakMap,y0=new WeakMap,v0=new WeakMap,ba=new WeakMap,yr=new WeakMap,lw=new WeakSet,lO=function(e){const t=[],s=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,c,u,d,h]=o;s.delete(o);let f=a,m=c;for(i=[a,u],r.push(i);;){let y;if(s.has(d))y=d;else if(s.has(h))y=h;else break;s.delete(y),[a,c,u,d,h]=y,f!==a&&(i.push(f,m,a,m===c?c:u),f=a),m=m===c?u:c}i.push(f,m)}return new mW(r,l(this,g0),l(this,y0),l(this,v0))},Mh=new WeakSet,Bv=function(e){const t=l(this,yr);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},cw=new WeakSet,cO=function([,e,t]){const s=C(this,Mh,Bv).call(this,e);l(this,yr).splice(s,0,[e,t])},uw=new WeakSet,uO=function([,e,t]){const s=C(this,Mh,Bv).call(this,e);for(let r=s;r<l(this,yr).length;r++){const[i,o]=l(this,yr)[r];if(i!==e)break;if(i===e&&o===t){l(this,yr).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=l(this,yr)[r];if(i!==e)break;if(i===e&&o===t){l(this,yr).splice(r,1);return}}},b0=new WeakSet,pE=function(e){const[t,s,r]=e,i=[[t,s,r]],o=C(this,Mh,Bv).call(this,r);for(let a=0;a<o;a++){const[c,u]=l(this,yr)[a];for(let d=0,h=i.length;d<h;d++){const[,f,m]=i[d];if(!(u<=f||m<=c)){if(f>=c){if(m>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=c,m>u&&i.push([t,u,m])}}}return i};var x0,jh;class mW extends J{constructor(t,s,r,i){super();b(this,x0,void 0);b(this,jh,void 0);w(this,jh,t),w(this,x0,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of l(this,jh)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],c=r-t,u=i-s;for(const d of l(this,jh)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return l(this,x0)}get classNamesForOutlining(){return["highlightOutline"]}}x0=new WeakMap,jh=new WeakMap;class mE extends Bb{newFreeDrawOutline(e,t,s,r,i,o){return new gW(e,t,s,r,i,o)}}class gW extends oO{newOutliner(e,t,s,r,i,o=0){return new mE(e,t,s,r,i,o)}}var Lh,w0,Ji,Nc,S0,Wn,A0,_0,Mc,vs,bs,tn,Dh,Ih,gn,Oh,Ws,E0,C0,gE,Fh,$v,dw,dO,hw,hO,fw,fO,T0,yE,Zi,hl,xa,ku,pw,pO,Bh,Vv,$h,zv,mw,mO,gw,gO,yw,yO,vw,vO,bw,bO;const Ee=class Ee extends Ye{constructor(t){super({...t,name:"highlightEditor"});b(this,C0);b(this,Fh);b(this,dw);b(this,hw);b(this,fw);b(this,T0);b(this,Zi);b(this,pw);b(this,Bh);b(this,$h);b(this,mw);b(this,gw);b(this,bw);b(this,Lh,null);b(this,w0,0);b(this,Ji,void 0);b(this,Nc,null);b(this,S0,null);b(this,Wn,null);b(this,A0,null);b(this,_0,0);b(this,Mc,null);b(this,vs,null);b(this,bs,null);b(this,tn,!1);b(this,Dh,null);b(this,Ih,null);b(this,gn,null);b(this,Oh,"");b(this,Ws,void 0);b(this,E0,"");this.color=t.color||Ee._defaultColor,w(this,Ws,t.thickness||Ee._defaultThickness),this.opacity=t.opacity||Ee._defaultOpacity,w(this,Ji,t.boxes||null),w(this,E0,t.methodOfCreation||""),w(this,Oh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(w(this,tn,!0),C(this,Fh,$v).call(this,t),C(this,Zi,hl).call(this)):l(this,Ji)&&(w(this,Lh,t.anchorNode),w(this,w0,t.anchorOffset),w(this,A0,t.focusNode),w(this,_0,t.focusOffset),C(this,C0,gE).call(this),C(this,Zi,hl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ee.prototype;return he(this,"_keyboardManager",new ay([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,tn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,Ws),methodOfCreation:l(this,E0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;Ye.initialize(t,s),Ee._defaultColor||(Ee._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case be.HIGHLIGHT_COLOR:Ee._defaultColor=s;break;case be.HIGHLIGHT_THICKNESS:Ee._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return l(this,Ih)}get commentButtonPosition(){return l(this,Dh)}updateParams(t,s){switch(t){case be.HIGHLIGHT_COLOR:C(this,dw,dO).call(this,s);break;case be.HIGHLIGHT_THICKNESS:C(this,hw,hO).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[be.HIGHLIGHT_COLOR,Ee._defaultColor],[be.HIGHLIGHT_THICKNESS,Ee._defaultThickness]]}get propertiesToUpdate(){return[[be.HIGHLIGHT_COLOR,this.color||Ee._defaultColor],[be.HIGHLIGHT_THICKNESS,l(this,Ws)||Ee._defaultThickness],[be.HIGHLIGHT_FREE,l(this,tn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(l(this,bs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=l(this,S0))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",w(this,S0,new hm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,$h,zv).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,C(this,$h,zv).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,T0,yE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Zi,hl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?C(this,T0,yE).call(this):t&&(C(this,Zi,hl).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;l(this,tn)?(t=(t-this.rotation+360)%360,r=C(i=Ee,xa,ku).call(i,l(this,vs).box,t)):r=C(o=Ee,xa,ku).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(l(this,bs),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(l(this,gn),{bbox:C(a=Ee,xa,ku).call(a,l(this,Wn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,Oh)&&(t.setAttribute("aria-label",l(this,Oh)),t.setAttribute("role","mark")),l(this,tn)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,pw,pO).bind(this),{signal:this._uiManager._signal});const s=w(this,Mc,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,Nc),this.setDims(this.width,this.height),$D(this,l(this,Mc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,gn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,gn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,Bh,Vv).call(this,!0);break;case 1:case 3:C(this,Bh,Vv).call(this,!1);break}}select(){var t;super.select(),l(this,gn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,gn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,gn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,gn),{rootClass:{selected:!1}}),l(this,tn)||C(this,Bh,Vv).call(this,!1))}get _mustFixPosition(){return!l(this,tn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,bs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,gn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:c,width:u,height:d}=r.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),m=y=>{h.abort(),C(this,vw,vO).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",ct,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Rs,{signal:f}),r.addEventListener("pointermove",C(this,yw,yO).bind(this,t),{signal:f}),this._freeHighlight=new mE({x:i,y:o},[a,c,u,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var g,S,v,x;let i=null;if(t instanceof qI){const{data:{quadPoints:A,rect:E,rotation:T,id:P,color:k,opacity:R,popupRef:M,richText:L,contentsObj:B,creationDate:D,modificationDate:z},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ae.HIGHLIGHT,color:Array.from(k),opacity:R,quadPoints:A,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:M,richText:L,comment:(B==null?void 0:B.str)||null,creationDate:D,modificationDate:z}}else if(t instanceof jT){const{data:{inkLists:A,rect:E,rotation:T,id:P,color:k,borderStyle:{rawWidth:R},popupRef:M,richText:L,contentsObj:B,creationDate:D,modificationDate:z},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ae.HIGHLIGHT,color:Array.from(k),thickness:R,inkLists:A,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:T,annotationElementId:P,id:P,deleted:!1,popupRef:M,richText:L,comment:(B==null?void 0:B.str)||null,creationDate:D,modificationDate:z}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,d=await super.deserialize(t,s,r);d.color=Q.makeHexColor(...o),d.opacity=u||1,c&&w(d,Ws,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[m,y]=d.pageTranslation;if(a){const A=w(d,Ji,[]);for(let E=0;E<a.length;E+=8)A.push({x:(a[E]-m)/h,y:1-(a[E+1]-y)/f,width:(a[E+2]-a[E])/h,height:(a[E+1]-a[E+5])/f});C(g=d,C0,gE).call(g),C(S=d,Zi,hl).call(S),d.rotate(d.rotation)}else if(c){w(d,tn,!0);const A=c[0],E={x:A[0]-m,y:f-(A[1]-y)},T=new mE(E,[0,0,h,f],1,l(d,Ws)/2,!0,.001);for(let R=0,M=A.length;R<M;R+=2)E.x=A[R]-m,E.y=f-(A[R+1]-y),T.add(E);const{id:P,clipPathId:k}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);C(v=d,Fh,$v).call(v,{highlightOutlines:T.getOutlines(),highlightId:P,clipPathId:k}),C(x=d,Zi,hl).call(x),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=Ye._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:l(this,Ws),quadPoints:C(this,mw,mO).call(this),outlines:C(this,gw,gO).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!C(this,bw,bO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Lh=new WeakMap,w0=new WeakMap,Ji=new WeakMap,Nc=new WeakMap,S0=new WeakMap,Wn=new WeakMap,A0=new WeakMap,_0=new WeakMap,Mc=new WeakMap,vs=new WeakMap,bs=new WeakMap,tn=new WeakMap,Dh=new WeakMap,Ih=new WeakMap,gn=new WeakMap,Oh=new WeakMap,Ws=new WeakMap,E0=new WeakMap,C0=new WeakSet,gE=function(){const t=new fE(l(this,Ji),.001);w(this,vs,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,vs).box;const s=new fE(l(this,Ji),.0025,.001,this._uiManager.direction==="ltr");w(this,Wn,s.getOutlines());const{firstPoint:r}=l(this,vs);w(this,Dh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=l(this,Wn);w(this,Ih,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Fh=new WeakSet,$v=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,m;w(this,vs,t);const i=1.5;if(w(this,Wn,t.getNewOutline(l(this,Ws)/2+i,.0025)),s>=0)w(this,bs,s),w(this,Nc,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),w(this,gn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Wn).box,path:{d:l(this,Wn).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,bs),{bbox:C(f=Ee,xa,ku).call(f,l(this,vs).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,gn),{bbox:C(m=Ee,xa,ku).call(m,l(this,Wn).box,y),path:{d:l(this,Wn).toSVGPath()}})}const[o,a,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[y,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*g/y,this.height=u*y/g;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[y,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*g/y,this.height=u*y/g;break}}const{firstPoint:d}=t;w(this,Dh,[(d[0]-o)/c,(d[1]-a)/u]);const{lastPoint:h}=l(this,Wn);w(this,Ih,[(h[0]-o)/c,(h[1]-a)/u])},dw=new WeakSet,dO=function(t){const s=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Ee._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:be.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},hw=new WeakSet,hO=function(t){const s=l(this,Ws),r=i=>{w(this,Ws,i),C(this,fw,fO).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:be.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},fw=new WeakSet,fO=function(t){l(this,tn)&&(C(this,Fh,$v).call(this,{highlightOutlines:l(this,vs).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},T0=new WeakSet,yE=function(){l(this,bs)===null||!this.parent||(this.parent.drawLayer.remove(l(this,bs)),w(this,bs,null),this.parent.drawLayer.remove(l(this,gn)),w(this,gn,null))},Zi=new WeakSet,hl=function(t=this.parent){l(this,bs)===null&&({id:Rt(this,bs)._,clipPathId:Rt(this,Nc)._}=t.drawLayer.draw({bbox:l(this,vs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,tn)},path:{d:l(this,vs).toSVGPath()}},!1,!0),w(this,gn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,tn)},bbox:l(this,Wn).box,path:{d:l(this,Wn).toSVGPath()}},l(this,tn))),l(this,Mc)&&(l(this,Mc).style.clipPath=l(this,Nc)))},xa=new WeakSet,ku=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},pw=new WeakSet,pO=function(t){Ee._keyboardManager.exec(this,t)},Bh=new WeakSet,Vv=function(t){if(!l(this,Lh))return;const s=window.getSelection();t?s.setPosition(l(this,Lh),l(this,w0)):s.setPosition(l(this,A0),l(this,_0))},$h=new WeakSet,zv=function(){return l(this,tn)?this.rotation:0},mw=new WeakSet,mO=function(){if(l(this,tn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=l(this,Ji),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const m=u*t+r,y=(1-d)*s+i;a[c]=a[c+4]=m,a[c+1]=a[c+3]=y,a[c+2]=a[c+6]=m+h*t,a[c+5]=a[c+7]=y-f*s,c+=8}return a},gw=new WeakSet,gO=function(t){return l(this,vs).serialize(t,C(this,$h,zv).call(this))},yw=new WeakSet,yO=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},vw=new WeakSet,vO=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},bw=new WeakSet,bO=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},b(Ee,xa),b(Ee,yw),b(Ee,vw),U(Ee,"_defaultColor",null),U(Ee,"_defaultOpacity",1),U(Ee,"_defaultThickness",12),U(Ee,"_type","highlight"),U(Ee,"_editorType",ae.HIGHLIGHT),U(Ee,"_freeHighlightId",-1),U(Ee,"_freeHighlight",null),U(Ee,"_freeHighlightClipId","");let $b=Ee;var jc;class xO{constructor(){b(this,jc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){l(this,jc)[e]=t}toSVGProperties(){const e=l(this,jc);return w(this,jc,Object.create(null)),{root:e}}reset(){w(this,jc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){He("Not implemented")}}jc=new WeakMap;var xs,Vh,zt,Lc,Dc,wa,Sa,Aa,Ic,k0,vE,P0,bE,R0,xE,Oc,yp,xw,wO,zh,Uv,Fc,vp,_a,Pu;const te=class te extends Ye{constructor(t){super(t);b(this,k0);b(this,P0);b(this,R0);b(this,Oc);b(this,xw);b(this,zh);b(this,Fc);b(this,_a);b(this,xs,null);b(this,Vh,void 0);U(this,"_colorPicker",null);U(this,"_drawId",null);w(this,Vh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(C(this,k0,vE).call(this,t),C(this,Oc,yp).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){He("Not implemented")}static get typesMap(){He("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(l(te,zt).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],a=c=>{var d;i.updateProperty(s,c);const u=l(this,xs).updateProperty(s,c);u&&C(this,Fc,vp).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,xs).getPathResizingSVGProperties(C(this,zh,Uv).call(this)),{bbox:C(this,_a,Pu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,xs).getPathResizedSVGProperties(C(this,zh,Uv).call(this)),{bbox:C(this,_a,Pu).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:C(this,_a,Pu).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties(l(this,xs).getPathTranslatedSVGProperties(C(this,zh,Uv).call(this),this.parentDimensions),{bbox:C(this,_a,Pu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Vh)&&(w(this,Vh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,R0,xE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Oc,yp).call(this),C(this,Fc,vp).call(this,l(this,xs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,R0,xE).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,Oc,yp).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,te._mergeSVGProperties({bbox:C(this,_a,Pu).call(this)},l(this,xs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Fc,vp).call(this,l(this,xs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){He("Not implemented")}static startDrawing(t,s,r,i){var S;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:d}=i;if(l(te,Sa)&&l(te,Sa)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:m}=o.getBoundingClientRect(),y=w(te,Lc,new AbortController),g=t.combinedSignal(y);if(l(te,wa)||w(te,wa,u),l(te,Sa)??w(te,Sa,d),window.addEventListener("pointerup",v=>{var x;l(te,wa)===v.pointerId?this._endDraw(v):(x=l(te,Aa))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var x;l(te,wa)===v.pointerId?this._currentParent.endDrawingSession():(x=l(te,Aa))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{l(te,Sa)===v.pointerType&&((l(te,Aa)||w(te,Aa,new Set)).add(v.pointerId),l(te,zt).isCancellable()&&(l(te,zt).removeLastElement(),l(te,zt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Rs,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===l(te,Ic)&&ct(v)},{signal:g}),t.toggleDrawing(),(S=s._editorUndoBar)==null||S.hide(),l(te,zt)){t.drawLayer.updateProperties(this._currentDrawId,l(te,zt).startNew(a,c,f,m,h));return}s.updateUIForDefaultProperties(this),w(te,zt,this.createDrawerInstance(a,c,f,m,h)),w(te,Dc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(te,Dc).toSVGProperties(),l(te,zt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(w(te,Ic,-1),!l(te,zt))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(l(te,wa)===i){if(((o=l(te,Aa))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(te,zt).add(s,r)),w(te,Ic,t.timeStamp),ct(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,w(te,zt,null),w(te,Dc,null),w(te,Sa,null),w(te,Ic,NaN)),l(te,Lc)&&(l(te,Lc).abort(),w(te,Lc,null),w(te,wa,NaN),w(te,Aa,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,l(te,zt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=l(te,zt),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:be.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(be.DRAW_STEP),!l(te,zt).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(te,zt).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:l(te,Dc),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,a){He("Not implemented")}static async deserialize(t,s,r){var h,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}=s.viewport,u=this.deserializeDraw(a,c,i,o,this._INNER_MARGIN,t),d=await super.deserialize(t,s,r);return d.createDrawingOptions(t),C(h=d,k0,vE).call(h,{drawOutlines:u}),C(f=d,Oc,yp).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return l(this,xs).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};xs=new WeakMap,Vh=new WeakMap,zt=new WeakMap,Lc=new WeakMap,Dc=new WeakMap,wa=new WeakMap,Sa=new WeakMap,Aa=new WeakMap,Ic=new WeakMap,k0=new WeakSet,vE=function({drawOutlines:t,drawId:s,drawingOptions:r}){w(this,xs,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=C(this,P0,bE).call(this,t,this.parent),C(this,Fc,vp).call(this,t.box)},P0=new WeakSet,bE=function(t,s){const{id:r}=s.drawLayer.draw(te._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},R0=new WeakSet,xE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Oc=new WeakSet,yp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,P0,bE).call(this,l(this,xs),t)}},xw=new WeakSet,wO=function([t,s,r,i]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[s,1-t,r*(a/o),i*(o/a)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(a/o),i*(o/a)];default:return[t,s,r,i]}},zh=new WeakSet,Uv=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-s,t,r*(o/a),i*(a/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/a),i*(a/o)];default:return[t,s,r,i]}},Fc=new WeakSet,vp=function(t){[this.x,this.y,this.width,this.height]=C(this,xw,wO).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},_a=new WeakSet,Pu=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(c/u),i*(u/c),r*(c/u)];case 5:return[1-s,t,r*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-s,i*(u/c),r*(c/u)];case 7:return[s-r*(c/u),1-t-i*(u/c),r*(c/u),i*(u/c)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(u/c),s,i*(u/c),r*(c/u)];case 13:return[1-s-r*(c/u),t-i*(u/c),r*(c/u),i*(u/c)];case 14:return[1-t,1-s-r*(c/u),i*(u/c),r*(c/u)];case 15:return[s,1-t,r*(c/u),i*(u/c)];default:return[t,s,r,i]}},U(te,"_currentDrawId",-1),U(te,"_currentParent",null),b(te,zt,null),b(te,Lc,null),b(te,Dc,null),b(te,wa,NaN),b(te,Sa,null),b(te,Aa,null),b(te,Ic,NaN),U(te,"_INNER_MARGIN",3);let Vb=te;var ti,Ut,Ht,Bc,Uh,Cn,nn,qs,$c,Vc,zc,Hh,Hv;class yW{constructor(e,t,s,r,i,o){b(this,Hh);b(this,ti,new Float64Array(6));b(this,Ut,void 0);b(this,Ht,void 0);b(this,Bc,void 0);b(this,Uh,void 0);b(this,Cn,void 0);b(this,nn,"");b(this,qs,0);b(this,$c,new cy);b(this,Vc,void 0);b(this,zc,void 0);w(this,Vc,s),w(this,zc,r),w(this,Bc,i),w(this,Uh,o),[e,t]=C(this,Hh,Hv).call(this,e,t);const a=w(this,Ut,[NaN,NaN,NaN,NaN,e,t]);w(this,Cn,[e,t]),w(this,Ht,[{line:a,points:l(this,Cn)}]),l(this,ti).set(a,0)}updateProperty(e,t){e==="stroke-width"&&w(this,Uh,t)}isEmpty(){return!l(this,Ht)||l(this,Ht).length===0}isCancellable(){return l(this,Cn).length<=10}add(e,t){[e,t]=C(this,Hh,Hv).call(this,e,t);const[s,r,i,o]=l(this,ti).subarray(2,6),a=e-i,c=t-o;return Math.hypot(l(this,Vc)*a,l(this,zc)*c)<=2?null:(l(this,Cn).push(e,t),isNaN(s)?(l(this,ti).set([i,o,e,t],2),l(this,Ut).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,ti)[0])&&l(this,Ut).splice(6,6),l(this,ti).set([s,r,i,o,e,t],0),l(this,Ut).push(...J.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(l(this,Cn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){w(this,Vc,s),w(this,zc,r),w(this,Bc,i),[e,t]=C(this,Hh,Hv).call(this,e,t);const o=w(this,Ut,[NaN,NaN,NaN,NaN,e,t]);w(this,Cn,[e,t]);const a=l(this,Ht).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Ht).push({line:o,points:l(this,Cn)}),l(this,ti).set(o,0),w(this,qs,0),this.toSVGPath(),null}getLastElement(){return l(this,Ht).at(-1)}setLastElement(e){return l(this,Ht)?(l(this,Ht).push(e),w(this,Ut,e.line),w(this,Cn,e.points),w(this,qs,0),{path:{d:this.toSVGPath()}}):l(this,$c).setLastElement(e)}removeLastElement(){if(!l(this,Ht))return l(this,$c).removeLastElement();l(this,Ht).pop(),w(this,nn,"");for(let e=0,t=l(this,Ht).length;e<t;e++){const{line:s,points:r}=l(this,Ht)[e];w(this,Ut,s),w(this,Cn,r),w(this,qs,0),this.toSVGPath()}return{path:{d:l(this,nn)}}}toSVGPath(){const e=J.svgRound(l(this,Ut)[4]),t=J.svgRound(l(this,Ut)[5]);if(l(this,Cn).length===2)return w(this,nn,`${l(this,nn)} M ${e} ${t} Z`),l(this,nn);if(l(this,Cn).length<=6){const r=l(this,nn).lastIndexOf("M");w(this,nn,`${l(this,nn).slice(0,r)} M ${e} ${t}`),w(this,qs,6)}if(l(this,Cn).length===4){const r=J.svgRound(l(this,Ut)[10]),i=J.svgRound(l(this,Ut)[11]);return w(this,nn,`${l(this,nn)} L ${r} ${i}`),w(this,qs,12),l(this,nn)}const s=[];l(this,qs)===0&&(s.push(`M ${e} ${t}`),w(this,qs,6));for(let r=l(this,qs),i=l(this,Ut).length;r<i;r+=6){const[o,a,c,u,d,h]=l(this,Ut).slice(r,r+6).map(J.svgRound);s.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}return w(this,nn,l(this,nn)+s.join(" ")),w(this,qs,l(this,Ut).length),l(this,nn)}getOutlines(e,t,s,r){const i=l(this,Ht).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),l(this,$c).build(l(this,Ht),e,t,s,l(this,Bc),l(this,Uh),r),w(this,ti,null),w(this,Ut,null),w(this,Ht,null),w(this,nn,null),l(this,$c)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ti=new WeakMap,Ut=new WeakMap,Ht=new WeakMap,Bc=new WeakMap,Uh=new WeakMap,Cn=new WeakMap,nn=new WeakMap,qs=new WeakMap,$c=new WeakMap,Vc=new WeakMap,zc=new WeakMap,Hh=new WeakSet,Hv=function(e,t){return J._normalizePoint(e,t,l(this,Vc),l(this,zc),l(this,Bc))};var Tn,N0,M0,ws,ni,si,Gh,Wh,Uc,vr,gi,ww,SO,Sw,AO,Aw,_O;class cy extends J{constructor(){super(...arguments);b(this,vr);b(this,ww);b(this,Sw);b(this,Aw);b(this,Tn,void 0);b(this,N0,0);b(this,M0,void 0);b(this,ws,void 0);b(this,ni,void 0);b(this,si,void 0);b(this,Gh,void 0);b(this,Wh,void 0);b(this,Uc,void 0)}build(t,s,r,i,o,a,c){w(this,ni,s),w(this,si,r),w(this,Gh,i),w(this,Wh,o),w(this,Uc,a),w(this,M0,c??0),w(this,ws,t),C(this,Sw,AO).call(this)}get thickness(){return l(this,Uc)}setLastElement(t){return l(this,ws).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,ws).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of l(this,ws)){if(t.push(`M${J.svgRound(s[4])} ${J.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${J.svgRound(s[10])} ${J.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,c,u,d,h]=s.subarray(r,r+6).map(J.svgRound);t.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,s,r,i],o){const a=[],c=[],[u,d,h,f]=C(this,ww,SO).call(this);let m,y,g,S,v,x,A,E,T;switch(l(this,Wh)){case 0:T=J._rescale,m=t,y=s+i,g=r,S=-i,v=t+u*r,x=s+(1-d-f)*i,A=t+(u+h)*r,E=s+(1-d)*i;break;case 90:T=J._rescaleAndSwap,m=t,y=s,g=r,S=i,v=t+d*r,x=s+u*i,A=t+(d+f)*r,E=s+(u+h)*i;break;case 180:T=J._rescale,m=t+r,y=s,g=-r,S=i,v=t+(1-u-h)*r,x=s+d*i,A=t+(1-u)*r,E=s+(d+f)*i;break;case 270:T=J._rescaleAndSwap,m=t+r,y=s+i,g=-r,S=-i,v=t+(1-d-f)*r,x=s+(1-u-h)*i,A=t+(1-d)*r,E=s+(1-u)*i;break}for(const{line:P,points:k}of l(this,ws))a.push(T(P,m,y,g,S,o?new Array(P.length):null)),c.push(T(k,m,y,g,S,o?new Array(k.length):null));return{lines:a,points:c,rect:[v,x,A,E]}}static deserialize(t,s,r,i,o,{paths:{lines:a,points:c},rotation:u,thickness:d}){const h=[];let f,m,y,g,S;switch(u){case 0:S=J._rescale,f=-t/r,m=s/i+1,y=1/r,g=-1/i;break;case 90:S=J._rescaleAndSwap,f=-s/i,m=-t/r,y=1/i,g=1/r;break;case 180:S=J._rescale,f=t/r+1,m=-s/i,y=-1/r,g=1/i;break;case 270:S=J._rescaleAndSwap,f=s/i+1,m=t/r+1,y=-1/i,g=-1/r;break}if(!a){a=[];for(const x of c){const A=x.length;if(A===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(A===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const E=new Float32Array(3*(A-2));a.push(E);let[T,P,k,R]=x.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,P],0);for(let M=4;M<A;M+=2){const L=x[M],B=x[M+1];E.set(J.createBezierPoints(T,P,k,R,L,B),(M-2)*3),[T,P,k,R]=[k,R,L,B]}}}for(let x=0,A=a.length;x<A;x++)h.push({line:S(a[x].map(E=>E??NaN),f,m,y,g),points:S(c[x].map(E=>E??NaN),f,m,y,g)});const v=new this.prototype.constructor;return v.build(h,r,i,1,u,d,o),v}get box(){return l(this,Tn)}updateProperty(t,s){return t==="stroke-width"?C(this,Aw,_O).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=C(this,vr,gi).call(this);w(this,ni,t),w(this,si,s),w(this,Gh,r);const[a,c]=C(this,vr,gi).call(this),u=a-i,d=c-o,h=l(this,Tn);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return w(this,N0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Tn).map(J.svgRound).join(" ")}get defaultProperties(){const[t,s]=l(this,Tn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=l(this,Tn);let r=0,i=0,o=0,a=0,c=0,u=0;switch(l(this,N0)){case 90:i=s/t,o=-t/s,c=t;break;case 180:r=-1,a=-1,c=t,u=s;break;case 270:i=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${J.svgRound(c)} ${J.svgRound(u)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,a]=C(this,vr,gi).call(this),[c,u,d,h]=l(this,Tn);if(Math.abs(d-o)<=J.PRECISION||Math.abs(h-a)<=J.PRECISION){const S=t+r/2-(c+d/2),v=s+i/2-(u+h/2);return{path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`,transform:`${this.rotationTransform} translate(${S} ${v})`}}}const f=(r-2*o)/(d-2*o),m=(i-2*a)/(h-2*a),y=d/r,g=h/i;return{path:{"transform-origin":`${J.svgRound(c)} ${J.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${J.svgRound(o)} ${J.svgRound(a)}) scale(${f} ${m}) translate(${J.svgRound(-o)} ${J.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,a]=C(this,vr,gi).call(this),c=l(this,Tn),[u,d,h,f]=c;if(c[0]=t,c[1]=s,c[2]=r,c[3]=i,Math.abs(h-o)<=J.PRECISION||Math.abs(f-a)<=J.PRECISION){const v=t+r/2-(u+h/2),x=s+i/2-(d+f/2);for(const{line:A,points:E}of l(this,ws))J._translate(A,v,x,A),J._translate(E,v,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*o)/(h-2*o),y=(i-2*a)/(f-2*a),g=-m*(u+o)+t+o,S=-y*(d+a)+s+a;if(m!==1||y!==1||g!==0||S!==0)for(const{line:v,points:x}of l(this,ws))J._rescale(v,g,S,m,y,v),J._rescale(x,g,S,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,a=l(this,Tn),c=t-a[0],u=s-a[1];if(l(this,ni)===i&&l(this,si)===o)for(const{line:d,points:h}of l(this,ws))J._translate(d,c,u,d),J._translate(h,c,u,h);else{const d=l(this,ni)/i,h=l(this,si)/o;w(this,ni,i),w(this,si,o);for(const{line:f,points:m}of l(this,ws))J._rescale(f,c,u,d,h,f),J._rescale(m,c,u,d,h,m);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`}}}get defaultSVGProperties(){const t=l(this,Tn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t[0])} ${J.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Tn=new WeakMap,N0=new WeakMap,M0=new WeakMap,ws=new WeakMap,ni=new WeakMap,si=new WeakMap,Gh=new WeakMap,Wh=new WeakMap,Uc=new WeakMap,vr=new WeakSet,gi=function(t=l(this,Uc)){const s=l(this,M0)+t/2*l(this,Gh);return l(this,Wh)%180===0?[s/l(this,ni),s/l(this,si)]:[s/l(this,si),s/l(this,ni)]},ww=new WeakSet,SO=function(){const[t,s,r,i]=l(this,Tn),[o,a]=C(this,vr,gi).call(this,0);return[t+o,s+a,r-2*o,i-2*a]},Sw=new WeakSet,AO=function(){const t=w(this,Tn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of l(this,ws)){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)Q.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],a=i[5];for(let c=6,u=i.length;c<u;c+=6){const[d,h,f,m,y,g]=i.subarray(c,c+6);Q.bezierBoundingBox(o,a,d,h,f,m,y,g,t),o=y,a=g}}const[s,r]=C(this,vr,gi).call(this);t[0]=vn(t[0]-s,0,1),t[1]=vn(t[1]-r,0,1),t[2]=vn(t[2]+s,0,1),t[3]=vn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},Aw=new WeakSet,_O=function(t){const[s,r]=C(this,vr,gi).call(this);w(this,Uc,t);const[i,o]=C(this,vr,gi).call(this),[a,c]=[i-s,o-r],u=l(this,Tn);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};class S1 extends xO{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new S1(this._viewParameters);return e.updateAll(this),e}}var _w,EO;const Yu=class Yu extends Vb{constructor(t){super({...t,name:"inkEditor"});b(this,_w);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){Ye.initialize(t,s),this._defaultDrawingOptions=new S1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return he(this,"typesMap",new Map([[be.INK_THICKNESS,"stroke-width"],[be.INK_COLOR,"stroke"],[be.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new yW(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,a){return cy.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){let i=null;if(t instanceof jT){const{data:{inkLists:a,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:y,richText:g,contentsObj:S,creationDate:v,modificationDate:x},parent:{page:{pageNumber:A}}}=t;i=t={annotationType:ae.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:a},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:g,comment:(S==null?void 0:S.str)||null,creationDate:v,modificationDate:x}}const o=await super.deserialize(t,s,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Fb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return be.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=Yu.getDefaultDrawingOptions({stroke:Q.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,c=Object.assign(super.serialize(t),{color:Ye._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:s,points:r}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!C(this,_w,EO).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};_w=new WeakSet,EO=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,c)=>a!==s[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},U(Yu,"_type","ink"),U(Yu,"_editorType",ae.INK),U(Yu,"_defaultDrawingOptions",null);let wE=Yu;class SE extends cy{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const ev=8,Gf=3;var Hc,j0,AE,br,Ew,CO,Cw,TO,L0,_E,qh,Gv,Tw,kO,kw,PO,Pw,RO,D0,EE,I0,CE,Rw,NO;class kt{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,a,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${s} ${r} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:S,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:A}=d.measureText(e),E=1.5,T=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,A)*E),P=Math.ceil(Math.max(Math.abs(g)+Math.abs(S)||h,Math.abs(v)+Math.abs(x)||h)*E);u=new OffscreenCanvas(T,P),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,P),d.fillStyle="black",d.fillText(e,T*(E-1)/2,P*(3-E)/2);const k=C(this,D0,EE).call(this,d.getImageData(0,0,T,P).data),R=C(this,Pw,RO).call(this,k),M=C(this,I0,CE).call(this,R),L=C(this,L0,_E).call(this,k,T,P,M);return this.processDrawnLines({lines:{curves:L,width:T,height:P},pageWidth:i,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,a,c]=C(this,Rw,NO).call(this,e),[u,d]=C(this,kw,PO).call(this,o,a,c,Math.hypot(a,c)*l(this,Hc).sigmaSFactor,l(this,Hc).sigmaR,l(this,Hc).kernelSize),h=C(this,I0,CE).call(this,d),f=C(this,L0,_E).call(this,u,a,c,h);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([t,s]=[s,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],m=Math.min(t/u,s/d),y=m/t,g=m/s,S=[];for(const{points:x}of c){const A=o?C(this,Tw,kO).call(this,x):x;if(!A)continue;S.push(A);const E=A.length,T=new Float32Array(E),P=new Float32Array(3*(E===2?2:E-2));if(f.push({line:P,points:T}),E===2){T[0]=A[0]*y,T[1]=A[1]*g,P.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[k,R,M,L]=A;k*=y,R*=g,M*=y,L*=g,T.set([k,R,M,L],0),P.set([NaN,NaN,NaN,NaN,k,R],0);for(let B=4;B<E;B+=2){const D=T[B]=A[B]*y,z=T[B+1]=A[B+1]*g;P.set(J.createBezierPoints(k,R,M,L,D,z),(B-2)*3),[k,R,M,L]=[M,L,D,z]}}if(f.length===0)return null;const v=a?new SE:new cy;return v.build(f,t,s,1,r,a?0:h,i),{outline:v,newCurves:S,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,c=0;for(const A of e){c+=A.length;for(let E=2,T=A.length;E<T;E++){const P=A[E]-A[E-2];o=Math.min(o,P),a=Math.max(a,P)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=ev+Gf*d,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=r,f[m++]=i,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(s??0)),f[m++]=d,f[m++]=u.BYTES_PER_ELEMENT;for(const A of e)f[m++]=A.length-2,f[m++]=A[0],f[m++]=A[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const S=u.prototype.constructor;for(const A of e){const E=new S(A.length-2);for(let T=2,P=A.length;T<P;T++)E[T-2]=A[T]-A[T-2];g.write(E)}g.close();const v=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(v);return kD(x)}static async decompressSignature(e){try{const t=zH(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const A of s)o||(o=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),o.set(A,a),a+=A.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,m=c[5],y=c[6],g=c[7],S=[],v=(ev+Gf*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(o.buffer,v);break}a=0;for(let A=0;A<y;A++){const E=c[Gf*A+ev],T=new Float32Array(E+2);S.push(T);for(let P=0;P<Gf-1;P++)T[P]=c[Gf*A+ev+P+1];for(let P=0;P<E;P++)T[P+2]=T[P]+x[a++]}return{areContours:f,thickness:m,outlines:S,width:d,height:h}}catch(t){return le(`decompressSignature: ${t}`),null}}}Hc=new WeakMap,j0=new WeakSet,AE=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},br=new WeakMap,Ew=new WeakSet,CO=function(e,t,s,r,i,o,a){const c=C(this,j0,AE).call(this,s,r,i,o);for(let u=0;u<8;u++){const d=(-u+c-a+16)%8,h=l(this,br)[2*d],f=l(this,br)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},Cw=new WeakSet,TO=function(e,t,s,r,i,o,a){const c=C(this,j0,AE).call(this,s,r,i,o);for(let u=0;u<8;u++){const d=(u+c+a+16)%8,h=l(this,br)[2*d],f=l(this,br)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},L0=new WeakSet,_E=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=e[d]<=r?1:0;for(let d=1;d<s-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*s-1-d]=0;let a=1,c;const u=[];for(let d=1;d<s-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,m=o[f];if(m===0)continue;let y=d,g=h;if(m===1&&o[f-1]===0)a+=1,g-=1;else if(m>=1&&o[f+1]===0)a+=1,g+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const S=[h,d],v=g===h+1,x={isHole:v,points:S,id:a,parent:0};u.push(x);let A;for(const B of u)if(B.id===c){A=B;break}A?A.isHole?x.parent=v?A.parent:c:x.parent=v?c:A.parent:x.parent=v?c:0;const E=C(this,Ew,CO).call(this,o,t,d,h,y,g,0);if(E===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let T=l(this,br)[2*E],P=l(this,br)[2*E+1];const k=d+T,R=h+P;y=k,g=R;let M=d,L=h;for(;;){const B=C(this,Cw,TO).call(this,o,t,M,L,y,g,1);T=l(this,br)[2*B],P=l(this,br)[2*B+1];const D=M+T,z=L+P;S.push(z,D);const I=M*t+L;if(o[I+1]===0?o[I]=-a:o[I]===1&&(o[I]=a),D===d&&z===h&&M===k&&L===R){o[f]!==1&&(c=Math.abs(o[f]));break}else y=M,g=L,M=D,L=z}}}return u},qh=new WeakSet,Gv=function(e,t,s,r){if(s-t<=4){for(let k=t;k<s-2;k+=2)r.push(e[k],e[k+1]);return}const i=e[t],o=e[t+1],a=e[s-4]-i,c=e[s-3]-o,u=Math.hypot(a,c),d=a/u,h=c/u,f=d*o-h*i,m=c/a,y=1/u,g=Math.atan(m),S=Math.cos(g),v=Math.sin(g),x=y*(Math.abs(S)+Math.abs(v)),A=y*(1-x+x**2),E=Math.max(Math.atan(Math.abs(v+S)*A),Math.atan(Math.abs(v-S)*A));let T=0,P=t;for(let k=t+2;k<s-2;k+=2){const R=Math.abs(f-d*e[k+1]+h*e[k]);R>T&&(P=k,T=R)}T>(u*E)**2?(C(this,qh,Gv).call(this,e,t,P+2,r),C(this,qh,Gv).call(this,e,P,s,r)):r.push(i,o)},Tw=new WeakSet,kO=function(e){const t=[],s=e.length;return C(this,qh,Gv).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},kw=new WeakSet,PO=function(e,t,s,r,i,o){const a=new Float32Array(o**2),c=-2*r**2,u=o>>1;for(let g=0;g<o;g++){const S=(g-u)**2;for(let v=0;v<o;v++)a[g*o+v]=Math.exp((S+(v-u)**2)/c)}const d=new Float32Array(256),h=-2*i**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,m=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<s;g++)for(let S=0;S<t;S++){const v=g*t+S,x=e[v];let A=0,E=0;for(let P=0;P<o;P++){const k=g+P-u;if(!(k<0||k>=s))for(let R=0;R<o;R++){const M=S+R-u;if(M<0||M>=t)continue;const L=e[k*t+M],B=a[P*o+R]*d[Math.abs(L-x)];A+=L*B,E+=B}}const T=m[v]=Math.round(A/E);y[T]++}return[m,y]},Pw=new WeakSet,RO=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},D0=new WeakSet,EE=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,c=s.length;a<c;a++){const u=s[a]=e[a<<2];r=Math.max(r,u),i=Math.min(i,u)}const o=255/(r-i);for(let a=0,c=s.length;a<c;a++)s[a]=(s[a]-i)*o;return s},I0=new WeakSet,CE=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let o=i,a=i;for(t=i;t<256;t++){const c=e[t];c>s&&(t-o>r&&(r=t-o,a=t-1),s=c,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Rw=new WeakSet,NO=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=l(this,Hc);let o=s,a=r;if(s>i||r>i){let f=s,m=r,y=Math.log2(Math.max(s,r)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){o=Math.ceil(f/2),a=Math.ceil(m/2);const x=new OffscreenCanvas(o,a);x.getContext("2d").drawImage(e,0,0,f,m,0,0,o,a),f=o,m=a,e!==t&&e.close(),e=x.transferToImageBitmap()}const S=Math.min(i/o,i/a);o=Math.round(o*S),a=Math.round(a*S)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[C(this,D0,EE).call(this,d),o,a]},b(kt,j0),b(kt,Ew),b(kt,Cw),b(kt,L0),b(kt,qh),b(kt,Tw),b(kt,kw),b(kt,Pw),b(kt,D0),b(kt,I0),b(kt,Rw),b(kt,Hc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),b(kt,br,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class DT extends xO{constructor(){super(),super.updateProperties({fill:Ye._defaultLineColor,"stroke-width":0})}clone(){const e=new DT;return e.updateAll(this),e}}class IT extends S1{constructor(e){super(e),super.updateProperties({stroke:Ye._defaultLineColor,"stroke-width":1})}clone(){const e=new IT(this._viewParameters);return e.updateAll(this),e}}var Ea,ri,Ca,Gc;const rs=class rs extends Vb{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});b(this,Ea,!1);b(this,ri,null);b(this,Ca,null);b(this,Gc,null);this._willKeepAspectRatio=!0,w(this,Ca,t.signatureData||null),w(this,ri,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){Ye.initialize(t,s),this._defaultDrawingOptions=new DT,this._defaultDrawnSignatureOptions=new IT(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return he(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,ri)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(l(this,Ca)){const{lines:i,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:d}=l(this,Ca),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,y=kt.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:m,innerMargin:rs._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,ri)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){w(this,Gc,t),this.addEditToolbar()}getUuid(){return l(this,Gc)}get description(){return l(this,ri)}set description(t){w(this,ri,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=l(this,Ca),a=Math.max(i,o),c=kt.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:a}=this,{outline:c}=w(this,Ca,t);w(this,Ea,c instanceof SE),this.description=r;let u;l(this,Ea)?u=rs.getDefaultDrawingOptions():(u=rs._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=s/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return kt.process(t,s,r,i,rs._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return kt.extractContoursFromText(t,s,r,i,o,rs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return kt.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:rs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=rs.getDefaultDrawingOptions():(this._drawingOptions=rs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,Ea),color:[0,0,0],thickness:l(this,Ea)?0:i});return this.addComment(o),t?(o.paths={lines:s,points:r},o.uuid=l(this,Gc),o.isCopy=!0):o.lines=s,l(this,ri)&&(o.accessibilityData={type:"Figure",alt:l(this,ri)}),o}static deserializeDraw(t,s,r,i,o,a){return a.areContours?SE.deserialize(t,s,r,i,o,a):cy.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return w(i,Ea,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",w(i,Gc,t.uuid),i}};Ea=new WeakMap,ri=new WeakMap,Ca=new WeakMap,Gc=new WeakMap,U(rs,"_type","signature"),U(rs,"_editorType",ae.SIGNATURE),U(rs,"_defaultDrawingOptions",null);let TE=rs;var st,Gt,Ta,eo,ka,Kh,to,Wc,ii,Ss,Xh,qc,bp,Kc,xp,Yh,Wv,Qh,qv,Jh,Kv,O0,PE,Zh,Xv,Nw,MO;class kE extends Ye{constructor(t){super({...t,name:"stampEditor"});b(this,qc);b(this,Kc);b(this,Yh);b(this,Qh);b(this,Jh);b(this,O0);b(this,Zh);b(this,Nw);b(this,st,null);b(this,Gt,null);b(this,Ta,null);b(this,eo,null);b(this,ka,null);b(this,Kh,"");b(this,to,null);b(this,Wc,!1);b(this,ii,null);b(this,Ss,!1);b(this,Xh,!1);w(this,eo,t.bitmapUrl),w(this,ka,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){Ye.initialize(t,s)}static isHandlingMimeForPasting(t){return jb.includes(t)}static paste(t,s){s.pasteEditor({mode:ae.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,Gt)&&(w(this,st,null),this._uiManager.imageManager.deleteId(l(this,Gt)),(t=l(this,to))==null||t.remove(),w(this,to,null),l(this,ii)&&(clearTimeout(l(this,ii)),w(this,ii,null))),super.remove()}rebuild(){if(!this.parent){l(this,Gt)&&C(this,Yh,Wv).call(this);return}super.rebuild(),this.div!==null&&(l(this,Gt)&&l(this,to)===null&&C(this,Yh,Wv).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,Ta)||l(this,st)||l(this,eo)||l(this,ka)||l(this,Gt)||l(this,Wc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,Wc)||(l(this,st)?C(this,Qh,qv).call(this):C(this,Yh,Wv).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(w(this,Gt,r),i&&w(this,st,i),w(this,Wc,!1),C(this,Qh,qv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,ii)!==null&&clearTimeout(l(this,ii)),w(this,ii,setTimeout(()=>{w(this,ii,null),C(this,O0,PE).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:o}=l(this,st),a=new kr;let c=l(this,st),u=i,d=o,h=null;if(s){if(i>s||o>s){const k=Math.min(s/i,s/o);u=Math.floor(i*k),d=Math.floor(o*k)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*a.sx),y=h.height=Math.ceil(d*a.sy);l(this,Ss)||(c=C(this,Jh,Kv).call(this,m,y));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let S="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":GH.isDarkMode&&(S="#8f8f9d",v="#42414d");const x=15,A=x*a.sx,E=x*a.sy,T=new OffscreenCanvas(A*2,E*2),P=T.getContext("2d");P.fillStyle=S,P.fillRect(0,0,A*2,E*2),P.fillStyle=v,P.fillRect(0,0,A,E),P.fillRect(A,E,A,E),g.fillStyle=g.createPattern(T,"repeat"),g.fillRect(0,0,m,y),g.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let f=null;if(r){let m,y;if(a.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=l(this,st),i>t||o>t){const v=Math.min(t/i,t/o);m=Math.floor(i*v),y=Math.floor(o*v),l(this,Ss)||(c=C(this,Jh,Kv).call(this,m,y))}const S=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,m,y),f={width:m,height:y,data:S.getImageData(0,0,m,y).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,s,r){var S;let i=null,o=!1;if(t instanceof KI){const{data:{rect:v,rotation:x,id:A,structParent:E,popupRef:T,richText:P,contentsObj:k,creationDate:R,modificationDate:M},container:L,parent:{page:{pageNumber:B}},canvas:D}=t;let z,I;D?(delete t.canvas,{id:z,bitmap:I}=r.imageManager.getFromCanvas(L.id,D),D.remove()):(o=!0,t._hasNoCanvas=!0);const N=((S=await s._structTree.getAriaAttributes(`${AT}${A}`))==null?void 0:S.get("aria-label"))||"";i=t={annotationType:ae.STAMP,bitmapId:z,bitmap:I,pageIndex:B-1,rect:v.slice(0),rotation:x,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:E,popupRef:T,richText:P,comment:(k==null?void 0:k.str)||null,creationDate:R,modificationDate:M}}const a=await super.deserialize(t,s,r),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=t;o?(r.addMissingCanvas(t.id,a),w(a,Wc,!0)):h&&r.imageManager.isValidId(h)?(w(a,Gt,h),u&&w(a,st,u)):w(a,eo,d),w(a,Ss,f);const[y,g]=a.pageDimensions;return a.width=(c[2]-c[0])/y,a.height=(c[3]-c[1])/g,m&&(a.altTextData=m),a._initialData=i,t.comment&&a.setCommentData(t),w(a,Xh,!!i),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:l(this,Gt),isSvg:l(this,Ss)});if(this.addComment(r),t)return r.bitmapUrl=C(this,Zh,Xv).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=C(this,Nw,MO).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const a=l(this,Ss)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(l(this,Gt)))s.stamps.set(l(this,Gt),{area:a,serialized:r}),r.bitmap=C(this,Zh,Xv).call(this,!1);else if(l(this,Ss)){const c=s.stamps.get(l(this,Gt));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=C(this,Zh,Xv).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}st=new WeakMap,Gt=new WeakMap,Ta=new WeakMap,eo=new WeakMap,ka=new WeakMap,Kh=new WeakMap,to=new WeakMap,Wc=new WeakMap,ii=new WeakMap,Ss=new WeakMap,Xh=new WeakMap,qc=new WeakSet,bp=function(t,s=!1){if(!t){this.remove();return}w(this,st,t.bitmap),s||(w(this,Gt,t.id),w(this,Ss,t.isSvg)),t.file&&w(this,Kh,t.file.name),C(this,Qh,qv).call(this)},Kc=new WeakSet,xp=function(){if(w(this,Ta,null),this._uiManager.enableWaiting(!1),!!l(this,to)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,st)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,st)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Yh=new WeakSet,Wv=function(){if(l(this,Gt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,Gt)).then(r=>C(this,qc,bp).call(this,r,!0)).finally(()=>C(this,Kc,xp).call(this));return}if(l(this,eo)){const r=l(this,eo);w(this,eo,null),this._uiManager.enableWaiting(!0),w(this,Ta,this._uiManager.imageManager.getFromUrl(r).then(i=>C(this,qc,bp).call(this,i)).finally(()=>C(this,Kc,xp).call(this)));return}if(l(this,ka)){const r=l(this,ka);w(this,ka,null),this._uiManager.enableWaiting(!0),w(this,Ta,this._uiManager.imageManager.getFromFile(r).then(i=>C(this,qc,bp).call(this,i)).finally(()=>C(this,Kc,xp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=jb.join(",");const s=this._uiManager._signal;w(this,Ta,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,qc,bp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>C(this,Kc,xp).call(this))),t.click()},Qh=new WeakSet,qv=function(){var u;const{div:t}=this;let{width:s,height:r}=l(this,st);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const d=Math.min(a*i/s,a*o/r);s*=d,r*=d}this._uiManager.enableWaiting(!1);const c=w(this,to,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/i,this.height=r/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,O0,PE).call(this),l(this,Xh)||(this.parent.addUndoableEditor(this),w(this,Xh,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,Kh)&&this.div.setAttribute("aria-description",l(this,Kh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Jh=new WeakSet,Kv=function(t,s){const{width:r,height:i}=l(this,st);let o=r,a=i,c=l(this,st);for(;o>2*t||a>2*s;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,a),c=h.transferToImageBitmap()}return c},O0=new WeakSet,PE=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new kr,a=Math.ceil(r*t*o.sx),c=Math.ceil(i*s*o.sy),u=l(this,to);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=l(this,Ss)?l(this,st):C(this,Jh,Kv).call(this,a,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,c)},Zh=new WeakSet,Xv=function(t){if(t){if(l(this,Ss)){const i=this._uiManager.imageManager.getSvgUrl(l(this,Gt));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,st),s.getContext("2d").drawImage(l(this,st),0,0),s.toDataURL()}if(l(this,Ss)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*wo.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*wo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(l(this,st),0,0,l(this,st).width,l(this,st).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(l(this,st))},Nw=new WeakSet,MO=function(t){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},U(kE,"_type","stamp"),U(kE,"_editorType",ae.STAMP);var Xc,ef,Pa,Ra,no,qn,Na,tf,nf,xr,so,Wt,ro,Ma,sf,se,ja,F0,RE,Mw,jO,Ks,jr,B0,NE,$0,ME,rf,Yv;const or=class or{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:d}){b(this,F0);b(this,Mw);b(this,Ks);b(this,B0);b(this,$0);b(this,rf);b(this,Xc,void 0);b(this,ef,!1);b(this,Pa,null);b(this,Ra,null);b(this,no,null);b(this,qn,new Map);b(this,Na,!1);b(this,tf,!1);b(this,nf,!1);b(this,xr,null);b(this,so,null);b(this,Wt,null);b(this,ro,null);b(this,Ma,null);b(this,sf,-1);b(this,se,void 0);const h=[...l(or,ja).values()];if(!or._initialized){or._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),w(this,se,e),this.pageIndex=t,this.div=s,w(this,Xc,i),w(this,Pa,o),this.viewport=u,w(this,Wt,c),this.drawLayer=a,this._structTree=r,l(this,se).addLayer(this)}get isEmpty(){return l(this,qn).size===0}get isInvisible(){return this.isEmpty&&l(this,se).getMode()===ae.NONE}updateToolbar(e){l(this,se).updateToolbar(e)}updateMode(e=l(this,se).getMode()){switch(C(this,rf,Yv).call(this),e){case ae.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ae.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ae.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ae.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of l(or,ja).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Wt))==null?void 0:t.div)}setEditingState(e){l(this,se).setEditingState(e)}addCommands(e){l(this,se).addCommands(e)}cleanUndoStack(e){l(this,se).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Pa))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;w(this,nf,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=l(this,Ma))==null||s.abort(),w(this,Ma,null);const e=new Set;for(const r of l(this,F0,RE))r.enableEditing(),r.show(!0),r.annotationElementId&&(l(this,se).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=l(this,Pa);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),l(this,se).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}w(this,nf,!1),l(this,se)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(w(this,tf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,Wt)&&!l(this,Ma)){w(this,Ma,new AbortController);const r=l(this,se).combinedSignal(l(this,Ma));l(this,Wt).div.addEventListener("pointerdown",i=>{const{clientX:a,clientY:c,timeStamp:u}=i,d=l(this,sf);if(u-d>500){w(this,sf,u);return}w(this,sf,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(a,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const y=new RegExp(`^${om}[0-9]+$`);for(const S of f)if(y.test(S.id)){m=S.id;break}if(!m)return;const g=l(this,qn).get(m);(g==null?void 0:g.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),g.dblclick(i))},{signal:r,capture:!0})}const e=l(this,Pa);if(e){const r=new Map,i=new Map;for(const a of l(this,F0,RE)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){r.set(a.annotationElementId,a);continue}else i.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:c}=a.data;if(l(this,se).isDeletedAnnotationElement(c)){a.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=r.get(c),u&&(l(this,se).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}C(this,rf,Yv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of l(or,ja).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),w(this,tf,!1)}getEditableAnnotation(e){var t;return((t=l(this,Pa))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,se).getActive()!==e&&l(this,se).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Wt))!=null&&e.div&&!l(this,ro)){w(this,ro,new AbortController);const t=l(this,se).combinedSignal(l(this,ro));l(this,Wt).div.addEventListener("pointerdown",C(this,Mw,jO).bind(this),{signal:t}),l(this,Wt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Wt))!=null&&e.div&&l(this,ro)&&(l(this,ro).abort(),w(this,ro,null),l(this,Wt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Ra))return;w(this,Ra,new AbortController);const e=l(this,se).combinedSignal(l(this,Ra));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,Ra))==null||e.abort(),w(this,Ra,null)}attach(e){l(this,qn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,se).isDeletedAnnotationElement(t)&&l(this,se).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,qn).delete(e.id),(t=l(this,Xc))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,tf)&&e.annotationElementId&&l(this,se).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,se).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,se).addDeletedAnnotationElement(e.annotationElementId),Ye.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,se).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,nf)),l(this,se).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,no)&&(e._focusEventsAllowed=!1,w(this,no,setTimeout(()=>{w(this,no,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,se)._signal}),t.focus())},0))),e._structTreeParentId=(s=l(this,Xc))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of l(this,qn).values())if(t.uid===e)return t;return null}getNextId(){return l(this,se).getId()}combinedSignal(e){return l(this,se).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Ks,jr))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,se).updateMode(e.mode);const{offsetX:s,offsetY:r}=C(this,$0,ME).call(this),i=this.getNextId(),o=C(this,B0,NE).call(this,{parent:this,id:i,x:s,y:r,uiManager:l(this,se),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(or,ja).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,se)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=C(this,B0,NE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,se),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(C(this,$0,ME).call(this),!0,e)}setSelected(e){l(this,se).setSelected(e)}toggleSelected(e){l(this,se).toggleSelected(e)}unselect(e){l(this,se).unselect(e)}pointerup(e){var r;const{isMac:t}=Xt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,Na)||(w(this,Na,!1),(r=l(this,Ks,jr))!=null&&r.isDrawer&&l(this,Ks,jr).supportMultipleDrawings))return;if(!l(this,ef)){w(this,ef,!0);return}const s=l(this,se).getMode();if(s===ae.STAMP||s===ae.SIGNATURE){l(this,se).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(l(this,se).getMode()===ae.HIGHLIGHT&&this.enableTextSelection(),l(this,Na)){w(this,Na,!1);return}const{isMac:t}=Xt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(w(this,Na,!0),(r=l(this,Ks,jr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=l(this,se).getActive();w(this,ef,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,xr)){l(this,Ks,jr).startDrawing(this,l(this,se),!1,e);return}l(this,se).setCurrentDrawingSession(this),w(this,xr,new AbortController);const t=l(this,se).combinedSignal(l(this,xr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(w(this,so,null),this.commitOrRemove())},{signal:t}),l(this,Ks,jr).startDrawing(this,l(this,se),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&w(this,so,t);return}l(this,so)&&setTimeout(()=>{var t;(t=l(this,so))==null||t.focus(),w(this,so,null)},0)}endDrawingSession(e=!1){return l(this,xr)?(l(this,se).setCurrentDrawingSession(null),l(this,xr).abort(),w(this,xr,null),w(this,so,null),l(this,Ks,jr).endDrawing(e)):null}findNewParent(e,t,s){const r=l(this,se).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return l(this,xr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,xr)&&l(this,Ks,jr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,se).getActive())==null?void 0:e.parent)===this&&(l(this,se).commitOrRemove(),l(this,se).setActiveEditor(null)),l(this,no)&&(clearTimeout(l(this,no)),w(this,no,null));for(const s of l(this,qn).values())(t=l(this,Xc))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,qn).clear(),l(this,se).removeLayer(this)}render({viewport:e}){this.viewport=e,Ya(this.div,e);for(const t of l(this,se).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,se).commitOrRemove(),C(this,rf,Yv).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Ya(this.div,{rotation:s}),t!==s)for(const r of l(this,qn).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,se).viewParameters.realScale}};Xc=new WeakMap,ef=new WeakMap,Pa=new WeakMap,Ra=new WeakMap,no=new WeakMap,qn=new WeakMap,Na=new WeakMap,tf=new WeakMap,nf=new WeakMap,xr=new WeakMap,so=new WeakMap,Wt=new WeakMap,ro=new WeakMap,Ma=new WeakMap,sf=new WeakMap,se=new WeakMap,ja=new WeakMap,F0=new WeakSet,RE=function(){return l(this,qn).size!==0?l(this,qn).values():l(this,se).getEditors(this.pageIndex)},Mw=new WeakSet,jO=function(e){l(this,se).unselectAll();const{target:t}=e;if(t===l(this,Wt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Wt).div.contains(t)){const{isMac:s}=Xt.platform;if(e.button!==0||e.ctrlKey&&s)return;l(this,se).showAllEditors("highlight",!0,!0),l(this,Wt).div.classList.add("free"),this.toggleDrawing(),$b.startHighlighting(this,l(this,se).direction==="ltr",{target:l(this,Wt).div,x:e.x,y:e.y}),l(this,Wt).div.addEventListener("pointerup",()=>{l(this,Wt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,se)._signal}),e.preventDefault()}},Ks=new WeakSet,jr=function(){return l(or,ja).get(l(this,se).getMode())},B0=new WeakSet,NE=function(e){const t=l(this,Ks,jr);return t?new t.prototype.constructor(e):null},$0=new WeakSet,ME=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+r),u=(i+a)/2-e,d=(o+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},rf=new WeakSet,Yv=function(){for(const e of l(this,qn).values())e.isEmpty()&&e.remove()},U(or,"_initialized",!1),b(or,ja,new Map([dE,wE,kE,$b,TE].map(e=>[e._editorType,e])));let zb=or;var wr,kn,Yc,V0,jw,LO,z0,jE,Lw,DO,U0,LE;const Mt=class Mt{constructor({pageIndex:e}){b(this,z0);b(this,Lw);b(this,U0);b(this,wr,null);b(this,kn,new Map);b(this,Yc,new Map);this.pageIndex=e}setParent(e){if(!l(this,wr)){w(this,wr,e);return}if(l(this,wr)!==e){if(l(this,kn).size>0)for(const t of l(this,kn).values())t.remove(),e.append(t);w(this,wr,e)}}static get _svgFactory(){return he(this,"_svgFactory",new fm)}draw(e,t=!1,s=!1){const r=Rt(Mt,V0)._++,i=C(this,z0,jE).call(this),o=Mt._svgFactory.createElement("defs");i.append(o);const a=Mt._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,Yc).set(r,a);const u=s?C(this,Lw,DO).call(this,o,c):null,d=Mt._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),l(this,kn).set(r,i),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=Rt(Mt,V0)._++,r=C(this,z0,jE).call(this),i=Mt._svgFactory.createElement("defs");r.append(i);const o=Mt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=Mt._svgFactory.createElement("mask");i.append(h),c=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=Mt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=Mt._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=Mt._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return r.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),l(this,kn).set(s,r),s}finalizeDraw(e,t){l(this,Yc).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,a=typeof e=="number"?l(this,kn).get(e):e;if(a){if(s&&C(this,U0,LE).call(this,a,s),r&&C(c=Mt,jw,LO).call(c,a,r),i){const{classList:u}=a;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;C(this,U0,LE).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const s=l(this,kn).get(e);s&&(l(t,wr).append(s),l(this,kn).delete(e),l(t,kn).set(e,s))}remove(e){l(this,Yc).delete(e),l(this,wr)!==null&&(l(this,kn).get(e).remove(),l(this,kn).delete(e))}destroy(){w(this,wr,null);for(const e of l(this,kn).values())e.remove();l(this,kn).clear(),l(this,Yc).clear()}};wr=new WeakMap,kn=new WeakMap,Yc=new WeakMap,V0=new WeakMap,jw=new WeakSet,LO=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},z0=new WeakSet,jE=function(){const e=Mt._svgFactory.create(1,1,!0);return l(this,wr).append(e),e.setAttribute("aria-hidden",!0),e},Lw=new WeakSet,DO=function(e,t){const s=Mt._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Mt._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},U0=new WeakSet,LE=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},b(Mt,jw),b(Mt,V0,0);let Ub=Mt;globalThis._pdfjsTestingUtils={HighlightOutliner:fE};globalThis.pdfjsLib={AbortException:xo,AnnotationEditorLayer:zb,AnnotationEditorParamsType:be,AnnotationEditorType:ae,AnnotationEditorUIManager:Qa,AnnotationLayer:LT,AnnotationMode:ai,AnnotationType:xt,applyOpacity:jD,build:II,ColorPicker:hm,createValidAbsoluteUrl:xT,CSSConstants:MD,DOMSVGFactory:fm,DrawLayer:Ub,FeatureTest:Xt,fetchData:Ef,findContrastColor:LD,getDocument:PT,getFilenameFromUrl:PD,getPdfFilenameFromUrl:RD,getRGB:Cf,getUuid:ST,getXfaPageViewport:ND,GlobalWorkerOptions:Qs,ImageKind:Fp,InvalidPDFException:Mb,isDataScheme:oy,isPdfFile:x1,isValidExplicitDest:fI,MathClamp:vn,noContextMenu:Rs,normalizeUnicode:TD,OPS:gf,OutputScale:kr,PasswordResponses:ED,PDFDataRangeTransport:RT,PDFDateString:cm,PDFWorker:yf,PermissionFlag:_D,PixelsPerInch:wo,RenderingCancelledException:b1,renderRichText:ET,ResponseException:am,setLayerDimensions:Ya,shadow:he,SignatureExtractor:kt,stopEvent:ct,SupportedImageMimeTypes:jb,TextLayer:dm,TouchManager:um,updateUrlHash:wT,Util:Q,VerbosityLevel:sy,version:NT,XfaLayer:_T};const vW=Object.freeze(Object.defineProperty({__proto__:null,AbortException:xo,AnnotationEditorLayer:zb,AnnotationEditorParamsType:be,AnnotationEditorType:ae,AnnotationEditorUIManager:Qa,AnnotationLayer:LT,AnnotationMode:ai,AnnotationType:xt,CSSConstants:MD,ColorPicker:hm,DOMSVGFactory:fm,DrawLayer:Ub,FeatureTest:Xt,GlobalWorkerOptions:Qs,ImageKind:Fp,InvalidPDFException:Mb,MathClamp:vn,OPS:gf,OutputScale:kr,PDFDataRangeTransport:RT,PDFDateString:cm,PDFWorker:yf,PasswordResponses:ED,PermissionFlag:_D,PixelsPerInch:wo,RenderingCancelledException:b1,ResponseException:am,SignatureExtractor:kt,SupportedImageMimeTypes:jb,TextLayer:dm,TouchManager:um,Util:Q,VerbosityLevel:sy,XfaLayer:_T,applyOpacity:jD,build:II,createValidAbsoluteUrl:xT,fetchData:Ef,findContrastColor:LD,getDocument:PT,getFilenameFromUrl:PD,getPdfFilenameFromUrl:RD,getRGB:Cf,getUuid:ST,getXfaPageViewport:ND,isDataScheme:oy,isPdfFile:x1,isValidExplicitDest:fI,noContextMenu:Rs,normalizeUnicode:TD,renderRichText:ET,setLayerDimensions:Ya,shadow:he,stopEvent:ct,updateUrlHash:wT,version:NT},Symbol.toStringTag,{value:"Module"}));var cR=Object.prototype.hasOwnProperty;function uR(n,e,t){for(t of n.keys())if(rd(t,e))return t}function rd(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&rd(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=uR(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=uR(e,r),!r)||!rd(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(cR.call(n,t)&&++s&&!cR.call(e,t)||!(t in e)||!rd(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function uy(n){let e=!1;return{promise:new Promise((s,r)=>{n.then(i=>!e&&s(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const bW=["onCopy","onCut","onPaste"],xW=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],wW=["onFocus","onBlur"],SW=["onInput","onInvalid","onReset","onSubmit"],AW=["onLoad","onError"],_W=["onKeyDown","onKeyPress","onKeyUp"],EW=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],CW=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],TW=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],kW=["onSelect"],PW=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],RW=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],NW=["onScroll"],MW=["onWheel"],jW=["onAnimationStart","onAnimationEnd","onAnimationIteration"],LW=["onTransitionEnd"],DW=["onToggle"],IW=["onChange"],OW=[...bW,...xW,...wW,...SW,...AW,..._W,...EW,...CW,...TW,...kW,...PW,...RW,...NW,...MW,...jW,...LW,...IW,...DW];function IO(n,e){const t={};for(const s of OW){const r=n[s];r&&(e?t[s]=i=>r(i,e(s)):t[s]=r)}return t}var FW=!0,LS="Invariant failed";function ze(n,e){if(!n){if(FW)throw new Error(LS);var t=typeof e=="function"?e():e,s=t?"".concat(LS,": ").concat(t):LS;throw new Error(s)}}var BW=function(){},$W=BW;const xn=Dw($W),VW=_.createContext(null),OO=VW,zW="noopener noreferrer nofollow";class UW{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ze(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){ze(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||zW,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{ze(this.pdfDocument,"PDF document not loaded."),ze(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ze(Array.isArray(t),`"${t}" is not a valid destination array.`);const s=t[0];new Promise(r=>{ze(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{ze(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?r(s):ze(!1,`"${s}" is not a valid destination reference.`)}).then(r=>{const i=r+1;ze(this.pdfViewer,"PDF viewer is not initialized."),ze(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;ze(this.pdfViewer,"PDF viewer is not initialized."),ze(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function id({children:n,type:e}){return p.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const HW={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},dR=HW;function GW(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function vf(){return _.useReducer(GW,{value:void 0,error:void 0})}const A1=typeof window<"u",FO=A1&&window.location.protocol==="file:";function WW(n){return typeof n<"u"}function rl(n){return WW(n)&&n!==null}function qW(n){return typeof n=="string"}function KW(n){return n instanceof ArrayBuffer}function XW(n){return ze(A1,"isBlob can only be used in a browser environment"),n instanceof Blob}function DE(n){return qW(n)&&/^data:/.test(n)}function hR(n){ze(DE(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function YW(){return A1&&window.devicePixelRatio||1}const BO="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function fR(){xn(!FO,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${BO}`)}function QW(){xn(!FO,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${BO}`)}function au(n){n!=null&&n.cancel&&n.cancel()}function IE(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function JW(n){return n.name==="RenderingCancelledException"}function ZW(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:eq}=vW,tq=(n,e)=>{switch(e){case dR.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case dR.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function pR(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const nq=_.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:o,inputRef:a,imageResourcesPath:c,loading:u="Loading PDF",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:m,onLoadSuccess:y,onPassword:g=tq,onSourceError:S,onSourceSuccess:v,options:x,renderMode:A,rotate:E,scale:T,...P},k){const[R,M]=vf(),{value:L,error:B}=R,[D,z]=vf(),{value:I,error:N}=D,j=_.useRef(new UW),O=_.useRef([]),F=_.useRef(void 0),$=_.useRef(void 0);o&&o!==F.current&&pR(o)&&(xn(!rd(o,F.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),F.current=o),x&&x!==$.current&&(xn(!rd(x,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=x);const V=_.useRef({scrollPageIntoView:_e=>{const{dest:Ge,pageNumber:pt,pageIndex:_t=pt-1}=_e;if(h){h({dest:Ge,pageIndex:_t,pageNumber:pt});return}const q=O.current[_t];if(q){q.scrollIntoView();return}xn(!1,`An internal link leading to page ${pt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});_.useImperativeHandle(k,()=>({linkService:j,pages:O,viewer:V}),[]);function W(){v&&v()}function K(){B&&(xn(!1,B.toString()),S&&S(B))}function Y(){M({type:"RESET"})}_.useEffect(Y,[o,M]);const re=_.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return DE(o)?{data:hR(o)}:(fR(),{url:o});if(o instanceof eq)return{range:o};if(KW(o))return{data:o};if(A1&&XW(o))return{data:await ZW(o)};if(ze(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),ze(pR(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(DE(o.url)){const{url:_e,...Ge}=o;return{data:hR(_e),...Ge}}fR()}return o},[o]);_.useEffect(()=>{const _e=uy(re());return _e.promise.then(Ge=>{M({type:"RESOLVE",value:Ge})}).catch(Ge=>{M({type:"REJECT",error:Ge})}),()=>{au(_e)}},[re,M]),_.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){K();return}W()}},[L]);function fe(){I&&(y&&y(I),O.current=new Array(I.numPages),j.current.setDocument(I))}function xe(){N&&(xn(!1,N.toString()),f&&f(N))}_.useEffect(function(){z({type:"RESET"})},[z,L]),_.useEffect(function(){if(!L)return;const Ge=x?{...L,...x}:L,pt=PT(Ge);m&&(pt.onProgress=m),g&&(pt.onPassword=g);const _t=pt,q=_t.promise.then(we=>{z({type:"RESOLVE",value:we})}).catch(we=>{_t.destroyed||z({type:"REJECT",error:we})});return()=>{q.finally(()=>_t.destroy())}},[x,z,L]),_.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){xe();return}fe()}},[I]),_.useEffect(function(){j.current.setViewer(V.current),j.current.setExternalLinkRel(r),j.current.setExternalLinkTarget(i)},[r,i]);const X=_.useCallback((_e,Ge)=>{O.current[_e]=Ge},[]),G=_.useCallback(_e=>{delete O.current[_e]},[]),ne=_.useMemo(()=>({imageResourcesPath:c,linkService:j.current,onItemClick:h,pdf:I,registerPage:X,renderMode:A,rotate:E,scale:T,unregisterPage:G}),[c,h,I,X,A,E,T,G]),ie=_.useMemo(()=>IO(P,()=>I),[P,I]);function Pe(){function _e(pt){return!!(pt!=null&&pt.pdf)}if(!_e(ne))throw new Error("pdf is undefined");const Ge=typeof e=="function"?e(ne):e;return p.jsx(OO.Provider,{value:ne,children:Ge})}function ns(){return o?I==null?p.jsx(id,{type:"loading",children:typeof u=="function"?u():u}):I===!1?p.jsx(id,{type:"error",children:typeof s=="function"?s():s}):Pe():p.jsx(id,{type:"no-data",children:typeof d=="function"?d():d})}return p.jsx("div",{className:Sf("react-pdf__Document",t),ref:a,...ie,children:ns()})}),sq=nq;function $O(){return _.useContext(OO)}function VO(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var o=0,a=t;o<a.length;o++){var c=a[o];typeof c=="function"?c(i):c&&(c.current=i)}}}const rq=_.createContext(null),zO=rq;function _1(){return _.useContext(zO)}function iq(){const n=$O(),e=_1();ze(e,"Unable to find Page context.");const t={...n,...e},{imageResourcesPath:s,linkService:r,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:c,page:u,pdf:d,renderForms:h,rotate:f,scale:m=1}=t;ze(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),ze(u,"Attempted to load page annotations, but no page was specified."),ze(r,"Attempted to load page annotations, but no linkService was specified.");const[y,g]=vf(),{value:S,error:v}=y,x=_.useRef(null);xn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function A(){S&&o&&o(S)}function E(){v&&(xn(!1,v.toString()),i&&i(v))}_.useEffect(function(){g({type:"RESET"})},[g,u]),_.useEffect(function(){if(!u)return;const M=uy(u.getAnnotations()),L=M;return M.promise.then(B=>{g({type:"RESOLVE",value:B})}).catch(B=>{g({type:"REJECT",error:B})}),()=>{au(L)}},[g,u]),_.useEffect(()=>{if(S!==void 0){if(S===!1){E();return}A()}},[S]);function T(){c&&c()}function P(R){xn(!1,`${R}`),a&&a(R)}const k=_.useMemo(()=>u.getViewport({scale:m,rotation:f}),[u,f,m]);return _.useEffect(function(){if(!d||!u||!r||!S)return;const{current:M}=x;if(!M)return;const L=k.clone({dontFlip:!0}),B={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:M,l10n:null,linkService:r,page:u,structTreeLayer:null,viewport:L},D={annotations:S,annotationStorage:d.annotationStorage,div:M,imageResourcesPath:s,linkService:r,page:u,renderForms:h,viewport:L};M.innerHTML="";try{new LT(B).render(D),T()}catch(z){P(z)}return()=>{}},[S,s,r,u,d,h,k]),p.jsx("div",{className:Sf("react-pdf__Page__annotations","annotationLayer"),ref:x})}const UO={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},oq=/^H(\d+)$/;function aq(n){return n in UO}function E1(n){return"children"in n}function HO(n){return E1(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function lq(n){const e={};if(E1(n)){const{role:t}=n,s=t.match(oq);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(aq(t)){const r=UO[t];r&&(e.role=r)}}return e}function GO(n){const e={};if(E1(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),HO(n)){const[t]=n.children;if(t){const s=GO(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function cq(n){return n?{...lq(n),...GO(n)}:null}function WO({className:n,node:e}){const t=_.useMemo(()=>cq(e),[e]),s=_.useMemo(()=>!E1(e)||HO(e)?null:e.children.map((r,i)=>p.jsx(WO,{node:r},i)),[e]);return p.jsx("span",{className:n,...t,children:s})}function uq(){const n=_1();ze(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=vf(),{value:i,error:o}=s,{customTextRenderer:a,page:c}=n;function u(){i&&t&&t(i)}function d(){o&&(xn(!1,o.toString()),e&&e(o))}return _.useEffect(function(){r({type:"RESET"})},[r,c]),_.useEffect(function(){if(a||!c)return;const f=uy(c.getStructTree()),m=f;return f.promise.then(y=>{r({type:"RESOLVE",value:y})}).catch(y=>{r({type:"REJECT",error:y})}),()=>au(m)},[a,c,r]),_.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}u()}},[i]),i?p.jsx(WO,{className:"react-pdf__Page__structTree structTree",node:i}):null}const mR=ai;function dq(n){const e=_1();ze(e,"Unable to find Page context.");const t={...e,...n},{_className:s,canvasBackground:r,devicePixelRatio:i=YW(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:d,rotate:h,scale:f}=t,{canvasRef:m}=n;ze(c,"Attempted to render page canvas, but no page was specified.");const y=_.useRef(null);function g(){c&&a&&a(IE(c,f))}function S(E){JW(E)||(xn(!1,E.toString()),o&&o(E))}const v=_.useMemo(()=>c.getViewport({scale:f*i,rotation:h}),[i,c,h,f]),x=_.useMemo(()=>c.getViewport({scale:f,rotation:h}),[c,h,f]);_.useEffect(function(){if(!c)return;c.cleanup();const{current:T}=y;if(!T)return;T.width=v.width,T.height=v.height,T.style.width=`${Math.floor(x.width)}px`,T.style.height=`${Math.floor(x.height)}px`,T.style.visibility="hidden";const P={annotationMode:u?mR.ENABLE_FORMS:mR.ENABLE,canvas:T,canvasContext:T.getContext("2d",{alpha:!1}),viewport:v};r&&(P.background=r);const k=c.render(P),R=k;return k.promise.then(()=>{T.style.visibility="",g()}).catch(S),()=>au(R)},[r,c,u,v,x]);const A=_.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return _.useEffect(()=>A,[A]),p.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:VO(m,y),style:{display:"block",userSelect:"none"},children:d?p.jsx(uq,{}):null})}function hq(n){return"str"in n}function fq(){const n=_1();ze(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:d}=n;ze(o,"Attempted to load page text content, but no page was specified.");const[h,f]=vf(),{value:m,error:y}=h,g=_.useRef(null);xn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){m&&s&&s(m)}function v(){y&&(xn(!1,y.toString()),t&&t(y))}_.useEffect(function(){f({type:"RESET"})},[o,f]),_.useEffect(function(){if(!o)return;const R=uy(o.getTextContent()),M=R;return R.promise.then(L=>{f({type:"RESOLVE",value:L})}).catch(L=>{f({type:"REJECT",error:L})}),()=>au(M)},[o,f]),_.useEffect(()=>{if(m!==void 0){if(m===!1){v();return}S()}},[m]);const x=_.useCallback(()=>{i&&i()},[i]),A=_.useCallback(k=>{xn(!1,k.toString()),r&&r(k)},[r]);function E(){const k=g.current;k&&k.classList.add("selecting")}function T(){const k=g.current;k&&k.classList.remove("selecting")}const P=_.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return _.useLayoutEffect(function(){if(!o||!m)return;const{current:R}=g;if(!R)return;R.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),L={container:R,textContentSource:M,viewport:P},B=new dm(L),D=B;return B.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",R.append(z);const I=R.querySelectorAll('[role="presentation"]');if(e){let N=0;m.items.forEach((j,O)=>{if(!hq(j))return;const F=I[N];if(!F)return;const $=e({pageIndex:a,pageNumber:c,itemIndex:O,...j});F.innerHTML=$,N+=j.str&&j.hasEOL?2:1})}x()}).catch(A),()=>au(D)},[e,A,x,o,a,c,m,P]),p.jsx("div",{className:Sf("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:E,ref:g})}const gR=1;function pq(n){const t={...$O(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",height:m,inputRef:y,loading:g="Loading page",noData:S="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:x,onGetStructTreeError:A,onGetStructTreeSuccess:E,onGetTextError:T,onGetTextSuccess:P,onLoadError:k,onLoadSuccess:R,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:B,onRenderSuccess:D,onRenderTextLayerError:z,onRenderTextLayerSuccess:I,pageIndex:N,pageNumber:j,pdf:O,registerPage:F,renderAnnotationLayer:$=!0,renderForms:V=!1,renderMode:W="canvas",renderTextLayer:K=!0,rotate:Y,scale:re=gR,unregisterPage:fe,width:xe,...X}=t,[G,ne]=vf(),{value:ie,error:Pe}=G,ns=_.useRef(null);ze(O,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const _e=rl(j)?j-1:N??null,Ge=j??(rl(N)?N+1:null),pt=Y??(ie?ie.rotate:null),_t=_.useMemo(()=>{if(!ie)return null;let nr=1;const Me=re??gR;if(xe||m){const ss=ie.getViewport({scale:1,rotation:pt});xe?nr=xe/ss.width:m&&(nr=m/ss.height)}return Me*nr},[m,ie,pt,re,xe]);_.useEffect(function(){return()=>{rl(_e)&&r&&fe&&fe(_e)}},[r,O,_e,fe]);function q(){if(R){if(!ie||!_t)return;R(IE(ie,_t))}if(r&&F){if(!rl(_e)||!ns.current)return;F(_e,ns.current)}}function we(){Pe&&(xn(!1,Pe.toString()),k&&k(Pe))}_.useEffect(function(){ne({type:"RESET"})},[ne,O,_e]),_.useEffect(function(){if(!O||!Ge)return;const Me=uy(O.getPage(Ge)),ss=Me;return Me.promise.then(R1=>{ne({type:"RESOLVE",value:R1})}).catch(R1=>{ne({type:"REJECT",error:R1})}),()=>au(ss)},[ne,O,Ge]),_.useEffect(()=>{if(ie!==void 0){if(ie===!1){we();return}q()}},[ie,_t]);const Ne=_.useMemo(()=>rl(_e)&&Ge&&rl(pt)&&rl(_t)?{_className:s,canvasBackground:i,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:v,onGetAnnotationsSuccess:x,onGetStructTreeError:A,onGetStructTreeSuccess:E,onGetTextError:T,onGetTextSuccess:P,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:B,onRenderSuccess:D,onRenderTextLayerError:z,onRenderTextLayerSuccess:I,page:ie,pageIndex:_e,pageNumber:Ge,renderForms:V,renderTextLayer:K,rotate:pt,scale:_t}:null,[s,i,d,h,v,x,A,E,T,P,M,L,B,D,z,I,ie,_e,Ge,V,K,pt,_t]),ge=_.useMemo(()=>IO(X,()=>ie&&(_t?IE(ie,_t):void 0)),[X,ie,_t]),On=`${_e}@${_t}/${pt}`;function ue(){switch(W){case"custom":return ze(u,'renderMode was set to "custom", but no customRenderer was passed.'),p.jsx(u,{},`${On}_custom`);case"none":return null;case"canvas":default:return p.jsx(dq,{canvasRef:o},`${On}_canvas`)}}function dy(){return K?p.jsx(fq,{},`${On}_text`):null}function P1(){return $?p.jsx(iq,{},`${On}_annotations`):null}function hy(){function nr(ss){return!!(ss!=null&&ss.page)}if(!nr(Ne))throw new Error("page is undefined");const Me=typeof a=="function"?a(Ne):a;return p.jsxs(zO.Provider,{value:Ne,children:[ue(),dy(),P1(),Me]})}function fy(){return Ge?O===null||ie===void 0||ie===null?p.jsx(id,{type:"loading",children:typeof g=="function"?g():g}):O===!1||ie===!1?p.jsx(id,{type:"error",children:typeof f=="function"?f():f}):hy():p.jsx(id,{type:"no-data",children:typeof S=="function"?S():S})}return p.jsx("div",{className:Sf(s,c),"data-page-number":Ge,ref:VO(y,ns),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${_t}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...ge,children:fy()})}QW();Qs.workerSrc="pdf.worker.mjs";const mq={idle:"Para activar la experiencia WebAR necesitamos permiso para usar tu cmara.",requesting:"Solicitando acceso a la cmara",granted:"Cmara lista. Si no ves la previsualizacin, asegrate de apuntar a la taza.",error:"No pudimos usar la cmara de tu dispositivo."},gq=({onGranted:n,className:e="",copy:t={},variant:s="card"})=>{const[r,i]=_.useState("idle"),o=_.useMemo(()=>({...mq,...t}),[t]),a=async()=>{var u;if(!((u=navigator.mediaDevices)!=null&&u.getUserMedia)){i("error");return}i("requesting");try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(h=>h.stop()),i("granted"),n==null||n()}catch(d){console.error("[CameraPermissionPrompt] Error al iniciar cmara:",d),i("error")}},c=s==="overlay"?"w-full max-w-xs rounded-3xl border border-white/20 bg-black/70 p-6 text-center space-y-4 text-slate-200 backdrop-blur":"rounded-2xl border border-white/10 bg-black/40 p-4 space-y-3 text-slate-300/90";return p.jsxs("div",{className:`${c} ${e}`,children:[p.jsx("p",{className:"text-sm leading-relaxed",children:o[r]}),r!=="granted"?p.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold bg-purple-500/80 hover:bg-purple-500 transition text-white disabled:opacity-50",disabled:r==="requesting",children:r==="requesting"?"Abriendo cmara":"Activar cmara"}):null]})},yq="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js";let DS=null;function vq(){var n,e;return typeof window>"u"?Promise.reject(new Error("MindAR solo est disponible en el navegador.")):(e=(n=window.MINDAR)==null?void 0:n.IMAGE)!=null&&e.MindARThree?Promise.resolve(window.MINDAR.IMAGE):(DS||(DS=Ao(()=>import(yq),[]).then(t=>{var s,r;if(t!=null&&t.MindARThree)return t;if((r=(s=window.MINDAR)==null?void 0:s.IMAGE)!=null&&r.MindARThree)return window.MINDAR.IMAGE;throw new Error("MindAR no se inicializ correctamente.")}).catch(t=>{throw console.error("[loadMindAR] Error al importar MindAR:",t),t})),DS)}const bq="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js";let IS=null;function xq(){return typeof window>"u"?Promise.reject(new Error("Three.js solo est disponible en el navegador.")):window.__THREE_INSTANCE__?Promise.resolve(window.__THREE_INSTANCE__):(IS||(IS=Ao(()=>import(bq),[]).then(n=>(window.__THREE_INSTANCE__=n,n))),IS)}const wq=_.forwardRef(({targetSrc:n="/assets/targets.mind",isCameraReady:e=!1,className:t="",message:s="La taza te escucha.",overlay:r=null},i)=>{const o=_.useMemo(()=>{if(!n||/^(https?:)?\/\//i.test(n))return n;const y="/";if(n.startsWith(y))return n;const g=y.endsWith("/")?y:`${y}/`,S=n.replace(/^\/+/,"");return`${g}${S}`},[n]),a=_.useRef(null),c=_.useRef(null),[u,d]=_.useState("idle"),[h,f]=_.useState("");return _.useEffect(()=>{if(!e||!a.current||!o)return;let m=null,y=null,g=null,S=null,v=null;return(async()=>{d("loading"),f("");try{const A=await xq(),E=await vq();m=new E.MindARThree({container:a.current,imageTargetSrc:o,uiLoading:"no",uiError:"no",uiScanning:"no"});const{renderer:T,scene:P,camera:k}=m;y=T;const R=new A.HemisphereLight("#ffffff","#333344",1);P.add(R);const M=new A.DirectionalLight("#ffffff",.8);M.position.set(.5,1,.5),P.add(M);const L=m.addAnchor(0),{GLTFLoader:B}=await Ao(()=>import("./GLTFLoader-ab5cd9e3.js"),[]);v=(await new B().loadAsync("/webar/taza/gato-abstracto.glb")).scene,v.scale.set(.6,.6,.6),v.position.set(0,.3,0),v.rotation.set(0,Math.PI,0),L.group.add(v),await m.start();const I=m.video;I&&!a.current.contains(I)&&(I.setAttribute("playsinline","true"),I.muted=!0,I.style.position="absolute",I.style.top="0",I.style.left="0",I.style.width="100%",I.style.height="100%",I.style.objectFit="cover",I.style.zIndex="0",I.style.display="block",a.current.appendChild(I),S=I,c.current=I),d("running");const N=new A.Clock;g=()=>{const j=N.getElapsedTime();if(v){v.rotation.y=j*.4;const O=.6+Math.sin(j*.8)*.03;v.scale.set(O,O,O)}y.render(P,k)},y.setAnimationLoop(g)}catch(A){console.error("[MindARScene] Error al iniciar AR:",A),f((A==null?void 0:A.message)??"No pudimos iniciar la experiencia AR."),d("error")}})(),()=>{var A;y&&g&&y.setAnimationLoop(null),m&&(m.stop(),(A=m.renderer)==null||A.dispose()),c.current=null,S&&S.parentElement===a.current&&a.current.removeChild(S)}},[e,o]),_.useEffect(()=>{},[s]),_.useImperativeHandle(i,()=>({async captureFrame(){const m=c.current;if(!m||m.videoWidth===0||m.videoHeight===0)return null;const y=document.createElement("canvas");return y.width=m.videoWidth,y.height=m.videoHeight,y.getContext("2d").drawImage(m,0,0,y.width,y.height),await new Promise(S=>{y.toBlob(v=>S(v),"image/jpeg",.95)})}})),p.jsxs("div",{className:`relative w-full bg-transparent rounded-3xl overflow-hidden ${t}`,"data-ar-container":"true",children:[p.jsx("div",{ref:a,className:"absolute inset-0"}),u==="idle"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 text-sm pointer-events-none",children:"Esperando a que actives la cmara"}),u==="loading"&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-200 text-sm bg-black/40 pointer-events-none",children:[p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-purple-300 border-t-transparent mb-3"}),"Preparando portal..."]}),u==="error"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center px-6 text-sm text-red-300 bg-black/70 pointer-events-none",children:h}),r&&p.jsx("div",{className:"absolute inset-0",children:typeof r=="function"?r():r})]})}),yR=["La taza te escucha."],vR=({targetSrc:n="/assets/targets.mind",phrases:e=yR,onExit:t})=>{const[s,r]=_.useState(!1),[i,o]=_.useState(0),a=_.useRef(null),c=_.useMemo(()=>Array.isArray(e)&&e.length>0?e:yR,[e]);_.useEffect(()=>{o(0)},[n]);const u=()=>{o(y=>(y+1)%c.length)},d=()=>{t==null||t()},h=_.useCallback(async()=>{var y,g;if(!((y=a.current)!=null&&y.captureFrame)){Ue({description:"La cmara an no est lista para capturar."});return}try{const S=await a.current.captureFrame();if(!S){Ue({description:"No pudimos obtener la captura. Intenta de nuevo."});return}const v=new File([S],"miniverso-taza.jpg",{type:"image/jpeg"}),x="#EstoNoEsUnaTaza  Comparte tu portal y etiqueta a @gatoencerradoai para aparecer en la galera.";if(navigator.share&&((g=navigator.canShare)!=null&&g.call(navigator,{files:[v]})))await navigator.share({files:[v],title:"Miniverso Taza",text:x});else{const A=URL.createObjectURL(S),E=document.createElement("a");E.href=A,E.download="miniverso-taza.jpg",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(A),Ue({description:"Guardamos la captura. Comprtela desde tu galera con #EstoNoEsUnaTaza."})}}catch(S){console.error("[ARExperience] Error al compartir captura:",S),Ue({description:"No pudimos compartir la captura. Intenta ms tarde."})}},[]),f="rounded-full bg-black/55 text-white p-3 shadow-lg border border-white/15 hover:bg-black/70 transition backdrop-blur",m=s?p.jsx("div",{className:"absolute inset-x-0 bottom-5 flex justify-center pointer-events-none",children:p.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[p.jsx("button",{type:"button",onClick:u,className:f,"aria-label":"Nueva frase",children:p.jsx(e5,{size:18})}),p.jsx("button",{type:"button",onClick:h,className:f,"aria-label":"Compartir captura",children:p.jsx(s5,{size:18})}),p.jsx("button",{type:"button",onClick:d,className:f,"aria-label":"Salir de AR",children:p.jsx(s1,{size:18})})]})}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-6",children:p.jsx(gq,{onGranted:()=>r(!0),variant:"overlay",copy:{idle:"Activa tu cmara para revelar la frase de tu taza."}})});return p.jsxs("section",{className:"space-y-4 -mx-4 sm:mx-0",children:[p.jsx(wq,{ref:a,targetSrc:n,isCameraReady:s,message:c[i],className:"w-full min-h-[75vh] sm:min-h-[80vh]",overlay:m}),p.jsx("p",{className:"text-sm text-slate-400/80 px-4 sm:px-0",children:"Si el marcador no se detecta de inmediato, ajusta la iluminacin y mantn la taza completa dentro del encuadre."})]})};function bR({title:n="Miniverso Sonoro",subtitle:e="",videoUrl:t,musicOptions:s=[],poems:r=[],highlights:i=[],showHeader:o=!0}){const a=_.useRef(null),c=_.useRef(null),u='data:image/svg+xml;utf8,<svg%20xmlns="http://www.w3.org/2000/svg"%20width="120"%20height="120"><filter%20id="n"><feTurbulence%20type="fractalNoise"%20baseFrequency="0.7"%20numOctaves="2"%20stitchTiles="stitch"/></filter><rect%20width="120"%20height="120"%20filter="url(%23n)"%20opacity="0.2"/></svg>',[d,h]=_.useState(!1),[f,m]=_.useState(""),[y,g]=_.useState(""),[S,v]=_.useState(!1),[x,A]=_.useState(typeof window<"u"?window.innerWidth>=1024:!1);_.useEffect(()=>{const M=a.current;if(!M)return;const L=()=>{h(M.videoHeight>M.videoWidth)};return M.addEventListener("loadedmetadata",L),()=>M.removeEventListener("loadedmetadata",L)},[t]);const E=_.useMemo(()=>{const M=r.find(L=>L.id===y);return(M==null?void 0:M.text)??""},[r,y]),T=_.useMemo(()=>s.length>0?s:[{id:"silencio",label:"Silencio",url:""}],[s]);_.useEffect(()=>{c.current&&(f?(c.current.volume=.8,c.current.play().catch(()=>{})):c.current.pause())},[f]),_.useEffect(()=>{v(!1)},[t]),_.useEffect(()=>{if(typeof window>"u")return;const M=()=>{A(window.innerWidth>=1024)};return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]);const P=_.useMemo(()=>t?/\.(m4a|mp3|wav|aac|flac|ogg)(\?.*)?$/i.test(t):!1,[t]),k=_.useCallback(()=>{v(!0)},[]),R=o||i.length>0?p.jsxs("div",{className:"space-y-4",children:[o&&p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Sala de escucha inmersiva"}),p.jsx("h3",{className:"font-display text-4xl text-slate-50",children:n}),e&&p.jsx("p",{className:"max-w-2xl text-slate-300/80 leading-relaxed",children:e})]}),i.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 text-xs uppercase tracking-[0.25em] text-slate-400",children:i.map((M,L)=>p.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-[0.6rem]",children:M},L))})]}):null;return p.jsxs("div",{className:"space-y-10",children:[R,p.jsxs("div",{className:`relative mx-auto border border-white/10 rounded-3xl overflow-hidden shadow-2xl backdrop-blur-3xl transition-all duration-500 ${x?"w-full max-w-5xl aspect-[16/9]":d?"w-[340px] h-[620px]":"w-full max-w-5xl aspect-video"}`,children:[S?p.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 bg-black/60 px-6 py-8 text-center",children:[p.jsxs("p",{className:"text-sm text-slate-300",children:["No pudimos cargar este ",P?"audio":"video"," en esta vista."]}),t?p.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:P?"Escuchar en nueva pestaa":"Abrir en nueva pestaa"}):p.jsx("p",{className:"text-xs text-slate-500",children:"Revisa la fuente del archivo."})]}):p.jsx("video",{ref:a,src:t,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-cover",onError:k},t??"miniverso-sonoro-video"),!S&&p.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 pointer-events-none",style:{backgroundImage:`linear-gradient(180deg, rgba(255,255,255,0.05), rgba(15,23,42,0.7)), url("${u}")`,backgroundSize:"cover",backgroundBlendMode:"screen, overlay",opacity:.85}}),!S&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 bg-gradient-to-b from-black/60 to-transparent",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-300",children:"Cmara de resonancia"}),p.jsx("p",{className:"text-sm text-slate-100 opacity-90",children:"Video ritual errante"})]}),E&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-center bg-gradient-to-t from-black/70 to-transparent",children:p.jsx("p",{className:"text-lg leading-relaxed font-light text-slate-100 drop-shadow-xl",children:E})})]})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400",children:"Elige la msica"}),p.jsx("select",{className:"w-full rounded-2xl border border-white/10 bg-black/60 px-4 py-2 text-white",value:f,onChange:M=>m(M.target.value),children:T.map(M=>p.jsx("option",{value:M.url,children:M.label},M.id))}),p.jsx("audio",{ref:c,src:f,loop:!0})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400",children:"Elige un poema"}),p.jsxs("select",{className:"w-full rounded-2xl border border-white/10 bg-black/60 px-4 py-2 text-white",value:y,onChange:M=>g(M.target.value),children:[p.jsx("option",{value:"",children:"Ninguno"}),r.map(M=>p.jsx("option",{value:M.id,children:M.label},M.id))]})]})]})]})}function Sq(){const[n,e]=_.useState("segment"),[t,s]=_.useState([]),[r,i]=_.useState(!1),[o,a]=_.useState(null),[c,u]=_.useState(null),[d,h]=_.useState(""),[f,m]=_.useState(!1),[y,g]=_.useState(0),S=async()=>{try{const T=await(await fetch("/data/novela-preview.json")).json();s(T.segments||[])}catch(E){console.error("Error cargando segmentos:",E)}},v=(E,T)=>{y>=4||(a(E),u(T),h(""),i(!0))},x=()=>{i(!1),a(null),u(null),h("")};return{mode:n,setMode:e,segments:t,loadSegments:S,isModalOpen:r,openModal:v,closeModal:x,activeSegment:o,activePlan:c,reflection:d,setReflection:h,loading:f,reflectionCount:y,sendReflection:async()=>{if(d.trim()){m(!0);try{const{data:E,error:T}=await fetch("/functions/v1/send-blog-reflection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({segment_id:o.id,plan:c,reflection:d,author:"Invitado"})});T&&console.error("Supabase error:",T),g(P=>Math.min(P+1,4)),alert("Reflexin enviada."),x()}catch(E){console.error("Error enviando reflexin:",E)}m(!1)}}}}function Aq(){const[n,e]=_.useState(!0),t=_.useRef(null);return _.useEffect(()=>{if(typeof window>"u"||!("ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0))return;const r=()=>{e(!1),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{e(!0)},500)};return window.addEventListener("touchstart",r,{passive:!0}),window.addEventListener("touchmove",r,{passive:!0}),()=>{window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",r),t.current&&clearTimeout(t.current)}},[]),n}function _q({isOpen:n,onClose:e,segment:t,plan:s,reflection:r,setReflection:i,onSubmit:o,loading:a}){var u;if(_.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[n]),!n)return null;const c={academic:"Plano Acadmico",psychological:"Plano Psicolgico",narrative:"Plano Narrativo",theatrical:"Plano Teatral"};return p.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/80 backdrop-blur-3xl px-4",children:p.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-purple-400/40 bg-black/90 p-6 shadow-[0_30px_80px_rgba(15,23,42,0.75)]",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300/80",children:"Plano"}),p.jsx("h2",{className:"text-2xl font-semibold text-white",children:c[s]??"Plano"})]}),p.jsx("button",{onClick:e,className:"text-sm text-slate-300 hover:text-white",children:"Cerrar "})]}),p.jsx("p",{className:"text-sm text-slate-300/80 mb-6 leading-relaxed",children:(u=t==null?void 0:t.questions)==null?void 0:u[s]}),p.jsx("textarea",{className:"w-full min-h-[160px] rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-100 outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500/40 transition",placeholder:"Escribe tu reflexin aqu",value:r,onChange:d=>i(d.target.value)}),p.jsxs("div",{className:"mt-6 flex items-center justify-between gap-4",children:[p.jsx("button",{onClick:e,className:"text-sm uppercase tracking-[0.4em] text-slate-400 hover:text-white",children:"Cancelar"}),p.jsx("button",{onClick:o,disabled:a,className:"rounded-full bg-gradient-to-r from-purple-600/90 to-indigo-600/80 px-6 py-3 text-sm font-semibold text-white transition hover:from-purple-500/90 hover:to-indigo-500/90 disabled:opacity-60",children:a?"Enviando":"Enviar reflexin"})]})]})})}const Eq=[{plan:"academic",label:"Acadmico",Icon:OC},{plan:"psychological",label:"Psicolgico",Icon:$4},{plan:"narrative",label:"Narrativo",Icon:n1},{plan:"theatrical",label:"Teatral",Icon:i5}];function Cq({iconsVisible:n=!0,onSelect:e,disabled:t=!1,isTouchDevice:s=!1,readingMode:r="dark"}){return p.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:Eq.map(({plan:i,label:o,Icon:a})=>{const c=s?n?"opacity-100":"opacity-50":"opacity-0 group-hover:opacity-100",u=r==="premium"?"text-[#3b2a1f]":"text-white",d=r==="premium"?"stroke-[#3b2a1f]":"stroke-current";return p.jsxs("button",{type:"button",onClick:()=>!t&&e(i),disabled:t,className:`group flex flex-col items-center justify-center rounded-full border border-white/10 bg-white/5 py-3 text-[0.6rem] uppercase tracking-[0.4em] text-white transition-opacity duration-300 ${c} ${t?"cursor-not-allowed opacity-40":`hover:border-purple-400 hover:text-white ${u}`}`,"aria-label":`Abrir plano ${o}`,children:[p.jsx(a,{size:18,className:d}),p.jsx("span",{className:`mt-1 ${u}`,children:o})]},i)})})}function Tq(){const{segments:n,loadSegments:e,openModal:t,activeSegment:s,activePlan:r,reflection:i,setReflection:o,isModalOpen:a,closeModal:c,sendReflection:u,loading:d,reflectionCount:h}=Sq(),f=Aq(),m=h>=4,[y,g]=_.useState(!1),[S,v]=_.useState("dark"),x={dark:"bg-black/40 border-white/10 text-slate-100",premium:"bg-[#f7f2e8] border-[#c4bdae] text-[#3b2a1f] shadow-[0_20px_35px_rgba(0,0,0,0.15)]"},A={dark:"text-slate-100",premium:"text-[#3b2a1f]"},E={dark:'"Literata", "Times New Roman", serif',premium:'"Cormorant Garamond", "Palatino Linotype", serif'};return _.useEffect(()=>{e()},[]),_.useEffect(()=>{if(typeof window>"u")return;const T="ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0;g(T)},[]),p.jsxs("div",{className:"w-full min-h-screen px-4 py-8 text-slate-100",children:[p.jsxs("div",{className:"mx-auto flex w-full max-w-3xl flex-col items-center gap-6",children:[p.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:p.jsx("div",{className:"flex gap-3 items-center",children:["dark","premium"].map(T=>p.jsx("button",{onClick:()=>v(T),className:`w-8 h-8 rounded-full border transition ${S===T?"border-white/90 bg-white/80 shadow-lg":"border-white/30 bg-black/20"}`,"aria-label":`Modo ${T}`,children:p.jsx("span",{className:"hidden",children:T})},T))})}),m&&p.jsx("div",{className:"w-full max-w-[650px] rounded-2xl border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-center text-sm text-rose-200 shadow-lg shadow-rose-900/30",children:"Has alcanzado el lmite de reflexiones del preview."}),p.jsx("div",{className:"space-y-6",children:n.map(T=>p.jsxs("div",{className:`group mx-auto max-w-[650px] space-y-6 rounded-3xl border px-8 py-10 backdrop-blur-md shadow-[0_20px_50px_rgba(0,0,0,0.45)] transition-colors duration-500 ${x[S]}`,children:[p.jsx("p",{className:`text-base leading-relaxed ${A[S]}`,style:{fontFamily:E[S],lineHeight:1.8},children:T.text}),p.jsx(Cq,{onSelect:P=>t(T,P),iconsVisible:f,isTouchDevice:y,disabled:m,readingMode:S})]},T.id))}),")}"]}),p.jsx(_q,{isOpen:a,onClose:c,segment:s,plan:r,reflection:i,setReflection:o,loading:d,onSubmit:u})]})}Qs.workerSrc=`https://unpkg.com/pdfjs-dist@${NT}/build/pdf.worker.min.mjs`;const Wf={copycats:{label:"#CopyCats",type:"post-videos",slug:"carta-a-copycats",intro:"En el Miniverso Cine conviven dos pulsos del mismo universo: la mirada crtica y desbordada de CopyCats y la herida luminosa de Quirn. Aqu puedes asomarte a cartas creativas, ensayos abiertos y al proceso ntimo detrs del cortometraje que naci de nombrar tres tabes: el suicidio, el tarot y el arte como puente hacia lo que no sabemos decir.",videos:[{id:"copycats-v2",title:"Teaser de CopyCats",author:"Viviana Gonzlez",duration:"2:46",url:"https://player.vimeo.com/video/959781265?h=9b3b018f3e"},{id:"copycats-v3",title:"Teaser de Quirn",author:"Viviana Gonzlez",duration:"0:58",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/Quiron.mp4"}],notaAutoral:"La cmara mir lo que el teatro no poda sostener. CopyCats cuestiona; Quirn hiere con luz. Este espacio guarda esas miradas."},lataza:{label:"EstoNoEsUnaTaza",type:"object-webar",slug:"taza-que-habla",subtitle:"Esta no es una taza. Es un boleto.",intro:"Un objeto cotidiano convertido en smbolo de comunin. Cada taza est vinculada a un sentimiento. Cada sentimiento, a una historia personal.",note:"Apunta tu cmara a la taza. La pista aparecer.",ctaLabel:"Probar activacin WebAR",ctaLink:"/webar/taza/index.html",ctaMessage:"Cuando liberes la activacin WebAR, descubrirs la pista que le corresponde a tu taza.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/tazas.mp4",sentiments:["Es tu manera de apoyar la causa social de Gato Encerrado."],phrases:["La taza te habla."],instructions:["Permite el acceso a tu cmara para iniciar.","Coloca la taza completa en cuadro, con buena iluminacin.","Mantn el marcador visible hasta que aparezca la orbe."],comments:[{id:"la-taza-comment-1",quote:"La taza me mostr una frase que me persigui toda la semana.",author:"Usuario annimo"},{id:"la-taza-comment-2",quote:"No entend nada hasta que le agarr el modo.",author:"Sofa B."}],notaAutoral:"Un objeto cotidiano que abri un portal. La Taza no acompaa: revela. Lo que sostiene no es barro, sino vnculo."},miniversoNovela:{label:"Miniverso Novela",type:"blog-series",slug:null,intro:"Aqu se cruzan la autoficcin, la novela grfica y las vidas que an no caben en escena. Fragmentos, procesos y pistas que solo existen cuando alguien las lee.",notaAutoral:"La novela es donde la escena se desborda. Fragmentos que respiran distinto cuando alguien los lee. Aqu la historia sigue probndose.",entries:[{id:"compra-libro",title:"Edicin fsica",description:"La novela completa en su versin impresa. Incluye QR secreto.",image:"/assets/edicion-fisica.png",type:"purchase-link",url:"/comprar-novela"},{id:"novel-apps",title:"Activa tu novela",description:"Cada formato tiene su propia app interactiva. La novela de autoficcin ya se puede activar; el cmic transmedia abre pronto su lector con pistas y capas expandidas.",type:"novel-apps",apps:[{id:"autoficcion-app",name:"Lector interactivo de la novela",description:"Lee los primeros fragmentos de la novela y desbloquea preguntas guiadas en cuatro planos de lectura: acadmico, psicolgico, narrativo y teatral.",snippet:{tagline:"Contraportada interactiva",text:"Al escanear tu ejemplar se desbloquean lecturas personalizadas. Aqu puedes probar una versin de inicio.",sideLayout:!0},ctaLabel:"Leer fragmento",ctaAction:"openAutoficcionPreview"}]},{id:"comentarios-lectores",title:"Conversaciones con lectores",type:"quotes",quotes:[{quote:"No saba que un libro poda hablarme a mitad de la pgina.",author:"Lectora annima"}]}],ctaLabel:"Leer los primeros fragmentos"},miniversoSonoro:{label:"Miniverso Sonoro  Suea en Tres Capas",type:"audio-dream",intro:"Este miniverso mezcla imgenes errantes, pistas sonoras y palabras mviles para que crees tu propia atmsfera. Solo entra, prende un video, ponle la msica que quieras, elige un poema y deja que la combinacin te sorprenda.",highlights:["Video que fluye solo.","Msica que t eliges.","Poemas que respiran en pantalla."],exploration:["El video corre por su cuenta  cambia con cada visita.","T eliges la msica  ajusta el nimo del sueo.","Escoge un poema  y observa cmo se desliza mientras todo ocurre."],closing:["Cada mezcla es irrepetible.","Cada combinacin abre un sueo distinto.","Entra y crea el tuyo."],videoUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/videos-v/Vacio.mov",musicOptions:[{id:"silencio",label:"Silencio",url:""},{id:"ensayo-abierto",label:"Ensayo Abierto (pista)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/audio/cat_theme.m4a"}],poems:[{id:"pulmon",label:"Poema 1  Pulmn",text:"La noche se abre como un pulmn cansado."},{id:"cuerpo",label:"Poema 2  Cuerpo",text:"Lo que cae del sueo tambin cae del cuerpo."}],notaAutoral:"Imagen, msica y palabra en suspensin. Cada mezcla inventa otro nimo. Aqu el sueo se edita solo."}},kq=[{id:"miniversos",title:"Miniverso Escnico",description:"La funcin que deton este universo narrativo. Voces, cuerpos y trances en escena.",icon:vj,iconClass:"text-purple-300",notaAutoral:"Aqu comenz todo: un temblor en escena que sigue resonando fuera del teatro. Este miniverso guarda esa primera vibracin."},{id:"lataza",title:"Miniverso Taza",description:"Objeto ritual con WebAR. Una excusa para seguir la historia desde lo cotidiano.",icon:H4,iconClass:"text-amber-300",notaAutoral:"Un objeto cotidiano que abri un portal. La Taza no acompaa: revela. Lo que sostiene no es barro, sino vnculo."},{id:"miniversoNovela",title:"Miniverso Novela",description:"Desde la autoficcin hasta las vietas de la novela grfica.",icon:OC,iconClass:"text-emerald-300",notaAutoral:"La novela es donde la escena se desborda. Fragmentos que respiran distinto cuando alguien los lee. Aqu la historia sigue probndose."},{id:"copycats",title:"Miniverso Cine",description:"Quirn y otros filmes que piensan el cuerpo del Gato en clave cinematogrfica.",icon:BC,iconClass:"text-rose-300",notaAutoral:"La cmara mir lo que el teatro no poda sostener. CopyCats cuestiona; Quirn hiere con luz. Este espacio guarda esas miradas."},{id:"miniversoSonoro",title:"Miniverso Sonoro",description:"Capas de imagen, sonido y poema para soar.",icon:wj,iconClass:"text-cyan-300",notaAutoral:"Imagen, msica y palabra en suspensin. Cada mezcla inventa otro nimo. Aqu el sueo se edita solo."},{id:"detodxs",title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice del universo.",icon:VC,iconClass:"text-lime-300",notaAutoral:"Tecnologa como acompaamiento, no como solucin. Experiencias que cuidan, preguntan y extienden la historia cuando nadie est mirando."},{id:"clubdegato",title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre el universo.",icon:Aj,iconClass:"text-indigo-300",notaAutoral:"El rastro vivo del proyecto. Crnicas, ecos, desvos. Donde lo que pasa en escena encuentra su segunda vida."}],xR=[{id:"tratamientos",title:"Tratamientos emocionales",description:"Financia terapias para jvenes que no pueden costearlas. Isabel Ayuda para la Vida, A.C. cubre sesiones cuando detectamos riesgo emocional.",icon:xj,metric:"6 sesiones promedio por suscriptor"},{id:"residencias",title:"Residencias creativas",description:"Laboratorios donde arte y acompaamiento se combinan para reparar memoria y cuerpo. Becas completas para procesos de creacin y contencin.",icon:Q4,metric:"3 residencias activas por temporada"},{id:"app-escolar",title:"App Causa Social en escuelas",description:"Aplicacin que detecta seales tempranas en estudiantes. Tu cuota permite capacitar psiclogos, visitar escuelas y dar seguimiento ante crisis.",icon:VC,metric:"15 escuelas atendidas cada semestre"}],Pq=()=>{const[n,e]=_.useState(!1),[t,s]=_.useState(null),[r,i]=_.useState({}),o=_.useRef(null),[a,c]=_.useState(xR[0].id),[u,d]=_.useState(null),[h,f]=_.useState(null),[m,y]=_.useState(null),[g,S]=_.useState(null),v=_.useRef(null),x=_.useRef(null),[A,E]=_.useState(0),T=Math.max(A-48,320),[P,k]=_.useState(!1),[R,M]=_.useState(!1),[L,B]=_.useState(!1),[D,z]=_.useState(!1),I=_.useCallback(()=>{e(!0)},[]),N=_.useCallback(()=>{e(!1)},[]),j=_.useCallback(async q=>{const we=Wf[q];if(!(!we||we.type==="blog-series"||!we.slug)){i(Ne=>({...Ne,[q]:{...Ne[q]??{},status:"loading",error:null}}));try{const Ne=await MH(we.slug);if(!Ne)throw new Error("No encontramos el texto asociado a este miniverso.");i(ge=>({...ge,[q]:{status:"success",post:Ne,error:null}}))}catch(Ne){i(ge=>({...ge,[q]:{status:"error",post:null,error:(Ne==null?void 0:Ne.message)??"Ocurri un error al cargar este showcase."}}))}}},[]),O=_.useCallback(q=>{if(Wf[q]){s(Ne=>Ne===q?null:q);const we=Wf[q];if(we.slug&&we.type!=="blog-series"){const Ne=r[q];(!Ne||Ne.status==="error")&&j(q)}return}I()},[I,j,r]),F=_.useCallback(q=>{var we;q&&(window.dispatchEvent(new CustomEvent("gatoencerrado:open-blog",{detail:{slug:q}})),(we=document.getElementById("dialogo-critico"))==null||we.scrollIntoView({behavior:"smooth",block:"start"}))},[]),$=_.useCallback(q=>{q!=null&&q.src&&d({src:q.src,title:q.title??"",description:q.description??""})},[]),V=_.useCallback(()=>{d(null)},[]),W=_.useCallback(()=>{var q;(q=x.current)==null||q.scrollIntoView({behavior:"smooth",block:"start"})},[]);_.useCallback(q=>{q!=null&&q.src&&(f({src:q.src,title:q.title??"",description:q.description??""}),y(null),S(null))},[]);const K=_.useCallback(()=>{f(null),y(null),S(null)},[]),Y=_.useCallback(()=>{k(!0),typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches?(M(!0),document.body.classList.add("overflow-hidden")):M(!1)},[]),re=_.useCallback(()=>{k(!1),M(!1),document.body.classList.remove("overflow-hidden")},[]),fe=_.useCallback(()=>{B(!0)},[]),xe=_.useCallback(()=>{B(!1)},[]);_.useEffect(()=>{L?document.body.classList.add("overflow-hidden"):!P&&!R&&document.body.classList.remove("overflow-hidden")},[L,P,R]);const X=_.useCallback(({numPages:q})=>{y(q)},[]),G=t?Wf[t]:null,ne=t?r[t]:null,ie=_.useMemo(()=>{var q;return(q=ne==null?void 0:ne.post)!=null&&q.content?ne.post.content.split(/\n{2,}/).map(we=>we.trim()).filter(Boolean):[]},[ne]);_.useEffect(()=>{t&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"start"})},[t]),_.useEffect(()=>{t!=="lataza"&&(k(!1),M(!1),document.body.classList.remove("overflow-hidden"))},[t]),_.useEffect(()=>{if(!u&&!h)return;const q=we=>{we.key==="Escape"&&(u&&V(),h&&K())};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[u,h,V,K]),_.useEffect(()=>{if(!h)return;const q=()=>{v.current&&E(v.current.offsetWidth)};return q(),window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[h]),_.useEffect(()=>()=>{document.body.classList.remove("overflow-hidden")},[]);const Pe=q=>{Ue({description:q||"Muy pronto liberaremos la activacin WebAR de este objeto."})},ns=_.useCallback(async()=>{var q;if(typeof navigator>"u"||!((q=navigator.mediaDevices)!=null&&q.getUserMedia)){Ue({description:"Tu dispositivo no permite abrir la cmara desde el navegador."});return}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})).getTracks().forEach(Ne=>Ne.stop()),Ue({description:"Listo. En la versin final validaremos el QR con geolocalizacin para redimir tu ejemplar."})}catch(we){console.error("Error al acceder a la cmara:",we),Ue({description:"No pudimos acceder a la cmara. Revisa los permisos e intntalo de nuevo."})}},[]),_e=_.useCallback(q=>{if(q){if(q.ctaUrl){window.open(q.ctaUrl,"_blank","noopener,noreferrer");return}if(q.ctaAction==="openCamera"){ns();return}if(q.ctaAction==="openAutoficcionPreview"){z(!0);return}Ue({description:q.ctaMessage||"Muy pronto liberaremos esta app interactiva."})}},[ns]),Ge=()=>G!=null&&G.notaAutoral?p.jsxs(ee.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},className:"rounded-2xl border border-white/10 p-6 bg-black/30 text-slate-300/80 text-sm leading-relaxed mt-4 shadow-[0_25px_80px_rgba(0,0,0,0.45)]",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300 mb-2",children:"Nota Autoral"}),p.jsx("p",{children:G.notaAutoral})]},G.id):null,pt=(q="Pronto liberaremos la carta completa de este miniverso.")=>G!=null&&G.slug?(ne==null?void 0:ne.status)==="loading"?p.jsx("p",{className:"text-slate-400 text-sm",children:"Cargando la carta que acompaa a este miniverso"}):(ne==null?void 0:ne.status)==="error"?p.jsx("p",{className:"text-red-300 text-sm",children:ne.error}):(ne==null?void 0:ne.status)==="success"&&ne.post?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400 mb-4",children:[ne.post.author?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(n1,{size:16}),ne.post.author,ne.post.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",ne.post.author_role]}):null]}):null,ne.post.published_at?p.jsx("span",{children:new Date(ne.post.published_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}):null]}),p.jsx("h4",{className:"font-display text-2xl text-slate-100 mb-6",children:ne.post.title}),p.jsx("div",{className:"space-y-5 text-slate-200 leading-relaxed font-light",children:ie.length===0?p.jsx("p",{children:"Muy pronto abriremos el expediente completo de este miniverso. Gracias por tu curiosidad."}):ie.map((we,Ne)=>p.jsx("p",{children:we},Ne))})]}):p.jsx("p",{className:"text-slate-400 text-sm",children:q}):null,_t=()=>{var we,Ne;if(!G)return p.jsx("p",{className:"text-slate-400 text-sm",children:"Selecciona un miniverso para explorar su carta y materiales."});if(G.type==="object-webar")return p.jsxs("div",{className:"grid gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"rounded-3xl border border-white/10 overflow-hidden bg-black/30",children:t==="lataza"&&P&&!R?p.jsx("div",{className:"p-0 sm:p-4",children:p.jsx(vR,{targetSrc:"/webar/taza/taza.mind",phrases:G.phrases,onExit:re})}):p.jsxs(p.Fragment,{children:[/\.mp4($|\?)/i.test(G.image)?p.jsx("video",{src:G.image,className:"w-full h-64 object-cover bg-black/50",autoPlay:!0,playsInline:!0,muted:!0,loop:!0,controls:!0,poster:G.imagePoster}):p.jsx("img",{src:G.image,alt:"Ilustracin de La Taza",className:"w-full h-64 object-cover bg-black/50"}),p.jsxs("div",{className:"p-6 space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400 uppercase tracking-[0.3em]",children:G.note}),G.instructions?p.jsx("ul",{className:"text-sm text-slate-300/90 space-y-2",children:G.instructions.map((ge,On)=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-purple-300 mt-1",children:""}),p.jsx("span",{children:ge})]},On))}):null,t==="lataza"?p.jsx(Te,{className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",variant:"outline",onClick:Y,children:G.ctaLabel}):G.ctaLink?p.jsx("a",{href:G.ctaLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold",children:G.ctaLabel}):p.jsx(Te,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>Pe(G.ctaMessage),children:G.ctaLabel})]})]})}),G.sentiments?p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Sentimientos vinculados"}),p.jsx("ul",{className:"space-y-3 text-slate-300/80 text-sm leading-relaxed",children:G.sentiments.map((ge,On)=>p.jsxs("li",{children:[" ",ge]},On))})]}):null]}),p.jsx("div",{className:"space-y-6",children:G.comments?p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Comentarios de la comunidad"}),p.jsx("div",{className:"space-y-4",children:G.comments.map(ge=>p.jsxs("div",{className:"rounded-xl border border-white/5 p-4 bg-black/20",children:[p.jsx("p",{className:"text-slate-100 font-light mb-2",children:ge.quote}),p.jsx("p",{className:"text-xs text-slate-500",children:ge.author})]},ge.id))})]}):null})]});if(G.type==="audio-dream")return p.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6 order-1 lg:order-2",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cmo explorar"}),p.jsx("ol",{className:"list-decimal list-inside space-y-3 text-slate-200 text-sm leading-relaxed md:text-base",children:(we=G.exploration)==null?void 0:we.map((ge,On)=>p.jsx("li",{children:ge},On))})]}),p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3 text-sm text-slate-300",children:(Ne=G.closing)==null?void 0:Ne.map((ge,On)=>p.jsx("p",{children:ge},On))}),p.jsx("div",{className:"lg:hidden",children:p.jsx("button",{type:"button",onClick:fe,className:"w-full rounded-2xl border border-purple-400/60 bg-gradient-to-r from-purple-600/80 to-blue-500/60 px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white transition hover:from-purple-500 hover:to-blue-400",children:"Abrir cmara de resonancia"})})]}),p.jsx("div",{className:"hidden lg:flex justify-center px-4 order-2 lg:order-1 lg:px-0",children:p.jsx("div",{className:"w-full max-w-[420px] lg:max-w-[640px]",children:p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6",children:p.jsx(bR,{title:G.label,subtitle:G.intro,videoUrl:G.videoUrl,musicOptions:G.musicOptions,poems:G.poems,highlights:G.highlights,showHeader:!1})})})}),L&&p.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/95",children:[p.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.4em] text-purple-300",children:"Cmara de resonancia"}),p.jsx("button",{type:"button",onClick:xe,className:"text-sm font-semibold text-purple-100 transition hover:text-purple-50",children:"Cerrar"})]}),p.jsx("div",{className:"flex-1 overflow-auto p-4",children:p.jsx(bR,{title:G.label,subtitle:G.intro,videoUrl:G.videoUrl,musicOptions:G.musicOptions,poems:G.poems,highlights:G.highlights,showHeader:!0})})]})]});if(G.type==="blog-series"){const ge=G.entries??[],On=ue=>{switch(ue.type){case"internal-reading":return ue.previewMode==="pdf"&&ue.previewPdfUrl?p.jsx(Te,{onClick:()=>z(!0),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):ue.previewMode==="image"&&ue.previewImage?p.jsx(Te,{onClick:()=>$({src:ue.previewImage,title:ue.title,description:ue.description}),className:"w-full sm:w-auto justify-center",children:"Ver fragmento"}):ue.contentSlug?p.jsx(Te,{onClick:()=>F(ue.contentSlug),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):null;case"purchase-link":return ue.url?p.jsx("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold transition",children:"Comprar edicin"}):null;case"qr-scan":return p.jsx(Te,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10 w-full sm:w-auto justify-center",onClick:()=>Ue({title:"Escanea el QR",description:"Abre la cmara de tu dispositivo y apunta al cdigo para activar la experiencia."}),children:"Escanear QR"});default:return null}};return p.jsxs("div",{className:"space-y-10",children:[p.jsx("div",{children:pt()}),ge.length>0?p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:ge.map(ue=>{var hy,fy,nr;if(ue.type==="horizontal-gallery")return p.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ue.title}),ue.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ue.description}):null]}),p.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:(hy=ue.images)==null?void 0:hy.map((Me,ss)=>p.jsx("div",{className:"w-48 h-32 flex-shrink-0 rounded-xl overflow-hidden border border-white/5 bg-black/40",children:p.jsx("img",{src:Me,alt:`${ue.title} ${ss+1}`,className:"w-full h-full object-cover"})},`${ue.id}-${ss}`))})]},ue.id);if(ue.type==="quotes")return p.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ue.title}),p.jsx("div",{className:"space-y-4",children:(fy=ue.quotes)==null?void 0:fy.map((Me,ss)=>p.jsxs("blockquote",{className:"text-slate-100 font-light leading-relaxed",children:[p.jsx("p",{children:Me.quote}),Me.author?p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:Me.author}):null]},`${ue.id}-quote-${ss}`))})]},ue.id);if(ue.type==="novel-apps")return p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ue.title}),ue.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ue.description}):null]}),p.jsx("div",{className:"grid gap-4 grid-cols-1",children:(nr=ue.apps)==null?void 0:nr.map(Me=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsx("p",{className:"font-semibold text-slate-100",children:Me.name}),p.jsx("span",{className:`text-xs uppercase tracking-[0.3em] ${Me.status==="Disponible"?"text-emerald-300":"text-slate-500"}`,children:Me.status})]}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Me.description}),Me.snippet?p.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/60 p-4 space-y-2",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:Me.snippet.tagline}),Me.snippet.image?p.jsx("img",{src:Me.snippet.image,alt:Me.name,className:"w-full h-32 object-cover rounded-lg border border-white/5"}):null,Me.snippet.text?p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:Me.snippet.text}):null]}):null,p.jsx(Te,{onClick:()=>_e(Me),variant:Me.status==="Disponible"?"default":"outline",className:`w-full justify-center ${Me.status==="Disponible"?"bg-purple-600/80 hover:bg-purple-600 text-white":"border-purple-400/40 text-purple-200 hover:bg-purple-500/10"}`,children:Me.ctaLabel})]},Me.id))})]},ue.id);const dy=ue.previewImage||ue.image,P1=On(ue);return p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[dy?p.jsx("div",{className:"rounded-xl overflow-hidden border border-white/5 bg-black/40 h-52 sm:h-64",children:p.jsx("img",{src:dy,alt:ue.title,className:"w-full h-full object-cover",loading:"lazy"})}):null,p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ue.title}),ue.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ue.description}):null]}),P1]},ue.id)})}):p.jsx("p",{className:"text-sm text-slate-400",children:"Muy pronto liberaremos el resto de la serie."})]})}const q=G.videos??[];return p.jsxs("div",{className:"space-y-10",children:[p.jsx("div",{children:pt("Pronto liberaremos la carta completa de este miniverso. Mientras tanto puedes explorar la galera audiovisual.")}),q.length>0?p.jsxs("div",{children:[p.jsx("h5",{className:"font-display text-xl text-slate-100 mb-4",children:"Galera audiovisual"}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:q.map(ge=>p.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40 flex flex-col",children:[p.jsx("div",{className:"aspect-video w-full",children:/\.mp4($|\?)/i.test(ge.url)?p.jsx("video",{src:ge.url,title:ge.title,className:"w-full h-full object-cover bg-black",controls:!0,playsInline:!0,preload:"metadata",poster:ge.poster}):p.jsx("iframe",{src:ge.url,title:ge.title,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}),p.jsxs("div",{className:"p-4 space-y-1 text-sm text-slate-300",children:[p.jsx("p",{className:"font-semibold text-slate-100",children:ge.title}),ge.author?p.jsx("p",{children:ge.author}):null,ge.duration?p.jsxs("p",{className:"text-slate-500",children:["Duracin: ",ge.duration]}):null]})]},ge.id))})]}):null]})};return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"transmedia",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16 space-y-6",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Universo Transmedia"}),p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium text-gradient italic",children:"Miniversos que sostienen la causa"}),p.jsxs("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:["#GatoEncerrado es un universo transmedial compuesto por miniversos narrativos. Cada experiencia digital, objeto o narrativa expandida financia el acompaamiento psicoemocional de"," ",p.jsx("button",{type:"button",onClick:W,className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Isabel Ayuda para la Vida, A.C."})]})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:kq.map((q,we)=>{const Ne=q.icon,ge=q.iconClass??"text-purple-200";return p.jsxs(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:we*.1,ease:"easeOut"},viewport:{once:!0},className:"group glass-effect rounded-xl p-8 hover-glow cursor-pointer flex flex-col transition-all duration-300 hover:border-purple-400/50",onClick:()=>O(q.id),children:[p.jsx("div",{className:"flex items-center justify-start mb-6 transition-all duration-300 group-hover:scale-110",children:p.jsx(Ne,{size:32,className:`${ge} drop-shadow-[0_0_12px_rgba(168,85,247,0.4)]`})}),p.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-3",children:q.title}),p.jsx("p",{className:"text-slate-300/70 text-base leading-relaxed mb-4 flex-grow font-light",children:q.description}),p.jsxs("div",{className:"text-purple-300 flex items-center gap-2 font-semibold transition-all duration-300 group-hover:gap-3",children:["Explorar",p.jsx(B4,{size:18})]})]},q.id)})}),G?p.jsxs(ee.div,{ref:o,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mt-12 glass-effect rounded-2xl p-8 md:p-12 border border-white/10",children:[p.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-2",children:"Showcase"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-3",children:G.label}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light max-w-3xl",children:G.intro}),Ge()]}),p.jsx("button",{onClick:()=>s(null),className:"text-sm text-slate-400 hover:text-white transition self-start md:self-auto",children:"Cerrar showcase "})]}),p.jsx("div",{className:"mt-8",children:_t()})]}):null,p.jsxs("div",{className:"mt-16 grid lg:grid-cols-[3fr_2fr] gap-10",children:[p.jsxs(ee.div,{ref:x,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col justify-between",children:[p.jsxs("div",{className:"space-y-5",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/80",children:"Apoya el proyecto"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100",children:"Tu suscripcin sostiene la causa social de #GatoEncerrado"}),p.jsxs("p",{className:"text-slate-300/80 leading-relaxed font-light",children:["La taquilla mantiene la obra en escena; el universo transmedia financia acompaamiento emocional real. Cada cuota se distribuye en tres frentes que opera Isabel Ayuda para la Vida, A.C."," ",p.jsx("a",{href:"https://www.ayudaparalavida.com/index.html",target:"_blank",rel:"noreferrer",className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Visita su sitio"})]}),p.jsx("div",{className:"mt-4 space-y-3",children:xR.map(q=>{const we=q.icon,Ne=a===q.id;return p.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20 overflow-hidden transition",children:[p.jsxs("button",{type:"button",onClick:()=>c(ge=>ge===q.id?null:q.id),className:"w-full flex items-center justify-between gap-4 px-4 py-3 text-left hover:bg-white/5 transition",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-full bg-purple-500/15 text-purple-200",children:p.jsx(we,{size:18})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-slate-100",children:q.title}),p.jsx("p",{className:"text-xs text-slate-400",children:q.metric})]})]}),p.jsx("span",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:Ne?"Ocultar":"Ver impacto"})]}),Ne?p.jsx("div",{className:"px-4 pb-4 text-sm text-slate-300/90",children:q.description}):null]},q.id)})})]}),p.jsxs("div",{className:"mt-8 flex flex-col gap-4 md:flex-row md:items-center",children:[p.jsx(Te,{onClick:I,variant:"ghost",className:"text-purple-200 hover:text-white hover:bg-white/10 justify-start md:justify-center",children:" Ver miniversos activos"}),p.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:[p.jsx(xj,{size:20,className:"text-purple-300"}),p.jsx("span",{children:"Tu suscripcin = Apoyo directo"})]})]})]}),p.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-6 border border-white/10 bg-slate-950/50 shadow-2xl",children:p.jsx(RH,{})})]})]})]}),p.jsx(PH,{open:n,onClose:N}),h?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:K}),p.jsxs("div",{className:"relative z-10 w-full max-w-5xl space-y-4",children:[p.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Lectura en progreso"}),p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:h.title||"Fragmento en PDF"}),h.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed max-w-2xl",children:h.description}):null]}),p.jsx("button",{type:"button",onClick:K,className:"self-start rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})]}),p.jsx("div",{ref:v,className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl p-4 max-h-[75vh] overflow-auto",children:g?p.jsx("p",{className:"text-sm text-red-300 text-center py-8",children:g}):p.jsx(sq,{file:h.src,onLoadSuccess:X,onLoadError:q=>{console.error("Error al cargar PDF del miniverso:",q),S("No pudimos cargar el fragmento en PDF. Intenta de nuevo ms tarde.")},loading:p.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Preparando pginas"}),children:m?Array.from(new Array(m),(q,we)=>p.jsx("div",{className:"mb-6 last:mb-0",children:p.jsx(pq,{pageNumber:we+1,width:T,renderTextLayer:!1,renderAnnotationLayer:!1})},`pdf-page-${we+1}`)):null})})]})]}):null,u?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:V}),p.jsxs("div",{className:"relative z-10 w-full max-w-3xl",children:[p.jsx("div",{className:"flex justify-end mb-4",children:p.jsx("button",{type:"button",onClick:V,className:"rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl overflow-hidden",children:[p.jsx("div",{className:"bg-black/60",children:p.jsx("img",{src:u.src,alt:u.title||"Vista previa",className:"w-full h-auto"})}),u.title||u.description?p.jsxs("div",{className:"p-6 space-y-2",children:[u.title?p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:u.title}):null,u.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:u.description}):null,p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:"Ilustracin de la novela"})]}):null]})]})]}):null,P&&R?p.jsx("div",{className:"fixed inset-0 z-40 bg-black",children:p.jsx(vR,{targetSrc:"/webar/taza/taza.mind",phrases:Wf.lataza.phrases,onExit:re})}):null,D&&p.jsx("div",{className:"fixed inset-0 z-[200] overflow-auto bg-black/80 backdrop-blur-xl p-6",children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("button",{onClick:()=>z(!1),className:"text-slate-300 hover:text-white mb-6",children:"Cerrar "}),p.jsx(Tq,{})]})})]})},qO=_.createContext(void 0),Rq=({children:n})=>{const{toast:e}=Lj(),[t,s]=_.useState(null),[r,i]=_.useState(null),[o,a]=_.useState(!0),c=_.useCallback(async m=>{i(m),s((m==null?void 0:m.user)??null),a(!1)},[]);_.useEffect(()=>{(async()=>{const{data:{session:g}}=await Ot.auth.getSession();c(g)})();const{data:{subscription:y}}=Ot.auth.onAuthStateChange(async(g,S)=>{c(S)});return()=>y.unsubscribe()},[c]);const u=_.useCallback(async(m,y,g)=>{const{error:S}=await Ot.auth.signUp({email:m,password:y,options:g});return S&&e({variant:"destructive",title:"Sign up Failed",description:S.message||"Something went wrong"}),{error:S}},[e]),d=_.useCallback(async(m,y)=>{const{error:g}=await Ot.auth.signInWithPassword({email:m,password:y});return g&&e({variant:"destructive",title:"Sign in Failed",description:g.message||"Something went wrong"}),{error:g}},[e]),h=_.useCallback(async()=>{const{error:m}=await Ot.auth.signOut();return m&&e({variant:"destructive",title:"Sign out Failed",description:m.message||"Something went wrong"}),{error:m}},[e]),f=_.useMemo(()=>({user:t,session:r,loading:o,signUp:u,signIn:d,signOut:h}),[t,r,o,u,d,h]);return p.jsx(qO.Provider,{value:f,children:n})},Nq=()=>{const n=_.useContext(qO);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},wR={hidden:{opacity:0},visible:{opacity:1}},Mq={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1}},jq=({onClose:n})=>{const[e,t]=_.useState(""),[s,r]=_.useState(!1),[i,o]=_.useState(null),a=_.useCallback(async u=>{if(u.preventDefault(),s)return;const d=e.trim();if(!d){o({type:"error",text:"Ingresa tu correo para enviarte el enlace mgico."});return}r(!0),o(null);const{error:h}=await Ot.auth.signInWithOtp({email:d,options:{emailRedirectTo:typeof window<"u"?window.location.href:void 0}});h?o({type:"error",text:h.message||"No pudimos enviar el enlace."}):(o({type:"success",text:"Te enviamos un link mgico. Revisa tu correo para continuar."}),t("")),r(!1)},[e,s]),c=_.useCallback(async()=>{o(null);const{error:u}=await Ot.auth.signInWithOAuth({provider:"google",options:{redirectTo:typeof window<"u"?window.location.href:void 0}});if(u){o({type:"error",text:u.message||"No pudimos iniciar sesin con Google."});return}n==null||n()},[n]);return _.useEffect(()=>{const u=d=>{d.key==="Escape"&&(n==null||n())};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[n]),p.jsxs(ee.div,{className:"fixed inset-0 z-[110] flex items-center justify-center px-4 py-6",initial:"hidden",animate:"visible",exit:"hidden",variants:wR,children:[p.jsx(ee.button,{type:"button",className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n,"aria-label":"Cerrar overlay de autenticacin",variants:wR}),p.jsxs(ee.div,{role:"dialog","aria-modal":"true","aria-labelledby":"tracking-overlay-title","aria-describedby":"tracking-overlay-desc",className:"relative z-10 w-full max-w-md transform rounded-3xl border border-white/10 bg-[#0a0019]/90 p-6 shadow-2xl backdrop-blur-xl",initial:"hidden",animate:"visible",exit:"hidden",variants:Mq,children:[p.jsx("button",{type:"button",onClick:n,className:"absolute top-3 right-3 rounded-full border border-white/15 px-2 py-1 text-sm text-slate-400 hover:text-slate-100","aria-label":"Cerrar overlay",children:""}),p.jsxs("div",{className:"space-y-4 pt-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500/80",children:"Seguimiento"}),p.jsx("h3",{id:"tracking-overlay-title",className:"font-display text-2xl text-slate-50",children:"Activa el seguimiento de tu propuesta"})]}),p.jsx("p",{id:"tracking-overlay-desc",className:"text-sm text-slate-300 leading-relaxed",children:"Necesitamos confirmar tu identidad para enviarte una notificacin cuando tu propuesta sea publicada. Esto no genera ningn cobro ni suscripcin."}),p.jsx("button",{type:"button",onClick:c,className:"flex w-full items-center justify-center rounded-full border border-white/20 bg-white/10 px-4 py-3 text-sm font-semibold text-white transition hover:border-white/40 hover:bg-white/15",children:"Iniciar sesin con Google"}),p.jsxs("form",{onSubmit:a,className:"space-y-3",children:[p.jsx("label",{htmlFor:"tracking-email",className:"sr-only",children:"Correo electrnico"}),p.jsx("input",{id:"tracking-email",type:"email",value:e,onChange:u=>t(u.target.value),placeholder:"nombre@correo.com",className:"w-full rounded-2xl border border-white/20 bg-black/30 px-4 py-3 text-sm text-slate-100 placeholder:text-slate-400 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",required:!0}),p.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 px-4 py-3 text-sm font-semibold text-white transition hover:from-purple-500 hover:to-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",children:s?"Enviando...":"Enviar Magic Link"})]}),i?p.jsx("p",{className:`text-xs ${i.type==="error"?"text-rose-300":"text-emerald-300"}`,children:i.text}):null,p.jsx("p",{className:"text-xs text-slate-500",children:"Tu aporte no se perder. Continuars donde te quedaste."})]})]})]})},xu=[{id:"obra_escenica",icon:p.jsx(vj,{size:20,className:"text-purple-300"}),title:"Miniverso Escnico - La Obra",description:"La funcin que deton este universo narrativo. Voces, cuerpos y trances en escena."},{id:"miniverso_novela",icon:p.jsx(OC,{size:20,className:"text-emerald-300"}),title:"Miniverso Novela",description:"Desde la autoficcin de *Mi Gato Encerrado* hasta las vietas de *Tres pies al gato*."},{id:"taza",icon:p.jsx(G4,{size:20,className:"text-amber-300"}),title:"Miniverso Taza",description:"Objeto ritual y marcador AR. Una excusa para seguir la historia desde lo cotidiano."},{id:"cine",icon:p.jsx(BC,{size:20,className:"text-rose-300"}),title:"Miniverso Cine",description:"Quirn y otros filmes que piensan el cuerpo del Gato en clave cinematogrfica."},{id:"apps",icon:p.jsx(VC,{size:20,className:"text-lime-300"}),title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice y guardin del universo."},{id:"sonoro",icon:p.jsx(wj,{size:20,className:"text-cyan-300"}),title:"Miniverso Sonoro",description:"Suea imgenes, elige msica, invoca un poema: combina tu propio universo."},{id:"bitacora",icon:p.jsx(Aj,{size:20,className:"text-indigo-300"}),title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre cosas de la vida... y la muerte ."},{id:"otro",icon:p.jsx(r5,{size:20,className:"text-fuchsia-300"}),title:"Otra contribucin",description:"Performance, glitch sonoro o investigacin hbrida. Tambin cabe aqu."}],Lq={hidden:{opacity:0},visible:{opacity:.85}},Dq={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},OS={name:"",email:"",role:"",proposal:"",attachmentUrl:""},FS="gatoencerrado-contrib-form",SR=new Set(["apps","bitacora","sonoro"]),Iq={obra_escenica:"Si la Obra te toc, este espacio es tuyo.",miniverso_novela:"Si encontraste algo tuyo entre estas pginas, djalo dicho.",taza:"Qu historia se activ cuando tomaste la taza? Escrbela aqu.",cine:"Qu imagen te persigui despus? Cuntanos qu viste ms all de la pantalla.",apps:"Cmo cambi tu forma de jugar o explorar este universo?",bitacora:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron.",otro:"Si no cabe en un miniverso es porque an no lo hemos nombrado.",sonoro:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron."},Oq=({open:n,onClose:e})=>{const{user:t}=Nq(),s=!!(t!=null&&t.email),r=_.useMemo(()=>{var X,G;return((X=t==null?void 0:t.user_metadata)==null?void 0:X.alias)||((G=t==null?void 0:t.user_metadata)==null?void 0:G.full_name)||""},[t]),[i,o]=_.useState(OS),[a,c]=_.useState("idle"),[u,d]=_.useState(""),[h,f]=_.useState(xu[0]),[m,y]=_.useState(!1),[g,S]=_.useState(!1),[v,x]=_.useState([]),[A,E]=_.useState(!1),[T,P]=_.useState(!1),[k,R]=_.useState(()=>typeof window>"u"?!1:window.matchMedia("(min-width: 768px)").matches),[M,L]=_.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 767px)").matches),B=_.useRef(null),D=_.useRef(null);_.useEffect(()=>{if(typeof window>"u")return;const X=window.localStorage.getItem(FS);if(X)try{const G=JSON.parse(X);B.current=G,o(ie=>({...ie,...G.formState})),y(!!G.notifyOnPublish);const ne=xu.find(ie=>ie.id===G.selectedCategory);ne&&f(ne)}catch{B.current=null}},[]),_.useEffect(()=>{n&&(B.current?S(!0):(o({...OS,name:r||"",email:(t==null?void 0:t.email)??""}),y(!1),f(xu[0]),S(!1)),c("idle"),d(""))},[n,r,t==null?void 0:t.email]),_.useEffect(()=>{if(!n)return;const X=G=>{G.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[n,e]),_.useEffect(()=>{if(typeof window>"u")return;const X=window.matchMedia("(min-width: 768px)"),G=window.matchMedia("(max-width: 767px)"),ne=Pe=>{R(Pe.matches)},ie=Pe=>{L(Pe.matches)};return R(X.matches),L(G.matches),X.addEventListener?(X.addEventListener("change",ne),G.addEventListener("change",ie)):(X.addListener(ne),G.addListener(ie)),()=>{X.removeEventListener?(X.removeEventListener("change",ne),G.removeEventListener("change",ie)):(X.removeListener(ne),G.removeListener(ie))}},[]),_.useEffect(()=>{s&&E(!1)},[s]);const z=_.useCallback(X=>{const{name:G,value:ne}=X.target;o(ie=>({...ie,[G]:ne}))},[]),I=_.useCallback(()=>{E(!1)},[]),N=_.useCallback(()=>{P(!0),setTimeout(()=>P(!1),420)},[]),j=_.useCallback(()=>{if(typeof window>"u")return;const X=window.AudioContext||window.webkitAudioContext;if(!X)return;const G=new X,ne=G.createOscillator(),ie=G.createGain();ne.type="sine",ne.frequency.value=720,ie.gain.value=.03,ne.connect(ie),ie.connect(G.destination),ne.start(),ne.stop(G.currentTime+.1),ne.onended=()=>{G.close()}},[]),O=_.useCallback(()=>{D.current||(D.current=setTimeout(()=>{E(!0),D.current=null},520))},[]),F=_.useCallback(X=>{if(N(),j(),setTimeout(j,140),!s){O();return}y(X.target.checked)},[N,j,s,O]);_.useEffect(()=>{if(typeof window>"u")return;const X={formState:i,notifyOnPublish:m,selectedCategory:h.id};window.localStorage.setItem(FS,JSON.stringify(X)),B.current=X},[i,m,h]),_.useEffect(()=>()=>{D.current&&clearTimeout(D.current)},[]);const $=_.useCallback(()=>{const X=Date.now();x(G=>[...G,X]),setTimeout(()=>{x(G=>G.filter(ne=>ne!==X))},1100)},[]),V=_.useCallback(async X=>{var G;if(X.preventDefault(),a!=="loading"){if(!i.name.trim()||!i.email.trim()||!i.proposal.trim()){Ue({description:"Completa tu nombre, correo y una breve propuesta."});return}if(m&&!s){Ue({description:"Inicia sesin para recibir la notificacin personalizada."});return}c("loading"),d("");try{const ne=(h==null?void 0:h.id)??"obra_escenica",ie={name:i.name.trim(),email:i.email.trim().toLowerCase(),role:i.role.trim()||null,topic:ne,proposal:i.proposal.trim(),attachment_url:i.attachmentUrl.trim()||null,notify_on_publish:m},{error:Pe}=await Ot.from("blog_contributions").insert(ie);if(Pe){console.error("[ContributionModal] Error al registrar propuesta:",Pe),c("error"),d((G=Pe.message)!=null&&G.includes("blog_contributions")?"Asegrate de crear la tabla blog_contributions en Supabase.":"No pudimos registrar tu propuesta. Intenta nuevamente.");return}i.email.trim()&&await Fq({email:i.email.trim().toLowerCase(),name:i.name.trim(),proposal:i.proposal.trim(),category:(h==null?void 0:h.title)??xu[0].title}),c("success"),$(),Ue({description:"Gracias! Revisaremos tu propuesta y te contactaremos pronto."}),o({...OS,name:r||"",email:(t==null?void 0:t.email)??""}),y(!1),f(xu[0]),S(!1),typeof window<"u"&&window.localStorage.removeItem(FS),B.current=null}catch(ne){console.error("[ContributionModal] Excepcin al guardar:",ne),c("error"),d("Ocurri un error inesperado. Intenta ms tarde.")}}},[i,a,h,m,s,$,r,t==null?void 0:t.email]),W=_.useCallback(()=>{a!=="loading"&&(e==null||e())},[e,a]),K=_.useCallback(X=>{f(X),S(!0)},[]),Y=_.useMemo(()=>Iq[h==null?void 0:h.id]??"Contribuye al dilogo crtico",[h]),re=_.useCallback(()=>{a!=="loading"&&S(!1)},[a]),fe=()=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-4 py-3 text-[0.8rem] text-slate-300 leading-relaxed",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:"Qu necesitas saber?"}),p.jsx("p",{children:" Algunos miniversos an estn bajo construccin."}),p.jsx("p",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),p.jsx("p",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."}),p.jsx("div",{className:"border-t border-white/10 pt-3 text-xs uppercase tracking-[0.35em] text-slate-500",children:" Qu recibirs?"}),p.jsx("p",{className:"text-sm",children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]}),xe=()=>p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Formulario"}),p.jsx("h3",{id:"contribution-modal-title",className:"font-display text-2xl text-slate-50",children:Y}),p.jsxs("p",{className:"text-sm text-slate-400/80",children:["Ests escribiendo sobre"," ",p.jsx("span",{className:"text-purple-200 font-semibold",children:h.title})]})]}),M?p.jsx("button",{type:"button",onClick:re,className:"mb-4 flex items-center gap-2 text-sm font-semibold text-purple-300 hover:text-purple-200",children:" Regresar"}):null,M&&SR.has(h.id)?p.jsx("div",{className:"mb-4",children:fe()}):null,p.jsxs("form",{className:"space-y-4",onSubmit:V,children:[p.jsx("input",{name:"name",type:"text",required:!0,value:i.name,onChange:z,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo quieres que te nombremos?"}),p.jsx("input",{name:"email",type:"email",required:!0,value:i.email,onChange:z,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"}),p.jsx("input",{name:"role",type:"text",value:i.role,onChange:z,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Crtica teatral, artista, investigador, espectador..."}),p.jsx("textarea",{name:"proposal",rows:5,required:!0,value:i.proposal,onChange:z,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Resume tu texto, crnica o propuesta curatorial..."}),p.jsx("input",{name:"attachmentUrl",type:"url",value:i.attachmentUrl,onChange:z,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Enlace a material adicional (Drive, portfolio, video...)"}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-white/5 bg-black/20 px-4 py-3",children:[p.jsxs(ee.button,{type:"button",onClick:F,"aria-label":"Activar notificacin de publicacin",className:"relative flex items-center gap-3 text-left group focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-purple-400/60",children:[p.jsx(ee.div,{animate:T?{scale:[1,1.12,.96,1.05,1]}:m?{scale:[1,1.04,1],boxShadow:"0 0 12px rgba(150,100,255,0.45)"}:{scale:1},transition:{duration:.45,ease:"easeOut"},className:`h-5 w-5 rounded-full border border-white/20 ${m?"bg-gradient-to-r from-purple-500 to-indigo-500 shadow-[0_0_12px_rgba(150,100,255,0.45)]":"bg-slate-600/40"}`}),p.jsx("span",{className:"text-sm text-slate-300/80 leading-relaxed",children:"Quiero recibir notificacin cuando se publique mi propuesta"})]}),s?null:p.jsx("span",{className:"pl-8 text-xs text-slate-500",children:"Inicia sesin para activar el seguimiento"})]}),a==="error"?p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:u}):null,a==="success"?p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Recibimos tu propuesta. Te contactaremos si necesitamos ms detalles."}):null,p.jsx(Te,{type:"submit",disabled:a==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:a==="loading"?"Enviando":"Enviar propuesta"})]}),k&&SR.has(h.id)?p.jsx("div",{className:"mt-6 space-y-3",children:fe()}):null]});return p.jsxs(p.Fragment,{children:[p.jsx(fo,{children:n?p.jsxs(ee.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6 sm:py-12",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ee.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:Lq,onClick:W,"aria-hidden":"true"}),p.jsxs(ee.div,{role:"dialog","aria-modal":"true","aria-labelledby":"contribution-modal-title",variants:Dq,className:"relative z-10 w-full max-w-5xl h-full max-h-[90vh] rounded-3xl border border-white/10 bg-slate-950 p-4 sm:p-8 shadow-2xl overflow-hidden flex flex-col gap-6",children:[p.jsxs("div",{className:"relative overflow-visible",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Blog / Dilogo vivo"}),p.jsx("h2",{className:"font-display text-2xl sm:text-3xl text-slate-50",children:"Contribuye al dilogo crtico"})]}),p.jsx("button",{onClick:W,className:"text-slate-400 hover:text-white transition text-xl leading-none","aria-label":"Cerrar formulario de propuestas",children:""})]}),v.map(X=>p.jsx(Bq,{seed:X},X))]}),p.jsxs("div",{className:"mt-6 flex flex-col gap-6 md:flex-row md:items-start md:gap-6",children:[p.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto pr-3 md:max-h-[72vh] md:pr-0",children:xu.map(X=>p.jsxs("button",{type:"button",onClick:()=>K(X),className:`w-full rounded-2xl border px-4 py-4 text-left transition ${h.id===X.id?"bg-purple-500/15 border-purple-300/40":"bg-black/20 border-white/10 hover:border-purple-300/30"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[X.icon,p.jsx("h4",{className:"text-slate-100 font-medium",children:X.title})]}),p.jsx("p",{className:"text-sm text-slate-400/80 leading-relaxed",children:X.description})]},X.id))}),k?p.jsx("div",{className:"md:w-[520px] md:shrink-0",children:g?p.jsx(ee.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.35,ease:"easeOut"},className:"flex h-full max-h-[78vh] flex-col rounded-3xl border border-white/10 bg-slate-950/90 p-6 shadow-2xl overflow-y-auto",children:xe()}):p.jsx("div",{className:"flex h-full min-h-[320px] items-center justify-center rounded-3xl border border-dashed border-white/10 bg-black/30 px-4 text-center text-sm text-slate-400",children:"Selecciona una categora para abrir el formulario."})}):null]}),p.jsx(fo,{children:!k&&g?p.jsxs(p.Fragment,{children:[p.jsx(ee.button,{type:"button",className:"absolute inset-0 bg-black/40 md:hidden","aria-label":"Cerrar formulario",onClick:re,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsx(ee.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:24,stiffness:240},className:"absolute inset-y-0 right-0 w-full bg-slate-950 border-l border-white/15 shadow-2xl p-6 overflow-y-auto md:hidden",children:xe()})]}):null})]})]}):null}),p.jsx(fo,{children:A?p.jsx(jq,{onClose:I}):null})]})};async function Fq({email:n,name:e,proposal:t,category:s}){if(n)try{const{error:r}=await Ot.functions.invoke("send-proposal-confirmation",{body:{email:n,name:e,proposal:t,category:s}});r&&console.error("[ContributionModal] Error en sendConfirmationEmail:",r)}catch(r){console.error("[ContributionModal] Excepcin en sendConfirmationEmail:",r)}}const AR=["#f472b6","#a855f7","#facc15","#34d399"],Bq=({seed:n})=>{const e=_.useMemo(()=>Array.from({length:12},(t,s)=>({left:Math.random()*100,top:Math.random()*20,delay:Math.random()*.2,color:AR[s%AR.length]})),[n]);return p.jsx("div",{className:"confetti-layer",children:e.map((t,s)=>p.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${t.top}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${s}`))})},BS=n=>(n||"").toString().trim().toLowerCase(),pm=["curaduria","expansiones","backstage"],Qv={curaduria:{id:"curaduria",label:"Curadura Reflexiva",summary:"Textos crticos y anlisis profundos sobre la obra y su universo, escritos por investigadores, curadoras y voces especializadas.",keywords:["curaduria","curatorial","critica","ensayo","analisis","reflexiva"]},expansiones:{id:"expansiones",label:"Expansiones Narrativas",summary:"Microficciones, comunidad y relatos que acompaan los miniversos transmedia: cartas, diarios, audios y relatos colectivos.",keywords:["miniverso","transmedia","ficcion","comunidad","microficcion","expansion"]},backstage:{id:"backstage",label:"Detrs de Cmaras",summary:"Noticias, avances y bitcoras del proceso creativo: apps, novela, ensayo tcnico, produccin y archivos del montaje.",keywords:["backstage","proceso","produccion","apps","novela","noticias","detras"]}},$q=["carta-a-copycats","taza-que-habla"],_R=pm[0],Vq=n=>{if(!n)return _R;const e=BS(n.category);if(e&&pm.includes(e))return e;const t=BS(n.slug);if(t&&$q.includes(t))return"expansiones";const s=Array.isArray(n.tags)?n.tags.map(r=>BS(r)).filter(Boolean):[];for(const r of pm){const i=Qv[r].keywords;if(s.some(o=>i.includes(o)))return r}return _R},ER={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},zq=({post:n,onSelect:e})=>{const t=n.published_at?new Date(n.published_at):null;return p.jsxs(ee.article,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,ease:"easeOut"},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col hover-glow transition-shadow",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm text-slate-400",children:[t&&p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(FC,{size:16}),t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}),n.read_time_minutes?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(yj,{size:16}),n.read_time_minutes," min lectura"]}):null,p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(n1,{size:16}),n.author,n.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]})]}),p.jsx("h3",{className:"font-display text-2xl md:text-3xl font-medium text-slate-100 mb-4",children:n.title}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-6",children:n.excerpt}),Array.isArray(n.tags)&&n.tags.length>0?p.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:n.tags.map(s=>p.jsx("span",{className:"text-xs uppercase tracking-wider text-purple-200/80 bg-purple-500/10 border border-purple-400/20 px-3 py-1 rounded-full",children:s},s))}):null,p.jsx(Te,{onClick:()=>e(n),variant:"outline",className:"self-start border-purple-400/40 text-purple-200 hover:bg-purple-500/20",children:"Leer artculo completo"})]})},Uq=({post:n,onClose:e})=>{const t=_.useMemo(()=>n!=null&&n.content?n.content.split(/\n{2,}/).map(r=>r.trim()).filter(Boolean):[],[n]),s=n.published_at?new Date(n.published_at):null;return p.jsxs(ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.4,ease:"easeOut"},className:"glass-effect rounded-3xl p-8 md:p-12 border border-white/10 shadow-2xl backdrop-blur-xl",children:[p.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[p.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-400",children:[s?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(FC,{size:16}),s.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}):null,p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(n1,{size:16}),n.author,n.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]}),n.read_time_minutes?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(yj,{size:16}),n.read_time_minutes," min lectura"]}):null]}),p.jsx(Te,{onClick:e,variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/10",children:"Cerrar artculo"})]}),p.jsx("h3",{className:"font-display text-3xl md:text-4xl font-semibold text-slate-50 mb-8",children:n.title}),p.jsx("div",{className:"space-y-6 text-slate-200 leading-relaxed font-light",children:t.length===0?p.jsx("p",{children:"Este artculo estar disponible muy pronto. Gracias por tu inters en la comunidad crtica de #GatoEncerrado."}):t.map((r,i)=>p.jsx("p",{children:r},i))})]})},$S="gatoencerrado-blog-onboarding",Hq=({posts:n=[],isLoading:e=!1,error:t=null})=>{const[s,r]=_.useState(null),[i,o]=_.useState(null),[a,c]=_.useState(!1),[u,d]=_.useState("all"),[h,f]=_.useState(""),[m,y]=_.useState(!1),g=_.useRef(null),S=_.useRef(!1),v=_.useMemo(()=>n.map(k=>({...k,category:Vq(k)})),[n]),x=_.useMemo(()=>[...v].sort((k,R)=>{const M=k.published_at?new Date(k.published_at).getTime():0;return(R.published_at?new Date(R.published_at).getTime():0)-M}),[v]),A=_.useMemo(()=>{const k=h.trim().toLowerCase();return x.filter(R=>(u==="all"?!0:R.category===u)?k?[R.title,R.author,R.excerpt,...Array.isArray(R.tags)?R.tags:[]].filter(Boolean).join(" ").toLowerCase().includes(k):!0:!1)},[x,u,h]),E=_.useCallback(k=>{r(k),requestAnimationFrame(()=>{const R=document.getElementById("blog-article");R==null||R.scrollIntoView({behavior:"smooth",block:"start"})})},[]),T=_.useCallback(k=>{d(k),requestAnimationFrame(()=>{var R;(R=g.current)==null||R.scrollIntoView({behavior:"smooth",block:"start"})})},[]);_.useEffect(()=>{if(i&&v.length>0){const k=v.find(R=>R.slug===i);k&&(E(k),o(null))}},[E,i,v]),_.useEffect(()=>{t&&Ue({description:"No se pudieron cargar los artculos del blog."})},[t]),_.useEffect(()=>{const k=R=>{var B;const{slug:M}=R.detail||{};if(!M)return;const L=v.find(D=>D.slug===M);L?E(L):o(M),(B=document.getElementById("dialogo-critico"))==null||B.scrollIntoView({behavior:"smooth"})};return window.addEventListener("gatoencerrado:open-blog",k),()=>window.removeEventListener("gatoencerrado:open-blog",k)},[E,v]);const P=_.useCallback(()=>{c(!0),y(!1),S.current=!0,typeof window<"u"&&window.localStorage.setItem($S,"seen")},[]);return _.useEffect(()=>{if(typeof window>"u"||S.current)return;if(window.localStorage.getItem($S)==="seen"){y(!1),S.current=!0;return}y(!0);const R=setTimeout(()=>{y(!1),window.localStorage.setItem($S,"seen"),S.current=!0},6e3);return()=>clearTimeout(R)},[]),p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"dialogo-critico",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Dilogo Crtico"}),p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Pensamiento crtico, comunidad y resonancia"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Un espacio de pensamiento crtico, creatividad y potica donde convergen curadura, ficcin expandida y noticias detrs de escena. Filtra por inters, busca autoras especficas o explora las lneas editoriales."})]}),p.jsxs("div",{className:"space-y-16",children:[p.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1,ease:"easeOut"},viewport:{once:!0},className:"grid md:grid-cols-3 gap-6",children:pm.map(k=>p.jsxs("div",{className:"glass-effect rounded-2xl p-6 border border-white/10 flex flex-col gap-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:Qv[k].label}),p.jsx("p",{className:"text-slate-300/80 text-sm leading-relaxed flex-1",children:Qv[k].summary}),p.jsx(Te,{variant:"link",onClick:()=>T(k),className:"text-purple-300 hover:text-white self-start px-0",children:"Leer esta lnea editorial"})]},k))}),p.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{type:"button",onClick:()=>d("all"),className:`rounded-full border px-4 py-2 text-sm transition ${u==="all"?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:"Todas"}),pm.map(k=>p.jsx("button",{type:"button",onClick:()=>d(k),className:`rounded-full border px-4 py-2 text-sm transition ${u===k?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:Qv[k].label},k))]}),p.jsxs("div",{className:"relative w-full md:w-72",children:[p.jsx(t5,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),p.jsx("input",{type:"search",value:h,onChange:k=>f(k.target.value),placeholder:"Buscar por ttulo o autor",className:"w-full rounded-full border border-white/10 bg-black/30 pl-10 pr-4 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400"})]})]}),p.jsx(ee.div,{ref:g,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.12}}},className:"grid md:grid-cols-2 gap-8",children:e?p.jsx(ee.div,{variants:ER,className:"md:col-span-2 text-center text-slate-400 py-12",children:"Cargando artculos"}):A.length===0?p.jsx(ee.div,{variants:ER,className:"md:col-span-2 text-center text-slate-400 py-12",children:"No encontramos textos con ese criterio. Ajusta el filtro o comparte un nuevo testimonio."}):A.map(k=>p.jsx(zq,{post:k,onSelect:E},k.id))}),p.jsx("div",{id:"blog-article",children:p.jsx(fo,{mode:"wait",children:s?p.jsx(Uq,{post:s,onClose:()=>r(null)},s.id):null})})]}),p.jsxs(ee.div,{id:"blog-contribuye",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-20 glass-effect rounded-2xl p-8 md:p-12 text-center",children:[p.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"Algo de la obra se qued contigo?"}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-8 max-w-2xl mx-auto font-light",children:"Invitamos a espectadores, artistas, investigadores y espritus curiosos a compartir cmo esta obra reson en su forma de mirar, sentir, imaginar o habitar el mundo. Tu palabra tambin construye este universo."}),p.jsxs("div",{className:"relative inline-flex flex-col items-center gap-2",children:[m?p.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -top-10 bg-purple-600/80 text-white text-xs px-3 py-1 rounded-full shadow-lg",children:"Nuevo! Abre la bandeja lateral y comparte tu texto"}):null,p.jsxs(Te,{id:"blog-submit-cta",onClick:P,className:"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white px-8 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow mx-auto",children:[p.jsx(J4,{size:18})," Enviar propuesta"]})]})]})]})]}),p.jsx(Oq,{open:a,onClose:()=>c(!1)})]})};var Gq=BR[" useId ".trim().toString()]||(()=>{}),Wq=0;function KO(n){const[e,t]=_.useState(Gq());return iu(()=>{n||t(s=>s??String(Wq++))},[n]),n||(e?`radix-${e}`:"")}var C1="Collapsible",[qq,XO]=Zw(C1),[Kq,OT]=qq(C1),YO=_.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...a}=n,[c,u]=e1({prop:s,defaultProp:r??!1,onChange:o,caller:C1});return p.jsx(Kq,{scope:t,disabled:i,contentId:KO(),open:c,onOpenToggle:_.useCallback(()=>u(d=>!d),[u]),children:p.jsx(In.div,{"data-state":BT(c),"data-disabled":i?"":void 0,...a,ref:e})})});YO.displayName=C1;var QO="CollapsibleTrigger",JO=_.forwardRef((n,e)=>{const{__scopeCollapsible:t,...s}=n,r=OT(QO,t);return p.jsx(In.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":BT(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:Mn(n.onClick,r.onOpenToggle)})});JO.displayName=QO;var FT="CollapsibleContent",ZO=_.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=OT(FT,n.__scopeCollapsible);return p.jsx(MC,{present:t||r.open,children:({present:i})=>p.jsx(Xq,{...s,ref:e,present:i})})});ZO.displayName=FT;var Xq=_.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:s,children:r,...i}=n,o=OT(FT,t),[a,c]=_.useState(s),u=_.useRef(null),d=vo(e,u),h=_.useRef(0),f=h.current,m=_.useRef(0),y=m.current,g=o.open||a,S=_.useRef(g),v=_.useRef(void 0);return _.useEffect(()=>{const x=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(x)},[]),iu(()=>{const x=u.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const A=x.getBoundingClientRect();h.current=A.height,m.current=A.width,S.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),c(s)}},[o.open,s]),p.jsx(In.div,{"data-state":BT(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:g&&r})});function BT(n){return n?"open":"closed"}var Yq=YO,Qq=JO,Jq=ZO,Zq=_.createContext(void 0);function e9(n){const e=_.useContext(Zq);return n||e||"ltr"}var Pr="Accordion",t9=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[$T,n9,s9]=UM(Pr),[T1,$9]=Zw(Pr,[s9,XO]),VT=XO(),eF=Ae.forwardRef((n,e)=>{const{type:t,...s}=n,r=s,i=s;return p.jsx($T.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?p.jsx(a9,{...i,ref:e}):p.jsx(o9,{...r,ref:e})})});eF.displayName=Pr;var[tF,r9]=T1(Pr),[nF,i9]=T1(Pr,{collapsible:!1}),o9=Ae.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...o}=n,[a,c]=e1({prop:t,defaultProp:s??"",onChange:r,caller:Pr});return p.jsx(tF,{scope:n.__scopeAccordion,value:Ae.useMemo(()=>a?[a]:[],[a]),onItemOpen:c,onItemClose:Ae.useCallback(()=>i&&c(""),[i,c]),children:p.jsx(nF,{scope:n.__scopeAccordion,collapsible:i,children:p.jsx(sF,{...o,ref:e})})})}),a9=Ae.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},...i}=n,[o,a]=e1({prop:t,defaultProp:s??[],onChange:r,caller:Pr}),c=Ae.useCallback(d=>a((h=[])=>[...h,d]),[a]),u=Ae.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return p.jsx(tF,{scope:n.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:p.jsx(nF,{scope:n.__scopeAccordion,collapsible:!0,children:p.jsx(sF,{...i,ref:e})})})}),[l9,k1]=T1(Pr),sF=Ae.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:s,dir:r,orientation:i="vertical",...o}=n,a=Ae.useRef(null),c=vo(a,e),u=n9(t),h=e9(r)==="ltr",f=Mn(n.onKeyDown,m=>{var R;if(!t9.includes(m.key))return;const y=m.target,g=u().filter(M=>{var L;return!((L=M.ref.current)!=null&&L.disabled)}),S=g.findIndex(M=>M.ref.current===y),v=g.length;if(S===-1)return;m.preventDefault();let x=S;const A=0,E=v-1,T=()=>{x=S+1,x>E&&(x=A)},P=()=>{x=S-1,x<A&&(x=E)};switch(m.key){case"Home":x=A;break;case"End":x=E;break;case"ArrowRight":i==="horizontal"&&(h?T():P());break;case"ArrowDown":i==="vertical"&&T();break;case"ArrowLeft":i==="horizontal"&&(h?P():T());break;case"ArrowUp":i==="vertical"&&P();break}const k=x%v;(R=g[k].ref.current)==null||R.focus()});return p.jsx(l9,{scope:t,disabled:s,direction:r,orientation:i,children:p.jsx($T.Slot,{scope:t,children:p.jsx(In.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:f})})})}),Hb="AccordionItem",[c9,zT]=T1(Hb),rF=Ae.forwardRef((n,e)=>{const{__scopeAccordion:t,value:s,...r}=n,i=k1(Hb,t),o=r9(Hb,t),a=VT(t),c=KO(),u=s&&o.value.includes(s)||!1,d=i.disabled||n.disabled;return p.jsx(c9,{scope:t,open:u,disabled:d,triggerId:c,children:p.jsx(Yq,{"data-orientation":i.orientation,"data-state":uF(u),...a,...r,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});rF.displayName=Hb;var iF="AccordionHeader",oF=Ae.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=k1(Pr,t),i=zT(iF,t);return p.jsx(In.h3,{"data-orientation":r.orientation,"data-state":uF(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:e})});oF.displayName=iF;var OE="AccordionTrigger",aF=Ae.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=k1(Pr,t),i=zT(OE,t),o=i9(OE,t),a=VT(t);return p.jsx($T.ItemSlot,{scope:t,children:p.jsx(Qq,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...a,...s,ref:e})})});aF.displayName=OE;var lF="AccordionContent",cF=Ae.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=k1(Pr,t),i=zT(lF,t),o=VT(t);return p.jsx(Jq,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...o,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});cF.displayName=lF;function uF(n){return n?"open":"closed"}var u9=eF,d9=rF,h9=oF,dF=aF,hF=cF;const f9=u9,fF=Ae.forwardRef(({className:n,...e},t)=>p.jsx(d9,{ref:t,className:di("border-b",n),...e}));fF.displayName="AccordionItem";const pF=Ae.forwardRef(({className:n,children:e,...t},s)=>p.jsx(h9,{className:"flex",children:p.jsxs(dF,{ref:s,className:di("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,p.jsx(V4,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));pF.displayName=dF.displayName;const mF=Ae.forwardRef(({className:n,children:e,...t},s)=>p.jsx(hF,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:p.jsx("div",{className:di("pb-4 pt-0",n),children:e})}));mF.displayName=hF.displayName;const p9={Direccin:{name:"Gilberto Corrales",bio:"Director, dramaturgo y actor. Licenciado en Teatro por la Facultad de Artes de la UABC, ha dirigido ms de cuarenta obras, la mayora de su autora. Su trabajo explora la transdisciplina y la investigacin del lenguaje escnico. Fundador de Incendio Producciones, sus obras han estado presentes en la Muestra Nacional de Teatro y en festivales de Colombia, Argentina y EE.UU. Ganador del Premio Juventud 2016 y del FITU UNAM. Dirige el Contagio Tijuana y colabora con artistas como Jorge Ballina y Daniel Primo.",image:"/images/placeholder-direccion.jpg"},Dramaturgia:{name:"Carlos A. Prez H.",bio:"Artista transmedial, autor y dramaturgo. Su obra habita entre teatro, escritura y tecnologa, proponiendo una potica crtica y humana. Formado en el ITESO, la Universidad de Salamanca y LABASAD Barcelona, integra astrologa psicolgica, cuerpo y arte digital en una mirada simblica. Creador del universo transmedia #GatoEncerrado, concibe el acto creativo como una forma de acompaamiento y transformacin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlos_perez.gif"},Elenco:{description:"Actores y actrices que encarnan el pulso emocional de la obra desde la fisicalidad, la voz y la presencia simblica.",members:[{name:"Ricardo Mrquez Salgado",role:"Intrprete",bio:"Comuniclogo, modelo y actor. Ha participado en teatro, cine y publicidad. Destacan sus coprotagnicos en 'Ideas para no morir en el anonimato' y 'Entre Dos'. Su presencia combina energa escnica y precisin esttica.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/ricardo.jpg"},{name:"Cynthia Teresa Rodrguez Aguirre",role:"Intrprete",bio:"Artista interdisciplinaria egresada de la UABC. Su prctica integra fotografa, escritura y teatro. Ha participado en el San Diego Fringe Festival y en montajes de Incendio Producciones. Actualmente se enfoca en la direccin escnica y la exploracin visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/cyndi.jpg"},{name:"Mariana de los Santos",role:"Intrprete",bio:"Actriz tijuanense formada en CEART y con experiencia en cine y teatro contemporneo. Su trabajo corporal revela una sensibilidad potica que dialoga entre lo ntimo y lo colectivo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariana.jpg"},{name:"Carlos Valdez Rosas",role:"Intrprete",bio:"Actor y productor de Incendio Producciones. Su trabajo combina performance, posdrama e interdisciplina. Ha participado en la Muestra Nacional de Teatro y festivales internacionales en Argentina y Estados Unidos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlitos.jpg"}]},"Diseo y Tcnica Escnica":{description:"Un equipo de diseadores y tcnicos escnicos que entrelazan arquitectura, multimedia, sonido y luz para expandir la atmsfera de la obra.",members:[{name:"Jorge Ballina",role:"Escenografa",bio:"Arquitecto y escengrafo con ms de 120 obras en teatro, danza y pera. Miembro del Sistema Nacional de Creadores de Arte, ha sido galardonado con premios internacionales como el World Stage Design Toronto y Calgary. Su trabajo combina estructura y poesa visual.",image:"/images/placeholder-diseno.jpg"},{name:"Daniel Primo",role:"Video Escenogrfico e Iluminacin",bio:"Artista visual y diseador escnico. Explora la relacin entre multimedia y espacio escnico. Integrante del Sistema Nacional de Creadores, su trabajo ha sido presentado en Europa, Asia y Amrica. Cofundador de Engranaje Invertebrado.",image:"/images/placeholder-diseno.jpg"},{name:"La Prez",role:"Diseo Sonoro",bio:"Artista sonora con ms de doce aos de experiencia. Fundadora de Concrete Sounds, ha colaborado en filmes como 'Ya no estoy aqu' y 'Monos'. Su especialidad es la creacin de paisajes inmersivos que amplan la dimensin sensorial del teatro.",image:"/images/placeholder-diseno.jpg"},{name:"Harold Garca",role:"Direccin Tcnica",bio:"Arquitecto y diseador lumnico. Ha colaborado en producciones como 'Matilda', 'Mamma Mia!' y 'Madame Butterfly'. Su trabajo abarca teatro, pera y danza contempornea, con presentaciones en Mxico, Los ngeles y festivales nacionales.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/harold.jpg"},{name:"Rebeca Hernndez",role:"Realizacin Escenogrfica",bio:"Diseadora industrial egresada del CIDI-UNAM y fundadora de Atelier RHC en Tijuana. Su taller produce escenografas, mobiliario y piezas funcionales para teatro y espacios pblicos, uniendo tcnica artesanal con visin contempornea.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rebeca.jpg"},{name:"Ximena Inurreta",role:"Asistente de Diseo de Escenografa",bio:"Diseadora escnica emergente que apoya el desarrollo de atmsferas visuales y transiciones espaciales en el montaje de #GatoEncerrado.",image:"/images/placeholder-diseno.jpg"},{name:"Diego Madera",role:"Tema Musical",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio. Su pieza original acompaa los pasajes emocionales de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png"},{name:"Karla Flores",role:"Realizacin de Vestuario",bio:"Diseadora de vestuario que traduce emociones en textura, movimiento y color. Su trabajo aporta profundidad simblica a la corporalidad de los intrpretes.",image:"/images/placeholder-diseno.jpg"},{name:"Jonathan Lazcano",role:"Pelucas",bio:"Artista de caracterizacin. Su trabajo artesanal da vida y coherencia visual a los personajes a travs del detalle y la textura.",image:"/images/placeholder-diseno.jpg"}]},"Produccin y Asistencia":{description:"Un equipo que coordina, articula y acompaa cada engranaje de la produccin escnica con mirada sensible, tcnica y humana.",members:[{name:"Miroslava Wilson",role:"Produccin Ejecutiva",bio:"Productora ejecutiva, directora y asesora de movimiento. Originaria de Hermosillo y radicada en Tijuana, es fundadora de Pndulo Cero A.C. y educadora de movimiento somtico certificada por Body Mind Movement. Su trabajo interdisciplinario vincula arte, medio ambiente y humanismo. Ha presentado su obra en Asia, Amrica y Europa, y actualmente impulsa proyectos como Casa Viva y SomasSomos.",image:"/images/placeholder-produccion.jpg"},{name:"Marcela Durn Mulia",role:"Produccin Administrativa",bio:"Actriz, gestora y representante legal de Incendio Producciones. Licenciada en Comunicacin (UABC) y Maestra en Alta Direccin Corporativa (Humanitas). Ha participado en la Muestra Nacional de Teatro, ENARTES y otros festivales internacionales. Su mirada estratgica une la gestin cultural con la sensibilidad artstica.",image:"/images/placeholder-colaboradores.jpg"},{name:"Rosala Hernndez Milln",role:"Produccin General y Vinculacin Social",bio:"Presidenta de Isabel A.C. Ayuda para la Vida, Maestra en Psicobiologa y Neurociencia Cognitiva (UAB). Su labor impulsa la integracin entre arte y bienestar emocional, fortaleciendo el puente entre el proyecto escnico y la comunidad.",image:"/images/placeholder-colaboradores.jpg"},{name:"Gabriel Monroy",role:"Asistencia de Direccin y Gestin",bio:"Actor, fotgrafo escnico y gestor. Licenciado en Artes Escnicas por la Universidad de Sonora. Creador de la serie fotogrfica 'Reflejos de la escena', exhibida internacionalmente. Su mirada visual y su acompaamiento escnico fortalecen el proceso de direccin.",image:"/images/placeholder-colaboradores.jpg"},{name:"Roco Morgn",role:"Asistencia Ejecutiva",bio:"Gestora cultural y apoyo logstico de produccin. Su labor sostiene los procesos administrativos y humanos que hacen posible la operacin cotidiana de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/audio/rocio.png"}]},"Colaboradores y Agradecimientos":{description:"Detrs de cada funcin existe una constelacin de manos, miradas y corazones que hacen posible el universo escnico de #GatoEncerrado. Este bloque celebra su labor silenciosa y luminosa.",members:[{name:"Isabel Ayuda para la Vida A.C.",role:"",bio:"Asociacin civil sin fines de lucro fundada en 2018 y dirigida por Rosala Hernndez Milln. Su misin es prevenir la violencia autoinfligida mediante el programa DySVAE, promoviendo el pedir ayuda como estrategia de vida. Colabora con #GatoEncerrado para visibilizar la salud emocional y la empata en contextos artsticos y educativos.",image:"/images/placeholder-institucional.jpg"}],details:{tecnicos:"Asistencia tcnica y tramoya: Renee Camacho  asistencia tcnica y tramoya. Luis Fernando Lpez Snchez, Alex Nava, Christian Camacho  equipo de realizacin de escenografa. Marco Antonio Corral Gastelm, Manuel Axxel Aquino, Santiago Augusto Rodrguez, Alejandro Saldaa  realizadores y tramoya.",registro:"Registro, foto y medios: Viviana Gonzlez  registro creativo videogrfico. Sergio Brown  registro audiovisual. Enigma Creative  publicidad y diseo grfico. Eclipse Comunicacin Estratgica  difusin y medios.",institucionales:"Apoyos institucionales: Agradecimiento a Teatro CAMAFEO y sus productoras Margarita Martnez de Camarena y Elsa Prez de Vargas; CEART Tijuana, IMAC, Casa Viva y Adagio Studio por su apoyo en ensayos y espacios."}}},m9=()=>{const n=e=>Array.isArray(e==null?void 0:e.members)?p.jsxs("div",{className:"space-y-6",children:[e.description&&p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-2 md:text-base sm:text-sm",children:e.description}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.members.map((t,s)=>p.jsxs("div",{className:"glass-effect rounded-xl p-5 flex gap-4 items-start border border-white/5",children:[p.jsx("img",{className:"h-20 w-20 flex-shrink-0 rounded-full object-cover shadow-lg shadow-black/30",src:t.image,alt:`Retrato de ${t.name}`}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-display text-lg text-purple-200",children:t.name}),t.role&&p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:t.role}),t.bio&&p.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:t.bio}),t.url&&p.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:t.urlLabel??"Ver perfil"})]})]},t.name+s))}),e.details&&p.jsxs("div",{className:"text-slate-400 text-sm leading-relaxed space-y-4",children:[p.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.tecnicos}),p.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.registro}),p.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.institucionales})]})]}):p.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsx("img",{className:"w-full h-48 object-cover rounded-lg shadow-lg shadow-black/30",alt:`Retrato de ${e.name}`,src:e.image})}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("h3",{className:"font-display text-xl font-bold text-purple-300 mb-2",children:e.name}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light md:text-base sm:text-sm",children:e.bio})]})]});return p.jsxs("section",{id:"team",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Equipo Creativo"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light md:text-base sm:text-sm",children:"Un colectivo de artistas multidisciplinarios unidos por la pasin de crear experiencias teatrales que desafan los lmites del arte escnico y la empata."})]}),p.jsx(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"max-w-4xl mx-auto",children:p.jsx(f9,{type:"single",collapsible:!0,className:"w-full space-y-4",children:Object.entries(p9).map(([e,t],s)=>p.jsxs(fF,{value:`item-${s}`,className:"glass-effect rounded-lg border-none overflow-hidden",children:[p.jsx(pF,{className:"font-display text-xl md:text-2xl text-slate-100 p-6 hover:no-underline hover:bg-white/5 transition-colors duration-300",children:e}),p.jsx(mF,{className:"p-6 pt-0 bg-black/20",children:n(t)})]},e))})})]})]})};async function g9(){const n="galeria de gatoencerrado";try{const{data:e,error:t}=await Ot.storage.from(n).list("",{limit:100,offset:0,sortBy:{column:"name",order:"desc"}});return t?(console.error("Error al listar imgenes:",t.message),[]):e.filter(r=>r.name.match(/\.(jpg|jpeg|png|webp)$/i)).map(r=>{const i=Ot.storage.from(n).getPublicUrl(r.name).data.publicUrl;return{id:r.id||r.name,imgSrc:i,alt:r.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," "),postUrl:i}})}catch(e){return console.error("Excepcin al obtener imgenes del bucket:",e),[]}}const tv=[{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.8deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-2 lg:rotate-[0.3deg]",frame:"shadow-[14px_14px_0_rgba(167,139,250,0.14)]",tint:"from-purple-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:translate-y-3 lg:rotate-[0.9deg]",frame:"shadow-[12px_12px_0_rgba(129,140,248,0.14)]",tint:"from-indigo-400/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-2",frame:"shadow-[11px_11px_0_rgba(248,113,113,0.15)]",tint:"from-rose-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-2 sm:row-span-3 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-4",offset:"lg:translate-y-2 lg:-rotate-[1.6deg]",frame:"shadow-[16px_16px_0_rgba(251,191,36,0.14)]",tint:"from-amber-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-2",offset:"lg:-translate-y-4 lg:rotate-[-0.7deg]",frame:"shadow-[13px_13px_0_rgba(45,212,191,0.15)]",tint:"from-teal-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-3 lg:rotate-[0.6deg]",frame:"shadow-[12px_12px_0_rgba(148,163,184,0.16)]",tint:"from-slate-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-4 lg:row-span-4",offset:"lg:-translate-y-2 lg:rotate-[0.4deg]",frame:"shadow-[16px_16px_0_rgba(110,231,183,0.12)]",tint:"from-emerald-300/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-3",offset:"lg:translate-y-2 lg:-rotate-[0.9deg]",frame:"shadow-[13px_13px_0_rgba(244,162,97,0.13)]",tint:"from-orange-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.7deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-3",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-yellow-300/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-1 lg:rotate-[1deg]",frame:"shadow-[15px_15px_0_rgba(153,246,228,0.12)]",tint:"from-teal-200/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-2 md:row-span-4 lg:col-span-2 lg:row-span-4",offset:"lg:-translate-y-4 lg:-rotate-[1.1deg]",frame:"shadow-[20px_20px_0_rgba(203,213,225,0.13)]",tint:"from-slate-200/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[31px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.33deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"}],y9=[{match:"Copia de Foto 1 (1)",patternIndex:0,story:"Corte al vaco"},{match:"PoloyEstela",patternIndex:1,story:"Microclimas invisibles"},{match:"Copia de Foto 4",patternIndex:2,story:"Un nmero interminable"},{match:"Copia de Foto 3 (1)",patternIndex:3,story:"Memoria desdoblada"},{match:"Pausa entre actos",patternIndex:4,story:"Coreografa de luces"},{match:"Copia de Foto 4 (1)",patternIndex:5,story:"Confesin en penumbra"},{match:"_V7M6314",patternIndex:6,story:"Ritual previo al acto"},{match:"_V7M6296",patternIndex:7,story:"Risa entre grietas"},{match:"_V7M6348",patternIndex:8,story:"La jaula bajo la mesa"},{match:"Xanadu",patternIndex:9,story:"Voz que no se nombra"},{match:"_V7M6281",patternIndex:10,story:"El pliegue del vestido"},{match:"_V7M6324",patternIndex:11,story:"La cuerda floja"},{match:"_V7M6329",patternIndex:12,story:"Luz que acusa"},{match:"Copia de Foto 5 (1)",patternIndex:13,story:"Un eco sin dueo"},{match:"DSC02497",patternIndex:14,story:"Vestigio de sombras"}],wu=["Vestigio de sombras"],v9=()=>{const[n,e]=_.useState([]),[t,s]=_.useState(null),r="https://www.instagram.com/esungatoencerrado/?hl=en",i=15,[o,a]=_.useState(null),c=_.useRef(null),u=_.useRef(null),[d,h]=_.useState([]),f=_.useRef(0),m=_.useRef([]),y=_.useCallback((D,z)=>{if(!z)return!1;const I=`${D.alt||""} ${D.imgSrc||""}`.toLowerCase();return Array.isArray(z)?z.some(N=>I.includes(String(N).toLowerCase())):I.includes(String(z).toLowerCase())},[]),g=_.useCallback(D=>["susurro de vestuario","foto 2"].some(I=>y(D,I)),[y]);_.useEffect(()=>{(async()=>{try{const z=await g9();e(z)}catch(z){console.error("Error al traer imgenes del bucket:",z),s("No se pudieron cargar las imgenes del bucket.")}})()},[]),_.useEffect(()=>{if(n.length===0){h([]),f.current=0,m.current=[];return}const D=n.map(($,V)=>({post:$,originalIndex:V})).filter(({post:$})=>!g($));if(D.length===0){h([]),f.current=0,m.current=[];return}const z=new Set,I=[];y9.forEach($=>{const V=D.findIndex((W,K)=>!z.has(K)&&y(W.post,$.match));if(V!==-1){const W=D[V];z.add(V),I.push({postIndex:W.originalIndex,patternIndex:$.patternIndex??I.length%tv.length,story:$.story??wu[I.length%wu.length]})}});const N=D.map(($,V)=>({...$,idx:V})).filter(({idx:$})=>!z.has($)).map(($,V)=>({postIndex:$.originalIndex,patternIndex:(I.length+V)%tv.length,story:wu[(I.length+V)%wu.length]})),j=[...I,...N];if(m.current=j,j.length===0){h([]),f.current=0;return}const O=Math.min(i,j.length),F=j.slice(0,O).map(($,V)=>({slotId:`${Date.now()}-${V}-${$.postIndex}-${Math.random()}`,postIndex:$.postIndex,patternIndex:$.patternIndex,story:$.story}));h(F),f.current=j.length>0?O%j.length:0},[n,i,y,g]);const S=D=>{window.open(D,"_blank","noopener,noreferrer")},v=_.useCallback(D=>{c.current=document.activeElement,a(D)},[]),x=_.useCallback(()=>{a(null),c.current&&typeof c.current.focus=="function"&&c.current.focus()},[]),A=_.useCallback(()=>{a(D=>D===null?D:(D-1+n.length)%n.length)},[n.length]),E=_.useCallback(()=>{a(D=>D===null?D:(D+1)%n.length)},[n.length]);_.useEffect(()=>{if(o===null)return;const D=z=>{z.key==="Escape"&&x(),z.key==="ArrowLeft"&&A(),z.key==="ArrowRight"&&E()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[o,x,A,E]);const T=o!==null,P=T&&n[o]?n[o]:null,k=n.length,R=o!==null?o:0,M=k>0?(R+1)/k*100:0;_.useEffect(()=>{T&&u.current&&u.current.focus()},[T]);const L={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.55,ease:"easeOut"}},exit:{opacity:0,y:-30,scale:.94,transition:{duration:.4,ease:"easeInOut"}}},B=_.useCallback((D,z)=>{if(!z||n.length<=i)return;const I=typeof window<"u"?window.innerHeight:0,N=z.boundingClientRect.bottom<=0,j=I?z.boundingClientRect.top>=I:!1;!N&&!j||h(O=>{if(!Array.isArray(O)||O.length===0)return O;const F=[...O],$=new Set(F.filter((re,fe)=>fe!==D).map(re=>re.postIndex)),V=m.current;if(!V||V.length===0)return O;let W=f.current??0,K=0;for(;K<V.length&&$.has(V[W].postIndex);)W=(W+1)%V.length,K+=1;if(K>=V.length)return O;const Y=V[W];return f.current=(W+1)%V.length,F[D]={slotId:`${Date.now()}-${D}-${Y.postIndex}-${Math.random()}`,postIndex:Y.postIndex,patternIndex:Y.patternIndex,story:Y.story},F})},[n.length,i]);return p.jsxs("section",{id:"instagram",className:"py-20 relative",children:[p.jsx("div",{className:"section-divider mb-20"}),p.jsxs("div",{className:"container mx-auto px-5 sm:px-6",children:[p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.75,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-14",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-5 text-gradient italic",children:"Memoria Escnica"}),p.jsx("p",{className:"text-base md:text-lg text-slate-300/75 max-w-3xl mx-auto leading-relaxed mb-7 font-light",children:"Fragmentos de lo que solo sucede en escena Un homenaje visual al trabajo colectivo detrs de #GatoEncerrado: las funciones, los cuerpos, los silencios, las luces lo que solo existe cuando alguien lo mira."}),p.jsxs(Te,{onClick:()=>S(r),className:"bg-gradient-to-r from-pink-600/80 via-purple-600/80 to-indigo-600/80 hover:from-pink-600 hover:to-purple-600 text-white px-7 py-3 rounded-full font-semibold flex items-center gap-2 mx-auto hover-glow",children:[p.jsx($C,{size:20}),"Seguir @esungatonecerrado",p.jsx(q4,{size:16})]})]}),t&&p.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 mb-6 text-center text-red-400 bg-red-900/20 rounded-lg",children:[p.jsx(O4,{size:22}),p.jsx("p",{children:t})]}),d.length>0?p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 lg:grid-cols-8 auto-rows-[95px] sm:auto-rows-[110px] md:auto-rows-[130px] lg:auto-rows-[150px] gap-2 md:gap-3 lg:gap-3.5",children:p.jsx(fo,{mode:"popLayout",children:d.map((D,z)=>{const I=n[D.postIndex];if(!I)return null;const N=tv[D.patternIndex%tv.length],j=D.story??wu[(z+D.postIndex)%wu.length];return p.jsx(ee.button,{type:"button",layout:!0,variants:L,initial:"hidden",animate:"visible",exit:"exit",viewport:{amount:.5,once:!1},onViewportLeave:O=>B(z,O),onClick:()=>v(D.postIndex),onKeyDown:O=>{O.key==="Enter"&&v(D.postIndex)},className:`group relative isolate flex h-full w-full cursor-pointer items-stretch focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-400/60 ${N.grid}`,children:p.jsx("div",{className:`relative h-full w-full transition-transform duration-300 ease-out ${N.offset}`,children:p.jsxs(ee.div,{layout:!0,variants:L,initial:"hidden",whileInView:"visible",viewport:{amount:.6,once:!1},whileHover:{translateY:-6},transition:{duration:.35,ease:"easeOut"},className:`relative flex h-full w-full overflow-hidden rounded-[20px] bg-slate-950/70 backdrop-blur-sm ${N.frame}`,children:[p.jsx("span",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${N.tint}`,"aria-hidden":"true"}),p.jsx(ee.img,{src:I.imgSrc,alt:I.alt||"Recuerdo #GatoEncerrado",className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",initial:{scale:1.02,y:0,opacity:1},whileHover:{scale:1.06},transition:{duration:.35,ease:"easeOut"}}),p.jsxs("div",{className:"relative flex h-full flex-col justify-between p-3 md:p-4",children:[p.jsx("div",{className:"text-[0.58rem] uppercase tracking-[0.3em] text-slate-200/75 mix-blend-screen",children:"#GatoEncerrado"}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("div",{className:"w-8 md:w-10 border-t border-slate-200/30"}),p.jsx("p",{className:"text-[0.8rem] md:text-sm font-light text-slate-50/90 max-w-[10rem] md:max-w-[10.5rem] leading-relaxed drop-shadow-[0_10px_22px_rgba(15,23,42,0.6)]",children:j})]})]})]})})},D.slotId)})})}):!t&&p.jsx("div",{className:"text-center text-slate-400 animate-pulse italic",children:p.jsx("p",{children:"Cargando recuerdos..."})}),p.jsx(fo,{children:T&&P&&p.jsxs(ee.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(ee.div,{className:"absolute inset-0 bg-slate-950/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x}),p.jsxs(ee.div,{className:"relative z-10 w-full max-w-5xl overflow-hidden rounded-[28px] bg-slate-900/90 backdrop-blur-xl shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Recuerdo ampliado",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:26},children:[p.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:items-center md:gap-6",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-slate-300/90",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300/70",children:"#GatoEncerrado"}),p.jsxs("span",{className:"text-xs font-medium tracking-wide",children:[k>0?`${R+1}`:"0",p.jsxs("span",{className:"text-slate-400/80",children:["/",k]})]})]}),p.jsx("div",{className:"mt-3 h-2 rounded-full bg-white/10 overflow-hidden",children:p.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 transition-all duration-500",style:{width:`${M}%`},"aria-hidden":"true"})})]}),p.jsxs("div",{className:"flex items-center gap-3 self-start md:self-center",children:[p.jsx("button",{"aria-label":"Anterior",onClick:A,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(z4,{size:20})}),p.jsx("button",{"aria-label":"Siguiente",onClick:E,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(U4,{size:20})}),p.jsx("button",{ref:u,"aria-label":"Cerrar",onClick:x,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(s1,{size:18})})]})]}),p.jsx("div",{className:"relative aspect-[3/2] w-full bg-black",children:p.jsx("img",{src:P.imgSrc,alt:P.alt||"Recuerdo #GatoEncerrado",className:"h-full w-full object-contain"})})]})]},"gallery-modal")})]})]})},b9=()=>{const[n,e]=_.useState(!1),[t,s]=_.useState("preventa"),r=_.useCallback(o=>{s(o),e(!0)},[]),i=_.useCallback(()=>{e(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"next-show",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsx("div",{className:"container mx-auto px-6",children:p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12 text-center overflow-hidden",children:[p.jsxs("div",{className:"relative z-10",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-4 text-gradient italic",children:"Prxima Funcin"}),p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[p.jsx(FC,{size:24,className:"text-purple-300"}),p.jsx("span",{className:"font-display text-2xl md:text-3xl text-slate-100 font-semibold",children:"28 de Diciembre"})]}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-2xl mx-auto leading-relaxed mb-8 italic font-light",children:'"En el Da de los Santos Inocentes, te invitamos a dudar de todo, incluso de lo que crees ver en escena. Quizs la mayor inocentada es pensar que algo es real."'}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:p.jsxs(Te,{onClick:()=>r("preventa"),className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[p.jsx(zC,{size:20}),"Compra tu boleto"]})})]}),p.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-purple-900/20 rounded-full blur-3xl animate-pulse"}),p.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl animate-pulse animation-delay-2000"})]})})]}),p.jsx(bT,{open:n,onClose:i,initialInterest:t})]})},x9=()=>{const[n,e]=_.useState({name:"",email:"",message:""}),[t,s]=_.useState("idle"),[r,i]=_.useState(""),o="https://www.instagram.com/esungatoencerrado/?hl=en",a="https://x.com/SilvestreFilis",c="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",u=_.useCallback(async f=>{if(f.preventDefault(),t==="loading")return;const m=n.name.trim(),y=n.email.trim(),g=n.message.trim();if(!m||!y||!g){Ue({description:"Completa nombre, email y mensaje antes de enviar."});return}s("loading"),i("");try{const{error:S}=await Ot.functions.invoke("send-contact-message",{body:{name:m,email:y.toLowerCase(),message:g}});if(S)throw S;s("success"),e({name:"",email:"",message:""}),Ue({description:"Recibimos tu mensaje y te escribiremos pronto."})}catch(S){console.error("[Contact] Error enviando mensaje:",S),s("error"),i("No pudimos enviar tu mensaje. Intenta de nuevo ms tarde."),Ue({description:"No pudimos enviar tu mensaje. Intenta de nuevo."})}},[n,t]),d=()=>{Ue({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},h=f=>{f?window.open(f,"_blank","noopener,noreferrer"):Ue({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})};return p.jsxs("section",{id:"contact",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ee.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Contacto, Prensa & Crditos"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Para colaboraciones, entrevistas o simplemente para compartir tus teoras. Aqu cae el teln, pero la conversacin contina."})]}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[p.jsxs(ee.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8",children:[p.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-8",children:"Envanos un Mensaje"}),p.jsxs("form",{onSubmit:u,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Nombre"}),p.jsx("input",{name:"name",type:"text",value:n.name,onChange:f=>e(m=>({...m,name:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{name:"email",type:"email",value:n.email,onChange:f=>e(m=>({...m,email:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"tu@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Mensaje"}),p.jsx("textarea",{name:"message",rows:5,value:n.message,onChange:f=>e(m=>({...m,message:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Cuntanos ms..."})]}),t==="error"&&p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:r}),t==="success"&&p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu mensaje lleg. Te escribiremos a la brevedad."}),p.jsxs(Te,{type:"submit",disabled:t==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:[p.jsx(n5,{size:20}),t==="loading"?"Enviando":"Enviar"]})]})]}),p.jsxs(ee.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"space-y-8",children:[p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Redes Sociales"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Te,{onClick:()=>h(o),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx($C,{size:24})}),p.jsx(Te,{onClick:()=>h(a),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(Sj,{size:24})}),p.jsx(Te,{onClick:()=>h(c),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(bj,{size:24})})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Kit de Prensa"}),p.jsx("p",{className:"text-slate-300/70 mb-4 font-light",children:"Descarga nuestro kit de prensa con imgenes en alta resolucin, dossier y ms."}),p.jsxs(Te,{onClick:d,variant:"outline",className:"border-purple-400/50 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400",children:[p.jsx(W4,{size:18,className:"mr-2"}),"Descargar Kit"]})]}),p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Crditos Finales"}),p.jsxs("p",{className:"text-slate-300/70 text-sm leading-relaxed font-light",children:["Una produccin de ",p.jsx("span",{className:"text-slate-200",children:"#GatoEncerrado"}),".",p.jsx("br",{}),"Con el apoyo de ",p.jsx("span",{className:"text-slate-200",children:"Isabel Ayuda para la Vida, A.C."}),".",p.jsx("br",{}),"Agradecimientos especiales a todos los que creyeron en esta locura."]})]})]})]})]})]})},w9=()=>{const n="https://www.instagram.com/esungatoencerrado/?hl=en",e="https://x.com/SilvestreFilis",t="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",s=i=>{i?window.open(i,"_blank","noopener,noreferrer"):Ue({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},r=i=>{const o=document.querySelector(i);o&&o.scrollIntoView({behavior:"smooth"})};return p.jsxs("footer",{className:"relative py-16 mt-24",children:[p.jsx("div",{className:"section-divider mb-16"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[p.jsx("div",{className:"md:col-span-2",children:p.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-display text-3xl font-medium italic text-gradient mb-4 block",children:"#GatoEncerrado"}),p.jsx("p",{className:"text-slate-400 leading-relaxed mb-6 max-w-md font-light",children:"Una experiencia teatral transmedia que explora los lmites entre la realidad y la ficcin, creando nuevas formas de narrativa artstica."}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>s(n),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx($C,{size:20})}),p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>s(e),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(Sj,{size:20})}),p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>s(t),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(bj,{size:20})}),p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>r("#contact"),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(X4,{size:20})})]})]})}),p.jsx("div",{children:p.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Navegacin"}),p.jsx("ul",{className:"space-y-3",children:[{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Miniversos",href:"#transmedia"},{name:"Textos",href:"#dialogos-criticos"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}].map(i=>p.jsx("li",{children:p.jsx("button",{onClick:()=>r(i.href),className:"text-slate-400 hover:text-white transition-colors text-sm font-light",children:i.name})},i.name))})]})}),p.jsx("div",{children:p.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Contacto"}),p.jsxs("ul",{className:"space-y-3 text-sm font-light",children:[p.jsx("li",{className:"text-slate-400",children:"contacto@gatoencerrado.info"}),p.jsx("li",{className:"text-slate-400",children:"+52 123 456 789"}),p.jsxs("li",{className:"text-slate-400",children:["#UniversoTransmedia",p.jsx("br",{}),"Tijuana, Mxico"]})]})]})})]}),p.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[p.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," #GatoEncerrado. Todos los derechos reservados."]}),p.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[p.jsx("span",{children:"Hecho con"}),p.jsx(K4,{size:16,className:"text-red-500/70"}),p.jsx("span",{children:"para el arte teatral"})]})]})]})]})},S9=()=>{const[n,e]=_.useState([]),[t,s]=_.useState(!0),[r,i]=_.useState(null),o=_.useCallback(async()=>{s(!0),i(null);try{const a=await NH();e(Array.isArray(a)?a:[])}catch(a){console.error("[useBlogPosts] Error al cargar posts:",a),i(a),e([])}finally{s(!1)}},[]);return _.useEffect(()=>{o()},[o]),{posts:n,isLoading:t,error:r,refreshPosts:o}},A9="#GatoEncerrado - Obra de Teatro Transmedia",_9="La historia de alguien que desaparece y deja una huella emocional. Una experiencia teatral nica que explora mltiples formatos transmedia.";function E9(){const n=S9();return _.useEffect(()=>{document.title=A9;let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.setAttribute("name","description"),document.head.appendChild(e)),e.setAttribute("content",_9)},[]),p.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[p.jsx(i6,{}),p.jsxs("main",{className:"pt-20 lg:pt-24",children:[p.jsx(vH,{}),p.jsx(EH,{}),p.jsx(m9,{}),p.jsx(Hq,{posts:n.posts,isLoading:n.isLoading,error:n.error}),p.jsx(Pq,{}),p.jsx(v9,{}),p.jsx(b9,{}),p.jsx(x9,{})]}),p.jsx(w9,{}),p.jsx(V5,{})]})}VS.createRoot(document.getElementById("root")).render(p.jsx(Ae.StrictMode,{children:p.jsx(Rq,{children:p.jsx(E9,{})})}));

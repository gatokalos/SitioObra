var X$=Object.defineProperty;var K$=(n,e,t)=>e in n?X$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var J=(n,e,t)=>(K$(n,typeof e!="symbol"?e+"":e,t),t),aA=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var u=(n,e,t)=>(aA(n,e,"read from private field"),t?t.call(n):e.get(n)),k=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},A=(n,e,t,r)=>(aA(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var ln=(n,e,t,r)=>({set _(s){A(n,e,s,t)},get _(){return u(n,e,r)}}),T=(n,e,t)=>(aA(n,e,"access private method"),t);function ML(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function No(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Y$(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var IL={exports:{}},zS={},LL={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=Symbol.for("react.element"),Q$=Symbol.for("react.portal"),J$=Symbol.for("react.fragment"),Z$=Symbol.for("react.strict_mode"),e6=Symbol.for("react.profiler"),t6=Symbol.for("react.provider"),n6=Symbol.for("react.context"),r6=Symbol.for("react.forward_ref"),s6=Symbol.for("react.suspense"),i6=Symbol.for("react.memo"),a6=Symbol.for("react.lazy"),YP=Symbol.iterator;function o6(n){return n===null||typeof n!="object"?null:(n=YP&&n[YP]||n["@@iterator"],typeof n=="function"?n:null)}var DL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},OL=Object.assign,FL={};function zp(n,e,t){this.props=n,this.context=e,this.refs=FL,this.updater=t||DL}zp.prototype.isReactComponent={};zp.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};zp.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function BL(){}BL.prototype=zp.prototype;function $T(n,e,t){this.props=n,this.context=e,this.refs=FL,this.updater=t||DL}var VT=$T.prototype=new BL;VT.constructor=$T;OL(VT,zp.prototype);VT.isPureReactComponent=!0;var QP=Array.isArray,zL=Object.prototype.hasOwnProperty,UT={current:null},$L={key:!0,ref:!0,__self:!0,__source:!0};function VL(n,e,t){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)zL.call(e,r)&&!$L.hasOwnProperty(r)&&(s[r]=e[r]);var o=arguments.length-2;if(o===1)s.children=t;else if(1<o){for(var l=Array(o),c=0;c<o;c++)l[c]=arguments[c+2];s.children=l}if(n&&n.defaultProps)for(r in o=n.defaultProps,o)s[r]===void 0&&(s[r]=o[r]);return{$$typeof:Rv,type:n,key:i,ref:a,props:s,_owner:UT.current}}function l6(n,e){return{$$typeof:Rv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function HT(n){return typeof n=="object"&&n!==null&&n.$$typeof===Rv}function c6(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var JP=/\/+/g;function oA(n,e){return typeof n=="object"&&n!==null&&n.key!=null?c6(""+n.key):e.toString(36)}function nb(n,e,t,r,s){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case Rv:case Q$:a=!0}}if(a)return a=n,s=s(a),n=r===""?"."+oA(a,0):r,QP(s)?(t="",n!=null&&(t=n.replace(JP,"$&/")+"/"),nb(s,e,t,"",function(c){return c})):s!=null&&(HT(s)&&(s=l6(s,t+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(JP,"$&/")+"/")+n)),e.push(s)),1;if(a=0,r=r===""?".":r+":",QP(n))for(var o=0;o<n.length;o++){i=n[o];var l=r+oA(i,o);a+=nb(i,e,t,l,s)}else if(l=o6(n),typeof l=="function")for(n=l.call(n),o=0;!(i=n.next()).done;)i=i.value,l=r+oA(i,o++),a+=nb(i,e,t,l,s);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function cx(n,e,t){if(n==null)return n;var r=[],s=0;return nb(n,r,"","",function(i){return e.call(t,i,s++)}),r}function u6(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var fr={current:null},rb={transition:null},d6={ReactCurrentDispatcher:fr,ReactCurrentBatchConfig:rb,ReactCurrentOwner:UT};function UL(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:cx,forEach:function(n,e,t){cx(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return cx(n,function(){e++}),e},toArray:function(n){return cx(n,function(e){return e})||[]},only:function(n){if(!HT(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ue.Component=zp;Ue.Fragment=J$;Ue.Profiler=e6;Ue.PureComponent=$T;Ue.StrictMode=Z$;Ue.Suspense=s6;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d6;Ue.act=UL;Ue.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=OL({},n.props),s=n.key,i=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=UT.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)zL.call(e,l)&&!$L.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var c=0;c<l;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:Rv,type:n.type,key:s,ref:i,props:r,_owner:a}};Ue.createContext=function(n){return n={$$typeof:n6,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:t6,_context:n},n.Consumer=n};Ue.createElement=VL;Ue.createFactory=function(n){var e=VL.bind(null,n);return e.type=n,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(n){return{$$typeof:r6,render:n}};Ue.isValidElement=HT;Ue.lazy=function(n){return{$$typeof:a6,_payload:{_status:-1,_result:n},_init:u6}};Ue.memo=function(n,e){return{$$typeof:i6,type:n,compare:e===void 0?null:e}};Ue.startTransition=function(n){var e=rb.transition;rb.transition={};try{n()}finally{rb.transition=e}};Ue.unstable_act=UL;Ue.useCallback=function(n,e){return fr.current.useCallback(n,e)};Ue.useContext=function(n){return fr.current.useContext(n)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(n){return fr.current.useDeferredValue(n)};Ue.useEffect=function(n,e){return fr.current.useEffect(n,e)};Ue.useId=function(){return fr.current.useId()};Ue.useImperativeHandle=function(n,e,t){return fr.current.useImperativeHandle(n,e,t)};Ue.useInsertionEffect=function(n,e){return fr.current.useInsertionEffect(n,e)};Ue.useLayoutEffect=function(n,e){return fr.current.useLayoutEffect(n,e)};Ue.useMemo=function(n,e){return fr.current.useMemo(n,e)};Ue.useReducer=function(n,e,t){return fr.current.useReducer(n,e,t)};Ue.useRef=function(n){return fr.current.useRef(n)};Ue.useState=function(n){return fr.current.useState(n)};Ue.useSyncExternalStore=function(n,e,t){return fr.current.useSyncExternalStore(n,e,t)};Ue.useTransition=function(){return fr.current.useTransition()};Ue.version="18.3.1";LL.exports=Ue;var S=LL.exports;const Le=No(S),HL=ML({__proto__:null,default:Le},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h6=S,f6=Symbol.for("react.element"),p6=Symbol.for("react.fragment"),m6=Object.prototype.hasOwnProperty,g6=h6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y6={key:!0,ref:!0,__self:!0,__source:!0};function qL(n,e,t){var r,s={},i=null,a=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)m6.call(e,r)&&!y6.hasOwnProperty(r)&&(s[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:f6,type:n,key:i,ref:a,props:s,_owner:g6.current}}zS.Fragment=p6;zS.jsx=qL;zS.jsxs=qL;IL.exports=zS;var h=IL.exports,RE={},GL={exports:{}},ys={},WL={exports:{}},XL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,q){var P=V.length;V.push(q);e:for(;0<P;){var Y=P-1>>>1,K=V[Y];if(0<s(K,q))V[Y]=q,V[P]=K,P=Y;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var q=V[0],P=V.pop();if(P!==q){V[0]=P;e:for(var Y=0,K=V.length,R=K>>>1;Y<R;){var ie=2*(Y+1)-1,ke=V[ie],me=ie+1,ve=V[me];if(0>s(ke,P))me<K&&0>s(ve,ke)?(V[Y]=ve,V[me]=P,Y=me):(V[Y]=ke,V[ie]=P,Y=ie);else if(me<K&&0>s(ve,P))V[Y]=ve,V[me]=P,Y=me;else break e}}return q}function s(V,q){var P=V.sortIndex-q.sortIndex;return P!==0?P:V.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],c=[],d=1,f=null,p=3,m=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var q=t(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=V)r(c),q.sortIndex=q.expirationTime,e(l,q);else break;q=t(c)}}function C(V){if(g=!1,b(V),!y)if(t(l)!==null)y=!0,D(_);else{var q=t(c);q!==null&&z(C,q.startTime-V)}}function _(V,q){y=!1,g&&(g=!1,v(j),j=-1),m=!0;var P=p;try{for(b(q),f=t(l);f!==null&&(!(f.expirationTime>q)||V&&!L());){var Y=f.callback;if(typeof Y=="function"){f.callback=null,p=f.priorityLevel;var K=Y(f.expirationTime<=q);q=n.unstable_now(),typeof K=="function"?f.callback=K:f===t(l)&&r(l),b(q)}else r(l);f=t(l)}if(f!==null)var R=!0;else{var ie=t(c);ie!==null&&z(C,ie.startTime-q),R=!1}return R}finally{f=null,p=P,m=!1}}var E=!1,N=null,j=-1,M=5,O=-1;function L(){return!(n.unstable_now()-O<M)}function F(){if(N!==null){var V=n.unstable_now();O=V;var q=!0;try{q=N(!0,V)}finally{q?U():(E=!1,N=null)}}else E=!1}var U;if(typeof x=="function")U=function(){x(F)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,I=B.port2;B.port1.onmessage=F,U=function(){I.postMessage(null)}}else U=function(){w(F,0)};function D(V){N=V,E||(E=!0,U())}function z(V,q){j=w(function(){V(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,D(_))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var P=p;p=q;try{return V()}finally{p=P}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var P=p;p=V;try{return q()}finally{p=P}},n.unstable_scheduleCallback=function(V,q,P){var Y=n.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?Y+P:Y):P=Y,V){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=P+K,V={id:d++,callback:q,priorityLevel:V,startTime:P,expirationTime:K,sortIndex:-1},P>Y?(V.sortIndex=P,e(c,V),t(l)===null&&V===t(c)&&(g?(v(j),j=-1):g=!0,z(C,P-Y))):(V.sortIndex=K,e(l,V),y||m||(y=!0,D(_))),V},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(V){var q=p;return function(){var P=p;p=q;try{return V.apply(this,arguments)}finally{p=P}}}})(XL);WL.exports=XL;var v6=WL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x6=S,ps=v6;function te(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KL=new Set,Eg={};function Ad(n,e){_p(n,e),_p(n+"Capture",e)}function _p(n,e){for(Eg[n]=e,n=0;n<e.length;n++)KL.add(e[n])}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ME=Object.prototype.hasOwnProperty,b6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ZP={},ej={};function w6(n){return ME.call(ej,n)?!0:ME.call(ZP,n)?!1:b6.test(n)?ej[n]=!0:(ZP[n]=!0,!1)}function S6(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function k6(n,e,t,r){if(e===null||typeof e>"u"||S6(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(n,e,t,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var On={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){On[n]=new pr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];On[e]=new pr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){On[n]=new pr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){On[n]=new pr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){On[n]=new pr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){On[n]=new pr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){On[n]=new pr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){On[n]=new pr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){On[n]=new pr(n,5,!1,n.toLowerCase(),null,!1,!1)});var qT=/[\-:]([a-z])/g;function GT(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qT,GT);On[e]=new pr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qT,GT);On[e]=new pr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qT,GT);On[e]=new pr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){On[n]=new pr(n,1,!1,n.toLowerCase(),null,!1,!1)});On.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){On[n]=new pr(n,1,!1,n.toLowerCase(),null,!0,!0)});function WT(n,e,t,r){var s=On.hasOwnProperty(e)?On[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(k6(e,t,s,r)&&(t=null),r||s===null?w6(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,r=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Po=x6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ux=Symbol.for("react.element"),Xd=Symbol.for("react.portal"),Kd=Symbol.for("react.fragment"),XT=Symbol.for("react.strict_mode"),IE=Symbol.for("react.profiler"),YL=Symbol.for("react.provider"),QL=Symbol.for("react.context"),KT=Symbol.for("react.forward_ref"),LE=Symbol.for("react.suspense"),DE=Symbol.for("react.suspense_list"),YT=Symbol.for("react.memo"),Bo=Symbol.for("react.lazy"),JL=Symbol.for("react.offscreen"),tj=Symbol.iterator;function lm(n){return n===null||typeof n!="object"?null:(n=tj&&n[tj]||n["@@iterator"],typeof n=="function"?n:null)}var Ut=Object.assign,lA;function jm(n){if(lA===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);lA=e&&e[1]||""}return`
`+lA+n}var cA=!1;function uA(n,e){if(!n||cA)return"";cA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,o=i.length-1;1<=a&&0<=o&&s[a]!==i[o];)o--;for(;1<=a&&0<=o;a--,o--)if(s[a]!==i[o]){if(a!==1||o!==1)do if(a--,o--,0>o||s[a]!==i[o]){var l=`
`+s[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{cA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?jm(n):""}function A6(n){switch(n.tag){case 5:return jm(n.type);case 16:return jm("Lazy");case 13:return jm("Suspense");case 19:return jm("SuspenseList");case 0:case 2:case 15:return n=uA(n.type,!1),n;case 11:return n=uA(n.type.render,!1),n;case 1:return n=uA(n.type,!0),n;default:return""}}function OE(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kd:return"Fragment";case Xd:return"Portal";case IE:return"Profiler";case XT:return"StrictMode";case LE:return"Suspense";case DE:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case QL:return(n.displayName||"Context")+".Consumer";case YL:return(n._context.displayName||"Context")+".Provider";case KT:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case YT:return e=n.displayName||null,e!==null?e:OE(n.type)||"Memo";case Bo:e=n._payload,n=n._init;try{return OE(n(e))}catch{}}return null}function E6(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OE(e);case 8:return e===XT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ZL(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function C6(n){var e=ZL(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function dx(n){n._valueTracker||(n._valueTracker=C6(n))}function eD(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=ZL(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function tw(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function FE(n,e){var t=e.checked;return Ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function nj(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=nc(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tD(n,e){e=e.checked,e!=null&&WT(n,"checked",e,!1)}function BE(n,e){tD(n,e);var t=nc(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?zE(n,e.type,t):e.hasOwnProperty("defaultValue")&&zE(n,e.type,nc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function rj(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function zE(n,e,t){(e!=="number"||tw(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Rm=Array.isArray;function gh(n,e,t,r){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&r&&(n[t].defaultSelected=!0)}else{for(t=""+nc(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,r&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function $E(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(te(91));return Ut({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function sj(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(te(92));if(Rm(t)){if(1<t.length)throw Error(te(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:nc(t)}}function nD(n,e){var t=nc(e.value),r=nc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function ij(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function rD(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function VE(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?rD(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hx,sD=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(hx=hx||document.createElement("div"),hx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hx.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Cg(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var sg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_6=["Webkit","ms","Moz","O"];Object.keys(sg).forEach(function(n){_6.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),sg[e]=sg[n]})});function iD(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||sg.hasOwnProperty(n)&&sg[n]?(""+e).trim():e+"px"}function aD(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,s=iD(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,s):n[t]=s}}var T6=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function UE(n,e){if(e){if(T6[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(te(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(te(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(te(61))}if(e.style!=null&&typeof e.style!="object")throw Error(te(62))}}function HE(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qE=null;function QT(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var GE=null,yh=null,vh=null;function aj(n){if(n=Lv(n)){if(typeof GE!="function")throw Error(te(280));var e=n.stateNode;e&&(e=qS(e),GE(n.stateNode,n.type,e))}}function oD(n){yh?vh?vh.push(n):vh=[n]:yh=n}function lD(){if(yh){var n=yh,e=vh;if(vh=yh=null,aj(n),e)for(n=0;n<e.length;n++)aj(e[n])}}function cD(n,e){return n(e)}function uD(){}var dA=!1;function dD(n,e,t){if(dA)return n(e,t);dA=!0;try{return cD(n,e,t)}finally{dA=!1,(yh!==null||vh!==null)&&(uD(),lD())}}function _g(n,e){var t=n.stateNode;if(t===null)return null;var r=qS(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(te(231,e,typeof t));return t}var WE=!1;if(wo)try{var cm={};Object.defineProperty(cm,"passive",{get:function(){WE=!0}}),window.addEventListener("test",cm,cm),window.removeEventListener("test",cm,cm)}catch{WE=!1}function N6(n,e,t,r,s,i,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var ig=!1,nw=null,rw=!1,XE=null,P6={onError:function(n){ig=!0,nw=n}};function j6(n,e,t,r,s,i,a,o,l){ig=!1,nw=null,N6.apply(P6,arguments)}function R6(n,e,t,r,s,i,a,o,l){if(j6.apply(this,arguments),ig){if(ig){var c=nw;ig=!1,nw=null}else throw Error(te(198));rw||(rw=!0,XE=c)}}function Ed(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function hD(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function oj(n){if(Ed(n)!==n)throw Error(te(188))}function M6(n){var e=n.alternate;if(!e){if(e=Ed(n),e===null)throw Error(te(188));return e!==n?null:n}for(var t=n,r=e;;){var s=t.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){t=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===t)return oj(s),n;if(i===r)return oj(s),e;i=i.sibling}throw Error(te(188))}if(t.return!==r.return)t=s,r=i;else{for(var a=!1,o=s.child;o;){if(o===t){a=!0,t=s,r=i;break}if(o===r){a=!0,r=s,t=i;break}o=o.sibling}if(!a){for(o=i.child;o;){if(o===t){a=!0,t=i,r=s;break}if(o===r){a=!0,r=i,t=s;break}o=o.sibling}if(!a)throw Error(te(189))}}if(t.alternate!==r)throw Error(te(190))}if(t.tag!==3)throw Error(te(188));return t.stateNode.current===t?n:e}function fD(n){return n=M6(n),n!==null?pD(n):null}function pD(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=pD(n);if(e!==null)return e;n=n.sibling}return null}var mD=ps.unstable_scheduleCallback,lj=ps.unstable_cancelCallback,I6=ps.unstable_shouldYield,L6=ps.unstable_requestPaint,Zt=ps.unstable_now,D6=ps.unstable_getCurrentPriorityLevel,JT=ps.unstable_ImmediatePriority,gD=ps.unstable_UserBlockingPriority,sw=ps.unstable_NormalPriority,O6=ps.unstable_LowPriority,yD=ps.unstable_IdlePriority,$S=null,ua=null;function F6(n){if(ua&&typeof ua.onCommitFiberRoot=="function")try{ua.onCommitFiberRoot($S,n,void 0,(n.current.flags&128)===128)}catch{}}var wi=Math.clz32?Math.clz32:$6,B6=Math.log,z6=Math.LN2;function $6(n){return n>>>=0,n===0?32:31-(B6(n)/z6|0)|0}var fx=64,px=4194304;function Mm(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function iw(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,s=n.suspendedLanes,i=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~s;o!==0?r=Mm(o):(i&=a,i!==0&&(r=Mm(i)))}else a=t&~s,a!==0?r=Mm(a):i!==0&&(r=Mm(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-wi(e),s=1<<t,r|=n[t],e&=~s;return r}function V6(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function U6(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,s=n.expirationTimes,i=n.pendingLanes;0<i;){var a=31-wi(i),o=1<<a,l=s[a];l===-1?(!(o&t)||o&r)&&(s[a]=V6(o,e)):l<=e&&(n.expiredLanes|=o),i&=~o}}function KE(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function vD(){var n=fx;return fx<<=1,!(fx&4194240)&&(fx=64),n}function hA(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Mv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-wi(e),n[e]=t}function H6(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-wi(t),i=1<<s;e[s]=0,r[s]=-1,n[s]=-1,t&=~i}}function ZT(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-wi(t),s=1<<r;s&e|n[r]&e&&(n[r]|=e),t&=~s}}var at=0;function xD(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var bD,e2,wD,SD,kD,YE=!1,mx=[],Gl=null,Wl=null,Xl=null,Tg=new Map,Ng=new Map,Vo=[],q6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cj(n,e){switch(n){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Wl=null;break;case"mouseover":case"mouseout":Xl=null;break;case"pointerover":case"pointerout":Tg.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ng.delete(e.pointerId)}}function um(n,e,t,r,s,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lv(e),e!==null&&e2(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function G6(n,e,t,r,s){switch(e){case"focusin":return Gl=um(Gl,n,e,t,r,s),!0;case"dragenter":return Wl=um(Wl,n,e,t,r,s),!0;case"mouseover":return Xl=um(Xl,n,e,t,r,s),!0;case"pointerover":var i=s.pointerId;return Tg.set(i,um(Tg.get(i)||null,n,e,t,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ng.set(i,um(Ng.get(i)||null,n,e,t,r,s)),!0}return!1}function AD(n){var e=Ic(n.target);if(e!==null){var t=Ed(e);if(t!==null){if(e=t.tag,e===13){if(e=hD(t),e!==null){n.blockedOn=e,kD(n.priority,function(){wD(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sb(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=QE(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);qE=r,t.target.dispatchEvent(r),qE=null}else return e=Lv(t),e!==null&&e2(e),n.blockedOn=t,!1;e.shift()}return!0}function uj(n,e,t){sb(n)&&t.delete(e)}function W6(){YE=!1,Gl!==null&&sb(Gl)&&(Gl=null),Wl!==null&&sb(Wl)&&(Wl=null),Xl!==null&&sb(Xl)&&(Xl=null),Tg.forEach(uj),Ng.forEach(uj)}function dm(n,e){n.blockedOn===e&&(n.blockedOn=null,YE||(YE=!0,ps.unstable_scheduleCallback(ps.unstable_NormalPriority,W6)))}function Pg(n){function e(s){return dm(s,n)}if(0<mx.length){dm(mx[0],n);for(var t=1;t<mx.length;t++){var r=mx[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Gl!==null&&dm(Gl,n),Wl!==null&&dm(Wl,n),Xl!==null&&dm(Xl,n),Tg.forEach(e),Ng.forEach(e),t=0;t<Vo.length;t++)r=Vo[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Vo.length&&(t=Vo[0],t.blockedOn===null);)AD(t),t.blockedOn===null&&Vo.shift()}var xh=Po.ReactCurrentBatchConfig,aw=!0;function X6(n,e,t,r){var s=at,i=xh.transition;xh.transition=null;try{at=1,t2(n,e,t,r)}finally{at=s,xh.transition=i}}function K6(n,e,t,r){var s=at,i=xh.transition;xh.transition=null;try{at=4,t2(n,e,t,r)}finally{at=s,xh.transition=i}}function t2(n,e,t,r){if(aw){var s=QE(n,e,t,r);if(s===null)SA(n,e,r,ow,t),cj(n,r);else if(G6(s,n,e,t,r))r.stopPropagation();else if(cj(n,r),e&4&&-1<q6.indexOf(n)){for(;s!==null;){var i=Lv(s);if(i!==null&&bD(i),i=QE(n,e,t,r),i===null&&SA(n,e,r,ow,t),i===s)break;s=i}s!==null&&r.stopPropagation()}else SA(n,e,r,null,t)}}var ow=null;function QE(n,e,t,r){if(ow=null,n=QT(r),n=Ic(n),n!==null)if(e=Ed(n),e===null)n=null;else if(t=e.tag,t===13){if(n=hD(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ow=n,null}function ED(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D6()){case JT:return 1;case gD:return 4;case sw:case O6:return 16;case yD:return 536870912;default:return 16}default:return 16}}var Hl=null,n2=null,ib=null;function CD(){if(ib)return ib;var n,e=n2,t=e.length,r,s="value"in Hl?Hl.value:Hl.textContent,i=s.length;for(n=0;n<t&&e[n]===s[n];n++);var a=t-n;for(r=1;r<=a&&e[t-r]===s[i-r];r++);return ib=s.slice(n,1<r?1-r:void 0)}function ab(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function gx(){return!0}function dj(){return!1}function vs(n){function e(t,r,s,i,a){this._reactName=t,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gx:dj,this.isPropagationStopped=dj,this}return Ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=gx)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=gx)},persist:function(){},isPersistent:gx}),e}var $p={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r2=vs($p),Iv=Ut({},$p,{view:0,detail:0}),Y6=vs(Iv),fA,pA,hm,VS=Ut({},Iv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s2,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==hm&&(hm&&n.type==="mousemove"?(fA=n.screenX-hm.screenX,pA=n.screenY-hm.screenY):pA=fA=0,hm=n),fA)},movementY:function(n){return"movementY"in n?n.movementY:pA}}),hj=vs(VS),Q6=Ut({},VS,{dataTransfer:0}),J6=vs(Q6),Z6=Ut({},Iv,{relatedTarget:0}),mA=vs(Z6),eV=Ut({},$p,{animationName:0,elapsedTime:0,pseudoElement:0}),tV=vs(eV),nV=Ut({},$p,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),rV=vs(nV),sV=Ut({},$p,{data:0}),fj=vs(sV),iV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lV(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=oV[n])?!!e[n]:!1}function s2(){return lV}var cV=Ut({},Iv,{key:function(n){if(n.key){var e=iV[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ab(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?aV[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s2,charCode:function(n){return n.type==="keypress"?ab(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ab(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),uV=vs(cV),dV=Ut({},VS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pj=vs(dV),hV=Ut({},Iv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s2}),fV=vs(hV),pV=Ut({},$p,{propertyName:0,elapsedTime:0,pseudoElement:0}),mV=vs(pV),gV=Ut({},VS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),yV=vs(gV),vV=[9,13,27,32],i2=wo&&"CompositionEvent"in window,ag=null;wo&&"documentMode"in document&&(ag=document.documentMode);var xV=wo&&"TextEvent"in window&&!ag,_D=wo&&(!i2||ag&&8<ag&&11>=ag),mj=String.fromCharCode(32),gj=!1;function TD(n,e){switch(n){case"keyup":return vV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ND(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Yd=!1;function bV(n,e){switch(n){case"compositionend":return ND(e);case"keypress":return e.which!==32?null:(gj=!0,mj);case"textInput":return n=e.data,n===mj&&gj?null:n;default:return null}}function wV(n,e){if(Yd)return n==="compositionend"||!i2&&TD(n,e)?(n=CD(),ib=n2=Hl=null,Yd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _D&&e.locale!=="ko"?null:e.data;default:return null}}var SV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yj(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!SV[n.type]:e==="textarea"}function PD(n,e,t,r){oD(r),e=lw(e,"onChange"),0<e.length&&(t=new r2("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var og=null,jg=null;function kV(n){$D(n,0)}function US(n){var e=Zd(n);if(eD(e))return n}function AV(n,e){if(n==="change")return e}var jD=!1;if(wo){var gA;if(wo){var yA="oninput"in document;if(!yA){var vj=document.createElement("div");vj.setAttribute("oninput","return;"),yA=typeof vj.oninput=="function"}gA=yA}else gA=!1;jD=gA&&(!document.documentMode||9<document.documentMode)}function xj(){og&&(og.detachEvent("onpropertychange",RD),jg=og=null)}function RD(n){if(n.propertyName==="value"&&US(jg)){var e=[];PD(e,jg,n,QT(n)),dD(kV,e)}}function EV(n,e,t){n==="focusin"?(xj(),og=e,jg=t,og.attachEvent("onpropertychange",RD)):n==="focusout"&&xj()}function CV(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return US(jg)}function _V(n,e){if(n==="click")return US(e)}function TV(n,e){if(n==="input"||n==="change")return US(e)}function NV(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ki=typeof Object.is=="function"?Object.is:NV;function Rg(n,e){if(ki(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var s=t[r];if(!ME.call(e,s)||!ki(n[s],e[s]))return!1}return!0}function bj(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function wj(n,e){var t=bj(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=bj(t)}}function MD(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?MD(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function ID(){for(var n=window,e=tw();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=tw(n.document)}return e}function a2(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function PV(n){var e=ID(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&MD(t.ownerDocument.documentElement,t)){if(r!==null&&a2(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!n.extend&&i>r&&(s=r,r=i,i=s),s=wj(t,i);var a=wj(t,r);s&&a&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var jV=wo&&"documentMode"in document&&11>=document.documentMode,Qd=null,JE=null,lg=null,ZE=!1;function Sj(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ZE||Qd==null||Qd!==tw(r)||(r=Qd,"selectionStart"in r&&a2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lg&&Rg(lg,r)||(lg=r,r=lw(JE,"onSelect"),0<r.length&&(e=new r2("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Qd)))}function yx(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Jd={animationend:yx("Animation","AnimationEnd"),animationiteration:yx("Animation","AnimationIteration"),animationstart:yx("Animation","AnimationStart"),transitionend:yx("Transition","TransitionEnd")},vA={},LD={};wo&&(LD=document.createElement("div").style,"AnimationEvent"in window||(delete Jd.animationend.animation,delete Jd.animationiteration.animation,delete Jd.animationstart.animation),"TransitionEvent"in window||delete Jd.transitionend.transition);function HS(n){if(vA[n])return vA[n];if(!Jd[n])return n;var e=Jd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in LD)return vA[n]=e[t];return n}var DD=HS("animationend"),OD=HS("animationiteration"),FD=HS("animationstart"),BD=HS("transitionend"),zD=new Map,kj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lc(n,e){zD.set(n,e),Ad(e,[n])}for(var xA=0;xA<kj.length;xA++){var bA=kj[xA],RV=bA.toLowerCase(),MV=bA[0].toUpperCase()+bA.slice(1);lc(RV,"on"+MV)}lc(DD,"onAnimationEnd");lc(OD,"onAnimationIteration");lc(FD,"onAnimationStart");lc("dblclick","onDoubleClick");lc("focusin","onFocus");lc("focusout","onBlur");lc(BD,"onTransitionEnd");_p("onMouseEnter",["mouseout","mouseover"]);_p("onMouseLeave",["mouseout","mouseover"]);_p("onPointerEnter",["pointerout","pointerover"]);_p("onPointerLeave",["pointerout","pointerover"]);Ad("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ad("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ad("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ad("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ad("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Im="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Im));function Aj(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,R6(r,e,void 0,n),n.currentTarget=null}function $D(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;Aj(s,o,c),i=l}else for(a=0;a<r.length;a++){if(o=r[a],l=o.instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;Aj(s,o,c),i=l}}}if(rw)throw n=XE,rw=!1,XE=null,n}function _t(n,e){var t=e[sC];t===void 0&&(t=e[sC]=new Set);var r=n+"__bubble";t.has(r)||(VD(e,n,2,!1),t.add(r))}function wA(n,e,t){var r=0;e&&(r|=4),VD(t,n,r,e)}var vx="_reactListening"+Math.random().toString(36).slice(2);function Mg(n){if(!n[vx]){n[vx]=!0,KL.forEach(function(t){t!=="selectionchange"&&(IV.has(t)||wA(t,!1,n),wA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[vx]||(e[vx]=!0,wA("selectionchange",!1,e))}}function VD(n,e,t,r){switch(ED(e)){case 1:var s=X6;break;case 4:s=K6;break;default:s=t2}t=s.bind(null,e,t,n),s=void 0,!WE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function SA(n,e,t,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===s||o.nodeType===8&&o.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;a=a.return}for(;o!==null;){if(a=Ic(o),a===null)return;if(l=a.tag,l===5||l===6){r=i=a;continue e}o=o.parentNode}}r=r.return}dD(function(){var c=i,d=QT(t),f=[];e:{var p=zD.get(n);if(p!==void 0){var m=r2,y=n;switch(n){case"keypress":if(ab(t)===0)break e;case"keydown":case"keyup":m=uV;break;case"focusin":y="focus",m=mA;break;case"focusout":y="blur",m=mA;break;case"beforeblur":case"afterblur":m=mA;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=J6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=fV;break;case DD:case OD:case FD:m=tV;break;case BD:m=mV;break;case"scroll":m=Y6;break;case"wheel":m=yV;break;case"copy":case"cut":case"paste":m=rV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=pj}var g=(e&4)!==0,w=!g&&n==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var x=c,b;x!==null;){b=x;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,v!==null&&(C=_g(x,v),C!=null&&g.push(Ig(x,C,b)))),w)break;x=x.return}0<g.length&&(p=new m(p,y,null,t,d),f.push({event:p,listeners:g}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==qE&&(y=t.relatedTarget||t.fromElement)&&(Ic(y)||y[So]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?Ic(y):null,y!==null&&(w=Ed(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(g=hj,C="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(g=pj,C="onPointerLeave",v="onPointerEnter",x="pointer"),w=m==null?p:Zd(m),b=y==null?p:Zd(y),p=new g(C,x+"leave",m,t,d),p.target=w,p.relatedTarget=b,C=null,Ic(d)===c&&(g=new g(v,x+"enter",y,t,d),g.target=b,g.relatedTarget=w,C=g),w=C,m&&y)t:{for(g=m,v=y,x=0,b=g;b;b=Ld(b))x++;for(b=0,C=v;C;C=Ld(C))b++;for(;0<x-b;)g=Ld(g),x--;for(;0<b-x;)v=Ld(v),b--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=Ld(g),v=Ld(v)}g=null}else g=null;m!==null&&Ej(f,p,m,g,!1),y!==null&&w!==null&&Ej(f,w,y,g,!0)}}e:{if(p=c?Zd(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var _=AV;else if(yj(p))if(jD)_=TV;else{_=CV;var E=EV}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(_=_V);if(_&&(_=_(n,c))){PD(f,_,t,d);break e}E&&E(n,p,c),n==="focusout"&&(E=p._wrapperState)&&E.controlled&&p.type==="number"&&zE(p,"number",p.value)}switch(E=c?Zd(c):window,n){case"focusin":(yj(E)||E.contentEditable==="true")&&(Qd=E,JE=c,lg=null);break;case"focusout":lg=JE=Qd=null;break;case"mousedown":ZE=!0;break;case"contextmenu":case"mouseup":case"dragend":ZE=!1,Sj(f,t,d);break;case"selectionchange":if(jV)break;case"keydown":case"keyup":Sj(f,t,d)}var N;if(i2)e:{switch(n){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else Yd?TD(n,t)&&(j="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(j="onCompositionStart");j&&(_D&&t.locale!=="ko"&&(Yd||j!=="onCompositionStart"?j==="onCompositionEnd"&&Yd&&(N=CD()):(Hl=d,n2="value"in Hl?Hl.value:Hl.textContent,Yd=!0)),E=lw(c,j),0<E.length&&(j=new fj(j,n,null,t,d),f.push({event:j,listeners:E}),N?j.data=N:(N=ND(t),N!==null&&(j.data=N)))),(N=xV?bV(n,t):wV(n,t))&&(c=lw(c,"onBeforeInput"),0<c.length&&(d=new fj("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:c}),d.data=N))}$D(f,e)})}function Ig(n,e,t){return{instance:n,listener:e,currentTarget:t}}function lw(n,e){for(var t=e+"Capture",r=[];n!==null;){var s=n,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_g(n,t),i!=null&&r.unshift(Ig(n,i,s)),i=_g(n,e),i!=null&&r.push(Ig(n,i,s))),n=n.return}return r}function Ld(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Ej(n,e,t,r,s){for(var i=e._reactName,a=[];t!==null&&t!==r;){var o=t,l=o.alternate,c=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&c!==null&&(o=c,s?(l=_g(t,i),l!=null&&a.unshift(Ig(t,l,o))):s||(l=_g(t,i),l!=null&&a.push(Ig(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var LV=/\r\n?/g,DV=/\u0000|\uFFFD/g;function Cj(n){return(typeof n=="string"?n:""+n).replace(LV,`
`).replace(DV,"")}function xx(n,e,t){if(e=Cj(e),Cj(n)!==e&&t)throw Error(te(425))}function cw(){}var eC=null,tC=null;function nC(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rC=typeof setTimeout=="function"?setTimeout:void 0,OV=typeof clearTimeout=="function"?clearTimeout:void 0,_j=typeof Promise=="function"?Promise:void 0,FV=typeof queueMicrotask=="function"?queueMicrotask:typeof _j<"u"?function(n){return _j.resolve(null).then(n).catch(BV)}:rC;function BV(n){setTimeout(function(){throw n})}function kA(n,e){var t=e,r=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(r===0){n.removeChild(s),Pg(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=s}while(t);Pg(e)}function Kl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Tj(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Vp=Math.random().toString(36).slice(2),oa="__reactFiber$"+Vp,Lg="__reactProps$"+Vp,So="__reactContainer$"+Vp,sC="__reactEvents$"+Vp,zV="__reactListeners$"+Vp,$V="__reactHandles$"+Vp;function Ic(n){var e=n[oa];if(e)return e;for(var t=n.parentNode;t;){if(e=t[So]||t[oa]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Tj(n);n!==null;){if(t=n[oa])return t;n=Tj(n)}return e}n=t,t=n.parentNode}return null}function Lv(n){return n=n[oa]||n[So],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Zd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(te(33))}function qS(n){return n[Lg]||null}var iC=[],eh=-1;function cc(n){return{current:n}}function Tt(n){0>eh||(n.current=iC[eh],iC[eh]=null,eh--)}function St(n,e){eh++,iC[eh]=n.current,n.current=e}var rc={},er=cc(rc),Ir=cc(!1),md=rc;function Tp(n,e){var t=n.type.contextTypes;if(!t)return rc;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in t)s[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function Lr(n){return n=n.childContextTypes,n!=null}function uw(){Tt(Ir),Tt(er)}function Nj(n,e,t){if(er.current!==rc)throw Error(te(168));St(er,e),St(Ir,t)}function UD(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(te(108,E6(n)||"Unknown",s));return Ut({},t,r)}function dw(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||rc,md=er.current,St(er,n),St(Ir,Ir.current),!0}function Pj(n,e,t){var r=n.stateNode;if(!r)throw Error(te(169));t?(n=UD(n,e,md),r.__reactInternalMemoizedMergedChildContext=n,Tt(Ir),Tt(er),St(er,n)):Tt(Ir),St(Ir,t)}var Na=null,GS=!1,AA=!1;function HD(n){Na===null?Na=[n]:Na.push(n)}function VV(n){GS=!0,HD(n)}function uc(){if(!AA&&Na!==null){AA=!0;var n=0,e=at;try{var t=Na;for(at=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Na=null,GS=!1}catch(s){throw Na!==null&&(Na=Na.slice(n+1)),mD(JT,uc),s}finally{at=e,AA=!1}}return null}var th=[],nh=0,hw=null,fw=0,Fs=[],Bs=0,gd=null,po=1,mo="";function bc(n,e){th[nh++]=fw,th[nh++]=hw,hw=n,fw=e}function qD(n,e,t){Fs[Bs++]=po,Fs[Bs++]=mo,Fs[Bs++]=gd,gd=n;var r=po;n=mo;var s=32-wi(r)-1;r&=~(1<<s),t+=1;var i=32-wi(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,po=1<<32-wi(e)+s|t<<s|r,mo=i+n}else po=1<<i|t<<s|r,mo=n}function o2(n){n.return!==null&&(bc(n,1),qD(n,1,0))}function l2(n){for(;n===hw;)hw=th[--nh],th[nh]=null,fw=th[--nh],th[nh]=null;for(;n===gd;)gd=Fs[--Bs],Fs[Bs]=null,mo=Fs[--Bs],Fs[Bs]=null,po=Fs[--Bs],Fs[Bs]=null}var fs=null,ds=null,It=!1,bi=null;function GD(n,e){var t=Vs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function jj(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,fs=n,ds=Kl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,fs=n,ds=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=gd!==null?{id:po,overflow:mo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Vs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,fs=n,ds=null,!0):!1;default:return!1}}function aC(n){return(n.mode&1)!==0&&(n.flags&128)===0}function oC(n){if(It){var e=ds;if(e){var t=e;if(!jj(n,e)){if(aC(n))throw Error(te(418));e=Kl(t.nextSibling);var r=fs;e&&jj(n,e)?GD(r,t):(n.flags=n.flags&-4097|2,It=!1,fs=n)}}else{if(aC(n))throw Error(te(418));n.flags=n.flags&-4097|2,It=!1,fs=n}}}function Rj(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;fs=n}function bx(n){if(n!==fs)return!1;if(!It)return Rj(n),It=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!nC(n.type,n.memoizedProps)),e&&(e=ds)){if(aC(n))throw WD(),Error(te(418));for(;e;)GD(n,e),e=Kl(e.nextSibling)}if(Rj(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(te(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ds=Kl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ds=null}}else ds=fs?Kl(n.stateNode.nextSibling):null;return!0}function WD(){for(var n=ds;n;)n=Kl(n.nextSibling)}function Np(){ds=fs=null,It=!1}function c2(n){bi===null?bi=[n]:bi.push(n)}var UV=Po.ReactCurrentBatchConfig;function fm(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(te(309));var r=t.stateNode}if(!r)throw Error(te(147,n));var s=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var o=s.refs;a===null?delete o[i]:o[i]=a},e._stringRef=i,e)}if(typeof n!="string")throw Error(te(284));if(!t._owner)throw Error(te(290,n))}return n}function wx(n,e){throw n=Object.prototype.toString.call(e),Error(te(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Mj(n){var e=n._init;return e(n._payload)}function XD(n){function e(v,x){if(n){var b=v.deletions;b===null?(v.deletions=[x],v.flags|=16):b.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=Zl(v,x),v.index=0,v.sibling=null,v}function i(v,x,b){return v.index=b,n?(b=v.alternate,b!==null?(b=b.index,b<x?(v.flags|=2,x):b):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,x,b,C){return x===null||x.tag!==6?(x=jA(b,v.mode,C),x.return=v,x):(x=s(x,b),x.return=v,x)}function l(v,x,b,C){var _=b.type;return _===Kd?d(v,x,b.props.children,C,b.key):x!==null&&(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bo&&Mj(_)===x.type)?(C=s(x,b.props),C.ref=fm(v,x,b),C.return=v,C):(C=fb(b.type,b.key,b.props,null,v.mode,C),C.ref=fm(v,x,b),C.return=v,C)}function c(v,x,b,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=RA(b,v.mode,C),x.return=v,x):(x=s(x,b.children||[]),x.return=v,x)}function d(v,x,b,C,_){return x===null||x.tag!==7?(x=pd(b,v.mode,C,_),x.return=v,x):(x=s(x,b),x.return=v,x)}function f(v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=jA(""+x,v.mode,b),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ux:return b=fb(x.type,x.key,x.props,null,v.mode,b),b.ref=fm(v,null,x),b.return=v,b;case Xd:return x=RA(x,v.mode,b),x.return=v,x;case Bo:var C=x._init;return f(v,C(x._payload),b)}if(Rm(x)||lm(x))return x=pd(x,v.mode,b,null),x.return=v,x;wx(v,x)}return null}function p(v,x,b,C){var _=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:o(v,x,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ux:return b.key===_?l(v,x,b,C):null;case Xd:return b.key===_?c(v,x,b,C):null;case Bo:return _=b._init,p(v,x,_(b._payload),C)}if(Rm(b)||lm(b))return _!==null?null:d(v,x,b,C,null);wx(v,b)}return null}function m(v,x,b,C,_){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(b)||null,o(x,v,""+C,_);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ux:return v=v.get(C.key===null?b:C.key)||null,l(x,v,C,_);case Xd:return v=v.get(C.key===null?b:C.key)||null,c(x,v,C,_);case Bo:var E=C._init;return m(v,x,b,E(C._payload),_)}if(Rm(C)||lm(C))return v=v.get(b)||null,d(x,v,C,_,null);wx(x,C)}return null}function y(v,x,b,C){for(var _=null,E=null,N=x,j=x=0,M=null;N!==null&&j<b.length;j++){N.index>j?(M=N,N=null):M=N.sibling;var O=p(v,N,b[j],C);if(O===null){N===null&&(N=M);break}n&&N&&O.alternate===null&&e(v,N),x=i(O,x,j),E===null?_=O:E.sibling=O,E=O,N=M}if(j===b.length)return t(v,N),It&&bc(v,j),_;if(N===null){for(;j<b.length;j++)N=f(v,b[j],C),N!==null&&(x=i(N,x,j),E===null?_=N:E.sibling=N,E=N);return It&&bc(v,j),_}for(N=r(v,N);j<b.length;j++)M=m(N,v,j,b[j],C),M!==null&&(n&&M.alternate!==null&&N.delete(M.key===null?j:M.key),x=i(M,x,j),E===null?_=M:E.sibling=M,E=M);return n&&N.forEach(function(L){return e(v,L)}),It&&bc(v,j),_}function g(v,x,b,C){var _=lm(b);if(typeof _!="function")throw Error(te(150));if(b=_.call(b),b==null)throw Error(te(151));for(var E=_=null,N=x,j=x=0,M=null,O=b.next();N!==null&&!O.done;j++,O=b.next()){N.index>j?(M=N,N=null):M=N.sibling;var L=p(v,N,O.value,C);if(L===null){N===null&&(N=M);break}n&&N&&L.alternate===null&&e(v,N),x=i(L,x,j),E===null?_=L:E.sibling=L,E=L,N=M}if(O.done)return t(v,N),It&&bc(v,j),_;if(N===null){for(;!O.done;j++,O=b.next())O=f(v,O.value,C),O!==null&&(x=i(O,x,j),E===null?_=O:E.sibling=O,E=O);return It&&bc(v,j),_}for(N=r(v,N);!O.done;j++,O=b.next())O=m(N,v,j,O.value,C),O!==null&&(n&&O.alternate!==null&&N.delete(O.key===null?j:O.key),x=i(O,x,j),E===null?_=O:E.sibling=O,E=O);return n&&N.forEach(function(F){return e(v,F)}),It&&bc(v,j),_}function w(v,x,b,C){if(typeof b=="object"&&b!==null&&b.type===Kd&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ux:e:{for(var _=b.key,E=x;E!==null;){if(E.key===_){if(_=b.type,_===Kd){if(E.tag===7){t(v,E.sibling),x=s(E,b.props.children),x.return=v,v=x;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Bo&&Mj(_)===E.type){t(v,E.sibling),x=s(E,b.props),x.ref=fm(v,E,b),x.return=v,v=x;break e}t(v,E);break}else e(v,E);E=E.sibling}b.type===Kd?(x=pd(b.props.children,v.mode,C,b.key),x.return=v,v=x):(C=fb(b.type,b.key,b.props,null,v.mode,C),C.ref=fm(v,x,b),C.return=v,v=C)}return a(v);case Xd:e:{for(E=b.key;x!==null;){if(x.key===E)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){t(v,x.sibling),x=s(x,b.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=RA(b,v.mode,C),x.return=v,v=x}return a(v);case Bo:return E=b._init,w(v,x,E(b._payload),C)}if(Rm(b))return y(v,x,b,C);if(lm(b))return g(v,x,b,C);wx(v,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(t(v,x.sibling),x=s(x,b),x.return=v,v=x):(t(v,x),x=jA(b,v.mode,C),x.return=v,v=x),a(v)):t(v,x)}return w}var Pp=XD(!0),KD=XD(!1),pw=cc(null),mw=null,rh=null,u2=null;function d2(){u2=rh=mw=null}function h2(n){var e=pw.current;Tt(pw),n._currentValue=e}function lC(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function bh(n,e){mw=n,u2=rh=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Mr=!0),n.firstContext=null)}function Hs(n){var e=n._currentValue;if(u2!==n)if(n={context:n,memoizedValue:e,next:null},rh===null){if(mw===null)throw Error(te(308));rh=n,mw.dependencies={lanes:0,firstContext:n}}else rh=rh.next=n;return e}var Lc=null;function f2(n){Lc===null?Lc=[n]:Lc.push(n)}function YD(n,e,t,r){var s=e.interleaved;return s===null?(t.next=t,f2(e)):(t.next=s.next,s.next=t),e.interleaved=t,ko(n,r)}function ko(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var zo=!1;function p2(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QD(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function vo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Yl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ko(n,t)}return s=r.interleaved,s===null?(e.next=e,f2(r)):(e.next=s.next,s.next=e),r.interleaved=e,ko(n,t)}function ob(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZT(n,t)}}function Ij(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var s=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?s=i=a:i=i.next=a,t=t.next}while(t!==null);i===null?s=i=e:i=i.next=e}else s=i=e;t={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function gw(n,e,t,r){var s=n.updateQueue;zo=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(o!==null){s.shared.pending=null;var l=o,c=l.next;l.next=null,a===null?i=c:a.next=c,a=l;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(i!==null){var f=s.baseState;a=0,d=c=l=null,o=i;do{var p=o.lane,m=o.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=n,g=o;switch(p=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=Ut({},f,p);break e;case 2:zo=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=s.effects,p===null?s.effects=[o]:p.push(o))}else m={eventTime:m,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,a|=p;if(o=o.next,o===null){if(o=s.shared.pending,o===null)break;p=o,o=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(1);if(d===null&&(l=f),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vd|=a,n.lanes=a,n.memoizedState=f}}function Lj(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],s=r.callback;if(s!==null){if(r.callback=null,r=t,typeof s!="function")throw Error(te(191,s));s.call(r)}}}var Dv={},da=cc(Dv),Dg=cc(Dv),Og=cc(Dv);function Dc(n){if(n===Dv)throw Error(te(174));return n}function m2(n,e){switch(St(Og,e),St(Dg,n),St(da,Dv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:VE(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=VE(e,n)}Tt(da),St(da,e)}function jp(){Tt(da),Tt(Dg),Tt(Og)}function JD(n){Dc(Og.current);var e=Dc(da.current),t=VE(e,n.type);e!==t&&(St(Dg,n),St(da,t))}function g2(n){Dg.current===n&&(Tt(da),Tt(Dg))}var Ft=cc(0);function yw(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var EA=[];function y2(){for(var n=0;n<EA.length;n++)EA[n]._workInProgressVersionPrimary=null;EA.length=0}var lb=Po.ReactCurrentDispatcher,CA=Po.ReactCurrentBatchConfig,yd=0,$t=null,pn=null,An=null,vw=!1,cg=!1,Fg=0,HV=0;function Bn(){throw Error(te(321))}function v2(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ki(n[t],e[t]))return!1;return!0}function x2(n,e,t,r,s,i){if(yd=i,$t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lb.current=n===null||n.memoizedState===null?XV:KV,n=t(r,s),cg){i=0;do{if(cg=!1,Fg=0,25<=i)throw Error(te(301));i+=1,An=pn=null,e.updateQueue=null,lb.current=YV,n=t(r,s)}while(cg)}if(lb.current=xw,e=pn!==null&&pn.next!==null,yd=0,An=pn=$t=null,vw=!1,e)throw Error(te(300));return n}function b2(){var n=Fg!==0;return Fg=0,n}function Ii(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?$t.memoizedState=An=n:An=An.next=n,An}function qs(){if(pn===null){var n=$t.alternate;n=n!==null?n.memoizedState:null}else n=pn.next;var e=An===null?$t.memoizedState:An.next;if(e!==null)An=e,pn=n;else{if(n===null)throw Error(te(310));pn=n,n={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},An===null?$t.memoizedState=An=n:An=An.next=n}return An}function Bg(n,e){return typeof e=="function"?e(n):e}function _A(n){var e=qs(),t=e.queue;if(t===null)throw Error(te(311));t.lastRenderedReducer=n;var r=pn,s=r.baseQueue,i=t.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,t.pending=null}if(s!==null){i=s.next,r=r.baseState;var o=a=null,l=null,c=i;do{var d=c.lane;if((yd&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(o=l=f,a=r):l=l.next=f,$t.lanes|=d,vd|=d}c=c.next}while(c!==null&&c!==i);l===null?a=r:l.next=o,ki(r,e.memoizedState)||(Mr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){s=n;do i=s.lane,$t.lanes|=i,vd|=i,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function TA(n){var e=qs(),t=e.queue;if(t===null)throw Error(te(311));t.lastRenderedReducer=n;var r=t.dispatch,s=t.pending,i=e.memoizedState;if(s!==null){t.pending=null;var a=s=s.next;do i=n(i,a.action),a=a.next;while(a!==s);ki(i,e.memoizedState)||(Mr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function ZD(){}function eO(n,e){var t=$t,r=qs(),s=e(),i=!ki(r.memoizedState,s);if(i&&(r.memoizedState=s,Mr=!0),r=r.queue,w2(rO.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||An!==null&&An.memoizedState.tag&1){if(t.flags|=2048,zg(9,nO.bind(null,t,r,s,e),void 0,null),En===null)throw Error(te(349));yd&30||tO(t,e,s)}return s}function tO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function nO(n,e,t,r){e.value=t,e.getSnapshot=r,sO(e)&&iO(n)}function rO(n,e,t){return t(function(){sO(e)&&iO(n)})}function sO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ki(n,t)}catch{return!0}}function iO(n){var e=ko(n,1);e!==null&&Si(e,n,1,-1)}function Dj(n){var e=Ii();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bg,lastRenderedState:n},e.queue=n,n=n.dispatch=WV.bind(null,$t,n),[e.memoizedState,n]}function zg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=$t.updateQueue,e===null?(e={lastEffect:null,stores:null},$t.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function aO(){return qs().memoizedState}function cb(n,e,t,r){var s=Ii();$t.flags|=n,s.memoizedState=zg(1|e,t,void 0,r===void 0?null:r)}function WS(n,e,t,r){var s=qs();r=r===void 0?null:r;var i=void 0;if(pn!==null){var a=pn.memoizedState;if(i=a.destroy,r!==null&&v2(r,a.deps)){s.memoizedState=zg(e,t,i,r);return}}$t.flags|=n,s.memoizedState=zg(1|e,t,i,r)}function Oj(n,e){return cb(8390656,8,n,e)}function w2(n,e){return WS(2048,8,n,e)}function oO(n,e){return WS(4,2,n,e)}function lO(n,e){return WS(4,4,n,e)}function cO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function uO(n,e,t){return t=t!=null?t.concat([n]):null,WS(4,4,cO.bind(null,e,n),t)}function S2(){}function dO(n,e){var t=qs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&v2(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function hO(n,e){var t=qs();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&v2(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function fO(n,e,t){return yd&21?(ki(t,e)||(t=vD(),$t.lanes|=t,vd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Mr=!0),n.memoizedState=t)}function qV(n,e){var t=at;at=t!==0&&4>t?t:4,n(!0);var r=CA.transition;CA.transition={};try{n(!1),e()}finally{at=t,CA.transition=r}}function pO(){return qs().memoizedState}function GV(n,e,t){var r=Jl(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},mO(n))gO(e,t);else if(t=YD(n,e,t,r),t!==null){var s=hr();Si(t,n,r,s),yO(t,e,r)}}function WV(n,e,t){var r=Jl(n),s={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(mO(n))gO(e,s);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,o=i(a,t);if(s.hasEagerState=!0,s.eagerState=o,ki(o,a)){var l=e.interleaved;l===null?(s.next=s,f2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}t=YD(n,e,s,r),t!==null&&(s=hr(),Si(t,n,r,s),yO(t,e,r))}}function mO(n){var e=n.alternate;return n===$t||e!==null&&e===$t}function gO(n,e){cg=vw=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function yO(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZT(n,t)}}var xw={readContext:Hs,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},XV={readContext:Hs,useCallback:function(n,e){return Ii().memoizedState=[n,e===void 0?null:e],n},useContext:Hs,useEffect:Oj,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,cb(4194308,4,cO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return cb(4194308,4,n,e)},useInsertionEffect:function(n,e){return cb(4,2,n,e)},useMemo:function(n,e){var t=Ii();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Ii();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=GV.bind(null,$t,n),[r.memoizedState,n]},useRef:function(n){var e=Ii();return n={current:n},e.memoizedState=n},useState:Dj,useDebugValue:S2,useDeferredValue:function(n){return Ii().memoizedState=n},useTransition:function(){var n=Dj(!1),e=n[0];return n=qV.bind(null,n[1]),Ii().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=$t,s=Ii();if(It){if(t===void 0)throw Error(te(407));t=t()}else{if(t=e(),En===null)throw Error(te(349));yd&30||tO(r,e,t)}s.memoizedState=t;var i={value:t,getSnapshot:e};return s.queue=i,Oj(rO.bind(null,r,i,n),[n]),r.flags|=2048,zg(9,nO.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=Ii(),e=En.identifierPrefix;if(It){var t=mo,r=po;t=(r&~(1<<32-wi(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Fg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=HV++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},KV={readContext:Hs,useCallback:dO,useContext:Hs,useEffect:w2,useImperativeHandle:uO,useInsertionEffect:oO,useLayoutEffect:lO,useMemo:hO,useReducer:_A,useRef:aO,useState:function(){return _A(Bg)},useDebugValue:S2,useDeferredValue:function(n){var e=qs();return fO(e,pn.memoizedState,n)},useTransition:function(){var n=_A(Bg)[0],e=qs().memoizedState;return[n,e]},useMutableSource:ZD,useSyncExternalStore:eO,useId:pO,unstable_isNewReconciler:!1},YV={readContext:Hs,useCallback:dO,useContext:Hs,useEffect:w2,useImperativeHandle:uO,useInsertionEffect:oO,useLayoutEffect:lO,useMemo:hO,useReducer:TA,useRef:aO,useState:function(){return TA(Bg)},useDebugValue:S2,useDeferredValue:function(n){var e=qs();return pn===null?e.memoizedState=n:fO(e,pn.memoizedState,n)},useTransition:function(){var n=TA(Bg)[0],e=qs().memoizedState;return[n,e]},useMutableSource:ZD,useSyncExternalStore:eO,useId:pO,unstable_isNewReconciler:!1};function ri(n,e){if(n&&n.defaultProps){e=Ut({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function cC(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ut({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var XS={isMounted:function(n){return(n=n._reactInternals)?Ed(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=hr(),s=Jl(n),i=vo(r,s);i.payload=e,t!=null&&(i.callback=t),e=Yl(n,i,s),e!==null&&(Si(e,n,s,r),ob(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=hr(),s=Jl(n),i=vo(r,s);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Yl(n,i,s),e!==null&&(Si(e,n,s,r),ob(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=hr(),r=Jl(n),s=vo(t,r);s.tag=2,e!=null&&(s.callback=e),e=Yl(n,s,r),e!==null&&(Si(e,n,r,t),ob(e,n,r))}};function Fj(n,e,t,r,s,i,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Rg(t,r)||!Rg(s,i):!0}function vO(n,e,t){var r=!1,s=rc,i=e.contextType;return typeof i=="object"&&i!==null?i=Hs(i):(s=Lr(e)?md:er.current,r=e.contextTypes,i=(r=r!=null)?Tp(n,s):rc),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=XS,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=i),e}function Bj(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&XS.enqueueReplaceState(e,e.state,null)}function uC(n,e,t,r){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},p2(n);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Hs(i):(i=Lr(e)?md:er.current,s.context=Tp(n,i)),s.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(cC(n,e,i,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&XS.enqueueReplaceState(s,s.state,null),gw(n,t,s,r),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Rp(n,e){try{var t="",r=e;do t+=A6(r),r=r.return;while(r);var s=t}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:s,digest:null}}function NA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function dC(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QV=typeof WeakMap=="function"?WeakMap:Map;function xO(n,e,t){t=vo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){ww||(ww=!0,wC=r),dC(n,e)},t}function bO(n,e,t){t=vo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;t.payload=function(){return r(s)},t.callback=function(){dC(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){dC(n,e),typeof r!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function zj(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new QV;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(t)||(s.add(t),n=dU.bind(null,n,e,t),e.then(n,n))}function $j(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Vj(n,e,t,r,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=vo(-1,1),e.tag=2,Yl(t,e,1))),t.lanes|=1),n)}var JV=Po.ReactCurrentOwner,Mr=!1;function ur(n,e,t,r){e.child=n===null?KD(e,null,t,r):Pp(e,n.child,t,r)}function Uj(n,e,t,r,s){t=t.render;var i=e.ref;return bh(e,s),r=x2(n,e,t,r,i,s),t=b2(),n!==null&&!Mr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ao(n,e,s)):(It&&t&&o2(e),e.flags|=1,ur(n,e,r,s),e.child)}function Hj(n,e,t,r,s){if(n===null){var i=t.type;return typeof i=="function"&&!P2(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,wO(n,e,i,r,s)):(n=fb(t.type,null,r,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&s)){var a=i.memoizedProps;if(t=t.compare,t=t!==null?t:Rg,t(a,r)&&n.ref===e.ref)return Ao(n,e,s)}return e.flags|=1,n=Zl(i,r),n.ref=e.ref,n.return=e,e.child=n}function wO(n,e,t,r,s){if(n!==null){var i=n.memoizedProps;if(Rg(i,r)&&n.ref===e.ref)if(Mr=!1,e.pendingProps=r=i,(n.lanes&s)!==0)n.flags&131072&&(Mr=!0);else return e.lanes=n.lanes,Ao(n,e,s)}return hC(n,e,t,r,s)}function SO(n,e,t){var r=e.pendingProps,s=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(ih,cs),cs|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,St(ih,cs),cs|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,St(ih,cs),cs|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,St(ih,cs),cs|=r;return ur(n,e,s,t),e.child}function kO(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function hC(n,e,t,r,s){var i=Lr(t)?md:er.current;return i=Tp(e,i),bh(e,s),t=x2(n,e,t,r,i,s),r=b2(),n!==null&&!Mr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Ao(n,e,s)):(It&&r&&o2(e),e.flags|=1,ur(n,e,t,s),e.child)}function qj(n,e,t,r,s){if(Lr(t)){var i=!0;dw(e)}else i=!1;if(bh(e,s),e.stateNode===null)ub(n,e),vO(e,t,r),uC(e,t,r,s),r=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,c=t.contextType;typeof c=="object"&&c!==null?c=Hs(c):(c=Lr(t)?md:er.current,c=Tp(e,c));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||l!==c)&&Bj(e,a,r,c),zo=!1;var p=e.memoizedState;a.state=p,gw(e,r,a,s),l=e.memoizedState,o!==r||p!==l||Ir.current||zo?(typeof d=="function"&&(cC(e,t,d,r),l=e.memoizedState),(o=zo||Fj(e,t,o,r,p,l,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,QD(n,e),o=e.memoizedProps,c=e.type===e.elementType?o:ri(e.type,o),a.props=c,f=e.pendingProps,p=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Hs(l):(l=Lr(t)?md:er.current,l=Tp(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==f||p!==l)&&Bj(e,a,r,l),zo=!1,p=e.memoizedState,a.state=p,gw(e,r,a,s);var y=e.memoizedState;o!==f||p!==y||Ir.current||zo?(typeof m=="function"&&(cC(e,t,m,r),y=e.memoizedState),(c=zo||Fj(e,t,c,r,p,y,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=l,r=c):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),r=!1)}return fC(n,e,t,r,i,s)}function fC(n,e,t,r,s,i){kO(n,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Pj(e,t,!1),Ao(n,e,i);r=e.stateNode,JV.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&a?(e.child=Pp(e,n.child,null,i),e.child=Pp(e,null,o,i)):ur(n,e,o,i),e.memoizedState=r.state,s&&Pj(e,t,!0),e.child}function AO(n){var e=n.stateNode;e.pendingContext?Nj(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Nj(n,e.context,!1),m2(n,e.containerInfo)}function Gj(n,e,t,r,s){return Np(),c2(s),e.flags|=256,ur(n,e,t,r),e.child}var pC={dehydrated:null,treeContext:null,retryLane:0};function mC(n){return{baseLanes:n,cachePool:null,transitions:null}}function EO(n,e,t){var r=e.pendingProps,s=Ft.current,i=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(s&2)!==0),o?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),St(Ft,s&1),n===null)return oC(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,n=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=QS(a,r,0,null),n=pd(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=mC(t),e.memoizedState=pC,n):k2(e,a));if(s=n.memoizedState,s!==null&&(o=s.dehydrated,o!==null))return ZV(n,e,a,r,o,s,t);if(i){i=r.fallback,a=e.mode,s=n.child,o=s.sibling;var l={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Zl(s,l),r.subtreeFlags=s.subtreeFlags&14680064),o!==null?i=Zl(o,i):(i=pd(i,a,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=n.child.memoizedState,a=a===null?mC(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=n.childLanes&~t,e.memoizedState=pC,r}return i=n.child,n=i.sibling,r=Zl(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function k2(n,e){return e=QS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Sx(n,e,t,r){return r!==null&&c2(r),Pp(e,n.child,null,t),n=k2(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function ZV(n,e,t,r,s,i,a){if(t)return e.flags&256?(e.flags&=-257,r=NA(Error(te(422))),Sx(n,e,a,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=QS({mode:"visible",children:r.children},s,0,null),i=pd(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Pp(e,n.child,null,a),e.child.memoizedState=mC(a),e.memoizedState=pC,i);if(!(e.mode&1))return Sx(n,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var o=r.dgst;return r=o,i=Error(te(419)),r=NA(i,r,void 0),Sx(n,e,a,r)}if(o=(a&n.childLanes)!==0,Mr||o){if(r=En,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ko(n,s),Si(r,n,s,-1))}return N2(),r=NA(Error(te(421))),Sx(n,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=hU.bind(null,n),s._reactRetry=e,null):(n=i.treeContext,ds=Kl(s.nextSibling),fs=e,It=!0,bi=null,n!==null&&(Fs[Bs++]=po,Fs[Bs++]=mo,Fs[Bs++]=gd,po=n.id,mo=n.overflow,gd=e),e=k2(e,r.children),e.flags|=4096,e)}function Wj(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),lC(n.return,e,t)}function PA(n,e,t,r,s){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=s)}function CO(n,e,t){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ur(n,e,r.children,t),r=Ft.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Wj(n,t,e);else if(n.tag===19)Wj(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(St(Ft,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&yw(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),PA(e,!1,s,t,i);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&yw(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}PA(e,!0,t,null,i);break;case"together":PA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ub(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ao(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),vd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(te(153));if(e.child!==null){for(n=e.child,t=Zl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Zl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function eU(n,e,t){switch(e.tag){case 3:AO(e),Np();break;case 5:JD(e);break;case 1:Lr(e.type)&&dw(e);break;case 4:m2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;St(pw,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Ft,Ft.current&1),e.flags|=128,null):t&e.child.childLanes?EO(n,e,t):(St(Ft,Ft.current&1),n=Ao(n,e,t),n!==null?n.sibling:null);St(Ft,Ft.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return CO(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),St(Ft,Ft.current),r)break;return null;case 22:case 23:return e.lanes=0,SO(n,e,t)}return Ao(n,e,t)}var _O,gC,TO,NO;_O=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};gC=function(){};TO=function(n,e,t,r){var s=n.memoizedProps;if(s!==r){n=e.stateNode,Dc(da.current);var i=null;switch(t){case"input":s=FE(n,s),r=FE(n,r),i=[];break;case"select":s=Ut({},s,{value:void 0}),r=Ut({},r,{value:void 0}),i=[];break;case"textarea":s=$E(n,s),r=$E(n,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=cw)}UE(t,r);var a;t=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var o=s[c];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Eg.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(o=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==o&&(l!=null||o!=null))if(c==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Eg.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&_t("scroll",n),i||o===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};NO=function(n,e,t,r){t!==r&&(e.flags|=4)};function pm(n,e){if(!It)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function zn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function tU(n,e,t){var r=e.pendingProps;switch(l2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return Lr(e.type)&&uw(),zn(e),null;case 3:return r=e.stateNode,jp(),Tt(Ir),Tt(er),y2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(bx(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bi!==null&&(AC(bi),bi=null))),gC(n,e),zn(e),null;case 5:g2(e);var s=Dc(Og.current);if(t=e.type,n!==null&&e.stateNode!=null)TO(n,e,t,r,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(te(166));return zn(e),null}if(n=Dc(da.current),bx(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[oa]=e,r[Lg]=i,n=(e.mode&1)!==0,t){case"dialog":_t("cancel",r),_t("close",r);break;case"iframe":case"object":case"embed":_t("load",r);break;case"video":case"audio":for(s=0;s<Im.length;s++)_t(Im[s],r);break;case"source":_t("error",r);break;case"img":case"image":case"link":_t("error",r),_t("load",r);break;case"details":_t("toggle",r);break;case"input":nj(r,i),_t("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},_t("invalid",r);break;case"textarea":sj(r,i),_t("invalid",r)}UE(t,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var o=i[a];a==="children"?typeof o=="string"?r.textContent!==o&&(i.suppressHydrationWarning!==!0&&xx(r.textContent,o,n),s=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(i.suppressHydrationWarning!==!0&&xx(r.textContent,o,n),s=["children",""+o]):Eg.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&_t("scroll",r)}switch(t){case"input":dx(r),rj(r,i,!0);break;case"textarea":dx(r),ij(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=cw)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=rD(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=a.createElement(t,{is:r.is}):(n=a.createElement(t),t==="select"&&(a=n,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):n=a.createElementNS(n,t),n[oa]=e,n[Lg]=r,_O(n,e,!1,!1),e.stateNode=n;e:{switch(a=HE(t,r),t){case"dialog":_t("cancel",n),_t("close",n),s=r;break;case"iframe":case"object":case"embed":_t("load",n),s=r;break;case"video":case"audio":for(s=0;s<Im.length;s++)_t(Im[s],n);s=r;break;case"source":_t("error",n),s=r;break;case"img":case"image":case"link":_t("error",n),_t("load",n),s=r;break;case"details":_t("toggle",n),s=r;break;case"input":nj(n,r),s=FE(n,r),_t("invalid",n);break;case"option":s=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},s=Ut({},r,{value:void 0}),_t("invalid",n);break;case"textarea":sj(n,r),s=$E(n,r),_t("invalid",n);break;default:s=r}UE(t,s),o=s;for(i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="style"?aD(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sD(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Cg(n,l):typeof l=="number"&&Cg(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Eg.hasOwnProperty(i)?l!=null&&i==="onScroll"&&_t("scroll",n):l!=null&&WT(n,i,l,a))}switch(t){case"input":dx(n),rj(n,r,!1);break;case"textarea":dx(n),ij(n);break;case"option":r.value!=null&&n.setAttribute("value",""+nc(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?gh(n,!!r.multiple,i,!1):r.defaultValue!=null&&gh(n,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=cw)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(n&&e.stateNode!=null)NO(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(te(166));if(t=Dc(Og.current),Dc(da.current),bx(e)){if(r=e.stateNode,t=e.memoizedProps,r[oa]=e,(i=r.nodeValue!==t)&&(n=fs,n!==null))switch(n.tag){case 3:xx(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xx(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[oa]=e,e.stateNode=r}return zn(e),null;case 13:if(Tt(Ft),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(It&&ds!==null&&e.mode&1&&!(e.flags&128))WD(),Np(),e.flags|=98560,i=!1;else if(i=bx(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(te(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(te(317));i[oa]=e}else Np(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),i=!1}else bi!==null&&(AC(bi),bi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Ft.current&1?mn===0&&(mn=3):N2())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return jp(),gC(n,e),n===null&&Mg(e.stateNode.containerInfo),zn(e),null;case 10:return h2(e.type._context),zn(e),null;case 17:return Lr(e.type)&&uw(),zn(e),null;case 19:if(Tt(Ft),i=e.memoizedState,i===null)return zn(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)pm(i,!1);else{if(mn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=yw(n),a!==null){for(e.flags|=128,pm(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,n=a.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return St(Ft,Ft.current&1|2),e.child}n=n.sibling}i.tail!==null&&Zt()>Mp&&(e.flags|=128,r=!0,pm(i,!1),e.lanes=4194304)}else{if(!r)if(n=yw(a),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),pm(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!It)return zn(e),null}else 2*Zt()-i.renderingStartTime>Mp&&t!==1073741824&&(e.flags|=128,r=!0,pm(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(t=i.last,t!==null?t.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Zt(),e.sibling=null,t=Ft.current,St(Ft,r?t&1|2:t&1),e):(zn(e),null);case 22:case 23:return T2(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?cs&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(te(156,e.tag))}function nU(n,e){switch(l2(e),e.tag){case 1:return Lr(e.type)&&uw(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return jp(),Tt(Ir),Tt(er),y2(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return g2(e),null;case 13:if(Tt(Ft),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(te(340));Np()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Tt(Ft),null;case 4:return jp(),null;case 10:return h2(e.type._context),null;case 22:case 23:return T2(),null;case 24:return null;default:return null}}var kx=!1,Qn=!1,rU=typeof WeakSet=="function"?WeakSet:Set,de=null;function sh(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Wt(n,e,r)}else t.current=null}function yC(n,e,t){try{t()}catch(r){Wt(n,e,r)}}var Xj=!1;function sU(n,e){if(eC=aw,n=ID(),a2(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,c=0,d=0,f=n,p=null;t:for(;;){for(var m;f!==t||s!==0&&f.nodeType!==3||(o=a+s),f!==i||r!==0&&f.nodeType!==3||(l=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===s&&(o=a),p===i&&++d===r&&(l=a),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(tC={focusedElem:n,selectionRange:t},aw=!1,de=e;de!==null;)if(e=de,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,de=n;else for(;de!==null;){e=de;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:ri(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(C){Wt(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,de=n;break}de=e.return}return y=Xj,Xj=!1,y}function ug(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&n)===n){var i=s.destroy;s.destroy=void 0,i!==void 0&&yC(e,t,i)}s=s.next}while(s!==r)}}function KS(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function vC(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function PO(n){var e=n.alternate;e!==null&&(n.alternate=null,PO(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[oa],delete e[Lg],delete e[sC],delete e[zV],delete e[$V])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function jO(n){return n.tag===5||n.tag===3||n.tag===4}function Kj(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jO(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function xC(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=cw));else if(r!==4&&(n=n.child,n!==null))for(xC(n,e,t),n=n.sibling;n!==null;)xC(n,e,t),n=n.sibling}function bC(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(bC(n,e,t),n=n.sibling;n!==null;)bC(n,e,t),n=n.sibling}var In=null,vi=!1;function Mo(n,e,t){for(t=t.child;t!==null;)RO(n,e,t),t=t.sibling}function RO(n,e,t){if(ua&&typeof ua.onCommitFiberUnmount=="function")try{ua.onCommitFiberUnmount($S,t)}catch{}switch(t.tag){case 5:Qn||sh(t,e);case 6:var r=In,s=vi;In=null,Mo(n,e,t),In=r,vi=s,In!==null&&(vi?(n=In,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):In.removeChild(t.stateNode));break;case 18:In!==null&&(vi?(n=In,t=t.stateNode,n.nodeType===8?kA(n.parentNode,t):n.nodeType===1&&kA(n,t),Pg(n)):kA(In,t.stateNode));break;case 4:r=In,s=vi,In=t.stateNode.containerInfo,vi=!0,Mo(n,e,t),In=r,vi=s;break;case 0:case 11:case 14:case 15:if(!Qn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&yC(t,e,a),s=s.next}while(s!==r)}Mo(n,e,t);break;case 1:if(!Qn&&(sh(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Wt(t,e,o)}Mo(n,e,t);break;case 21:Mo(n,e,t);break;case 22:t.mode&1?(Qn=(r=Qn)||t.memoizedState!==null,Mo(n,e,t),Qn=r):Mo(n,e,t);break;default:Mo(n,e,t)}}function Yj(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new rU),e.forEach(function(r){var s=fU.bind(null,n,r);t.has(r)||(t.add(r),r.then(s,s))})}}function Zs(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var s=t[r];try{var i=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:In=o.stateNode,vi=!1;break e;case 3:In=o.stateNode.containerInfo,vi=!0;break e;case 4:In=o.stateNode.containerInfo,vi=!0;break e}o=o.return}if(In===null)throw Error(te(160));RO(i,a,s),In=null,vi=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){Wt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MO(e,n),e=e.sibling}function MO(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zs(e,n),Pi(n),r&4){try{ug(3,n,n.return),KS(3,n)}catch(g){Wt(n,n.return,g)}try{ug(5,n,n.return)}catch(g){Wt(n,n.return,g)}}break;case 1:Zs(e,n),Pi(n),r&512&&t!==null&&sh(t,t.return);break;case 5:if(Zs(e,n),Pi(n),r&512&&t!==null&&sh(t,t.return),n.flags&32){var s=n.stateNode;try{Cg(s,"")}catch(g){Wt(n,n.return,g)}}if(r&4&&(s=n.stateNode,s!=null)){var i=n.memoizedProps,a=t!==null?t.memoizedProps:i,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&i.type==="radio"&&i.name!=null&&tD(s,i),HE(o,a);var c=HE(o,i);for(a=0;a<l.length;a+=2){var d=l[a],f=l[a+1];d==="style"?aD(s,f):d==="dangerouslySetInnerHTML"?sD(s,f):d==="children"?Cg(s,f):WT(s,d,f,c)}switch(o){case"input":BE(s,i);break;case"textarea":nD(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?gh(s,!!i.multiple,m,!1):p!==!!i.multiple&&(i.defaultValue!=null?gh(s,!!i.multiple,i.defaultValue,!0):gh(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lg]=i}catch(g){Wt(n,n.return,g)}}break;case 6:if(Zs(e,n),Pi(n),r&4){if(n.stateNode===null)throw Error(te(162));s=n.stateNode,i=n.memoizedProps;try{s.nodeValue=i}catch(g){Wt(n,n.return,g)}}break;case 3:if(Zs(e,n),Pi(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Pg(e.containerInfo)}catch(g){Wt(n,n.return,g)}break;case 4:Zs(e,n),Pi(n);break;case 13:Zs(e,n),Pi(n),s=n.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(C2=Zt())),r&4&&Yj(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Qn=(c=Qn)||d,Zs(e,n),Qn=c):Zs(e,n),Pi(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(de=n,d=n.child;d!==null;){for(f=de=d;de!==null;){switch(p=de,m=p.child,p.tag){case 0:case 11:case 14:case 15:ug(4,p,p.return);break;case 1:sh(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,t=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Wt(r,t,g)}}break;case 5:sh(p,p.return);break;case 22:if(p.memoizedState!==null){Jj(f);continue}}m!==null?(m.return=p,de=m):Jj(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(o=f.stateNode,l=f.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=iD("display",a))}catch(g){Wt(n,n.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Wt(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zs(e,n),Pi(n),r&4&&Yj(n);break;case 21:break;default:Zs(e,n),Pi(n)}}function Pi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(jO(t)){var r=t;break e}t=t.return}throw Error(te(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Cg(s,""),r.flags&=-33);var i=Kj(n);bC(n,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Kj(n);xC(n,o,a);break;default:throw Error(te(161))}}catch(l){Wt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function iU(n,e,t){de=n,IO(n)}function IO(n,e,t){for(var r=(n.mode&1)!==0;de!==null;){var s=de,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||kx;if(!a){var o=s.alternate,l=o!==null&&o.memoizedState!==null||Qn;o=kx;var c=Qn;if(kx=a,(Qn=l)&&!c)for(de=s;de!==null;)a=de,l=a.child,a.tag===22&&a.memoizedState!==null?Zj(s):l!==null?(l.return=a,de=l):Zj(s);for(;i!==null;)de=i,IO(i),i=i.sibling;de=s,kx=o,Qn=c}Qj(n)}else s.subtreeFlags&8772&&i!==null?(i.return=s,de=i):Qj(n)}}function Qj(n){for(;de!==null;){var e=de;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qn||KS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qn)if(t===null)r.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:ri(e.type,t.memoizedProps);r.componentDidUpdate(s,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Lj(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Lj(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Pg(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Qn||e.flags&512&&vC(e)}catch(p){Wt(e,e.return,p)}}if(e===n){de=null;break}if(t=e.sibling,t!==null){t.return=e.return,de=t;break}de=e.return}}function Jj(n){for(;de!==null;){var e=de;if(e===n){de=null;break}var t=e.sibling;if(t!==null){t.return=e.return,de=t;break}de=e.return}}function Zj(n){for(;de!==null;){var e=de;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{KS(4,e)}catch(l){Wt(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){Wt(e,s,l)}}var i=e.return;try{vC(e)}catch(l){Wt(e,i,l)}break;case 5:var a=e.return;try{vC(e)}catch(l){Wt(e,a,l)}}}catch(l){Wt(e,e.return,l)}if(e===n){de=null;break}var o=e.sibling;if(o!==null){o.return=e.return,de=o;break}de=e.return}}var aU=Math.ceil,bw=Po.ReactCurrentDispatcher,A2=Po.ReactCurrentOwner,Us=Po.ReactCurrentBatchConfig,Ze=0,En=null,an=null,Dn=0,cs=0,ih=cc(0),mn=0,$g=null,vd=0,YS=0,E2=0,dg=null,jr=null,C2=0,Mp=1/0,Ea=null,ww=!1,wC=null,Ql=null,Ax=!1,ql=null,Sw=0,hg=0,SC=null,db=-1,hb=0;function hr(){return Ze&6?Zt():db!==-1?db:db=Zt()}function Jl(n){return n.mode&1?Ze&2&&Dn!==0?Dn&-Dn:UV.transition!==null?(hb===0&&(hb=vD()),hb):(n=at,n!==0||(n=window.event,n=n===void 0?16:ED(n.type)),n):1}function Si(n,e,t,r){if(50<hg)throw hg=0,SC=null,Error(te(185));Mv(n,t,r),(!(Ze&2)||n!==En)&&(n===En&&(!(Ze&2)&&(YS|=t),mn===4&&Uo(n,Dn)),Dr(n,r),t===1&&Ze===0&&!(e.mode&1)&&(Mp=Zt()+500,GS&&uc()))}function Dr(n,e){var t=n.callbackNode;U6(n,e);var r=iw(n,n===En?Dn:0);if(r===0)t!==null&&lj(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&lj(t),e===1)n.tag===0?VV(eR.bind(null,n)):HD(eR.bind(null,n)),FV(function(){!(Ze&6)&&uc()}),t=null;else{switch(xD(r)){case 1:t=JT;break;case 4:t=gD;break;case 16:t=sw;break;case 536870912:t=yD;break;default:t=sw}t=VO(t,LO.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function LO(n,e){if(db=-1,hb=0,Ze&6)throw Error(te(327));var t=n.callbackNode;if(wh()&&n.callbackNode!==t)return null;var r=iw(n,n===En?Dn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=kw(n,r);else{e=r;var s=Ze;Ze|=2;var i=OO();(En!==n||Dn!==e)&&(Ea=null,Mp=Zt()+500,fd(n,e));do try{cU();break}catch(o){DO(n,o)}while(1);d2(),bw.current=i,Ze=s,an!==null?e=0:(En=null,Dn=0,e=mn)}if(e!==0){if(e===2&&(s=KE(n),s!==0&&(r=s,e=kC(n,s))),e===1)throw t=$g,fd(n,0),Uo(n,r),Dr(n,Zt()),t;if(e===6)Uo(n,r);else{if(s=n.current.alternate,!(r&30)&&!oU(s)&&(e=kw(n,r),e===2&&(i=KE(n),i!==0&&(r=i,e=kC(n,i))),e===1))throw t=$g,fd(n,0),Uo(n,r),Dr(n,Zt()),t;switch(n.finishedWork=s,n.finishedLanes=r,e){case 0:case 1:throw Error(te(345));case 2:wc(n,jr,Ea);break;case 3:if(Uo(n,r),(r&130023424)===r&&(e=C2+500-Zt(),10<e)){if(iw(n,0)!==0)break;if(s=n.suspendedLanes,(s&r)!==r){hr(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=rC(wc.bind(null,n,jr,Ea),e);break}wc(n,jr,Ea);break;case 4:if(Uo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,s=-1;0<r;){var a=31-wi(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Zt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aU(r/1960))-r,10<r){n.timeoutHandle=rC(wc.bind(null,n,jr,Ea),r);break}wc(n,jr,Ea);break;case 5:wc(n,jr,Ea);break;default:throw Error(te(329))}}}return Dr(n,Zt()),n.callbackNode===t?LO.bind(null,n):null}function kC(n,e){var t=dg;return n.current.memoizedState.isDehydrated&&(fd(n,e).flags|=256),n=kw(n,e),n!==2&&(e=jr,jr=t,e!==null&&AC(e)),n}function AC(n){jr===null?jr=n:jr.push.apply(jr,n)}function oU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var s=t[r],i=s.getSnapshot;s=s.value;try{if(!ki(i(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Uo(n,e){for(e&=~E2,e&=~YS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-wi(e),r=1<<t;n[t]=-1,e&=~r}}function eR(n){if(Ze&6)throw Error(te(327));wh();var e=iw(n,0);if(!(e&1))return Dr(n,Zt()),null;var t=kw(n,e);if(n.tag!==0&&t===2){var r=KE(n);r!==0&&(e=r,t=kC(n,r))}if(t===1)throw t=$g,fd(n,0),Uo(n,e),Dr(n,Zt()),t;if(t===6)throw Error(te(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,wc(n,jr,Ea),Dr(n,Zt()),null}function _2(n,e){var t=Ze;Ze|=1;try{return n(e)}finally{Ze=t,Ze===0&&(Mp=Zt()+500,GS&&uc())}}function xd(n){ql!==null&&ql.tag===0&&!(Ze&6)&&wh();var e=Ze;Ze|=1;var t=Us.transition,r=at;try{if(Us.transition=null,at=1,n)return n()}finally{at=r,Us.transition=t,Ze=e,!(Ze&6)&&uc()}}function T2(){cs=ih.current,Tt(ih)}function fd(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,OV(t)),an!==null)for(t=an.return;t!==null;){var r=t;switch(l2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uw();break;case 3:jp(),Tt(Ir),Tt(er),y2();break;case 5:g2(r);break;case 4:jp();break;case 13:Tt(Ft);break;case 19:Tt(Ft);break;case 10:h2(r.type._context);break;case 22:case 23:T2()}t=t.return}if(En=n,an=n=Zl(n.current,null),Dn=cs=e,mn=0,$g=null,E2=YS=vd=0,jr=dg=null,Lc!==null){for(e=0;e<Lc.length;e++)if(t=Lc[e],r=t.interleaved,r!==null){t.interleaved=null;var s=r.next,i=t.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}t.pending=r}Lc=null}return n}function DO(n,e){do{var t=an;try{if(d2(),lb.current=xw,vw){for(var r=$t.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}vw=!1}if(yd=0,An=pn=$t=null,cg=!1,Fg=0,A2.current=null,t===null||t.return===null){mn=1,$g=e,an=null;break}e:{var i=n,a=t.return,o=t,l=e;if(e=Dn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=o,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=$j(a);if(m!==null){m.flags&=-257,Vj(m,a,o,i,e),m.mode&1&&zj(i,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){zj(i,c,e),N2();break e}l=Error(te(426))}}else if(It&&o.mode&1){var w=$j(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vj(w,a,o,i,e),c2(Rp(l,o));break e}}i=l=Rp(l,o),mn!==4&&(mn=2),dg===null?dg=[i]:dg.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=xO(i,l,e);Ij(i,v);break e;case 1:o=l;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ql===null||!Ql.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=bO(i,o,e);Ij(i,C);break e}}i=i.return}while(i!==null)}BO(t)}catch(_){e=_,an===t&&t!==null&&(an=t=t.return);continue}break}while(1)}function OO(){var n=bw.current;return bw.current=xw,n===null?xw:n}function N2(){(mn===0||mn===3||mn===2)&&(mn=4),En===null||!(vd&268435455)&&!(YS&268435455)||Uo(En,Dn)}function kw(n,e){var t=Ze;Ze|=2;var r=OO();(En!==n||Dn!==e)&&(Ea=null,fd(n,e));do try{lU();break}catch(s){DO(n,s)}while(1);if(d2(),Ze=t,bw.current=r,an!==null)throw Error(te(261));return En=null,Dn=0,mn}function lU(){for(;an!==null;)FO(an)}function cU(){for(;an!==null&&!I6();)FO(an)}function FO(n){var e=$O(n.alternate,n,cs);n.memoizedProps=n.pendingProps,e===null?BO(n):an=e,A2.current=null}function BO(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=nU(t,e),t!==null){t.flags&=32767,an=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mn=6,an=null;return}}else if(t=tU(t,e,cs),t!==null){an=t;return}if(e=e.sibling,e!==null){an=e;return}an=e=n}while(e!==null);mn===0&&(mn=5)}function wc(n,e,t){var r=at,s=Us.transition;try{Us.transition=null,at=1,uU(n,e,t,r)}finally{Us.transition=s,at=r}return null}function uU(n,e,t,r){do wh();while(ql!==null);if(Ze&6)throw Error(te(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(te(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(H6(n,i),n===En&&(an=En=null,Dn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ax||(Ax=!0,VO(sw,function(){return wh(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Us.transition,Us.transition=null;var a=at;at=1;var o=Ze;Ze|=4,A2.current=null,sU(n,t),MO(t,n),PV(tC),aw=!!eC,tC=eC=null,n.current=t,iU(t),L6(),Ze=o,at=a,Us.transition=i}else n.current=t;if(Ax&&(Ax=!1,ql=n,Sw=s),i=n.pendingLanes,i===0&&(Ql=null),F6(t.stateNode),Dr(n,Zt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],r(s.value,{componentStack:s.stack,digest:s.digest});if(ww)throw ww=!1,n=wC,wC=null,n;return Sw&1&&n.tag!==0&&wh(),i=n.pendingLanes,i&1?n===SC?hg++:(hg=0,SC=n):hg=0,uc(),null}function wh(){if(ql!==null){var n=xD(Sw),e=Us.transition,t=at;try{if(Us.transition=null,at=16>n?16:n,ql===null)var r=!1;else{if(n=ql,ql=null,Sw=0,Ze&6)throw Error(te(331));var s=Ze;for(Ze|=4,de=n.current;de!==null;){var i=de,a=i.child;if(de.flags&16){var o=i.deletions;if(o!==null){for(var l=0;l<o.length;l++){var c=o[l];for(de=c;de!==null;){var d=de;switch(d.tag){case 0:case 11:case 15:ug(8,d,i)}var f=d.child;if(f!==null)f.return=d,de=f;else for(;de!==null;){d=de;var p=d.sibling,m=d.return;if(PO(d),d===c){de=null;break}if(p!==null){p.return=m,de=p;break}de=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}de=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,de=a;else e:for(;de!==null;){if(i=de,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ug(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,de=v;break e}de=i.return}}var x=n.current;for(de=x;de!==null;){a=de;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,de=b;else e:for(a=x;de!==null;){if(o=de,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:KS(9,o)}}catch(_){Wt(o,o.return,_)}if(o===a){de=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,de=C;break e}de=o.return}}if(Ze=s,uc(),ua&&typeof ua.onPostCommitFiberRoot=="function")try{ua.onPostCommitFiberRoot($S,n)}catch{}r=!0}return r}finally{at=t,Us.transition=e}}return!1}function tR(n,e,t){e=Rp(t,e),e=xO(n,e,1),n=Yl(n,e,1),e=hr(),n!==null&&(Mv(n,1,e),Dr(n,e))}function Wt(n,e,t){if(n.tag===3)tR(n,n,t);else for(;e!==null;){if(e.tag===3){tR(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ql===null||!Ql.has(r))){n=Rp(t,n),n=bO(e,n,1),e=Yl(e,n,1),n=hr(),e!==null&&(Mv(e,1,n),Dr(e,n));break}}e=e.return}}function dU(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=hr(),n.pingedLanes|=n.suspendedLanes&t,En===n&&(Dn&t)===t&&(mn===4||mn===3&&(Dn&130023424)===Dn&&500>Zt()-C2?fd(n,0):E2|=t),Dr(n,e)}function zO(n,e){e===0&&(n.mode&1?(e=px,px<<=1,!(px&130023424)&&(px=4194304)):e=1);var t=hr();n=ko(n,e),n!==null&&(Mv(n,e,t),Dr(n,t))}function hU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),zO(n,t)}function fU(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(te(314))}r!==null&&r.delete(e),zO(n,t)}var $O;$O=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ir.current)Mr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Mr=!1,eU(n,e,t);Mr=!!(n.flags&131072)}else Mr=!1,It&&e.flags&1048576&&qD(e,fw,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ub(n,e),n=e.pendingProps;var s=Tp(e,er.current);bh(e,t),s=x2(null,e,r,n,s,t);var i=b2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lr(r)?(i=!0,dw(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,p2(e),s.updater=XS,e.stateNode=s,s._reactInternals=e,uC(e,r,n,t),e=fC(null,e,r,!0,i,t)):(e.tag=0,It&&i&&o2(e),ur(null,e,s,t),e=e.child),e;case 16:r=e.elementType;e:{switch(ub(n,e),n=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=mU(r),n=ri(r,n),s){case 0:e=hC(null,e,r,n,t);break e;case 1:e=qj(null,e,r,n,t);break e;case 11:e=Uj(null,e,r,n,t);break e;case 14:e=Hj(null,e,r,ri(r.type,n),t);break e}throw Error(te(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ri(r,s),hC(n,e,r,s,t);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ri(r,s),qj(n,e,r,s,t);case 3:e:{if(AO(e),n===null)throw Error(te(387));r=e.pendingProps,i=e.memoizedState,s=i.element,QD(n,e),gw(e,r,null,t);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Rp(Error(te(423)),e),e=Gj(n,e,r,t,s);break e}else if(r!==s){s=Rp(Error(te(424)),e),e=Gj(n,e,r,t,s);break e}else for(ds=Kl(e.stateNode.containerInfo.firstChild),fs=e,It=!0,bi=null,t=KD(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Np(),r===s){e=Ao(n,e,t);break e}ur(n,e,r,t)}e=e.child}return e;case 5:return JD(e),n===null&&oC(e),r=e.type,s=e.pendingProps,i=n!==null?n.memoizedProps:null,a=s.children,nC(r,s)?a=null:i!==null&&nC(r,i)&&(e.flags|=32),kO(n,e),ur(n,e,a,t),e.child;case 6:return n===null&&oC(e),null;case 13:return EO(n,e,t);case 4:return m2(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Pp(e,null,r,t):ur(n,e,r,t),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ri(r,s),Uj(n,e,r,s,t);case 7:return ur(n,e,e.pendingProps,t),e.child;case 8:return ur(n,e,e.pendingProps.children,t),e.child;case 12:return ur(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,St(pw,r._currentValue),r._currentValue=a,i!==null)if(ki(i.value,a)){if(i.children===s.children&&!Ir.current){e=Ao(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){a=i.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=vo(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),lC(i.return,t,e),o.lanes|=t;break}l=l.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(te(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),lC(a,t,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ur(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bh(e,t),s=Hs(s),r=r(s),e.flags|=1,ur(n,e,r,t),e.child;case 14:return r=e.type,s=ri(r,e.pendingProps),s=ri(r.type,s),Hj(n,e,r,s,t);case 15:return wO(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ri(r,s),ub(n,e),e.tag=1,Lr(r)?(n=!0,dw(e)):n=!1,bh(e,t),vO(e,r,s),uC(e,r,s,t),fC(null,e,r,!0,n,t);case 19:return CO(n,e,t);case 22:return SO(n,e,t)}throw Error(te(156,e.tag))};function VO(n,e){return mD(n,e)}function pU(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(n,e,t,r){return new pU(n,e,t,r)}function P2(n){return n=n.prototype,!(!n||!n.isReactComponent)}function mU(n){if(typeof n=="function")return P2(n)?1:0;if(n!=null){if(n=n.$$typeof,n===KT)return 11;if(n===YT)return 14}return 2}function Zl(n,e){var t=n.alternate;return t===null?(t=Vs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function fb(n,e,t,r,s,i){var a=2;if(r=n,typeof n=="function")P2(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Kd:return pd(t.children,s,i,e);case XT:a=8,s|=8;break;case IE:return n=Vs(12,t,e,s|2),n.elementType=IE,n.lanes=i,n;case LE:return n=Vs(13,t,e,s),n.elementType=LE,n.lanes=i,n;case DE:return n=Vs(19,t,e,s),n.elementType=DE,n.lanes=i,n;case JL:return QS(t,s,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case YL:a=10;break e;case QL:a=9;break e;case KT:a=11;break e;case YT:a=14;break e;case Bo:a=16,r=null;break e}throw Error(te(130,n==null?n:typeof n,""))}return e=Vs(a,t,e,s),e.elementType=n,e.type=r,e.lanes=i,e}function pd(n,e,t,r){return n=Vs(7,n,r,e),n.lanes=t,n}function QS(n,e,t,r){return n=Vs(22,n,r,e),n.elementType=JL,n.lanes=t,n.stateNode={isHidden:!1},n}function jA(n,e,t){return n=Vs(6,n,null,e),n.lanes=t,n}function RA(n,e,t){return e=Vs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function gU(n,e,t,r,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hA(0),this.expirationTimes=hA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hA(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function j2(n,e,t,r,s,i,a,o,l){return n=new gU(n,e,t,o,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},p2(i),n}function yU(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function UO(n){if(!n)return rc;n=n._reactInternals;e:{if(Ed(n)!==n||n.tag!==1)throw Error(te(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(te(171))}if(n.tag===1){var t=n.type;if(Lr(t))return UD(n,t,e)}return e}function HO(n,e,t,r,s,i,a,o,l){return n=j2(t,r,!0,n,s,i,a,o,l),n.context=UO(null),t=n.current,r=hr(),s=Jl(t),i=vo(r,s),i.callback=e??null,Yl(t,i,s),n.current.lanes=s,Mv(n,s,r),Dr(n,r),n}function JS(n,e,t,r){var s=e.current,i=hr(),a=Jl(s);return t=UO(t),e.context===null?e.context=t:e.pendingContext=t,e=vo(i,a),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Yl(s,e,a),n!==null&&(Si(n,s,a,i),ob(n,s,a)),a}function Aw(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function nR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function R2(n,e){nR(n,e),(n=n.alternate)&&nR(n,e)}function vU(){return null}var qO=typeof reportError=="function"?reportError:function(n){console.error(n)};function M2(n){this._internalRoot=n}ZS.prototype.render=M2.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(te(409));JS(n,e,null,null)};ZS.prototype.unmount=M2.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;xd(function(){JS(null,n,null,null)}),e[So]=null}};function ZS(n){this._internalRoot=n}ZS.prototype.unstable_scheduleHydration=function(n){if(n){var e=SD();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Vo.length&&e!==0&&e<Vo[t].priority;t++);Vo.splice(t,0,n),t===0&&AD(n)}};function I2(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ek(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function rR(){}function xU(n,e,t,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Aw(a);i.call(c)}}var a=HO(e,r,n,0,null,!1,!1,"",rR);return n._reactRootContainer=a,n[So]=a.current,Mg(n.nodeType===8?n.parentNode:n),xd(),a}for(;s=n.lastChild;)n.removeChild(s);if(typeof r=="function"){var o=r;r=function(){var c=Aw(l);o.call(c)}}var l=j2(n,0,!1,null,null,!1,!1,"",rR);return n._reactRootContainer=l,n[So]=l.current,Mg(n.nodeType===8?n.parentNode:n),xd(function(){JS(e,l,t,r)}),l}function tk(n,e,t,r,s){var i=t._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var o=s;s=function(){var l=Aw(a);o.call(l)}}JS(e,a,n,s)}else a=xU(t,e,n,s,r);return Aw(a)}bD=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Mm(e.pendingLanes);t!==0&&(ZT(e,t|1),Dr(e,Zt()),!(Ze&6)&&(Mp=Zt()+500,uc()))}break;case 13:xd(function(){var r=ko(n,1);if(r!==null){var s=hr();Si(r,n,1,s)}}),R2(n,1)}};e2=function(n){if(n.tag===13){var e=ko(n,134217728);if(e!==null){var t=hr();Si(e,n,134217728,t)}R2(n,134217728)}};wD=function(n){if(n.tag===13){var e=Jl(n),t=ko(n,e);if(t!==null){var r=hr();Si(t,n,e,r)}R2(n,e)}};SD=function(){return at};kD=function(n,e){var t=at;try{return at=n,e()}finally{at=t}};GE=function(n,e,t){switch(e){case"input":if(BE(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var s=qS(r);if(!s)throw Error(te(90));eD(r),BE(r,s)}}}break;case"textarea":nD(n,t);break;case"select":e=t.value,e!=null&&gh(n,!!t.multiple,e,!1)}};cD=_2;uD=xd;var bU={usingClientEntryPoint:!1,Events:[Lv,Zd,qS,oD,lD,_2]},mm={findFiberByHostInstance:Ic,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wU={bundleType:mm.bundleType,version:mm.version,rendererPackageName:mm.rendererPackageName,rendererConfig:mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Po.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fD(n),n===null?null:n.stateNode},findFiberByHostInstance:mm.findFiberByHostInstance||vU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ex=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ex.isDisabled&&Ex.supportsFiber)try{$S=Ex.inject(wU),ua=Ex}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bU;ys.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I2(e))throw Error(te(200));return yU(n,e,null,t)};ys.createRoot=function(n,e){if(!I2(n))throw Error(te(299));var t=!1,r="",s=qO;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=j2(n,1,!1,null,null,t,!1,r,s),n[So]=e.current,Mg(n.nodeType===8?n.parentNode:n),new M2(e)};ys.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(te(188)):(n=Object.keys(n).join(","),Error(te(268,n)));return n=fD(e),n=n===null?null:n.stateNode,n};ys.flushSync=function(n){return xd(n)};ys.hydrate=function(n,e,t){if(!ek(e))throw Error(te(200));return tk(null,n,e,!0,t)};ys.hydrateRoot=function(n,e,t){if(!I2(n))throw Error(te(405));var r=t!=null&&t.hydratedSources||null,s=!1,i="",a=qO;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=HO(e,null,n,1,t??null,s,!1,i,a),n[So]=e.current,Mg(n),r)for(n=0;n<r.length;n++)t=r[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new ZS(e)};ys.render=function(n,e,t){if(!ek(e))throw Error(te(200));return tk(null,n,e,!1,t)};ys.unmountComponentAtNode=function(n){if(!ek(n))throw Error(te(40));return n._reactRootContainer?(xd(function(){tk(null,null,n,!1,function(){n._reactRootContainer=null,n[So]=null})}),!0):!1};ys.unstable_batchedUpdates=_2;ys.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!ek(t))throw Error(te(200));if(n==null||n._reactInternals===void 0)throw Error(te(38));return tk(n,e,t,!1,r)};ys.version="18.3.1-next-f1338f8080-20240426";function GO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GO)}catch(n){console.error(n)}}GO(),GL.exports=ys;var Up=GL.exports;const SU=No(Up);var sR=Up;RE.createRoot=sR.createRoot,RE.hydrateRoot=sR.hydrateRoot;function dr(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n==null||n(s),t===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function iR(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function WO(...n){return e=>{let t=!1;const r=n.map(s=>{const i=iR(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():iR(n[s],null)}}}}function Eo(...n){return S.useCallback(WO(...n),n)}function nk(n,e=[]){let t=[];function r(i,a){const o=S.createContext(a),l=t.length;t=[...t,a];const c=f=>{var v;const{scope:p,children:m,...y}=f,g=((v=p==null?void 0:p[n])==null?void 0:v[l])||o,w=S.useMemo(()=>y,Object.values(y));return h.jsx(g.Provider,{value:w,children:m})};c.displayName=i+"Provider";function d(f,p){var g;const m=((g=p==null?void 0:p[n])==null?void 0:g[l])||o,y=S.useContext(m);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=t.map(a=>S.createContext(a));return function(o){const l=(o==null?void 0:o[n])||i;return S.useMemo(()=>({[`__scope${n}`]:{...o,[n]:l}}),[o,l])}};return s.scopeName=n,[r,kU(s,...e)]}function kU(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const a=r.reduce((o,{useScope:l,scopeName:c})=>{const f=l(i)[`__scope${c}`];return{...o,...f}},{});return S.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}function Ew(n){const e=EU(n),t=S.forwardRef((r,s)=>{const{children:i,...a}=r,o=S.Children.toArray(i),l=o.find(_U);if(l){const c=l.props.children,d=o.map(f=>f===l?S.Children.count(c)>1?S.Children.only(null):S.isValidElement(c)?c.props.children:null:f);return h.jsx(e,{...a,ref:s,children:S.isValidElement(c)?S.cloneElement(c,void 0,d):null})}return h.jsx(e,{...a,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var AU=Ew("Slot");function EU(n){const e=S.forwardRef((t,r)=>{const{children:s,...i}=t;if(S.isValidElement(s)){const a=NU(s),o=TU(i,s.props);return s.type!==S.Fragment&&(o.ref=r?WO(r,a):a),S.cloneElement(s,o)}return S.Children.count(s)>1?S.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var CU=Symbol("radix.slottable");function _U(n){return S.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===CU}function TU(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...o)=>{const l=i(...o);return s(...o),l}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function NU(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function XO(n){const e=n+"CollectionProvider",[t,r]=nk(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=g=>{const{scope:w,children:v}=g,x=Le.useRef(null),b=Le.useRef(new Map).current;return h.jsx(s,{scope:w,itemMap:b,collectionRef:x,children:v})};a.displayName=e;const o=n+"CollectionSlot",l=Ew(o),c=Le.forwardRef((g,w)=>{const{scope:v,children:x}=g,b=i(o,v),C=Eo(w,b.collectionRef);return h.jsx(l,{ref:C,children:x})});c.displayName=o;const d=n+"CollectionItemSlot",f="data-radix-collection-item",p=Ew(d),m=Le.forwardRef((g,w)=>{const{scope:v,children:x,...b}=g,C=Le.useRef(null),_=Eo(w,C),E=i(d,v);return Le.useEffect(()=>(E.itemMap.set(C,{ref:C,...b}),()=>void E.itemMap.delete(C))),h.jsx(p,{[f]:"",ref:_,children:x})});m.displayName=d;function y(g){const w=i(n+"CollectionConsumer",g);return Le.useCallback(()=>{const x=w.collectionRef.current;if(!x)return[];const b=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(w.itemMap.values()).sort((E,N)=>b.indexOf(E.ref.current)-b.indexOf(N.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:a,Slot:c,ItemSlot:m},y,r]}var PU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],mr=PU.reduce((n,e)=>{const t=Ew(`Primitive.${e}`),r=S.forwardRef((s,i)=>{const{asChild:a,...o}=s,l=a?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function KO(n,e){n&&Up.flushSync(()=>n.dispatchEvent(e))}function bd(n){const e=S.useRef(n);return S.useEffect(()=>{e.current=n}),S.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function jU(n,e=globalThis==null?void 0:globalThis.document){const t=bd(n);S.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var RU="DismissableLayer",EC="dismissableLayer.update",MU="dismissableLayer.pointerDownOutside",IU="dismissableLayer.focusOutside",aR,YO=S.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),QO=S.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:a,onDismiss:o,...l}=n,c=S.useContext(YO),[d,f]=S.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=S.useState({}),y=Eo(e,N=>f(N)),g=Array.from(c.layers),[w]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),x=d?g.indexOf(d):-1,b=c.layersWithOutsidePointerEventsDisabled.size>0,C=x>=v,_=DU(N=>{const j=N.target,M=[...c.branches].some(O=>O.contains(j));!C||M||(s==null||s(N),a==null||a(N),N.defaultPrevented||o==null||o())},p),E=OU(N=>{const j=N.target;[...c.branches].some(O=>O.contains(j))||(i==null||i(N),a==null||a(N),N.defaultPrevented||o==null||o())},p);return jU(N=>{x===c.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&o&&(N.preventDefault(),o()))},p),S.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(aR=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),oR(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=aR)}},[d,p,t,c]),S.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),oR())},[d,c]),S.useEffect(()=>{const N=()=>m({});return document.addEventListener(EC,N),()=>document.removeEventListener(EC,N)},[]),h.jsx(mr.div,{...l,ref:y,style:{pointerEvents:b?C?"auto":"none":void 0,...n.style},onFocusCapture:dr(n.onFocusCapture,E.onFocusCapture),onBlurCapture:dr(n.onBlurCapture,E.onBlurCapture),onPointerDownCapture:dr(n.onPointerDownCapture,_.onPointerDownCapture)})});QO.displayName=RU;var LU="DismissableLayerBranch",JO=S.forwardRef((n,e)=>{const t=S.useContext(YO),r=S.useRef(null),s=Eo(e,r);return S.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),h.jsx(mr.div,{...n,ref:s})});JO.displayName=LU;function DU(n,e=globalThis==null?void 0:globalThis.document){const t=bd(n),r=S.useRef(!1),s=S.useRef(()=>{});return S.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){ZO(MU,t,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=l,e.addEventListener("click",s.current,{once:!0})):l()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function OU(n,e=globalThis==null?void 0:globalThis.document){const t=bd(n),r=S.useRef(!1);return S.useEffect(()=>{const s=i=>{i.target&&!r.current&&ZO(IU,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function oR(){const n=new CustomEvent(EC);document.dispatchEvent(n)}function ZO(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?KO(s,i):s.dispatchEvent(i)}var FU=QO,BU=JO,wd=globalThis!=null&&globalThis.document?S.useLayoutEffect:()=>{},zU="Portal",e3=S.forwardRef((n,e)=>{var o;const{container:t,...r}=n,[s,i]=S.useState(!1);wd(()=>i(!0),[]);const a=t||s&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return a?SU.createPortal(h.jsx(mr.div,{...r,ref:e}),a):null});e3.displayName=zU;function $U(n,e){return S.useReducer((t,r)=>e[t][r]??t,n)}var L2=n=>{const{present:e,children:t}=n,r=VU(e),s=typeof t=="function"?t({present:r.isPresent}):S.Children.only(t),i=Eo(r.ref,UU(s));return typeof t=="function"||r.isPresent?S.cloneElement(s,{ref:i}):null};L2.displayName="Presence";function VU(n){const[e,t]=S.useState(),r=S.useRef(null),s=S.useRef(n),i=S.useRef("none"),a=n?"mounted":"unmounted",[o,l]=$U(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return S.useEffect(()=>{const c=Cx(r.current);i.current=o==="mounted"?c:"none"},[o]),wd(()=>{const c=r.current,d=s.current;if(d!==n){const p=i.current,m=Cx(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,l]),wd(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,f=m=>{const g=Cx(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(l("ANIMATION_END"),!s.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},p=m=>{m.target===e&&(i.current=Cx(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:S.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function Cx(n){return(n==null?void 0:n.animationName)||"none"}function UU(n){var r,s;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(s=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var HU=HL[" useInsertionEffect ".trim().toString()]||wd;function rk({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,a]=qU({defaultProp:e,onChange:t}),o=n!==void 0,l=o?n:s;{const d=S.useRef(n!==void 0);S.useEffect(()=>{const f=d.current;f!==o&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const c=S.useCallback(d=>{var f;if(o){const p=GU(d)?d(n):d;p!==n&&((f=a.current)==null||f.call(a,p))}else i(d)},[o,n,i,a]);return[l,c]}function qU({defaultProp:n,onChange:e}){const[t,r]=S.useState(n),s=S.useRef(t),i=S.useRef(e);return HU(()=>{i.current=e},[e]),S.useEffect(()=>{var a;s.current!==t&&((a=i.current)==null||a.call(i,t),s.current=t)},[t,s]),[t,r,i]}function GU(n){return typeof n=="function"}var WU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XU="VisuallyHidden",D2=S.forwardRef((n,e)=>h.jsx(mr.span,{...n,ref:e,style:{...WU,...n.style}}));D2.displayName=XU;var O2="ToastProvider",[F2,KU,YU]=XO("Toast"),[t3,Hre]=nk("Toast",[YU]),[QU,sk]=t3(O2),n3=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=n,[o,l]=S.useState(null),[c,d]=S.useState(0),f=S.useRef(!1),p=S.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${O2}\`. Expected non-empty \`string\`.`),h.jsx(F2.Provider,{scope:e,children:h.jsx(QU,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:l,onToastAdd:S.useCallback(()=>d(m=>m+1),[]),onToastRemove:S.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:a})})};n3.displayName=O2;var r3="ToastViewport",JU=["F8"],CC="toast.viewportPause",_C="toast.viewportResume",s3=S.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=JU,label:s="Notifications ({hotkey})",...i}=n,a=sk(r3,t),o=KU(t),l=S.useRef(null),c=S.useRef(null),d=S.useRef(null),f=S.useRef(null),p=Eo(e,f,a.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;S.useEffect(()=>{const w=v=>{var b;r.length!==0&&r.every(C=>v[C]||v.code===C)&&((b=f.current)==null||b.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[r]),S.useEffect(()=>{const w=l.current,v=f.current;if(y&&w&&v){const x=()=>{if(!a.isClosePausedRef.current){const E=new CustomEvent(CC);v.dispatchEvent(E),a.isClosePausedRef.current=!0}},b=()=>{if(a.isClosePausedRef.current){const E=new CustomEvent(_C);v.dispatchEvent(E),a.isClosePausedRef.current=!1}},C=E=>{!w.contains(E.relatedTarget)&&b()},_=()=>{w.contains(document.activeElement)||b()};return w.addEventListener("focusin",x),w.addEventListener("focusout",C),w.addEventListener("pointermove",x),w.addEventListener("pointerleave",_),window.addEventListener("blur",x),window.addEventListener("focus",b),()=>{w.removeEventListener("focusin",x),w.removeEventListener("focusout",C),w.removeEventListener("pointermove",x),w.removeEventListener("pointerleave",_),window.removeEventListener("blur",x),window.removeEventListener("focus",b)}}},[y,a.isClosePausedRef]);const g=S.useCallback(({tabbingDirection:w})=>{const x=o().map(b=>{const C=b.ref.current,_=[C,...d8(C)];return w==="forwards"?_:_.reverse()});return(w==="forwards"?x.reverse():x).flat()},[o]);return S.useEffect(()=>{const w=f.current;if(w){const v=x=>{var _,E,N;const b=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!b){const j=document.activeElement,M=x.shiftKey;if(x.target===w&&M){(_=c.current)==null||_.focus();return}const F=g({tabbingDirection:M?"backwards":"forwards"}),U=F.findIndex(B=>B===j);MA(F.slice(U+1))?x.preventDefault():M?(E=c.current)==null||E.focus():(N=d.current)==null||N.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[o,g]),h.jsxs(BU,{ref:l,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&h.jsx(TC,{ref:c,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});MA(w)}}),h.jsx(F2.Slot,{scope:t,children:h.jsx(mr.ol,{tabIndex:-1,...i,ref:p})}),y&&h.jsx(TC,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});MA(w)}})]})});s3.displayName=r3;var i3="ToastFocusProxy",TC=S.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=sk(i3,t);return h.jsx(D2,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var c;const o=a.relatedTarget;!((c=i.viewport)!=null&&c.contains(o))&&r()}})});TC.displayName=i3;var Ov="Toast",ZU="toast.swipeStart",e8="toast.swipeMove",t8="toast.swipeCancel",n8="toast.swipeEnd",a3=S.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...a}=n,[o,l]=rk({prop:r,defaultProp:s??!0,onChange:i,caller:Ov});return h.jsx(L2,{present:t||o,children:h.jsx(i8,{open:o,...a,ref:e,onClose:()=>l(!1),onPause:bd(n.onPause),onResume:bd(n.onResume),onSwipeStart:dr(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:dr(n.onSwipeMove,c=>{const{x:d,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:dr(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:dr(n.onSwipeEnd,c=>{const{x:d,y:f}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});a3.displayName=Ov;var[r8,s8]=t3(Ov,{onClose(){}}),i8=S.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:o,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:m,...y}=n,g=sk(Ov,t),[w,v]=S.useState(null),x=Eo(e,B=>v(B)),b=S.useRef(null),C=S.useRef(null),_=s||g.duration,E=S.useRef(0),N=S.useRef(_),j=S.useRef(0),{onToastAdd:M,onToastRemove:O}=g,L=bd(()=>{var I;(w==null?void 0:w.contains(document.activeElement))&&((I=g.viewport)==null||I.focus()),a()}),F=S.useCallback(B=>{!B||B===1/0||(window.clearTimeout(j.current),E.current=new Date().getTime(),j.current=window.setTimeout(L,B))},[L]);S.useEffect(()=>{const B=g.viewport;if(B){const I=()=>{F(N.current),c==null||c()},D=()=>{const z=new Date().getTime()-E.current;N.current=N.current-z,window.clearTimeout(j.current),l==null||l()};return B.addEventListener(CC,D),B.addEventListener(_C,I),()=>{B.removeEventListener(CC,D),B.removeEventListener(_C,I)}}},[g.viewport,_,l,c,F]),S.useEffect(()=>{i&&!g.isClosePausedRef.current&&F(_)},[i,_,g.isClosePausedRef,F]),S.useEffect(()=>(M(),()=>O()),[M,O]);const U=S.useMemo(()=>w?f3(w):null,[w]);return g.viewport?h.jsxs(h.Fragment,{children:[U&&h.jsx(a8,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:U}),h.jsx(r8,{scope:t,onClose:L,children:Up.createPortal(h.jsx(F2.ItemSlot,{scope:t,children:h.jsx(FU,{asChild:!0,onEscapeKeyDown:dr(o,()=>{g.isFocusedToastEscapeKeyDownRef.current||L(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(mr.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:dr(n.onKeyDown,B=>{B.key==="Escape"&&(o==null||o(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,L()))}),onPointerDown:dr(n.onPointerDown,B=>{B.button===0&&(b.current={x:B.clientX,y:B.clientY})}),onPointerMove:dr(n.onPointerMove,B=>{if(!b.current)return;const I=B.clientX-b.current.x,D=B.clientY-b.current.y,z=!!C.current,V=["left","right"].includes(g.swipeDirection),q=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,P=V?q(0,I):0,Y=V?0:q(0,D),K=B.pointerType==="touch"?10:2,R={x:P,y:Y},ie={originalEvent:B,delta:R};z?(C.current=R,_x(e8,f,ie,{discrete:!1})):lR(R,g.swipeDirection,K)?(C.current=R,_x(ZU,d,ie,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(I)>K||Math.abs(D)>K)&&(b.current=null)}),onPointerUp:dr(n.onPointerUp,B=>{const I=C.current,D=B.target;if(D.hasPointerCapture(B.pointerId)&&D.releasePointerCapture(B.pointerId),C.current=null,b.current=null,I){const z=B.currentTarget,V={originalEvent:B,delta:I};lR(I,g.swipeDirection,g.swipeThreshold)?_x(n8,m,V,{discrete:!0}):_x(t8,p,V,{discrete:!0}),z.addEventListener("click",q=>q.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),a8=n=>{const{__scopeToast:e,children:t,...r}=n,s=sk(Ov,e),[i,a]=S.useState(!1),[o,l]=S.useState(!1);return c8(()=>a(!0)),S.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:h.jsx(e3,{asChild:!0,children:h.jsx(D2,{...r,children:i&&h.jsxs(h.Fragment,{children:[s.label," ",t]})})})},o8="ToastTitle",o3=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return h.jsx(mr.div,{...r,ref:e})});o3.displayName=o8;var l8="ToastDescription",l3=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return h.jsx(mr.div,{...r,ref:e})});l3.displayName=l8;var c3="ToastAction",u3=S.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?h.jsx(h3,{altText:t,asChild:!0,children:h.jsx(B2,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${c3}\`. Expected non-empty \`string\`.`),null)});u3.displayName=c3;var d3="ToastClose",B2=S.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=s8(d3,t);return h.jsx(h3,{asChild:!0,children:h.jsx(mr.button,{type:"button",...r,ref:e,onClick:dr(n.onClick,s.onClose)})})});B2.displayName=d3;var h3=S.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return h.jsx(mr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function f3(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),u8(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...f3(r))}}),e}function _x(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?KO(s,i):s.dispatchEvent(i)}var lR=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function c8(n=()=>{}){const e=bd(n);wd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function u8(n){return n.nodeType===n.ELEMENT_NODE}function d8(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function MA(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var h8=n3,p3=s3,m3=a3,g3=o3,y3=l3,v3=u3,x3=B2;function b3(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=b3(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Hp(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=b3(n))&&(r&&(r+=" "),r+=e);return r}const cR=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,uR=Hp,w3=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return uR(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(c=>{const d=t==null?void 0:t[c],f=i==null?void 0:i[c];if(d===null)return null;const p=cR(d)||cR(f);return s[c][p]}),o=t&&Object.entries(t).reduce((c,d)=>{let[f,p]=d;return p===void 0||(c[f]=p),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:f,className:p,...m}=d;return Object.entries(m).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...i,...o}[g]):{...i,...o}[g]===w})?[...c,f,p]:c},[]);return uR(n,a,l,t==null?void 0:t.class,t==null?void 0:t.className)};var f8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const p8=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_e=(n,e)=>{const t=S.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:o,...l},c)=>S.createElement("svg",{ref:c,...f8,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${p8(n)}`,...l},[...e.map(([d,f])=>S.createElement(d,f)),...(Array.isArray(o)?o:[o])||[]]));return t.displayName=`${n}`,t},m8=_e("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),dR=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),z2=_e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ik=_e("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),$2=_e("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),S3=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),g8=_e("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),y8=_e("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),k3=_e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),A3=_e("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),ws=_e("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),v8=_e("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),x8=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),E3=_e("Drama",[["path",{d:"M 10 11h.01",key:"1lksi6"}],["path",{d:"M 14 6h.01",key:"1kxpxo"}],["path",{d:"M 18 6h.01",key:"1goweo"}],["path",{d:"M 6.5 13.1h.01",key:"1i19cj"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]]),C3=_e("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),ak=_e("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),_3=_e("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),b8=_e("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),T3=_e("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),V2=_e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),N3=_e("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),w8=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),U2=_e("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]),S8=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),k8=_e("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),P3=_e("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),j3=_e("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),H2=_e("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),A8=_e("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),E8=_e("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),C8=_e("RadioTower",[["path",{d:"M4.9 16.1C1 12.2 1 5.8 4.9 1.9",key:"s0qx1y"}],["path",{d:"M7.8 4.7a6.14 6.14 0 0 0-.8 7.5",key:"1idnkw"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}],["path",{d:"M16.2 4.8c2 2 2.26 5.11.8 7.47",key:"ojru2q"}],["path",{d:"M19.1 1.9a9.96 9.96 0 0 1 0 14.1",key:"rhi7fg"}],["path",{d:"M9.5 18h5",key:"mfy3pd"}],["path",{d:"m8 22 4-11 4 11",key:"25yftu"}]]),_8=_e("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),R3=_e("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),T8=_e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),M3=_e("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),N8=_e("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),P8=_e("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),q2=_e("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Vg=_e("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),j8=_e("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]),I3=_e("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),L3=_e("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),R8=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),M8=_e("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),ok=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function I8(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=D3(e))&&(r&&(r+=" "),r+=t);return r}function D3(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=D3(n[r]))&&(t&&(t+=" "),t+=e);return t}var G2="-";function L8(n){var e=O8(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(o){var l=o.split(G2);return l[0]===""&&l.length!==1&&l.shift(),O3(l,e)||D8(o)}function a(o,l){var c=t[o]||[];return l&&s[o]?[].concat(c,s[o]):c}return{getClassGroupId:i,getConflictingClassGroupIds:a}}function O3(n,e){var a;if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),s=r?O3(n.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=n.join(G2);return(a=e.validators.find(function(o){var l=o.validator;return l(i)}))==null?void 0:a.classGroupId}}var hR=/^\[(.+)\]$/;function D8(n){if(hR.test(n)){var e=hR.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function O8(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},s=B8(Object.entries(n.classGroups),t);return s.forEach(function(i){var a=i[0],o=i[1];NC(o,r,a,e)}),r}function NC(n,e,t,r){n.forEach(function(s){if(typeof s=="string"){var i=s===""?e:fR(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(F8(s)){NC(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(function(a){var o=a[0],l=a[1];NC(l,fR(e,o),t,r)})})}function fR(n,e){var t=n;return e.split(G2).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function F8(n){return n.isThemeGetter}function B8(n,e){return e?n.map(function(t){var r=t[0],s=t[1],i=s.map(function(a){return typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(function(o){var l=o[0],c=o[1];return[e+l,c]})):a});return[r,i]}):n}function z8(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function s(i,a){t.set(i,a),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(a){var o=t.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set:function(a,o){t.has(a)?t.set(a,o):s(a,o)}}}var F3="!";function $8(n){var e=n.separator||":",t=e.length===1,r=e[0],s=e.length;return function(a){for(var o=[],l=0,c=0,d,f=0;f<a.length;f++){var p=a[f];if(l===0){if(p===r&&(t||a.slice(f,f+s)===e)){o.push(a.slice(c,f)),c=f+s;continue}if(p==="/"){d=f;continue}}p==="["?l++:p==="]"&&l--}var m=o.length===0?a:a.substring(c),y=m.startsWith(F3),g=y?m.substring(1):m,w=d&&d>c?d-c:void 0;return{modifiers:o,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:w}}}function V8(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function U8(n){return{cache:z8(n.cacheSize),splitModifiers:$8(n),...L8(n)}}var H8=/\s+/;function q8(n,e){var t=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(H8).map(function(a){var o=t(a),l=o.modifiers,c=o.hasImportantModifier,d=o.baseClassName,f=o.maybePostfixModifierPosition,p=r(f?d.substring(0,f):d),m=!!f;if(!p){if(!f)return{isTailwindClass:!1,originalClassName:a};if(p=r(d),!p)return{isTailwindClass:!1,originalClassName:a};m=!1}var y=V8(l).join(":"),g=c?y+F3:y;return{isTailwindClass:!0,modifierId:g,classGroupId:p,originalClassName:a,hasPostfixModifier:m}}).reverse().filter(function(a){if(!a.isTailwindClass)return!0;var o=a.modifierId,l=a.classGroupId,c=a.hasPostfixModifier,d=o+l;return i.has(d)?!1:(i.add(d),s(l,c).forEach(function(f){return i.add(o+f)}),!0)}).reverse().map(function(a){return a.originalClassName}).join(" ")}function G8(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,s,i,a=o;function o(c){var d=e[0],f=e.slice(1),p=f.reduce(function(m,y){return y(m)},d());return r=U8(p),s=r.cache.get,i=r.cache.set,a=l,l(c)}function l(c){var d=s(c);if(d)return d;var f=q8(c,r);return i(c,f),f}return function(){return a(I8.apply(null,arguments))}}function Ct(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var B3=/^\[(?:([a-z-]+):)?(.+)\]$/i,W8=/^\d+\/\d+$/,X8=new Set(["px","full","screen"]),K8=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Y8=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Q8=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function ei(n){return Oc(n)||X8.has(n)||W8.test(n)||PC(n)}function PC(n){return Cd(n,"length",rH)}function J8(n){return Cd(n,"size",z3)}function Z8(n){return Cd(n,"position",z3)}function eH(n){return Cd(n,"url",sH)}function Tx(n){return Cd(n,"number",Oc)}function Oc(n){return!Number.isNaN(Number(n))}function tH(n){return n.endsWith("%")&&Oc(n.slice(0,-1))}function gm(n){return pR(n)||Cd(n,"number",pR)}function Ge(n){return B3.test(n)}function ym(){return!0}function Io(n){return K8.test(n)}function nH(n){return Cd(n,"",iH)}function Cd(n,e,t){var r=B3.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function rH(n){return Y8.test(n)}function z3(){return!1}function sH(n){return n.startsWith("url(")}function pR(n){return Number.isInteger(Number(n))}function iH(n){return Q8.test(n)}function aH(){var n=Ct("colors"),e=Ct("spacing"),t=Ct("blur"),r=Ct("brightness"),s=Ct("borderColor"),i=Ct("borderRadius"),a=Ct("borderSpacing"),o=Ct("borderWidth"),l=Ct("contrast"),c=Ct("grayscale"),d=Ct("hueRotate"),f=Ct("invert"),p=Ct("gap"),m=Ct("gradientColorStops"),y=Ct("gradientColorStopPositions"),g=Ct("inset"),w=Ct("margin"),v=Ct("opacity"),x=Ct("padding"),b=Ct("saturate"),C=Ct("scale"),_=Ct("sepia"),E=Ct("skew"),N=Ct("space"),j=Ct("translate"),M=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},L=function(){return["auto",Ge,e]},F=function(){return[Ge,e]},U=function(){return["",ei]},B=function(){return["auto",Oc,Ge]},I=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},D=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},V=function(){return["start","end","center","between","around","evenly","stretch"]},q=function(){return["","0",Ge]},P=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},Y=function(){return[Oc,Tx]},K=function(){return[Oc,Ge]};return{cacheSize:500,theme:{colors:[ym],spacing:[ei],blur:["none","",Io,Ge],brightness:Y(),borderColor:[n],borderRadius:["none","","full",Io,Ge],borderSpacing:F(),borderWidth:U(),contrast:Y(),grayscale:q(),hueRotate:K(),invert:q(),gap:F(),gradientColorStops:[n],gradientColorStopPositions:[tH,PC],inset:L(),margin:L(),opacity:Y(),padding:F(),saturate:Y(),scale:Y(),sepia:q(),skew:K(),space:F(),translate:F()},classGroups:{aspect:[{aspect:["auto","square","video",Ge]}],container:["container"],columns:[{columns:[Io]}],"break-after":[{"break-after":P()}],"break-before":[{"break-before":P()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(I(),[Ge])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",gm]}],basis:[{basis:L()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Ge]}],grow:[{grow:q()}],shrink:[{shrink:q()}],order:[{order:["first","last","none",gm]}],"grid-cols":[{"grid-cols":[ym]}],"col-start-end":[{col:["auto",{span:["full",gm]},Ge]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[ym]}],"row-start-end":[{row:["auto",{span:[gm]},Ge]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Ge]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Ge]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal"].concat(V())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(V(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(V(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Ge,e]}],"min-w":[{"min-w":["min","max","fit",Ge,ei]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Io]},Io,Ge]}],h:[{h:[Ge,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Ge,ei]}],"max-h":[{"max-h":[Ge,e,"min","max","fit"]}],"font-size":[{text:["base",Io,PC]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tx]}],"font-family":[{font:[ym]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Ge]}],"line-clamp":[{"line-clamp":["none",Oc,Tx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ge,ei]}],"list-image":[{"list-image":["none",Ge]}],"list-style-type":[{list:["none","disc","decimal",Ge]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(D(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",ei]}],"underline-offset":[{"underline-offset":["auto",Ge,ei]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:F()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ge]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ge]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(I(),[Z8])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",J8]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eH]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(D(),["hidden"])}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:D()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(D())}],"outline-offset":[{"outline-offset":[Ge,ei]}],"outline-w":[{outline:[ei]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[ei]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Io,nH]}],"shadow-color":[{shadow:[ym]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Io,Ge]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Ge]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",Ge]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",Ge]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[gm,Ge]}],"translate-x":[{"translate-x":[j]}],"translate-y":[{"translate-y":[j]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Ge]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ge]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":F()}],"scroll-mx":[{"scroll-mx":F()}],"scroll-my":[{"scroll-my":F()}],"scroll-ms":[{"scroll-ms":F()}],"scroll-me":[{"scroll-me":F()}],"scroll-mt":[{"scroll-mt":F()}],"scroll-mr":[{"scroll-mr":F()}],"scroll-mb":[{"scroll-mb":F()}],"scroll-ml":[{"scroll-ml":F()}],"scroll-p":[{"scroll-p":F()}],"scroll-px":[{"scroll-px":F()}],"scroll-py":[{"scroll-py":F()}],"scroll-ps":[{"scroll-ps":F()}],"scroll-pe":[{"scroll-pe":F()}],"scroll-pt":[{"scroll-pt":F()}],"scroll-pr":[{"scroll-pr":F()}],"scroll-pb":[{"scroll-pb":F()}],"scroll-pl":[{"scroll-pl":F()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ge]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[ei,Tx]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var oH=G8(aH);function Ei(...n){return oH(Hp(n))}const lH=h8,$3=Le.forwardRef(({className:n,...e},t)=>h.jsx(p3,{ref:t,className:Ei("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));$3.displayName=p3.displayName;const cH=w3("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),V3=Le.forwardRef(({className:n,variant:e,...t},r)=>h.jsx(m3,{ref:r,className:Ei(cH({variant:e}),n),...t}));V3.displayName=m3.displayName;const uH=Le.forwardRef(({className:n,...e},t)=>h.jsx(v3,{ref:t,className:Ei("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));uH.displayName=v3.displayName;const U3=Le.forwardRef(({className:n,...e},t)=>h.jsx(x3,{ref:t,className:Ei("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:h.jsx(ok,{className:"h-4 w-4"})}));U3.displayName=x3.displayName;const H3=Le.forwardRef(({className:n,...e},t)=>h.jsx(g3,{ref:t,className:Ei("text-sm font-semibold",n),...e}));H3.displayName=g3.displayName;const q3=Le.forwardRef(({className:n,...e},t)=>h.jsx(y3,{ref:t,className:Ei("text-sm opacity-90",n),...e}));q3.displayName=y3.displayName;const dH=1,hH=6e3,go={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let IA=0;function fH(){return IA=(IA+1)%Number.MAX_SAFE_INTEGER,IA.toString()}const LA=new Map,mR=n=>{if(LA.has(n))return;const e=setTimeout(()=>{LA.delete(n),fg({type:go.REMOVE_TOAST,toastId:n})},hH);LA.set(n,e)},pH=(n,e)=>{switch(e.type){case go.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,dH)};case go.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case go.DISMISS_TOAST:{const{toastId:t}=e;return t?mR(t):n.toasts.forEach(r=>{mR(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case go.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},pb=[];let mb={toasts:[]};function fg(n){mb=pH(mb,n),pb.forEach(e=>{e(mb)})}function Fe({...n}){const e=fH(),t=s=>fg({type:go.UPDATE_TOAST,toast:{...s,id:e}}),r=()=>fg({type:go.DISMISS_TOAST,toastId:e});return fg({type:go.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:t}}function W2(){const[n,e]=Le.useState(mb);return Le.useEffect(()=>(pb.push(e),()=>{const t=pb.indexOf(e);t>-1&&pb.splice(t,1)}),[n]),{...n,toast:Fe,dismiss:t=>fg({type:go.DISMISS_TOAST,toastId:t})}}function mH(){const{toasts:n}=W2();return h.jsxs(lH,{children:[n.map(({id:e,title:t,description:r,action:s,...i})=>h.jsxs(V3,{...i,children:[h.jsxs("div",{className:"grid gap-1",children:[t&&h.jsx(H3,{children:t}),r&&h.jsx(q3,{children:r})]}),s,h.jsx(U3,{})]},e)),h.jsx($3,{})]})}const G3=S.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),lk=S.createContext({}),ck=S.createContext(null),uk=typeof document<"u",X2=uk?S.useLayoutEffect:S.useEffect,W3=S.createContext({strict:!1}),K2=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),gH="framerAppearId",X3="data-"+K2(gH);function yH(n,e,t,r){const{visualElement:s}=S.useContext(lk),i=S.useContext(W3),a=S.useContext(ck),o=S.useContext(G3).reducedMotion,l=S.useRef();r=r||i.renderer,!l.current&&r&&(l.current=r(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:o}));const c=l.current;S.useInsertionEffect(()=>{c&&c.update(t,a)});const d=S.useRef(!!(t[X3]&&!window.HandoffComplete));return X2(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),S.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function ah(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function vH(n,e,t){return S.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):ah(t)&&(t.current=r))},[e])}function Ug(n){return typeof n=="string"||Array.isArray(n)}function dk(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Y2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Q2=["initial",...Y2];function hk(n){return dk(n.animate)||Q2.some(e=>Ug(n[e]))}function K3(n){return!!(hk(n)||n.variants)}function xH(n,e){if(hk(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ug(t)?t:void 0,animate:Ug(r)?r:void 0}}return n.inherit!==!1?e:{}}function bH(n){const{initial:e,animate:t}=xH(n,S.useContext(lk));return S.useMemo(()=>({initial:e,animate:t}),[gR(e),gR(t)])}function gR(n){return Array.isArray(n)?n.join(" "):n}const yR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Hg={};for(const n in yR)Hg[n]={isEnabled:e=>yR[n].some(t=>!!e[t])};function wH(n){for(const e in n)Hg[e]={...Hg[e],...n[e]}}const J2=S.createContext({}),Y3=S.createContext({}),SH=Symbol.for("motionComponentSymbol");function kH({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&wH(n);function i(o,l){let c;const d={...S.useContext(G3),...o,layoutId:AH(o)},{isStatic:f}=d,p=bH(o),m=r(o,f);if(!f&&uk){p.visualElement=yH(s,m,d,e);const y=S.useContext(Y3),g=S.useContext(W3).strict;p.visualElement&&(c=p.visualElement.loadFeatures(d,g,n,y))}return S.createElement(lk.Provider,{value:p},c&&p.visualElement?S.createElement(c,{visualElement:p.visualElement,...d}):null,t(s,o,vH(m,p.visualElement,l),m,f,p.visualElement))}const a=S.forwardRef(i);return a[SH]=s,a}function AH({layoutId:n}){const e=S.useContext(J2).id;return e&&n!==void 0?e+"-"+n:n}function EH(n){function e(r,s={}){return kH(n(r,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const CH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Z2(n){return typeof n!="string"||n.includes("-")?!1:!!(CH.indexOf(n)>-1||/[A-Z]/.test(n))}const Cw={};function _H(n){Object.assign(Cw,n)}const Fv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_d=new Set(Fv);function Q3(n,{layout:e,layoutId:t}){return _d.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Cw[n]||n==="opacity")}const Fr=n=>!!(n&&n.getVelocity),TH={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},NH=Fv.length;function PH(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,s){let i="";for(let a=0;a<NH;a++){const o=Fv[a];if(n[o]!==void 0){const l=TH[o]||o;i+=`${l}(${n[o]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(n,r?"":i):t&&r&&(i="none"),i}const J3=n=>e=>typeof e=="string"&&e.startsWith(n),Z3=J3("--"),jC=J3("var(--"),jH=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,RH=(n,e)=>e&&typeof n=="number"?e.transform(n):n,sc=(n,e,t)=>Math.min(Math.max(t,n),e),Td={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pg={...Td,transform:n=>sc(0,1,n)},Nx={...Td,default:1},mg=n=>Math.round(n*1e5)/1e5,fk=/(-)?([\d]*\.?[\d])+/g,eF=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,MH=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Bv(n){return typeof n=="string"}const zv=n=>({test:e=>Bv(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Oo=zv("deg"),ha=zv("%"),Se=zv("px"),IH=zv("vh"),LH=zv("vw"),vR={...ha,parse:n=>ha.parse(n)/100,transform:n=>ha.transform(n*100)},xR={...Td,transform:Math.round},tF={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,radius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,size:Se,top:Se,right:Se,bottom:Se,left:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,rotate:Oo,rotateX:Oo,rotateY:Oo,rotateZ:Oo,scale:Nx,scaleX:Nx,scaleY:Nx,scaleZ:Nx,skew:Oo,skewX:Oo,skewY:Oo,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:pg,originX:vR,originY:vR,originZ:Se,zIndex:xR,fillOpacity:pg,strokeOpacity:pg,numOctaves:xR};function eN(n,e,t,r){const{style:s,vars:i,transform:a,transformOrigin:o}=n;let l=!1,c=!1,d=!0;for(const f in e){const p=e[f];if(Z3(f)){i[f]=p;continue}const m=tF[f],y=RH(p,m);if(_d.has(f)){if(l=!0,a[f]=y,!d)continue;p!==(m.default||0)&&(d=!1)}else f.startsWith("origin")?(c=!0,o[f]=y):s[f]=y}if(e.transform||(l||r?s.transform=PH(n.transform,t,d,r):s.transform&&(s.transform="none")),c){const{originX:f="50%",originY:p="50%",originZ:m=0}=o;s.transformOrigin=`${f} ${p} ${m}`}}const tN=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function nF(n,e,t){for(const r in e)!Fr(e[r])&&!Q3(r,t)&&(n[r]=e[r])}function DH({transformTemplate:n},e,t){return S.useMemo(()=>{const r=tN();return eN(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function OH(n,e,t){const r=n.style||{},s={};return nF(s,r,n),Object.assign(s,DH(n,e,t)),n.transformValues?n.transformValues(s):s}function FH(n,e,t){const r={},s=OH(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=s,r}const BH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _w(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||BH.has(n)}let rF=n=>!_w(n);function zH(n){n&&(rF=e=>e.startsWith("on")?!_w(e):n(e))}try{zH(require("@emotion/is-prop-valid").default)}catch{}function $H(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(rF(s)||t===!0&&_w(s)||!e&&!_w(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function bR(n,e,t){return typeof n=="string"?n:Se.transform(e+t*n)}function VH(n,e,t){const r=bR(e,n.x,n.width),s=bR(t,n.y,n.height);return`${r} ${s}`}const UH={offset:"stroke-dashoffset",array:"stroke-dasharray"},HH={offset:"strokeDashoffset",array:"strokeDasharray"};function qH(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?UH:HH;n[i.offset]=Se.transform(-r);const a=Se.transform(e),o=Se.transform(t);n[i.array]=`${a} ${o}`}function nN(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},d,f,p){if(eN(n,c,d,p),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:g}=n;m.transform&&(g&&(y.transform=m.transform),delete m.transform),g&&(s!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=VH(g,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),a!==void 0&&qH(m,a,o,l,!1)}const sF=()=>({...tN(),attrs:{}}),rN=n=>typeof n=="string"&&n.toLowerCase()==="svg";function GH(n,e,t,r){const s=S.useMemo(()=>{const i=sF();return nN(i,e,{enableHardwareAcceleration:!1},rN(r),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};nF(i,n.style,n),s.style={...i,...s.style}}return s}function WH(n=!1){return(t,r,s,{latestValues:i},a)=>{const l=(Z2(t)?GH:FH)(r,i,a,t),d={...$H(r,typeof t=="string",n),...l,ref:s},{children:f}=r,p=S.useMemo(()=>Fr(f)?f.get():f,[f]);return S.createElement(t,{...d,children:p})}}function iF(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}const aF=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oF(n,e,t,r){iF(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(aF.has(s)?s:K2(s),e.attrs[s])}function sN(n,e){const{style:t}=n,r={};for(const s in t)(Fr(t[s])||e.style&&Fr(e.style[s])||Q3(s,n))&&(r[s]=t[s]);return r}function lF(n,e){const t=sN(n,e);for(const r in n)if(Fr(n[r])||Fr(e[r])){const s=Fv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[s]=n[r]}return t}function iN(n,e,t,r={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),e}function cF(n){const e=S.useRef(null);return e.current===null&&(e.current=n()),e.current}const Tw=n=>Array.isArray(n),XH=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),KH=n=>Tw(n)?n[n.length-1]||0:n;function gb(n){const e=Fr(n)?n.get():n;return XH(e)?e.toValue():e}function YH({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,s,i){const a={latestValues:QH(r,s,i,n),renderState:e()};return t&&(a.mount=o=>t(r,o,a)),a}const uF=n=>(e,t)=>{const r=S.useContext(lk),s=S.useContext(ck),i=()=>YH(n,e,r,s);return t?i():cF(i)};function QH(n,e,t,r){const s={},i=r(n,{});for(const p in i)s[p]=gb(i[p]);let{initial:a,animate:o}=n;const l=hk(n),c=K3(n);e&&c&&!l&&n.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let d=t?t.initial===!1:!1;d=d||a===!1;const f=d?o:a;return f&&typeof f!="boolean"&&!dk(f)&&(Array.isArray(f)?f:[f]).forEach(m=>{const y=iN(n,m);if(!y)return;const{transitionEnd:g,transition:w,...v}=y;for(const x in v){let b=v[x];if(Array.isArray(b)){const C=d?b.length-1:0;b=b[C]}b!==null&&(s[x]=b)}for(const x in g)s[x]=g[x]}),s}const Xt=n=>n;class wR{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function JH(n){let e=new wR,t=new wR,r=0,s=!1,i=!1;const a=new WeakSet,o={schedule:(l,c=!1,d=!1)=>{const f=d&&s,p=f?e:t;return c&&a.add(l),p.add(l)&&f&&s&&(r=e.order.length),l},cancel:l=>{t.remove(l),a.delete(l)},process:l=>{if(s){i=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),a.has(d)&&(o.schedule(d),n())}s=!1,i&&(i=!1,o.process(l))}};return o}const Px=["prepare","read","update","preRender","render","postRender"],ZH=40;function eq(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Px.reduce((f,p)=>(f[p]=JH(()=>t=!0),f),{}),a=f=>i[f].process(s),o=()=>{const f=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,ZH),1),s.timestamp=f,s.isProcessing=!0,Px.forEach(a),s.isProcessing=!1,t&&e&&(r=!1,n(o))},l=()=>{t=!0,r=!0,s.isProcessing||n(o)};return{schedule:Px.reduce((f,p)=>{const m=i[p];return f[p]=(y,g=!1,w=!1)=>(t||l(),m.schedule(y,g,w)),f},{}),cancel:f=>Px.forEach(p=>i[p].cancel(f)),state:s,steps:i}}const{schedule:Et,cancel:Co,state:Kn,steps:DA}=eq(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xt,!0),tq={useVisualState:uF({scrapeMotionValuesFromProps:lF,createRenderState:sF,onMount:(n,e,{renderState:t,latestValues:r})=>{Et.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Et.render(()=>{nN(t,r,{enableHardwareAcceleration:!1},rN(e.tagName),n.transformTemplate),oF(e,t)})}})},nq={useVisualState:uF({scrapeMotionValuesFromProps:sN,createRenderState:tN})};function rq(n,{forwardMotionProps:e=!1},t,r){return{...Z2(n)?tq:nq,preloadedFeatures:t,useRender:WH(e),createVisualElement:r,Component:n}}function yo(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const dF=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function pk(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const sq=n=>e=>dF(e)&&n(e,pk(e));function xo(n,e,t,r){return yo(n,e,sq(t),r)}const iq=(n,e)=>t=>e(n(t)),ec=(...n)=>n.reduce(iq);function hF(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const SR=hF("dragHorizontal"),kR=hF("dragVertical");function fF(n){let e=!1;if(n==="y")e=kR();else if(n==="x")e=SR();else{const t=SR(),r=kR();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function pF(){const n=fF(!0);return n?(n(),!1):!0}class dc{constructor(e){this.isMounted=!1,this.node=e}update(){}}function AR(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,a)=>{if(i.pointerType==="touch"||pF())return;const o=n.getProps();n.animationState&&o.whileHover&&n.animationState.setActive("whileHover",e),o[r]&&Et.update(()=>o[r](i,a))};return xo(n.current,t,s,{passive:!n.getProps()[r]})}class aq extends dc{mount(){this.unmount=ec(AR(this.node,!0),AR(this.node,!1))}unmount(){}}class oq extends dc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ec(yo(this.node.current,"focus",()=>this.onFocus()),yo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const mF=(n,e)=>e?n===e?!0:mF(n,e.parentElement):!1;function OA(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,pk(t))}class lq extends dc{constructor(){super(...arguments),this.removeStartListeners=Xt,this.removeEndListeners=Xt,this.removeAccessibleListeners=Xt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=xo(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Et.update(()=>{!f&&!mF(this.node.current,o.target)?d&&d(o,l):c&&c(o,l)})},{passive:!(r.onTap||r.onPointerUp)}),a=xo(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ec(i,a),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||OA("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&Et.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=yo(this.node.current,"keyup",a),OA("down",(o,l)=>{this.startPress(o,l)})},t=yo(this.node.current,"keydown",e),r=()=>{this.isPressing&&OA("cancel",(i,a)=>this.cancelPress(i,a))},s=yo(this.node.current,"blur",r);this.removeAccessibleListeners=ec(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Et.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!pF()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Et.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=xo(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=yo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ec(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const RC=new WeakMap,FA=new WeakMap,cq=n=>{const e=RC.get(n.target);e&&e(n)},uq=n=>{n.forEach(cq)};function dq({root:n,...e}){const t=n||document;FA.has(t)||FA.set(t,{});const r=FA.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(uq,{root:n,...e})),r[s]}function hq(n,e,t){const r=dq(e);return RC.set(n,t),r.observe(n),()=>{RC.delete(n),r.unobserve(n)}}const fq={some:0,all:1};class pq extends dc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,a={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:fq[s]},o=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return hq(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(mq(e,t))&&this.startObserver()}unmount(){}}function mq({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const gq={inView:{Feature:pq},tap:{Feature:lq},focus:{Feature:oq},hover:{Feature:aq}};function gF(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function yq(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function vq(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function mk(n,e,t){const r=n.getProps();return iN(r,e,t!==void 0?t:r.custom,yq(n),vq(n))}let xq=Xt,aN=Xt;const tc=n=>n*1e3,bo=n=>n/1e3,bq={current:!1},yF=n=>Array.isArray(n)&&typeof n[0]=="number";function vF(n){return!!(!n||typeof n=="string"&&xF[n]||yF(n)||Array.isArray(n)&&n.every(vF))}const Lm=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,xF={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Lm([0,.65,.55,1]),circOut:Lm([.55,0,1,.45]),backIn:Lm([.31,.01,.66,-.59]),backOut:Lm([.33,1.53,.69,.99])};function bF(n){if(n)return yF(n)?Lm(n):Array.isArray(n)?n.map(bF):xF[n]}function wq(n,e,t,{delay:r=0,duration:s,repeat:i=0,repeatType:a="loop",ease:o,times:l}={}){const c={[e]:t};l&&(c.offset=l);const d=bF(o);return Array.isArray(d)&&(c.easing=d),n.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}function Sq(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const wF=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,kq=1e-7,Aq=12;function Eq(n,e,t,r,s){let i,a,o=0;do a=e+(t-e)/2,i=wF(a,r,s)-n,i>0?t=a:e=a;while(Math.abs(i)>kq&&++o<Aq);return a}function $v(n,e,t,r){if(n===e&&t===r)return Xt;const s=i=>Eq(i,0,1,n,t);return i=>i===0||i===1?i:wF(s(i),e,r)}const Cq=$v(.42,0,1,1),_q=$v(0,0,.58,1),SF=$v(.42,0,.58,1),Tq=n=>Array.isArray(n)&&typeof n[0]!="number",kF=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,AF=n=>e=>1-n(1-e),oN=n=>1-Math.sin(Math.acos(n)),EF=AF(oN),Nq=kF(oN),CF=$v(.33,1.53,.69,.99),lN=AF(CF),Pq=kF(lN),jq=n=>(n*=2)<1?.5*lN(n):.5*(2-Math.pow(2,-10*(n-1))),Rq={linear:Xt,easeIn:Cq,easeInOut:SF,easeOut:_q,circIn:oN,circInOut:Nq,circOut:EF,backIn:lN,backInOut:Pq,backOut:CF,anticipate:jq},ER=n=>{if(Array.isArray(n)){aN(n.length===4);const[e,t,r,s]=n;return $v(e,t,r,s)}else if(typeof n=="string")return Rq[n];return n},cN=(n,e)=>t=>!!(Bv(t)&&MH.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),_F=(n,e,t)=>r=>{if(!Bv(r))return r;const[s,i,a,o]=r.match(fk);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Mq=n=>sc(0,255,n),BA={...Td,transform:n=>Math.round(Mq(n))},Fc={test:cN("rgb","red"),parse:_F("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+BA.transform(n)+", "+BA.transform(e)+", "+BA.transform(t)+", "+mg(pg.transform(r))+")"};function Iq(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const MC={test:cN("#"),parse:Iq,transform:Fc.transform},oh={test:cN("hsl","hue"),parse:_F("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+ha.transform(mg(e))+", "+ha.transform(mg(t))+", "+mg(pg.transform(r))+")"},lr={test:n=>Fc.test(n)||MC.test(n)||oh.test(n),parse:n=>Fc.test(n)?Fc.parse(n):oh.test(n)?oh.parse(n):MC.parse(n),transform:n=>Bv(n)?n:n.hasOwnProperty("red")?Fc.transform(n):oh.transform(n)},zt=(n,e,t)=>-t*n+t*e+n;function zA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Lq({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,a=0;if(!e)s=i=a=t;else{const o=t<.5?t*(1+e):t+e-t*e,l=2*t-o;s=zA(l,o,n+1/3),i=zA(l,o,n),a=zA(l,o,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}const $A=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},Dq=[MC,Fc,oh],Oq=n=>Dq.find(e=>e.test(n));function CR(n){const e=Oq(n);let t=e.parse(n);return e===oh&&(t=Lq(t)),t}const TF=(n,e)=>{const t=CR(n),r=CR(e),s={...t};return i=>(s.red=$A(t.red,r.red,i),s.green=$A(t.green,r.green,i),s.blue=$A(t.blue,r.blue,i),s.alpha=zt(t.alpha,r.alpha,i),Fc.transform(s))};function Fq(n){var e,t;return isNaN(n)&&Bv(n)&&(((e=n.match(fk))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(eF))===null||t===void 0?void 0:t.length)||0)>0}const NF={regex:jH,countKey:"Vars",token:"${v}",parse:Xt},PF={regex:eF,countKey:"Colors",token:"${c}",parse:lr.parse},jF={regex:fk,countKey:"Numbers",token:"${n}",parse:Td.parse};function VA(n,{regex:e,countKey:t,token:r,parse:s}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...i.map(s)))}function Nw(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&VA(t,NF),VA(t,PF),VA(t,jF),t}function RF(n){return Nw(n).values}function MF(n){const{values:e,numColors:t,numVars:r,tokenised:s}=Nw(n),i=e.length;return a=>{let o=s;for(let l=0;l<i;l++)l<r?o=o.replace(NF.token,a[l]):l<r+t?o=o.replace(PF.token,lr.transform(a[l])):o=o.replace(jF.token,mg(a[l]));return o}}const Bq=n=>typeof n=="number"?0:n;function zq(n){const e=RF(n);return MF(n)(e.map(Bq))}const ic={test:Fq,parse:RF,createTransformer:MF,getAnimatableNone:zq},IF=(n,e)=>t=>`${t>0?e:n}`;function LF(n,e){return typeof n=="number"?t=>zt(n,e,t):lr.test(n)?TF(n,e):n.startsWith("var(")?IF(n,e):OF(n,e)}const DF=(n,e)=>{const t=[...n],r=t.length,s=n.map((i,a)=>LF(i,e[a]));return i=>{for(let a=0;a<r;a++)t[a]=s[a](i);return t}},$q=(n,e)=>{const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=LF(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}},OF=(n,e)=>{const t=ic.createTransformer(e),r=Nw(n),s=Nw(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?ec(DF(r.values,s.values),t):IF(n,e)},qg=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},_R=(n,e)=>t=>zt(n,e,t);function Vq(n){return typeof n=="number"?_R:typeof n=="string"?lr.test(n)?TF:OF:Array.isArray(n)?DF:typeof n=="object"?$q:_R}function Uq(n,e,t){const r=[],s=t||Vq(n[0]),i=n.length-1;for(let a=0;a<i;a++){let o=s(n[a],n[a+1]);if(e){const l=Array.isArray(e)?e[a]||Xt:e;o=ec(l,o)}r.push(o)}return r}function FF(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(aN(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=Uq(e,r,s),o=a.length,l=c=>{let d=0;if(o>1)for(;d<n.length-2&&!(c<n[d+1]);d++);const f=qg(n[d],n[d+1],c);return a[d](f)};return t?c=>l(sc(n[0],n[i-1],c)):l}function Hq(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=qg(0,e,r);n.push(zt(t,1,s))}}function qq(n){const e=[0];return Hq(e,n.length-1),e}function Gq(n,e){return n.map(t=>t*e)}function Wq(n,e){return n.map(()=>e||SF).splice(0,n.length-1)}function Pw({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=Tq(r)?r.map(ER):ER(r),i={done:!1,value:e[0]},a=Gq(t&&t.length===e.length?t:qq(e),n),o=FF(a,e,{ease:Array.isArray(s)?s:Wq(e,s)});return{calculatedDuration:n,next:l=>(i.value=o(l),i.done=l>=n,i)}}function BF(n,e){return e?n*(1e3/e):0}const Xq=5;function zF(n,e,t){const r=Math.max(e-Xq,0);return BF(t-n(r),e-r)}const UA=.001,Kq=.01,TR=10,Yq=.05,Qq=1;function Jq({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let s,i;xq(n<=tc(TR));let a=1-e;a=sc(Yq,Qq,a),n=sc(Kq,TR,bo(n)),a<1?(s=c=>{const d=c*a,f=d*n,p=d-t,m=IC(c,a),y=Math.exp(-f);return UA-p/m*y},i=c=>{const f=c*a*n,p=f*t+t,m=Math.pow(a,2)*Math.pow(c,2)*n,y=Math.exp(-f),g=IC(Math.pow(c,2),a);return(-s(c)+UA>0?-1:1)*((p-m)*y)/g}):(s=c=>{const d=Math.exp(-c*n),f=(c-t)*n+1;return-UA+d*f},i=c=>{const d=Math.exp(-c*n),f=(t-c)*(n*n);return d*f});const o=5/n,l=eG(s,i,o);if(n=tc(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:a*2*Math.sqrt(r*c),duration:n}}}const Zq=12;function eG(n,e,t){let r=t;for(let s=1;s<Zq;s++)r=r-n(r)/e(r);return r}function IC(n,e){return n*Math.sqrt(1-e*e)}const tG=["duration","bounce"],nG=["stiffness","damping","mass"];function NR(n,e){return e.some(t=>n[t]!==void 0)}function rG(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!NR(n,nG)&&NR(n,tG)){const t=Jq(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function $F({keyframes:n,restDelta:e,restSpeed:t,...r}){const s=n[0],i=n[n.length-1],a={done:!1,value:s},{stiffness:o,damping:l,mass:c,duration:d,velocity:f,isResolvedFromDuration:p}=rG({...r,velocity:-bo(r.velocity||0)}),m=f||0,y=l/(2*Math.sqrt(o*c)),g=i-s,w=bo(Math.sqrt(o/c)),v=Math.abs(g)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let x;if(y<1){const b=IC(w,y);x=C=>{const _=Math.exp(-y*w*C);return i-_*((m+y*w*g)/b*Math.sin(b*C)+g*Math.cos(b*C))}}else if(y===1)x=b=>i-Math.exp(-w*b)*(g+(m+w*g)*b);else{const b=w*Math.sqrt(y*y-1);x=C=>{const _=Math.exp(-y*w*C),E=Math.min(b*C,300);return i-_*((m+y*w*g)*Math.sinh(E)+b*g*Math.cosh(E))/b}}return{calculatedDuration:p&&d||null,next:b=>{const C=x(b);if(p)a.done=b>=d;else{let _=m;b!==0&&(y<1?_=zF(x,b,C):_=0);const E=Math.abs(_)<=t,N=Math.abs(i-C)<=e;a.done=E&&N}return a.value=a.done?i:C,a}}}function PR({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const f=n[0],p={done:!1,value:f},m=j=>o!==void 0&&j<o||l!==void 0&&j>l,y=j=>o===void 0?l:l===void 0||Math.abs(o-j)<Math.abs(l-j)?o:l;let g=t*e;const w=f+g,v=a===void 0?w:a(w);v!==w&&(g=v-f);const x=j=>-g*Math.exp(-j/r),b=j=>v+x(j),C=j=>{const M=x(j),O=b(j);p.done=Math.abs(M)<=c,p.value=p.done?v:O};let _,E;const N=j=>{m(p.value)&&(_=j,E=$F({keyframes:[p.value,y(p.value)],velocity:zF(b,j,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return N(0),{calculatedDuration:null,next:j=>{let M=!1;return!E&&_===void 0&&(M=!0,C(j),N(j)),_!==void 0&&j>_?E.next(j-_):(!M&&C(j),p)}}}const sG=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Et.update(e,!0),stop:()=>Co(e),now:()=>Kn.isProcessing?Kn.timestamp:performance.now()}},jR=2e4;function RR(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<jR;)e+=t,r=n.next(e);return e>=jR?1/0:e}const iG={decay:PR,inertia:PR,tween:Pw,keyframes:Pw,spring:$F};function jw({autoplay:n=!0,delay:e=0,driver:t=sG,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:f,...p}){let m=1,y=!1,g,w;const v=()=>{w=new Promise(Y=>{g=Y})};v();let x;const b=iG[s]||Pw;let C;b!==Pw&&typeof r[0]!="number"&&(C=FF([0,100],r,{clamp:!1}),r=[0,100]);const _=b({...p,keyframes:r});let E;o==="mirror"&&(E=b({...p,keyframes:[...r].reverse(),velocity:-(p.velocity||0)}));let N="idle",j=null,M=null,O=null;_.calculatedDuration===null&&i&&(_.calculatedDuration=RR(_));const{calculatedDuration:L}=_;let F=1/0,U=1/0;L!==null&&(F=L+a,U=F*(i+1)-a);let B=0;const I=Y=>{if(M===null)return;m>0&&(M=Math.min(M,Y)),m<0&&(M=Math.min(Y-U/m,M)),j!==null?B=j:B=Math.round(Y-M)*m;const K=B-e*(m>=0?1:-1),R=m>=0?K<0:K>U;B=Math.max(K,0),N==="finished"&&j===null&&(B=U);let ie=B,ke=_;if(i){const Re=Math.min(B,U)/F;let xe=Math.floor(Re),He=Re%1;!He&&Re>=1&&(He=1),He===1&&xe--,xe=Math.min(xe,i+1),!!(xe%2)&&(o==="reverse"?(He=1-He,a&&(He-=a/F)):o==="mirror"&&(ke=E)),ie=sc(0,1,He)*F}const me=R?{done:!1,value:r[0]}:ke.next(ie);C&&(me.value=C(me.value));let{done:ve}=me;!R&&L!==null&&(ve=m>=0?B>=U:B<=0);const Ke=j===null&&(N==="finished"||N==="running"&&ve);return f&&f(me.value),Ke&&V(),me},D=()=>{x&&x.stop(),x=void 0},z=()=>{N="idle",D(),g(),v(),M=O=null},V=()=>{N="finished",d&&d(),D(),g()},q=()=>{if(y)return;x||(x=t(I));const Y=x.now();l&&l(),j!==null?M=Y-j:(!M||N==="finished")&&(M=Y),N==="finished"&&v(),O=M,j=null,N="running",x.start()};n&&q();const P={then(Y,K){return w.then(Y,K)},get time(){return bo(B)},set time(Y){Y=tc(Y),B=Y,j!==null||!x||m===0?j=Y:M=x.now()-Y/m},get duration(){const Y=_.calculatedDuration===null?RR(_):_.calculatedDuration;return bo(Y)},get speed(){return m},set speed(Y){Y===m||!x||(m=Y,P.time=bo(B))},get state(){return N},play:q,pause:()=>{N="paused",j=B},stop:()=>{y=!0,N!=="idle"&&(N="idle",c&&c(),z())},cancel:()=>{O!==null&&I(O),z()},complete:()=>{N="finished"},sample:Y=>(M=0,I(Y))};return P}function aG(n){let e;return()=>(e===void 0&&(e=n()),e)}const oG=aG(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lG=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),jx=10,cG=2e4,uG=(n,e)=>e.type==="spring"||n==="backgroundColor"||!vF(e.ease);function dG(n,e,{onUpdate:t,onComplete:r,...s}){if(!(oG()&&lG.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let a=!1,o,l,c=!1;const d=()=>{l=new Promise(b=>{o=b})};d();let{keyframes:f,duration:p=300,ease:m,times:y}=s;if(uG(e,s)){const b=jw({...s,repeat:0,delay:0});let C={done:!1,value:f[0]};const _=[];let E=0;for(;!C.done&&E<cG;)C=b.sample(E),_.push(C.value),E+=jx;y=void 0,f=_,p=E-jx,m="linear"}const g=wq(n.owner.current,e,f,{...s,duration:p,ease:m,times:y}),w=()=>{c=!1,g.cancel()},v=()=>{c=!0,Et.update(w),o(),d()};return g.onfinish=()=>{c||(n.set(Sq(f,s)),r&&r(),v())},{then(b,C){return l.then(b,C)},attachTimeline(b){return g.timeline=b,g.onfinish=null,Xt},get time(){return bo(g.currentTime||0)},set time(b){g.currentTime=tc(b)},get speed(){return g.playbackRate},set speed(b){g.playbackRate=b},get duration(){return bo(p)},play:()=>{a||(g.play(),Co(w))},pause:()=>g.pause(),stop:()=>{if(a=!0,g.playState==="idle")return;const{currentTime:b}=g;if(b){const C=jw({...s,autoplay:!1});n.setWithVelocity(C.sample(b-jx).value,C.sample(b).value,jx)}v()},complete:()=>{c||g.finish()},cancel:v}}function hG({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const s=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Xt,pause:Xt,stop:Xt,then:i=>(i(),Promise.resolve()),cancel:Xt,complete:Xt});return e?jw({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const fG={type:"spring",stiffness:500,damping:25,restSpeed:10},pG=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),mG={type:"keyframes",duration:.8},gG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yG=(n,{keyframes:e})=>e.length>2?mG:_d.has(n)?n.startsWith("scale")?pG(e[1]):fG:gG,LC=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ic.test(e)||e==="0")&&!e.startsWith("url(")),vG=new Set(["brightness","contrast","saturate","opacity"]);function xG(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(fk)||[];if(!r)return n;const s=t.replace(r,"");let i=vG.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const bG=/([a-z-]*)\(.*?\)/g,DC={...ic,getAnimatableNone:n=>{const e=n.match(bG);return e?e.map(xG).join(" "):n}},wG={...tF,color:lr,backgroundColor:lr,outlineColor:lr,fill:lr,stroke:lr,borderColor:lr,borderTopColor:lr,borderRightColor:lr,borderBottomColor:lr,borderLeftColor:lr,filter:DC,WebkitFilter:DC},uN=n=>wG[n];function VF(n,e){let t=uN(n);return t!==DC&&(t=ic),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const UF=n=>/^0[^.\s]+$/.test(n);function SG(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||UF(n)}function kG(n,e,t,r){const s=LC(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const a=r.from!==void 0?r.from:n.get();let o;const l=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?a:i[c-1]),SG(i[c])&&l.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(o=i[c]);if(s&&l.length&&o)for(let c=0;c<l.length;c++){const d=l[c];i[d]=VF(e,o)}return i}function AG({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function dN(n,e){return n[e]||n.default||n}const EG={skipAnimations:!1},hN=(n,e,t,r={})=>s=>{const i=dN(r,n)||{},a=i.delay||r.delay||0;let{elapsed:o=0}=r;o=o-tc(a);const l=kG(e,n,t,i),c=l[0],d=l[l.length-1],f=LC(n,c),p=LC(n,d);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-o,onUpdate:y=>{e.set(y),i.onUpdate&&i.onUpdate(y)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(AG(i)||(m={...m,...yG(n,m)}),m.duration&&(m.duration=tc(m.duration)),m.repeatDelay&&(m.repeatDelay=tc(m.repeatDelay)),!f||!p||bq.current||i.type===!1||EG.skipAnimations)return hG(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=dG(e,n,m);if(y)return y}return jw(m)};function Rw(n){return!!(Fr(n)&&n.add)}const HF=n=>/^\-?\d*\.?\d+$/.test(n);function fN(n,e){n.indexOf(e)===-1&&n.push(e)}function pN(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class mN{constructor(){this.subscriptions=[]}add(e){return fN(this.subscriptions,e),()=>pN(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const CG=n=>!isNaN(parseFloat(n));class _G{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:a}=Kn;this.lastUpdated!==a&&(this.timeDelta=i,this.lastUpdated=a,Et.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Et.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=CG(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new mN);const r=this.events[e].add(t);return e==="change"?()=>{r(),Et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?BF(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ip(n,e){return new _G(n,e)}const qF=n=>e=>e.test(n),TG={test:n=>n==="auto",parse:n=>n},GF=[Td,Se,ha,Oo,LH,IH,TG],vm=n=>GF.find(qF(n)),NG=[...GF,lr,ic],PG=n=>NG.find(qF(n));function jG(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ip(t))}function RG(n,e){const t=mk(n,e);let{transitionEnd:r={},transition:s={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...r};for(const a in i){const o=KH(i[a]);jG(n,a,o)}}function MG(n,e,t){var r,s;const i=Object.keys(e).filter(o=>!n.hasValue(o)),a=i.length;if(a)for(let o=0;o<a;o++){const l=i[o],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(r=t[l])!==null&&r!==void 0?r:n.readValue(l))!==null&&s!==void 0?s:e[l]),d!=null&&(typeof d=="string"&&(HF(d)||UF(d))?d=parseFloat(d):!PG(d)&&ic.test(c)&&(d=VF(l,c)),n.addValue(l,Ip(d,{owner:n})),t[l]===void 0&&(t[l]=d),d!==null&&n.setBaseTarget(l,d))}}function IG(n,e){return e?(e[n]||e.default||e).from:void 0}function LG(n,e,t){const r={};for(const s in n){const i=IG(s,e);if(i!==void 0)r[s]=i;else{const a=t.getValue(s);a&&(r[s]=a.get())}}return r}function DG({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function OG(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function WF(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:a,...o}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");r&&(i=r);const c=[],d=s&&n.animationState&&n.animationState.getState()[s];for(const f in o){const p=n.getValue(f),m=o[f];if(!p||m===void 0||d&&DG(d,f))continue;const y={delay:t,elapsed:0,...dN(i||{},f)};if(window.HandoffAppearAnimations){const v=n.getProps()[X3];if(v){const x=window.HandoffAppearAnimations(v,f,p,Et);x!==null&&(y.elapsed=x,y.isHandoff=!0)}}let g=!y.isHandoff&&!OG(p,m);if(y.type==="spring"&&(p.getVelocity()||y.velocity)&&(g=!1),p.animation&&(g=!1),g)continue;p.start(hN(f,p,m,n.shouldReduceMotion&&_d.has(f)?{type:!1}:y));const w=p.animation;Rw(l)&&(l.add(f),w.then(()=>l.remove(f))),c.push(w)}return a&&Promise.all(c).then(()=>{a&&RG(n,a)}),c}function OC(n,e,t={}){const r=mk(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const i=r?()=>Promise.all(WF(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return FG(n,e,c+l,d,f,t)}:()=>Promise.resolve(),{when:o}=s;if(o){const[l,c]=o==="beforeChildren"?[i,a]:[a,i];return l().then(()=>c())}else return Promise.all([i(),a(t.delay)])}function FG(n,e,t=0,r=0,s=1,i){const a=[],o=(n.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>o-c*r;return Array.from(n.variantChildren).sort(BG).forEach((c,d)=>{c.notify("AnimationStart",e),a.push(OC(c,e,{...i,delay:t+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(a)}function BG(n,e){return n.sortNodePosition(e)}function zG(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>OC(n,i,t));r=Promise.all(s)}else if(typeof e=="string")r=OC(n,e,t);else{const s=typeof e=="function"?mk(n,e,t.custom):e;r=Promise.all(WF(n,s,t))}return r.then(()=>n.notify("AnimationComplete",e))}const $G=[...Y2].reverse(),VG=Y2.length;function UG(n){return e=>Promise.all(e.map(({animation:t,options:r})=>zG(n,t,r)))}function HG(n){let e=UG(n);const t=GG();let r=!0;const s=(l,c)=>{const d=mk(n,c);if(d){const{transition:f,transitionEnd:p,...m}=d;l={...l,...m,...p}}return l};function i(l){e=l(n)}function a(l,c){const d=n.getProps(),f=n.getVariantContext(!0)||{},p=[],m=new Set;let y={},g=1/0;for(let v=0;v<VG;v++){const x=$G[v],b=t[x],C=d[x]!==void 0?d[x]:f[x],_=Ug(C),E=x===c?b.isActive:null;E===!1&&(g=v);let N=C===f[x]&&C!==d[x]&&_;if(N&&r&&n.manuallyAnimateOnMount&&(N=!1),b.protectedKeys={...y},!b.isActive&&E===null||!C&&!b.prevProp||dk(C)||typeof C=="boolean")continue;let M=qG(b.prevProp,C)||x===c&&b.isActive&&!N&&_||v>g&&_,O=!1;const L=Array.isArray(C)?C:[C];let F=L.reduce(s,{});E===!1&&(F={});const{prevResolvedValues:U={}}=b,B={...U,...F},I=D=>{M=!0,m.has(D)&&(O=!0,m.delete(D)),b.needsAnimating[D]=!0};for(const D in B){const z=F[D],V=U[D];if(y.hasOwnProperty(D))continue;let q=!1;Tw(z)&&Tw(V)?q=!gF(z,V):q=z!==V,q?z!==void 0?I(D):m.add(D):z!==void 0&&m.has(D)?I(D):b.protectedKeys[D]=!0}b.prevProp=C,b.prevResolvedValues=F,b.isActive&&(y={...y,...F}),r&&n.blockInitialAnimation&&(M=!1),M&&(!N||O)&&p.push(...L.map(D=>({animation:D,options:{type:x,...l}})))}if(m.size){const v={};m.forEach(x=>{const b=n.getBaseTarget(x);b!==void 0&&(v[x]=b)}),p.push({animation:v})}let w=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(w=!1),r=!1,w?e(p):Promise.resolve()}function o(l,c,d){var f;if(t[l].isActive===c)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),t[l].isActive=c;const p=a(d,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:a,setActive:o,setAnimateFunction:i,getState:()=>t}}function qG(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!gF(e,n):!1}function gc(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function GG(){return{animate:gc(!0),whileInView:gc(),whileHover:gc(),whileTap:gc(),whileDrag:gc(),whileFocus:gc(),exit:gc()}}class WG extends dc{constructor(e){super(e),e.animationState||(e.animationState=HG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),dk(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let XG=0;class KG extends dc{constructor(){super(...arguments),this.id=XG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const YG={animation:{Feature:WG},exit:{Feature:KG}},MR=(n,e)=>Math.abs(n-e);function QG(n,e){const t=MR(n.x,e.x),r=MR(n.y,e.y);return Math.sqrt(t**2+r**2)}class XF{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=qA(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=QG(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:g}=Kn;this.history.push({...y,timestamp:g});const{onStart:w,onMove:v}=this.handlers;p||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=HA(p,this.transformPagePoint),Et.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=qA(f.type==="pointercancel"?this.lastMoveEventInfo:HA(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,w),y&&y(f,w)},!dF(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const a=pk(e),o=HA(a,this.transformPagePoint),{point:l}=o,{timestamp:c}=Kn;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,qA(o,this.history)),this.removeListeners=ec(xo(this.contextWindow,"pointermove",this.handlePointerMove),xo(this.contextWindow,"pointerup",this.handlePointerUp),xo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Co(this.updatePoint)}}function HA(n,e){return e?{point:e(n.point)}:n}function IR(n,e){return{x:n.x-e.x,y:n.y-e.y}}function qA({point:n},e){return{point:n,delta:IR(n,KF(e)),offset:IR(n,JG(e)),velocity:ZG(e,.1)}}function JG(n){return n[0]}function KF(n){return n[n.length-1]}function ZG(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=KF(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>tc(e)));)t--;if(!r)return{x:0,y:0};const i=bo(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ms(n){return n.max-n.min}function FC(n,e=0,t=.01){return Math.abs(n-e)<=t}function LR(n,e,t,r=.5){n.origin=r,n.originPoint=zt(e.min,e.max,n.origin),n.scale=ms(t)/ms(e),(FC(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=zt(t.min,t.max,n.origin)-n.originPoint,(FC(n.translate)||isNaN(n.translate))&&(n.translate=0)}function gg(n,e,t,r){LR(n.x,e.x,t.x,r?r.originX:void 0),LR(n.y,e.y,t.y,r?r.originY:void 0)}function DR(n,e,t){n.min=t.min+e.min,n.max=n.min+ms(e)}function e9(n,e,t){DR(n.x,e.x,t.x),DR(n.y,e.y,t.y)}function OR(n,e,t){n.min=e.min-t.min,n.max=n.min+ms(e)}function yg(n,e,t){OR(n.x,e.x,t.x),OR(n.y,e.y,t.y)}function t9(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?zt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?zt(t,n,r.max):Math.min(n,t)),n}function FR(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function n9(n,{top:e,left:t,bottom:r,right:s}){return{x:FR(n.x,t,s),y:FR(n.y,e,r)}}function BR(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function r9(n,e){return{x:BR(n.x,e.x),y:BR(n.y,e.y)}}function s9(n,e){let t=.5;const r=ms(n),s=ms(e);return s>r?t=qg(e.min,e.max-r,n.min):r>s&&(t=qg(n.min,n.max-s,e.min)),sc(0,1,t)}function i9(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const BC=.35;function a9(n=BC){return n===!1?n=0:n===!0&&(n=BC),{x:zR(n,"left","right"),y:zR(n,"top","bottom")}}function zR(n,e,t){return{min:$R(n,e),max:$R(n,t)}}function $R(n,e){return typeof n=="number"?n:n[e]||0}const VR=()=>({translate:0,scale:1,origin:0,originPoint:0}),lh=()=>({x:VR(),y:VR()}),UR=()=>({min:0,max:0}),nn=()=>({x:UR(),y:UR()});function Es(n){return[n("x"),n("y")]}function YF({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function o9({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function l9(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function GA(n){return n===void 0||n===1}function zC({scale:n,scaleX:e,scaleY:t}){return!GA(n)||!GA(e)||!GA(t)}function Sc(n){return zC(n)||QF(n)||n.z||n.rotate||n.rotateX||n.rotateY}function QF(n){return HR(n.x)||HR(n.y)}function HR(n){return n&&n!=="0%"}function Mw(n,e,t){const r=n-t,s=e*r;return t+s}function qR(n,e,t,r,s){return s!==void 0&&(n=Mw(n,s,r)),Mw(n,t,r)+e}function $C(n,e=0,t=1,r,s){n.min=qR(n.min,e,t,r,s),n.max=qR(n.max,e,t,r,s)}function JF(n,{x:e,y:t}){$C(n.x,e.translate,e.scale,e.originPoint),$C(n.y,t.translate,t.scale,t.originPoint)}function c9(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,a;for(let o=0;o<s;o++){i=t[o],a=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ch(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,JF(n,a)),r&&Sc(i.latestValues)&&ch(n,i.latestValues))}e.x=GR(e.x),e.y=GR(e.y)}function GR(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function $o(n,e){n.min=n.min+e,n.max=n.max+e}function WR(n,e,[t,r,s]){const i=e[s]!==void 0?e[s]:.5,a=zt(n.min,n.max,i);$C(n,e[t],e[r],a,e.scale)}const u9=["x","scaleX","originX"],d9=["y","scaleY","originY"];function ch(n,e){WR(n.x,e,u9),WR(n.y,e,d9)}function ZF(n,e){return YF(l9(n.getBoundingClientRect(),e))}function h9(n,e,t){const r=ZF(n,t),{scroll:s}=e;return s&&($o(r.x,s.offset.x),$o(r.y,s.offset.y)),r}const e4=({current:n})=>n?n.ownerDocument.defaultView:null,f9=new WeakMap;class p9{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(pk(d,"page").point)},i=(d,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=fF(p),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Es(w=>{let v=this.getAxisMotionValue(w).get()||0;if(ha.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[w];b&&(v=ms(b)*(parseFloat(v)/100))}}this.originPoint[w]=v}),y&&Et.update(()=>y(d,f),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!p&&!this.openGlobalLock)return;const{offset:w}=f;if(m&&this.currentDirection===null){this.currentDirection=m9(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),g&&g(d,f)},o=(d,f)=>this.stop(d,f),l=()=>Es(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new XF(e,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:e4(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Et.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Rx(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=t9(a,this.constraints[e],this.elastic[e])),i.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&ah(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=n9(s.layoutBox,t):this.constraints=!1,this.elastic=a9(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Es(a=>{this.getAxisMotionValue(a)&&(this.constraints[a]=i9(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!ah(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=h9(r,s.root,this.visualElement.getTransformPagePoint());let a=r9(s.layout.layoutBox,i);if(t){const o=t(o9(a));this.hasMutatedConstraints=!!o,o&&(a=YF(o))}return a}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},c=Es(d=>{if(!Rx(d,t,this.currentDirection))return;let f=l&&l[d]||{};a&&(f={min:0,max:0});const p=s?200:1e6,m=s?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(hN(e,r,0,t))}stopAnimation(){Es(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Es(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Es(t=>{const{drag:r}=this.getProps();if(!Rx(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[t];i.set(e[t]-zt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!ah(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Es(a=>{const o=this.getAxisMotionValue(a);if(o){const l=o.get();s[a]=s9({min:l,max:l},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Es(a=>{if(!Rx(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:c}=this.constraints[a];o.set(zt(l,c,s[a]))})}addListeners(){if(!this.visualElement.current)return;f9.set(this.visualElement,this);const e=this.visualElement.current,t=xo(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ah(l)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const a=yo(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Es(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{a(),t(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=BC,dragMomentum:o=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:o}}}function Rx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function m9(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class g9 extends dc{constructor(e){super(e),this.removeGroupControls=Xt,this.removeListeners=Xt,this.controls=new p9(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xt}unmount(){this.removeGroupControls(),this.removeListeners()}}const XR=n=>(e,t)=>{n&&Et.update(()=>n(e,t))};class y9 extends dc{constructor(){super(...arguments),this.removePointerDownListener=Xt}onPointerDown(e){this.session=new XF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:e4(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:XR(e),onStart:XR(t),onMove:r,onEnd:(i,a)=>{delete this.session,s&&Et.update(()=>s(i,a))}}}mount(){this.removePointerDownListener=xo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function v9(){const n=S.useContext(ck);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,s=S.useId();return S.useEffect(()=>r(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const yb={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function KR(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const xm={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Se.test(n))n=parseFloat(n);else return n;const t=KR(n,e.target.x),r=KR(n,e.target.y);return`${t}% ${r}%`}},x9={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=ic.parse(n);if(s.length>5)return r;const i=ic.createTransformer(n),a=typeof s[0]!="number"?1:0,o=t.x.scale*e.x,l=t.y.scale*e.y;s[0+a]/=o,s[1+a]/=l;const c=zt(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=c),typeof s[3+a]=="number"&&(s[3+a]/=c),i(s)}};class b9 extends Le.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;_H(w9),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yb.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,s||e.layoutDependency!==t||t===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?a.promote():a.relegate()||Et.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function t4(n){const[e,t]=v9(),r=S.useContext(J2);return Le.createElement(b9,{...n,layoutGroup:r,switchLayoutGroup:S.useContext(Y3),isPresent:e,safeToRemove:t})}const w9={borderRadius:{...xm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xm,borderTopRightRadius:xm,borderBottomLeftRadius:xm,borderBottomRightRadius:xm,boxShadow:x9},n4=["TopLeft","TopRight","BottomLeft","BottomRight"],S9=n4.length,YR=n=>typeof n=="string"?parseFloat(n):n,QR=n=>typeof n=="number"||Se.test(n);function k9(n,e,t,r,s,i){s?(n.opacity=zt(0,t.opacity!==void 0?t.opacity:1,A9(r)),n.opacityExit=zt(e.opacity!==void 0?e.opacity:1,0,E9(r))):i&&(n.opacity=zt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let a=0;a<S9;a++){const o=`border${n4[a]}Radius`;let l=JR(e,o),c=JR(t,o);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||QR(l)===QR(c)?(n[o]=Math.max(zt(YR(l),YR(c),r),0),(ha.test(c)||ha.test(l))&&(n[o]+="%")):n[o]=c}(e.rotate||t.rotate)&&(n.rotate=zt(e.rotate||0,t.rotate||0,r))}function JR(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const A9=r4(0,.5,EF),E9=r4(.5,.95,Xt);function r4(n,e,t){return r=>r<n?0:r>e?1:t(qg(n,e,r))}function ZR(n,e){n.min=e.min,n.max=e.max}function Ss(n,e){ZR(n.x,e.x),ZR(n.y,e.y)}function eM(n,e,t,r,s){return n-=e,n=Mw(n,1/t,r),s!==void 0&&(n=Mw(n,1/s,r)),n}function C9(n,e=0,t=1,r=.5,s,i=n,a=n){if(ha.test(e)&&(e=parseFloat(e),e=zt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=zt(i.min,i.max,r);n===i&&(o-=e),n.min=eM(n.min,e,t,o,s),n.max=eM(n.max,e,t,o,s)}function tM(n,e,[t,r,s],i,a){C9(n,e[t],e[r],e[s],e.scale,i,a)}const _9=["x","scaleX","originX"],T9=["y","scaleY","originY"];function nM(n,e,t,r){tM(n.x,e,_9,t?t.x:void 0,r?r.x:void 0),tM(n.y,e,T9,t?t.y:void 0,r?r.y:void 0)}function rM(n){return n.translate===0&&n.scale===1}function s4(n){return rM(n.x)&&rM(n.y)}function N9(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function i4(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function sM(n){return ms(n.x)/ms(n.y)}class P9{constructor(){this.members=[]}add(e){fN(this.members,e),e.scheduleRender()}remove(e){if(pN(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function iM(n,e,t){let r="";const s=n.x.translate/e.x,i=n.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:d}=t;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const a=n.x.scale*e.x,o=n.y.scale*e.y;return(a!==1||o!==1)&&(r+=`scale(${a}, ${o})`),r||"none"}const j9=(n,e)=>n.depth-e.depth;class R9{constructor(){this.children=[],this.isDirty=!1}add(e){fN(this.children,e),this.isDirty=!0}remove(e){pN(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(j9),this.isDirty=!1,this.children.forEach(e)}}function M9(n,e){const t=performance.now(),r=({timestamp:s})=>{const i=s-t;i>=e&&(Co(r),n(i-e))};return Et.read(r,!0),()=>Co(r)}function I9(n){window.MotionDebug&&window.MotionDebug.record(n)}function L9(n){return n instanceof SVGElement&&n.tagName!=="svg"}function D9(n,e,t){const r=Fr(n)?n:Ip(n);return r.start(hN("",r,e,t)),r.animation}const aM=["","X","Y","Z"],O9={visibility:"hidden"},oM=1e3;let F9=0;const kc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function a4({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},o=e==null?void 0:e()){this.id=F9++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,kc.totalNodes=kc.resolvedTargetDeltas=kc.recalculatedProjection=0,this.nodes.forEach($9),this.nodes.forEach(G9),this.nodes.forEach(W9),this.nodes.forEach(V9),I9(kc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new R9)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new mN),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=L9(a),this.instance=a;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=M9(p,250),yb.hasAnimatedSinceResize&&(yb.hasAnimatedSinceResize=!1,this.nodes.forEach(cM))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||J9,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!i4(this.targetLayout,y)||m,b=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||b||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const C={...dN(g,"layout"),onPlay:w,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else p||cM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Co(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(X9),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lM);return}this.isUpdating||this.nodes.forEach(H9),this.isUpdating=!1,this.nodes.forEach(q9),this.nodes.forEach(B9),this.nodes.forEach(z9),this.clearAllSnapshots();const o=performance.now();Kn.delta=sc(0,1e3/60,o-Kn.timestamp),Kn.timestamp=o,Kn.isProcessing=!0,DA.update.process(Kn),DA.preRender.process(Kn),DA.render.process(Kn),Kn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(U9),this.sharedNodes.forEach(K9)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&(this.scroll={animationId:this.root.animationId,phase:a,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform,o=this.projectionDelta&&!s4(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;a&&(o||Sc(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),Z9(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return nn();const o=a.measureViewportBox(),{scroll:l}=this.root;return l&&($o(o.x,l.offset.x),$o(o.y,l.offset.y)),o}removeElementScroll(a){const o=nn();Ss(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:f}=c;if(c!==this.root&&d&&f.layoutScroll){if(d.isRoot){Ss(o,a);const{scroll:p}=this.root;p&&($o(o.x,-p.offset.x),$o(o.y,-p.offset.y))}$o(o.x,d.offset.x),$o(o.y,d.offset.y)}}return o}applyTransform(a,o=!1){const l=nn();Ss(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ch(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Sc(d.latestValues)&&ch(l,d.latestValues)}return Sc(this.latestValues)&&ch(l,this.latestValues),l}removeTransform(a){const o=nn();Ss(o,a);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Sc(c.latestValues))continue;zC(c.latestValues)&&c.updateSnapshot();const d=nn(),f=c.measurePageBox();Ss(d,f),nM(o,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Sc(this.latestValues)&&nM(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Kn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Kn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),yg(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=nn(),this.targetWithTransforms=nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),e9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ss(this.target,this.layout.layoutBox),JF(this.target,this.targetDelta)):Ss(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),yg(this.relativeTargetOrigin,this.target,m.target),Ss(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||zC(this.parent.latestValues)||QF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Kn.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Ss(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;c9(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox);const{target:y}=o;if(!y){this.projectionTransform&&(this.projectionDelta=lh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=lh(),this.projectionDeltaWithTransform=lh());const g=this.projectionTransform;gg(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=iM(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),kc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(a,o=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=lh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const p=nn(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,w=this.getStack(),v=!w||w.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(Q9));this.animationProgress=0;let b;this.mixTargetDelta=C=>{const _=C/1e3;uM(f.x,a.x,_),uM(f.y,a.y,_),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(yg(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Y9(this.relativeTarget,this.relativeTargetOrigin,p,_),b&&N9(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=nn()),Ss(b,this.relativeTarget)),g&&(this.animationValues=d,k9(d,c,this.latestValues,_,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Co(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Et.update(()=>{yb.hasAnimatedSinceResize=!0,this.currentAnimation=D9(0,oM,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:c,latestValues:d}=a;if(!(!o||!l||!c)){if(this!==a&&this.layout&&c&&o4(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||nn();const f=ms(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+f;const p=ms(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+p}Ss(o,l),ch(o,d),gg(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new P9),this.sharedNodes.get(a).add(o);const c=o.options.initialPromotionConfig;o.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(o=!0),!o)return;const c={};for(let d=0;d<aM.length;d++){const f="rotate"+aM[d];l[f]&&(c[f]=l[f],a.setStaticValue(f,0))}a.render();for(const d in c)a.setStaticValue(d,c[d]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return O9;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=gb(a==null?void 0:a.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=gb(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Sc(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=iM(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(o=p.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const g in Cw){if(p[g]===void 0)continue;const{correct:w,applyTo:v}=Cw[g],x=c.transform==="none"?p[g]:w(p[g],f);if(v){const b=v.length;for(let C=0;C<b;C++)c[v[C]]=x}else c[g]=x}return this.options.layoutId&&(c.pointerEvents=f===this?gb(a==null?void 0:a.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(lM),this.root.sharedNodes.clear()}}}function B9(n){n.updateLayout()}function z9(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:i}=n.options,a=t.source!==n.layout.source;i==="size"?Es(f=>{const p=a?t.measuredBox[f]:t.layoutBox[f],m=ms(p);p.min=r[f].min,p.max=p.min+m}):o4(i,t.layoutBox,r)&&Es(f=>{const p=a?t.measuredBox[f]:t.layoutBox[f],m=ms(r[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const o=lh();gg(o,r,t.layoutBox);const l=lh();a?gg(l,n.applyTransform(s,!0),t.measuredBox):gg(l,r,t.layoutBox);const c=!s4(o);let d=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=nn();yg(y,t.layoutBox,p.layoutBox);const g=nn();yg(g,r,m.layoutBox),i4(y,g)||(d=!0),f.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=y,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function $9(n){kc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function V9(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function U9(n){n.clearSnapshot()}function lM(n){n.clearMeasurements()}function H9(n){n.isLayoutDirty=!1}function q9(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function cM(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function G9(n){n.resolveTargetDelta()}function W9(n){n.calcProjection()}function X9(n){n.resetRotation()}function K9(n){n.removeLeadSnapshot()}function uM(n,e,t){n.translate=zt(e.translate,0,t),n.scale=zt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function dM(n,e,t,r){n.min=zt(e.min,t.min,r),n.max=zt(e.max,t.max,r)}function Y9(n,e,t,r){dM(n.x,e.x,t.x,r),dM(n.y,e.y,t.y,r)}function Q9(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const J9={duration:.45,ease:[.4,0,.1,1]},hM=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),fM=hM("applewebkit/")&&!hM("chrome/")?Math.round:Xt;function pM(n){n.min=fM(n.min),n.max=fM(n.max)}function Z9(n){pM(n.x),pM(n.y)}function o4(n,e,t){return n==="position"||n==="preserve-aspect"&&!FC(sM(e),sM(t),.2)}const eW=a4({attachResizeListener:(n,e)=>yo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),WA={current:void 0},l4=a4({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!WA.current){const n=new eW({});n.mount(window),n.setOptions({layoutScroll:!0}),WA.current=n}return WA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),tW={pan:{Feature:y9},drag:{Feature:g9,ProjectionNode:l4,MeasureLayout:t4}},nW=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function rW(n){const e=nW.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function VC(n,e,t=1){const[r,s]=rW(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const a=i.trim();return HF(a)?parseFloat(a):a}else return jC(s)?VC(s,e,t+1):s}function sW(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const i=s.get();if(!jC(i))return;const a=VC(i,r);a&&s.set(a)});for(const s in e){const i=e[s];if(!jC(i))continue;const a=VC(i,r);a&&(e[s]=a,t||(t={}),t[s]===void 0&&(t[s]=i))}return{target:e,transitionEnd:t}}const iW=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),c4=n=>iW.has(n),aW=n=>Object.keys(n).some(c4),mM=n=>n===Td||n===Se,gM=(n,e)=>parseFloat(n.split(", ")[e]),yM=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return gM(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?gM(i[1],n):0}},oW=new Set(["x","y","z"]),lW=Fv.filter(n=>!oW.has(n));function cW(n){const e=[];return lW.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Lp={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:yM(4,13),y:yM(5,14)};Lp.translateX=Lp.x;Lp.translateY=Lp.y;const uW=(n,e,t)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:a}=i,o={};a==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{o[c]=Lp[c](r,i)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const d=e.getValue(c);d&&d.jump(o[c]),n[c]=Lp[c](l,i)}),n},dW=(n,e,t={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(c4);let i=[],a=!1;const o=[];if(s.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let d=t[l],f=vm(d);const p=e[l];let m;if(Tw(p)){const y=p.length,g=p[0]===null?1:0;d=p[g],f=vm(d);for(let w=g;w<y&&p[w]!==null;w++)m?aN(vm(p[w])===m):m=vm(p[w])}else m=vm(p);if(f!==m)if(mM(f)&&mM(m)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===Se&&(e[l]=p.map(parseFloat))}else f!=null&&f.transform&&(m!=null&&m.transform)&&(d===0||p===0)?d===0?c.set(m.transform(d)):e[l]=f.transform(p):(a||(i=cW(n),a=!0),o.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(p))}),o.length){const l=o.indexOf("height")>=0?window.pageYOffset:null,c=uW(e,n,o);return i.length&&i.forEach(([d,f])=>{n.getValue(d).set(f)}),n.render(),uk&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function hW(n,e,t,r){return aW(e)?dW(n,e,t,r):{target:e,transitionEnd:r}}const fW=(n,e,t,r)=>{const s=sW(n,e,r);return e=s.target,r=s.transitionEnd,hW(n,e,t,r)},UC={current:null},u4={current:!1};function pW(){if(u4.current=!0,!!uk)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>UC.current=n.matches;n.addListener(e),e()}else UC.current=!1}function mW(n,e,t){const{willChange:r}=e;for(const s in e){const i=e[s],a=t[s];if(Fr(i))n.addValue(s,i),Rw(r)&&r.add(s);else if(Fr(a))n.addValue(s,Ip(i,{owner:n})),Rw(r)&&r.remove(s);else if(a!==i)if(n.hasValue(s)){const o=n.getValue(s);!o.hasAnimated&&o.set(i)}else{const o=n.getStaticValue(s);n.addValue(s,Ip(o!==void 0?o:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const vM=new WeakMap,d4=Object.keys(Hg),gW=d4.length,xM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],yW=Q2.length;class vW{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,visualState:i},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Et.render(this.render,!1,!0);const{latestValues:o,renderState:l}=i;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.isControllingVariants=hk(t),this.isVariantNode=K3(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{});for(const f in d){const p=d[f];o[f]!==void 0&&Fr(p)&&(p.set(o[f],!1),Rw(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,vM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),u4.current||pW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:UC.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){vM.delete(this.current),this.projection&&this.projection.unmount(),Co(this.notifyUpdate),Co(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=_d.has(e),s=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Et.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,s,i){let a,o;for(let l=0;l<gW;l++){const c=d4[l],{isEnabled:d,Feature:f,ProjectionNode:p,MeasureLayout:m}=Hg[c];p&&(a=p),d(t)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),m&&(o=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&a){this.projection=new a(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:f,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||f&&ah(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:p,layoutRoot:m})}return o}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<xM.length;r++){const s=xM[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=mW(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<yW;r++){const s=Q2[r],i=this.props[s];(Ug(i)||i===!1)&&(t[s]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Ip(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(t=iN(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Fr(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new mN),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class h4 extends vW{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:s},i){let a=LG(r,e||{},this);if(s&&(t&&(t=s(t)),r&&(r=s(r)),a&&(a=s(a))),i){MG(this,r,a);const o=fW(this,r,a,t);t=o.transitionEnd,r=o.target}return{transition:e,transitionEnd:t,...r}}}function xW(n){return window.getComputedStyle(n)}class bW extends h4{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(_d.has(t)){const r=uN(t);return r&&r.default||0}else{const r=xW(e),s=(Z3(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ZF(e,t)}build(e,t,r,s){eN(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return sN(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Fr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,s){iF(e,t,r,s)}}class wW extends h4{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(_d.has(t)){const r=uN(t);return r&&r.default||0}return t=aF.has(t)?t:K2(t),e.getAttribute(t)}measureInstanceViewportBox(){return nn()}scrapeMotionValuesFromProps(e,t){return lF(e,t)}build(e,t,r,s){nN(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){oF(e,t,r,s)}mount(e){this.isSVGTag=rN(e.tagName),super.mount(e)}}const SW=(n,e)=>Z2(n)?new wW(e,{enableHardwareAcceleration:!1}):new bW(e,{enableHardwareAcceleration:!0}),kW={layout:{ProjectionNode:l4,MeasureLayout:t4}},AW={...YG,...gq,...tW,...kW},ne=EH((n,e)=>rq(n,e,AW,SW));function f4(){const n=S.useRef(!1);return X2(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function EW(){const n=f4(),[e,t]=S.useState(0),r=S.useCallback(()=>{n.current&&t(e+1)},[e]);return[S.useCallback(()=>Et.postRender(r),[r]),e]}class CW extends S.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function _W({children:n,isPresent:e}){const t=S.useId(),r=S.useRef(null),s=S.useRef({width:0,height:0,top:0,left:0});return S.useInsertionEffect(()=>{const{width:i,height:a,top:o,left:l}=s.current;if(e||!r.current||!i||!a)return;r.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${a}px !important;
            top: ${o}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),S.createElement(CW,{isPresent:e,childRef:r,sizeRef:s},S.cloneElement(n,{ref:r}))}const XA=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a})=>{const o=cF(TW),l=S.useId(),c=S.useMemo(()=>({id:l,initial:e,isPresent:t,custom:s,onExitComplete:d=>{o.set(d,!0);for(const f of o.values())if(!f)return;r&&r()},register:d=>(o.set(d,!1),()=>o.delete(d))}),i?void 0:[t]);return S.useMemo(()=>{o.forEach((d,f)=>o.set(f,!1))},[t]),S.useEffect(()=>{!t&&!o.size&&r&&r()},[t]),a==="popLayout"&&(n=S.createElement(_W,{isPresent:t},n)),S.createElement(ck.Provider,{value:c},n)};function TW(){return new Map}function NW(n){return S.useEffect(()=>()=>n(),[])}const Ac=n=>n.key||"";function PW(n,e){n.forEach(t=>{const r=Ac(t);e.set(r,t)})}function jW(n){const e=[];return S.Children.forEach(n,t=>{S.isValidElement(t)&&e.push(t)}),e}const fa=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:a="sync"})=>{const o=S.useContext(J2).forceRender||EW()[0],l=f4(),c=jW(n);let d=c;const f=S.useRef(new Map).current,p=S.useRef(d),m=S.useRef(new Map).current,y=S.useRef(!0);if(X2(()=>{y.current=!1,PW(c,m),p.current=d}),NW(()=>{y.current=!0,m.clear(),f.clear()}),y.current)return S.createElement(S.Fragment,null,d.map(x=>S.createElement(XA,{key:Ac(x),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:a},x)));d=[...d];const g=p.current.map(Ac),w=c.map(Ac),v=g.length;for(let x=0;x<v;x++){const b=g[x];w.indexOf(b)===-1&&!f.has(b)&&f.set(b,void 0)}return a==="wait"&&f.size&&(d=[]),f.forEach((x,b)=>{if(w.indexOf(b)!==-1)return;const C=m.get(b);if(!C)return;const _=g.indexOf(b);let E=x;if(!E){const N=()=>{f.delete(b);const j=Array.from(m.keys()).filter(M=>!w.includes(M));if(j.forEach(M=>m.delete(M)),p.current=c.filter(M=>{const O=Ac(M);return O===b||j.includes(O)}),!f.size){if(l.current===!1)return;o(),r&&r()}};E=S.createElement(XA,{key:Ac(C),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:i,mode:a},C),f.set(b,E)}d.splice(_,0,E)}),d=d.map(x=>{const b=x.key;return f.has(b)?x:S.createElement(XA,{key:Ac(x),isPresent:!0,presenceAffectsLayout:i,mode:a},x)}),S.createElement(S.Fragment,null,f.size?d:d.map(x=>S.cloneElement(x)))},RW=w3("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=S.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const a=r?AU:"button";return h.jsx(a,{className:Ei(RW({variant:e,size:t,className:n})),ref:i,...s})});we.displayName="Button";const MW="modulepreload",IW=function(n){return"/"+n},bM={},jo=function(e,t,r){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=IW(i),i in bM)return;bM[i]=!0;const a=i.endsWith(".css"),o=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===i&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${o}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":MW,a||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),a)return new Promise((d,f)=>{c.addEventListener("load",d),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},LW=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jo(()=>Promise.resolve().then(()=>Uv),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class gN extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class wM extends gN{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class SM extends gN{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class kM extends gN{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var HC;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(HC||(HC={}));var DW=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};class OW{constructor(e,{headers:t={},customFetch:r,region:s=HC.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=LW(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return DW(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a,signal:o}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let f;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)));const p=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:f,signal:o}).catch(w=>{throw w.name==="AbortError"?w:new wM(w)}),m=p.headers.get("x-relay-error");if(m&&m==="true")throw new SM(p);if(!p.ok)throw new kM(p);let y=((r=p.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield p.json():y==="application/octet-stream"?g=yield p.blob():y==="text/event-stream"?g=p:y==="multipart/form-data"?g=yield p.formData():g=yield p.text(),{data:g,error:null,response:p}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new wM(s)}:{data:null,error:s,response:s instanceof kM||s instanceof SM?s.context:void 0}}})}}var Rr={},yN={},gk={},Vv={},yk={},vk={},FW=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dp=FW();const BW=Dp.fetch,zW=Dp.fetch.bind(Dp),$W=Dp.Headers,VW=Dp.Request,UW=Dp.Response,Uv=Object.freeze(Object.defineProperty({__proto__:null,Headers:$W,Request:VW,Response:UW,default:zW,fetch:BW},Symbol.toStringTag,{value:"Module"})),HW=Y$(Uv);var xk={};Object.defineProperty(xk,"__esModule",{value:!0});let qW=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};xk.default=qW;var p4=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(vk,"__esModule",{value:!0});const GW=p4(HW),WW=p4(xk);let XW=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=GW.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l,c;let d=null,f=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((a=this.headers.get("Accept"))===null||a===void 0)&&a.includes("application/vnd.pgrst.plan+text"))?f=x:f=JSON.parse(x))}const w=(o=this.headers.get("Prefer"))===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&v&&v.length>1&&(p=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(f)&&(f.length>1?(d={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,p=null,m=406,y="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{const w=await i.text();try{d=JSON.parse(w),Array.isArray(d)&&i.status===404&&(f=[],d=null,m=200,y="OK")}catch{i.status===404&&w===""?(m=204,y="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,y="OK"),d&&this.shouldThrowOnError)throw new WW.default(d)}return{error:d,data:f,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};vk.default=XW;var KW=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yk,"__esModule",{value:!0});const YW=KW(vk);let QW=class extends YW.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${l};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};yk.default=QW;var JW=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vv,"__esModule",{value:!0});const ZW=JW(yk);let e7=class extends ZW.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Vv.default=e7;var t7=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gk,"__esModule",{value:!0});const bm=t7(Vv);let n7=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),r&&this.headers.append("Prefer",`count=${r}`),new bm.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new bm.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){var a;const o="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new bm.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}update(e,{count:t}={}){var r;const s="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new bm.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new bm.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};gk.default=n7;var m4=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(yN,"__esModule",{value:!0});const r7=m4(gk),s7=m4(Vv);let i7=class g4{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new r7.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new g4(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){var a;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(o=r?"HEAD":"GET",Object.entries(t).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{l.searchParams.append(f,p)})):(o="POST",c=t);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new s7.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}};yN.default=i7;var qp=Zn&&Zn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.PostgrestError=Rr.PostgrestBuilder=Rr.PostgrestTransformBuilder=Rr.PostgrestFilterBuilder=Rr.PostgrestQueryBuilder=Rr.PostgrestClient=void 0;const y4=qp(yN);Rr.PostgrestClient=y4.default;const v4=qp(gk);Rr.PostgrestQueryBuilder=v4.default;const x4=qp(Vv);Rr.PostgrestFilterBuilder=x4.default;const b4=qp(yk);Rr.PostgrestTransformBuilder=b4.default;const w4=qp(vk);Rr.PostgrestBuilder=w4.default;const S4=qp(xk);Rr.PostgrestError=S4.default;var a7=Rr.default={PostgrestClient:y4.default,PostgrestQueryBuilder:v4.default,PostgrestFilterBuilder:x4.default,PostgrestTransformBuilder:b4.default,PostgrestBuilder:w4.default,PostgrestError:S4.default};const{PostgrestClient:o7,PostgrestQueryBuilder:Qre,PostgrestFilterBuilder:Jre,PostgrestTransformBuilder:Zre,PostgrestBuilder:ese,PostgrestError:tse}=a7;class l7{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const c7="2.15.6",u7=`realtime-js/${c7}`,d7="1.0.0",qC=1e4,h7=1e3,f7=100;var vg;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(vg||(vg={}));var cn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(cn||(cn={}));var xi;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(xi||(xi={}));var GC;(function(n){n.websocket="websocket"})(GC||(GC={}));var Tc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Tc||(Tc={}));class p7{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=r.decode(e.slice(a,a+s));a=a+s;const l=r.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class k4{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(yt||(yt={}));const AM=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((i,a)=>(i[a]=m7(a,n,e,s),i),{}):{}},m7=(n,e,t,r)=>{const s=e.find(o=>o.name===n),i=s==null?void 0:s.type,a=t[n];return i&&!r.includes(i)?A4(i,a):WC(a)},A4=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return x7(e,t)}switch(n){case yt.bool:return g7(e);case yt.float4:case yt.float8:case yt.int2:case yt.int4:case yt.int8:case yt.numeric:case yt.oid:return y7(e);case yt.json:case yt.jsonb:return v7(e);case yt.timestamp:return b7(e);case yt.abstime:case yt.date:case yt.daterange:case yt.int4range:case yt.int8range:case yt.money:case yt.reltime:case yt.text:case yt.time:case yt.timestamptz:case yt.timetz:case yt.tsrange:case yt.tstzrange:return WC(e);default:return WC(e)}},WC=n=>n,g7=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},y7=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},v7=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},x7=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>A4(e,o))}return n},b7=n=>typeof n=="string"?n.replace(" ","T"):n,E4=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class KA{constructor(e,t,r={},s=qC){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var EM;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(EM||(EM={}));class xg{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=xg.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=xg.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=xg.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(c,d)=>{a[c]||(l[c]=d)}),this.map(a,(c,d)=>{const f=i[c];if(f){const p=d.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),y=d.filter(w=>m.indexOf(w.presence_ref)<0),g=f.filter(w=>p.indexOf(w.presence_ref)<0);y.length>0&&(o[c]=y),g.length>0&&(l[c]=g)}else o[c]=d}),this.syncDiff(i,{joins:o,leaves:l},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const d=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),d.length>0){const f=e[o].map(m=>m.presence_ref),p=d.filter(m=>f.indexOf(m.presence_ref)<0);e[o].unshift(...p)}r(o,d,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var CM;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(CM||(CM={}));var bg;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(bg||(bg={}));var Ca;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ca||(Ca={}));class vN{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new KA(this,xi.join,this.params,this.timeout),this.rejoinTimer=new k4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xi.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new xg(this),this.broadcastEndpointURL=E4(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==cn.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[bg.PRESENCE]&&this.bindings[bg.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},p={broadcast:a,presence:Object.assign(Object.assign({},o),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Ca.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ca.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(Ca.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<w;x++){const b=g[x],{filter:{event:C,schema:_,table:E,filter:N}}=b,j=m&&m[x];if(j&&j.event===C&&j.schema===_&&j.table===E&&j.filter===N)v.push(Object.assign(Object.assign({},b),{id:j.id}));else{this.unsubscribe(),this.state=cn.errored,e==null||e(Ca.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Ca.SUBSCRIBED);return}}).receive("error",m=>{this.state=cn.errored,e==null||e(Ca.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ca.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===cn.joined&&e===bg.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=cn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xi.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new KA(this,xi.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=cn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new KA(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>f7){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:d}=xi;if(r&&[o,l,c,d].indexOf(a)>=0&&r!==this._joinRef())return;let p=this._onMessage(a,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var y,g,w;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(p,r)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var y,g,w,v,x,b;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const C=m.id,_=(y=m.filter)===null||y===void 0?void 0:y.event;return C&&((g=t.ids)===null||g===void 0?void 0:g.includes(C))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const C=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return C==="*"||C===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:g,table:w,commit_timestamp:v,type:x,errors:b}=y;p=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:x,new:{},old:{},errors:b}),this._getPayloadRecords(y))}m.callback(p,r)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&vN.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xi.close,{},e)}_onError(e){this._on(xi.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=AM(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=AM(e.columns,e.old_record)),t}}const YA=()=>{},Mx={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},w7=[1e3,2e3,5e3,1e4],S7=1e4,k7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class A7{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qC,this.transport=null,this.heartbeatIntervalMs=Mx.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=YA,this.ref=0,this.reconnectTimer=null,this.logger=YA,this.conn=null,this.sendBuffer=[],this.serializer=new p7,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>jo(()=>Promise.resolve().then(()=>Uv),void 0).then(({default:o})=>o(...a)).catch(o=>{throw new Error(`Failed to load @supabase/node-fetch: ${o.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${GC.websocket}`,this.httpEndpoint=E4(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=l7.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:d7}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vg.connecting:return Tc.Connecting;case vg.open:return Tc.Open;case vg.closing:return Tc.Closing;default:return Tc.Closed}}isConnected(){return this.connectionState()===Tc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new vN(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(h7,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Mx.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,o=a?`(${a})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${s} ${o}`.trim(),i),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xi.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([k7],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:u7};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(xi.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new k4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mx.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,o,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:qC,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Mx.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(o=e==null?void 0:e.heartbeatCallback)!==null&&o!==void 0?o:YA,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:f=>w7[f-1]||S7,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(f,p)=>p(JSON.stringify(f)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class xN extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function fn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class E7 extends xN{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XC extends xN{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var C7=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const C4=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>jo(()=>Promise.resolve().then(()=>Uv),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},_7=()=>C7(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield jo(()=>Promise.resolve().then(()=>Uv),void 0)).Response:Response}),KC=n=>{if(Array.isArray(n))return n.map(t=>KC(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=KC(r)}),e},T7=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Nd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const QA=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),N7=(n,e,t)=>Nd(void 0,void 0,void 0,function*(){const r=yield _7();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(s=>{const i=n.status||500,a=(s==null?void 0:s.statusCode)||i+"";e(new E7(QA(s),i,a))}).catch(s=>{e(new XC(QA(s),s))}):e(new XC(QA(n),n))}),P7=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?s:(T7(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Hv(n,e,t,r,s,i){return Nd(this,void 0,void 0,function*(){return new Promise((a,o)=>{n(t,P7(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>N7(l,o,r))})})}function Iw(n,e,t,r){return Nd(this,void 0,void 0,function*(){return Hv(n,"GET",e,t,r)})}function Li(n,e,t,r,s){return Nd(this,void 0,void 0,function*(){return Hv(n,"POST",e,r,s,t)})}function YC(n,e,t,r,s){return Nd(this,void 0,void 0,function*(){return Hv(n,"PUT",e,r,s,t)})}function j7(n,e,t,r){return Nd(this,void 0,void 0,function*(){return Hv(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function _4(n,e,t,r,s){return Nd(this,void 0,void 0,function*(){return Hv(n,"DELETE",e,r,s,t)})}var nr=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const R7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_M={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class M7{constructor(e,t={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=C4(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,s){return nr(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},_M),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=yield(e=="PUT"?YC:Li)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(fn(i))return{data:null,error:i};throw i}})}upload(e,t,r){return nr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return nr(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:_M.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield YC(this.fetch,o.toString(),l,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(fn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return nr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const i=yield Li(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new xN("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}update(e,t,r){return nr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return nr(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}copy(e,t,r){return nr(this,void 0,void 0,function*(){try{return{data:{path:(yield Li(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return nr(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Li(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return nr(this,void 0,void 0,function*(){try{const s=yield Li(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}download(e,t){return nr(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield Iw(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(fn(o))return{data:null,error:o};throw o}})}info(e){return nr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Iw(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:KC(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}exists(e){return nr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield j7(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r)&&r instanceof XC){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${c}`)}}}remove(e){return nr(this,void 0,void 0,function*(){try{return{data:yield _4(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}list(e,t,r){return nr(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},R7),t),{prefix:e||""});return{data:yield Li(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(fn(s))return{data:null,error:s};throw s}})}listV2(e,t){return nr(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Li(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const I7="2.12.1",L7={"X-Client-Info":`storage-js/${I7}`};var Dd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};class D7{constructor(e,t={},r,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},L7),t),this.fetch=C4(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Dd(this,void 0,void 0,function*(){try{return{data:yield Iw(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(fn(e))return{data:null,error:e};throw e}})}getBucket(e){return Dd(this,void 0,void 0,function*(){try{return{data:yield Iw(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Dd(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Dd(this,void 0,void 0,function*(){try{return{data:yield YC(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(fn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Dd(this,void 0,void 0,function*(){try{return{data:yield Li(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Dd(this,void 0,void 0,function*(){try{return{data:yield _4(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(fn(t))return{data:null,error:t};throw t}})}}class O7 extends D7{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new M7(this.url,this.headers,e,this.fetch)}}const F7="2.30.0",B7={"X-Client-Info":`supabase-js/${F7}`};var QC={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Zn<"u"&&Zn,r=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(a){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof Zn<"u"&&Zn||{},l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(I){return I&&DataView.prototype.isPrototypeOf(I)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(I){return I&&d.indexOf(Object.prototype.toString.call(I))>-1};function p(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function m(I){return typeof I!="string"&&(I=String(I)),I}function y(I){var D={next:function(){var z=I.shift();return{done:z===void 0,value:z}}};return l.iterable&&(D[Symbol.iterator]=function(){return D}),D}function g(I){this.map={},I instanceof g?I.forEach(function(D,z){this.append(z,D)},this):Array.isArray(I)?I.forEach(function(D){if(D.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+D.length);this.append(D[0],D[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(D){this.append(D,I[D])},this)}g.prototype.append=function(I,D){I=p(I),D=m(D);var z=this.map[I];this.map[I]=z?z+", "+D:D},g.prototype.delete=function(I){delete this.map[p(I)]},g.prototype.get=function(I){return I=p(I),this.has(I)?this.map[I]:null},g.prototype.has=function(I){return this.map.hasOwnProperty(p(I))},g.prototype.set=function(I,D){this.map[p(I)]=m(D)},g.prototype.forEach=function(I,D){for(var z in this.map)this.map.hasOwnProperty(z)&&I.call(D,this.map[z],z,this)},g.prototype.keys=function(){var I=[];return this.forEach(function(D,z){I.push(z)}),y(I)},g.prototype.values=function(){var I=[];return this.forEach(function(D){I.push(D)}),y(I)},g.prototype.entries=function(){var I=[];return this.forEach(function(D,z){I.push([z,D])}),y(I)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function v(I){return new Promise(function(D,z){I.onload=function(){D(I.result)},I.onerror=function(){z(I.error)}})}function x(I){var D=new FileReader,z=v(D);return D.readAsArrayBuffer(I),z}function b(I){var D=new FileReader,z=v(D),V=/charset=([A-Za-z0-9_-]+)/.exec(I.type),q=V?V[1]:"utf-8";return D.readAsText(I,q),z}function C(I){for(var D=new Uint8Array(I),z=new Array(D.length),V=0;V<D.length;V++)z[V]=String.fromCharCode(D[V]);return z.join("")}function _(I){if(I.slice)return I.slice(0);var D=new Uint8Array(I.byteLength);return D.set(new Uint8Array(I)),D.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:l.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:l.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():l.arrayBuffer&&l.blob&&c(I)?(this._bodyArrayBuffer=_(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||f(I))?this._bodyArrayBuffer=_(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=w(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=w(this);if(I)return I;if(this._bodyBlob)return b(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var N=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function j(I){var D=I.toUpperCase();return N.indexOf(D)>-1?D:I}function M(I,D){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');D=D||{};var z=D.body;if(I instanceof M){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,D.headers||(this.headers=new g(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!z&&I._bodyInit!=null&&(z=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new g(D.headers)),this.method=j(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal||function(){if("AbortController"in o){var P=new AbortController;return P.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(z),(this.method==="GET"||this.method==="HEAD")&&(D.cache==="no-store"||D.cache==="no-cache")){var V=/([?&])_=[^&]*/;if(V.test(this.url))this.url=this.url.replace(V,"$1_="+new Date().getTime());else{var q=/\?/;this.url+=(q.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function O(I){var D=new FormData;return I.trim().split("&").forEach(function(z){if(z){var V=z.split("="),q=V.shift().replace(/\+/g," "),P=V.join("=").replace(/\+/g," ");D.append(decodeURIComponent(q),decodeURIComponent(P))}}),D}function L(I){var D=new g,z=I.replace(/\r?\n[\t ]+/g," ");return z.split("\r").map(function(V){return V.indexOf(`
`)===0?V.substr(1,V.length):V}).forEach(function(V){var q=V.split(":"),P=q.shift().trim();if(P){var Y=q.join(":").trim();try{D.append(P,Y)}catch(K){console.warn("Response "+K.message)}}}),D}E.call(M.prototype);function F(I,D){if(!(this instanceof F))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=D.statusText===void 0?"":""+D.statusText,this.headers=new g(D.headers),this.url=D.url||"",this._initBody(I)}E.call(F.prototype),F.prototype.clone=function(){return new F(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},F.error=function(){var I=new F(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var U=[301,302,303,307,308];F.redirect=function(I,D){if(U.indexOf(D)===-1)throw new RangeError("Invalid status code");return new F(null,{status:D,headers:{location:I}})},a.DOMException=o.DOMException;try{new a.DOMException}catch{a.DOMException=function(D,z){this.message=D,this.name=z;var V=Error(D);this.stack=V.stack},a.DOMException.prototype=Object.create(Error.prototype),a.DOMException.prototype.constructor=a.DOMException}function B(I,D){return new Promise(function(z,V){var q=new M(I,D);if(q.signal&&q.signal.aborted)return V(new a.DOMException("Aborted","AbortError"));var P=new XMLHttpRequest;function Y(){P.abort()}P.onload=function(){var ie={statusText:P.statusText,headers:L(P.getAllResponseHeaders()||"")};q.url.indexOf("file://")===0&&(P.status<200||P.status>599)?ie.status=200:ie.status=P.status,ie.url="responseURL"in P?P.responseURL:ie.headers.get("X-Request-URL");var ke="response"in P?P.response:P.responseText;setTimeout(function(){z(new F(ke,ie))},0)},P.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},P.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},P.onabort=function(){setTimeout(function(){V(new a.DOMException("Aborted","AbortError"))},0)};function K(ie){try{return ie===""&&o.location.href?o.location.href:ie}catch{return ie}}if(P.open(q.method,K(q.url),!0),q.credentials==="include"?P.withCredentials=!0:q.credentials==="omit"&&(P.withCredentials=!1),"responseType"in P&&(l.blob?P.responseType="blob":l.arrayBuffer&&(P.responseType="arraybuffer")),D&&typeof D.headers=="object"&&!(D.headers instanceof g||o.Headers&&D.headers instanceof o.Headers)){var R=[];Object.getOwnPropertyNames(D.headers).forEach(function(ie){R.push(p(ie)),P.setRequestHeader(ie,m(D.headers[ie]))}),q.headers.forEach(function(ie,ke){R.indexOf(ke)===-1&&P.setRequestHeader(ke,ie)})}else q.headers.forEach(function(ie,ke){P.setRequestHeader(ke,ie)});q.signal&&(q.signal.addEventListener("abort",Y),P.onreadystatechange=function(){P.readyState===4&&q.signal.removeEventListener("abort",Y)}),P.send(typeof q._bodyInit>"u"?null:q._bodyInit)})}return B.polyfill=!0,o.fetch||(o.fetch=B,o.Headers=g,o.Request=M,o.Response=F),a.Headers=g,a.Request=M,a.Response=F,a.fetch=B,Object.defineProperty(a,"__esModule",{value:!0}),a})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=t.fetch?t:r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,n.exports=e})(QC,QC.exports);var bN=QC.exports;const T4=No(bN),z7=ML({__proto__:null,default:T4},[bN]);var $7=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const V7=n=>{let e;return n?e=n:typeof fetch>"u"?e=T4:e=fetch,(...t)=>e(...t)},U7=()=>typeof Headers>"u"?bN.Headers:Headers,H7=(n,e,t)=>{const r=V7(t),s=U7();return(i,a)=>$7(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:n;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},a),{headers:c}))})};function q7(n){return n.replace(/\/$/,"")}function G7(n,e){const{db:t,auth:r,realtime:s,global:i}=n,{db:a,auth:o,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),r),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i)}}function W7(n){return Math.round(Date.now()/1e3)+n}function X7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const wa=()=>typeof document<"u",yc={tested:!1,writable:!1},vb=()=>{if(!wa())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yc.tested)return yc.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),yc.tested=!0,yc.writable=!0}catch{yc.tested=!0,yc.writable=!1}return yc.writable};function xr(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),s=r.exec(e);return s?s[2]?decodeURIComponent(s[2].replace(/\+/g," ")):"":null}const N4=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await jo(()=>Promise.resolve().then(()=>z7),void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},K7=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",wm=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Ix=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},JA=async(n,e)=>{await n.removeItem(e)};function Y7(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,s,i,a,o,l,c,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)a=e.indexOf(n.charAt(d++)),o=e.indexOf(n.charAt(d++)),l=e.indexOf(n.charAt(d++)),c=e.indexOf(n.charAt(d++)),r=a<<2|o>>4,s=(o&15)<<4|l>>2,i=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),c!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class bk{constructor(){this.promise=new bk.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}bk.promiseConstructor=Promise;function TM(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(Y7(r))}function Q7(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function J7(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function Z7(n){return("0"+n.toString(16)).substr(-2)}function Lx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,Z7).join("")}async function eX(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function tX(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Dx(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await eX(n);return tX(e)}const nX="__stack_guard__",rX="__",sX=/__stack_guard__([a-zA-Z0-9_-]+)__/;let NM=!1,wN;function JC(n){var e,t;wN();let r;try{throw new Error}catch(i){r=i}const s=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let i=0;i<s.length;i+=1){const o=s[i].match(sX);if(o&&o[1]===n)return!0}return!1}async function ZC(n,e){await wN();const t=`${nX}${n}${rX}`;return await{[t]:async()=>await e()}[t]()}wN=async()=>{NM||(NM=!0,await ZC("ENV_CHECK",async()=>{const n=JC("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class SN extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Je(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class iX extends SN{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function aX(n){return Je(n)&&n.name==="AuthApiError"}class P4 extends SN{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Gp extends SN{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Od extends Gp{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class ZA extends Gp{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Ox extends Gp{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class va extends Gp{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class eE extends Gp{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class e_ extends Gp{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function PM(n){return Je(n)&&n.name==="AuthRetryableFetchError"}var oX=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const Dm=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),lX=[502,503,504];async function jM(n){if(!K7(n))throw new e_(Dm(n),0);if(lX.includes(n.status))throw new e_(Dm(n),n.status);let e;try{e=await n.json()}catch(t){throw new P4(Dm(t),t)}throw new iX(Dm(e),n.status||500)}const cX=(n,e,t,r)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function nt(n,e,t,r){var s;const i=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await uX(n,e,t+o,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function uX(n,e,t,r,s,i){const a=cX(e,r,s,i);let o;try{o=await n(t,a)}catch(l){throw console.error(l),new e_(Dm(l),0)}if(o.ok||await jM(o),r!=null&&r.noResolveJson)return o;try{return await o.json()}catch(l){await jM(l)}}function Lo(n){var e;let t=null;pX(n)&&(t=Object.assign({},n),t.expires_at=W7(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Nc(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function dX(n){return{data:n,error:null}}function hX(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=oX(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function fX(n){return n}function pX(n){return n.access_token&&n.refresh_token&&n.expires_in}var mX=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class gX{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=N4(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await nt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Je(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await nt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Nc})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=mX(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await nt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:hX,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Je(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await nt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Nc})}catch(t){if(Je(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},d=await nt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:fX});if(d.error)throw d.error;const f=await d.json(),p=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);c[`${w}Page`]=g}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Je(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await nt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Nc})}catch(t){if(Je(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await nt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Nc})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Nc})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await nt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(Je(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await nt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Je(t))return{data:null,error:t};throw t}}}const yX="2.43.1",vX="http://localhost:9999",xX="supabase.auth.token",bX={"X-Client-Info":`gotrue-js/${yX}`},RM=10,MM={getItem:n=>vb()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{vb()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{vb()&&globalThis.localStorage.removeItem(n)}};function wX(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}wX();const SX={url:vX,storageKey:xX,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:bX,flowType:"implicit",debug:!1},Fx=30*1e3,IM=3;class Gg{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=Gg.nextInstanceID,Gg.nextInstanceID+=1,this.instanceID>0&&wa()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},SX),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||MM,this.admin=new gX({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=N4(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===MM&&!vb()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),wa()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=ZC("_initialize",async()=>{try{const e=wa()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:s,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",s,"redirect type",i),await this._saveSession(s),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",s):await this._notifyAllSubscribers("SIGNED_IN",s)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Je(e)?{error:e}:{error:new P4("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,s;try{await this._removeSession();let i;if("email"in e){const{email:d,password:f,options:p}=e;let m=null,y=null;if(this.flowType==="pkce"){const g=Lx();await wm(this.storage,`${this.storageKey}-code-verifier`,g),m=await Dx(g),y=g===m?"plain":"s256"}i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:Lo})}else if("phone"in e){const{phone:d,password:f,options:p}=e;i=await nt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(s=p==null?void 0:p.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Lo})}else throw new Ox("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Je(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Lo})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await nt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Lo})}else throw new Ox("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ZA}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:s})}catch(t){if(Je(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await Ix(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:s}=await nt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Lo});return await JA(this.storage,`${this.storageKey}-code-verifier`),s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new ZA}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:s})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,o=await nt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Lo}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new ZA}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Je(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let c=null,d=null;if(this.flowType==="pkce"){const p=Lx();await wm(this.storage,`${this.storageKey}-code-verifier`,p),c=await Dx(p),d=p===c?"plain":"s256"}const{error:f}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:d}=await nt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Ox("You must provide either an email or phone number.")}catch(o){if(Je(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:s,error:i}=await nt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:Lo});if(i)throw i;if(!s)throw new Error("An error occurred on token verification.");const a=s.session,o=s.user;return a!=null&&a.access_token&&(await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:o,session:a},error:null}}catch(s){if(Je(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{return await this._removeSession(),await nt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:dX})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Od;const{error:s}=await nt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Je(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await nt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:o}=await nt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Ox("You must provide either an email or phone number and a type")}catch(t){if(Je(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await ZC("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!JC("_useSession"))throw new Error("Please use #_useSession()");JC("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const i=await Ix(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,s;if(!e){const{data:i,error:a}=t;if(a)throw a;e=(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0}return await nt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Nc})})}catch(t){if(Je(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Od;const a=s.session,{data:o,error:l}=await nt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:a.access_token,xform:Nc});if(l)throw l;return a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(Je(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return TM(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Od;const t=Date.now()/1e3;let r=t,s=!0,i=null;const a=TM(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this.getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Je(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Od;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Je(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!wa())throw new va("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new va("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new eE("Not a valid PKCE flow url.");if(e){const w=xr("code");if(!w)throw new eE("No code detected.");const{data:v,error:x}=await this.exchangeCodeForSession(w);if(x)throw x;if(!v.session)throw new eE("No session detected.");let b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:v.session,redirectType:null},error:null}}const t=xr("error_description");if(t){const w=xr("error_code");if(!w)throw new va("No error_code detected.");const v=xr("error");throw v?new va(t,{error:v,code:w}):new va("No error detected.")}const r=xr("provider_token"),s=xr("provider_refresh_token"),i=xr("access_token");if(!i)throw new va("No access_token detected.");const a=xr("expires_in");if(!a)throw new va("No expires_in detected.");const o=xr("refresh_token");if(!o)throw new va("No refresh_token detected.");const l=xr("token_type");if(!l)throw new va("No token_type detected.");const d=Math.round(Date.now()/1e3)+parseInt(a),{data:f,error:p}=await this.getUser(i);if(p)throw p;const m=f.user,y={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:parseInt(a),expires_at:d,refresh_token:o,token_type:l,user:m},g=xr("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:y,redirectType:g},error:null}}catch(t){if(Je(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return wa()&&(!!xr("access_token")||!!xr("error_description"))}async _isPKCEFlow(){const e=await Ix(this.storage,`${this.storageKey}-code-verifier`);return!!xr("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(aX(o)&&(o.status===404||o.status===401)))return{error:o}}return e!=="others"&&(await this._removeSession(),await JA(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=X7(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;if(this.flowType==="pkce"){const i=Lx();await wm(this.storage,`${this.storageKey}-code-verifier`,i),r=await Dx(i),s=i===r?"plain":"s256"}try{return await nt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Je(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await J7(async s=>(await Q7(s*200),this._debug(t,"refreshing attempt",s),await nt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lo})),(s,i,a)=>a&&a.error&&PM(a.error)&&Date.now()+(s+1)*200-r<Fx)}catch(r){if(this._debug(t,"error",r),Je(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),wa()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await Ix(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<s+RM;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${RM}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:a}=await this._callRefreshToken(r.refresh_token);a&&(console.error(a),PM(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Od;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new bk;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Od;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),Je(i)){const a={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),wm(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await JA(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wa()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Fx);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Fx);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Fx}ms, refresh threshold is ${IM} ticks`),s<=IM&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wa()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const s=Lx();await wm(this.storage,`${this.storageKey}-code-verifier`,s);const i=await Dx(s),a=s===i?"plain":"s256";this._debug("PKCE","code verifier",`${s.substring(0,5)}...`,"code challenge",i,"method",a);const o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await nt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Je(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:l}=await nt(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((s=o==null?void 0:o.totp)===null||s===void 0)&&s.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Je(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(Je(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await nt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(Je(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],s=r.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:r,totp:s},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}})}}Gg.nextInstanceID=0;class kX extends Gg{constructor(e){super(e)}}var AX=globalThis&&globalThis.__awaiter||function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{c(r.next(d))}catch(f){a(f)}}function l(d){try{c(r.throw(d))}catch(f){a(f)}}function c(d){d.done?i(d.value):s(d.value).then(o,l)}c((r=r.apply(n,e||[])).next())})};const EX={headers:B7},CX={schema:"public"},_X={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},TX={};class NX{constructor(e,t,r){var s,i,a,o,l,c,d,f;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const p=q7(e);this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,this.functionsUrl=`${p}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:CX,realtime:TX,auth:Object.assign(Object.assign({},_X),{storageKey:m}),global:EX},g=G7(r??{},y);this.storageKey=(i=(s=g.auth)===null||s===void 0?void 0:s.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=(a=g.global)===null||a===void 0?void 0:a.headers)!==null&&o!==void 0?o:{},this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,(c=g.global)===null||c===void 0?void 0:c.fetch),this.fetch=H7(t,this._getAccessToken.bind(this),(d=g.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new o7(`${p}/rest/v1`,{headers:this.headers,schema:(f=g.db)===null||f===void 0?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new OW(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new O7(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return AX(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kX({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,debug:o,fetch:c})}_initRealtimeClient(e){return new A7(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const PX=(n,e,t)=>new NX(n,e,t),vc=new Map,LM={type:"memory",getItem:n=>vc.has(n)?vc.get(n):null,setItem:(n,e)=>{vc.set(n,e)},removeItem:n=>{vc.delete(n)},clear:()=>vc.clear(),key:n=>Array.from(vc.keys())[n]??null,get length(){return vc.size}},DM={type:"cookie",getItem:n=>{if(typeof document>"u")return null;const e=document.cookie.match(new RegExp(`(?:^|; )${n}=([^;]*)`));return e?decodeURIComponent(e[1]):null},setItem:(n,e)=>{if(typeof document>"u")return;const t=encodeURIComponent(e);document.cookie=`${n}=${t}; path=/; SameSite=Lax`},removeItem:n=>{typeof document>"u"||(document.cookie=`${n}=; path=/; max-age=0; SameSite=Lax`)},clear:()=>{if(typeof document>"u")return;document.cookie.split(";").forEach(e=>{const[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; max-age=0; SameSite=Lax`})},key:()=>null,get length(){return typeof document>"u"||!document.cookie?0:document.cookie.split(";").length}},OM=n=>{if(!n)return null;try{const e=`safe-storage-probe-${Math.random().toString(36).slice(2)}`;n.setItem(e,"ok");const t=n.getItem(e)==="ok";return n.removeItem(e),t?n:null}catch{return null}},jX=()=>{if(typeof window>"u")return{storage:LM,type:"memory"};const n=[{type:"local",ref:window.localStorage},{type:"session",ref:window.sessionStorage}];for(const t of n){const r=OM(t.ref);if(r)return{storage:r,type:t.type}}return OM(DM)?{storage:DM,type:"cookie"}:{storage:LM,type:"memory"}},j4=jX(),wk=j4.storage,RX=j4.type,kN=n=>{try{return wk.getItem(n)}catch{return null}},Wg=(n,e)=>{try{return wk.setItem(n,e),!0}catch{return!1}},R4=n=>{try{wk.removeItem(n)}catch{}},MX="https://ytubybkoucltwnselbhc.supabase.co",IX="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo",wt=PX(MX,IX,{auth:{storage:wk,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),M4=S.createContext(void 0),LX=({children:n})=>{const{toast:e}=W2(),[t,r]=S.useState(null),[s,i]=S.useState(null),[a,o]=S.useState(!0),l=S.useCallback(async m=>{i(m),r((m==null?void 0:m.user)??null),o(!1)},[]);S.useEffect(()=>{if(typeof window>"u")return;let m=!1;return(async()=>{const g=new URL(window.location.href),w=new URLSearchParams(window.location.hash.replace(/^#/,"")),v=g.searchParams.get("code"),x=w.get("access_token"),b=w.get("refresh_token"),C=g.searchParams.get("error_description"),_=window.location.hash.includes("access_token")||window.location.hash.includes("refresh_token"),E=`${g.origin}${g.pathname}${_?"":g.hash}`,N=()=>{window.history.replaceState({},document.title,E)};if(C){e({variant:"destructive",title:"No pudimos iniciar sesin",description:C||"El enlace no es vlido. Intenta abrirlo en el navegador nativo."}),N();return}if(v){const{data:j,error:M}=await wt.auth.exchangeCodeForSession(v);m||(M?e({variant:"destructive",title:"No pudimos completar el login",description:M.message||"Intenta abrir el enlace en el navegador por defecto."}):l(j.session),N());return}if(x&&b){const{data:j,error:M}=await wt.auth.setSession({access_token:x,refresh_token:b});m||(M?e({variant:"destructive",title:"No pudimos completar el login",description:M.message||"Intenta abrir el enlace en el navegador por defecto."}):l(j.session),N())}})(),()=>{m=!0}},[l,e]),S.useEffect(()=>{(async()=>{const{data:{session:g}}=await wt.auth.getSession();l(g)})();const{data:{subscription:y}}=wt.auth.onAuthStateChange(async(g,w)=>{l(w)});return()=>y.unsubscribe()},[l]);const c=S.useCallback(async(m,y,g)=>{const{error:w}=await wt.auth.signUp({email:m,password:y,options:g});return w&&e({variant:"destructive",title:"Sign up Failed",description:w.message||"Something went wrong"}),{error:w}},[e]),d=S.useCallback(async(m,y)=>{const{error:g}=await wt.auth.signInWithPassword({email:m,password:y});return g&&e({variant:"destructive",title:"Sign in Failed",description:g.message||"Something went wrong"}),{error:g}},[e]),f=S.useCallback(async()=>{const{error:m}=await wt.auth.signOut();return m&&e({variant:"destructive",title:"Sign out Failed",description:m.message||"Something went wrong"}),{error:m}},[e]),p=S.useMemo(()=>({user:t,session:s,loading:a,signUp:c,signIn:d,signOut:f}),[t,s,a,c,d,f]);return S.useEffect(()=>{typeof window>"u"||s&&kN("gatoencerrado:resume-contribution")==="true"&&(window.dispatchEvent(new CustomEvent("gatoencerrado:resume-contribution")),R4("gatoencerrado:resume-contribution"))},[s]),h.jsx(M4.Provider,{value:p,children:n})},Pd=()=>{const n=S.useContext(M4);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},FM={hidden:{opacity:0},visible:{opacity:1}},DX={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1}},Sk=({onClose:n})=>{const[e,t]=S.useState(""),[r,s]=S.useState(!1),[i,a]=S.useState(null),o=RX==="memory",l=S.useMemo(()=>{if(typeof window>"u")return;const{origin:f,pathname:p,hash:m}=window.location,y=m&&!m.includes("access_token")?m:"";return`${f}${p}${y}`},[]),c=S.useCallback(async f=>{if(f.preventDefault(),r)return;if(o){a({type:"error",text:"Tu navegador mvil est bloqueando almacenamiento. brelo en el navegador por defecto o desactiva el modo privado para iniciar sesin."});return}const p=e.trim();if(!p){a({type:"error",text:"Ingresa tu correo para enviarte el enlace mgico."});return}s(!0),a(null),Wg("gatoencerrado:resume-contribution","true");const{error:m}=await wt.auth.signInWithOtp({email:p,options:{emailRedirectTo:l}});m?a({type:"error",text:m.message||"No pudimos enviar el enlace."}):(a({type:"success",text:"Te enviamos un link mgico. Revisa tu correo para continuar."}),t("")),s(!1)},[e,r,l,o]),d=S.useCallback(async()=>{if(a(null),o){a({type:"error",text:"No pudimos iniciar sesin porque el navegador bloquea cookies/almacenamiento. Prueba abrir en Safari/Chrome fuera de modo privado."});return}Wg("gatoencerrado:resume-contribution","true");const{error:f}=await wt.auth.signInWithOAuth({provider:"google",options:{redirectTo:l}});if(f){a({type:"error",text:f.message||"No pudimos iniciar sesin con Google."});return}n==null||n()},[n,l,o]);return S.useEffect(()=>{const f=p=>{p.key==="Escape"&&(n==null||n())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[n]),h.jsxs(ne.div,{className:"fixed inset-0 z-[110] flex items-center justify-center px-4 py-6",initial:"hidden",animate:"visible",exit:"hidden",variants:FM,children:[h.jsx(ne.button,{type:"button",className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n,"aria-label":"Cerrar overlay de autenticacin",variants:FM}),h.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"tracking-overlay-title","aria-describedby":"tracking-overlay-desc",className:"relative z-10 w-full max-w-md transform rounded-3xl border border-white/10 bg-[#0a0019]/90 p-6 shadow-2xl backdrop-blur-xl",initial:"hidden",animate:"visible",exit:"hidden",variants:DX,children:[h.jsx("button",{type:"button",onClick:n,className:"absolute top-3 right-3 rounded-full border border-white/15 px-2 py-1 text-sm text-slate-400 hover:text-slate-100","aria-label":"Cerrar overlay",children:""}),h.jsxs("div",{className:"space-y-4 pt-2",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500/80",children:"Seguimiento"}),h.jsx("h3",{id:"tracking-overlay-title",className:"font-display text-2xl text-slate-50",children:"Inicia sesin para continuar el dilogo"})]}),h.jsx("p",{id:"tracking-overlay-desc",className:"text-sm text-slate-300 leading-relaxed",children:"Queremos asegurarnos de que puedas retomar tu experiencia justo donde la dejaste. Esto no genera ningn cargo ni suscripcin."}),h.jsx("button",{type:"button",onClick:d,className:"flex w-full items-center justify-center rounded-full border border-white/20 bg-white/10 px-4 py-3 text-sm font-semibold text-white transition hover:border-white/40 hover:bg-white/15",children:"Iniciar sesin con Google"}),o?h.jsx("p",{className:"text-xs text-amber-300",children:"Tu navegador est bloqueando almacenamiento; abre el sitio en Safari/Chrome (fuera de modo privado) para completar el login."}):null,h.jsxs("form",{onSubmit:c,className:"space-y-3",children:[h.jsx("label",{htmlFor:"tracking-email",className:"sr-only",children:"Correo electrnico"}),h.jsx("input",{id:"tracking-email",type:"email",value:e,onChange:f=>t(f.target.value),placeholder:"nombre@correo.com",className:"w-full rounded-2xl border border-white/20 bg-black/30 px-4 py-3 text-sm text-slate-100 placeholder:text-slate-400 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",required:!0}),h.jsx("button",{type:"submit",disabled:r,className:"w-full rounded-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 px-4 py-3 text-sm font-semibold text-white transition hover:from-purple-500 hover:to-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",children:r?"Enviando...":"Enviar Magic Link"})]}),i?h.jsx("p",{className:`text-xs ${i.type==="error"?"text-rose-300":"text-emerald-300"}`,children:i.text}):null,h.jsx("p",{className:"text-xs text-slate-500",children:"Tu experienica no se perder. Continuars donde te quedaste."})]})]})]})},OX=()=>{var b,C;const[n,e]=S.useState(!1),[t,r]=S.useState(!1),[s,i]=S.useState(!1),{user:a,signOut:o}=Pd(),{toast:l}=W2(),c=((b=a==null?void 0:a.user_metadata)==null?void 0:b.alias)||((C=a==null?void 0:a.user_metadata)==null?void 0:C.full_name)||(a!=null&&a.email?a.email.split("@")[0]:""),d=c?c.trim().split(/\s+/)[0]:"",f=a?`Hola ${d||"gato"}`:"",p=a?"Cerrar sesin":"Iniciar sesin",m=a?"bg-emerald-400":"bg-slate-600",y=S.useCallback(()=>i(!1),[]),g=S.useCallback(()=>i(!0),[]),w=S.useCallback(async()=>{if(!a){i(!0);return}const{error:_}=await o();l(_?{description:_.message||"No pudimos cerrar sesin. Intenta ms tarde."}:{description:"Sesin cerrada correctamente."})},[o,l,a]);S.useEffect(()=>{const _=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]),S.useEffect(()=>{if(typeof window>"u")return;const _=()=>i(!0);return window.addEventListener("open-login-modal",_),()=>window.removeEventListener("open-login-modal",_)},[i]);const v=[{name:"Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"},{name:"Textos",href:"#dialogo-critico"},{name:"Miniversos",href:"#transmedia"}],x=_=>{e(!1);const E=document.querySelector(_);E&&E.scrollIntoView({behavior:"smooth"})};return h.jsxs(ne.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-black/60 backdrop-blur-lg border-b border-slate-100/10":"bg-transparent"}`,children:[h.jsxs("nav",{className:"container mx-auto px-6 py-3",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(ne.button,{type:"button",whileHover:{scale:1.05,textShadow:"0 0 8px rgba(233, 213, 255, 0.5)"},className:"flex items-center gap-3 cursor-pointer text-white",onClick:()=>x("#hero"),children:[h.jsx("span",{className:"font-display text-2xl font-bold text-gradient",children:"#GatoEncerrado"}),h.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${m}`}),a?h.jsx("span",{className:"text-sm md:text-base font-semibold tracking-tight text-white",children:f}):null]}),h.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[v.map(_=>h.jsx(ne.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>x(_.href),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md",children:_.name},_.name)),h.jsx(ne.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>x("#contact"),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md ml-4 border border-purple-300/30 hover:bg-purple-500/20",children:"Contacto"})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(we,{variant:"ghost",size:"icon",className:"md:hidden text-slate-200",onClick:()=>e(!n),children:n?h.jsx(ok,{size:24}):h.jsx(S8,{size:24})}),h.jsx("button",{onClick:a?w:g,className:"hidden md:inline text-sm font-semibold text-slate-100",children:p})]})]}),n&&h.jsxs(ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-4 bg-black/80 backdrop-blur-md rounded-lg p-4 border border-slate-100/10",children:[v.map(_=>h.jsx("button",{onClick:()=>x(_.href),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors",children:_.name},_.name)),h.jsx("button",{onClick:()=>x("#contact"),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2 border-t border-slate-100/10",children:"Contacto"}),h.jsx("button",{onClick:a?w:g,className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2",children:p})]})]}),s?h.jsx(Sk,{onClose:y}):null]})},BM=["#f472b6","#a855f7","#facc15","#34d399"],FX=({seed:n})=>{const e=S.useMemo(()=>Array.from({length:12},(t,r)=>({left:Math.random()*100,delay:Math.random()*.2,color:BM[r%BM.length]})),[n]);return h.jsx("div",{className:"confetti-layer","aria-hidden":"true",children:e.map((t,r)=>h.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${Math.random()*20}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${r}`))})},BX=()=>{const[n,e]=S.useState([]),t=S.useCallback(()=>{const r=Date.now();e(s=>[...s,r]),setTimeout(()=>{e(s=>s.filter(i=>i!==r))},1100)},[]);return{bursts:n,fireConfetti:t}},zX="/assets/logoapp.png",I4=[{id:"taza-250",title:"Taza AR",price:"$250",helper:"Taza especial con activacin AR. Disponible el da del evento."},{id:"novela-400",title:"Novela Mi Gato Encerrado",price:"$400",helper:"Primera edicin con QR secreto."},{id:"combo-900",title:"Combo: novela + 2 tazas",price:"$900",helper:'Paquete completo disponible solo el da del evento (incluye suscripcin al Universo Transmedia si lo solicitas en "Notas").'}];I4.reduce((n,e)=>(n[e.id]=`${e.title}  ${e.price}`,n),{});const zM={fullName:"",email:"",city:"",notes:"",packages:[]},$X={hidden:{opacity:0},visible:{opacity:.85}},VX={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},AN=({open:n,onClose:e})=>{const[t,r]=S.useState(zM),[s,i]=S.useState("idle"),[a,o]=S.useState(""),[l,c]=S.useState(""),[d,f]=S.useState(!1),{bursts:p,fireConfetti:m}=BX(),[y,g]=S.useState(!1);S.useEffect(()=>{n&&(r(zM),i("idle"),o(""),c(""),f(!1))},[n]),S.useEffect(()=>{if(!n)return;const E=N=>N.key==="Escape"&&(e==null?void 0:e());return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[n,e]);const w=S.useCallback(E=>{const{name:N,value:j}=E.target;r(M=>({...M,[N]:j}))},[]),v=S.useCallback(E=>{r(N=>{const j=N.packages.includes(E);return{...N,packages:j?N.packages.filter(M=>M!==E):[...N.packages,E]}})},[]),x=S.useCallback(()=>!t.fullName.trim()||!t.email.trim()?"Por favor completa tu nombre y correo electrnico.":t.packages.length===0?"Selecciona al menos un artculo para apartar.":null,[t]),b=S.useCallback(async E=>{if(E.preventDefault(),s==="loading")return;const N=x();if(N){Fe({description:N});return}i("loading"),g(!0),o(""),c("");try{const j={fullName:t.fullName.trim(),email:t.email.trim().toLowerCase(),city:t.city.trim()||null,notes:t.notes.trim()||"",packages:t.packages,channel:"landing",event:"cecutt_28dic"},{error:M}=await wt.functions.invoke("send-reserve-confirmation",{body:j});if(M)throw M;m(),i("success"),Fe({description:"Apartado recibido! Revisa tu correo con los siguientes pasos."})}catch{i("error"),o("Ocurri un error inesperado. Intenta ms tarde.")}finally{g(!1)}},[t,s,m,x]),C=S.useCallback(async E=>{var j;if((j=E.preventDefault)==null||j.call(E),d||s==="loading")return;const N=x();if(N){Fe({description:N});return}c(""),f(!0);try{const M={full_name:t.fullName.trim(),email:t.email.trim().toLowerCase(),city:t.city.trim()||null,notes:t.notes.trim()||"",packages:t.packages,channel:"landing",event:"funcion-2025-12-28"},{data:O,error:L}=await wt.functions.invoke("create-checkout-session",{body:M});if(L||!(O!=null&&O.url))throw L||new Error("Falta la URL de pago.");window.location.href=O.url}catch(M){console.error("[ReserveModal] Checkout error:",M),c("No pudimos iniciar el pago. Intenta nuevamente.")}finally{f(!1)}},[t,d,s,x]),_=S.useCallback(()=>{s!=="loading"&&(e==null||e())},[s,e]);return h.jsx(fa,{children:n&&h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-start justify-center px-4 py-6 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[h.jsx(ne.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:$X,onClick:_}),h.jsxs(ne.div,{role:"dialog","aria-modal":"true",variants:VX,className:"relative z-10 w-full max-w-3xl rounded-3xl border border-white/10 bg-slate-950/95 p-6 sm:p-10 shadow-2xl max-h-[92vh] overflow-y-auto",children:[p.map(E=>h.jsx(FX,{seed:E},E)),h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-8",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("img",{src:zX,alt:"#GatoEncerrado",className:"h-12 w-auto object-contain rounded-full border border-white/20 bg-white/5 p-1 shadow-lg"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"28 de diciembre  CECUT"}),h.jsx("h2",{className:"font-display text-3xl text-slate-50",children:"Aparta tus artculos de #GatoEncerrado"}),h.jsx("p",{className:"text-xs text-slate-400/80 mt-1",children:"Estos productos son edicin especial y se entregan nicamente en la mesa de merch el da del evento."})]})]}),h.jsx("button",{onClick:_,className:"self-end text-slate-400 hover:text-white transition",children:""})]}),h.jsxs("div",{className:"mb-6 rounded-xl border border-yellow-400/20 bg-yellow-400/10 p-4 text-xs text-yellow-200",children:["Este formulario ",h.jsx("strong",{children:"no es para comprar boletos"}),". Aqu solo apartas artculos de merch (taza, novela o combo). Los boletos se adquieren directamente en taquilla CECUT."]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"space-y-5",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-display text-lg text-slate-100 mb-1",children:"Paquetes disponibles"}),h.jsx("p",{className:"text-xs text-slate-400/80",children:"Marca lo que quieras apartar. Te enviaremos tu lnea de reservaciones y un enlace de pago seguro (Stripe)."})]}),h.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:I4.map(E=>{const N=t.packages.includes(E.id),j=E.id==="combo-900",M={"taza-250":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/TazaPreventa.jpg","novela-400":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/novela_mesa.jpg","combo-900":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/NovelaTazaCombo.jpg"},O=j?"h-48":"h-32";return h.jsxs("label",{className:`relative block rounded-2xl border ${N?"border-purple-400/70 shadow-[0_12px_35px_rgba(126,34,206,0.35)]":"border-white/10"} bg-gradient-to-br from-slate-900/80 to-black/60 p-4 hover:border-purple-400/40 transition ${j?"sm:col-span-2":""}`,children:[h.jsx("input",{type:"checkbox",checked:N,onChange:()=>v(E.id),className:"sr-only","aria-hidden":"true"}),h.jsx("div",{"aria-hidden":"true",className:`absolute inset-0 flex items-center justify-center pointer-events-none transition duration-300 ${N?"scale-100 opacity-100":"scale-0 opacity-0"}`,children:h.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-white/80 backdrop-blur-2xl shadow-[0_15px_35px_rgba(0,0,0,0.45)]",children:h.jsx(V2,{size:48,className:"text-purple-500"})})}),h.jsx("div",{className:`mb-3 w-full ${O} rounded-xl overflow-hidden border border-white/5`,children:h.jsx("img",{src:M[E.id],alt:E.title,className:"w-full h-full object-cover",loading:"lazy"})}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("p",{className:"font-semibold text-slate-100",children:[E.title," ",h.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",E.price]})]}),h.jsx("p",{className:"text-xs text-slate-400",children:E.helper})]})]},E.id)})})]}),h.jsxs("form",{className:"space-y-5",onSubmit:b,children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),h.jsx("input",{name:"fullName",type:"text",required:!0,value:t.fullName,onChange:w,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo te llamas?"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),h.jsx("input",{name:"email",type:"email",required:!0,value:t.email,onChange:w,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Ciudad"}),h.jsx("input",{name:"city",type:"text",value:t.city,onChange:w,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Desde dnde nos visitas?"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Notas"}),h.jsx("textarea",{name:"notes",rows:3,value:t.notes,onChange:w,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Necesitas facilidades especiales o tienes un cdigo de preventa?"})]}),s==="error"&&h.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:a}),s==="success"&&h.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Listo! Revisa tu correo para completar tu apartado."}),l&&h.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:l}),h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsx(we,{type:"submit",disabled:s==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:y?"Enviando":"Apartar mis artculos"}),h.jsx(we,{type:"button",variant:"outline",disabled:d||s==="loading",onClick:C,className:"w-full border-purple-400/40 text-purple-200 hover:bg-purple-500/10",children:d?"Redirigiendo":"Comprar ahora (Stripe)"}),h.jsx("p",{className:"text-[11px] text-slate-500 text-center",children:"Pagars en Stripe. Tambin enviaremos la liga a tu correo por si la necesitas ms tarde."})]})]})]})]})]})})},UX="/assets/logoapp.png",HX="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Gato%20Encerrado%20%C2%B7%2028%20de%20diciembre&dates=20241228T210000Z/20241228T223000Z&details=Funci%C3%B3n%20especial%20en%20CEC&location=CECUT",qX={}.VITE_SMS_NUMBER||"+526623550516",GX=encodeURIComponent("Hola equipo Gato Encerrado, recurdenme la funcin del 28 de diciembre en CECUT."),WX={hidden:{opacity:0},visible:{opacity:.85}},XX={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},L4=({open:n,onClose:e})=>{Le.useEffect(()=>{if(!n)return;const r=s=>s.key==="Escape"&&(e==null?void 0:e());return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[n,e]);const t=r=>{e==null||e(),setTimeout(()=>{var s;return(s=document.querySelector(r))==null?void 0:s.scrollIntoView({behavior:"smooth",block:"start"})},80)};return h.jsx(fa,{children:n?h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-3 sm:px-6",initial:"hidden",animate:"visible",exit:"hidden",children:[h.jsx(ne.div,{className:"absolute inset-0 bg-black/85 backdrop-blur-md",variants:WX,"aria-hidden":"true",onClick:e}),h.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"ticket-modal-title",variants:XX,className:`
              relative z-10 w-full max-w-lg               /* MOBILE: ideal width */
              rounded-3xl border border-white/10 
              bg-slate-950/95 p-5 sm:p-8 
              shadow-[0_20px_70px_rgba(0,0,0,0.5)]
              overflow-y-auto max-h-[90vh]
            `,children:[h.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:UX,alt:"Logotipo Gato Encerrado",className:"h-10 w-10 rounded-xl border border-white/15 bg-black/40 p-1"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] text-purple-300/80",children:"28 de diciembre  CECUT"}),h.jsx("h3",{id:"ticket-modal-title",className:"font-display text-xl sm:text-3xl text-slate-50 leading-tight",children:"Funcin nica de Es un Gato Encerrado"})]})]}),h.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition text-lg","aria-label":"Cerrar modal",children:""})]}),h.jsxs("div",{className:"flex flex-col gap-6",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/40 p-5 space-y-6 shadow-[0_15px_50px_rgba(0,0,0,0.4)]",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("h4",{className:"text-lg font-semibold text-slate-100 leading-tight",children:"Compra presencial en taquilla del CECUT"}),h.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed",children:["La preventa est abierta hasta agotar localidades.",h.jsx("br",{}),h.jsx("strong",{className:"text-slate-100/90 block mt-1",children:"La Taza Incentivo solo se entrega durante la preventa y mientras haya stock."}),h.jsx("span",{className:"text-xs text-slate-400/90 block mt-1",children:"El da del evento podra no haber tazas disponibles."})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("img",{src:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/TazaPreventa.jpg",alt:"Taza incentivo de preventa",className:"w-full h-44 object-cover rounded-xl border border-white/10"}),h.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"Esta pieza activa WebAR y forma parte del Miniverso Taza, donde se cruza con la causa social del proyecto."}),h.jsx("div",{className:"flex flex-col gap-3",children:h.jsx(we,{variant:"outline",className:"w-full border-purple-300/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>t("#apoya"),children:"Apoya el proyecto"})})]})]}),h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-4 text-sm text-slate-300 space-y-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/80",children:"No te gusta hacer fila?"}),h.jsx("h4",{className:"font-semibold text-slate-100",children:"Tambin puedes comprar en lnea desde tu celular"}),h.jsx("span",{className:"text-slate-500 text-xs",children:"(La Taza Incentivo se entrega solo en compras presenciales.)"}),h.jsx(we,{asChild:!0,className:`
      w-full py-3 rounded-2xl font-semibold
      bg-gradient-to-r from-orange-500 via-rose-500 to-pink-500 
      hover:from-orange-400 hover:to-pink-400
      text-white shadow-[0_12px_40px_rgba(255,99,132,0.35)]
    `,children:h.jsx("a",{href:"https://www.taquillacecut.com.mx/eventos/saladeespectaculos/2025-12-28",target:"_blank",rel:"noreferrer",children:"Comprar en taquillacecut.com.mx"})})]}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/35 p-5 space-y-4 shadow-inner",children:[h.jsx("p",{className:"text-[10px] uppercase tracking-[0.32em] text-purple-300/80",children:"No te pierdas la funcin"}),h.jsx("h4",{className:"text-lg font-semibold text-slate-100 leading-tight",children:"Sabemos que los das se pasan volando"}),h.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:"Activa un recordatorio para que el 28 no se te pase:"}),h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsxs("a",{href:HX,target:"_blank",rel:"noreferrer",className:`
                      block w-full rounded-2xl border border-white/10 bg-slate-900/60 
                      px-4 py-4 text-slate-100 hover:border-purple-400/80 transition
                    `,children:[h.jsx("span",{className:"block text-sm font-semibold",children:"Aadir a mi calendario"}),h.jsx("span",{className:"text-xs text-slate-400",children:"Con fecha, hora y lugar prellenados."})]}),h.jsxs("a",{href:`https://wa.me/${qX.replace(/\D/g,"")}?text=${GX}`,target:"_blank",rel:"noreferrer",className:`
                      block w-full rounded-2xl border border-white/10 bg-slate-900/60 
                      px-4 py-4 text-slate-100 hover:border-purple-400/80 transition
                    `,children:[h.jsx("span",{className:"block text-sm font-semibold",children:"Recibir asistencia humana"}),h.jsx("span",{className:"text-xs text-slate-400",children:"Te enviamos un aviso personalizado por WhatsApp/SMS."})]})]})]})]})]})]}):null})},KX="/assets/bg-logo-ba7fccc4.png",YX=()=>{const[n,e]=S.useState(!1),[t,r]=S.useState(!1);S.useCallback(()=>{const l=document.querySelector("#about");l==null||l.scrollIntoView({behavior:"smooth"})},[]);const s=S.useCallback(()=>{e(!0)},[]),i=S.useCallback(()=>{e(!1)},[]),a=S.useCallback(()=>{r(!0)},[]),o=S.useCallback(()=>{r(!1)},[]);return h.jsxs(h.Fragment,{children:[h.jsxs("section",{id:"hero",className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[h.jsxs("div",{className:"absolute inset-0 bg-black",children:[h.jsxs("div",{className:"absolute inset-0 opacity-30",children:[h.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 bg-gradient-to-br from-pink-900/50 via-transparent to-transparent blur-4xl"}),h.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-purple-700/60 via-transparent to-transparent blur-3xl"})]}),h.jsx("img",{className:"absolute inset-0 w-full h-full object-cover opacity-15 mix-blend-luminosity pointer-events-none",style:{filter:"contrast(25%) brightness(95%)"},alt:"Textura de teln de teatro de terciopelo oscuro",src:KX})]}),h.jsx("div",{className:"container mx-auto px-6 text-center relative z-10",children:h.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"max-w-4xl mx-auto",children:[h.jsx(ne.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.2},className:"font-display text-5xl md:text-7xl font-medium italic mb-6 text-gradient",style:{textShadow:"0 0 20px rgba(233, 213, 255, 0.3)"},children:"#GatoEncerrado"}),h.jsxs(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.5},className:"text-xl md:text-2xl text-slate-300/80 mb-12 leading-relaxed font-light flex flex-col items-center gap-1",children:["El espacio transmedia donde late la obra",h.jsxs("button",{onClick:()=>{var l;return(l=document.querySelector("#about"))==null?void 0:l.scrollIntoView({behavior:"smooth",block:"start"})},className:`
      text-slate-200 underline underline-offset-4 decoration-slate-400/50
      hover:text-white hover:decoration-purple-400 transition
      font-normal flex items-center gap-1
    `,children:["Es un gato encerrado",h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})]}),h.jsx(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.8},className:"flex flex-col gap-4 justify-center items-center",children:h.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center",children:[h.jsxs(we,{onClick:a,className:`
      px-8 py-4 rounded-full font-semibold
      flex items-center gap-2 text-white
      bg-gradient-to-r from-orange-400 via-rose-500 to-pink-500
      shadow-[0_8px_32px_rgba(255,90,120,0.45)]
      hover:shadow-[0_12px_42px_rgba(255,90,120,0.55)]
      hover:scale-[1.03]
      transition-all duration-300 ease-out
      text-base tracking-wide
    `,children:[h.jsx(I3,{size:22,className:"drop-shadow-md"}),"Comprar boleto"]}),h.jsxs(we,{variant:"outline",onClick:()=>s("preventa"),className:`
      px-8 py-4 rounded-full font-semibold
      flex items-center gap-2
      backdrop-blur-xl 
      bg-white/5
      border border-purple-300/30
      text-purple-200
      hover:bg-purple-950/30
      hover:border-purple-300/60
      hover:shadow-[0_6px_24px_rgba(150,80,255,0.25)]
      hover:scale-[1.02]
      transition-all duration-300 ease-out
      text-base tracking-wide
    `,children:[h.jsx(j3,{size:20,className:"text-purple-200/90 drop-shadow-sm"}),"Apartar merch"]}),h.jsx("p",{className:"text-xs text-slate-400/70 leading-tight",children:"Paquetes disponibles solo el da del evento."})]})})]})})]}),h.jsx(AN,{open:n,onClose:i,initialInterest:"preventa"}),h.jsx(L4,{open:t,onClose:o})]})},D4="trailers",wg="trailerlanding",O4=(n="")=>n.toLowerCase().replace(/\.[^/.]+$/,""),t_=(n="")=>{var t;switch((t=n.split(".").pop())==null?void 0:t.toLowerCase()){case"webm":return"video/webm";case"mov":return"video/quicktime";case"mkv":return"video/x-matroska";case"m4v":return"video/x-m4v";case"mp4":default:return"video/mp4"}},$M="trailerlanding.mp4",VM="trailer_landing.mp4",F4="https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/trailer_landing.mp4",n_="https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/trailer_landing_v.mp4",UM={trailerlanding:{url:F4,name:$M,mimeType:t_($M)},trailer_landing:{url:n_,name:VM,mimeType:t_(VM)}},QX=(n=wg)=>{const e=O4(n)||wg;return{...UM[e]||UM[wg]}},B4=async(n="")=>{const{data:e,error:t}=await wt.storage.from(D4).list(n,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});if(t)throw new Error(t.message);if(!Array.isArray(e)||e.length===0)return[];const r=[];for(const s of e){const i=n?`${n}/${s.name}`:s.name;if(!s.metadata){const a=await B4(i);r.push(...a);continue}r.push({...s,fullPath:i})}return r};async function JX(n=wg){var r;const e=O4(n)||wg,t=QX(e);try{let s;try{s=await B4("")}catch(c){return console.error("Error al listar trailers:",c.message),{...t}}if(!Array.isArray(s)||s.length===0)return{...t};const i=e;let a=s.find(c=>{const d=c.fullPath.toLowerCase();return i&&(d===i||d.endsWith(`/${i}`)||d.includes(`/${i}.`)||d===`${i}.mp4`||d.startsWith(`${i}.`))});if(!a&&i&&(a=s.find(c=>c.fullPath.toLowerCase().includes(i))),!a)return{...t};const{data:o}=wt.storage.from(D4).getPublicUrl(a.fullPath),l=((r=a.metadata)==null?void 0:r.mimetype)||t_(a.fullPath);return o!=null&&o.publicUrl?{url:o.publicUrl,name:a.fullPath,mimeType:l}:{...t,name:a.fullPath,mimeType:l}}catch(s){return console.error("Excepcin al obtener el triler:",s),{...t}}}const ZX="Es un gato encerrado existe como obra escnica y como #UniversoTransmedia: es, al mismo tiempo, un relato ntimo en un escenario y una constelacin de la mente y del dolor humano en mltiples lenguajes artsticos. Nuestra obra es el corazn que hace pulsar aquellas preguntas que no estn aqu para contestarse, sino para sentirlas en compaa. En pocas palabras, cuando la obra est latente, el universo #GatoEncerrado contina latiendo en otras narrativas. Un recordatorio de que el corazn nunca se encierra del todo.",eK=[{quote:"Salir de la funcin fue como despertar con nuevos recuerdos. La obra me oblig a conversar con mis propias ausencias.",author:"Maru Solano",role:"Espectadora / Tijuana"},{quote:"Es un Gato Encerrado nos recuerda que el teatro puede ser tambin archivo emocional y dispositivo de memoria.",author:"Dr. Luis Miguel Snchez",role:"Crtico invitado"}],tE=`Hola 
Quiero invitarte a ver *Es un gato encerrado*.
Mira el triler aqu: https://esungatoencerrado.com/trailer
Si te late, vamos. `,tK=()=>{const[n,e]=S.useState(null),[t,r]=S.useState(!1),[s,i]=S.useState(!1),[a,o]=S.useState(!1),[l,c]=S.useState("preventa"),[d,f]=S.useState(!1),[p,m]=S.useState(()=>typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches);S.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const E=window.matchMedia("(max-width: 768px)"),N=j=>m(j.matches);return typeof E.addEventListener=="function"?E.addEventListener("change",N):typeof E.addListener=="function"&&E.addListener(N),()=>{typeof E.removeEventListener=="function"?E.removeEventListener("change",N):typeof E.removeListener=="function"&&E.removeListener(N)}},[]);const y=p?n_:F4;S.useCallback(E=>{c(E),o(!0)},[]);const g=S.useCallback(()=>{o(!1)},[]),w=S.useCallback(()=>{var j,M;if(typeof window>"u"||typeof document>"u")return;const E=document.getElementById("blog-submit-cta"),N=document.getElementById("blog-contribuye");if(E){E.scrollIntoView({behavior:"smooth",block:"center"});try{(j=E.focus)==null||j.call(E,{preventScroll:!0})}catch{try{(M=E.focus)==null||M.call(E)}catch{}}return}N&&N.scrollIntoView({behavior:"smooth",block:"start"})},[]),v=S.useCallback(async()=>{var j;if(s)return;const E=p?"trailer_landing_v":"trailerlanding";if((n==null?void 0:n.url)&&(((j=n.name)==null?void 0:j.toLowerCase().includes(E))||n.url.toLowerCase().includes(E))){r(!0);return}try{i(!0);const M=await JX(E);if(M!=null&&M.url){let O=M;p&&!M.url.toLowerCase().includes("trailer_landing_v")&&(O={...M,url:n_,name:"trailer_landing_v.mp4"}),e(O),r(!0)}else Fe({description:"El triler an no est disponible. Intenta ms tarde."})}catch(M){console.error("Error al obtener el triler:",M),Fe({description:"No se pudo cargar el triler. Intntalo de nuevo ms tarde."})}finally{i(!1)}},[s,p,n]),x=S.useCallback(()=>{r(!1);const E=document.getElementById("gato-encerrado-trailer");E&&typeof E.pause=="function"&&E.pause()},[]),b=S.useCallback(async()=>{const E={title:"Es un gato encerrado",url:"https://esungatoencerrado.com/trailer",text:tE};if(typeof navigator<"u"&&typeof navigator.share=="function")try{await navigator.share(E);return}catch(N){if((N==null?void 0:N.name)==="AbortError")return;console.error("Error al compartir invitacin:",N)}f(!0)},[]),C=S.useCallback(()=>{f(!1)},[]),_=S.useCallback(E=>{const N=encodeURIComponent(tE),j=`https://wa.me/?text=${N}`,M=`mailto:?subject=${encodeURIComponent("Te invito a ver Es un gato encerrado")}&body=${N}`,O=E==="whatsapp"?j:M;typeof window<"u"&&window.open(O,"_blank","noopener,noreferrer"),f(!1)},[]);return h.jsxs(h.Fragment,{children:[h.jsxs("section",{id:"about",className:"py-24 relative",children:[h.jsx("div",{className:"section-divider mb-24"}),h.jsxs("div",{className:"container mx-auto px-6",children:[h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Sobre la Obra"}),h.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light whitespace-pre-line",children:ZX})]}),h.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[h.jsxs("div",{className:"relative order-2 md:order-1",children:[h.jsx("video",{className:"w-full h-96 object-cover rounded-xl shadow-2xl shadow-black/50","aria-label":"Escena de la obra #GatoEncerrado, luz tenue y misteriosa",src:y,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl","aria-hidden":"true"})]}),h.jsxs("div",{className:"order-1 md:order-2",children:[h.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"La Mente de Silvestre"}),h.jsxs("p",{className:"text-slate-300/80 leading-relaxed mb-8 font-light",children:["Silvestre vive en ",h.jsx("strong",{children:"Es un gato encerrado"}),". Este es el ",h.jsx("i",{children:"rincn onrico"})," donde enfrenta sus desdoblamientos y dilemas existenciales. Aqu, lo real y lo imaginario ya no compiten. Y t espectador, visitante, cmplice puedes entrar sin tocar la puerta, porque quizs t tambin tienes un gato encerrado en el pecho."]}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[h.jsxs(we,{onClick:v,disabled:s,className:"relative bg-purple-500/20 border border-purple-400/30 text-purple-300 hover:bg-purple-500/30 hover:text-purple-200 disabled:opacity-60 disabled:cursor-not-allowed px-6 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow",children:[h.jsx(b8,{size:20}),s?"Cargando":"Escucha el Triler"]}),h.jsxs(we,{variant:"outline",onClick:b,className:"border-slate-100/20 text-slate-200 hover:bg-slate-100/10 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[h.jsx(M3,{size:20}),"Invita a alguien"]})]})]})]})}),h.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-16 glass-effect rounded-2xl p-8 md:p-12",children:h.jsxs("div",{className:"grid md:grid-cols-[3fr_2fr] gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"uppercase tracking-[0.35em] text-xs text-slate-400/80 mb-4",children:"Perspectivas del pblico"}),h.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-6 italic",children:"Qu provoca La Obra?"}),h.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-6 font-light",children:"Reunimos testimonios, crticas y preguntas abiertas que continan la conversacin. Haz scroll hacia Textos y Blog para leer ms y expandir tu propia mirada."}),h.jsx(we,{variant:"outline",onClick:w,className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/20 w-full sm:w-auto whitespace-normal break-words text-center leading-snug",children:"Si ya la viste, clica aqu para escucharte."})]}),h.jsx("div",{className:"space-y-6",children:eK.map(E=>h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-6",children:[h.jsx(E8,{className:"text-purple-300 mb-4",size:28}),h.jsx("p",{className:"text-slate-200 italic leading-relaxed mb-4",children:E.quote}),h.jsxs("div",{className:"text-sm text-slate-400",children:[h.jsx("p",{className:"text-slate-200 font-semibold",children:E.author}),h.jsx("p",{children:E.role})]})]},E.author))})]})})]}),h.jsxs(fa,{children:[t&&(n==null?void 0:n.url)&&h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[h.jsx(ne.div,{className:"absolute inset-0 bg-black/70",onClick:x,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),h.jsx(ne.div,{className:`relative z-10 w-full h-full ${p?"max-w-4xl p-4":"p-6 sm:p-8"} overflow-hidden bg-slate-950/95 backdrop-blur-xl`,initial:{scale:.96,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.96,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:h.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col gap-4 h-full",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border border-white/10 rounded-2xl bg-black/40 text-slate-200 uppercase tracking-[0.35em] text-xs shadow-[0_12px_40px_rgba(0,0,0,0.45)]",children:[h.jsx("span",{children:"Triler #GatoEncerrado"}),h.jsx("button",{onClick:x,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar triler",children:""})]}),(()=>{var j,M;const N=p&&(((j=n==null?void 0:n.url)==null?void 0:j.toLowerCase().includes("trailer_landing_v"))||((M=n==null?void 0:n.name)==null?void 0:M.toLowerCase().includes("trailer_landing_v")))?"aspect-[9/16]":"aspect-video";return h.jsx("div",{className:`relative w-full ${N} bg-black rounded-2xl overflow-hidden mx-auto flex items-center justify-center shadow-[0_18px_60px_rgba(0,0,0,0.55)]`,children:h.jsx("video",{id:"gato-encerrado-trailer",src:n.url,controls:!0,autoPlay:!0,className:"h-full w-full object-contain"},n.url)})})()]})})]}),d&&h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[h.jsx(ne.div,{className:"absolute inset-0 bg-black/70",onClick:C,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),h.jsxs(ne.div,{className:"relative z-10 w-full max-w-md rounded-3xl border border-white/10 bg-slate-950/90 backdrop-blur-xl p-6 shadow-[0_18px_60px_rgba(0,0,0,0.55)]",initial:{scale:.96,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.96,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:[h.jsxs("div",{className:"flex items-start justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:"Compartir"}),h.jsx("h4",{className:"text-slate-100 font-display text-2xl",children:"Invita a alguien"})]}),h.jsx("button",{onClick:C,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar invitacin",children:""})]}),h.jsx("p",{className:"text-slate-300/80 whitespace-pre-line text-sm mb-6 font-light",children:tE}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("button",{onClick:()=>_("whatsapp"),className:"w-full px-5 py-3 rounded-full font-semibold flex items-center justify-center gap-2 bg-emerald-500/15 hover:bg-emerald-500/25 border border-emerald-500/30 text-emerald-200 transition",children:"Enviar por WhatsApp"}),h.jsx("button",{onClick:()=>_("email"),className:"w-full px-5 py-3 rounded-full font-semibold flex items-center justify-center gap-2 border border-slate-100/20 text-slate-200 hover:bg-slate-100/10 transition",children:"Enviar por Email"})]})]})]})]})]}),h.jsx(AN,{open:a,onClose:g,initialInterest:l})]})},Sm=[{id:"waitlist",label:"Prximamente"},{id:"experiences",label:"Miniversos activos"}],nK=[{id:"literatura",title:"Miniverso Literatura",description:"Fragmentos de la novela Listen recaen en lectores que ya activaron narratives extendidas. Lecturas guiadas y comunidad de ensayo estn al 90% del plan.",action:"Disponible hoy  lecturas y ritos de pgina.",cost:25},{id:"taza",title:"Miniverso Taza",description:"WebAR y rituales cotidianos listos para tomarse: la activacin de la taza est en produccin al 90% y acompaa cada sorbo con pistas sonoras.",action:"Actvala con tu taza  experiencia viva."},{id:"cine",title:"Miniverso Cine",description:"CopyCats y Quirn se proyectan con conservatorio doble. El plan de sala y anlisis crtico sobrevive con guardias de IA que ya operan en sala.",action:"Screening activo  boletos limitados.",cost:200},{id:"sonoro",title:"Miniverso Sonoro",description:"Sueos sonoros en tres capas se mezclan en la plataforma. La curadura y los poemas interactivos estn listos para tu escucha.",action:"Explora la mezcla  disponible ahora."}],HM={fullName:"",email:"",interest:"miniversos",message:""},rK={hidden:{opacity:0},visible:{opacity:.85}},sK={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},iK=({open:n,onClose:e,contextLabel:t})=>{const[r,s]=S.useState(Sm[0].id),[i,a]=S.useState(HM),[o,l]=S.useState("idle"),[c,d]=S.useState(""),[f,p]=S.useState(!1),[m,y]=S.useState(0),[g,w]=S.useState(0);typeof t=="string"&&t.trim(),S.useEffect(()=>{n&&(s(Sm[0].id),a(HM),l("idle"),d(""))},[n]),S.useEffect(()=>{var O,L,F;if(typeof window>"u")return;((O=window.localStorage)==null?void 0:O.getItem("gatoencerrado:quiron-spent"))==="true"&&p(!0);const E=(L=window.localStorage)==null?void 0:L.getItem("gatoencerrado:novela-questions");E&&!Number.isNaN(Number.parseInt(E,10))&&y(Number.parseInt(E,10));const N=(F=window.localStorage)==null?void 0:F.getItem("gatoencerrado:taza-activations");N&&!Number.isNaN(Number.parseInt(N,10))&&w(Number.parseInt(N,10));const j=U=>{if(U.key==="gatoencerrado:quiron-spent"&&U.newValue==="true"&&p(!0),U.key==="gatoencerrado:quiron-spent"&&U.newValue===null&&p(!1),U.key==="gatoencerrado:novela-questions"){const B=U.newValue?Number.parseInt(U.newValue,10):0;Number.isNaN(B)||y(B)}if(U.key==="gatoencerrado:taza-activations"){const B=U.newValue?Number.parseInt(U.newValue,10):0;Number.isNaN(B)||w(B)}},M=U=>{var B,I,D,z,V,q;((B=U==null?void 0:U.detail)==null?void 0:B.id)==="cine"&&typeof U.detail.spent=="boolean"&&p(U.detail.spent),((I=U==null?void 0:U.detail)==null?void 0:I.id)==="novela"&&((D=U.detail)!=null&&D.count)&&y(U.detail.count),((z=U==null?void 0:U.detail)==null?void 0:z.id)==="novela"&&((V=U.detail)==null?void 0:V.count)===0&&y(0),((q=U==null?void 0:U.detail)==null?void 0:q.id)==="taza"&&typeof U.detail.count=="number"&&w(U.detail.count)};return window.addEventListener("storage",j),window.addEventListener("gatoencerrado:miniverse-spent",M),()=>{window.removeEventListener("storage",j),window.removeEventListener("gatoencerrado:miniverse-spent",M)}},[]),S.useEffect(()=>{if(!n)return;const _=E=>{E.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[n,e]);const v=S.useCallback(_=>{const{name:E,value:N}=_.target;a(j=>({...j,[E]:N}))},[]),x=S.useMemo(()=>{var _;return((_=Sm.find(E=>E.id===r))==null?void 0:_.label)??Sm[0].label},[r]),b=S.useCallback(async _=>{var E;if(_.preventDefault(),o!=="loading"){if(!i.fullName.trim()||!i.email.trim()){Fe({description:"Por favor completa tu nombre y correo."});return}l("loading"),d("");try{const N={full_name:i.fullName.trim(),email:i.email.trim().toLowerCase(),city:null,interest:"miniversos",channel:"landing",object_type:"experiencia-digital",event:"miniversos",notes:i.message.trim()||null},{error:j}=await wt.from("rsvp_extended").insert(N);if(j){console.error("[MiniverseModal] Error al registrar miniverso:",j),l("error"),d((E=j.message)!=null&&E.includes("rsvp_extended")?"Crea la tabla rsvp_extended en Supabase para habilitar este formulario.":"No pudimos registrar tu inters. Intenta de nuevo.");return}l("success"),Fe({description:"Gracias. Te enviaremos una seal cuando el prximo miniverso cobre vida."})}catch(N){console.error("[MiniverseModal] Excepcin al guardar:",N),l("error"),d("Ocurri un error inesperado. Intenta ms tarde.")}}},[i,o]),C=S.useCallback(()=>{o!=="loading"&&(e==null||e())},[e,o]);return h.jsx(fa,{children:n?h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center px-3 py-6 sm:px-4 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[h.jsx(ne.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:rK,onClick:C,"aria-hidden":"true"}),h.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"miniverse-modal-title",variants:sK,className:"relative z-10 w-full max-w-4xl rounded-3xl border border-white/10 bg-slate-950/95 p-5 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"Universos expandidos #GatoEncerrado"}),h.jsx("h2",{id:"miniverse-modal-title",className:"font-display text-3xl text-slate-50",children:"Explora los miniversos"}),h.jsx("p",{className:"text-sm text-slate-400/80",children:"Lo que empieza en el escenario contina en otros formatos. Aqu reunimos las experiencias emergentes."})]}),h.jsx("button",{onClick:C,className:"self-end text-slate-400 hover:text-white transition","aria-label":"Cerrar explorador de miniversos",children:""})]}),h.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Sm.map(_=>h.jsx("button",{onClick:()=>s(_.id),className:`rounded-full border px-4 py-2 text-sm transition ${r===_.id?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:_.label},_.id))}),h.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:r==="waitlist"?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"space-y-4 text-slate-300/90 text-sm leading-relaxed",children:h.jsxs("div",{className:"glass-effect rounded-2xl border border-white/10 p-5 space-y-4",children:[h.jsx("p",{className:"text-base uppercase tracking-[0.3em] text-slate-400",children:"Prximamente"}),h.jsx("h3",{className:"font-display text-2xl text-slate-100",children:"Este miniverso an no existe pero puede existir contigo."}),h.jsxs("ul",{className:"space-y-2 text-sm leading-relaxed",children:[h.jsx("li",{children:" Cada suscripcin a la plataforma apoya directamente los proyectos activos de la asociacin."}),h.jsx("li",{children:" Una vez cubiertas las metas bsicas, todo lo recaudado se usar para dar vida a miniversos como este."}),h.jsx("li",{children:" Conectando arte, tecnologa y territorio en experiencias reales e inmersivas."})]}),h.jsx("p",{children:"Lo imaginaste? Ahora aydanos a realizarlo."}),h.jsx("p",{className:"font-semibold text-purple-100",children:" Suscrbete, comparte o participa. Aqu, cada gesto cuenta."})]})}),h.jsxs("form",{className:"space-y-5",onSubmit:b,children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),h.jsx("input",{name:"fullName",type:"text",required:!0,value:i.fullName,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),h.jsx("input",{name:"email",type:"email",required:!0,value:i.email,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),h.jsx("textarea",{name:"message",rows:3,value:i.message,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Comparte qu miniverso te emociona ms o si traes alguna propuesta."})]}),o==="error"?h.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:c}):null,o==="success"?h.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Quedas en lista para las prximas experiencias. Llegar un correo con la primera pista."}):null,h.jsx(we,{type:"submit",disabled:o==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:o==="loading"?"Guardando":"Quiero recibir las activaciones"})]})]}):h.jsx("div",{className:"md:col-span-2 grid md:grid-cols-3 gap-6",children:nK.map(_=>{const E=_.id==="cine",N=_.id==="literatura",j=_.id==="taza",M=m*25,O=g*30,L=E?f?"0 gatokens  200 aplicadas":`~${_.cost??200} gatokens por espectador`:N?m>0?`${M} gatokens usadas (${m} pregunta${m===1?"":"s"})`:`~${_.cost??25} gatokens por pregunta`:j?g>0?`${O} gatokens usadas (${g} activacin${g===1?"":"es"})`:"90 gatokens disponibles":null,F=E&&f||N&&m>0||j&&g>0?"text-emerald-200":"text-amber-200";return h.jsxs("div",{className:"glass-effect rounded-2xl border border-white/10 p-6",children:[h.jsx("h3",{className:"font-display text-xl text-slate-100 mb-3",children:_.title}),h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed mb-4",children:_.description}),L?h.jsxs("p",{className:`text-sm font-semibold ${F} mb-2`,children:[" ",L]}):null,h.jsx("span",{className:"text-xs uppercase tracking-[0.25em] text-purple-200/80",children:_.action})]},_.title)})})}),h.jsxs("div",{className:"mt-8 flex items-center justify-between text-xs text-slate-500",children:[h.jsx("span",{children:x}),h.jsx("button",{onClick:C,className:"text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]}):null})},aK="https://ytubybkoucltwnselbhc.supabase.co/functions/v1";async function xb(n,e={}){const t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo";return fetch(`${aK}${n}`,{...e,headers:{"Content-Type":"application/json",apikey:t,Authorization:`Bearer ${t}`,...e.headers||{}}})}const oK="price_1SdGlH02OUnvk7X1uQUYdRNF",lK=6,km=17,Am=75;function qM({value:n}){return h.jsx("div",{className:"w-full h-2 rounded-full bg-white/10 overflow-hidden",children:h.jsx("div",{className:"h-full bg-white/70",style:{width:`${Math.min(100,Math.max(0,n))}%`}})})}const cK=()=>{const[n,e]=S.useState(""),[t,r]=S.useState(!1),[s,i]=S.useState(""),[a,o]=S.useState(0),[l,c]=S.useState(!!"https://ytubybkoucltwnselbhc.supabase.co/functions/v1");S.useEffect(()=>{if(!l)return;let p=!0;async function m(){try{const w=await(await xb("/stats-suscriptores",{cache:"no-store"})).json();if(!p)return;o(Number((w==null?void 0:w.total)||0))}catch(g){console.error("Error stats/suscriptores",g),c(!1)}}m();const y=setInterval(m,15e3);return()=>{p=!1,clearInterval(y)}},[l]);const d=S.useMemo(()=>{const p=a*lK,m=Math.floor(a/km),y=a%km,g=y===0?km:km-y,w=y/km*100,v=Math.floor(a/Am),x=a%Am,b=x===0?Am:Am-x,C=x/Am*100;return{sesiones:p,residencias:m,residenciasFaltan:g,residenciasProg:w,escuelas:v,escuelasFaltan:b,escuelasProg:C}},[a]);async function f(){try{r(!0),i("");const p=await xb("/prepare-checkout",{method:"POST",body:JSON.stringify({email:n})}),m=await p.json();if(!p.ok||!(m!=null&&m.audienceId))throw new Error((m==null?void 0:m.error)||"No se pudo preparar el checkout");const y=await xb("/create-checkout-session",{method:"POST",body:JSON.stringify({priceId:oK,audienceId:m.audienceId,email:m.email||n,mode:"subscription"})}),g=await y.json();if(!y.ok)throw new Error((g==null?void 0:g.error)||"No se pudo crear la sesin");window.location.href=g.url}catch(p){i(p.message)}finally{r(!1)}}return h.jsxs("div",{className:"max-w-xl mx-auto text-center space-y-6",children:[h.jsx(ne.p,{className:"text-md text-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Cada suscripcin motiva al universo #GatoEncerrado y activa impacto real en su causa social."}),h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-left text-slate-100 space-y-4",children:[h.jsxs("div",{className:"flex items-baseline justify-between",children:[h.jsx("p",{className:"text-sm opacity-80",children:"Suscriptores activos"}),h.jsx("p",{className:"text-2xl font-semibold",children:a})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm mb-1 opacity-80",children:"Terapias asignadas"}),h.jsxs("p",{className:"text-lg mb-2",children:[h.jsx("strong",{children:d.sesiones})," sesiones (1 suscripcin = 6 sesiones)"]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm opacity-80",children:[h.jsx("span",{children:"Residencias creativas"}),h.jsxs("span",{children:[d.residencias," activas"]})]}),h.jsx(qM,{value:d.residenciasProg}),h.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Faltan ",h.jsx("strong",{children:d.residenciasFaltan})," suscripciones para abrir la siguiente residencia ( 17/sub)."]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex items-center justify-between text-sm opacity-80",children:[h.jsx("span",{children:"Escuelas con app activa"}),h.jsxs("span",{children:[d.escuelas," escuelas"]})]}),h.jsx(qM,{value:d.escuelasProg}),h.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Faltan ",h.jsx("strong",{children:d.escuelasFaltan})," suscripciones para la prxima escuela ( 75/sub)."]})]}),h.jsx("p",{className:"text-[11px] leading-4 text-slate-300/80 pt-2",children:"* Isabel Ayuda para la Vida, A.C. no cobra al usuario por sesin. Las sesiones se asignan sin costo para las familias cuando se detecta riesgo, gracias a la combinacin de suscripciones, aportes simblicos y apoyos institucionales."})]}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx("input",{type:"email",placeholder:"tu@email.com",value:n,onChange:p=>e(p.target.value),className:"w-full px-3 py-2 rounded text-black"}),h.jsx("button",{onClick:f,disabled:t||!n,className:"bg-white/90 text-black px-4 py-2 rounded disabled:opacity-50",children:t?"Creando sesin":"Quiero suscribirme"})]}),s&&h.jsx("p",{className:"text-red-300 text-sm",children:s})]})},uK=n=>{let e=!1;return(...t)=>{e||(e=!0,n(...t))}},dK=()=>{const[n,e]=S.useState(null),[t,r]=S.useState(""),[s,i]=S.useState(!1),a=typeof navigator<"u"?navigator.userAgent:"",o=/iphone|ipad|ipod|android/i.test(a),l=/iphone|ipad|ipod/i.test(a),c=async()=>{if(!n)return;n.prompt();const m=await n.userChoice;r((m==null?void 0:m.outcome)==="accepted"?"Gracias. Ahora abre #GatoEncerrado desde tu pantalla de inicio y vers la experiencia sin barras.":"Perfecto, si quieres puedes instalarla cuando gustes."),e(null)};S.useEffect(()=>{if(typeof window>"u")return;const m=()=>{const v=typeof navigator<"u"?navigator:null,x=window.matchMedia("(display-mode: standalone)"),b=!!(x&&x.matches)||(v==null?void 0:v.standalone)===!0;i(b)};m();const y=window.matchMedia("(display-mode: standalone)"),g=v=>{v.matches?i(!0):m()};y.addEventListener?y.addEventListener("change",g):y.addListener(g);const w=uK(()=>{i(!0),r("Listo: la app ya est instalada y se abre sin barras del navegador.")});return window.addEventListener("appinstalled",w),()=>{y.removeEventListener?y.removeEventListener("change",g):y.removeListener(g),window.removeEventListener("appinstalled",w)}},[]),S.useEffect(()=>{if(typeof window>"u")return;const m=y=>{y.preventDefault(),e(y)};return window.addEventListener("beforeinstallprompt",m),()=>window.removeEventListener("beforeinstallprompt",m)},[]);const d=l&&!s,f=!!n;return o&&!s&&(f||d)?h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-slate-950/60 p-6 text-left text-slate-100 space-y-4",children:[h.jsx("p",{className:"text-sm leading-relaxed",children:"Para vivir #GatoEncerrado como una app nativa y ocultar las barras del navegador, instlala en tu pantalla de inicio."}),f&&h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx(we,{onClick:c,variant:"outline",children:"Instalar app en pantalla de inicio"}),h.jsx("p",{className:"text-xs text-slate-400",children:"Si el botn no responde, abre el men de tu navegador y busca Instalar app o Agregar a pantalla de inicio."})]}),d&&!f&&h.jsxs("div",{className:"space-y-1 text-xs text-slate-300",children:[h.jsx("p",{children:"En Safari toca el cono de compartir y elige Aadir a pantalla de inicio."}),h.jsx("p",{children:"Desde all la experiencia se abre sin barras y se siente como una app completa."})]}),t&&h.jsx("p",{className:"text-xs text-emerald-300","aria-live":"polite",children:t})]}):null},xa=[{id:"obra_escenica",icon:h.jsx(E3,{size:20,className:"text-purple-300"}),title:"La Obra - Es un Gato Encerrado",description:`De la escena surgi el universo:
voz, trance y cuerpo
activando el paso.`},{id:"miniverso_novela",icon:h.jsx(z2,{size:20,className:"text-emerald-300"}),title:"Literatura",description:`La palabra devolvi lo que el gato se trag:
Mi Gato Encerrado
 sali de s para reconocerse.`},{id:"taza",icon:h.jsx(A3,{size:20,className:"text-amber-300"}),title:"Artesanas",description:`Una taza que escucha.
Un marcador que mira.
Lo cotidiano tambin es ritual.`},{id:"cine",icon:h.jsx(_3,{size:20,className:"text-rose-300"}),title:"Cine",description:`Cuando la escena no basta,
la cmara sostiene la memoria
Quirn, CopyCats:
el mismo espacio, expuesto de otra forma.`},{id:"grafico",icon:h.jsx(H2,{size:20,className:"text-fuchsia-300"}),title:"Grficos",description:`Garabatea tu lmite, dibuja tu refugio.
Lo grfico como portal emocional.
Cada trazo se siente antes de entenderse.`},{id:"apps",icon:h.jsx(q2,{size:20,className:"text-lime-300"}),title:"Apps",description:`Pantallas que acompaan.
Tecnologas que cuidan.
Aqu sigues el universo,
sin salir del tuyo.`},{id:"sonoro",icon:h.jsx(P3,{size:20,className:"text-cyan-300"}),title:"Sonoridades",description:`Suea una imagen.
Ajusta el pulso.
Permite que el poema respire sin ti.`},{id:"movimiento",icon:h.jsx(U2,{size:20,className:"text-sky-300"}),title:"Movimiento",description:`Diosas en danza.
Ciudades como escenario.
La ruta vibra cuando alguien baila.`},{id:"oraculo",icon:h.jsx(ik,{size:20,className:"text-indigo-300"}),title:"Orculo",description:"Preguntas que no buscan respuestas, sino resonancia. Mintea GATokens por cada huella."},{id:"otro",icon:h.jsx(Vg,{size:20,className:"text-fuchsia-300"}),title:"Otra contribucin",description:"Performance, glitch sonoro o investigacin hbrida. Tambin cabe aqu."}],hK={hidden:{opacity:0},visible:{opacity:.85}},fK={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},Bx={name:"",email:"",role:"",proposal:"",attachmentUrl:""},nE="gatoencerrado-contrib-form",GM=new Set(["apps","oraculo","sonoro"]),pK={obra_escenica:"Si la Obra te toc, este espacio es tuyo.",miniverso_novela:"Si encontraste algo tuyo entre estas pginas, djalo dicho.",taza:"Qu historia se activ cuando tomaste la taza? Escrbela aqu.",cine:"Qu imagen te persigui despus? Cuntanos qu viste ms all de la pantalla.",grafico:"Qu smbolo, trazo o glitch quieres sumar a este laboratorio visual?",apps:"Cmo cambi tu forma de jugar o explorar este universo?",oraculo:"Pregunta, responde y mintea: cada reflexin deja una huella y gana GATokens.",otro:"Si no cabe en un miniverso es porque an no lo hemos nombrado.",sonoro:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron.",movimiento:"Cuntanos qu ruta, coreografa o ritual colectivo quieres activar en la ciudad."},z4=({open:n,onClose:e,initialCategoryId:t=null})=>{const{user:r}=Pd(),s=!!(r!=null&&r.email),i=S.useMemo(()=>{var Z,le;return((Z=r==null?void 0:r.user_metadata)==null?void 0:Z.alias)||((le=r==null?void 0:r.user_metadata)==null?void 0:le.full_name)||""},[r]),a=(r==null?void 0:r.email)??"",o=i||(a?a.split("@")[0]:""),[l,c]=S.useState(Bx),[d,f]=S.useState("idle"),[p,m]=S.useState(""),[y,g]=S.useState(xa[0]),[w,v]=S.useState(!1),[x,b]=S.useState(!1),[C,_]=S.useState([]),[E,N]=S.useState(!1),[j,M]=S.useState(!1),[O,L]=S.useState(()=>typeof window>"u"?!1:window.matchMedia("(min-width: 768px)").matches),[F,U]=S.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 767px)").matches),B=S.useRef(null),I=S.useRef(null),[D,z]=S.useState(!1),V=s||w;S.useEffect(()=>{if(typeof window>"u")return;const Z=kN(nE);if(Z)try{const le=JSON.parse(Z);B.current=le,c(Ve=>({...Ve,...le.formState})),v(!!le.notifyOnPublish);const ye=xa.find(Ve=>Ve.id===le.selectedCategory);ye&&g(ye)}catch{B.current=null}z(!0)},[]),S.useEffect(()=>{if(!n||!D)return;const Z=t&&xa.find(le=>le.id===t)||null;if(!B.current)c({...Bx,name:s?o:"",email:s?a:""}),v(s),g(Z??xa[0]),b(!1);else{const le=B.current.formState??Bx;c({...le});const ye=B.current.notifyOnPublish;v(typeof ye=="boolean"?ye:s);const Ve=xa.find(Nt=>Nt.id===B.current.selectedCategory);g(Z??Ve??xa[0]),b(!0)}f("idle"),m("")},[n,s,D,t,o,a]),S.useEffect(()=>{!n||!s||c(Z=>{var le;return{...Z,name:(le=Z.name)!=null&&le.trim()?Z.name:o,email:a||Z.email}})},[n,s,o,a]),S.useEffect(()=>{if(!n)return;const Z=le=>{le.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",Z),()=>window.removeEventListener("keydown",Z)},[n,e]),S.useEffect(()=>{if(typeof window>"u")return;const Z=window.matchMedia("(min-width: 768px)"),le=window.matchMedia("(max-width: 767px)"),ye=Nt=>{L(Nt.matches)},Ve=Nt=>{U(Nt.matches)};return L(Z.matches),U(le.matches),Z.addEventListener?(Z.addEventListener("change",ye),le.addEventListener("change",Ve)):(Z.addListener(ye),le.addListener(Ve)),()=>{Z.removeEventListener?(Z.removeEventListener("change",ye),le.removeEventListener("change",Ve)):(Z.removeListener(ye),le.removeListener(Ve))}},[]),S.useEffect(()=>{s&&N(!1)},[s]);const q=S.useCallback(Z=>{const{name:le,value:ye}=Z.target;s&&le==="email"||c(Ve=>({...Ve,[le]:ye}))},[s]),P=S.useCallback(()=>{N(!1)},[]),Y=S.useCallback(()=>{M(!0),setTimeout(()=>M(!1),420)},[]),K=S.useCallback(()=>{if(typeof window>"u")return;const Z=window.AudioContext||window.webkitAudioContext;if(!Z)return;const le=new Z,ye=le.createOscillator(),Ve=le.createGain();ye.type="sine",ye.frequency.value=720,Ve.gain.value=.03,ye.connect(Ve),Ve.connect(le.destination),ye.start(),ye.stop(le.currentTime+.1),ye.onended=()=>{le.close()}},[]),R=S.useCallback(()=>{I.current||(I.current=setTimeout(()=>{N(!0),I.current=null},520))},[]),ie=S.useCallback(Z=>{if(Y(),K(),setTimeout(K,140),!s){R();return}v(Z.target.checked)},[Y,K,s,R]);S.useEffect(()=>{if(typeof window>"u")return;const Z={formState:l,notifyOnPublish:w,selectedCategory:y.id};Wg(nE,JSON.stringify(Z)),B.current=Z},[l,w,y]),S.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]);const ke=S.useCallback(()=>{const Z=Date.now();_(le=>[...le,Z]),setTimeout(()=>{_(le=>le.filter(ye=>ye!==Z))},1100)},[]),me=S.useCallback(()=>{d!=="loading"&&(e==null||e(),!(typeof document>"u")&&setTimeout(()=>{var Z;(Z=document.querySelector("#transmedia"))==null||Z.scrollIntoView({behavior:"smooth",block:"start"})},80))},[e,d]),ve=S.useCallback(async Z=>{var le;if(Z.preventDefault(),d!=="loading"){if(!l.name.trim()||!l.email.trim()||!l.proposal.trim()){Fe({description:"Completa tu nombre, correo y una breve propuesta."});return}if(w&&!s){Fe({description:"Inicia sesin para recibir la notificacin personalizada."});return}if(!s){Fe({description:"Inicia sesin para enviar tu propuesta."}),R();return}f("loading"),m("");try{const ye=(y==null?void 0:y.id)??"obra_escenica",Ve={name:l.name.trim(),email:l.email.trim().toLowerCase(),role:l.role.trim()||null,topic:ye,proposal:l.proposal.trim(),attachment_url:l.attachmentUrl.trim()||null,notify_on_publish:w},{error:Nt}=await wt.from("blog_contributions").insert(Ve);if(Nt){console.error("[ContributionModal] Error al registrar propuesta:",Nt),f("error"),m((le=Nt.message)!=null&&le.includes("blog_contributions")?"Asegrate de crear la tabla blog_contributions en Supabase.":"No pudimos registrar tu propuesta. Intenta nuevamente.");return}try{const De={author_email:Ve.email,author_name:Ve.name,category:ye,content:Ve.proposal,meta:{origin:"public_site"}},{error:Br}=await wt.from("backstage_contributions").insert(De);Br&&console.error("[ContributionModal] No se pudo duplicar en backstage_contributions:",Br)}catch(De){console.error("[ContributionModal] Excepcin duplicando en backstage_contributions:",De)}l.email.trim()&&await mK({email:l.email.trim().toLowerCase(),name:l.name.trim(),proposal:l.proposal.trim(),category:(y==null?void 0:y.title)??xa[0].title}),f("success"),ke(),Fe({description:"Gracias! Revisaremos tu propuesta y te contactaremos pronto."}),c({...Bx,name:i||"",email:(r==null?void 0:r.email)??""}),v(!1),g(xa[0]),b(!1),R4(nE),B.current=null}catch(ye){console.error("[ContributionModal] Excepcin al guardar:",ye),f("error"),m("Ocurri un error inesperado. Intenta ms tarde.")}}},[l,d,y,w,s,ke,i,r==null?void 0:r.email]),Ke=S.useCallback(()=>{d!=="loading"&&(e==null||e())},[e,d]),Re=S.useCallback(Z=>{g(Z),b(!0)},[]),xe=S.useMemo(()=>pK[y==null?void 0:y.id]??"Contribuye al dilogo crtico",[y]),He=S.useCallback(()=>{d!=="loading"&&b(!1)},[d]),Be=()=>h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-4 py-3 text-[0.8rem] text-slate-300 leading-relaxed",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:"Qu necesitas saber?"}),h.jsx("p",{children:" Algunos miniversos an estn bajo construccin."}),h.jsx("p",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),h.jsx("p",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."}),h.jsx("div",{className:"border-t border-white/10 pt-3 text-xs uppercase tracking-[0.35em] text-slate-500",children:" Qu recibirs?"}),h.jsx("p",{className:"text-sm",children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]}),ge=()=>h.jsxs("div",{className:"relative",children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Formulario"}),h.jsx("h3",{id:"contribution-modal-title",className:"font-display text-2xl text-slate-50",children:xe}),h.jsxs("p",{className:"text-sm text-slate-400/80",children:["Ests escribiendo sobre"," ",h.jsx("span",{className:"text-purple-200 font-semibold",children:y.title})]})]}),F?h.jsx("button",{type:"button",onClick:He,className:"mb-4 flex items-center gap-2 text-sm font-semibold text-purple-300 hover:text-purple-200",children:" Ver Ms"}):null,F&&GM.has(y.id)?h.jsx("div",{className:"mb-4",children:Be()}):null,h.jsxs("form",{className:"space-y-4",onSubmit:ve,children:[h.jsxs("div",{children:[h.jsx("input",{name:"name",type:"text",required:!0,value:l.name,onChange:q,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo quieres que te nombremos?"}),h.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"As quieres que te llamemos? Dinos cmo te gusta que te nombren."})]}),h.jsxs("div",{children:[h.jsx("input",{name:"email",type:"email",required:!0,value:l.email,onChange:q,readOnly:s,className:`w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 ${s?"cursor-not-allowed opacity-80":""}`,placeholder:"nombre@correo.com"}),s?h.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El correo se toma de tu sesin actual."}):null]}),h.jsx("input",{name:"role",type:"text",value:l.role,onChange:q,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Crtica teatral, artista, investigador, espectador..."}),h.jsx("textarea",{name:"proposal",rows:5,required:!0,value:l.proposal,onChange:q,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Resume tu texto, crnica o propuesta curatorial..."}),h.jsx("input",{name:"attachmentUrl",type:"url",value:l.attachmentUrl,onChange:q,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Enlace a material adicional (Drive, portfolio, video...)"}),h.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-white/5 bg-black/20 px-4 py-3",children:[h.jsxs(ne.button,{type:"button",onClick:ie,"aria-label":"Activar notificacin de publicacin",className:"relative flex items-center gap-3 text-left group focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-purple-400/60",children:[h.jsx(ne.div,{animate:V?{scale:[1,1.05,1],boxShadow:w?"0 0 18px rgba(74,222,128,0.65)":"0 0 12px rgba(74,222,128,0.45)",filter:"drop-shadow(0 0 10px rgba(74,222,128,0.45))"}:{scale:1,boxShadow:"0 0 0 rgba(0,0,0,0)"},transition:{duration:.45,ease:"easeOut"},className:`h-5 w-5 rounded-full border border-white/20 ${V?"bg-emerald-400 shadow-[0_0_12px_4px_rgba(52,211,153,0.65)] ring-2 ring-emerald-300/70":"bg-slate-600/40"}`}),h.jsx("span",{className:"text-sm text-slate-300/80 leading-relaxed",children:"Quiero recibir notificacin cuando se publique mi propuesta"})]}),s?null:h.jsx("span",{className:"pl-8 text-xs text-slate-500",children:"Inicia sesin para activar el seguimiento"})]}),d==="error"?h.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:p}):null,d==="success"?h.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Recibimos tu propuesta. Te contactaremos si necesitamos ms detalles."}):null,h.jsx(we,{type:"submit",disabled:d==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:d==="loading"?"Enviando":"Enviar propuesta"})]}),O&&GM.has(y.id)?h.jsx("div",{className:"mt-6 space-y-3",children:Be()}):null]});return h.jsxs(h.Fragment,{children:[h.jsx(fa,{children:n?h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6 sm:py-12",initial:"hidden",animate:"visible",exit:"hidden",children:[h.jsx(ne.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:hK,onClick:Ke,"aria-hidden":"true"}),h.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"contribution-modal-title",variants:fK,className:"relative z-10 w-full max-w-5xl h-full max-h-[90vh] rounded-3xl border border-white/10 bg-slate-950 p-4 sm:p-8 shadow-2xl overflow-y-auto md:overflow-hidden flex flex-col gap-6",children:[h.jsxs("div",{className:"relative overflow-visible",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Blog / Dilogo vivo"}),h.jsx("h2",{className:"font-display text-2xl sm:text-3xl text-slate-50",children:"Contribuye al dilogo crtico"})]}),h.jsx("button",{onClick:Ke,className:"text-slate-400 hover:text-white transition text-xl leading-none","aria-label":"Cerrar formulario de propuestas",children:""})]}),C.map(Z=>h.jsx(gK,{seed:Z},Z))]}),h.jsxs("div",{className:"mt-6 flex flex-col gap-6 md:flex-row md:items-start md:gap-6",children:[h.jsxs("div",{className:"flex-1 space-y-3 pr-3 md:pr-0 md:overflow-y-auto md:max-h-[72vh]",children:[xa.map(Z=>h.jsxs("button",{type:"button",onClick:()=>Re(Z),className:`w-full rounded-2xl border px-4 py-4 text-left transition ${y.id===Z.id?"bg-purple-500/15 border-purple-300/40":"bg-black/20 border-white/10 hover:border-purple-300/30"}`,children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Z.icon,h.jsx("h4",{className:"text-slate-100 font-medium",children:Z.title})]}),h.jsx("p",{className:"text-sm text-slate-400/80 leading-relaxed whitespace-pre-line",children:Z.description})]},Z.id)),h.jsx("div",{className:"pt-2 text-center text-xs text-purple-200/80",children:h.jsx("button",{type:"button",onClick:me,className:"underline-offset-4 hover:underline",children:"No conoces los Miniversos? Clica aqu"})})]}),O?h.jsx("div",{className:"md:w-[520px] md:shrink-0",children:x?h.jsx(ne.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.35,ease:"easeOut"},className:"flex h-full max-h-[78vh] flex-col rounded-3xl border border-white/10 bg-slate-950/90 p-6 shadow-2xl overflow-y-auto",children:ge()}):h.jsx("div",{className:"flex h-full min-h-[320px] items-center justify-center rounded-3xl border border-dashed border-white/10 bg-black/30 px-4 text-center text-sm text-slate-400",children:"Selecciona una categora para abrir el formulario."})}):null]}),h.jsx(fa,{children:!O&&x?h.jsx(h.Fragment,{children:h.jsx(ne.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:24,stiffness:240},className:"fixed inset-0 z-[60] w-full bg-slate-950 border-white/15 shadow-2xl p-6 overflow-y-auto md:hidden",children:ge()})}):null})]})]}):null}),h.jsx(fa,{children:E?h.jsx(Sk,{onClose:P}):null})]})};async function mK({email:n,name:e,proposal:t,category:r}){if(n)try{const{error:s}=await wt.functions.invoke("send-proposal-confirmation",{body:{email:n,name:e,proposal:t,category:r}});s&&console.error("[ContributionModal] Error en sendConfirmationEmail:",s)}catch(s){console.error("[ContributionModal] Excepcin en sendConfirmationEmail:",s)}}const WM=["#f472b6","#a855f7","#facc15","#34d399"],gK=({seed:n})=>{const e=S.useMemo(()=>Array.from({length:12},(t,r)=>({left:Math.random()*100,top:Math.random()*20,delay:Math.random()*.2,color:WM[r%WM.length]})),[n]);return h.jsx("div",{className:"confetti-layer",children:e.map((t,r)=>h.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${t.top}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${r}`))})},$4="blog_posts",zx=[],XM=()=>`post-${Math.random().toString(36).slice(2,10)}`,r_=n=>({id:n.id??n.slug??XM(),slug:n.slug??`post-${n.id??XM()}`,title:n.title??"Entrada sin ttulo",excerpt:n.excerpt??n.summary??"",author:n.author??n.byline??"Autora pendiente",author_role:n.author_role??n.role??"",content:n.content??n.body??"",published_at:n.published_at??n.publish_date??null,read_time_minutes:n.read_time_minutes??n.read_time??null,tags:n.tags??[],featured_image_url:n.featured_image_url??n.cover_image??null});async function yK(){try{const{data:n,error:e}=await wt.from($4).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).order("published_at",{ascending:!1}).limit(20);if(e)return console.error("[blogService] Error al obtener posts:",e.message),zx;if(!Array.isArray(n)||n.length===0)return zx;const t=n.filter(s=>s.is_published===!0||s.is_published===null||typeof s.is_published>"u").map(r_),r=zx.filter(s=>!t.some(i=>i.slug===s.slug)).map(r_);return[...t,...r]}catch(n){return console.error("[blogService] Excepcin al obtener posts:",n),zx}}async function vK(n){if(!n)return null;try{const{data:e,error:t}=await wt.from($4).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).eq("slug",n).maybeSingle();return t?(console.error("[blogService] Error al obtener post por slug:",t.message),null):!e||e.is_published===!1?null:r_(e)}catch(e){return console.error("[blogService] Excepcin al buscar post por slug:",e),null}}const cr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),s_=[.001,0,0,.001,0,0],rE=1.35,ls={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},la={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xg="pdfjs_internal_editor_",Ne={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},We={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},V4={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},_n={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Sg={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Yt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},zd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},qv={ERRORS:0,WARNINGS:1,INFOS:5},Op={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},$x={moveTo:0,lineTo:1,curveTo:2,closePath:3},U4={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let kk=qv.WARNINGS;function xK(n){Number.isInteger(n)&&(kk=n)}function bK(){return kk}function Ak(n){kk>=qv.INFOS&&console.info(`Info: ${n}`)}function Pe(n){kk>=qv.WARNINGS&&console.warn(`Warning: ${n}`)}function mt(n){throw new Error(n)}function Xe(n,e){n||mt(e)}function wK(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function EN(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=CK(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return wK(r)?r:null}function CN(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&EN(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Oe(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const jd=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class KM extends jd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class sE extends jd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Lw extends jd{constructor(e){super(e,"InvalidPDFException")}}class Kg extends jd{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class SK extends jd{constructor(e){super(e,"FormatError")}}class _o extends jd{constructor(e){super(e,"AbortException")}}function H4(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&mt("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let s=0;s<e;s+=t){const i=Math.min(s+t,e),a=n.subarray(s,i);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function Gv(n){typeof n!="string"&&mt("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function kK(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function AK(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function EK(){try{return new Function(""),!0}catch{return!1}}class Cn{static get isLittleEndian(){return Oe(this,"isLittleEndian",AK())}static get isEvalSupported(){return Oe(this,"isEvalSupported",EK())}static get isOffscreenCanvasSupported(){return Oe(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Oe(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Oe(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Oe(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const iE=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var _h,bb,r0,i_;class ce{static makeHexColor(e,t,r){return`#${iE[e]}${iE[t]}${iE[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const s=e[r],i=e[r+1];e[r]=s*t[0]+i*t[2]+t[4],e[r+1]=s*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const s=t[0],i=t[1],a=t[2],o=t[3],l=t[4],c=t[5];for(let d=0;d<6;d+=2){const f=e[r+d],p=e[r+d+1];e[r+d]=f*s+p*a+l,e[r+d+1]=f*i+p*o+c}}static applyInverseTransform(e,t){const r=e[0],s=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-r*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,r){const s=t[0],i=t[1],a=t[2],o=t[3],l=t[4],c=t[5],d=e[0],f=e[1],p=e[2],m=e[3];let y=s*d+l,g=y,w=s*p+l,v=w,x=o*f+c,b=x,C=o*m+c,_=C;if(i!==0||a!==0){const E=i*d,N=i*p,j=a*f,M=a*m;y+=j,v+=j,w+=M,g+=M,x+=E,_+=E,C+=N,b+=N}r[0]=Math.min(r[0],y,w,g,v),r[1]=Math.min(r[1],x,C,b,_),r[2]=Math.max(r[2],y,w,g,v),r[3]=Math.max(r[3],x,C,b,_)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],s=e[1],i=e[2],a=e[3],o=r**2+s**2,l=r*i+s*a,c=i**2+a**2,d=(o+c)/2,f=Math.sqrt(d**2-(o*c-l**2));t[0]=Math.sqrt(d+f||1),t[1]=Math.sqrt(d-f||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>s)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>a?null:[r,i,s,a]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,s,i){i[0]=Math.min(i[0],e,r),i[1]=Math.min(i[1],t,s),i[2]=Math.max(i[2],e,r),i[3]=Math.max(i[3],t,s)}static bezierBoundingBox(e,t,r,s,i,a,o,l,c){c[0]=Math.min(c[0],e,o),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,o),c[3]=Math.max(c[3],t,l),T(this,r0,i_).call(this,e,r,i,o,t,s,a,l,3*(-e+3*(r-i)+o),6*(e-2*r+i),3*(r-e),c),T(this,r0,i_).call(this,e,r,i,o,t,s,a,l,3*(-t+3*(s-a)+l),6*(t-2*s+a),3*(s-t),c)}}_h=new WeakSet,bb=function(e,t,r,s,i,a,o,l,c,d){if(c<=0||c>=1)return;const f=1-c,p=c*c,m=p*c,y=f*(f*(f*e+3*c*t)+3*p*r)+m*s,g=f*(f*(f*i+3*c*a)+3*p*o)+m*l;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],g)},r0=new WeakSet,i_=function(e,t,r,s,i,a,o,l,c,d,f,p){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&T(this,_h,bb).call(this,e,t,r,s,i,a,o,l,-f/d,p);return}const m=d**2-4*f*c;if(m<0)return;const y=Math.sqrt(m),g=2*c;T(this,_h,bb).call(this,e,t,r,s,i,a,o,l,(-d+y)/g,p),T(this,_h,bb).call(this,e,t,r,s,i,a,o,l,(-d-y)/g,p)},k(ce,_h),k(ce,r0);function CK(n){return decodeURIComponent(escape(n))}let aE=null,YM=null;function q4(n){return aE||(aE=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,YM=new Map([["","t"]])),n.replaceAll(aE,(e,t,r)=>t?t.normalize("NFKC"):YM.get(r))}function _N(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),H4(n)}const TN="pdfjs_internal_id_";function _K(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,s,...i]=t;if(!n(r)&&!Number.isInteger(r)||!e(s))return!1;const a=i.length;let o=!0;switch(s.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Yn(n,e,t){return Math.min(Math.max(n,e),t)}function G4(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(H4(n))}function TK(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Gv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Yg{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function s(i){var l;if(!i)return;let a=null;const o=i.name;if(o==="#text")a=i.value;else if(Yg.shouldBuildText(o))(l=i==null?void 0:i.attributes)!=null&&l.textContent?a=i.attributes.textContent:i.value&&(a=i.value);else return;if(a!==null&&t.push({str:a}),!!i.children)for(const c of i.children)s(c)}return s(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class NN{static setupStorage(e,t,r,s,i){const a=s.getValue(t,{value:null});switch(r.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(a.value===r.attributes.xfaOn?e.setAttribute("checked",!0):a.value===r.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",o=>{s.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),i==="print")break;e.addEventListener("input",o=>{s.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of r.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:s,linkService:i}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,c]of Object.entries(a))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}o&&i.addLinkAttributes(e,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(e,a.dataId,t,r)}static render(e){var f,p;const t=e.annotationStorage,r=e.linkService,s=e.xfaHtml,i=e.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:i,linkService:r});const o=i!=="richText",l=e.div;if(l.append(a),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);a.append(m),o&&Yg.shouldBuildText(s.name)&&c.push(m)}return{textDivs:c}}const d=[[s,-1,a]];for(;d.length>0;){const[m,y,g]=d.at(-1);if(y+1===m.children.length){d.pop();continue}const w=m.children[++d.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const b=document.createTextNode(w.value);c.push(b),g.append(b);continue}const x=(f=w==null?void 0:w.attributes)!=null&&f.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:t,intent:i,linkService:r}),((p=w.children)==null?void 0:p.length)>0)d.push([w,-1,x]);else if(w.value){const b=document.createTextNode(w.value);o&&Yg.shouldBuildText(v)&&c.push(b),x.append(b)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Sa="http://www.w3.org/2000/svg",jc=class jc{};J(jc,"CSS",96),J(jc,"PDF",72),J(jc,"PDF_TO_CSS_UNITS",jc.CSS/jc.PDF);let To=jc;async function Wp(n,e="text"){if(Om(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}r(new Error(s.statusText))}},s.send(null)})}class Wv{constructor({viewBox:e,userUnit:t,scale:r,rotation:s,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=s,this.offsetX=i,this.offsetY=a,r*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let d,f,p,m;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,f=0,p=0,m=1;break;case 90:d=0,f=1,p=1,m=0;break;case 270:d=0,f=-1,p=-1,m=0;break;case 0:d=1,f=0,p=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(p=-p,m=-m);let y,g,w,v;d===0?(y=Math.abs(c-e[1])*r+i,g=Math.abs(l-e[0])*r+a,w=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(y=Math.abs(l-e[0])*r+i,g=Math.abs(c-e[1])*r+a,w=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[d*r,f*r,p*r,m*r,y-d*r*l-p*r*c,g-f*r*l-m*r*c],this.width=w,this.height=v}get rawDims(){const e=this.viewBox;return Oe(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:s=this.offsetY,dontFlip:i=!1}={}){return new Wv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}convertToViewportPoint(e,t){const r=[e,t];return ce.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];ce.applyTransform(t,this.transform);const r=[e[2],e[3]];return ce.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return ce.applyInverseTransform(r,this.transform),r}}class Ek extends jd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function Xv(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Ck(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function W4(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function X4(n,e="document.pdf"){if(typeof n!="string")return e;if(Xv(n))return Pe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const s=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},i=/\.pdf$/i,a=r.pathname.split("/").at(-1);if(i.test(a))return s(a);if(r.searchParams.size>0){const o=Array.from(r.searchParams.values()).reverse();for(const c of o)if(i.test(c))return s(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(i.test(c))return s(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return s(l[0])}return e}class QM{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(e){e in this.started&&Pe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Pe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:s,end:i}of this.times)e.push(`${r.padEnd(t)} ${i-s}ms
`);return e.join("")}}function Om(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function gs(n){n.preventDefault()}function Bt(n){n.preventDefault(),n.stopPropagation()}function NK(n){console.log("Deprecated API usage: "+n)}var s0;class Qg{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,s0)||A(this,s0,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,s0).exec(e);if(!t)return null;const r=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(a+=d,o+=f):c==="+"&&(a-=d,o-=f),new Date(Date.UTC(r,s,i,a,o,l))}}s0=new WeakMap,k(Qg,s0,void 0);function K4(n,{scale:e=1,rotation:t=0}){const{width:r,height:s}=n.attributes.style,i=[0,0,parseInt(r),parseInt(s)];return new Wv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Xp(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Pe(`Not a valid color format: "${n}"`),[0,0,0])}function PK(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Xp(r))}e.remove()}function Ot(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform();return[e,t,r,s,i,a]}function ji(n){const{a:e,b:t,c:r,d:s,e:i,f:a}=n.getTransform().invertSelf();return[e,t,r,s,i,a]}function ac(n,e,t=!1,r=!0){if(e instanceof Wv){const{pageWidth:s,pageHeight:i}=e.rawDims,{style:a}=n,o=Cn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,c=`var(--total-scale-factor) * ${i}px`,d=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,f=o?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(a.width=d,a.height=f):(a.width=f,a.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class Ai{constructor(){const{pixelRatio:e}=Ai;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,s,i=-1){let a=1/0,o=1/0,l=1/0;r=Ai.capPixels(r,i),r>0&&(a=Math.sqrt(r/(e*t))),s!==-1&&(o=s/e,l=s/t);const c=Math.min(a,o,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const Dw=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class jK{static get isDarkMode(){var e;return Oe(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class Y4{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),Oe(this,"commentForegroundColor",Xp(r))}}function Q4(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const s=255*(1-r);return n=Math.round(n*r+s),e=Math.round(e*r+s),t=Math.round(t*r+s),[n,e,t]}function JM(n,e){const t=n[0]/255,r=n[1]/255,s=n[2]/255,i=Math.max(t,r,s),a=Math.min(t,r,s),o=(i+a)/2;if(i===a)e[0]=e[1]=0;else{const l=i-a;switch(e[1]=o<.5?l/(i+a):l/(2-i-a),i){case t:e[0]=((r-s)/l+(r<s?6:0))*60;break;case r:e[0]=((s-t)/l+2)*60;break;case s:e[0]=((t-r)/l+4)*60;break}}e[2]=o}function a_(n,e){const t=n[0],r=n[1],s=n[2],i=(1-Math.abs(2*s-1))*r,a=i*(1-Math.abs(t/60%2-1)),o=s-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=i+o,e[2]=o;break;case 2:e[0]=o,e[1]=i+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=i+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=i+o;break;case 5:case 6:e[0]=i+o,e[1]=o,e[2]=a+o;break}}function ZM(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function eI(n,e,t){a_(n,t),t.map(ZM);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];a_(e,t),t.map(ZM);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>s?(r+.05)/(s+.05):(s+.05)/(r+.05)}const tI=new Map;function J4(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=tI.get(t);if(r)return r;const s=new Float32Array(9),i=s.subarray(0,3),a=s.subarray(3,6);JM(n,a);const o=s.subarray(6,9);JM(e,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),eI(a,o,i)<c){let d,f;l?(d=a[2],f=1):(d=0,f=a[2]);const p=.005;for(;f-d>p;){const m=a[2]=(d+f)/2;l===eI(a,o,i)<c?d=m:f=m}a[2]=l?f:d}return a_(a,i),r=ce.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),tI.set(t,r),r}function PN({html:n,dir:e,className:t},r){const s=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const a=n.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const c=a[o];i.append(document.createTextNode(c)),o<l-1&&i.append(document.createElement("br"))}s.append(i)}else NN.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),r.append(s)}var Ho,qo,Cs,_s,i0,Go,Th,Nh,a0,Yw,Z4,Qw,e5,Jw,t5,Wo,$d,Bc,Fm;const _a=class _a{constructor(e){k(this,Qw);k(this,Jw);k(this,Wo);k(this,Bc);k(this,Ho,null);k(this,qo,null);k(this,Cs,void 0);k(this,_s,null);k(this,i0,null);k(this,Go,null);k(this,Th,null);k(this,Nh,null);A(this,Cs,e),u(_a,a0)||A(_a,a0,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=A(this,Ho,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,Cs)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",gs,{signal:t}),e.addEventListener("pointerdown",T(_a,Yw,Z4),{signal:t}));const r=A(this,_s,document.createElement("div"));r.className="buttons",e.append(r);const s=u(this,Cs).toolbarPosition;if(s){const{style:i}=e,a=u(this,Cs)._uiManager.direction==="ltr"?1-s[0]:s[0];i.insetInlineEnd=`${100*a}%`,i.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Ho)}hide(){var e;u(this,Ho).classList.add("hidden"),(e=u(this,qo))==null||e.hideDropdown()}show(){var e,t;u(this,Ho).classList.remove("hidden"),(e=u(this,i0))==null||e.shown(),(t=u(this,Go))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,Cs),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",u(_a,a0)[e]),T(this,Wo,$d).call(this,r)&&r.addEventListener("click",s=>{t.delete()},{signal:t._signal}),u(this,_s).append(r)}async addAltText(e){const t=await e.render();T(this,Wo,$d).call(this,t),u(this,_s).append(t,u(this,Bc,Fm)),A(this,i0,e)}addComment(e,t=null){if(u(this,Go))return;const r=e.renderForToolbar();if(!r)return;T(this,Wo,$d).call(this,r);const s=A(this,Th,u(this,Bc,Fm));t?(u(this,_s).insertBefore(r,t),u(this,_s).insertBefore(s,t)):u(this,_s).append(r,s),A(this,Go,e),e.toolbar=this}addColorPicker(e){if(u(this,qo))return;A(this,qo,e);const t=e.renderButton();T(this,Wo,$d).call(this,t),u(this,_s).append(t,u(this,Bc,Fm))}async addEditSignatureButton(e){const t=A(this,Nh,await e.renderEditButton(u(this,Cs)));T(this,Wo,$d).call(this,t),u(this,_s).append(t,u(this,Bc,Fm))}removeButton(e){var t,r;switch(e){case"comment":(t=u(this,Go))==null||t.removeToolbarCommentButton(),A(this,Go,null),(r=u(this,Th))==null||r.remove(),A(this,Th,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,r){const s=u(this,_s).querySelector(r);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){u(this,Nh)&&(u(this,Nh).title=e)}remove(){var e;u(this,Ho).remove(),(e=u(this,qo))==null||e.destroy(),A(this,qo,null)}};Ho=new WeakMap,qo=new WeakMap,Cs=new WeakMap,_s=new WeakMap,i0=new WeakMap,Go=new WeakMap,Th=new WeakMap,Nh=new WeakMap,a0=new WeakMap,Yw=new WeakSet,Z4=function(e){e.stopPropagation()},Qw=new WeakSet,e5=function(e){u(this,Cs)._focusEventsAllowed=!1,Bt(e)},Jw=new WeakSet,t5=function(e){u(this,Cs)._focusEventsAllowed=!0,Bt(e)},Wo=new WeakSet,$d=function(e){const t=u(this,Cs)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",T(this,Qw,e5).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",T(this,Jw,t5).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",gs,{signal:t}),!0)},Bc=new WeakSet,Fm=function(){const e=document.createElement("div");return e.className="divider",e},k(_a,Yw),k(_a,a0,null);let o_=_a;var o0,zc,Pa,Zw,n5,e1,r5,l0,l_;class RK{constructor(e){k(this,Zw);k(this,e1);k(this,l0);k(this,o0,null);k(this,zc,null);k(this,Pa,void 0);A(this,Pa,e)}show(e,t,r){const[s,i]=T(this,e1,r5).call(this,t,r),{style:a}=u(this,zc)||A(this,zc,T(this,Zw,n5).call(this));e.append(u(this,zc)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,zc).remove()}}o0=new WeakMap,zc=new WeakMap,Pa=new WeakMap,Zw=new WeakSet,n5=function(){const e=A(this,zc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,Pa)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",gs,{signal:t});const r=A(this,o0,document.createElement("div"));return r.className="buttons",e.append(r),u(this,Pa).hasCommentManager()&&T(this,l0,l_).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,Pa).commentSelection("floating_button")}),T(this,l0,l_).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,Pa).highlightSelection("floating_button")}),e},e1=new WeakSet,r5=function(e,t){let r=0,s=0;for(const i of e){const a=i.y+i.height;if(a<r)continue;const o=i.x+(t?i.width:0);if(a>r){s=o,r=a;continue}t?o>s&&(s=o):o<s&&(s=o)}return[t?1-s:s,r]},l0=new WeakSet,l_=function(e,t,r,s){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const a=document.createElement("span");i.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",r);const o=u(this,Pa)._signal;o instanceof AbortSignal&&!o.aborted&&(i.addEventListener("contextmenu",gs,{signal:o}),i.addEventListener("click",s,{signal:o})),u(this,o0).append(i)};function s5(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var t1;class MK{constructor(){k(this,t1,0)}get id(){return`${Xg}${ln(this,t1)._++}`}}t1=new WeakMap;var Ph,c0,Un,jh,wb;const iP=class iP{constructor(){k(this,jh);k(this,Ph,_N());k(this,c0,0);k(this,Un,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const i=s.decode().then(()=>(r.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Oe(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:r,size:s,type:i}=e;return T(this,jh,wb).call(this,`${t}_${r}_${s}_${i}`,e)}async getFromUrl(e){return T(this,jh,wb).call(this,e,e)}async getFromBlob(e,t){const r=await t;return T(this,jh,wb).call(this,e,r)}async getFromId(e){u(this,Un)||A(this,Un,new Map);const t=u(this,Un).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Un)||A(this,Un,new Map);let r=u(this,Un).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),r={bitmap:s.transferToImageBitmap(),id:`image_${u(this,Ph)}_${ln(this,c0)._++}`,refCounter:1,isSvg:!1},u(this,Un).set(e,r),u(this,Un).set(r.id,r),r}getSvgUrl(e){const t=u(this,Un).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;u(this,Un)||A(this,Un,new Map);const t=u(this,Un).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=i.convertToBlob()}(s=r.close)==null||s.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,Ph)}_`)}};Ph=new WeakMap,c0=new WeakMap,Un=new WeakMap,jh=new WeakSet,wb=async function(e,t){u(this,Un)||A(this,Un,new Map);let r=u(this,Un).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${u(this,Ph)}_${ln(this,c0)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(r.url=t,s=await Wp(t,"blob")):t instanceof File?s=r.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const i=iP._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((c,d)=>{o.onload=()=>{r.bitmap=o,r.isSvg=!0,c()},a.onload=async()=>{const f=r.svgUrl=a.result;o.src=await i?`${f}#svgView(preserveAspectRatio(none))`:f},o.onerror=a.onerror=d});a.readAsDataURL(s),await l}else r.bitmap=await createImageBitmap(s);r.refCounter=1}catch(s){Pe(s),r=null}return u(this,Un).set(e,r),r&&u(this,Un).set(r.id,r),r};let c_=iP;var Qt,Xo,u0,Dt;class IK{constructor(e=128){k(this,Qt,[]);k(this,Xo,!1);k(this,u0,void 0);k(this,Dt,-1);A(this,u0,e)}add({cmd:e,undo:t,post:r,mustExec:s,type:i=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&e(),u(this,Xo))return;const l={cmd:e,undo:t,post:r,type:i};if(u(this,Dt)===-1){u(this,Qt).length>0&&(u(this,Qt).length=0),A(this,Dt,0),u(this,Qt).push(l);return}if(a&&u(this,Qt)[u(this,Dt)].type===i){o&&(l.undo=u(this,Qt)[u(this,Dt)].undo),u(this,Qt)[u(this,Dt)]=l;return}const c=u(this,Dt)+1;c===u(this,u0)?u(this,Qt).splice(0,1):(A(this,Dt,c),c<u(this,Qt).length&&u(this,Qt).splice(c)),u(this,Qt).push(l)}undo(){if(u(this,Dt)===-1)return;A(this,Xo,!0);const{undo:e,post:t}=u(this,Qt)[u(this,Dt)];e(),t==null||t(),A(this,Xo,!1),A(this,Dt,u(this,Dt)-1)}redo(){if(u(this,Dt)<u(this,Qt).length-1){A(this,Dt,u(this,Dt)+1),A(this,Xo,!0);const{cmd:e,post:t}=u(this,Qt)[u(this,Dt)];e(),t==null||t(),A(this,Xo,!1)}}hasSomethingToUndo(){return u(this,Dt)!==-1}hasSomethingToRedo(){return u(this,Dt)<u(this,Qt).length-1}cleanType(e){if(u(this,Dt)!==-1){for(let t=u(this,Dt);t>=0;t--)if(u(this,Qt)[t].type!==e){u(this,Qt).splice(t+1,u(this,Dt)-t),A(this,Dt,t);return}u(this,Qt).length=0,A(this,Dt,-1)}}destroy(){A(this,Qt,null)}}Qt=new WeakMap,Xo=new WeakMap,u0=new WeakMap,Dt=new WeakMap;var n1,i5;class Kv{constructor(e){k(this,n1);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Cn.platform;for(const[r,s,i={}]of e)for(const a of r){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:s,options:i}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(T(this,n1,i5).call(this,t));if(!r)return;const{callback:s,options:{bubbles:i=!1,args:a=[],checker:o=null}}=r;o&&!o(e,t)||(s.bind(e,...a,t)(),i||Bt(t))}}n1=new WeakSet,i5=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const r1=class r1{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return PK(e),Oe(this,"_colors",e)}convert(e){const t=Xp(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,s]of this._colors)if(s.every((i,a)=>i===t[a]))return r1._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?ce.makeHexColor(...t):e}};J(r1,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let u_=r1;var Rh,Hr,Mh,Ht,dn,Ih,Ts,Lh,Ns,Hn,Ko,Yo,Dh,Qo,Oi,Ps,$c,d0,h0,Oh,f0,Fi,Jo,Fh,Zo,Bi,s1,el,Bh,p0,tl,Vc,zh,nl,m0,tn,st,ja,rl,sl,g0,$h,y0,il,zi,Ra,v0,x0,js,Vh,Sb,b0,d_,i1,a5,a1,o5,Uc,Bm,o1,l5,l1,c5,c1,u5,w0,h_,u1,d5,S0,f_,k0,p_,d1,h5,Tn,rr,si,ka,h1,f5,f1,p5,A0,m_,p1,m5,Hc,zm,E0,g_;const hh=class hh{constructor(e,t,r,s,i,a,o,l,c,d,f,p,m,y,g,w){k(this,Vh);k(this,b0);k(this,i1);k(this,a1);k(this,Uc);k(this,o1);k(this,l1);k(this,c1);k(this,w0);k(this,u1);k(this,S0);k(this,k0);k(this,d1);k(this,Tn);k(this,si);k(this,h1);k(this,f1);k(this,A0);k(this,p1);k(this,Hc);k(this,E0);k(this,Rh,new AbortController);k(this,Hr,null);k(this,Mh,null);k(this,Ht,new Map);k(this,dn,new Map);k(this,Ih,null);k(this,Ts,null);k(this,Lh,null);k(this,Ns,new IK);k(this,Hn,null);k(this,Ko,null);k(this,Yo,null);k(this,Dh,0);k(this,Qo,new Set);k(this,Oi,null);k(this,Ps,null);k(this,$c,new Set);J(this,"_editorUndoBar",null);k(this,d0,!1);k(this,h0,!1);k(this,Oh,!1);k(this,f0,null);k(this,Fi,null);k(this,Jo,null);k(this,Fh,null);k(this,Zo,!1);k(this,Bi,null);k(this,s1,new MK);k(this,el,!1);k(this,Bh,!1);k(this,p0,!1);k(this,tl,null);k(this,Vc,null);k(this,zh,null);k(this,nl,null);k(this,m0,null);k(this,tn,Ne.NONE);k(this,st,new Set);k(this,ja,null);k(this,rl,null);k(this,sl,null);k(this,g0,null);k(this,$h,null);k(this,y0,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});k(this,il,[0,0]);k(this,zi,null);k(this,Ra,null);k(this,v0,null);k(this,x0,null);k(this,js,null);const v=this._signal=u(this,Rh).signal;A(this,Ra,e),A(this,v0,t),A(this,x0,r),A(this,Ih,s),A(this,Hn,i),A(this,rl,a),A(this,$h,l),this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:v}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),o._on("setpreference",this.onSetPreference.bind(this),{signal:v}),o._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),window.addEventListener("pointerdown",()=>{A(this,Bh,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{A(this,Bh,!1)},{capture:!0,signal:v}),T(this,o1,l5).call(this),T(this,d1,h5).call(this),T(this,w0,h_).call(this),A(this,Ts,l.annotationStorage),A(this,f0,l.filterFactory),A(this,sl,c),A(this,Fh,d||null),A(this,d0,f),A(this,h0,p),A(this,Oh,m),A(this,m0,y||null),this.viewParameters={realScale:To.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=w!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=hh.prototype,t=a=>u(a,Ra).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),r=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return Oe(this,"_keyboardManager",new Kv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,Ra).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&u(a,Ra).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,r,s,i,a,o,l,c;(e=u(this,js))==null||e.resolve(),A(this,js,null),(t=u(this,Rh))==null||t.abort(),A(this,Rh,null),this._signal=null;for(const d of u(this,dn).values())d.destroy();u(this,dn).clear(),u(this,Ht).clear(),u(this,$c).clear(),(r=u(this,nl))==null||r.clear(),A(this,Hr,null),u(this,st).clear(),u(this,Ns).destroy(),(s=u(this,Ih))==null||s.destroy(),(i=u(this,Hn))==null||i.destroy(),(a=u(this,rl))==null||a.destroy(),(o=u(this,Bi))==null||o.hide(),A(this,Bi,null),(l=u(this,zh))==null||l.destroy(),A(this,zh,null),A(this,Mh,null),u(this,Fi)&&(clearTimeout(u(this,Fi)),A(this,Fi,null)),u(this,zi)&&(clearTimeout(u(this,zi)),A(this,zi,null)),(c=this._editorUndoBar)==null||c.destroy(),A(this,$h,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,m0)}get useNewAltTextFlow(){return u(this,h0)}get useNewAltTextWhenAddingImage(){return u(this,Oh)}get hcmFilter(){return Oe(this,"hcmFilter",u(this,sl)?u(this,f0).addHCMFilter(u(this,sl).foreground,u(this,sl).background):"none")}get direction(){return Oe(this,"direction",getComputedStyle(u(this,Ra)).direction)}get _highlightColors(){return Oe(this,"_highlightColors",u(this,Fh)?new Map(u(this,Fh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Oe(this,"highlightColors",null);const t=new Map,r=!!u(this,sl);for(const[s,i]of e){const a=s.endsWith("_HCM");if(r&&a){t.set(s.replace("_HCM",""),i);continue}!r&&!a&&t.set(s,i)}return Oe(this,"highlightColors",t)}get highlightColorNames(){return Oe(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,Yo,e)}setMainHighlightColorPicker(e){A(this,zh,e)}editAltText(e,t=!1){var r;(r=u(this,Ih))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!u(this,Hn)}editComment(e,t,r,s){var i;(i=u(this,Hn))==null||i.showDialog(this,e,t,r,s)}selectComment(e,t){const r=u(this,dn).get(e),s=r==null?void 0:r.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,Hn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,Hn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,Hn))==null||t.removeComments([e.uid])}toggleComment(e,t,r=void 0){var s;(s=u(this,Hn))==null||s.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=u(this,Hn))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,Hn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,dn).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),s=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await r}getSignature(e){var t;(t=u(this,rl))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,rl)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,Oh,t);break}}onPageChanging({pageNumber:e}){A(this,Dh,e-1)}focusMainContainer(){u(this,Ra).focus()}findParent(e,t){for(const r of u(this,dn).values()){const{x:s,y:i,width:a,height:o}=r.div.getBoundingClientRect();if(e>=s&&e<=s+a&&t>=i&&t<=i+o)return r}return null}disableUserSelect(e=!1){u(this,v0).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,$c).add(e)}removeShouldRescale(e){u(this,$c).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*To.PDF_TO_CSS_UNITS;for(const r of u(this,$c))r.onScaleChanging();(t=u(this,Yo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:o}=r,l=r.toString(),d=T(this,Vh,Sb).call(this,r).closest(".textLayer"),f=this.getSelectionBoxes(d);if(!f)return;r.empty();const p=T(this,b0,d_).call(this,d),m=u(this,tn)===Ne.NONE,y=()=>{const g=p==null?void 0:p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:f,anchorNode:s,anchorOffset:i,focusNode:a,focusOffset:o,text:l});m&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(m){this.switchToMode(Ne.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,Ts))return null;const t=`${Xg}${e}`,r=u(this,Ts).getRawValue(t);return r&&u(this,Ts).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&u(this,Ts)&&!u(this,Ts).has(e.id)&&u(this,Ts).setValue(e.id,e)}a11yAlert(e,t=null){const r=u(this,x0);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,Zo)&&(A(this,Zo,!1),T(this,Uc,Bm).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,st))if(t.div.contains(e)){A(this,Vc,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,Vc))return;const[e,t]=u(this,Vc);A(this,Vc,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){T(this,w0,h_).call(this),T(this,S0,f_).call(this)}removeEditListeners(){T(this,u1,d5).call(this),T(this,k0,p_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of u(this,Ps))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of u(this,Ps))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=u(this,Hr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of u(this,st)){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const a of u(this,Ps))if(a.isHandlingMimeForPasting(i.type)){a.paste(i,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(i){Pe(`paste: "${i.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const s=this.currentLayer;try{const i=[];for(const l of r){const c=await s.deserialize(l);if(!c)return;i.push(c)}const a=()=>{for(const l of i)T(this,A0,m_).call(this,l);T(this,E0,g_).call(this,i)},o=()=>{for(const l of i)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(i){Pe(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,tn)!==Ne.NONE&&!this.isEditorHandlingKeyboard&&hh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,Zo)&&(A(this,Zo,!1),T(this,Uc,Bm).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(T(this,l1,c5).call(this),T(this,S0,f_).call(this),T(this,Tn,rr).call(this,{isEditing:u(this,tn)!==Ne.NONE,isEmpty:T(this,Hc,zm).call(this),hasSomethingToUndo:u(this,Ns).hasSomethingToUndo(),hasSomethingToRedo:u(this,Ns).hasSomethingToRedo(),hasSelectedEditor:!1})):(T(this,c1,u5).call(this),T(this,k0,p_).call(this),T(this,Tn,rr).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,Ps)){A(this,Ps,e);for(const t of u(this,Ps))T(this,si,ka).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,s1).id}get currentLayer(){return u(this,dn).get(u(this,Dh))}getLayer(e){return u(this,dn).get(e)}get currentPageIndex(){return u(this,Dh)}addLayer(e){u(this,dn).set(e.pageIndex,e),u(this,el)?e.enable():e.disable()}removeLayer(e){u(this,dn).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,s=!1,i=!1){var a,o,l,c,d,f;if(u(this,tn)!==e&&!(u(this,js)&&(await u(this,js).promise,!u(this,js)))){if(A(this,js,Promise.withResolvers()),(a=u(this,Yo))==null||a.commitOrRemove(),u(this,tn)===Ne.POPUP&&((o=u(this,Hn))==null||o.hideSidebar()),(l=u(this,Hn))==null||l.destroyPopup(),A(this,tn,e),e===Ne.NONE){this.setEditingState(!1),T(this,f1,p5).call(this);for(const p of u(this,Ht).values())p.hideStandaloneCommentButton();(c=this._editorUndoBar)==null||c.hide(),this.toggleComment(null),u(this,js).resolve();return}for(const p of u(this,Ht).values())p.addStandaloneCommentButton();e===Ne.SIGNATURE&&await((d=u(this,rl))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await T(this,h1,f5).call(this),this.unselectAll();for(const p of u(this,dn).values())p.updateMode(e);if(e===Ne.POPUP){u(this,Mh)||A(this,Mh,await u(this,$h).getAnnotationsByType(new Set(u(this,Ps).map(y=>y._editorType))));const p=new Set,m=[];for(const y of u(this,Ht).values()){const{annotationElementId:g,hasComment:w,deleted:v}=y;g&&p.add(g),w&&!v&&m.push(y.getData())}for(const y of u(this,Mh)){const{id:g,popupRef:w,contentsObj:v}=y;w&&(v!=null&&v.str)&&!p.has(g)&&!u(this,Qo).has(g)&&m.push(y)}(f=u(this,Hn))==null||f.showSidebar(m)}if(!t){r&&this.addNewEditorFromKeyboard(),u(this,js).resolve();return}for(const p of u(this,Ht).values())p.uid===t?(this.setSelected(p),i?p.editComment():s?p.enterInEditMode():p.focus()):p.unselect();u(this,js).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,Ps)){switch(e){case We.CREATE:this.currentLayer.addNewEditor(t);return;case We.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,g0)||A(this,g0,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of u(this,st))r.updateParams(e,t);else for(const r of u(this,Ps))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var i;for(const a of u(this,Ht).values())a.editorType===e&&a.show(t);(((i=u(this,g0))==null?void 0:i.get(We.HIGHLIGHT_SHOW_ALL))??!0)!==t&&T(this,si,ka).call(this,[[We.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,p0)!==e){A(this,p0,e);for(const t of u(this,dn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,Ht).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,Ht).get(e)}addEditor(e){u(this,Ht).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(u(this,Fi)&&clearTimeout(u(this,Fi)),A(this,Fi,setTimeout(()=>{this.focusMainContainer(),A(this,Fi,null)},0))),u(this,Ht).delete(e.id),e.annotationElementId&&((t=u(this,nl))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,Qo).has(e.annotationElementId))&&((r=u(this,Ts))==null||r.remove(e.id))}addDeletedAnnotationElement(e){u(this,Qo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,Qo).has(e)}removeDeletedAnnotationElement(e){u(this,Qo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Hr)!==e&&(A(this,Hr,e),e&&T(this,si,ka).call(this,e.propertiesToUpdate))}updateUI(e){u(this,p1,m5)===e&&T(this,si,ka).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){T(this,si,ka).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,st).has(e)){u(this,st).delete(e),e.unselect(),T(this,Tn,rr).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,st).add(e),e.select(),T(this,si,ka).call(this,e.propertiesToUpdate),T(this,Tn,rr).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Yo))==null||t.commitOrRemove();for(const r of u(this,st))r!==e&&r.unselect();u(this,st).clear(),u(this,st).add(e),e.select(),T(this,si,ka).call(this,e.propertiesToUpdate),T(this,Tn,rr).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,st).has(e)}get firstSelectedEditor(){return u(this,st).values().next().value}unselect(e){e.unselect(),u(this,st).delete(e),T(this,Tn,rr).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,st).size!==0}get isEnterHandled(){return u(this,st).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,Ns).undo(),T(this,Tn,rr).call(this,{hasSomethingToUndo:u(this,Ns).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:T(this,Hc,zm).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,Ns).redo(),T(this,Tn,rr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,Ns).hasSomethingToRedo(),isEmpty:T(this,Hc,zm).call(this)})}addCommands(e){u(this,Ns).add(e),T(this,Tn,rr).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:T(this,Hc,zm).call(this)})}cleanUndoStack(e){u(this,Ns).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,st)],r=()=>{var a;(a=this._editorUndoBar)==null||a.show(s,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},s=()=>{for(const a of t)T(this,A0,m_).call(this,a)};this.addCommands({cmd:r,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Hr))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Hr)||this.hasSelection}selectAll(){for(const e of u(this,st))e.commit();T(this,E0,g_).call(this,u(this,Ht).values())}unselectAll(){var e;if(!(u(this,Hr)&&(u(this,Hr).commitOrRemove(),u(this,tn)!==Ne.NONE))&&!((e=u(this,Yo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,st))t.unselect();u(this,st).clear(),T(this,Tn,rr).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;u(this,il)[0]+=e,u(this,il)[1]+=t;const[s,i]=u(this,il),a=[...u(this,st)],o=1e3;u(this,zi)&&clearTimeout(u(this,zi)),A(this,zi,setTimeout(()=>{A(this,zi,null),u(this,il)[0]=u(this,il)[1]=0,this.addCommands({cmd:()=>{for(const l of a)u(this,Ht).has(l.id)&&(l.translateInPage(s,i),l.translationDone())},undo:()=>{for(const l of a)u(this,Ht).has(l.id)&&(l.translateInPage(-s,-i),l.translationDone())},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,Oi,new Map);for(const e of u(this,st))u(this,Oi).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,Oi))return!1;this.disableUserSelect(!1);const e=u(this,Oi);A(this,Oi,null);let t=!1;for(const[{x:s,y:i,pageIndex:a},o]of e)o.newX=s,o.newY=i,o.newPageIndex=a,t||(t=s!==o.savedX||i!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const r=(s,i,a,o)=>{if(u(this,Ht).has(s.id)){const l=u(this,dn).get(o);l?s._setParentAndPosition(l,i,a):(s.pageIndex=o,s.x=i,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:i,newY:a,newPageIndex:o}]of e)r(s,i,a,o)},undo:()=>{for(const[s,{savedX:i,savedY:a,savedPageIndex:o}]of e)r(s,i,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,Oi))for(const r of u(this,Oi).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,st).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Hr)===e}getActive(){return u(this,Hr)}getMode(){return u(this,tn)}isEditingMode(){return u(this,tn)!==Ne.NONE}get imageManager(){return Oe(this,"imageManager",new c_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,d=t.rangeCount;c<d;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:s,width:i,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(c,d,f,p)=>({x:(d-s)/a,y:1-(c+f-r)/i,width:p/a,height:f/i});break;case"180":o=(c,d,f,p)=>({x:1-(c+f-r)/i,y:1-(d+p-s)/a,width:f/i,height:p/a});break;case"270":o=(c,d,f,p)=>({x:1-(d+p-s)/a,y:(c-r)/i,width:p/a,height:f/i});break;default:o=(c,d,f,p)=>({x:(c-r)/i,y:(d-s)/a,width:f/i,height:p/a});break}const l=[];for(let c=0,d=t.rangeCount;c<d;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:p,y:m,width:y,height:g}of f.getClientRects())y===0||g===0||l.push(o(p,m,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,Lh)||A(this,Lh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,Lh))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=u(this,Lh))==null?void 0:s.get(e.data.id);if(!t)return;const r=u(this,Ts).getRawValue(t);r&&(u(this,tn)===Ne.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var i;const s=(i=u(this,nl))==null?void 0:i.get(e);s&&(s.setCanvas(t,r),u(this,nl).delete(e))}addMissingCanvas(e,t){(u(this,nl)||A(this,nl,new Map)).set(e,t)}};Rh=new WeakMap,Hr=new WeakMap,Mh=new WeakMap,Ht=new WeakMap,dn=new WeakMap,Ih=new WeakMap,Ts=new WeakMap,Lh=new WeakMap,Ns=new WeakMap,Hn=new WeakMap,Ko=new WeakMap,Yo=new WeakMap,Dh=new WeakMap,Qo=new WeakMap,Oi=new WeakMap,Ps=new WeakMap,$c=new WeakMap,d0=new WeakMap,h0=new WeakMap,Oh=new WeakMap,f0=new WeakMap,Fi=new WeakMap,Jo=new WeakMap,Fh=new WeakMap,Zo=new WeakMap,Bi=new WeakMap,s1=new WeakMap,el=new WeakMap,Bh=new WeakMap,p0=new WeakMap,tl=new WeakMap,Vc=new WeakMap,zh=new WeakMap,nl=new WeakMap,m0=new WeakMap,tn=new WeakMap,st=new WeakMap,ja=new WeakMap,rl=new WeakMap,sl=new WeakMap,g0=new WeakMap,$h=new WeakMap,y0=new WeakMap,il=new WeakMap,zi=new WeakMap,Ra=new WeakMap,v0=new WeakMap,x0=new WeakMap,js=new WeakMap,Vh=new WeakSet,Sb=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},b0=new WeakSet,d_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of u(this,dn).values())if(r.hasTextLayer(e))return r;return null},i1=new WeakSet,a5=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=T(this,Vh,Sb).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(r);s&&(u(this,Bi)||A(this,Bi,new RK(this)),u(this,Bi).show(r,s,this.direction==="ltr"))},a1=new WeakSet,o5=function(){var i,a,o;const e=document.getSelection();if(!e||e.isCollapsed){u(this,ja)&&((i=u(this,Bi))==null||i.hide(),A(this,ja,null),T(this,Tn,rr).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,ja))return;const s=T(this,Vh,Sb).call(this,e).closest(".textLayer");if(!s){u(this,ja)&&((a=u(this,Bi))==null||a.hide(),A(this,ja,null),T(this,Tn,rr).call(this,{hasSelectedText:!1}));return}if((o=u(this,Bi))==null||o.hide(),A(this,ja,t),T(this,Tn,rr).call(this,{hasSelectedText:!0}),!(u(this,tn)!==Ne.HIGHLIGHT&&u(this,tn)!==Ne.NONE)&&(u(this,tn)===Ne.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,Zo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,tn)===Ne.HIGHLIGHT?T(this,b0,d_).call(this,s):null;if(l==null||l.toggleDrawing(),u(this,Bh)){const c=new AbortController,d=this.combinedSignal(c),f=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&T(this,Uc,Bm).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:d}),window.addEventListener("blur",f,{signal:d})}else l==null||l.toggleDrawing(!0),T(this,Uc,Bm).call(this,"main_toolbar")}},Uc=new WeakSet,Bm=function(e=""){u(this,tn)===Ne.HIGHLIGHT?this.highlightSelection(e):u(this,d0)&&T(this,i1,a5).call(this)},o1=new WeakSet,l5=function(){document.addEventListener("selectionchange",T(this,a1,o5).bind(this),{signal:this._signal})},l1=new WeakSet,c5=function(){if(u(this,Jo))return;A(this,Jo,new AbortController);const e=this.combinedSignal(u(this,Jo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},c1=new WeakSet,u5=function(){var e;(e=u(this,Jo))==null||e.abort(),A(this,Jo,null)},w0=new WeakSet,h_=function(){if(u(this,tl))return;A(this,tl,new AbortController);const e=this.combinedSignal(u(this,tl));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},u1=new WeakSet,d5=function(){var e;(e=u(this,tl))==null||e.abort(),A(this,tl,null)},S0=new WeakSet,f_=function(){if(u(this,Ko))return;A(this,Ko,new AbortController);const e=this.combinedSignal(u(this,Ko));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},k0=new WeakSet,p_=function(){var e;(e=u(this,Ko))==null||e.abort(),A(this,Ko,null)},d1=new WeakSet,h5=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Tn=new WeakSet,rr=function(e){Object.entries(e).some(([r,s])=>u(this,y0)[r]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,y0),e)}),u(this,tn)===Ne.HIGHLIGHT&&e.hasSelectedEditor===!1&&T(this,si,ka).call(this,[[We.HIGHLIGHT_FREE,!0]]))},si=new WeakSet,ka=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},h1=new WeakSet,f5=async function(){if(!u(this,el)){A(this,el,!0);const e=[];for(const t of u(this,dn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Ht).values())t.enable()}},f1=new WeakSet,p5=function(){if(this.unselectAll(),u(this,el)){A(this,el,!1);for(const e of u(this,dn).values())e.disable();for(const e of u(this,Ht).values())e.disable()}},A0=new WeakSet,m_=function(e){const t=u(this,dn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},p1=new WeakSet,m5=function(){let e=null;for(e of u(this,st));return e},Hc=new WeakSet,zm=function(){if(u(this,Ht).size===0)return!0;if(u(this,Ht).size===1)for(const e of u(this,Ht).values())return e.isEmpty();return!1},E0=new WeakSet,g_=function(e){for(const t of u(this,st))t.unselect();u(this,st).clear();for(const t of e)t.isEmpty()||(u(this,st).add(t),t.select());T(this,Tn,rr).call(this,{hasSelectedEditor:this.hasSelection})},J(hh,"TRANSLATE_SMALL",1),J(hh,"TRANSLATE_BIG",10);let oc=hh;var gn,$i,ii,Uh,Vi,qr,Hh,Ui,kr,Ma,qc,Hi,al,Gc,$m,qh,kb;const sr=class sr{constructor(e){k(this,Gc);k(this,qh);k(this,gn,null);k(this,$i,!1);k(this,ii,null);k(this,Uh,null);k(this,Vi,null);k(this,qr,null);k(this,Hh,!1);k(this,Ui,null);k(this,kr,null);k(this,Ma,null);k(this,qc,null);k(this,Hi,!1);A(this,kr,e),A(this,Hi,e._uiManager.useNewAltTextFlow),u(sr,al)||A(sr,al,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){sr._l10n??(sr._l10n=e)}async render(){const e=A(this,ii,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,Uh,document.createElement("span"));e.append(t),u(this,Hi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(sr,al).missing),t.setAttribute("data-l10n-id",u(sr,al)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=u(this,kr)._uiManager._signal;e.addEventListener("contextmenu",gs,{signal:r}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),u(this,kr)._uiManager.editAltText(u(this,kr)),u(this,Hi)&&u(this,kr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Gc,$m)}})};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(A(this,Hh,!0),s(i))},{signal:r}),await T(this,qh,kb).call(this),e}finish(){u(this,ii)&&(u(this,ii).focus({focusVisible:u(this,Hh)}),A(this,Hh,!1))}isEmpty(){return u(this,Hi)?u(this,gn)===null:!u(this,gn)&&!u(this,$i)}hasData(){return u(this,Hi)?u(this,gn)!==null||!!u(this,Ma):this.isEmpty()}get guessedText(){return u(this,Ma)}async setGuessedText(e){u(this,gn)===null&&(A(this,Ma,e),A(this,qc,await sr._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),T(this,qh,kb).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Hi)||u(this,gn)){(t=u(this,Ui))==null||t.remove(),A(this,Ui,null);return}if(!u(this,Ui)){const r=A(this,Ui,document.createElement("div"));r.className="noAltTextBadge",u(this,kr).div.append(r)}u(this,Ui).classList.toggle("hidden",!e)}serialize(e){let t=u(this,gn);return!e&&u(this,Ma)===t&&(t=u(this,qc)),{altText:t,decorative:u(this,$i),guessedText:u(this,Ma),textWithDisclaimer:u(this,qc)}}get data(){return{altText:u(this,gn),decorative:u(this,$i)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:s,cancel:i=!1}){r&&(A(this,Ma,r),A(this,qc,s)),!(u(this,gn)===e&&u(this,$i)===t)&&(i||(A(this,gn,e),A(this,$i,t)),T(this,qh,kb).call(this))}toggle(e=!1){u(this,ii)&&(!e&&u(this,qr)&&(clearTimeout(u(this,qr)),A(this,qr,null)),u(this,ii).disabled=!e)}shown(){u(this,kr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Gc,$m)}})}destroy(){var e,t;(e=u(this,ii))==null||e.remove(),A(this,ii,null),A(this,Uh,null),A(this,Vi,null),(t=u(this,Ui))==null||t.remove(),A(this,Ui,null)}};gn=new WeakMap,$i=new WeakMap,ii=new WeakMap,Uh=new WeakMap,Vi=new WeakMap,qr=new WeakMap,Hh=new WeakMap,Ui=new WeakMap,kr=new WeakMap,Ma=new WeakMap,qc=new WeakMap,Hi=new WeakMap,al=new WeakMap,Gc=new WeakSet,$m=function(){return u(this,gn)&&"added"||u(this,gn)===null&&this.guessedText&&"review"||"missing"},qh=new WeakSet,kb=async function(){var s,i,a;const e=u(this,ii);if(!e)return;if(u(this,Hi)){if(e.classList.toggle("done",!!u(this,gn)),e.setAttribute("data-l10n-id",u(sr,al)[u(this,Gc,$m)]),(s=u(this,Uh))==null||s.setAttribute("data-l10n-id",u(sr,al)[`${u(this,Gc,$m)}-label`]),!u(this,gn)){(i=u(this,Vi))==null||i.remove();return}}else{if(!u(this,gn)&&!u(this,$i)){e.classList.remove("done"),(a=u(this,Vi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,Vi);if(!t){A(this,Vi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,kr).id}`;const o=100,l=u(this,kr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,qr)),A(this,qr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,qr,setTimeout(()=>{A(this,qr,null),u(this,Vi).classList.add("show"),u(this,kr)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;u(this,qr)&&(clearTimeout(u(this,qr)),A(this,qr,null)),(c=u(this,Vi))==null||c.classList.remove("show")},{signal:l})}u(this,$i)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,gn)),t.parentNode||e.append(t);const r=u(this,kr).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},k(sr,al,null),J(sr,"_l10n",null);let Ow=sr;var Nn,Rs,Wc,xt,C0,Xc,ai,Kc,Yc,Qc,_0,y_;class Vx{constructor(e){k(this,_0);k(this,Nn,null);k(this,Rs,null);k(this,Wc,!1);k(this,xt,null);k(this,C0,null);k(this,Xc,null);k(this,ai,null);k(this,Kc,null);k(this,Yc,!1);k(this,Qc,null);A(this,xt,e)}renderForToolbar(){const e=A(this,Rs,document.createElement("button"));return e.className="comment",T(this,_0,y_).call(this,e,!1)}renderForStandalone(){const e=A(this,Nn,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,xt).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(u(this,xt)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=u(this,xt).commentButtonColor;s&&(r.backgroundColor=s)}return T(this,_0,y_).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,Nn)??u(this,Rs))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,Nn))return;const e=u(this,xt).commentButtonColor;e&&(u(this,Nn).style.backgroundColor=e),u(this,xt)._uiManager.updatePopupColor(u(this,xt))}get commentButtonWidth(){var e;return(((e=u(this,Nn))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,xt).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,Qc))return u(this,Qc);if(!u(this,Nn))return null;const{x:e,y:t,height:r}=u(this,Nn).getBoundingClientRect(),{x:s,y:i,width:a,height:o}=u(this,xt).parent.boundingClientRect;return[(e-s)/a,(t+r-i)/o]}set commentPopupPositionInLayer(e){A(this,Qc,e)}hasDefaultPopupPosition(){return u(this,Qc)===null}removeStandaloneCommentButton(){var e;(e=u(this,Nn))==null||e.remove(),A(this,Nn,null)}removeToolbarCommentButton(){var e;(e=u(this,Rs))==null||e.remove(),A(this,Rs,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,Nn)&&(u(this,Nn).classList.toggle("selected",e),u(this,Nn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,s;if(t)[r,s]=t;else{[r,s]=u(this,xt).commentButtonPosition;const{width:d,height:f,x:p,y:m}=u(this,xt);r=p+r*d,s=m+s*f}const i=u(this,xt).parent.boundingClientRect,{x:a,y:o,width:l,height:c}=i;u(this,xt)._uiManager.editComment(u(this,xt),a+r*l,o+s*c,{...e,parentDimensions:i})}finish(){u(this,Rs)&&(u(this,Rs).focus({focusVisible:u(this,Wc)}),A(this,Wc,!1))}isDeleted(){return u(this,Yc)||u(this,ai)===""}isEmpty(){return u(this,ai)===null}hasBeenEdited(){return this.isDeleted()||u(this,ai)!==u(this,C0)}serialize(){return this.data}get data(){return{text:u(this,ai),richText:u(this,Xc),date:u(this,Kc),deleted:this.isDeleted()}}set data(e){if(e!==u(this,ai)&&A(this,Xc,null),e===null){A(this,ai,""),A(this,Yc,!0);return}A(this,ai,e),A(this,Kc,new Date),A(this,Yc,!1)}setInitialText(e,t=null){A(this,C0,e),this.data=e,A(this,Kc,null),A(this,Xc,t)}shown(){}destroy(){var e,t;(e=u(this,Rs))==null||e.remove(),A(this,Rs,null),(t=u(this,Nn))==null||t.remove(),A(this,Nn,null),A(this,ai,""),A(this,Xc,null),A(this,Kc,null),A(this,xt,null),A(this,Wc,!1),A(this,Yc,!1)}}Nn=new WeakMap,Rs=new WeakMap,Wc=new WeakMap,xt=new WeakMap,C0=new WeakMap,Xc=new WeakMap,ai=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,_0=new WeakSet,y_=function(e,t){if(!u(this,xt)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,xt)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=u(this,xt)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",gs,{signal:r}),t&&(e.addEventListener("focusin",i=>{u(this,xt)._focusEventsAllowed=!1,Bt(i)},{capture:!0,signal:r}),e.addEventListener("focusout",i=>{u(this,xt)._focusEventsAllowed=!0,Bt(i)},{capture:!0,signal:r})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:r});const s=i=>{i.preventDefault(),e===u(this,Rs)?this.edit():u(this,xt).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:r}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(A(this,Wc,!0),s(i))},{signal:r}),e.addEventListener("pointerenter",()=>{u(this,xt).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{u(this,xt).toggleComment(!1,!1)},{signal:r}),e};var Gh,Jc,T0,N0,P0,j0,R0,Ia,Zc,La,eu,Da,m1,g5,g1,y5,y1,v5;const aP=class aP{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:s=null,onPinching:i=null,onPinchEnd:a=null,signal:o}){k(this,m1);k(this,g1);k(this,y1);k(this,Gh,void 0);k(this,Jc,!1);k(this,T0,null);k(this,N0,void 0);k(this,P0,void 0);k(this,j0,void 0);k(this,R0,void 0);k(this,Ia,null);k(this,Zc,void 0);k(this,La,null);k(this,eu,void 0);k(this,Da,null);A(this,Gh,e),A(this,T0,r),A(this,N0,t),A(this,P0,s),A(this,j0,i),A(this,R0,a),A(this,eu,new AbortController),A(this,Zc,AbortSignal.any([o,u(this,eu).signal])),e.addEventListener("touchstart",T(this,m1,g5).bind(this),{passive:!1,signal:u(this,Zc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ai.pixelRatio}destroy(){var e,t;(e=u(this,eu))==null||e.abort(),A(this,eu,null),(t=u(this,Ia))==null||t.abort(),A(this,Ia,null)}};Gh=new WeakMap,Jc=new WeakMap,T0=new WeakMap,N0=new WeakMap,P0=new WeakMap,j0=new WeakMap,R0=new WeakMap,Ia=new WeakMap,Zc=new WeakMap,La=new WeakMap,eu=new WeakMap,Da=new WeakMap,m1=new WeakSet,g5=function(e){var s,i,a;if((s=u(this,N0))!=null&&s.call(this))return;if(e.touches.length===1){if(u(this,Ia))return;const o=A(this,Ia,new AbortController),l=AbortSignal.any([u(this,Zc),o.signal]),c=u(this,Gh),d={capture:!0,signal:l,passive:!1},f=p=>{var m;p.pointerType==="touch"&&((m=u(this,Ia))==null||m.abort(),A(this,Ia,null))};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Bt(p),f(p))},d),c.addEventListener("pointerup",f,d),c.addEventListener("pointercancel",f,d);return}if(!u(this,Da)){A(this,Da,new AbortController);const o=AbortSignal.any([u(this,Zc),u(this,Da).signal]),l=u(this,Gh),c={signal:o,capture:!1,passive:!1};l.addEventListener("touchmove",T(this,g1,y5).bind(this),c);const d=T(this,y1,v5).bind(this);l.addEventListener("touchend",d,c),l.addEventListener("touchcancel",d,c),c.capture=!0,l.addEventListener("pointerdown",Bt,c),l.addEventListener("pointermove",Bt,c),l.addEventListener("pointercancel",Bt,c),l.addEventListener("pointerup",Bt,c),(i=u(this,P0))==null||i.call(this)}if(Bt(e),e.touches.length!==2||(a=u(this,T0))!=null&&a.call(this)){A(this,La,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),A(this,La,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},g1=new WeakSet,y5=function(e){var C;if(!u(this,La)||e.touches.length!==2)return;Bt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:s,screenY:i}=t,{screenX:a,screenY:o}=r,l=u(this,La),{touch0X:c,touch0Y:d,touch1X:f,touch1Y:p}=l,m=f-c,y=p-d,g=a-s,w=o-i,v=Math.hypot(g,w)||1,x=Math.hypot(m,y)||1;if(!u(this,Jc)&&Math.abs(x-v)<=aP.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=i,l.touch1X=a,l.touch1Y=o,!u(this,Jc)){A(this,Jc,!0);return}const b=[(s+a)/2,(i+o)/2];(C=u(this,j0))==null||C.call(this,b,x,v)},y1=new WeakSet,v5=function(e){var t;e.touches.length>=2||(u(this,Da)&&(u(this,Da).abort(),A(this,Da,null),(t=u(this,R0))==null||t.call(this)),u(this,La)&&(Bt(e),A(this,La,null),A(this,Jc,!1)))};let Jg=aP;var tu,oi,jt,ht,Oa,Wh,ol,M0,Pn,nu,Fa,qi,ll,I0,ru,Gr,L0,su,Ba,Gi,Xh,Kh,Ms,iu,D0,v1,O0,v_,F0,x_,Yh,Ab,x1,x5,b1,b5,B0,b_,Qh,Eb,z0,w_,w1,w5,S1,S5,k1,k5,$0,S_,A1,A5,V0,k_,E1,E5,C1,C5,_1,_5,U0,A_,au,Vm;const je=class je{constructor(e){k(this,O0);k(this,Yh);k(this,x1);k(this,b1);k(this,B0);k(this,Qh);k(this,z0);k(this,w1);k(this,S1);k(this,k1);k(this,$0);k(this,A1);k(this,V0);k(this,E1);k(this,C1);k(this,_1);k(this,U0);k(this,au);k(this,tu,null);k(this,oi,null);k(this,jt,null);k(this,ht,null);k(this,Oa,null);k(this,Wh,!1);k(this,ol,null);k(this,M0,"");k(this,Pn,null);k(this,nu,null);k(this,Fa,null);k(this,qi,null);k(this,ll,null);k(this,I0,"");k(this,ru,!1);k(this,Gr,null);k(this,L0,!1);k(this,su,!1);k(this,Ba,!1);k(this,Gi,null);k(this,Xh,0);k(this,Kh,0);k(this,Ms,null);k(this,iu,null);J(this,"isSelected",!1);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);k(this,D0,!1);k(this,v1,je._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,s],this.pageTranslation=[i,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=je.prototype._resizeWithKeyboard,t=oc.TRANSLATE_SMALL,r=oc.TRANSLATE_BIG;return Oe(this,"_resizerKeyboardManager",new Kv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],je.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Oe(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new LK({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(je._l10n??(je._l10n=e),je._l10nResizer||(je._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),je._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);je._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){mt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,D0)}set _isDraggable(e){var t;A(this,D0,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,v1)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(T(this,au,Vm).call(this),(t=u(this,qi))==null||t.remove(),A(this,qi,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,ru)?A(this,ru,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,s){const[i,a]=this.parentDimensions;[r,s]=this.screenToPageTranslation(r,s),this.x=(e+r)/i,this.y=(t+s)/a,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,s]=this.parentDimensions;this.setAt(e*r,t*s,this.width*r,this.height*s),this._onTranslated()}translate(e,t){T(this,O0,v_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Gr)||A(this,Gr,[this.x,this.y,this.width,this.height]),T(this,O0,v_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Gr)||A(this,Gr,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[s,i]}=this;if(this.x+=e/s,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,c]=this.getBaseTranslation();a+=l,o+=c;const{style:d}=r;d.left=`${(100*a).toFixed(2)}%`,d.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Gr)&&(u(this,Gr)[0]!==this.x||u(this,Gr)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Gr)&&(u(this,Gr)[2]!==this.width||u(this,Gr)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=je,s=r/e,i=r/t;switch(this.rotation){case 90:return[-s,i];case 180:return[s,i];case 270:return[s,-i];default:return[-s,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,s]}=this;let{x:i,y:a,width:o,height:l}=this;if(o*=r,l*=s,i*=r,a*=s,this._mustFixPosition)switch(e){case 0:i=Yn(i,0,r-o),a=Yn(a,0,s-l);break;case 90:i=Yn(i,0,r-l),a=Yn(a,o,s);break;case 180:i=Yn(i,o,r),a=Yn(a,l,s);break;case 270:i=Yn(i,l,r),a=Yn(a,0,s-o);break}this.x=i/=r,this.y=a/=s;const[c,d]=this.getBaseTranslation();i+=c,a+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return T(r=je,F0,x_).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return T(r=je,F0,x_).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,jt))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,su))return this._editToolbar;this._editToolbar=new o_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,jt))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,jt)||(Ow.initialize(je._l10n),A(this,jt,new Ow(this)),u(this,tu)&&(u(this,jt).data=u(this,tu),A(this,tu,null))),u(this,jt)}get altTextData(){var e;return(e=u(this,jt))==null?void 0:e.data}set altTextData(e){u(this,jt)&&(u(this,jt).data=e)}get guessedAltText(){var e;return(e=u(this,jt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,jt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,jt))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,jt)&&!u(this,jt).isEmpty()}hasAltTextData(){var e;return((e=u(this,jt))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,ht))==null||e.focusButton()}addCommentButton(){return u(this,ht)||A(this,ht,new Vx(this))}addStandaloneCommentButton(){if(u(this,Oa)){this._uiManager.isEditingMode()&&u(this,Oa).classList.remove("hidden");return}this.hasComment&&(A(this,Oa,u(this,ht).renderForStandalone()),this.div.append(u(this,Oa)))}removeStandaloneCommentButton(){u(this,ht).removeStandaloneCommentButton(),A(this,Oa,null)}hideStandaloneCommentButton(){var e;(e=u(this,Oa))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:s}}=u(this,ht);return{text:t,richText:e,date:r,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,ht)||A(this,ht,new Vx(this)),u(this,ht).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(u(this,ht)||A(this,ht,new Vx(this)),u(this,ht).setInitialText(e,r),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=u(this,ht))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,ht))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,ht)&&!u(this,ht).isEmpty()&&!u(this,ht).isDeleted()}async editComment(e){u(this,ht)||A(this,ht,new Vx(this)),u(this,ht).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,ht).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[i]=this.pageDimensions,[a]=this.pageTranslation,o=a+i+1,l=s-100,c=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,c,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,ht).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var a;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Wh)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),T(this,V0,k_).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[s,i]=this.getInitialTranslation();return this.translate(s,i),s5(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,iu)||A(this,iu,new Jg({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:T(this,w1,w5).bind(this),onPinching:T(this,S1,S5).bind(this),onPinchEnd:T(this,k1,k5).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(a=this._uiManager._editorUndoBar)==null||a.hide(),e}pointerdown(e){const{isMac:t}=Cn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,ru,!0),this._isDraggable){T(this,A1,A5).call(this,e);return}T(this,$0,S_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Gi)&&clearTimeout(u(this,Gi)),A(this,Gi,setTimeout(()=>{var e;A(this,Gi,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const s=this.parentScale,[i,a]=this.pageDimensions,[o,l]=this.pageTranslation,c=e/s,d=t/s,f=this.x*i,p=this.y*a,m=this.width*i,y=this.height*a;switch(r){case 0:return[f+c+o,a-p-d-y+l,f+c+m+o,a-p-d+l];case 90:return[f+d+o,a-p+c+l,f+d+y+o,a-p+c+m+l];case 180:return[f-c-m+o,a-p+d+l,f-c+o,a-p+d+y+l];case 270:return[f-d-y+o,a-p-c-m+l,f-d+o,a-p-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,s,i,a]=e,o=i-r,l=a-s;switch(this.rotation){case 0:return[r,t-a,o,l];case 90:return[r,t-s,l,o];case 180:return[i,t-s,o,l];case 270:return[i,t-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&je._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,ht))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:s,deleted:i,richText:a},uid:o,pageIndex:l,creationDate:c,modificationDate:d}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:c,modificationDate:r||d,popupRef:!i,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,su,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,su,!1),!0):!1}isInEditMode(){return u(this,su)}shouldGetKeyboardEvents(){return u(this,Ba)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:s}=this.getClientDimensions(),{innerHeight:i,innerWidth:a}=window;return t<a&&s>0&&e<i&&r>0}rebuild(){T(this,V0,k_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,A(s,tu,e.accessibilityData),s._isCopy=e.isCopy||!1;const[i,a]=s.pageDimensions,[o,l,c,d]=s.getRectInCurrentCoords(e.rect,a);return s.x=o/i,s.y=l/a,s.width=c/i,s.height=d/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,ll))==null||e.abort(),A(this,ll,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Gi)&&(clearTimeout(u(this,Gi)),A(this,Gi,null)),T(this,au,Vm).call(this),this.removeEditToolbar(),u(this,Ms)){for(const r of u(this,Ms).values())clearTimeout(r);A(this,Ms,null)}this.parent=null,(t=u(this,iu))==null||t.destroy(),A(this,iu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(T(this,x1,x5).call(this),u(this,Pn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,s,i,a]=this.getPDFRect();return[je._round(r+(i-r)*e),je._round(s+(a-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,ht).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,ht).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,ht).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,ht).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){u(this,ht).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,Fa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,Pn).children;if(!u(this,oi)){A(this,oi,Array.from(t));const a=T(this,E1,E5).bind(this),o=T(this,C1,C5).bind(this),l=this._uiManager._signal;for(const c of u(this,oi)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",a,{signal:l}),c.addEventListener("blur",o,{signal:l}),c.addEventListener("focus",T(this,_1,_5).bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",je._l10nResizer[d])}}const r=u(this,oi)[0];let s=0;for(const a of t){if(a===r)break;s++}const i=(360-this.rotation+this.parentRotation)%360/90*(u(this,oi).length/4);if(i!==s){if(i<s)for(let o=0;o<s-i;o++)u(this,Pn).append(u(this,Pn).firstChild);else if(i>s)for(let o=0;o<i-s;o++)u(this,Pn).firstChild.before(u(this,Pn).lastChild);let a=0;for(const o of t){const c=u(this,oi)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",je._l10nResizer[c])}}T(this,U0,A_).call(this,0),A(this,Ba,!0),u(this,Pn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,Ba)&&T(this,z0,w_).call(this,u(this,I0),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){T(this,au,Vm).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,i;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(r=u(this,jt))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,s,i;this.isSelected&&(this.isSelected=!1,(e=u(this,Pn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(i=u(this,jt))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,L0)}set isEditing(e){A(this,L0,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,Ms)||A(this,Ms,new Map);const{action:r}=e;let s=u(this,Ms).get(r);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),u(this,Ms).delete(r),u(this,Ms).size===0&&A(this,Ms,null)},je._telemetryTimeout),u(this,Ms).set(r,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,Wh,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Wh,!0)}updateFakeAnnotationElement(e){if(!u(this,qi)&&!this.deleted){A(this,qi,e.addFakeAnnotation(this));return}if(this.deleted){u(this,qi).remove(),A(this,qi,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,qi).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};tu=new WeakMap,oi=new WeakMap,jt=new WeakMap,ht=new WeakMap,Oa=new WeakMap,Wh=new WeakMap,ol=new WeakMap,M0=new WeakMap,Pn=new WeakMap,nu=new WeakMap,Fa=new WeakMap,qi=new WeakMap,ll=new WeakMap,I0=new WeakMap,ru=new WeakMap,Gr=new WeakMap,L0=new WeakMap,su=new WeakMap,Ba=new WeakMap,Gi=new WeakMap,Xh=new WeakMap,Kh=new WeakMap,Ms=new WeakMap,iu=new WeakMap,D0=new WeakMap,v1=new WeakMap,O0=new WeakSet,v_=function([e,t],r,s){[r,s]=this.screenToPageTranslation(r,s),this.x+=r/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},F0=new WeakSet,x_=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Yh=new WeakSet,Ab=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},x1=new WeakSet,x5=function(){if(u(this,Pn))return;A(this,Pn,document.createElement("div")),u(this,Pn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const s=document.createElement("div");u(this,Pn).append(s),s.classList.add("resizer",r),s.setAttribute("data-resizer-name",r),s.addEventListener("pointerdown",T(this,b1,b5).bind(this,r),{signal:t}),s.addEventListener("contextmenu",gs,{signal:t}),s.tabIndex=-1}this.div.prepend(u(this,Pn))},b1=new WeakSet,b5=function(e,t){var d;t.preventDefault();const{isMac:r}=Cn.platform;if(t.button!==0||t.ctrlKey&&r)return;(d=u(this,jt))==null||d.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,A(this,nu,[t.screenX,t.screenY]);const i=new AbortController,a=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",T(this,z0,w_).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Bt,{passive:!1,signal:a}),window.addEventListener("contextmenu",gs,{signal:a}),A(this,Fa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var f;i.abort(),this.parent.togglePointerEvents(!0),(f=u(this,jt))==null||f.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=o,this.div.style.cursor=l,T(this,Qh,Eb).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})},B0=new WeakSet,b_=function(e,t,r,s){this.width=r,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Qh=new WeakSet,Eb=function(){if(!u(this,Fa))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:s}=u(this,Fa);A(this,Fa,null);const i=this.x,a=this.y,o=this.width,l=this.height;i===e&&a===t&&o===r&&l===s||this.addCommands({cmd:T(this,B0,b_).bind(this,i,a,o,l),undo:T(this,B0,b_).bind(this,e,t,r,s),mustExec:!0})},z0=new WeakSet,w_=function(e,t){const[r,s]=this.parentDimensions,i=this.x,a=this.y,o=this.width,l=this.height,c=je.MIN_SIZE/r,d=je.MIN_SIZE/s,f=T(this,Yh,Ab).call(this,this.rotation),p=(D,z)=>[f[0]*D+f[2]*z,f[1]*D+f[3]*z],m=T(this,Yh,Ab).call(this,360-this.rotation),y=(D,z)=>[m[0]*D+m[2]*z,m[1]*D+m[3]*z];let g,w,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(D,z)=>[0,0],w=(D,z)=>[D,z];break;case"topMiddle":g=(D,z)=>[D/2,0],w=(D,z)=>[D/2,z];break;case"topRight":v=!0,g=(D,z)=>[D,0],w=(D,z)=>[0,z];break;case"middleRight":x=!0,g=(D,z)=>[D,z/2],w=(D,z)=>[0,z/2];break;case"bottomRight":v=!0,g=(D,z)=>[D,z],w=(D,z)=>[0,0];break;case"bottomMiddle":g=(D,z)=>[D/2,z],w=(D,z)=>[D/2,0];break;case"bottomLeft":v=!0,g=(D,z)=>[0,z],w=(D,z)=>[D,0];break;case"middleLeft":x=!0,g=(D,z)=>[0,z/2],w=(D,z)=>[D,z/2];break}const b=g(o,l),C=w(o,l);let _=p(...C);const E=je._round(i+_[0]),N=je._round(a+_[1]);let j=1,M=1,O,L;if(t.fromKeyboard)({deltaX:O,deltaY:L}=t);else{const{screenX:D,screenY:z}=t,[V,q]=u(this,nu);[O,L]=this.screenToPageTranslation(D-V,z-q),u(this,nu)[0]=D,u(this,nu)[1]=z}if([O,L]=y(O/r,L/s),v){const D=Math.hypot(o,l);j=M=Math.max(Math.min(Math.hypot(C[0]-b[0]-O,C[1]-b[1]-L)/D,1/o,1/l),c/o,d/l)}else x?j=Yn(Math.abs(C[0]-b[0]-O),c,1)/o:M=Yn(Math.abs(C[1]-b[1]-L),d,1)/l;const F=je._round(o*j),U=je._round(l*M);_=p(...w(F,U));const B=E-_[0],I=N-_[1];u(this,Gr)||A(this,Gr,[this.x,this.y,this.width,this.height]),this.width=F,this.height=U,this.x=B,this.y=I,this.setDims(),this.fixAndSetPosition(),this._onResizing()},w1=new WeakSet,w5=function(){var e;A(this,Fa,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,jt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},S1=new WeakSet,S5=function(e,t,r){let i=.7*(r/t)+1-.7;if(i===1)return;const a=T(this,Yh,Ab).call(this,this.rotation),o=(E,N)=>[a[0]*E+a[2]*N,a[1]*E+a[3]*N],[l,c]=this.parentDimensions,d=this.x,f=this.y,p=this.width,m=this.height,y=je.MIN_SIZE/l,g=je.MIN_SIZE/c;i=Math.max(Math.min(i,1/p,1/m),y/p,g/m);const w=je._round(p*i),v=je._round(m*i);if(w===p&&v===m)return;u(this,Gr)||A(this,Gr,[d,f,p,m]);const x=o(p/2,m/2),b=je._round(d+x[0]),C=je._round(f+x[1]),_=o(w/2,v/2);this.x=b-_[0],this.y=C-_[1],this.width=w,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},k1=new WeakSet,k5=function(){var e;(e=u(this,jt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),T(this,Qh,Eb).call(this)},$0=new WeakSet,S_=function(e){const{isMac:t}=Cn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},A1=new WeakSet,A5=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const s=new AbortController,i=this._uiManager.combinedSignal(s),a={capture:!0,passive:!1,signal:i},o=c=>{s.abort(),A(this,ol,null),A(this,ru,!1),this._uiManager.endDragSession()||T(this,$0,S_).call(this,c),r&&this._onStopDragging()};t&&(A(this,Xh,e.clientX),A(this,Kh,e.clientY),A(this,ol,e.pointerId),A(this,M0,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:f,pointerId:p}=c;if(p!==u(this,ol)){Bt(c);return}const[m,y]=this.screenToPageTranslation(d-u(this,Xh),f-u(this,Kh));A(this,Xh,d),A(this,Kh,f),this._uiManager.dragSelectedEditors(m,y)},a),window.addEventListener("touchmove",Bt,a),window.addEventListener("pointerdown",c=>{c.pointerType===u(this,M0)&&(u(this,iu)||c.isPrimary)&&o(c),Bt(c)},a));const l=c=>{if(!u(this,ol)||u(this,ol)===c.pointerId){o(c);return}Bt(c)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},V0=new WeakSet,k_=function(){if(u(this,ll)||!this.div)return;A(this,ll,new AbortController);const e=this._uiManager.combinedSignal(u(this,ll));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},E1=new WeakSet,E5=function(e){je._resizerKeyboardManager.exec(this,e)},C1=new WeakSet,C5=function(e){var t;u(this,Ba)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,Pn)&&T(this,au,Vm).call(this)},_1=new WeakSet,_5=function(e){A(this,I0,u(this,Ba)?e:"")},U0=new WeakSet,A_=function(e){if(u(this,oi))for(const t of u(this,oi))t.tabIndex=e},au=new WeakSet,Vm=function(){A(this,Ba,!1),T(this,U0,A_).call(this,-1),T(this,Qh,Eb).call(this)},k(je,F0),J(je,"_l10n",null),J(je,"_l10nResizer",null),J(je,"_borderLineWidth",-1),J(je,"_colorManager",new u_),J(je,"_zIndex",1),J(je,"_telemetryTimeout",1e3);let kt=je;class LK extends kt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const nI=3285377520,ks=4294901760,Ri=65535;class T5{constructor(e){this.h1=e?e&4294967295:nI,this.h2=e?e&4294967295:nI}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,w=e.length;g<w;g++){const v=e.charCodeAt(g);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=r>>2,i=r-s*4,a=new Uint32Array(t.buffer,0,s);let o=0,l=0,c=this.h1,d=this.h2;const f=3432918353,p=461845907,m=f&Ri,y=p&Ri;for(let g=0;g<s;g++)g&1?(o=a[g],o=o*f&ks|o*m&Ri,o=o<<15|o>>>17,o=o*p&ks|o*y&Ri,c^=o,c=c<<13|c>>>19,c=c*5+3864292196):(l=a[g],l=l*f&ks|l*m&Ri,l=l<<15|l>>>17,l=l*p&ks|l*y&Ri,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,i){case 3:o^=t[s*4+2]<<16;case 2:o^=t[s*4+1]<<8;case 1:o^=t[s*4],o=o*f&ks|o*m&Ri,o=o<<15|o>>>17,o=o*p&ks|o*y&Ri,s&1?c^=o:d^=o}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ks|e*36045&Ri,t=t*4283543511&ks|((t<<16|e>>>16)*2950163797&ks)>>>16,e^=t>>>1,e=e*444984403&ks|e*60499&Ri,t=t*3301882366&ks|((t<<16|e>>>16)*3120437893&ks)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const E_=Object.freeze({map:null,hash:"",transfer:void 0});var ou,lu,za,jn,T1,N5;class jN{constructor(){k(this,T1);k(this,ou,!1);k(this,lu,null);k(this,za,null);k(this,jn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=u(this,jn).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return u(this,jn).get(e)}remove(e){const t=u(this,jn).get(e);if(t!==void 0&&(t instanceof kt&&u(this,za).delete(t.annotationElementId),u(this,jn).delete(e),u(this,jn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of u(this,jn).values())if(r instanceof kt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=u(this,jn).get(e);let s=!1;if(r!==void 0)for(const[i,a]of Object.entries(t))r[i]!==a&&(s=!0,r[i]=a);else s=!0,u(this,jn).set(e,t);s&&T(this,T1,N5).call(this),t instanceof kt&&((u(this,za)||A(this,za,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,jn).has(e)}get size(){return u(this,jn).size}resetModified(){u(this,ou)&&(A(this,ou,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new P5(this)}get serializable(){if(u(this,jn).size===0)return E_;const e=new Map,t=new T5,r=[],s=Object.create(null);let i=!1;for(const[a,o]of u(this,jn)){const l=o instanceof kt?o.serialize(!1,s):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const a of e.values())a.bitmap&&r.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:E_}get editorStats(){let e=null;const t=new Map;let r=0,s=0;for(const i of u(this,jn).values()){if(!(i instanceof kt)){i.popup&&(i.popup.deleted?s+=1:r+=1);continue}i.isCommentDeleted?s+=1:i.hasEditedComment&&(r+=1);const a=i.telemetryFinalData;if(!a)continue;const{type:o}=a;t.has(o)||t.set(o,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const l=e[o]||(e[o]=new Map);for(const[c,d]of Object.entries(a)){if(c==="type")continue;let f=l.get(c);f||(f=new Map,l.set(c,f));const p=f.get(d)??0;f.set(d,p+1)}}if((s>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:r}),!e)return null;for(const[i,a]of t)e[i]=a.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){A(this,lu,null)}updateEditor(e,t){var s;const r=(s=u(this,za))==null?void 0:s.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,za))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,lu))return u(this,lu);const e=[];if(u(this,za))for(const t of u(this,za).values())t.serialize()&&e.push(t.annotationElementId);return A(this,lu,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,jn).entries()}}ou=new WeakMap,lu=new WeakMap,za=new WeakMap,jn=new WeakMap,T1=new WeakSet,N5=function(){u(this,ou)||(A(this,ou,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var H0;class P5 extends jN{constructor(t){super();k(this,H0,void 0);const{map:r,hash:s,transfer:i}=t.serializable,a=structuredClone(r,i?{transfer:i}:null);A(this,H0,{map:a,hash:s,transfer:i})}get print(){mt("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,H0)}get modifiedIds(){return Oe(this,"modifiedIds",{ids:new Set,hash:""})}}H0=new WeakMap;var Jh;class DK{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){k(this,Jh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,Jh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||u(this,Jh).has(e.loadedName))){if(Xe(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:i,style:a}=e,o=new FontFace(s,i,a);this.addNativeFontFace(o);try{await o.load(),u(this,Jh).add(s),r==null||r(e)}catch{Pe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}mt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(s){throw Pe(`Failed to load font '${r.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const s=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Oe(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Oe(this,"isSyncFontLoadingSupported",cr||Cn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Xe(!s.done,"completeRequest() cannot be called twice."),s.done=!0;r.length>0&&r[0].done;){const i=r.shift();setTimeout(i.callback,0)}}const{loadingRequests:r}=this,s={done:!1,complete:t,callback:e};return r.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Oe(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(C,_){return C.charCodeAt(_)<<24|C.charCodeAt(_+1)<<16|C.charCodeAt(_+2)<<8|C.charCodeAt(_+3)&255}function s(C,_,E,N){const j=C.substring(0,_),M=C.substring(_+E);return j+N+M}let i,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let c=0;function d(C,_){if(++c>30){Pe("Load test font never loaded."),_();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(d.bind(null,C,_))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=s(p,976,f.length,f);const y=16,g=1482184792;let w=r(p,y);for(i=0,a=f.length-3;i<a;i+=4)w=w-g+r(f,i)|0;i<f.length&&(w=w-g+r(f+"XXX",i)|0),p=s(p,y,4,kK(w));const v=`url(data:font/opentype;base64,${btoa(p)});`,x=`@font-face {font-family:"${f}";src:${v}}`;this.insertRule(x);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const C of[e.loadedName,f]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=C,b.append(_)}this._document.body.append(b),d(f,()=>{b.remove(),t.complete()})}}Jh=new WeakMap;var lt;class OK{constructor(e,t=null,r,s){k(this,lt,void 0);this.compiledGlyphs=Object.create(null),A(this,lt,e),this._inspectFont=t,r&&Object.assign(this,r),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${G4(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let s;try{s=e.get(r)}catch(a){Pe(`getPathGenerator - ignoring character: "${a}".`)}const i=new Path2D(s||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=i}get black(){return u(this,lt).black}get bold(){return u(this,lt).bold}get disableFontFace(){return u(this,lt).disableFontFace??!1}get fontExtraProperties(){return u(this,lt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,lt).isInvalidPDFjsFont}get isType3Font(){return u(this,lt).isType3Font}get italic(){return u(this,lt).italic}get missingFile(){return u(this,lt).missingFile}get remeasure(){return u(this,lt).remeasure}get vertical(){return u(this,lt).vertical}get ascent(){return u(this,lt).ascent}get defaultWidth(){return u(this,lt).defaultWidth}get descent(){return u(this,lt).descent}get bbox(){return u(this,lt).bbox}get fontMatrix(){return u(this,lt).fontMatrix}get fallbackName(){return u(this,lt).fallbackName}get loadedName(){return u(this,lt).loadedName}get mimetype(){return u(this,lt).mimetype}get name(){return u(this,lt).name}get data(){return u(this,lt).data}clearData(){u(this,lt).clearData()}get cssFontInfo(){return u(this,lt).cssFontInfo}get systemFontInfo(){return u(this,lt).systemFontInfo}get defaultVMetrics(){return u(this,lt).defaultVMetrics}}lt=new WeakMap;function FK(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(cr)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function BK(n){if(cr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Gv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ux(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const C_=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,zK=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",j5=_K.bind(null,C_,zK);var $a,N1;class $K{constructor(){k(this,$a,new Map);k(this,N1,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};u(this,N1).then(()=>{for(const[s]of u(this,$a))s.call(this,r)})}addEventListener(e,t,r=null){let s=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:i}=r;if(i.aborted){Pe("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);s=()=>i.removeEventListener("abort",a),i.addEventListener("abort",a)}u(this,$a).set(t,s)}removeEventListener(e,t){const r=u(this,$a).get(t);r==null||r(),u(this,$a).delete(t)}terminate(){for(const[,e]of u(this,$a))e==null||e();u(this,$a).clear()}}$a=new WeakMap,N1=new WeakMap;const Hx={DATA:1,ERROR:2},en={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function rI(){}function wr(n){if(n instanceof _o||n instanceof Lw||n instanceof KM||n instanceof Kg||n instanceof sE)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||mt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new _o(n.message);case"InvalidPDFException":return new Lw(n.message);case"PasswordException":return new KM(n.message,n.code);case"ResponseException":return new Kg(n.message,n.status,n.missing);case"UnknownErrorException":return new sE(n.message,n.details)}return new sE(n.message,n.toString())}var Zh,P1,R5,j1,M5,R1,I5,ef,Cb;class Um{constructor(e,t,r){k(this,P1);k(this,j1);k(this,R1);k(this,ef);k(this,Zh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",T(this,P1,R5).bind(this),{signal:u(this,Zh).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const s=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[s]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},r)}catch(a){i.reject(a)}return i.promise}sendWithStream(e,t,r,s){const i=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:i,data:t,desiredSize:c.desiredSize},s),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:en.PULL,streamId:i,desiredSize:c.desiredSize}),d.promise},cancel:c=>{Xe(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:en.CANCEL,streamId:i,reason:wr(c)}),d.promise}},r)}destroy(){var e;(e=u(this,Zh))==null||e.abort(),A(this,Zh,null)}}Zh=new WeakMap,P1=new WeakSet,R5=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){T(this,R1,I5).call(this,e);return}if(e.callback){const r=e.callbackId,s=this.callbackCapabilities[r];if(!s)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===Hx.DATA)s.resolve(e.data);else if(e.callback===Hx.ERROR)s.reject(wr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,s=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(a){i.postMessage({sourceName:r,targetName:s,callback:Hx.DATA,callbackId:e.callbackId,data:a})},function(a){i.postMessage({sourceName:r,targetName:s,callback:Hx.ERROR,callbackId:e.callbackId,reason:wr(a)})});return}if(e.streamId){T(this,j1,M5).call(this,e);return}t(e.data)},j1=new WeakSet,M5=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(c,d=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:r,targetName:s,stream:en.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:en.CLOSE,streamId:t}),delete a.streamSinks[t])},error(c){Xe(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:r,targetName:s,stream:en.ERROR,streamId:t,reason:wr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:en.START_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:en.START_COMPLETE,streamId:t,reason:wr(c)})})},R1=new WeakSet,I5=function(e){const t=e.streamId,r=this.sourceName,s=e.sourceName,i=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case en.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(wr(e.reason));break;case en.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(wr(e.reason));break;case en.PULL:if(!o){i.postMessage({sourceName:r,targetName:s,stream:en.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||rI).then(function(){i.postMessage({sourceName:r,targetName:s,stream:en.PULL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:en.PULL_COMPLETE,streamId:t,reason:wr(c)})});break;case en.ENQUEUE:if(Xe(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case en.CLOSE:if(Xe(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),T(this,ef,Cb).call(this,a,t);break;case en.ERROR:Xe(a,"error should have stream controller"),a.controller.error(wr(e.reason)),T(this,ef,Cb).call(this,a,t);break;case en.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(wr(e.reason)),T(this,ef,Cb).call(this,a,t);break;case en.CANCEL:if(!o)break;const l=wr(e.reason);Promise.try(o.onCancel||rI,l).then(function(){i.postMessage({sourceName:r,targetName:s,stream:en.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){i.postMessage({sourceName:r,targetName:s,stream:en.CANCEL_COMPLETE,streamId:t,reason:wr(c)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},ef=new WeakSet,Cb=async function(e,t){var r,s,i;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(s=e.pullCall)==null?void 0:s.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var q0;class L5{constructor({enableHWA:e=!1}){k(this,q0,!1);A(this,q0,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!u(this,q0)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){mt("Abstract method `_createCanvas` called.")}}q0=new WeakMap;class VK extends L5{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class D5{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class sI extends D5{async _fetch(e){const t=await Wp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Gv(t)}}class O5{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,s,i){return"none"}destroy(e=!1){}}var cu,tf,Va,Ua,qn,uu,du,yn,Vn,hu,Hm,cl,Vd,nf,_b,ul,Ud,M1,F5,G0,__,dl,Hd,fu,qm,pu,Gm,W0,T_,mu,Wm;class UK extends O5{constructor({docId:t,ownerDocument:r=globalThis.document}){super();k(this,yn);k(this,hu);k(this,cl);k(this,nf);k(this,ul);k(this,M1);k(this,G0);k(this,dl);k(this,fu);k(this,pu);k(this,W0);k(this,mu);k(this,cu,void 0);k(this,tf,void 0);k(this,Va,void 0);k(this,Ua,void 0);k(this,qn,void 0);k(this,uu,void 0);k(this,du,0);A(this,Ua,t),A(this,qn,r)}addFilter(t){if(!t)return"none";let r=u(this,yn,Vn).get(t);if(r)return r;const[s,i,a]=T(this,nf,_b).call(this,t),o=t.length===1?s:`${s}${i}${a}`;if(r=u(this,yn,Vn).get(o),r)return u(this,yn,Vn).set(t,r),r;const l=`g_${u(this,Ua)}_transfer_map_${ln(this,du)._++}`,c=T(this,ul,Ud).call(this,l);u(this,yn,Vn).set(t,c),u(this,yn,Vn).set(o,c);const d=T(this,dl,Hd).call(this,l);return T(this,pu,Gm).call(this,s,i,a,d),c}addHCMFilter(t,r){var y;const s=`${t}-${r}`,i="base";let a=u(this,hu,Hm).get(i);if((a==null?void 0:a.key)===s||(a?((y=a.filter)==null||y.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},u(this,hu,Hm).set(i,a)),!t||!r))return a.url;const o=T(this,mu,Wm).call(this,t);t=ce.makeHexColor(...o);const l=T(this,mu,Wm).call(this,r);if(r=ce.makeHexColor(...l),u(this,cl,Vd).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return a.url;const c=new Array(256);for(let g=0;g<=255;g++){const w=g/255;c[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=c.join(","),f=`g_${u(this,Ua)}_hcm_filter`,p=a.filter=T(this,dl,Hd).call(this,f);T(this,pu,Gm).call(this,d,d,d,p),T(this,G0,__).call(this,p);const m=(g,w)=>{const v=o[g]/255,x=l[g]/255,b=new Array(w+1);for(let C=0;C<=w;C++)b[C]=v+C/w*(x-v);return b.join(",")};return T(this,pu,Gm).call(this,m(0,5),m(1,5),m(2,5),p),a.url=T(this,ul,Ud).call(this,f),a.url}addAlphaFilter(t){let r=u(this,yn,Vn).get(t);if(r)return r;const[s]=T(this,nf,_b).call(this,[t]),i=`alpha_${s}`;if(r=u(this,yn,Vn).get(i),r)return u(this,yn,Vn).set(t,r),r;const a=`g_${u(this,Ua)}_alpha_map_${ln(this,du)._++}`,o=T(this,ul,Ud).call(this,a);u(this,yn,Vn).set(t,o),u(this,yn,Vn).set(i,o);const l=T(this,dl,Hd).call(this,a);return T(this,W0,T_).call(this,s,l),o}addLuminosityFilter(t){let r=u(this,yn,Vn).get(t||"luminosity");if(r)return r;let s,i;if(t?([s]=T(this,nf,_b).call(this,[t]),i=`luminosity_${s}`):i="luminosity",r=u(this,yn,Vn).get(i),r)return u(this,yn,Vn).set(t,r),r;const a=`g_${u(this,Ua)}_luminosity_map_${ln(this,du)._++}`,o=T(this,ul,Ud).call(this,a);u(this,yn,Vn).set(t,o),u(this,yn,Vn).set(i,o);const l=T(this,dl,Hd).call(this,a);return T(this,M1,F5).call(this,l),t&&T(this,W0,T_).call(this,s,l),o}addHighlightHCMFilter(t,r,s,i,a){var x;const o=`${r}-${s}-${i}-${a}`;let l=u(this,hu,Hm).get(t);if((l==null?void 0:l.key)===o||(l?((x=l.filter)==null||x.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},u(this,hu,Hm).set(t,l)),!r||!s))return l.url;const[c,d]=[r,s].map(T(this,mu,Wm).bind(this));let f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[i,a].map(T(this,mu,Wm).bind(this));p<f&&([f,p,m,y]=[p,f,y,m]),u(this,cl,Vd).style.color="";const g=(b,C,_)=>{const E=new Array(256),N=(p-f)/_,j=b/255,M=(C-b)/(255*_);let O=0;for(let L=0;L<=_;L++){const F=Math.round(f+L*N),U=j+L*M;for(let B=O;B<=F;B++)E[B]=U;O=F+1}for(let L=O;L<256;L++)E[L]=E[O-1];return E.join(",")},w=`g_${u(this,Ua)}_hcm_${t}_filter`,v=l.filter=T(this,dl,Hd).call(this,w);return T(this,G0,__).call(this,v),T(this,pu,Gm).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),l.url=T(this,ul,Ud).call(this,w),l.url}destroy(t=!1){var r,s,i,a;t&&((r=u(this,uu))!=null&&r.size)||((s=u(this,Va))==null||s.parentNode.parentNode.remove(),A(this,Va,null),(i=u(this,tf))==null||i.clear(),A(this,tf,null),(a=u(this,uu))==null||a.clear(),A(this,uu,null),A(this,du,0))}}cu=new WeakMap,tf=new WeakMap,Va=new WeakMap,Ua=new WeakMap,qn=new WeakMap,uu=new WeakMap,du=new WeakMap,yn=new WeakSet,Vn=function(){return u(this,tf)||A(this,tf,new Map)},hu=new WeakSet,Hm=function(){return u(this,uu)||A(this,uu,new Map)},cl=new WeakSet,Vd=function(){if(!u(this,Va)){const t=u(this,qn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const s=u(this,qn).createElementNS(Sa,"svg");s.setAttribute("width",0),s.setAttribute("height",0),A(this,Va,u(this,qn).createElementNS(Sa,"defs")),t.append(s),s.append(u(this,Va)),u(this,qn).body.append(t)}return u(this,Va)},nf=new WeakSet,_b=function(t){if(t.length===1){const c=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=c[p]/255;const f=d.join(",");return[f,f,f]}const[r,s,i]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let c=0;c<256;c++)a[c]=r[c]/255,o[c]=s[c]/255,l[c]=i[c]/255;return[a.join(","),o.join(","),l.join(",")]},ul=new WeakSet,Ud=function(t){if(u(this,cu)===void 0){A(this,cu,"");const r=u(this,qn).URL;r!==u(this,qn).baseURI&&(Xv(r)?Pe('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,cu,CN(r,"")))}return`url(${u(this,cu)}#${t})`},M1=new WeakSet,F5=function(t){const r=u(this,qn).createElementNS(Sa,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},G0=new WeakSet,__=function(t){const r=u(this,qn).createElementNS(Sa,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},dl=new WeakSet,Hd=function(t){const r=u(this,qn).createElementNS(Sa,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),u(this,cl,Vd).append(r),r},fu=new WeakSet,qm=function(t,r,s){const i=u(this,qn).createElementNS(Sa,r);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),t.append(i)},pu=new WeakSet,Gm=function(t,r,s,i){const a=u(this,qn).createElementNS(Sa,"feComponentTransfer");i.append(a),T(this,fu,qm).call(this,a,"feFuncR",t),T(this,fu,qm).call(this,a,"feFuncG",r),T(this,fu,qm).call(this,a,"feFuncB",s)},W0=new WeakSet,T_=function(t,r){const s=u(this,qn).createElementNS(Sa,"feComponentTransfer");r.append(s),T(this,fu,qm).call(this,s,"feFuncA",t)},mu=new WeakSet,Wm=function(t){return u(this,cl,Vd).style.color=t,Xp(getComputedStyle(u(this,cl,Vd)).getPropertyValue("color"))};class B5{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class iI extends B5{async _fetch(e){const t=await Wp(e,"arraybuffer");return new Uint8Array(t)}}class z5{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){mt("Abstract method `_fetch` called.")}}class aI extends z5{async _fetch(e){const t=await Wp(e,"arraybuffer");return new Uint8Array(t)}}cr&&Pe("Please use the `legacy` build in Node.js environments.");async function RN(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class HK extends O5{}class qK extends L5{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class GK extends D5{async _fetch(e){return RN(e)}}class WK extends B5{async _fetch(e){return RN(e)}}class XK extends z5{async _fetch(e){return RN(e)}}const Fd="__forcedDependency",{floor:oI,ceil:lI}=Math;function qx(n,e,t,r,s,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],s),n[e*4+3]=Math.max(n[e*4+3],i)}const N_=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var rf,hl;class KK{constructor(e,t){k(this,rf,void 0);k(this,hl,void 0);A(this,rf,e),A(this,hl,t)}get length(){return u(this,rf).length}isEmpty(e){return u(this,rf)[e]===N_}minX(e){return u(this,hl)[e*4+0]/256}minY(e){return u(this,hl)[e*4+1]/256}maxX(e){return(u(this,hl)[e*4+2]+1)/256}maxY(e){return(u(this,hl)[e*4+3]+1)/256}}rf=new WeakMap,hl=new WeakMap;const Gx=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Ar,Er,gu,li,yu,Ha,it,ct,qa,Cr,X0,sf,vu,xu,Ga,Gn,Wi,K0,P_;class YK{constructor(e,t,r=!1){k(this,K0);k(this,Ar,{__proto__:null});k(this,Er,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Fd]:[]});k(this,gu,new Map);k(this,li,[]);k(this,yu,[]);k(this,Ha,[[1,0,0,1,0,0]]);k(this,it,[-1/0,-1/0,1/0,1/0]);k(this,ct,new Float64Array([1/0,1/0,-1/0,-1/0]));k(this,qa,-1);k(this,Cr,new Set);k(this,X0,new Map);k(this,sf,new Map);k(this,vu,void 0);k(this,xu,void 0);k(this,Ga,void 0);k(this,Gn,void 0);k(this,Wi,void 0);A(this,vu,e.width),A(this,xu,e.height),T(this,K0,P_).call(this,t),r&&A(this,Wi,new Map)}growOperationsCount(e){e>=u(this,Gn).length&&T(this,K0,P_).call(this,e,u(this,Gn))}save(e){return A(this,Ar,{__proto__:u(this,Ar)}),A(this,Er,{__proto__:u(this,Er),transform:{__proto__:u(this,Er).transform},moveText:{__proto__:u(this,Er).moveText},sameLineText:{__proto__:u(this,Er).sameLineText},[Fd]:{__proto__:u(this,Er)[Fd]}}),A(this,it,{__proto__:u(this,it)}),u(this,li).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(u(this,Ar));if(t===null)return this;A(this,Ar,t),A(this,Er,Object.getPrototypeOf(u(this,Er))),A(this,it,Object.getPrototypeOf(u(this,it)));const r=u(this,li).pop();return r!==void 0&&((s=Gx(u(this,Wi),e))==null||s.dependencies.add(r),u(this,Gn)[e]=u(this,Gn)[r]),this}recordOpenMarker(e){return u(this,li).push(e),this}getOpenMarker(){return u(this,li).length===0?null:u(this,li).at(-1)}recordCloseMarker(e){var r;const t=u(this,li).pop();return t!==void 0&&((r=Gx(u(this,Wi),e))==null||r.dependencies.add(t),u(this,Gn)[e]=u(this,Gn)[t]),this}beginMarkedContent(e){return u(this,yu).push(e),this}endMarkedContent(e){var r;const t=u(this,yu).pop();return t!==void 0&&((r=Gx(u(this,Wi),e))==null||r.dependencies.add(t),u(this,Gn)[e]=u(this,Gn)[t]),this}pushBaseTransform(e){return u(this,Ha).push(ce.multiplyByDOMMatrix(u(this,Ha).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,Ha).length>1&&u(this,Ha).pop(),this}recordSimpleData(e,t){return u(this,Ar)[e]=t,this}recordIncrementalData(e,t){return u(this,Er)[e].push(t),this}resetIncrementalData(e,t){return u(this,Er)[e].length=0,this}recordNamedData(e,t){return u(this,gu).set(e,t),this}recordSimpleDataFromNamed(e,t,r){u(this,Ar)[e]=u(this,gu).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Fd,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,Ar)&&this.recordFutureForcedDependency(t,u(this,Ar)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,Cr))this.recordFutureForcedDependency(Fd,e);return this}resetBBox(e){return u(this,qa)!==e&&(A(this,qa,e),u(this,ct)[0]=1/0,u(this,ct)[1]=1/0,u(this,ct)[2]=-1/0,u(this,ct)[3]=-1/0),this}recordClipBox(e,t,r,s,i,a){const o=ce.multiplyByDOMMatrix(u(this,Ha).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];ce.axialAlignedBoundingBox([r,i,s,a],o,l);const c=ce.intersect(u(this,it),l);return c?(u(this,it)[0]=c[0],u(this,it)[1]=c[1],u(this,it)[2]=c[2],u(this,it)[3]=c[3]):(u(this,it)[0]=u(this,it)[1]=1/0,u(this,it)[2]=u(this,it)[3]=-1/0),this}recordBBox(e,t,r,s,i,a){const o=u(this,it);if(o[0]===1/0)return this;const l=ce.multiplyByDOMMatrix(u(this,Ha).at(-1),t.getTransform());if(o[0]===-1/0)return ce.axialAlignedBoundingBox([r,i,s,a],l,u(this,ct)),this;const c=[1/0,1/0,-1/0,-1/0];return ce.axialAlignedBoundingBox([r,i,s,a],l,c),u(this,ct)[0]=Math.min(u(this,ct)[0],Math.max(c[0],o[0])),u(this,ct)[1]=Math.min(u(this,ct)[1],Math.max(c[1],o[1])),u(this,ct)[2]=Math.max(u(this,ct)[2],Math.min(c[2],o[2])),u(this,ct)[3]=Math.max(u(this,ct)[3],Math.min(c[3],o[3])),this}recordCharacterBBox(e,t,r,s=1,i=0,a=0,o){const l=r.bbox;let c,d;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&u(this,sf).get(r),c!==!1&&(d=[0,0,0,0],ce.axialAlignedBoundingBox(l,r.fontMatrix,d),(s!==1||i!==0||a!==0)&&ce.scaleMinMax([s,0,0,-s,i,a],d),c)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!o)return this.recordFullPageBBox(e);const f=o();return l&&d&&c===void 0&&(c=d[0]<=i-f.actualBoundingBoxLeft&&d[2]>=i+f.actualBoundingBoxRight&&d[1]<=a-f.actualBoundingBoxAscent&&d[3]>=a+f.actualBoundingBoxDescent,u(this,sf).set(r,c),c)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-f.actualBoundingBoxLeft,i+f.actualBoundingBoxRight,a-f.actualBoundingBoxAscent,a+f.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,ct)[0]=Math.max(0,u(this,it)[0]),u(this,ct)[1]=Math.max(0,u(this,it)[1]),u(this,ct)[2]=Math.min(u(this,vu),u(this,it)[2]),u(this,ct)[3]=Math.min(u(this,xu),u(this,it)[3]),this}getSimpleIndex(e){return u(this,Ar)[e]}recordDependencies(e,t){const r=u(this,Cr),s=u(this,Ar),i=u(this,Er);for(const a of t)a in u(this,Ar)?r.add(s[a]):a in i&&i[a].forEach(r.add,r);return this}recordNamedDependency(e,t){return u(this,gu).has(t)&&u(this,Cr).add(u(this,gu).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Fd]),u(this,Wi)){const r=Gx(u(this,Wi),e),{dependencies:s}=r;u(this,Cr).forEach(s.add,s),u(this,li).forEach(s.add,s),u(this,yu).forEach(s.add,s),s.delete(e),r.isRenderingOperation=!0}if(u(this,qa)===e){const r=oI(u(this,ct)[0]*256/u(this,vu)),s=oI(u(this,ct)[1]*256/u(this,xu)),i=lI(u(this,ct)[2]*256/u(this,vu)),a=lI(u(this,ct)[3]*256/u(this,xu));qx(u(this,Ga),e,r,s,i,a);for(const o of u(this,Cr))o!==e&&qx(u(this,Ga),o,r,s,i,a);for(const o of u(this,li))o!==e&&qx(u(this,Ga),o,r,s,i,a);for(const o of u(this,yu))o!==e&&qx(u(this,Ga),o,r,s,i,a);t||(u(this,Cr).clear(),A(this,qa,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(u(this,Cr));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of r)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,qa)===e&&(A(this,qa,-1),u(this,it)[0]=Math.max(u(this,it)[0],u(this,ct)[0]),u(this,it)[1]=Math.max(u(this,it)[1],u(this,ct)[1]),u(this,it)[2]=Math.min(u(this,it)[2],u(this,ct)[2]),u(this,it)[3]=Math.min(u(this,it)[3],u(this,ct)[3]),t||u(this,Cr).clear()),this}_takePendingDependencies(){const e=u(this,Cr);return A(this,Cr,new Set),e}_extractOperation(e){const t=u(this,X0).get(e);return u(this,X0).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,Cr).add(t)}take(){return u(this,sf).clear(),new KK(u(this,Gn),u(this,Ga))}takeDebugMetadata(){return u(this,Wi)}}Ar=new WeakMap,Er=new WeakMap,gu=new WeakMap,li=new WeakMap,yu=new WeakMap,Ha=new WeakMap,it=new WeakMap,ct=new WeakMap,qa=new WeakMap,Cr=new WeakMap,X0=new WeakMap,sf=new WeakMap,vu=new WeakMap,xu=new WeakMap,Ga=new WeakMap,Gn=new WeakMap,Wi=new WeakMap,K0=new WeakSet,P_=function(e,t){const r=new ArrayBuffer(e*4);A(this,Ga,new Uint8ClampedArray(r)),A(this,Gn,new Uint32Array(r)),t&&t.length>0?(u(this,Gn).set(t),u(this,Gn).fill(N_,t.length)):u(this,Gn).fill(N_)};var ft,qt,ci,af,of;const oP=class oP{constructor(e,t,r){k(this,ft,void 0);k(this,qt,void 0);k(this,ci,void 0);k(this,af,0);k(this,of,0);if(e instanceof oP&&u(e,ci)===!!r)return e;A(this,ft,e),A(this,qt,t),A(this,ci,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ln(this,of)._++,u(this,ft).save(u(this,qt)),this}restore(e){return u(this,of)>0&&(u(this,ft).restore(u(this,qt)),ln(this,of)._--),this}recordOpenMarker(e){return ln(this,af)._++,this}getOpenMarker(){return u(this,af)>0?u(this,qt):u(this,ft).getOpenMarker()}recordCloseMarker(e){return ln(this,af)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,ft).pushBaseTransform(e),this}popBaseTransform(){return u(this,ft).popBaseTransform(),this}recordSimpleData(e,t){return u(this,ft).recordSimpleData(e,u(this,qt)),this}recordIncrementalData(e,t){return u(this,ft).recordIncrementalData(e,u(this,qt)),this}resetIncrementalData(e,t){return u(this,ft).resetIncrementalData(e,u(this,qt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return u(this,ft).recordSimpleDataFromNamed(e,t,u(this,qt)),this}recordFutureForcedDependency(e,t){return u(this,ft).recordFutureForcedDependency(e,u(this,qt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,ft).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,ft).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,ci)||u(this,ft).resetBBox(u(this,qt)),this}recordClipBox(e,t,r,s,i,a){return u(this,ci)||u(this,ft).recordClipBox(u(this,qt),t,r,s,i,a),this}recordBBox(e,t,r,s,i,a){return u(this,ci)||u(this,ft).recordBBox(u(this,qt),t,r,s,i,a),this}recordCharacterBBox(e,t,r,s,i,a,o){return u(this,ci)||u(this,ft).recordCharacterBBox(u(this,qt),t,r,s,i,a,o),this}recordFullPageBBox(e){return u(this,ci)||u(this,ft).recordFullPageBBox(u(this,qt)),this}getSimpleIndex(e){return u(this,ft).getSimpleIndex(e)}recordDependencies(e,t){return u(this,ft).recordDependencies(u(this,qt),t),this}recordNamedDependency(e,t){return u(this,ft).recordNamedDependency(u(this,qt),t),this}recordOperation(e){return u(this,ft).recordOperation(u(this,qt),!0),this}recordShowTextOperation(e){return u(this,ft).recordShowTextOperation(u(this,qt),!0),this}bboxToClipBoxDropOperation(e){return u(this,ci)||u(this,ft).bboxToClipBoxDropOperation(u(this,qt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};ft=new WeakMap,qt=new WeakMap,ci=new WeakMap,af=new WeakMap,of=new WeakMap;let Fw=oP;const As={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ln={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function j_(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,r),n.clip(s)}class MN{isModifyingCurrentTransform(){return!1}getPattern(){mt("Abstract method `getPattern` called.")}}class QK extends MN{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,s){let i;if(s===Ln.STROKE||s===Ln.FILL){const a=t.current.getClippedPathBoundingBox(s,Ot(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,c=t.cachedCanvases.getCanvas("pattern",o,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),r=ce.transform(r,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),j_(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(r);i.setTransform(f)}else j_(e,this._bbox),i=this._createGradient(e);return i}}function oE(n,e,t,r,s,i,a,o){const l=e.coords,c=e.colors,d=n.data,f=n.width*4;let p;l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p),l[r+1]>l[s+1]&&(p=r,r=s,s=p,p=a,a=o,o=p),l[t+1]>l[r+1]&&(p=t,t=r,r=p,p=i,i=a,a=p);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,w=(l[r+1]+e.offsetY)*e.scaleY,v=(l[s]+e.offsetX)*e.scaleX,x=(l[s+1]+e.offsetY)*e.scaleY;if(y>=x)return;const b=c[i],C=c[i+1],_=c[i+2],E=c[a],N=c[a+1],j=c[a+2],M=c[o],O=c[o+1],L=c[o+2],F=Math.round(y),U=Math.round(x);let B,I,D,z,V,q,P,Y;for(let K=F;K<=U;K++){if(K<w){const ve=K<y?0:(y-K)/(y-w);B=m-(m-g)*ve,I=b-(b-E)*ve,D=C-(C-N)*ve,z=_-(_-j)*ve}else{let ve;K>x?ve=1:w===x?ve=0:ve=(w-K)/(w-x),B=g-(g-v)*ve,I=E-(E-M)*ve,D=N-(N-O)*ve,z=j-(j-L)*ve}let R;K<y?R=0:K>x?R=1:R=(y-K)/(y-x),V=m-(m-v)*R,q=b-(b-M)*R,P=C-(C-O)*R,Y=_-(_-L)*R;const ie=Math.round(Math.min(B,V)),ke=Math.round(Math.max(B,V));let me=f*K+ie*4;for(let ve=ie;ve<=ke;ve++)R=(B-ve)/(B-V),R<0?R=0:R>1&&(R=1),d[me++]=I-(I-q)*R|0,d[me++]=D-(D-P)*R|0,d[me++]=z-(z-Y)*R|0,d[me++]=255}}function JK(n,e,t){const r=e.coords,s=e.colors;let i,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(i=0;i<l;i++){let d=i*o;for(let f=0;f<c;f++,d++)oE(n,t,r[d],r[d+1],r[d+o],s[d],s[d+1],s[d+o]),oE(n,t,r[d+o+1],r[d+1],r[d+o],s[d+o+1],s[d+1],s[d+o])}break;case"triangles":for(i=0,a=r.length;i<a;i+=3)oE(n,t,r[i],r[i+1],r[i+2],s[i],s[i+1],s[i+2]);break;default:throw new Error("illegal figure")}}class ZK extends MN{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=c/f,y=d/p,g={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/m,scaleY:1/y},w=f+2*2,v=p+2*2,x=r.getCanvas("mesh",w,v),b=x.context,C=b.createImageData(f,p);if(t){const E=C.data;for(let N=0,j=E.length;N<j;N+=4)E[N]=t[0],E[N+1]=t[1],E[N+2]=t[2],E[N+3]=255}for(const E of this._figures)JK(C,E,g);return b.putImageData(C,2,2),{canvas:x.canvas,offsetX:o-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,s){j_(e,this._bbox);const i=new Float32Array(2);if(s===Ln.SHADING)ce.singularValueDecompose2dScale(Ot(e),i);else if(this.matrix){ce.singularValueDecompose2dScale(this.matrix,i);const[o,l]=i;ce.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=o,i[1]*=l}else ce.singularValueDecompose2dScale(t.baseTransform,i);const a=this._createMeshCanvas(i,s===Ln.SHADING?null:this._background,t.cachedCanvases);return s!==Ln.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class eY extends MN{getPattern(){return"hotpink"}}function tY(n){switch(n[0]){case"RadialAxial":return new QK(n);case"Mesh":return new ZK(n);case"Dummy":return new eY}throw new Error(`Unknown IR type: ${n[0]}`)}const cI={COLORED:1,UNCOLORED:2},I1=class I1{constructor(e,t,r,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e,t){var q,P;const{bbox:r,operatorList:s,paintType:i,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),Ak("TilingType: "+a);const f=r[0],p=r[1],m=r[2],y=r[3],g=m-f,w=y-p,v=new Float32Array(2);ce.singularValueDecompose2dScale(this.matrix,v);const[x,b]=v;ce.singularValueDecompose2dScale(this.baseTransform,v);const C=x*v[0],_=b*v[1];let E=g,N=w,j=!1,M=!1;const O=Math.ceil(c*C),L=Math.ceil(d*_),F=Math.ceil(g*C),U=Math.ceil(w*_);O>=F?E=c:j=!0,L>=U?N=d:M=!0;const B=this.getSizeAndScale(E,this.ctx.canvas.width,C),I=this.getSizeAndScale(N,this.ctx.canvas.height,_),D=e.cachedCanvases.getCanvas("pattern",B.size,I.size),z=D.context,V=l.createCanvasGraphics(z,t);if(V.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(V,i,o),z.translate(-B.scale*f,-I.scale*p),V.transform(0,B.scale,0,0,I.scale,0,0),z.save(),(q=V.dependencyTracker)==null||q.save(),this.clipBbox(V,f,p,m,y),V.baseTransform=Ot(V.ctx),V.executeOperatorList(s),V.endDrawing(),(P=V.dependencyTracker)==null||P.restore(),z.restore(),j||M){const Y=D.canvas;j&&(E=c),M&&(N=d);const K=this.getSizeAndScale(E,this.ctx.canvas.width,C),R=this.getSizeAndScale(N,this.ctx.canvas.height,_),ie=K.size,ke=R.size,me=e.cachedCanvases.getCanvas("pattern-workaround",ie,ke),ve=me.context,Ke=j?Math.floor(g/c):0,Re=M?Math.floor(w/d):0;for(let xe=0;xe<=Ke;xe++)for(let He=0;He<=Re;He++)ve.drawImage(Y,ie*xe,ke*He,ie,ke,0,0,ie,ke);return{canvas:me.canvas,scaleX:K.scale,scaleY:R.scale,offsetX:f,offsetY:p}}return{canvas:D.canvas,scaleX:B.scale,scaleY:I.scale,offsetX:f,offsetY:p}}getSizeAndScale(e,t,r){const s=Math.max(I1.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=s?i=s:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,s,i){const a=s-t,o=i-r;e.ctx.rect(t,r,a,o),ce.axialAlignedBoundingBox([t,r,s,i],Ot(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const s=e.ctx,i=e.current;switch(t){case cI.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;s.fillStyle=i.fillColor=a,s.strokeStyle=i.strokeColor=o;break;case cI.UNCOLORED:s.fillStyle=s.strokeStyle=r,i.fillColor=i.strokeColor=r;break;default:throw new SK(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,s,i){let a=r;s!==Ln.SHADING&&(a=ce.transform(a,t.baseTransform),this.matrix&&(a=ce.transform(a,this.matrix)));const o=this.createPatternCanvas(t,i);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};J(I1,"MAX_PATTERN_SIZE",3e3);let R_=I1;function nY({src:n,srcPos:e=0,dest:t,width:r,height:s,nonBlackColor:i=4294967295,inverseDecode:a=!1}){const o=Cn.isLittleEndian?4278190080:255,[l,c]=a?[i,o]:[o,i],d=r>>3,f=r&7,p=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<s;y++){for(const w=e+d;e<w;e++){const v=e<p?n[e]:255;t[m++]=v&128?c:l,t[m++]=v&64?c:l,t[m++]=v&32?c:l,t[m++]=v&16?c:l,t[m++]=v&8?c:l,t[m++]=v&4?c:l,t[m++]=v&2?c:l,t[m++]=v&1?c:l}if(f===0)continue;const g=e<p?n[e++]:255;for(let w=0;w<f;w++)t[m++]=g&1<<7-w?c:l}return{srcPos:e,destPos:m}}const uI=16,dI=100,rY=15,hI=10,Pr=16,lE=new DOMMatrix,us=new Float32Array(2),uh=new Float32Array([1/0,1/0,-1/0,-1/0]);function sY(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,s,i,a,o){e.transform(t,r,s,i,a,o),this.__originalTransform(t,r,s,i,a,o)},n.setTransform=function(t,r,s,i,a,o){e.setTransform(t,r,s,i,a,o),this.__originalSetTransform(t,r,s,i,a,o)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,s,i,a,o){e.bezierCurveTo(t,r,s,i,a,o),this.__originalBezierCurveTo(t,r,s,i,a,o)},n.rect=function(t,r,s,i){e.rect(t,r,s,i),this.__originalRect(t,r,s,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class iY{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,r)):(s=this.canvasFactory.create(t,r),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Wx(n,e,t,r,s,i,a,o,l,c){const[d,f,p,m,y,g]=Ot(n);if(f===0&&p===0){const x=a*d+y,b=Math.round(x),C=o*m+g,_=Math.round(C),E=(a+l)*d+y,N=Math.abs(Math.round(E)-b)||1,j=(o+c)*m+g,M=Math.abs(Math.round(j)-_)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),b,_),n.drawImage(e,t,r,s,i,0,0,N,M),n.setTransform(d,f,p,m,y,g),[N,M]}if(d===0&&m===0){const x=o*p+y,b=Math.round(x),C=a*f+g,_=Math.round(C),E=(o+c)*p+y,N=Math.abs(Math.round(E)-b)||1,j=(a+l)*f+g,M=Math.abs(Math.round(j)-_)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,b,_),n.drawImage(e,t,r,s,i,0,0,M,N),n.setTransform(d,f,p,m,y,g),[M,N]}n.drawImage(e,t,r,s,i,a,o,l,c);const w=Math.hypot(d,f),v=Math.hypot(p,m);return[w*l,v*c]}class fI{constructor(e,t,r){J(this,"alphaIsShape",!1);J(this,"fontSize",0);J(this,"fontSizeScale",1);J(this,"textMatrix",null);J(this,"textMatrixScale",1);J(this,"fontMatrix",s_);J(this,"leading",0);J(this,"x",0);J(this,"y",0);J(this,"lineX",0);J(this,"lineY",0);J(this,"charSpacing",0);J(this,"wordSpacing",0);J(this,"textHScale",1);J(this,"textRenderingMode",_n.FILL);J(this,"textRise",0);J(this,"fillColor","#000000");J(this,"strokeColor","#000000");J(this,"patternFill",!1);J(this,"patternStroke",!1);J(this,"fillAlpha",1);J(this,"strokeAlpha",1);J(this,"lineWidth",1);J(this,"activeSMask",null);J(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=uh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ln.FILL,t=null){const r=this.minMax.slice();if(e===Ln.STROKE){t||mt("Stroke bounding box must include transform."),ce.singularValueDecompose2dScale(t,us);const s=us[0]*this.lineWidth/2,i=us[1]*this.lineWidth/2;r[0]-=s,r[1]-=i,r[2]+=s,r[3]+=i}return r}updateClipFromPath(){const e=ce.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(uh,0)}getClippedPathBoundingBox(e=Ln.FILL,t=null){return ce.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function pI(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,s=t%Pr,i=(t-s)/Pr,a=s===0?i:i+1,o=n.createImageData(r,Pr);let l=0,c;const d=e.data,f=o.data;let p,m,y,g;if(e.kind===Sg.GRAYSCALE_1BPP){const w=d.byteLength,v=new Uint32Array(f.buffer,0,f.byteLength>>2),x=v.length,b=r+7>>3,C=4294967295,_=Cn.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(y=p<i?Pr:s,c=0,m=0;m<y;m++){const E=w-l;let N=0;const j=E>b?r:E*8-7,M=j&-8;let O=0,L=0;for(;N<M;N+=8)L=d[l++],v[c++]=L&128?C:_,v[c++]=L&64?C:_,v[c++]=L&32?C:_,v[c++]=L&16?C:_,v[c++]=L&8?C:_,v[c++]=L&4?C:_,v[c++]=L&2?C:_,v[c++]=L&1?C:_;for(;N<j;N++)O===0&&(L=d[l++],O=128),v[c++]=L&O?C:_,O>>=1}for(;c<x;)v[c++]=0;n.putImageData(o,0,p*Pr)}}else if(e.kind===Sg.RGBA_32BPP){for(m=0,g=r*Pr*4,p=0;p<i;p++)f.set(d.subarray(l,l+g)),l+=g,n.putImageData(o,0,m),m+=Pr;p<a&&(g=r*s*4,f.set(d.subarray(l,l+g)),n.putImageData(o,0,m))}else if(e.kind===Sg.RGB_24BPP)for(y=Pr,g=r*y,p=0;p<a;p++){for(p>=i&&(y=s,g=r*y),c=0,m=g;m--;)f[c++]=d[l++],f[c++]=d[l++],f[c++]=d[l++],f[c++]=255;n.putImageData(o,0,p*Pr)}else throw new Error(`bad image kind: ${e.kind}`)}function mI(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,s=t%Pr,i=(t-s)/Pr,a=s===0?i:i+1,o=n.createImageData(r,Pr);let l=0;const c=e.data,d=o.data;for(let f=0;f<a;f++){const p=f<i?Pr:s;({srcPos:l}=nY({src:c,srcPos:l,dest:d,width:r,height:p,nonBlackColor:0})),n.putImageData(o,0,f*Pr)}}function Em(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Xx(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function gI(n,e){if(e)return!0;ce.singularValueDecompose2dScale(n,us);const t=Math.fround(Ai.pixelRatio*To.PDF_TO_CSS_UNITS);return us[0]<=t&&us[1]<=t}const aY=["butt","round","square"],oY=["miter","round","bevel"],lY={},yI={};var Y0,M_,Q0,I_,J0,L_;const lP=class lP{constructor(e,t,r,s,i,{optionalContentConfig:a,markedContentStack:o=null},l,c,d){k(this,Y0);k(this,Q0);k(this,J0);this.ctx=e,this.current=new fI(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=s,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new iY(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,r=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:s=null}){const i=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,i,a),this.ctx.fillStyle=o,r){const l=this.cachedCanvases.getCanvas("transparent",i,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ot(this.compositeCtx))}this.ctx.save(),Xx(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ot(this.ctx)}executeOperatorList(e,t,r,s,i){var v;const a=e.argsArray,o=e.fnArray;let l=t||0;const c=a.length;if(c===l)return l;const d=c-l>hI&&typeof r=="function",f=d?Date.now()+rY:0;let p=0;const m=this.commonObjs,y=this.objs;let g,w;for(;;){if(s!==void 0&&l===s.nextBreakPoint)return s.breakIt(l,r),l;if(!i||i(l))if(g=o[l],w=a[l]??null,g!==Op.dependency)w===null?this[g](l):this[g](l,...w);else for(const x of w){(v=this.dependencyTracker)==null||v.recordNamedData(x,l);const b=x.startsWith("g_")?m:y;if(!b.has(x))return b.get(x,r),l}if(l++,l===c)return l;if(d&&++p>hI){if(Date.now()>f)return r(),l;p=0}}}endDrawing(){T(this,Y0,M_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),T(this,Q0,I_).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,s=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=r,l=s,c="prescale1",d,f;for(;i>2&&o>1||a>2&&l>1;){let p=o,m=l;i>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),i/=o/p),a>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/m),d=this.cachedCanvases.getCanvas(c,p,m),f=d.context,f.clearRect(0,0,p,m),f.drawImage(e,0,0,o,l,0,0,p,m),e=d.canvas,o=p,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,t){var O,L;const r=this.ctx,{width:s,height:i}=t,a=this.current.fillColor,o=this.current.patternFill,l=Ot(r);let c,d,f,p;if((t.bitmap||t.data)&&t.count>1){const F=t.bitmap||t.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(F),c||(c=new Map,this._cachedBitmapsMap.set(F,c));const U=c.get(d);if(U&&!o){const B=Math.round(Math.min(l[0],l[2])+l[4]),I=Math.round(Math.min(l[1],l[3])+l[5]);return(O=this.dependencyTracker)==null||O.recordDependencies(e,As.transformAndFill),{canvas:U,offsetX:B,offsetY:I}}f=U}f||(p=this.cachedCanvases.getCanvas("maskCanvas",s,i),mI(p.context,t));let m=ce.transform(l,[1/s,0,0,-1/i,0,0]);m=ce.transform(m,[1,0,0,1,0,-i]);const y=uh.slice();ce.axialAlignedBoundingBox([0,0,s,i],m,y);const[g,w,v,x]=y,b=Math.round(v-g)||1,C=Math.round(x-w)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,C),E=_.context,N=g,j=w;E.translate(-N,-j),E.transform(...m),f||(f=this._scaleImage(p.canvas,ji(E)),f=f.img,c&&o&&c.set(d,f)),E.imageSmoothingEnabled=gI(Ot(E),t.interpolate),Wx(E,f,0,0,f.width,f.height,0,0,s,i),E.globalCompositeOperation="source-in";const M=ce.transform(ji(E),[1,0,0,1,-N,-j]);return E.fillStyle=o?a.getPattern(r,this,M,Ln.FILL,e):a,E.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,_.canvas)),(L=this.dependencyTracker)==null||L.recordDependencies(e,As.transformAndFill),{canvas:_.canvas,offsetX:Math.round(N),offsetY:Math.round(j)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=aY[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=oY[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,s,i,a,o;for(const[l,c]of t)switch(l){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(a=this.dependencyTracker)==null||a.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(o=this.dependencyTracker)==null||o.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,r);this.suspendedCtx=this.ctx;const a=this.ctx=i.context;a.setTransform(this.suspendedCtx.getTransform()),Em(this.suspendedCtx,a),sY(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Em(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,s){const i=s[0],a=s[1],o=s[2]-i,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,r,o,l,t.subtype,t.backdrop,t.transferMap,i,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,s,i,a,o,l,c,d,f){let p=e.canvas,m=l-d,y=c-f;if(a)if(m<0||y<0||m+r>p.width||y+s>p.height){const w=this.cachedCanvases.getCanvas("maskExtension",r,s),v=w.context;v.drawImage(p,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=a,v.fillRect(0,0,r,s),v.globalCompositeOperation="source-over",p=w.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,y,r,s),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(m,y,r,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const g=new Path2D;g.rect(l,c,r,s),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(p,m,y,r,s,l,c,r,s),t.restore()}save(e){var r;this.inSMaskMode&&Em(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Em(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,s,i,a,o){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,r,s,i,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,s){let[i]=r;if(!s){i||(i=r[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const a=t===Op.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-a,s[2]+a,s[1]-a,s[3]+a).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const a=r[0]=new Path2D;for(let o=0,l=i.length;o<l;)switch(i[o++]){case $x.moveTo:a.moveTo(i[o++],i[o++]);break;case $x.lineTo:a.lineTo(i[o++],i[o++]);break;case $x.curveTo:a.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case $x.closePath:a.closePath();break;default:Pe(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=a}ce.axialAlignedBoundingBox(s,Ot(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var a;const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const o=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,ji(s),Ln.STROKE,e),o){const l=new Path2D;l.addPath(t,s.getTransform().invertSelf().multiplySelf(o)),t=l}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(a=this.dependencyTracker)==null||a.recordDependencies(e,As.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ln.STROKE,Ot(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var c,d,f;const s=this.ctx,i=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const p=i.isModifyingCurrentTransform()?s.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),s.save(),s.fillStyle=i.getPattern(s,this,ji(s),Ln.FILL,e),p){const m=new Path2D;m.addPath(t,s.getTransform().invertSelf().multiplySelf(p)),t=m}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,As.fill),o&&(s.restore(),(f=this.dependencyTracker)==null||f.restore(e)),r&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,As.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=lY}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=yI}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,i=r.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:c,path:d}of t)d&&s.addPath(d,new DOMMatrix(a).preMultiplySelf(i).translate(o,l).scale(c,-c));r.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var f,p;(f=this.dependencyTracker)==null||f.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||s_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&Pe("Invalid font matrix for font "+t),r<0?(r=-r,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=r,s.isType3Font)return;const a=s.loadedName||"sans-serif",o=((p=s.systemFontInfo)==null?void 0:p.css)||`"${a}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let d=r;r<uI?d=uI:r>dI&&(d=dI),this.current.fontSizeScale=r/d,this.ctx.font=`${c} ${l} ${d}px ${o}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,s,i,a){var v,x,b,C;const o=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,f=l.fontSize/l.fontSizeScale,p=d&_n.FILL_STROKE_MASK,m=!!(d&_n.ADD_TO_PATH_FLAG),y=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile;let w;if((c.disableFontFace||m||y||g)&&!c.missingFile&&(w=c.getPathGenerator(this.commonObjs,t)),w&&(c.disableFontFace||y||g)){o.save(),o.translate(r,s),o.scale(f,-f),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,o,c);let _;if(p===_n.FILL||p===_n.FILL_STROKE)if(i){_=o.getTransform(),o.setTransform(...i);const E=T(this,J0,L_).call(this,w,_,i);o.fill(E)}else o.fill(w);if(p===_n.STROKE||p===_n.FILL_STROKE)if(a){_||(_=o.getTransform()),o.setTransform(...a);const{a:E,b:N,c:j,d:M}=_,O=ce.inverseTransform(a),L=ce.transform([E,N,j,M,0,0],O);ce.singularValueDecompose2dScale(L,us),o.lineWidth*=Math.max(us[0],us[1])/f,o.stroke(T(this,J0,L_).call(this,w,_,a))}else o.lineWidth/=f,o.stroke(w);o.restore()}else(p===_n.FILL||p===_n.FILL_STROKE)&&(o.fillText(t,r,s),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,o,c,f,r,s,()=>o.measureText(t))),(p===_n.STROKE||p===_n.FILL_STROKE)&&(this.dependencyTracker&&((b=this.dependencyTracker)==null||b.recordCharacterBBox(e,o,c,f,r,s,()=>o.measureText(t)).recordDependencies(e,As.stroke)),o.strokeText(t,r,s));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ot(o),x:r,y:s,fontSize:f,path:w}),(C=this.dependencyTracker)==null||C.recordCharacterBBox(e,o,c,f,r,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){r=!0;break}return Oe(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var j,M,O,L;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,As.showText).resetBBox(e),this.current.textRenderingMode&_n.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,s=r.font;if(s.isType3Font){this.showType3Text(e,t),(j=this.dependencyTracker)==null||j.recordShowTextOperation(e);return}const i=r.fontSize;if(i===0){(M=this.dependencyTracker)==null||M.recordOperation(e);return}const a=this.ctx,o=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,d=r.fontDirection,f=r.textHScale*d,p=t.length,m=s.vertical,y=m?1:-1,g=s.defaultVMetrics,w=i*r.fontMatrix[0],v=r.textRenderingMode===_n.FILL&&!s.disableFontFace&&!r.patternFill;a.save(),r.textMatrix&&a.transform(...r.textMatrix),a.translate(r.x,r.y+r.textRise),d>0?a.scale(f,-1):a.scale(f,1);let x,b;if(r.patternFill){a.save();const F=r.fillColor.getPattern(a,this,ji(a),Ln.FILL,e);x=Ot(a),a.restore(),a.fillStyle=F}if(r.patternStroke){a.save();const F=r.strokeColor.getPattern(a,this,ji(a),Ln.STROKE,e);b=Ot(a),a.restore(),a.strokeStyle=F}let C=r.lineWidth;const _=r.textMatrixScale;if(_===0||C===0){const F=r.textRenderingMode&_n.FILL_STROKE_MASK;(F===_n.STROKE||F===_n.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=_;if(o!==1&&(a.scale(o,o),C/=o),a.lineWidth=C,s.isInvalidPDFjsFont){const F=[];let U=0;for(const I of t)F.push(I.unicode),U+=I.width;const B=F.join("");if(a.fillText(B,0,0),this.dependencyTracker!==null){const I=a.measureText(B);this.dependencyTracker.recordBBox(e,this.ctx,-I.actualBoundingBoxLeft,I.actualBoundingBoxRight,-I.actualBoundingBoxAscent,I.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=U*w*f,a.restore(),this.compose();return}let E=0,N;for(N=0;N<p;++N){const F=t[N];if(typeof F=="number"){E+=y*F*i/1e3;continue}let U=!1;const B=(F.isSpace?c:0)+l,I=F.fontChar,D=F.accent;let z,V,q=F.width;if(m){const K=F.vmetric||g,R=-(F.vmetric?K[1]:q*.5)*w,ie=K[2]*w;q=K?-K[0]:q,z=R/o,V=(E+ie)/o}else z=E/o,V=0;let P;if(s.remeasure&&q>0){P=a.measureText(I);const K=P.width*1e3/i*o;if(q<K&&this.isFontSubpixelAAEnabled){const R=q/K;U=!0,a.save(),a.scale(R,1),z/=R}else q!==K&&(z+=(q-K)/2e3*i/o)}if(this.contentVisible&&(F.isInFont||s.missingFile)){if(v&&!D)a.fillText(I,z,V),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,a,P?{bbox:null}:s,i/o,z,V,()=>P??a.measureText(I));else if(this.paintChar(e,I,z,V,x,b),D){const K=z+i*D.offset.x/o,R=V-i*D.offset.y/o;this.paintChar(e,D.fontChar,K,R,x,b)}}const Y=m?q*w-B*d:q*w+B*d;E+=Y,U&&a.restore()}m?r.y-=E:r.x+=E*f,a.restore(),this.compose(),(L=this.dependencyTracker)==null||L.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,s=this.current,i=s.font,a=s.fontSize,o=s.fontDirection,l=i.vertical?1:-1,c=s.charSpacing,d=s.wordSpacing,f=s.textHScale*o,p=s.fontMatrix||s_,m=t.length,y=s.textRenderingMode===_n.INVISIBLE;let g,w,v,x;if(y||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),s.textMatrix&&r.transform(...s.textMatrix),r.translate(s.x,s.y+s.textRise),r.scale(f,o);const b=this.dependencyTracker;for(this.dependencyTracker=b?new Fw(b,e):null,g=0;g<m;++g){if(w=t[g],typeof w=="number"){x=l*w*a/1e3,this.ctx.translate(x,0),s.x+=x*f;continue}const C=(w.isSpace?d:0)+c,_=i.charProcOperatorList[w.operatorListId];_?this.contentVisible&&(this.save(),r.scale(a,a),r.transform(...p),this.executeOperatorList(_),this.restore()):Pe(`Type3 character "${w.operatorListId}" is not available.`);const E=[w.width,0];ce.applyTransform(E,p),v=E[0]*a+C,r.translate(v,0),s.x+=v*f}r.restore(),b&&(this.dependencyTracker=b)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,s,i,a,o){var c;const l=new Path2D;l.rect(s,i,a-s,o-i),this.ctx.clip(l),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,s,a,i,o).recordClipBox(e,this.ctx,s,a,i,o),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const s=this.baseTransform||Ot(this.ctx),i={createCanvasGraphics:(a,o)=>new lP(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Fw(this.dependencyTracker,o,!0):null)};r=new R_(t,this.ctx,i,s)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=tY(this.getObject(e,t)),this.cachedPatterns.set(t,s)),r&&(s.matrix=r),s}shadingFill(e,t){var a;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const s=this._getPattern(e,t);r.fillStyle=s.getPattern(r,this,ji(r),Ln.SHADING,e);const i=ji(r);if(i){const{width:o,height:l}=r.canvas,c=uh.slice();ce.axialAlignedBoundingBox([0,0,o,l],i,c);const[d,f,p,m]=c;this.ctx.fillRect(d,f,p-d,m-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(a=this.dependencyTracker)==null||a.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,As.transform).recordDependencies(e,As.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){mt("Should not call beginInlineImage")}beginImageData(){mt("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Ot(this.ctx),r)){ce.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[i,a,o,l]=r,c=new Path2D;c.rect(i,a,o-i,l-a),this.ctx.clip(c),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,i,o,a,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var b;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||Ak("TODO: Support non-isolated groups."),t.knockout&&Pe("Knockout groups not supported.");const s=Ot(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=uh.slice();ce.axialAlignedBoundingBox(t.bbox,Ot(r),i);const a=[0,0,r.canvas.width,r.canvas.height];i=ce.intersect(i,a)||[0,0,0,0];const o=Math.floor(i[0]),l=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),d=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let f="groupAt"+this.groupLevel;t.smask&&(f+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(f,c,d),m=p.context;m.translate(-o,-l),m.transform(...s);let y=new Path2D;const[g,w,v,x]=t.bbox;if(y.rect(g,w,v-g,x-w),t.matrix){const C=new Path2D;C.addPath(y,new DOMMatrix(t.matrix)),y=C}m.clip(y),t.smask&&this.smaskStack.push({canvas:p.canvas,context:m,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),Em(r,m),this.ctx=m,(b=this.dependencyTracker)==null||b.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const a=Ot(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...a);const o=uh.slice();ce.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],a,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(e,t,r,s,i,a){if(T(this,Y0,M_).call(this),Xx(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const o=r[2]-r[0],l=r[3]-r[1];if(a&&this.annotationCanvasMap){s=s.slice(),s[4]-=r[0],s[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=o,r[3]=l,ce.singularValueDecompose2dScale(Ot(this.ctx),us);const{viewportScale:c}=this,d=Math.ceil(o*this.outputScaleX*c),f=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(us[0],0,0,-us[1],0,l*us[1]),Xx(this.ctx)}else{Xx(this.ctx),this.endPath(e);const c=new Path2D;c.rect(r[0],r[1],o,l),this.ctx.clip(c)}}this.current=new fI(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),T(this,Q0,I_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var o;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const s=this.ctx,i=this._createMaskCanvas(e,t),a=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(a,i.offsetX,i.offsetY),(o=this.dependencyTracker)==null||o.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+a.width,i.offsetY,i.offsetY+a.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,s=0,i=0,a,o){var f,p,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const c=Ot(l);l.transform(r,s,i,a,0,0);const d=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]),(f=this.dependencyTracker)==null||f.resetBBox(e);for(let y=0,g=o.length;y<g;y+=2){const w=ce.transform(c,[r,s,i,a,o[y],o[y+1]]);l.drawImage(d.canvas,w[4],w[5]),(p=this.dependencyTracker)==null||p.recordBBox(e,this.ctx,w[4],w[4]+d.canvas.width,w[5],w[5]+d.canvas.height)}l.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var a,o,l;if(!this.contentVisible)return;const r=this.ctx,s=this.current.fillColor,i=this.current.patternFill;(a=this.dependencyTracker)==null||a.resetBBox(e).recordDependencies(e,As.transformAndFill);for(const c of t){const{data:d,width:f,height:p,transform:m}=c,y=this.cachedCanvases.getCanvas("maskCanvas",f,p),g=y.context;g.save();const w=this.getObject(e,d,c);mI(g,w),g.globalCompositeOperation="source-in",g.fillStyle=i?s.getPattern(g,this,ji(r),Ln.FILL,e):s,g.fillRect(0,0,f,p),g.restore(),r.save(),r.transform(...m),r.scale(1,-1),Wx(r,y.canvas,0,0,f,p,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,r,0,f,0,p),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){Pe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,s,i){if(!this.contentVisible)return;const a=this.getObject(e,t);if(!a){Pe("Dependent image isn't ready yet");return}const o=a.width,l=a.height,c=[];for(let d=0,f=i.length;d<f;d+=2)c.push({transform:[r,0,0,s,i[d],i[d+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:s}=e,i=this.cachedCanvases.getCanvas("inlineImage",r,s),a=i.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",i.canvas}paintInlineImageXObject(e,t){var c;if(!this.contentVisible)return;const r=t.width,s=t.height,i=this.ctx;this.save(e);const{filter:a}=i;a!=="none"&&a!==""&&(i.filter="none"),i.scale(1/r,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",r,s).context;pI(f,t),o=this.applyTransferMapsToCanvas(f)}const l=this._scaleImage(o,ji(i));i.imageSmoothingEnabled=gI(Ot(i),t.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,i,0,r,-s,0).recordDependencies(e,As.imageXObject).recordOperation(e),Wx(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,r,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var a,o,l;if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const c=t.width,d=t.height,p=this.cachedCanvases.getCanvas("inlineImage",c,d).context;pI(p,t),i=this.applyTransferMapsToCanvas(p)}(a=this.dependencyTracker)==null||a.resetBBox(e);for(const c of r)s.save(),s.transform(...c.transform),s.scale(1,-1),Wx(s,i,c.x,c.y,c.w,c.h,0,-1,1,1),(o=this.dependencyTracker)==null||o.recordBBox(e,s,0,1,-1,0),s.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,As.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var a,o;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const i=this.ctx;this.pendingClip?(s||(this.pendingClip===yI?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(a=this.dependencyTracker)==null||a.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(o=this.dependencyTracker)==null||o.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ot(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:s,d:i}=this.ctx.getTransform();let a,o;if(r===0&&s===0){const l=Math.abs(t),c=Math.abs(i);if(l===c)if(e===0)a=o=1/l;else{const d=l*e;a=o=d<1?1/d:1}else if(e===0)a=1/l,o=1/c;else{const d=l*e,f=c*e;a=d<1?1/d:1,o=f<1?1/f:1}}else{const l=Math.abs(t*i-r*s),c=Math.hypot(t,r),d=Math.hypot(s,i);if(e===0)a=d/l,o=c/l;else{const f=e*l;a=d>f?d/f:1,o=c>f?c/f:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:s}}=this,[i,a]=this.getScaleForStroking();if(i===a){r.lineWidth=(s||1)*i,r.stroke(e);return}const o=r.getLineDash();t&&r.save(),r.scale(i,a),lE.a=1/i,lE.d=1/a;const l=new Path2D;if(l.addPath(e,lE),o.length>0){const c=Math.max(i,a);r.setLineDash(o.map(d=>d/c)),r.lineDashOffset/=c}r.lineWidth=s||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Y0=new WeakSet,M_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Q0=new WeakSet,I_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},J0=new WeakSet,L_=function(e,t,r){const s=new Path2D;return s.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),s};let Sh=lP;for(const n in Op)Sh.prototype[n]!==void 0&&(Sh.prototype[Op[n]]=Sh.prototype[n]);var lf,cf,Z0,uf,Tb;const fh=class fh{constructor(e){k(this,uf);k(this,lf,void 0);k(this,cf,void 0);k(this,Z0,void 0);A(this,lf,e),A(this,cf,new DataView(u(this,lf))),A(this,Z0,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const c of fh.strings){const d=t.encode(e[c]);r[c]=d,s+=4+d.length}const i=new ArrayBuffer(s),a=new Uint8Array(i),o=new DataView(i);let l=0;for(const c of fh.strings){const d=r[c],f=d.length;o.setUint32(l,f),a.set(d,l+4),l+=4+f}return Xe(l===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return T(this,uf,Tb).call(this,0)}get fontWeight(){return T(this,uf,Tb).call(this,1)}get italicAngle(){return T(this,uf,Tb).call(this,2)}};lf=new WeakMap,cf=new WeakMap,Z0=new WeakMap,uf=new WeakSet,Tb=function(e){Xe(e<fh.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=u(this,cf).getUint32(t)+4;const r=u(this,cf).getUint32(t);return u(this,Z0).decode(new Uint8Array(u(this,lf),t+4,r))},J(fh,"strings",["fontFamily","fontWeight","italicAngle"]);let Bw=fh;var fl,Xi,bu,wu,Xm;const ph=class ph{constructor(e){k(this,wu);k(this,fl,void 0);k(this,Xi,void 0);k(this,bu,void 0);A(this,fl,e),A(this,Xi,new DataView(u(this,fl))),A(this,bu,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let s=0;for(const p of ph.strings){const m=t.encode(e[p]);r[p]=m,s+=4+m.length}s+=4;let i,a,o=1+s;e.style&&(i=t.encode(e.style.style),a=t.encode(e.style.weight),o+=4+i.length+4+a.length);const l=new ArrayBuffer(o),c=new Uint8Array(l),d=new DataView(l);let f=0;d.setUint8(f++,e.guessFallback?1:0),d.setUint32(f,0),f+=4,s=0;for(const p of ph.strings){const m=r[p],y=m.length;s+=4+y,d.setUint32(f,y),c.set(m,f+4),f+=4+y}return d.setUint32(f-s-4,s),e.style&&(d.setUint32(f,i.length),c.set(i,f+4),f+=4+i.length,d.setUint32(f,a.length),c.set(a,f+4),f+=4+a.length),Xe(f<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(f)}get guessFallback(){return u(this,Xi).getUint8(0)!==0}get css(){return T(this,wu,Xm).call(this,0)}get loadedName(){return T(this,wu,Xm).call(this,1)}get baseFontName(){return T(this,wu,Xm).call(this,2)}get src(){return T(this,wu,Xm).call(this,3)}get style(){let e=1;e+=4+u(this,Xi).getUint32(e);const t=u(this,Xi).getUint32(e),r=u(this,bu).decode(new Uint8Array(u(this,fl),e+4,t));e+=4+t;const s=u(this,Xi).getUint32(e),i=u(this,bu).decode(new Uint8Array(u(this,fl),e+4,s));return{style:r,weight:i}}};fl=new WeakMap,Xi=new WeakMap,bu=new WeakMap,wu=new WeakSet,Xm=function(e){Xe(e<ph.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=u(this,Xi).getUint32(t)+4;const r=u(this,Xi).getUint32(t);return u(this,bu).decode(new Uint8Array(u(this,fl),t+4,r))},J(ph,"strings",["css","loadedName","baseFontName","src"]);let zw=ph;var df,hf,ff,pf,Wr,Ki,ey,ut,Xr,ti,mf,Nb,Su,Km;const Ie=class Ie{constructor({data:e,extra:t}){k(this,Xr);k(this,mf);k(this,Su);k(this,Ki,void 0);k(this,ey,void 0);k(this,ut,void 0);A(this,Ki,e),A(this,ey,new TextDecoder),A(this,ut,new DataView(u(this,Ki))),t&&Object.assign(this,t)}get black(){return T(this,Xr,ti).call(this,0)}get bold(){return T(this,Xr,ti).call(this,1)}get disableFontFace(){return T(this,Xr,ti).call(this,2)}get fontExtraProperties(){return T(this,Xr,ti).call(this,3)}get isInvalidPDFjsFont(){return T(this,Xr,ti).call(this,4)}get isType3Font(){return T(this,Xr,ti).call(this,5)}get italic(){return T(this,Xr,ti).call(this,6)}get missingFile(){return T(this,Xr,ti).call(this,7)}get remeasure(){return T(this,Xr,ti).call(this,8)}get vertical(){return T(this,Xr,ti).call(this,9)}get ascent(){return T(this,mf,Nb).call(this,0)}get defaultWidth(){return T(this,mf,Nb).call(this,1)}get descent(){return T(this,mf,Nb).call(this,2)}get bbox(){let e=u(Ie,hf);if(u(this,ut).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<4;s++)r.push(u(this,ut).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=u(Ie,ff);if(u(this,ut).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<6;s++)r.push(u(this,ut).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=u(Ie,pf);if(u(this,ut).getUint8(e)===0)return;e+=1;const r=[];for(let s=0;s<3;s++)r.push(u(this,ut).getInt16(e,!0)),e+=2;return r}get fallbackName(){return T(this,Su,Km).call(this,0)}get loadedName(){return T(this,Su,Km).call(this,1)}get mimetype(){return T(this,Su,Km).call(this,2)}get name(){return T(this,Su,Km).call(this,3)}get data(){let e=u(Ie,Wr);const t=u(this,ut).getUint32(e);e+=4+t;const r=u(this,ut).getUint32(e);e+=4+r;const s=u(this,ut).getUint32(e);e+=4+s;const i=u(this,ut).getUint32(e);if(i!==0)return new Uint8Array(u(this,Ki),e+4,i)}clearData(){let e=u(Ie,Wr);const t=u(this,ut).getUint32(e);e+=4+t;const r=u(this,ut).getUint32(e);e+=4+r;const s=u(this,ut).getUint32(e);e+=4+s;const i=u(this,ut).getUint32(e);new Uint8Array(u(this,Ki),e+4,i).fill(0),u(this,ut).setUint32(e,0)}get cssFontInfo(){let e=u(Ie,Wr);const t=u(this,ut).getUint32(e);e+=4+t;const r=u(this,ut).getUint32(e);e+=4+r;const s=u(this,ut).getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(u(this,Ki),e+4,s)),new Bw(i.buffer)}get systemFontInfo(){let e=u(Ie,Wr);const t=u(this,ut).getUint32(e);e+=4+t;const r=u(this,ut).getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(u(this,Ki),e+4,r)),new zw(s.buffer)}static write(e){const t=e.systemFontInfo?zw.write(e.systemFontInfo):null,r=e.cssFontInfo?Bw.write(e.cssFontInfo):null,s=new TextEncoder,i={};let a=0;for(const g of Ie.strings)i[g]=s.encode(e[g]),a+=4+i[g].length;const o=u(Ie,Wr)+4+a+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),c=new Uint8Array(l),d=new DataView(l);let f=0;const p=Ie.bools.length;let m=0,y=0;for(let g=0;g<p;g++){const w=e[Ie.bools[g]];m|=(w===void 0?0:w?2:1)<<y,y+=2,(y===8||g===p-1)&&(d.setUint8(f++,m),m=0,y=0)}Xe(f===u(Ie,df),"FontInfo.write: Boolean properties offset mismatch");for(const g of Ie.numbers)d.setFloat64(f,e[g]),f+=8;if(Xe(f===u(Ie,hf),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(f++,4);for(const g of e.bbox)d.setInt16(f,g,!0),f+=2}else d.setUint8(f++,0),f+=2*4;if(Xe(f===u(Ie,ff),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(f++,6);for(const g of e.fontMatrix)d.setFloat64(f,g,!0),f+=8}else d.setUint8(f++,0),f+=8*6;if(Xe(f===u(Ie,pf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(f++,1);for(const g of e.defaultVMetrics)d.setInt16(f,g,!0),f+=2}else d.setUint8(f++,0),f+=3*2;Xe(f===u(Ie,Wr),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(u(Ie,Wr),0),f+=4;for(const g of Ie.strings){const w=i[g],v=w.length;d.setUint32(f,v),c.set(w,f+4),f+=4+v}if(d.setUint32(u(Ie,Wr),f-u(Ie,Wr)-4),!t)d.setUint32(f,0),f+=4;else{const g=t.byteLength;d.setUint32(f,g),Xe(f+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),f+4),f+=4+g}if(!r)d.setUint32(f,0),f+=4;else{const g=r.byteLength;d.setUint32(f,g),Xe(f+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(r),f+4),f+=4+g}return e.data===void 0?(d.setUint32(f,0),f+=4):(d.setUint32(f,e.data.length),c.set(e.data,f+4),f+=4+e.data.length),Xe(f<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(f)}};df=new WeakMap,hf=new WeakMap,ff=new WeakMap,pf=new WeakMap,Wr=new WeakMap,Ki=new WeakMap,ey=new WeakMap,ut=new WeakMap,Xr=new WeakSet,ti=function(e){Xe(e<Ie.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,s=u(this,ut).getUint8(t)>>r&3;return s===0?void 0:s===2},mf=new WeakSet,Nb=function(e){return Xe(e<Ie.numbers.length,"Invalid number index"),u(this,ut).getFloat64(u(Ie,df)+e*8)},Su=new WeakSet,Km=function(e){Xe(e<Ie.strings.length,"Invalid string index");let t=u(Ie,Wr)+4;for(let i=0;i<e;i++)t+=u(this,ut).getUint32(t)+4;const r=u(this,ut).getUint32(t),s=new Uint8Array(r);return s.set(new Uint8Array(u(this,Ki),t+4,r)),u(this,ey).decode(s)},J(Ie,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),J(Ie,"numbers",["ascent","defaultWidth","descent"]),J(Ie,"strings",["fallbackName","loadedName","mimetype","name"]),k(Ie,df,Math.ceil(Ie.bools.length*2/8)),k(Ie,hf,u(Ie,df)+Ie.numbers.length*8),k(Ie,ff,u(Ie,hf)+1+2*4),k(Ie,pf,u(Ie,ff)+1+8*6),k(Ie,Wr,u(Ie,pf)+1+2*3);let D_=Ie;var ty,ny;class $s{static get workerPort(){return u(this,ty)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,ty,e)}static get workerSrc(){return u(this,ny)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,ny,e)}}ty=new WeakMap,ny=new WeakMap,k($s,ty,null),k($s,ny,"");var gf,ry;class cY{constructor({parsedData:e,rawData:t}){k(this,gf,void 0);k(this,ry,void 0);A(this,gf,e),A(this,ry,t)}getRaw(){return u(this,ry)}get(e){return u(this,gf).get(e)??null}[Symbol.iterator](){return u(this,gf).entries()}}gf=new WeakMap,ry=new WeakMap;const qd=Symbol("INTERNAL");var sy,iy,ay,yf;class uY{constructor(e,{name:t,intent:r,usage:s,rbGroups:i}){k(this,sy,!1);k(this,iy,!1);k(this,ay,!1);k(this,yf,!0);A(this,sy,!!(e&ls.DISPLAY)),A(this,iy,!!(e&ls.PRINT)),this.name=t,this.intent=r,this.usage=s,this.rbGroups=i}get visible(){if(u(this,ay))return u(this,yf);if(!u(this,yf))return!1;const{print:e,view:t}=this.usage;return u(this,sy)?(t==null?void 0:t.viewState)!=="OFF":u(this,iy)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==qd&&mt("Internal method `_setVisible` called."),A(this,ay,r),A(this,yf,t)}}sy=new WeakMap,iy=new WeakMap,ay=new WeakMap,yf=new WeakMap;var pl,dt,vf,xf,oy,O_;class dY{constructor(e,t=ls.DISPLAY){k(this,oy);k(this,pl,null);k(this,dt,new Map);k(this,vf,null);k(this,xf,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,xf,e.order);for(const r of e.groups)u(this,dt).set(r.id,new uY(t,r));if(e.baseState==="OFF")for(const r of u(this,dt).values())r._setVisible(qd,!1);for(const r of e.on)u(this,dt).get(r)._setVisible(qd,!0);for(const r of e.off)u(this,dt).get(r)._setVisible(qd,!1);A(this,vf,this.getHash())}}isVisible(e){if(u(this,dt).size===0)return!0;if(!e)return Ak("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,dt).has(e.id)?u(this,dt).get(e.id).visible:(Pe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return T(this,oy,O_).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(u(this,dt).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(!u(this,dt).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(!u(this,dt).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,dt).has(t))return Pe(`Optional content group not found: ${t}`),!0;if(u(this,dt).get(t).visible)return!1}return!0}return Pe(`Unknown optional content policy ${e.policy}.`),!0}return Pe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var i;const s=u(this,dt).get(e);if(!s){Pe(`Optional content group not found: ${e}`);return}if(r&&t&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==e&&((i=u(this,dt).get(o))==null||i._setVisible(qd,!1,!0));s._setVisible(qd,!!t,!0),A(this,pl,null)}setOCGState({state:e,preserveRB:t}){let r;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":r=s;continue}const i=u(this,dt).get(s);if(i)switch(r){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!i.visible,t);break}}A(this,pl,null)}get hasInitialVisibility(){return u(this,vf)===null||this.getHash()===u(this,vf)}getOrder(){return u(this,dt).size?u(this,xf)?u(this,xf).slice():[...u(this,dt).keys()]:null}getGroup(e){return u(this,dt).get(e)||null}getHash(){if(u(this,pl)!==null)return u(this,pl);const e=new T5;for(const[t,r]of u(this,dt))e.update(`${t}:${r.visible}`);return A(this,pl,e.hexdigest())}[Symbol.iterator](){return u(this,dt).entries()}}pl=new WeakMap,dt=new WeakMap,vf=new WeakMap,xf=new WeakMap,oy=new WeakSet,O_=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let s=1;s<t;s++){const i=e[s];let a;if(Array.isArray(i))a=T(this,oy,O_).call(this,i);else if(u(this,dt).has(i))a=u(this,dt).get(i).visible;else return Pe(`Optional content group not found: ${i}`),!0;switch(r){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return r==="And"};class hY{constructor(e,{disableRange:t=!1,disableStream:r=!1}){Xe(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:i,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const s=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(r),!0)});Xe(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,s,i;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(i=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||i.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Xe(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new fY(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new pY(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class fY{constructor(e,t,r=!1,s=null){this._stream=e,this._done=r||!1,this._filename=Ck(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class pY{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function mY(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=l(d),d=c(d),i(d)}if(t=a(n),t){const d=c(t);return i(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=o(t);return d=c(d),i(d)}function r(d,f){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(d,f){if(d){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(d,{fatal:!0}),m=Gv(f);f=p.decode(m),e=!1}catch{}}return f}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function a(d){const f=[];let p;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=m.exec(d))!==null;){let[,g,w,v]=p;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[w,v]}const y=[];for(let g=0;g<f.length&&g in f;++g){let[w,v]=f[g];v=o(v),w&&(v=unescape(v),g===0&&(v=l(v))),y.push(v)}return y.join("")}function o(d){if(d.startsWith('"')){const f=d.slice(1).split('\\"');for(let p=0;p<f.length;++p){const m=f[p].indexOf('"');m!==-1&&(f[p]=f[p].slice(0,m),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}d=f.join('"')}return d}function l(d){const f=d.indexOf("'");if(f===-1)return d;const p=d.slice(0,f),y=d.slice(f+1).replace(/^[^']*'/,"");return s(p,y)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),s(p,y);try{y=atob(y)}catch{}return s(p,y)})}return""}function $5(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const s=e[r];s!==void 0&&t.append(r,s)}return t}function _k(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function V5({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const s={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(s.suggestedLength=i,i<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function U5(n){const e=n.get("Content-Disposition");if(e){let t=mY(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Ck(t))return t}return null}function Yv(n,e){return new Kg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function H5(n){return n===200||n===206}function q5(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function G5(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Pe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class gY{constructor(e){J(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=$5(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xe(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new yY(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new vY(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class yY{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),s=t.url;fetch(s,q5(r,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=_k(i.url),!H5(i.status))throw Yv(i.status,s);this._reader=i.body.getReader(),this._headersCapability.resolve();const a=i.headers,{allowRangeRequests:o,suggestedLength:l}=V5({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=U5(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new _o("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:G5(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class vY{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${r-1}`);const a=s.url;fetch(a,q5(i,this._withCredentials,this._abortController)).then(o=>{const l=_k(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!H5(o.status))throw Yv(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:G5(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const cE=200,uE=206;function xY(n){const e=n.response;return typeof e!="string"?e:Gv(e).buffer}class bY{constructor({url:e,httpHeaders:t,withCredentials:r}){J(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=$5(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,s=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,a]of this.headers)t.setRequestHeader(i,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=uE):s.expectedStatus=cE,t.responseType="arraybuffer",Xe(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var s;const r=this.pendingRequests[e];r&&((s=r.onProgress)==null||s.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const s=r.xhr;if(s.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){r.onError(s.status);return}const i=s.status||cE;if(!(i===cE&&r.expectedStatus===uE)&&i!==r.expectedStatus){r.onError(s.status);return}const o=xY(s);if(i===uE){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:o}):(Pe('Missing or invalid "Content-Range" header.'),r.onError(0))}else o?r.onDone({begin:0,chunk:o}):r.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class wY{constructor(e){this._source=e,this._manager=new bY(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Xe(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new SY(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new kY(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class SY{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=_k(t.responseURL);const r=t.getAllResponseHeaders(),s=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...c]=o.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:a}=V5({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=U5(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Yv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class kY{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=_k((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Yv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const AY=/^[a-z][a-z0-9\-+.]+:/i;function EY(n){if(AY.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class CY{constructor(e){this.source=e,this.url=EY(e.url),Xe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Xe(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new _Y(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new TY(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class _Y{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Yv(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new _o("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class TY{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Cm=Symbol("INITIAL_DATA");var Kr,ly,F_;class W5{constructor(){k(this,ly);k(this,Kr,Object.create(null))}get(e,t=null){if(t){const s=T(this,ly,F_).call(this,e);return s.promise.then(()=>t(s.data)),null}const r=u(this,Kr)[e];if(!r||r.data===Cm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=u(this,Kr)[e];return!!t&&t.data!==Cm}delete(e){const t=u(this,Kr)[e];return!t||t.data===Cm?!1:(delete u(this,Kr)[e],!0)}resolve(e,t=null){const r=T(this,ly,F_).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in u(this,Kr)){const{data:r}=u(this,Kr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}A(this,Kr,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Kr)){const{data:t}=u(this,Kr)[e];t!==Cm&&(yield[e,t])}}}Kr=new WeakMap,ly=new WeakSet,F_=function(e){var t;return(t=u(this,Kr))[e]||(t[e]={...Promise.withResolvers(),data:Cm})};const NY=1e5,vI=30;var jL,ml,_r,cy,uy,ku,Wa,dy,hy,Au,bf,wf,gl,Sf,fy,kf,Eu,py,my,Mt,Af,Cu,gy,yl,Ef,L1,X5,D1,K5,yy,B_,Cf,Pb,vy,z_,O1,Y5,F1,Q5;let Zg=(Mt=class{constructor({textContentSource:e,container:t,viewport:r}){k(this,L1);k(this,D1);k(this,yy);k(this,ml,Promise.withResolvers());k(this,_r,null);k(this,cy,!1);k(this,uy,!!((jL=globalThis.FontInspector)!=null&&jL.enabled));k(this,ku,null);k(this,Wa,null);k(this,dy,0);k(this,hy,0);k(this,Au,null);k(this,bf,null);k(this,wf,0);k(this,gl,0);k(this,Sf,Object.create(null));k(this,fy,[]);k(this,kf,null);k(this,Eu,[]);k(this,py,new WeakMap);k(this,my,null);var l;if(e instanceof ReadableStream)A(this,kf,e);else if(typeof e=="object")A(this,kf,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,_r,A(this,bf,t)),A(this,gl,r.scale*Ai.pixelRatio),A(this,wf,r.rotation),A(this,Wa,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:i,pageX:a,pageY:o}=r.rawDims;A(this,my,[1,0,0,-1,-a,o+i]),A(this,hy,s),A(this,dy,i),T(l=Mt,O1,Y5).call(l),ac(t,r),u(this,ml).promise.finally(()=>{u(Mt,Ef).delete(this),A(this,Wa,null),A(this,Sf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Cn.platform;return Oe(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,Au).read().then(({value:t,done:r})=>{if(r){u(this,ml).resolve();return}u(this,ku)??A(this,ku,t.lang),Object.assign(u(this,Sf),t.styles),T(this,L1,X5).call(this,t.items),e()},u(this,ml).reject)};return A(this,Au,u(this,kf).getReader()),u(Mt,Ef).add(this),e(),u(this,ml).promise}update({viewport:e,onBefore:t=null}){var i;const r=e.scale*Ai.pixelRatio,s=e.rotation;if(s!==u(this,wf)&&(t==null||t(),A(this,wf,s),ac(u(this,bf),{rotation:s})),r!==u(this,gl)){t==null||t(),A(this,gl,r);const a={div:null,properties:null,ctx:T(i=Mt,Cf,Pb).call(i,u(this,ku))};for(const o of u(this,Eu))a.properties=u(this,py).get(o),a.div=o,T(this,yy,B_).call(this,a)}}cancel(){var t;const e=new _o("TextLayer task cancelled.");(t=u(this,Au))==null||t.cancel(e).catch(()=>{}),A(this,Au,null),u(this,ml).reject(e)}get textDivs(){return u(this,Eu)}get textContentItemsStr(){return u(this,fy)}static cleanup(){if(!(u(this,Ef).size>0)){u(this,Af).clear();for(const{canvas:e}of u(this,Cu).values())e.remove();u(this,Cu).clear()}}},ml=new WeakMap,_r=new WeakMap,cy=new WeakMap,uy=new WeakMap,ku=new WeakMap,Wa=new WeakMap,dy=new WeakMap,hy=new WeakMap,Au=new WeakMap,bf=new WeakMap,wf=new WeakMap,gl=new WeakMap,Sf=new WeakMap,fy=new WeakMap,kf=new WeakMap,Eu=new WeakMap,py=new WeakMap,my=new WeakMap,Af=new WeakMap,Cu=new WeakMap,gy=new WeakMap,yl=new WeakMap,Ef=new WeakMap,L1=new WeakSet,X5=function(e){var s,i;if(u(this,cy))return;(i=u(this,Wa)).ctx??(i.ctx=T(s=Mt,Cf,Pb).call(s,u(this,ku)));const t=u(this,Eu),r=u(this,fy);for(const a of e){if(t.length>NY){Pe("Ignoring additional textDivs for performance reasons."),A(this,cy,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=u(this,_r);A(this,_r,document.createElement("span")),u(this,_r).classList.add("markedContent"),a.id&&u(this,_r).setAttribute("id",`${a.id}`),o.append(u(this,_r))}else a.type==="endMarkedContent"&&A(this,_r,u(this,_r).parentNode);continue}r.push(a.str),T(this,D1,K5).call(this,a)}},D1=new WeakSet,K5=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,Eu).push(t);const s=ce.transform(u(this,my),e.transform);let i=Math.atan2(s[1],s[0]);const a=u(this,Sf)[e.fontName];a.vertical&&(i+=Math.PI/2);let o=u(this,uy)&&a.fontSubstitution||a.fontFamily;o=Mt.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),c=l*T(g=Mt,F1,Q5).call(g,o,a,u(this,ku));let d,f;i===0?(d=s[4],f=s[5]-c):(d=s[4]+c*Math.sin(i),f=s[5]-c*Math.cos(i));const p="calc(var(--total-scale-factor) *",m=t.style;u(this,_r)===u(this,bf)?(m.left=`${(100*d/u(this,hy)).toFixed(2)}%`,m.top=`${(100*f/u(this,dy)).toFixed(2)}%`):(m.left=`${p}${d.toFixed(2)}px)`,m.top=`${p}${f.toFixed(2)}px)`),m.fontSize=`${p}${(u(Mt,yl)*l).toFixed(2)}px)`,m.fontFamily=o,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,uy)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),i!==0&&(r.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(r.canvasWidth=a.vertical?e.height:e.width),u(this,py).set(t,r),u(this,Wa).div=t,u(this,Wa).properties=r,T(this,yy,B_).call(this,u(this,Wa)),r.hasText&&u(this,_r).append(t),r.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),u(this,_r).append(w)}},yy=new WeakSet,B_=function(e){var o;const{div:t,properties:r,ctx:s}=e,{style:i}=t;let a="";if(u(Mt,yl)>1&&(a=`scale(${1/u(Mt,yl)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=i,{canvasWidth:c,fontSize:d}=r;T(o=Mt,vy,z_).call(o,s,d*u(this,gl),l);const{width:f}=s.measureText(t.textContent);f>0&&(a=`scaleX(${c*u(this,gl)/f}) ${a}`)}r.angle!==0&&(a=`rotate(${r.angle}deg) ${a}`),a.length>0&&(i.transform=a)},Cf=new WeakSet,Pb=function(e=null){let t=u(this,Cu).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,Cu).set(e,t),u(this,gy).set(t,{size:0,family:""})}return t},vy=new WeakSet,z_=function(e,t,r){const s=u(this,gy).get(e);t===s.size&&r===s.family||(e.font=`${t}px ${r}`,s.size=t,s.family=r)},O1=new WeakSet,Y5=function(){if(u(this,yl)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,yl,e.getBoundingClientRect().height),e.remove()},F1=new WeakSet,Q5=function(e,t,r){const s=u(this,Af).get(e);if(s)return s;const i=T(this,Cf,Pb).call(this,r);i.canvas.width=i.canvas.height=vI,T(this,vy,z_).call(this,i,vI,e);const a=i.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let c=.8;return o?c=o/(o+l):(Cn.platform.isFirefox&&Pe("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),u(this,Af).set(e,c),c},k(Mt,Cf),k(Mt,vy),k(Mt,O1),k(Mt,F1),k(Mt,Af,new Map),k(Mt,Cu,new Map),k(Mt,gy,new WeakMap),k(Mt,yl,null),k(Mt,Ef,new Set),Mt);const PY=100;function IN(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new $_,{docId:t}=e,r=n.url?FK(n.url):null,s=n.data?BK(n.data):null,i=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof LN?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Fp?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!Xv(n.docBaseUrl)?n.docBaseUrl:null,m=Ux(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(cr?GK:sI),w=Ux(n.iccUrl),v=Ux(n.standardFontDataUrl),x=n.StandardFontDataFactory||(cr?WK:iI),b=Ux(n.wasmUrl),C=n.WasmFactory||(cr?XK:aI),_=n.stopAtErrors!==!0,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,j=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!cr,M=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!cr&&(Cn.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:cr,F=n.fontExtraProperties===!0,U=n.enableXfa===!0,B=n.ownerDocument||globalThis.document,I=n.disableRange===!0,D=n.disableStream===!0,z=n.disableAutoFetch===!0,V=n.pdfBug===!0,q=n.CanvasFactory||(cr?qK:VK),P=n.FilterFactory||(cr?HK:UK),Y=n.enableHWA===!0,K=n.useWasm!==!1,R=l?l.length:n.length??NaN,ie=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!cr&&!L,ke=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===sI&&x===iI&&C===aI&&m&&v&&b&&Om(m,document.baseURI)&&Om(v,document.baseURI)&&Om(b,document.baseURI)),me=null;xK(f);const ve={canvasFactory:new q({ownerDocument:B,enableHWA:Y}),filterFactory:new P({docId:t,ownerDocument:B}),cMapReaderFactory:ke?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:ke?null:new x({baseUrl:v}),wasmFactory:ke?null:new C({baseUrl:b})};d||(d=Fp.create({verbosity:f,port:$s.workerPort}),e._worker=d);const Ke={docId:t,apiVersion:"5.4.296",data:s,password:o,disableAutoFetch:z,rangeChunkSize:c,length:R,docBaseUrl:p,enableXfa:U,evaluatorOptions:{maxImageSize:E,disableFontFace:L,ignoreErrors:_,isEvalSupported:N,isOffscreenCanvasSupported:j,isImageDecoderSupported:M,canvasMaxAreaInBytes:O,fontExtraProperties:F,useSystemFonts:ie,useWasm:K,useWorkerFetch:ke,cMapUrl:m,iccUrl:w,standardFontDataUrl:v,wasmUrl:b}},Re={ownerDocument:B,pdfBug:V,styleElement:me,loadingParams:{disableAutoFetch:z,enableXfa:U}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const xe=d.messageHandler.sendWithPromise("GetDocRequest",Ke,s?[s.buffer]:null);let He;if(l)He=new hY(l,{disableRange:I,disableStream:D});else if(!s){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Be=Om(r)?gY:cr?CY:wY;He=new Be({url:r,length:R,httpHeaders:i,withCredentials:a,rangeChunkSize:c,disableRange:I,disableStream:D})}return xe.then(Be=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ge=new Um(t,Be,d.port),Z=new MY(ge,e,He,Re,ve,Y);e._transport=Z,ge.send("Ready",null)})}).catch(e._capability.reject),e}var B1;const z1=class z1{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${ln(z1,B1)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};B1=new WeakMap,k(z1,B1,0);let $_=z1;var _u,xy,by,wy,Sy,RL;let LN=(RL=class{constructor(e,t,r=!1,s=null){k(this,_u,Promise.withResolvers());k(this,xy,[]);k(this,by,[]);k(this,wy,[]);k(this,Sy,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=s}addRangeListener(e){u(this,Sy).push(e)}addProgressListener(e){u(this,wy).push(e)}addProgressiveReadListener(e){u(this,by).push(e)}addProgressiveDoneListener(e){u(this,xy).push(e)}onDataRange(e,t){for(const r of u(this,Sy))r(e,t)}onDataProgress(e,t){u(this,_u).promise.then(()=>{for(const r of u(this,wy))r(e,t)})}onDataProgressiveRead(e){u(this,_u).promise.then(()=>{for(const t of u(this,by))t(e)})}onDataProgressiveDone(){u(this,_u).promise.then(()=>{for(const e of u(this,xy))e()})}transportReady(){u(this,_u).resolve()}requestDataRange(e,t){mt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},_u=new WeakMap,xy=new WeakMap,by=new WeakMap,wy=new WeakMap,Sy=new WeakMap,RL);class jY{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Oe(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Xa,Tu,Ym;class RY{constructor(e,t,r,s=!1){k(this,Tu);k(this,Xa,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=s?new QM:null,this._pdfBug=s,this.commonObjs=r.commonObjs,this.objs=new W5,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:s=0,dontFlip:i=!1}={}){return new Wv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:s,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Oe(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:s="display",annotationMode:i=la.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:f=null,isEditing:p=!1,recordOperations:m=!1,operationsFilter:y=null}){var M,O,L;(M=this._stats)==null||M.time("Overall");const g=this._transport.getRenderingIntent(s,i,f,p),{renderingIntent:w,cacheKey:v}=g;A(this,Xa,!1),l||(l=this._transport.getOptionalContentConfig(w));let x=this._intentStates.get(v);x||(x=Object.create(null),this._intentStates.set(v,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const b=!!(w&ls.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(g));const C=!!(this._pdfBug&&((L=globalThis.StepperManager)!=null&&L.enabled)),_=!this.recordedBBoxes&&(m||C),E=F=>{var U,B;if(x.renderTasks.delete(N),_){const I=(U=N.gfx)==null?void 0:U.dependencyTracker.take();I&&(N.stepper&&N.stepper.setOperatorBBoxes(I,N.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=I))}b&&A(this,Xa,!0),T(this,Tu,Ym).call(this),F?(N.capability.reject(F),this._abortOperatorList({intentState:x,reason:F instanceof Error?F:new Error(F)})):N.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},N=new V_({callback:E,params:{canvas:t,canvasContext:e,dependencyTracker:_?new YK(t,x.operatorList.length,C):null,viewport:r,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(x.renderTasks||(x.renderTasks=new Set)).add(N);const j=N.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([F,U])=>{var B;if(this.destroyed){E();return}if((B=this._stats)==null||B.time("Rendering"),!(U.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");N.initializeGraphics({transparency:F,optionalContentConfig:U}),N.operatorListChanged()}).catch(E),j}getOperatorList({intent:e="display",annotationMode:t=la.ENABLE,printAnnotationStorage:r=null,isEditing:s=!1}={}){var c;function i(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,r,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>Yg.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,s){function i(){a.read().then(function({value:l,done:c}){if(c){r(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),i()},s)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),A(this,Xa,!1),Promise.all(e)}cleanup(e=!1){A(this,Xa,!0);const t=T(this,Tu,Ym).call(this);return e&&t&&this._stats&&(this._stats=new QM),t}_startRenderPage(e,t){var s,i;const r=this._intentStates.get(t);r&&((s=this._stats)==null||s.timeEnd("Page Request"),(i=r.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let r=0,s=e.length;r<s;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&T(this,Tu,Ym).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:s}){const{map:i,transfer:a}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:s},a).getReader(),c=this._intentStates.get(t);c.streamReader=l;const d=()=>{l.read().then(({value:f,done:p})=>{if(p){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,c),d())},f=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const p of c.renderTasks)p.operatorListChanged();T(this,Tu,Ym).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(f);else if(c.opListReadCapability)c.opListReadCapability.reject(f);else throw f}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof Ek){let s=PY;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new _o(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,i]of this._intentStates)if(i===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Xa=new WeakMap,Tu=new WeakSet,Ym=function(){if(!u(this,Xa)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,Xa,!1),!0};var vl,ui,Ka,Nu,$1,Pu,ju,_f,jb,V1,J5,U1,Z5,Ru,Qm,Tf,Rb;const Pt=class Pt{constructor({name:e=null,port:t=null,verbosity:r=bK()}={}){k(this,_f);k(this,V1);k(this,U1);k(this,Ru);k(this,vl,Promise.withResolvers());k(this,ui,null);k(this,Ka,null);k(this,Nu,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(u(Pt,ju).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(Pt,ju).set(t,this),T(this,V1,J5).call(this,t)}else T(this,U1,Z5).call(this)}get promise(){return u(this,vl).promise}get port(){return u(this,Ka)}get messageHandler(){return u(this,ui)}destroy(){var e,t;this.destroyed=!0,(e=u(this,Nu))==null||e.terminate(),A(this,Nu,null),u(Pt,ju).delete(u(this,Ka)),A(this,Ka,null),(t=u(this,ui))==null||t.destroy(),A(this,ui,null)}static create(e){const t=u(this,ju).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Pt(e)}static get workerSrc(){if($s.workerSrc)return $s.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Oe(this,"_setupFakeWorkerGlobal",(async()=>u(this,Tf,Rb)?u(this,Tf,Rb):(await jo(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};vl=new WeakMap,ui=new WeakMap,Ka=new WeakMap,Nu=new WeakMap,$1=new WeakMap,Pu=new WeakMap,ju=new WeakMap,_f=new WeakSet,jb=function(){u(this,vl).resolve(),u(this,ui).send("configure",{verbosity:this.verbosity})},V1=new WeakSet,J5=function(e){A(this,Ka,e),A(this,ui,new Um("main","worker",e)),u(this,ui).on("ready",()=>{}),T(this,_f,jb).call(this)},U1=new WeakSet,Z5=function(){if(u(Pt,Pu)||u(Pt,Tf,Rb)){T(this,Ru,Qm).call(this);return}let{workerSrc:e}=Pt;try{Pt._isSameOrigin(window.location,e)||(e=Pt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new Um("main","worker",t),s=()=>{i.abort(),r.destroy(),t.terminate(),this.destroyed?u(this,vl).reject(new Error("Worker was destroyed")):T(this,Ru,Qm).call(this)},i=new AbortController;t.addEventListener("error",()=>{u(this,Nu)||s()},{signal:i.signal}),r.on("test",o=>{if(i.abort(),this.destroyed||!o){s();return}A(this,ui,r),A(this,Ka,t),A(this,Nu,t),T(this,_f,jb).call(this)}),r.on("ready",o=>{if(i.abort(),this.destroyed){s();return}try{a()}catch{T(this,Ru,Qm).call(this)}});const a=()=>{const o=new Uint8Array;r.send("test",o,[o.buffer])};a();return}catch{Ak("The worker has been disabled.")}T(this,Ru,Qm).call(this)},Ru=new WeakSet,Qm=function(){u(Pt,Pu)||(Pe("Setting up fake worker."),A(Pt,Pu,!0)),Pt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,vl).reject(new Error("Worker was destroyed"));return}const t=new $K;A(this,Ka,t);const r=`fake${ln(Pt,$1)._++}`,s=new Um(r+"_worker",r,t);e.setup(s,t),A(this,ui,new Um(r,r+"_worker",t)),T(this,_f,jb).call(this)}).catch(e=>{u(this,vl).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Tf=new WeakSet,Rb=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},k(Pt,Tf),k(Pt,$1,0),k(Pt,Pu,!1),k(Pt,ju,new WeakMap),cr&&(A(Pt,Pu,!0),$s.workerSrc||($s.workerSrc="./pdf.worker.mjs")),Pt._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const s=new URL(t,r);return r.origin===s.origin},Pt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Pt.fromPort=e=>{if(NK("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Pt.create(e)};let Fp=Pt;var Ya,Yi,Nf,Pf,Qa,Mu,Jm;class MY{constructor(e,t,r,s,i,a){k(this,Mu);k(this,Ya,new Map);k(this,Yi,new Map);k(this,Nf,new Map);k(this,Pf,new Map);k(this,Qa,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new W5,this.fontLoader=new DK({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=a,this.setupMessageHandler()}get annotationStorage(){return Oe(this,"annotationStorage",new jN)}getRenderingIntent(e,t=la.ENABLE,r=null,s=!1,i=!1){let a=ls.DISPLAY,o=E_;switch(e){case"any":a=ls.ANY;break;case"display":break;case"print":a=ls.PRINT;break;default:Pe(`getRenderingIntent - invalid intent: ${e}`)}const l=a&ls.PRINT&&r instanceof P5?r:this.annotationStorage;switch(t){case la.DISABLE:a+=ls.ANNOTATIONS_DISABLE;break;case la.ENABLE:break;case la.ENABLE_FORMS:a+=ls.ANNOTATIONS_FORMS;break;case la.ENABLE_STORAGE:a+=ls.ANNOTATIONS_STORAGE,o=l.serializable;break;default:Pe(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(a+=ls.IS_EDITING),i&&(a+=ls.OPLIST);const{ids:c,hash:d}=l.modifiedIds,f=[a,o.hash,d];return{renderingIntent:a,cacheKey:f.join("_"),annotationStorageSerializable:o,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=u(this,Qa))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of u(this,Yi).values())e.push(s._destroy());u(this,Yi).clear(),u(this,Nf).clear(),u(this,Pf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,i;this.commonObjs.clear(),this.fontLoader.clear(),u(this,Ya).clear(),this.filterFactory.destroy(),Zg.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new _o("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,s)=>{Xe(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},s.onPull=()=>{this._fullReader.read().then(function({value:i,done:a}){if(a){s.close();return}Xe(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{s.error(i)})},s.onCancel=i=>{this._fullReader.cancel(i),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async r=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:i,contentLength:a}=this._fullReader;return(!s||!i)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:i,contentLength:a}}),e.on("GetRangeReader",(r,s)=>{Xe(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(r.begin,r.end);if(!i){s.close();return}s.onPull=()=>{i.read().then(function({value:a,done:o}){if(o){s.close();return}Xe(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{i.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new jY(r,this))}),e.on("DocException",r=>{t._capability.reject(wr(r))}),e.on("PasswordRequest",r=>{A(this,Qa,Promise.withResolvers());try{if(!t.onPassword)throw wr(r);const s=i=>{i instanceof Error?u(this,Qa).reject(i):u(this,Qa).resolve({password:i})};t.onPassword(s,r.code)}catch(s){u(this,Qa).reject(s)}return u(this,Qa).promise}),e.on("DataLoaded",r=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;u(this,Yi).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,s,i])=>{var a;if(this.destroyed||this.commonObjs.has(r))return null;switch(s){case"Font":if("error"in i){const f=i.error;Pe(`Error during font loading: ${f}`),this.commonObjs.resolve(r,f);break}const o=new D_(i),l=this._params.pdfBug&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,p)=>globalThis.FontInspector.fontAdded(f,p):null,c=new OK(o,l,i.extra,i.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=i;Xe(d,"The imageRef must be defined.");for(const f of u(this,Yi).values())for(const[,p]of f.objs)if((p==null?void 0:p.ref)===d)return p.dataLen?(this.commonObjs.resolve(r,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,i);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([r,s,i,a])=>{var l;if(this.destroyed)return;const o=u(this,Yi).get(s);if(!o.objs.has(r)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":o.objs.resolve(r,a);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",r=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[r.type];if(!s)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Pe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=u(this,Nf).get(t);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&u(this,Pf).set(i.refStr,e);const a=new RY(t,i,this,this._params.pdfBug);return u(this,Yi).set(t,a),a});return u(this,Nf).set(t,s),s}getPageIndex(e){return C_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return T(this,Mu,Jm).call(this,"GetFieldObjects")}hasJSActions(){return T(this,Mu,Jm).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return T(this,Mu,Jm).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return T(this,Mu,Jm).call(this,"GetOptionalContentConfig").then(t=>new dY(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,Ya).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(s=>{var i,a;return{info:s[0],metadata:s[1]?new cY(s[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return u(this,Ya).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Yi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,Ya).clear(),this.filterFactory.destroy(!0),Zg.cleanup()}}cachedPageNumber(e){if(!C_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,Pf).get(t)??null}}Ya=new WeakMap,Yi=new WeakMap,Nf=new WeakMap,Pf=new WeakMap,Qa=new WeakMap,Mu=new WeakSet,Jm=function(e,t=null){const r=u(this,Ya).get(e);if(r)return r;const s=this.messageHandler.sendWithPromise(e,t);return u(this,Ya).set(e,s),s};var xl;class IY{constructor(e){k(this,xl,null);J(this,"onContinue",null);J(this,"onError",null);A(this,xl,e)}get promise(){return u(this,xl).capability.promise}cancel(e=0){u(this,xl).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,xl).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,xl);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}xl=new WeakMap;var bl,Iu;const Rc=class Rc{constructor({callback:e,params:t,objs:r,commonObjs:s,annotationCanvasMap:i,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:f=!1,pageColors:p=null,enableHWA:m=!1,operationsFilter:y=null}){k(this,bl,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=s,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new IY(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(Rc,Iu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(Rc,Iu).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:s,background:i,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Sh(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var r,s,i;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),u(this,bl)&&(window.cancelAnimationFrame(u(this,bl)),A(this,bl,null)),u(Rc,Iu).delete(this._canvas),e||(e=new Ek(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(s=this.task).onError)==null||i.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,bl,window.requestAnimationFrame(()=>{A(this,bl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(Rc,Iu).delete(this._canvas),this.callback())))}};bl=new WeakMap,Iu=new WeakMap,k(Rc,Iu,new WeakSet);let V_=Rc;const DN="5.4.296",eB="f56dc8601";var Yr,Lu,jf,hn,ky,Rf,Ja,Ay,wl,di,Ey,Cy,U_,_y,H_,Ty,q_,Za,Ec,H1,tB,Qi,Fo;const Sr=class Sr{constructor({editor:e=null,uiManager:t=null}){k(this,Cy);k(this,_y);k(this,Ty);k(this,Za);k(this,H1);k(this,Qi);k(this,Yr,null);k(this,Lu,null);k(this,jf,void 0);k(this,hn,null);k(this,ky,!1);k(this,Rf,!1);k(this,Ja,null);k(this,Ay,void 0);k(this,wl,null);k(this,di,null);var r,s;e?(A(this,Rf,!1),A(this,Ja,e)):A(this,Rf,!0),A(this,di,(e==null?void 0:e._uiManager)||t),A(this,Ay,u(this,di)._eventBus),A(this,jf,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((s=u(this,di))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),u(Sr,Ey)||A(Sr,Ey,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Oe(this,"_keyboardManager",new Kv([[["Escape","mac+Escape"],Sr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Sr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Sr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Sr.prototype._moveToPrevious],[["Home","mac+Home"],Sr.prototype._moveToBeginning],[["End","mac+End"],Sr.prototype._moveToEnd]]))}renderButton(){const e=A(this,Yr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,Ja)&&(e.ariaControls=`${u(this,Ja).id}_colorpicker_dropdown`);const t=u(this,di)._signal;e.addEventListener("click",T(this,Za,Ec).bind(this),{signal:t}),e.addEventListener("keydown",T(this,Ty,q_).bind(this),{signal:t});const r=A(this,Lu,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=u(this,jf),e.append(r),e}renderMainDropdown(){const e=A(this,hn,T(this,Cy,U_).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Yr)){T(this,Za,Ec).call(this,e);return}const t=e.target.getAttribute("data-color");t&&T(this,_y,H_).call(this,t,e)}_moveToNext(e){var t,r;if(!u(this,Qi,Fo)){T(this,Za,Ec).call(this,e);return}if(e.target===u(this,Yr)){(t=u(this,hn).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=u(this,hn))==null?void 0:t.firstChild)||e.target===u(this,Yr)){u(this,Qi,Fo)&&this._hideDropdownFromKeyboard();return}u(this,Qi,Fo)||T(this,Za,Ec).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!u(this,Qi,Fo)){T(this,Za,Ec).call(this,e);return}(t=u(this,hn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Qi,Fo)){T(this,Za,Ec).call(this,e);return}(t=u(this,hn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,hn))==null||e.classList.add("hidden"),u(this,Yr).ariaExpanded="false",(t=u(this,wl))==null||t.abort(),A(this,wl,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,Rf)){if(!u(this,Qi,Fo)){(e=u(this,Ja))==null||e.unselect();return}this.hideDropdown(),u(this,Yr).focus({preventScroll:!0,focusVisible:u(this,ky)})}}updateColor(e){if(u(this,Lu)&&(u(this,Lu).style.backgroundColor=e),!u(this,hn))return;const t=u(this,di).highlightColors.values();for(const r of u(this,hn).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,Yr))==null||e.remove(),A(this,Yr,null),A(this,Lu,null),(t=u(this,hn))==null||t.remove(),A(this,hn,null)}};Yr=new WeakMap,Lu=new WeakMap,jf=new WeakMap,hn=new WeakMap,ky=new WeakMap,Rf=new WeakMap,Ja=new WeakMap,Ay=new WeakMap,wl=new WeakMap,di=new WeakMap,Ey=new WeakMap,Cy=new WeakSet,U_=function(){const e=document.createElement("div"),t=u(this,di)._signal;e.addEventListener("contextmenu",gs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,Ja)&&(e.id=`${u(this,Ja).id}_colorpicker_dropdown`);for(const[r,s]of u(this,di).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",s),i.title=r,i.setAttribute("data-l10n-id",u(Sr,Ey)[r]);const a=document.createElement("span");i.append(a),a.className="swatch",a.style.backgroundColor=s,i.ariaSelected=s===u(this,jf),i.addEventListener("click",T(this,_y,H_).bind(this,s),{signal:t}),e.append(i)}return e.addEventListener("keydown",T(this,Ty,q_).bind(this),{signal:t}),e},_y=new WeakSet,H_=function(e,t){t.stopPropagation(),u(this,Ay).dispatch("switchannotationeditorparams",{source:this,type:We.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},Ty=new WeakSet,q_=function(e){Sr._keyboardManager.exec(this,e)},Za=new WeakSet,Ec=function(e){if(u(this,Qi,Fo)){this.hideDropdown();return}if(A(this,ky,e.detail===0),u(this,wl)||(A(this,wl,new AbortController),window.addEventListener("pointerdown",T(this,H1,tB).bind(this),{signal:u(this,di).combinedSignal(u(this,wl))})),u(this,Yr).ariaExpanded="true",u(this,hn)){u(this,hn).classList.remove("hidden");return}const t=A(this,hn,T(this,Cy,U_).call(this));u(this,Yr).append(t)},H1=new WeakSet,tB=function(e){var t;(t=u(this,hn))!=null&&t.contains(e.target)||this.hideDropdown()},Qi=new WeakSet,Fo=function(){return u(this,hn)&&!u(this,hn).classList.contains("hidden")},k(Sr,Ey,null);let e0=Sr;var Ji,Ny,Mf,Py;const Mc=class Mc{constructor(e){k(this,Ji,null);k(this,Ny,null);k(this,Mf,null);A(this,Ny,e),A(this,Mf,e._uiManager),u(Mc,Py)||A(Mc,Py,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Ji))return u(this,Ji);const{editorType:e,colorType:t,colorValue:r}=u(this,Ny),s=A(this,Ji,document.createElement("input"));return s.type="color",s.value=r||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",u(Mc,Py)[e]),s.addEventListener("input",()=>{u(this,Mf).updateParams(t,s.value)},{signal:u(this,Mf)._signal}),s}update(e){u(this,Ji)&&(u(this,Ji).value=e)}destroy(){var e;(e=u(this,Ji))==null||e.remove(),A(this,Ji,null)}hideDropdown(){}};Ji=new WeakMap,Ny=new WeakMap,Mf=new WeakMap,Py=new WeakMap,k(Mc,Py,null);let $w=Mc;function xI(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function _m(n){return Math.max(0,Math.min(255,255*n))}class bI{static CMYK_G([e,t,r,s]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=_m(e),[e,e,e]}static G_HTML([e]){const t=xI(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(_m)}static RGB_HTML(e){return`#${e.map(xI).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,r+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,r,s]){return[_m(1-Math.min(1,e+s)),_m(1-Math.min(1,r+s)),_m(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const s=1-e,i=1-t,a=1-r,o=Math.min(s,i,a);return["CMYK",s,i,a,o]}}class LY{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),r||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){mt("Abstract method `_createSVG` called.")}}class t0 extends LY{_createSVG(e){return document.createElementNS(Sa,e)}}const DY=9,Sd=new WeakSet,OY=new Date().getTimezoneOffset()*60*1e3;class wI{static create(e){switch(e.data.annotationType){case Yt.LINK:return new ON(e);case Yt.TEXT:return new BY(e);case Yt.WIDGET:switch(e.data.fieldType){case"Tx":return new zY(e);case"Btn":return e.data.radioButton?new sB(e):e.data.checkBox?new VY(e):new UY(e);case"Ch":return new HY(e);case"Sig":return new $Y(e)}return new Rd(e);case Yt.POPUP:return new W_(e);case Yt.FREETEXT:return new cB(e);case Yt.LINE:return new GY(e);case Yt.SQUARE:return new WY(e);case Yt.CIRCLE:return new XY(e);case Yt.POLYLINE:return new uB(e);case Yt.CARET:return new YY(e);case Yt.INK:return new FN(e);case Yt.POLYGON:return new KY(e);case Yt.HIGHLIGHT:return new dB(e);case Yt.UNDERLINE:return new QY(e);case Yt.SQUIGGLY:return new JY(e);case Yt.STRIKEOUT:return new ZY(e);case Yt.STAMP:return new hB(e);case Yt.FILEATTACHMENT:return new eQ(e);default:return new Vt(e)}}}var Du,If,Is,jy,G_;const cP=class cP{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:s=!1}={}){k(this,jy);k(this,Du,null);k(this,If,!1);k(this,Is,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return cP._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var o;const e=(o=this.annotationStorage)==null?void 0:o.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:s}=this.data;let i=-1/0,a=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>a?(a=t[l+1],i=t[l+2]):t[l+1]===a&&(i=Math.max(i,t[l+2]));return[i,a]}if((r==null?void 0:r.length)>=1){for(const l of r)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>a?(a=l[c+1],i=l[c]):l[c+1]===a&&(i=Math.max(i,l[c]));if(i!==1/0)return[i,a]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:s,pageX:i,pageY:a}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/r,e[1]=100*(e[1]-a)/s,e}get commentText(){var t,r,s;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${Xg}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${Xg}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,Is))==null?void 0:e.popup)||this.popup)==null||t.remove(),A(this,Is,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(u(this,Du)||A(this,Du,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&T(this,jy,G_).call(this,t);let s=((i=u(this,Is))==null?void 0:i.popup)||this.popup;!s&&(r!=null&&r.text)&&(this._createPopup(r),s=u(this,Is).popup),s&&(s.updateEdited(e),r!=null&&r.deleted&&(s.remove(),A(this,Is,null),this.popup=null))}resetEdited(){var e;u(this,Du)&&(T(this,jy,G_).call(this,u(this,Du).rect),(e=u(this,Is))==null||e.popup.resetEdited(),A(this,Du,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:s}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof Rd)&&!(this instanceof ON)&&(i.tabIndex=0);const{style:a}=i;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof W_){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:o,height:l}=this;if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(g>0||w>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;a.borderRadius=x}else if(this instanceof sB){const x=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=x}switch(t.borderStyle.style){case zd.SOLID:a.borderStyle="solid";break;case zd.DASHED:a.borderStyle="dashed";break;case zd.BEVELED:Pe("Unimplemented border style: beveled");break;case zd.INSET:Pe("Unimplemented border style: inset");break;case zd.UNDERLINE:a.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(A(this,If,!0),a.borderColor=ce.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):a.borderWidth=0}const c=ce.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:f,pageX:p,pageY:m}=s.rawDims;a.left=`${100*(c[0]-p)/d}%`,a.top=`${100*(c[1]-m)/f}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*o/d}%`,a.height=`${100*l/f}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:s}=this.parent.viewport.rawDims;let{width:i,height:a}=this;e%180!==0&&([i,a]=[a,i]),t.style.width=`${100*i/r}%`,t.style.height=`${100*a/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,s)=>{const i=s.detail[t],a=i[0],o=i.slice(1);s.target.style[r]=bI[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[r]:bI[`${a}_rgb`](o)})};return Oe(this,"_commonActions",{display:t=>{const{display:r}=t.detail,s=r%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const s of Object.keys(t.detail)){const i=e[s]||r[s];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[s,i]of Object.entries(t)){const a=r[s];if(a){const o={detail:{[s]:i},target:e};a(o),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,s,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,w,v,x]=e.subarray(2,6);if(s===g&&i===w&&t===v&&r===x)return}const{style:a}=this.container;let o;if(u(this,If)){const{borderColor:g,borderWidth:w}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const l=s-t,c=i-r,{svgFactory:d}=this,f=d.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0),f.role="none";const p=d.createElement("defs");f.append(p);const m=d.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),p.append(m);for(let g=2,w=e.length;g<w;g+=8){const v=e[g],x=e[g+1],b=e[g+2],C=e[g+3],_=d.createElement("rect"),E=(b-t)/l,N=(i-x)/c,j=(v-b)/l,M=(x-C)/c;_.setAttribute("x",E),_.setAttribute("y",N),_.setAttribute("width",j),_.setAttribute("height",M),m.append(_),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${N}" width="${j}" height="${M}"/>`)}u(this,If)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(f),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let r,s;e?(r={str:e.text},s=e.date):(r=t.contentsObj,s=t.modificationDate);const i=A(this,Is,new W_({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(u(this,Is)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,Is)}render(){mt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:i,id:a,exportValues:o}of s){if(i===-1||a===t)continue;const l=typeof o=="string"?o:null,c=document.querySelector(`[data-element-id="${a}"]`);if(c&&!Sd.has(c)){Pe(`_getElementsByName - element not allowed: ${a}`);continue}r.push({id:a,exportValue:l,domElement:c})}return r}for(const s of document.getElementsByName(e)){const{exportValue:i}=s,a=s.getAttribute("data-element-id");a!==t&&Sd.has(s)&&r.push({id:a,exportValue:i,domElement:s})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Du=new WeakMap,If=new WeakMap,Is=new WeakMap,jy=new WeakSet,G_=function(e){const{container:{style:t},data:{rect:r,rotation:s},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-o)/i}%`,t.top=`${100*(a-e[3]+l)/a}%`,s===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(s)};let Vt=cP;class FY extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var eo,Cc,q1,nB,G1,rB;class ON extends Vt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});k(this,eo);k(this,q1);k(this,G1);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let i=!1;return t.url?(r.addLinkAttributes(s,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),i=!0):t.attachment?(T(this,q1,nB).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(T(this,G1,rB).call(this,s,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),i=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}_bindLink(t,r,s=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&T(this,eo,Cc).call(this),s&&(t.title=s)}_bindNamedAction(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),s&&(t.title=s),T(this,eo,Cc).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(r.actions)){const a=s.get(i);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:i}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),T(this,eo,Cc).call(this)}_bindResetFormAction(t,r){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),T(this,eo,Cc).call(this),!this._fieldObjects){Pe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var f;s==null||s();const{fields:i,refs:a,include:o}=r,l=[];if(i.length!==0||a.length!==0){const p=new Set(a);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)p.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)p.has(y.id)===o&&l.push(y)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const c=this.annotationStorage,d=[];for(const p of l){const{id:m}=p;switch(d.push(m),p.type){case"text":{const g=p.defaultValue||"";c.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=p.defaultValue===p.exportValues;c.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=p.defaultValue||"";c.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!Sd.has(y)){Pe(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}eo=new WeakSet,Cc=function(){this.container.setAttribute("data-internal-link","")},q1=new WeakSet,nB=function(t,r,s="",i=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:s&&(t.title=s),t.onclick=()=>{var a;return(a=this.downloadManager)==null||a.openOrDownloadData(r.content,r.filename,i),!1},T(this,eo,Cc).call(this)},G1=new WeakSet,rB=function(t,r,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),s&&(t.title=s),T(this,eo,Cc).call(this)};class BY extends Vt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Rd extends Vt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Cn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,s,i){r.includes("mouse")?e.addEventListener(r,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(r,a=>{var o;if(r==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}i&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:i(a)}}))})}_setEventListeners(e,t,r,s){var i,a,o;for(const[l,c]of r)(c==="Action"||(i=this.data.actions)!=null&&i[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,s),c==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ce.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||DY,i=e.style;let a;const o=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(c/(rE*s))||1,f=c/d;a=Math.min(s,l(f/rE))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(c/rE))}i.fontSize=`calc(${a}px * var(--total-scale-factor))`,i.color=ce.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class zY extends Rd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,s){const i=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=r),i.setValue(a.id,{[s]:r})}render(){var s,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let c=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??o,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??o),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),Sd.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,y=!!p&&this.enableScripting;f&&(r.title=f),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(r,"value",w.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";r.value=d.userValue=v,d.formattedValue=null});let g=w=>{const{formattedValue:v}=d;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var b;if(d.focused)return;const{target:x}=v;if(y&&(x.type=p,m&&(x.step=m)),d.userValue){const C=d.userValue;if(y)if(p==="time"){const _=new Date(C),E=[_.getHours(),_.getMinutes(),_.getSeconds()];x.value=E.map(N=>N.toString().padStart(2,"0")).join(":")}else x.value=new Date(C-OY).toISOString().split(p==="date"?"T":".",1)[0];else x.value=C}d.lastCommittedValue=x.value,d.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(b){d.userValue=b.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),b.target.value=d.userValue},formattedValue(b){const{formattedValue:C}=b.detail;d.formattedValue=C,C!=null&&b.target!==document.activeElement&&(b.target.value=C);const _={formattedValue:C};y&&(_.value=C),e.setValue(t,_)},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var N;const{charLimit:C}=b.detail,{target:_}=b;if(C===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",C);let E=d.userValue;!E||E.length<=C||(E=E.slice(0,C),_.value=d.userValue=E,e.setValue(t,{value:E}),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),r.addEventListener("keydown",v=>{var C;d.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:b}=v.target;d.lastCommittedValue!==b&&(d.lastCommittedValue=b,d.userValue=b,(C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=g;g=null,r.addEventListener("blur",v=>{var C,_;if(!d.focused||!v.relatedTarget)return;(C=this.data.actions)!=null&&C.Blur||(d.focused=!1);const{target:x}=v;let{value:b}=x;if(y){if(b&&p==="time"){const E=b.split(":").map(N=>parseInt(N,10));b=new Date(2e3,0,1,E[0],E[1],E[2]||0).valueOf(),x.step=""}else b.includes("T")||(b=`${b}T00:00`),b=new Date(b).valueOf();x.type="text"}d.userValue=b,d.lastCommittedValue!==b&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),w(v)}),(i=this.data.actions)!=null&&i.Keystroke&&r.addEventListener("beforeinput",v=>{var M;d.lastCommittedValue=null;const{data:x,target:b}=v,{value:C,selectionStart:_,selectionEnd:E}=b;let N=_,j=E;switch(v.inputType){case"deleteWordBackward":{const O=C.substring(0,_).match(/\w*[^\w]*$/);O&&(N-=O[0].length);break}case"deleteWordForward":{const O=C.substring(_).match(/^[^\w]*\w*/);O&&(j+=O[0].length);break}case"deleteContentBackward":_===E&&(N-=1);break;case"deleteContentForward":_===E&&(j+=1);break}v.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:x||"",willCommit:!1,selStart:N,selEnd:j}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&r.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class $Y extends Rd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class VY extends Rd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(r,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return Sd.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r)){const d=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class sB extends Rd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let s=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(r,{value:s})),s)for(const a of this._getElementsByName(t.fieldName,r))e.setValue(a.id,{value:!1});const i=document.createElement("input");if(Sd.add(i),i.setAttribute("data-element-id",r),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,s&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const c of this._getElementsByName(o,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),i.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",o=>{const l={value:c=>{const d=a===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const p=d&&f.id===r;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class UY extends ON{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class HY extends Rd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Sd.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue;for(const p of s.options)p.selected=p.value===f});for(const d of this.data.options){const f=document.createElement("option");f.textContent=d.displayValue,f.value=d.exportValue,r.value.includes(d.exportValue)&&(f.setAttribute("selected",!0),i=!1),s.append(f)}let a=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),a=()=>{d.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=d=>{const f=d?"value":"textContent",{options:p,multiple:m}=s;return m?Array.prototype.filter.call(p,y=>y.selected).map(y=>y[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let l=o(!1);const c=d=>{const f=d.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const f={value(p){a==null||a();const m=p.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of s.options)g.selected=y.has(g.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(p){s.multiple=!0},remove(p){const m=s.options,y=p.detail.remove;m[y].selected=!1,s.remove(y),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:o(!0),items:c(p)}),l=o(!1)},clear(p){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(p){const{index:m,displayValue:y,exportValue:g}=p.detail.insert,w=s.children[m],v=document.createElement("option");v.textContent=y,v.value=g,w?w.before(v):s.append(v),e.setValue(t,{value:o(!0),items:c(p)}),l=o(!1)},items(p){const{items:m}=p.detail;for(;s.length!==0;)s.remove(0);for(const y of m){const{displayValue:g,exportValue:w}=y,v=document.createElement("option");v.textContent=g,v.value=w,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(p)}),l=o(!1)},indices(p){const m=new Set(p.detail.indices);for(const y of p.target.options)y.selected=m.has(y.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,d)}),s.addEventListener("input",d=>{var m;const f=o(!0),p=o(!1);e.setValue(t,{value:f}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Ry,X_;class W_ extends Vt{constructor(t){const{data:r,elements:s,parent:i}=t,a=!!i._commentManager;super(t,{isRenderable:!a&&Vt._hasPopupData(r)});k(this,Ry);if(this.elements=s,a&&Vt._hasPopupData(r)){const o=this.popup=T(this,Ry,X_).call(this);for(const l of s)l.popup=o}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=T(this,Ry,X_).call(this),s=[];for(const i of this.elements)i.popup=r,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${TN}${i}`).join(",")),this.container}}Ry=new WeakSet,X_=function(){return new qY({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Qr,Sl,W1,X1,Lf,Df,Gt,Zi,kl,Ou,Of,Ff,ea,Jr,to,no,vn,ro,Al,My,so,Bf,Fu,El,Wn,Cl,zf,Mb,Iy,K_,Ly,Y_,Dy,Q_,$f,Ib,Oy,J_,K1,iB,Y1,aB,Q1,oB,J1,lB,Vf,Lb,Uf,Db,Fy,Z_;class qY{constructor({container:e,color:t,elements:r,titleObj:s,modificationDate:i,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:f,commentManager:p=null}){k(this,zf);k(this,Iy);k(this,Ly);k(this,Dy);k(this,$f);k(this,Oy);k(this,K1);k(this,Y1);k(this,Q1);k(this,J1);k(this,Vf);k(this,Uf);k(this,Fy);k(this,Qr,null);k(this,Sl,T(this,Q1,oB).bind(this));k(this,W1,T(this,Fy,Z_).bind(this));k(this,X1,T(this,Uf,Db).bind(this));k(this,Lf,T(this,Vf,Lb).bind(this));k(this,Df,null);k(this,Gt,null);k(this,Zi,null);k(this,kl,null);k(this,Ou,null);k(this,Of,null);k(this,Ff,null);k(this,ea,!1);k(this,Jr,null);k(this,to,null);k(this,no,null);k(this,vn,null);k(this,ro,null);k(this,Al,null);k(this,My,null);k(this,so,null);k(this,Bf,null);k(this,Fu,null);k(this,El,!1);k(this,Wn,null);k(this,Cl,null);A(this,Gt,e),A(this,Bf,s),A(this,Zi,a),A(this,so,o),A(this,Of,l),A(this,Df,t),A(this,My,c),A(this,Ff,d),A(this,Ou,r),A(this,Qr,p),A(this,Wn,r[0]),A(this,kl,Qg.toDateObject(i)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup()),p?this.renderCommentButton():(T(this,zf,Mb).call(this),u(this,Gt).hidden=!0,f&&T(this,Vf,Lb).call(this))}renderCommentButton(){if(u(this,vn)||(u(this,ro)||T(this,Iy,K_).call(this),!u(this,ro)))return;const{signal:e}=A(this,to,new AbortController),t=!!u(this,Wn).extraPopupElement,r=()=>{u(this,Qr).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{u(this,Qr).toggleCommentPopup(this,!1,!0,!t)},i=()=>{u(this,Qr).toggleCommentPopup(this,!1,!1)};if(t){A(this,vn,u(this,Wn).container);for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",u(this,Sl),{signal:e}),a.addEventListener("click",r,{signal:e}),a.addEventListener("pointerenter",s,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=A(this,vn,document.createElement("button"));a.className="annotationCommentButton";const o=u(this,Wn).container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),T(this,Dy,Q_).call(this),T(this,Ly,Y_).call(this),a.addEventListener("keydown",u(this,Sl),{signal:e}),a.addEventListener("click",r,{signal:e}),a.addEventListener("pointerenter",s,{signal:e}),a.addEventListener("pointerleave",i,{signal:e}),o.after(a)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,Wn).commentData;return e?u(this,Of)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,vn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}=u(this,Wn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:s,modificationDate:i}}get elementBeforePopup(){return u(this,vn)}get comment(){return u(this,Cl)||A(this,Cl,u(this,Wn).commentText),u(this,Cl)}set comment(e){e!==this.comment&&(u(this,Wn).commentText=A(this,Cl,e))}get parentBoundingClientRect(){return u(this,Wn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,vn)&&(u(this,vn).classList.toggle("selected",e),u(this,vn).ariaExpanded=t)}setSelectedCommentButton(e){u(this,vn).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,Al))return u(this,Al);const{x:e,y:t,height:r}=u(this,vn).getBoundingClientRect(),{x:s,y:i,width:a,height:o}=u(this,Wn).layer.getBoundingClientRect();return[(e-s)/a,(t+r-i)/o]}set commentPopupPosition(e){A(this,Al,e)}hasDefaultPopupPosition(){return u(this,Al)===null}get commentButtonPosition(){return u(this,ro)}get commentButtonWidth(){return u(this,vn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=u(this,Al)||this.commentButtonPosition.map(c=>c/100),s=this.parentBoundingClientRect,{x:i,y:a,width:o,height:l}=s;u(this,Qr).showDialog(null,this,i+t*o,a+r*l,{...e,parentDimensions:s})}render(){var r,s;if(u(this,Jr))return;const e=A(this,Jr,document.createElement("div"));if(e.className="popup",u(this,Df)){const i=e.style.outlineColor=ce.makeHexColor(...u(this,Df));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=u(this,Bf))!=null&&r.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=u(this,Bf)}if(e.append(t),u(this,kl)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,kl).valueOf()})),i.dateTime=u(this,kl).toISOString(),t.append(i)}PN({html:u(this,$f,Ib)||u(this,Zi).str,dir:(s=u(this,Zi))==null?void 0:s.dir,className:"popupContent"},e),u(this,Gt).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var s;if(u(this,Qr)){r?(this.remove(),A(this,Cl,null)):t&&(t.deleted?this.remove():(T(this,Dy,Q_).call(this),A(this,Cl,t.text))),e&&(A(this,ro,null),T(this,Iy,K_).call(this),T(this,Ly,Y_).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}T(this,zf,Mb).call(this),u(this,Fu)||A(this,Fu,{contentsObj:u(this,Zi),richText:u(this,so)}),e&&A(this,no,null),t&&t.text&&(A(this,so,T(this,Y1,aB).call(this,t.text)),A(this,kl,Qg.toDateObject(t.date)),A(this,Zi,null)),(s=u(this,Jr))==null||s.remove(),A(this,Jr,null)}resetEdited(){var e;u(this,Fu)&&({contentsObj:ln(this,Zi)._,richText:ln(this,so)._}=u(this,Fu),A(this,Fu,null),(e=u(this,Jr))==null||e.remove(),A(this,Jr,null),A(this,no,null))}remove(){var e,t,r;if((e=u(this,to))==null||e.abort(),A(this,to,null),(t=u(this,Jr))==null||t.remove(),A(this,Jr,null),A(this,El,!1),A(this,ea,!1),(r=u(this,vn))==null||r.remove(),A(this,vn,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){A(this,El,this.isVisible),u(this,El)&&(u(this,Gt).hidden=!0)}maybeShow(){u(this,Qr)||(T(this,zf,Mb).call(this),u(this,El)&&(u(this,Jr)||T(this,Uf,Db).call(this),A(this,El,!1),u(this,Gt).hidden=!1))}get isVisible(){return u(this,Qr)?!1:u(this,Gt).hidden===!1}}Qr=new WeakMap,Sl=new WeakMap,W1=new WeakMap,X1=new WeakMap,Lf=new WeakMap,Df=new WeakMap,Gt=new WeakMap,Zi=new WeakMap,kl=new WeakMap,Ou=new WeakMap,Of=new WeakMap,Ff=new WeakMap,ea=new WeakMap,Jr=new WeakMap,to=new WeakMap,no=new WeakMap,vn=new WeakMap,ro=new WeakMap,Al=new WeakMap,My=new WeakMap,so=new WeakMap,Bf=new WeakMap,Fu=new WeakMap,El=new WeakMap,Wn=new WeakMap,Cl=new WeakMap,zf=new WeakSet,Mb=function(){var t;if(u(this,to))return;A(this,to,new AbortController);const{signal:e}=u(this,to);for(const r of this.trigger)r.addEventListener("click",u(this,Lf),{signal:e}),r.addEventListener("pointerenter",u(this,X1),{signal:e}),r.addEventListener("pointerleave",u(this,W1),{signal:e}),r.classList.add("popupTriggerArea");for(const r of u(this,Ou))(t=r.container)==null||t.addEventListener("keydown",u(this,Sl),{signal:e})},Iy=new WeakSet,K_=function(){const e=u(this,Ou).find(t=>t.hasCommentButton);e&&A(this,ro,e._normalizePoint(e.commentButtonPosition))},Ly=new WeakSet,Y_=function(){if(u(this,Wn).extraPopupElement&&!u(this,Wn).editor)return;this.renderCommentButton();const[e,t]=u(this,ro),{style:r}=u(this,vn);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},Dy=new WeakSet,Q_=function(){u(this,Wn).extraPopupElement||(this.renderCommentButton(),u(this,vn).style.backgroundColor=this.commentButtonColor||"")},$f=new WeakSet,Ib=function(){const e=u(this,so),t=u(this,Zi);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,so).html||null},Oy=new WeakSet,J_=function(){var e,t,r;return((r=(t=(e=u(this,$f,Ib))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},K1=new WeakSet,iB=function(){var e,t,r;return((r=(t=(e=u(this,$f,Ib))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},Y1=new WeakSet,aB=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:u(this,K1,iB),fontSize:u(this,Oy,J_)?`calc(${u(this,Oy,J_)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:s});return r},Q1=new WeakSet,oB=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,ea))&&T(this,Vf,Lb).call(this)},J1=new WeakSet,lB=function(){if(u(this,no)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:s,pageY:i}}}=u(this,Of);let a=!!u(this,Ff),o=a?u(this,Ff):u(this,My);for(const y of u(this,Ou))if(!o||ce.intersect(y.data.rect,o)!==null){o=y.data.rect,a=!0;break}const l=ce.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=5,d=a?o[2]-o[0]+c:0,f=l[0]+d,p=l[1];A(this,no,[100*(f-s)/t,100*(p-i)/r]);const{style:m}=u(this,Gt);m.left=`${u(this,no)[0]}%`,m.top=`${u(this,no)[1]}%`},Vf=new WeakSet,Lb=function(){if(u(this,Qr)){u(this,Qr).toggleCommentPopup(this,!1);return}A(this,ea,!u(this,ea)),u(this,ea)?(T(this,Uf,Db).call(this),u(this,Gt).addEventListener("click",u(this,Lf)),u(this,Gt).addEventListener("keydown",u(this,Sl))):(T(this,Fy,Z_).call(this),u(this,Gt).removeEventListener("click",u(this,Lf)),u(this,Gt).removeEventListener("keydown",u(this,Sl)))},Uf=new WeakSet,Db=function(){u(this,Jr)||this.render(),this.isVisible?u(this,ea)&&u(this,Gt).classList.add("focused"):(T(this,J1,lB).call(this),u(this,Gt).hidden=!1,u(this,Gt).style.zIndex=parseInt(u(this,Gt).style.zIndex)+1e3)},Fy=new WeakSet,Z_=function(){u(this,Gt).classList.remove("focused"),!(u(this,ea)||!this.isVisible)&&(u(this,Gt).hidden=!0,u(this,Gt).style.zIndex=parseInt(u(this,Gt).style.zIndex)-1e3)};class cB extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Ne.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var By;class GY extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,By,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=A(this,By,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,By)}addHighlightArea(){this.container.classList.add("highlightArea")}}By=new WeakMap;var zy;class WY extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,zy,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=A(this,zy,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",r-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,zy)}addHighlightArea(){this.container.classList.add("highlightArea")}}zy=new WeakMap;var $y;class XY extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,$y,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:s}=this,i=this.svgFactory.create(r,s,!0),a=t.borderStyle.width,o=A(this,$y,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",r/2),o.setAttribute("cy",s/2),o.setAttribute("rx",r/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,$y)}addHighlightArea(){this.container.classList.add("highlightArea")}}$y=new WeakMap;var Vy;class uB extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Vy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:s,popupRef:i},width:a,height:o}=this;if(!r)return this.container;const l=this.svgFactory.create(a,o,!0);let c=[];for(let f=0,p=r.length;f<p;f+=2){const m=r[f]-t[0],y=t[3]-r[f+1];c.push(`${m},${y}`)}c=c.join(" ");const d=A(this,Vy,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,Vy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Vy=new WeakMap;class KY extends uB{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class YY extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Uy,Bu,Hy,eT;class FN extends Vt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});k(this,Hy);k(this,Uy,null);k(this,Bu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ne.HIGHLIGHT:Ne.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:s,borderStyle:i,popupRef:a}}=this,{transform:o,width:l,height:c}=T(this,Hy,eT).call(this,r,t),d=this.svgFactory.create(l,c,!0),f=A(this,Uy,this.svgFactory.createElement("svg:g"));d.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",o);for(let p=0,m=s.length;p<m;p++){const y=this.svgFactory.createElement(this.svgElementName);u(this,Bu).push(y),y.setAttribute("points",s[p].join(",")),f.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:s,rect:i}=t,a=u(this,Uy);if(r>=0&&a.setAttribute("stroke-width",r||1),s)for(let o=0,l=u(this,Bu).length;o<l;o++)u(this,Bu)[o].setAttribute("points",s[o].join(","));if(i){const{transform:o,width:l,height:c}=T(this,Hy,eT).call(this,this.data.rotation,i);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return u(this,Bu)}addHighlightArea(){this.container.classList.add("highlightArea")}}Uy=new WeakMap,Bu=new WeakMap,Hy=new WeakSet,eT=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class dB extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ne.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class QY extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class JY extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class ZY extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class hB extends Vt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ne.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var qy,Gy,tT;class eQ extends Vt{constructor(t){var s;super(t,{isRenderable:!0});k(this,Gy);k(this,qy,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let s;r.hasAppearance||r.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),s.addEventListener("dblclick",T(this,Gy,tT).bind(this)),A(this,qy,s);const{isMac:i}=Cn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(i?a.metaKey:a.ctrlKey)&&T(this,Gy,tT).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return u(this,qy)}addHighlightArea(){this.container.classList.add("highlightArea")}}qy=new WeakMap,Gy=new WeakSet,tT=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Hf,zu,qf,_l,Wy,$u,Xy,nT,Ky,rT,Yy;let BN=(Yy=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:s,page:i,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:d}){k(this,Xy);k(this,Ky);k(this,Hf,null);k(this,zu,null);k(this,qf,null);k(this,_l,new Map);k(this,Wy,null);k(this,$u,null);this.div=e,A(this,Hf,t),A(this,zu,r),A(this,Wy,o||null),A(this,$u,c||null),A(this,qf,d||new jN),this.page=i,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=l||null}hasEditableAnnotations(){return u(this,_l).size>0}async render(e){var a,o,l;const{annotations:t}=e,r=this.div;ac(r,this.viewport);const s=new Map,i={data:null,layer:r,linkService:u(this,$u),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new t0,annotationStorage:u(this,qf),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===Yt.POPUP;if(d){const m=s.get(c.id);if(!m)continue;i.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;i.data=c;const f=wI.create(i);if(!f.isRenderable)continue;if(!d&&c.popupRef){const m=s.get(c.popupRef);m?m.push(f):s.set(c.popupRef,[f])}const p=f.render();c.hidden&&(p.style.visibility="hidden"),await T(this,Xy,nT).call(this,p,c.id,i.elements),(o=(a=f.extraPopupElement)==null?void 0:a.popup)==null||o.renderCommentButton(),f._isEditable&&(u(this,_l).set(f.data.id,f),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(f))}T(this,Ky,rT).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,$u),svgFactory:new t0,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=Yy._defaultBorderStyle),t.data=r;const s=wI.create(t);if(!s.isRenderable)continue;const i=s.render();await T(this,Xy,nT).call(this,i,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,ac(t,{rotation:e.rotation}),T(this,Ky,rT).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,_l).values())}getEditableAnnotation(e){return u(this,_l).get(e)}addFakeAnnotation(e){var o;const{div:t}=this,{id:r,rotation:s}=e,i=new FY({data:{id:r,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,$u),annotationStorage:u(this,qf)}),a=i.render();return t.append(a),(o=u(this,Hf))==null||o.moveElementInDOM(t,a,a,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return Oe(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:zd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Hf=new WeakMap,zu=new WeakMap,qf=new WeakMap,_l=new WeakMap,Wy=new WeakMap,$u=new WeakMap,Xy=new WeakSet,nT=async function(e,t,r){var o,l;const s=e.firstChild||e,i=s.id=`${TN}${t}`,a=await((o=u(this,Wy))==null?void 0:o.getAriaAttributes(i));if(a)for(const[c,d]of a)s.setAttribute(c,d);r?r.at(-1).container.after(e):(this.div.append(e),(l=u(this,Hf))==null||l.moveElementInDOM(this.div,e,s,!1))},Ky=new WeakSet,rT=function(){var t;if(!u(this,zu))return;const e=this.div;for(const[r,s]of u(this,zu)){const i=e.querySelector(`[data-annotation-id="${r}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:a}=i;a?a.nodeName==="CANVAS"?a.replaceWith(s):a.classList.contains("annotationContent")?a.after(s):a.before(s):i.append(s);const o=u(this,_l).get(r);o&&(o._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,i.id,s),o._hasNoCanvas=!1):o.canvas=s)}u(this,zu).clear()},Yy);const Kx=/\r\n?|\n/g;var Zr,Qy,Vu,es,Z1,fB,eS,pB,tS,mB,Gf,Ob,Wf,Fb,Xf,Bb,nS,gB,Jy,iT,rS,yB;const vt=class vt extends kt{constructor(t){super({...t,name:"freeTextEditor"});k(this,Z1);k(this,eS);k(this,tS);k(this,Gf);k(this,Xf);k(this,nS);k(this,rS);k(this,Zr,"");k(this,Qy,`${this.id}-editor`);k(this,Vu,null);k(this,es,void 0);J(this,"_colorPicker",null);this.color=t.color||vt._defaultColor||kt._defaultLineColor,A(this,es,t.fontSize||vt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=vt.prototype,r=a=>a.isEmpty(),s=oc.TRANSLATE_SMALL,i=oc.TRANSLATE_BIG;return Oe(this,"_keyboardManager",new Kv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}]]))}static initialize(t,r){kt.initialize(t,r);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case We.FREETEXT_SIZE:vt._defaultFontSize=r;break;case We.FREETEXT_COLOR:vt._defaultColor=r;break}}updateParams(t,r){switch(t){case We.FREETEXT_SIZE:T(this,Z1,fB).call(this,r);break;case We.FREETEXT_COLOR:T(this,eS,pB).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[We.FREETEXT_SIZE,vt._defaultFontSize],[We.FREETEXT_COLOR,vt._defaultColor||kt._defaultLineColor]]}get propertiesToUpdate(){return[[We.FREETEXT_SIZE,u(this,es)],[We.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new $w(this)),[["colorPicker",this._colorPicker]]}get colorType(){return We.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-vt._internalPadding*t,-(vt._internalPadding+u(this,es))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,Vu,new AbortController);const t=this._uiManager.combinedSignal(u(this,Vu));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,Qy)),this._isDraggable=!0,(t=u(this,Vu))==null||t.abort(),A(this,Vu,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Zr),r=A(this,Zr,T(this,tS,mB).call(this).trimEnd());if(t===r)return;const s=i=>{if(A(this,Zr,i),!i){this.remove();return}T(this,Xf,Bb).call(this),this._uiManager.rebuild(this),T(this,Gf,Ob).call(this)};this.addCommands({cmd:()=>{s(r)},undo:()=>{s(t)},mustExec:!1}),T(this,Gf,Ob).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){vt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,Qy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${u(this,es)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,f]=this.pageDimensions,[p,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(o[0]-p)/d,g=r+this.height-(o[1]-m)/f;break;case 90:y=t+(o[0]-p)/d,g=r-(o[1]-m)/f,[l,c]=[c,-l];break;case 180:y=t-this.width+(o[0]-p)/d,g=r-(o[1]-m)/f,[l,c]=[-l,-c];break;case 270:y=t+(o[0]-p-this.height*f)/d,g=r+(o[1]-m-this.width*d)/f,[l,c]=[-c,l];break}this.setAt(y*i,g*a,l,c)}else this._moveAfterPaste(t,r);T(this,Xf,Bb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,w;const r=t.clipboardData||window.clipboardData,{types:s}=r;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const i=T(y=vt,Jy,iT).call(y,r.getData("text")||"").replaceAll(Kx,`
`);if(!i)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:c}=o,d=[],f=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(f.push(l.nodeValue.slice(c).replaceAll(Kx,"")),v!==this.editorDiv){let x=d;for(const b of this.editorDiv.childNodes){if(b===v){x=f;continue}x.push(T(g=vt,Wf,Fb).call(g,b))}}d.push(l.nodeValue.slice(0,c).replaceAll(Kx,""))}else if(l===this.editorDiv){let v=d,x=0;for(const b of this.editorDiv.childNodes)x++===c&&(v=f),v.push(T(w=vt,Wf,Fb).call(w,b))}A(this,Zr,`${d.join(`
`)}${i}${f.join(`
`)}`),T(this,Xf,Bb).call(this);const p=new Range;let m=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(m<=x){p.setStart(v,m),p.setEnd(v,m);break}m-=x}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=vt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,s){var o;let i=null;if(t instanceof cB){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:f,id:p,popupRef:m,richText:y,contentsObj:g,creationDate:w,modificationDate:v},textContent:x,textPosition:b,parent:{page:{pageNumber:C}}}=t;if(!x||x.length===0)return null;i=t={annotationType:Ne.FREETEXT,color:Array.from(c),fontSize:l,value:x.join(`
`),position:b,pageIndex:C-1,rect:d.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:(g==null?void 0:g.str)||null,richText:y,creationDate:w,modificationDate:v}}const a=await super.deserialize(t,r,s);return A(a,es,t.fontSize),a.color=ce.makeHexColor(...t.color),A(a,Zr,T(o=vt,Jy,iT).call(o,t.value)),a._initialData=i,t.comment&&a.setCommentData(t),a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=kt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:r,fontSize:u(this,es),value:T(this,nS,gB).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!T(this,rS,yB).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:s}=r;s.fontSize=`calc(${u(this,es)}px * var(--total-scale-factor))`,s.color=this.color,r.replaceChildren();for(const i of u(this,Zr).split(`
`)){const a=document.createElement("div");a.append(i?document.createTextNode(i):document.createElement("br")),r.append(a)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Zr)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Zr=new WeakMap,Qy=new WeakMap,Vu=new WeakMap,es=new WeakMap,Z1=new WeakSet,fB=function(t){const r=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-u(this,es))*this.parentScale),A(this,es,i),T(this,Gf,Ob).call(this)},s=u(this,es);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:We.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},eS=new WeakSet,pB=function(t){const r=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:We.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},tS=new WeakSet,mB=function(){var s;const t=[];this.editorDiv.normalize();let r=null;for(const i of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(T(s=vt,Wf,Fb).call(s,i)),r=i);return t.join(`
`)},Gf=new WeakSet,Ob=function(){const[t,r]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",i.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/r):(this.width=s.height/t,this.height=s.width/r),this.fixAndSetPosition()},Wf=new WeakSet,Fb=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Kx,"")},Xf=new WeakSet,Bb=function(){if(this.editorDiv.replaceChildren(),!!u(this,Zr))for(const t of u(this,Zr).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},nS=new WeakSet,gB=function(){return u(this,Zr).replaceAll(""," ")},Jy=new WeakSet,iT=function(t){return t.replaceAll(" ","")},rS=new WeakSet,yB=function(t){const{value:r,fontSize:s,color:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==s||t.color.some((o,l)=>o!==i[l])||t.pageIndex!==a},k(vt,Wf),k(vt,Jy),J(vt,"_freeTextDefaultContent",""),J(vt,"_internalPadding",0),J(vt,"_defaultColor",null),J(vt,"_defaultFontSize",10),J(vt,"_type","freetext"),J(vt,"_editorType",Ne.FREETEXT);let sT=vt;class ue{toSVGPath(){mt("Abstract method `toSVGPath` must be implemented.")}get box(){mt("Abstract getter `box` must be implemented.")}serialize(e,t){mt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*s,a[o+1]=r+e[o+1]*i;return a}static _rescaleAndSwap(e,t,r,s,i,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*s,a[o+1]=r+e[o]*i;return a}static _translate(e,t,r,s){s||(s=new Float32Array(e.length));for(let i=0,a=e.length;i<a;i+=2)s[i]=t+e[i],s[i+1]=r+e[i+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,s,i){switch(i){case 90:return[1-t/r,e/s];case 180:return[1-e/r,1-t/s];case 270:return[t/r,1-e/s];default:return[e/r,t/s]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,s,i,a){return[(e+5*r)/6,(t+5*s)/6,(5*r+i)/6,(5*s+a)/6,(r+i)/2,(s+a)/2]}}J(ue,"PRECISION",1e-4);var ts,hi,Kf,Yf,ta,$e,Uu,Hu,Zy,ev,Qf,Jf,Tl,tv,sS,iS,qu,Zm,aS,vB,oS,xB,lS,bB,cS,wB,uS,SB,dS,kB;const Ta=class Ta{constructor({x:e,y:t},r,s,i,a,o=0){k(this,qu);k(this,aS);k(this,oS);k(this,lS);k(this,cS);k(this,uS);k(this,dS);k(this,ts,void 0);k(this,hi,[]);k(this,Kf,void 0);k(this,Yf,void 0);k(this,ta,[]);k(this,$e,new Float32Array(18));k(this,Uu,void 0);k(this,Hu,void 0);k(this,Zy,void 0);k(this,ev,void 0);k(this,Qf,void 0);k(this,Jf,void 0);k(this,Tl,[]);A(this,ts,r),A(this,Jf,i*s),A(this,Yf,a),u(this,$e).set([NaN,NaN,NaN,NaN,e,t],6),A(this,Kf,o),A(this,ev,u(Ta,tv)*s),A(this,Zy,u(Ta,iS)*s),A(this,Qf,s),u(this,Tl).push(e,t)}isEmpty(){return isNaN(u(this,$e)[8])}add({x:e,y:t}){var M;A(this,Uu,e),A(this,Hu,t);const[r,s,i,a]=u(this,ts);let[o,l,c,d]=u(this,$e).subarray(8,12);const f=e-c,p=t-d,m=Math.hypot(f,p);if(m<u(this,Zy))return!1;const y=m-u(this,ev),g=y/m,w=g*f,v=g*p;let x=o,b=l;o=c,l=d,c+=w,d+=v,(M=u(this,Tl))==null||M.push(e,t);const C=-v/y,_=w/y,E=C*u(this,Jf),N=_*u(this,Jf);return u(this,$e).set(u(this,$e).subarray(2,8),0),u(this,$e).set([c+E,d+N],4),u(this,$e).set(u(this,$e).subarray(14,18),12),u(this,$e).set([c-E,d-N],16),isNaN(u(this,$e)[6])?(u(this,ta).length===0&&(u(this,$e).set([o+E,l+N],2),u(this,ta).push(NaN,NaN,NaN,NaN,(o+E-r)/i,(l+N-s)/a),u(this,$e).set([o-E,l-N],14),u(this,hi).push(NaN,NaN,NaN,NaN,(o-E-r)/i,(l-N-s)/a)),u(this,$e).set([x,b,o,l,c,d],6),!this.isEmpty()):(u(this,$e).set([x,b,o,l,c,d],6),Math.abs(Math.atan2(b-l,x-o)-Math.atan2(v,w))<Math.PI/2?([o,l,c,d]=u(this,$e).subarray(2,6),u(this,ta).push(NaN,NaN,NaN,NaN,((o+c)/2-r)/i,((l+d)/2-s)/a),[o,l,x,b]=u(this,$e).subarray(14,18),u(this,hi).push(NaN,NaN,NaN,NaN,((x+o)/2-r)/i,((b+l)/2-s)/a),!0):([x,b,o,l,c,d]=u(this,$e).subarray(0,6),u(this,ta).push(((x+5*o)/6-r)/i,((b+5*l)/6-s)/a,((5*o+c)/6-r)/i,((5*l+d)/6-s)/a,((o+c)/2-r)/i,((l+d)/2-s)/a),[c,d,o,l,x,b]=u(this,$e).subarray(12,18),u(this,hi).push(((x+5*o)/6-r)/i,((b+5*l)/6-s)/a,((5*o+c)/6-r)/i,((5*l+d)/6-s)/a,((o+c)/2-r)/i,((l+d)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,ta),t=u(this,hi);if(isNaN(u(this,$e)[6])&&!this.isEmpty())return T(this,aS,vB).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?r.push(`L${e[s+4]} ${e[s+5]}`):r.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);T(this,lS,bB).call(this,r);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?r.push(`L${t[s+4]} ${t[s+5]}`):r.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return T(this,oS,xB).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,s,i,a){return new AB(e,t,r,s,i,a)}getOutlines(){var f;const e=u(this,ta),t=u(this,hi),r=u(this,$e),[s,i,a,o]=u(this,ts),l=new Float32Array((((f=u(this,Tl))==null?void 0:f.length)??0)+2);for(let p=0,m=l.length-2;p<m;p+=2)l[p]=(u(this,Tl)[p]-s)/a,l[p+1]=(u(this,Tl)[p+1]-i)/o;if(l[l.length-2]=(u(this,Uu)-s)/a,l[l.length-1]=(u(this,Hu)-i)/o,isNaN(r[6])&&!this.isEmpty())return T(this,cS,wB).call(this,l);const c=new Float32Array(u(this,ta).length+24+u(this,hi).length);let d=e.length;for(let p=0;p<d;p+=2){if(isNaN(e[p])){c[p]=c[p+1]=NaN;continue}c[p]=e[p],c[p+1]=e[p+1]}d=T(this,dS,kB).call(this,c,d);for(let p=t.length-6;p>=6;p-=6)for(let m=0;m<6;m+=2){if(isNaN(t[p+m])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=t[p+m],c[d+1]=t[p+m+1],d+=2}return T(this,uS,SB).call(this,c,d),this.newFreeDrawOutline(c,l,u(this,ts),u(this,Qf),u(this,Kf),u(this,Yf))}};ts=new WeakMap,hi=new WeakMap,Kf=new WeakMap,Yf=new WeakMap,ta=new WeakMap,$e=new WeakMap,Uu=new WeakMap,Hu=new WeakMap,Zy=new WeakMap,ev=new WeakMap,Qf=new WeakMap,Jf=new WeakMap,Tl=new WeakMap,tv=new WeakMap,sS=new WeakMap,iS=new WeakMap,qu=new WeakSet,Zm=function(){const e=u(this,$e).subarray(4,6),t=u(this,$e).subarray(16,18),[r,s,i,a]=u(this,ts);return[(u(this,Uu)+(e[0]-t[0])/2-r)/i,(u(this,Hu)+(e[1]-t[1])/2-s)/a,(u(this,Uu)+(t[0]-e[0])/2-r)/i,(u(this,Hu)+(t[1]-e[1])/2-s)/a]},aS=new WeakSet,vB=function(){const[e,t,r,s]=u(this,ts),[i,a,o,l]=T(this,qu,Zm).call(this);return`M${(u(this,$e)[2]-e)/r} ${(u(this,$e)[3]-t)/s} L${(u(this,$e)[4]-e)/r} ${(u(this,$e)[5]-t)/s} L${i} ${a} L${o} ${l} L${(u(this,$e)[16]-e)/r} ${(u(this,$e)[17]-t)/s} L${(u(this,$e)[14]-e)/r} ${(u(this,$e)[15]-t)/s} Z`},oS=new WeakSet,xB=function(e){const t=u(this,hi);e.push(`L${t[4]} ${t[5]} Z`)},lS=new WeakSet,bB=function(e){const[t,r,s,i]=u(this,ts),a=u(this,$e).subarray(4,6),o=u(this,$e).subarray(16,18),[l,c,d,f]=T(this,qu,Zm).call(this);e.push(`L${(a[0]-t)/s} ${(a[1]-r)/i} L${l} ${c} L${d} ${f} L${(o[0]-t)/s} ${(o[1]-r)/i}`)},cS=new WeakSet,wB=function(e){const t=u(this,$e),[r,s,i,a]=u(this,ts),[o,l,c,d]=T(this,qu,Zm).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-r)/i,(t[3]-s)/a,NaN,NaN,NaN,NaN,(t[4]-r)/i,(t[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-r)/i,(t[17]-s)/a,NaN,NaN,NaN,NaN,(t[14]-r)/i,(t[15]-s)/a],0),this.newFreeDrawOutline(f,e,u(this,ts),u(this,Qf),u(this,Kf),u(this,Yf))},uS=new WeakSet,SB=function(e,t){const r=u(this,hi);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},dS=new WeakSet,kB=function(e,t){const r=u(this,$e).subarray(4,6),s=u(this,$e).subarray(16,18),[i,a,o,l]=u(this,ts),[c,d,f,p]=T(this,qu,Zm).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-i)/o,(r[1]-a)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(s[0]-i)/o,(s[1]-a)/l],t),t+=24},k(Ta,tv,8),k(Ta,sS,2),k(Ta,iS,u(Ta,tv)+u(Ta,sS));let Vw=Ta;var Zf,Gu,io,nv,ns,rv,Jt,hS,EB;class AB extends ue{constructor(t,r,s,i,a,o){super();k(this,hS);k(this,Zf,void 0);k(this,Gu,new Float32Array(4));k(this,io,void 0);k(this,nv,void 0);k(this,ns,void 0);k(this,rv,void 0);k(this,Jt,void 0);A(this,Jt,t),A(this,ns,r),A(this,Zf,s),A(this,rv,i),A(this,io,a),A(this,nv,o),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],T(this,hS,EB).call(this,o);const[l,c,d,f]=u(this,Gu);for(let p=0,m=t.length;p<m;p+=2)t[p]=(t[p]-l)/d,t[p+1]=(t[p+1]-c)/f;for(let p=0,m=r.length;p<m;p+=2)r[p]=(r[p]-l)/d,r[p+1]=(r[p+1]-c)/f}toSVGPath(){const t=[`M${u(this,Jt)[4]} ${u(this,Jt)[5]}`];for(let r=6,s=u(this,Jt).length;r<s;r+=6){if(isNaN(u(this,Jt)[r])){t.push(`L${u(this,Jt)[r+4]} ${u(this,Jt)[r+5]}`);continue}t.push(`C${u(this,Jt)[r]} ${u(this,Jt)[r+1]} ${u(this,Jt)[r+2]} ${u(this,Jt)[r+3]} ${u(this,Jt)[r+4]} ${u(this,Jt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,s,i],a){const o=s-t,l=i-r;let c,d;switch(a){case 0:c=ue._rescale(u(this,Jt),t,i,o,-l),d=ue._rescale(u(this,ns),t,i,o,-l);break;case 90:c=ue._rescaleAndSwap(u(this,Jt),t,r,o,l),d=ue._rescaleAndSwap(u(this,ns),t,r,o,l);break;case 180:c=ue._rescale(u(this,Jt),s,r,-o,l),d=ue._rescale(u(this,ns),s,r,-o,l);break;case 270:c=ue._rescaleAndSwap(u(this,Jt),s,i,-o,-l),d=ue._rescaleAndSwap(u(this,ns),s,i,-o,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return u(this,Gu)}newOutliner(t,r,s,i,a,o=0){return new Vw(t,r,s,i,a,o)}getNewOutline(t,r){const[s,i,a,o]=u(this,Gu),[l,c,d,f]=u(this,Zf),p=a*d,m=o*f,y=s*d+l,g=i*f+c,w=this.newOutliner({x:u(this,ns)[0]*p+y,y:u(this,ns)[1]*m+g},u(this,Zf),u(this,rv),t,u(this,nv),r??u(this,io));for(let v=2;v<u(this,ns).length;v+=2)w.add({x:u(this,ns)[v]*p+y,y:u(this,ns)[v+1]*m+g});return w.getOutlines()}}Zf=new WeakMap,Gu=new WeakMap,io=new WeakMap,nv=new WeakMap,ns=new WeakMap,rv=new WeakMap,Jt=new WeakMap,hS=new WeakSet,EB=function(t){const r=u(this,Jt);let s=r[4],i=r[5];const a=[s,i,s,i];let o=s,l=i,c=s,d=i;const f=t?Math.max:Math.min,p=new Float32Array(4);for(let y=6,g=r.length;y<g;y+=6){const w=r[y+4],v=r[y+5];isNaN(r[y])?(ce.pointBoundingBox(w,v,a),l>v?(o=w,l=v):l===v&&(o=f(o,w)),d<v?(c=w,d=v):d===v&&(c=f(c,w))):(p[0]=p[1]=1/0,p[2]=p[3]=-1/0,ce.bezierBoundingBox(s,i,...r.slice(y,y+6),p),ce.rectBoundingBox(p[0],p[1],p[2],p[3],a),l>p[1]?(o=p[0],l=p[1]):l===p[1]&&(o=f(o,p[0])),d<p[3]?(c=p[2],d=p[3]):d===p[3]&&(c=f(c,p[2]))),s=w,i=v}const m=u(this,Gu);m[0]=a[0]-u(this,io),m[1]=a[1]-u(this,io),m[2]=a[2]-a[0]+2*u(this,io),m[3]=a[3]-a[1]+2*u(this,io),this.firstPoint=[o,l],this.lastPoint=[c,d]};var sv,iv,av,Nl,fi,fS,CB,ep,zb,pS,_B,mS,TB,ov,oT;class aT{constructor(e,t=0,r=0,s=!0){k(this,fS);k(this,ep);k(this,pS);k(this,mS);k(this,ov);k(this,sv,void 0);k(this,iv,void 0);k(this,av,void 0);k(this,Nl,[]);k(this,fi,[]);const i=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:w,y:v,width:x,height:b}of e){const C=Math.floor((w-t)/o)*o,_=Math.ceil((w+x+t)/o)*o,E=Math.floor((v-t)/o)*o,N=Math.ceil((v+b+t)/o)*o,j=[C,E,N,!0],M=[_,E,N,!1];u(this,Nl).push(j,M),ce.rectBoundingBox(C,E,_,N,i)}const l=i[2]-i[0]+2*r,c=i[3]-i[1]+2*r,d=i[0]-r,f=i[1]-r;let p=s?-1/0:1/0,m=1/0;const y=u(this,Nl).at(s?-1:-2),g=[y[0],y[2]];for(const w of u(this,Nl)){const[v,x,b,C]=w;!C&&s?x<m?(m=x,p=v):x===m&&(p=Math.max(p,v)):C&&!s&&(x<m?(m=x,p=v):x===m&&(p=Math.min(p,v))),w[0]=(v-d)/l,w[1]=(x-f)/c,w[2]=(b-f)/c}A(this,sv,new Float32Array([d,f,l,c])),A(this,iv,[p,m]),A(this,av,g)}getOutlines(){u(this,Nl).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of u(this,Nl))t[3]?(e.push(...T(this,ov,oT).call(this,t)),T(this,pS,_B).call(this,t)):(T(this,mS,TB).call(this,t),e.push(...T(this,ov,oT).call(this,t)));return T(this,fS,CB).call(this,e)}}sv=new WeakMap,iv=new WeakMap,av=new WeakMap,Nl=new WeakMap,fi=new WeakMap,fS=new WeakSet,CB=function(e){const t=[],r=new Set;for(const a of e){const[o,l,c]=a;t.push([o,l,a],[o,c,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],c=t[a+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const s=[];let i;for(;r.size>0;){const a=r.values().next().value;let[o,l,c,d,f]=a;r.delete(a);let p=o,m=l;for(i=[o,c],s.push(i);;){let y;if(r.has(d))y=d;else if(r.has(f))y=f;else break;r.delete(y),[o,l,c,d,f]=y,p!==o&&(i.push(p,m,o,m===l?l:c),p=o),m=m===l?c:l}i.push(p,m)}return new tQ(s,u(this,sv),u(this,iv),u(this,av))},ep=new WeakSet,zb=function(e){const t=u(this,fi);let r=0,s=t.length-1;for(;r<=s;){const i=r+s>>1,a=t[i][0];if(a===e)return i;a<e?r=i+1:s=i-1}return s+1},pS=new WeakSet,_B=function([,e,t]){const r=T(this,ep,zb).call(this,e);u(this,fi).splice(r,0,[e,t])},mS=new WeakSet,TB=function([,e,t]){const r=T(this,ep,zb).call(this,e);for(let s=r;s<u(this,fi).length;s++){const[i,a]=u(this,fi)[s];if(i!==e)break;if(i===e&&a===t){u(this,fi).splice(s,1);return}}for(let s=r-1;s>=0;s--){const[i,a]=u(this,fi)[s];if(i!==e)break;if(i===e&&a===t){u(this,fi).splice(s,1);return}}},ov=new WeakSet,oT=function(e){const[t,r,s]=e,i=[[t,r,s]],a=T(this,ep,zb).call(this,s);for(let o=0;o<a;o++){const[l,c]=u(this,fi)[o];for(let d=0,f=i.length;d<f;d++){const[,p,m]=i[d];if(!(c<=p||m<=l)){if(p>=l){if(m>c)i[d][1]=c;else{if(f===1)return[];i.splice(d,1),d--,f--}continue}i[d][2]=l,m>c&&i.push([t,c,m])}}}return i};var lv,tp;class tQ extends ue{constructor(t,r,s,i){super();k(this,lv,void 0);k(this,tp,void 0);A(this,tp,t),A(this,lv,r),this.firstPoint=s,this.lastPoint=i}toSVGPath(){const t=[];for(const r of u(this,tp)){let[s,i]=r;t.push(`M${s} ${i}`);for(let a=2;a<r.length;a+=2){const o=r[a],l=r[a+1];o===s?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,r,s,i],a){const o=[],l=s-t,c=i-r;for(const d of u(this,tp)){const f=new Array(d.length);for(let p=0;p<d.length;p+=2)f[p]=t+d[p]*l,f[p+1]=i-d[p+1]*c;o.push(f)}return o}get box(){return u(this,lv)}get classNamesForOutlining(){return["highlightOutline"]}}lv=new WeakMap,tp=new WeakMap;class lT extends Vw{newFreeDrawOutline(e,t,r,s,i,a){return new nQ(e,t,r,s,i,a)}}class nQ extends AB{newOutliner(e,t,r,s,i,a=0){return new lT(e,t,r,s,i,a)}}var np,cv,ao,Wu,uv,Tr,dv,hv,Xu,rs,ss,Rn,rp,sp,Xn,ip,Ls,fv,pv,cT,ap,$b,gS,NB,yS,PB,vS,jB,mv,uT,oo,_c,Pl,Gd,xS,RB,op,Vb,lp,Ub,bS,MB,wS,IB,SS,LB,kS,DB,AS,OB;const Qe=class Qe extends kt{constructor(t){super({...t,name:"highlightEditor"});k(this,pv);k(this,ap);k(this,gS);k(this,yS);k(this,vS);k(this,mv);k(this,oo);k(this,xS);k(this,op);k(this,lp);k(this,bS);k(this,wS);k(this,AS);k(this,np,null);k(this,cv,0);k(this,ao,void 0);k(this,Wu,null);k(this,uv,null);k(this,Tr,null);k(this,dv,null);k(this,hv,0);k(this,Xu,null);k(this,rs,null);k(this,ss,null);k(this,Rn,!1);k(this,rp,null);k(this,sp,null);k(this,Xn,null);k(this,ip,"");k(this,Ls,void 0);k(this,fv,"");this.color=t.color||Qe._defaultColor,A(this,Ls,t.thickness||Qe._defaultThickness),this.opacity=t.opacity||Qe._defaultOpacity,A(this,ao,t.boxes||null),A(this,fv,t.methodOfCreation||""),A(this,ip,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(A(this,Rn,!0),T(this,ap,$b).call(this,t),T(this,oo,_c).call(this)):u(this,ao)&&(A(this,np,t.anchorNode),A(this,cv,t.anchorOffset),A(this,dv,t.focusNode),A(this,hv,t.focusOffset),T(this,pv,cT).call(this),T(this,oo,_c).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Qe.prototype;return Oe(this,"_keyboardManager",new Kv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,Rn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,Ls),methodOfCreation:u(this,fv)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var s;kt.initialize(t,r),Qe._defaultColor||(Qe._defaultColor=((s=r.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case We.HIGHLIGHT_COLOR:Qe._defaultColor=r;break;case We.HIGHLIGHT_THICKNESS:Qe._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return u(this,sp)}get commentButtonPosition(){return u(this,rp)}updateParams(t,r){switch(t){case We.HIGHLIGHT_COLOR:T(this,gS,NB).call(this,r);break;case We.HIGHLIGHT_THICKNESS:T(this,yS,PB).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[We.HIGHLIGHT_COLOR,Qe._defaultColor],[We.HIGHLIGHT_THICKNESS,Qe._defaultThickness]]}get propertiesToUpdate(){return[[We.HIGHLIGHT_COLOR,this.color||Qe._defaultColor],[We.HIGHLIGHT_THICKNESS,u(this,Ls)||Qe._defaultThickness],[We.HIGHLIGHT_FREE,u(this,Rn)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,ss),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=u(this,uv))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,uv,new e0({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(T(this,lp,Ub).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,T(this,lp,Ub).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){T(this,mv,uT).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,oo,_c).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?T(this,mv,uT).call(this):t&&(T(this,oo,_c).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var i,a,o;const{drawLayer:r}=this.parent;let s;u(this,Rn)?(t=(t-this.rotation+360)%360,s=T(i=Qe,Pl,Gd).call(i,u(this,rs).box,t)):s=T(a=Qe,Pl,Gd).call(a,[this.x,this.y,this.width,this.height],t),r.updateProperties(u(this,ss),{bbox:s,root:{"data-main-rotation":t}}),r.updateProperties(u(this,Xn),{bbox:T(o=Qe,Pl,Gd).call(o,u(this,Tr).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,ip)&&(t.setAttribute("aria-label",u(this,ip)),t.setAttribute("role","mark")),u(this,Rn)?t.classList.add("free"):this.div.addEventListener("keydown",T(this,xS,RB).bind(this),{signal:this._uiManager._signal});const r=A(this,Xu,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=u(this,Wu),this.setDims(this.width,this.height),s5(this,u(this,Xu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:T(this,op,Vb).call(this,!0);break;case 1:case 3:T(this,op,Vb).call(this,!1);break}}select(){var t;super.select(),u(this,Xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,Xn)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,Xn),{rootClass:{selected:!1}}),u(this,Rn)||T(this,op,Vb).call(this,!1))}get _mustFixPosition(){return!u(this,Rn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,ss),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,Xn),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:s,x:i,y:a}){const{x:o,y:l,width:c,height:d}=s.getBoundingClientRect(),f=new AbortController,p=t.combinedSignal(f),m=y=>{f.abort(),T(this,kS,DB).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",Bt,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",gs,{signal:p}),s.addEventListener("pointermove",T(this,SS,LB).bind(this,t),{signal:p}),this._freeHighlight=new lT({x:i,y:a},[o,l,c,d],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,s){var g,w,v,x;let i=null;if(t instanceof dB){const{data:{quadPoints:b,rect:C,rotation:_,id:E,color:N,opacity:j,popupRef:M,richText:O,contentsObj:L,creationDate:F,modificationDate:U},parent:{page:{pageNumber:B}}}=t;i=t={annotationType:Ne.HIGHLIGHT,color:Array.from(N),opacity:j,quadPoints:b,boxes:null,pageIndex:B-1,rect:C.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:M,richText:O,comment:(L==null?void 0:L.str)||null,creationDate:F,modificationDate:U}}else if(t instanceof FN){const{data:{inkLists:b,rect:C,rotation:_,id:E,color:N,borderStyle:{rawWidth:j},popupRef:M,richText:O,contentsObj:L,creationDate:F,modificationDate:U},parent:{page:{pageNumber:B}}}=t;i=t={annotationType:Ne.HIGHLIGHT,color:Array.from(N),thickness:j,inkLists:b,boxes:null,pageIndex:B-1,rect:C.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:M,richText:O,comment:(L==null?void 0:L.str)||null,creationDate:F,modificationDate:U}}const{color:a,quadPoints:o,inkLists:l,opacity:c}=t,d=await super.deserialize(t,r,s);d.color=ce.makeHexColor(...a),d.opacity=c||1,l&&A(d,Ls,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[f,p]=d.pageDimensions,[m,y]=d.pageTranslation;if(o){const b=A(d,ao,[]);for(let C=0;C<o.length;C+=8)b.push({x:(o[C]-m)/f,y:1-(o[C+1]-y)/p,width:(o[C+2]-o[C])/f,height:(o[C+1]-o[C+5])/p});T(g=d,pv,cT).call(g),T(w=d,oo,_c).call(w),d.rotate(d.rotation)}else if(l){A(d,Rn,!0);const b=l[0],C={x:b[0]-m,y:p-(b[1]-y)},_=new lT(C,[0,0,f,p],1,u(d,Ls)/2,!0,.001);for(let j=0,M=b.length;j<M;j+=2)C.x=b[j]-m,C.y=p-(b[j+1]-y),_.add(C);const{id:E,clipPathId:N}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);T(v=d,ap,$b).call(v,{highlightOutlines:_.getOutlines(),highlightId:E,clipPathId:N}),T(x=d,oo,_c).call(x),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=kt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:r,opacity:this.opacity,thickness:u(this,Ls),quadPoints:T(this,bS,MB).call(this),outlines:T(this,wS,IB).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!T(this,AS,OB).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};np=new WeakMap,cv=new WeakMap,ao=new WeakMap,Wu=new WeakMap,uv=new WeakMap,Tr=new WeakMap,dv=new WeakMap,hv=new WeakMap,Xu=new WeakMap,rs=new WeakMap,ss=new WeakMap,Rn=new WeakMap,rp=new WeakMap,sp=new WeakMap,Xn=new WeakMap,ip=new WeakMap,Ls=new WeakMap,fv=new WeakMap,pv=new WeakSet,cT=function(){const t=new aT(u(this,ao),.001);A(this,rs,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,rs).box;const r=new aT(u(this,ao),.0025,.001,this._uiManager.direction==="ltr");A(this,Tr,r.getOutlines());const{firstPoint:s}=u(this,rs);A(this,rp,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:i}=u(this,Tr);A(this,sp,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},ap=new WeakSet,$b=function({highlightOutlines:t,highlightId:r,clipPathId:s}){var p,m;A(this,rs,t);const i=1.5;if(A(this,Tr,t.getNewOutline(u(this,Ls)/2+i,.0025)),r>=0)A(this,ss,r),A(this,Wu,s),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),A(this,Xn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,Tr).box,path:{d:u(this,Tr).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,ss),{bbox:T(p=Qe,Pl,Gd).call(p,u(this,rs).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,Xn),{bbox:T(m=Qe,Pl,Gd).call(m,u(this,Tr).box,y),path:{d:u(this,Tr).toSVGPath()}})}const[a,o,l,c]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=c;break;case 90:{const[y,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/y,this.height=c*y/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=c;break;case 270:{const[y,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/y,this.height=c*y/g;break}}const{firstPoint:d}=t;A(this,rp,[(d[0]-a)/l,(d[1]-o)/c]);const{lastPoint:f}=u(this,Tr);A(this,sp,[(f[0]-a)/l,(f[1]-o)/c])},gS=new WeakSet,NB=function(t){const r=(a,o)=>{this.color=a,this.opacity=o,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:r.bind(this,t,Qe._defaultOpacity),undo:r.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:We.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},yS=new WeakSet,PB=function(t){const r=u(this,Ls),s=i=>{A(this,Ls,i),T(this,vS,jB).call(this,i)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:We.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},vS=new WeakSet,jB=function(t){u(this,Rn)&&(T(this,ap,$b).call(this,{highlightOutlines:u(this,rs).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},mv=new WeakSet,uT=function(){u(this,ss)===null||!this.parent||(this.parent.drawLayer.remove(u(this,ss)),A(this,ss,null),this.parent.drawLayer.remove(u(this,Xn)),A(this,Xn,null))},oo=new WeakSet,_c=function(t=this.parent){u(this,ss)===null&&({id:ln(this,ss)._,clipPathId:ln(this,Wu)._}=t.drawLayer.draw({bbox:u(this,rs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,Rn)},path:{d:u(this,rs).toSVGPath()}},!1,!0),A(this,Xn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,Rn)},bbox:u(this,Tr).box,path:{d:u(this,Tr).toSVGPath()}},u(this,Rn))),u(this,Xu)&&(u(this,Xu).style.clipPath=u(this,Wu)))},Pl=new WeakSet,Gd=function([t,r,s,i],a){switch(a){case 90:return[1-r-i,t,i,s];case 180:return[1-t-s,1-r-i,s,i];case 270:return[r,1-t-s,i,s]}return[t,r,s,i]},xS=new WeakSet,RB=function(t){Qe._keyboardManager.exec(this,t)},op=new WeakSet,Vb=function(t){if(!u(this,np))return;const r=window.getSelection();t?r.setPosition(u(this,np),u(this,cv)):r.setPosition(u(this,dv),u(this,hv))},lp=new WeakSet,Ub=function(){return u(this,Rn)?this.rotation:0},bS=new WeakSet,MB=function(){if(u(this,Rn))return null;const[t,r]=this.pageDimensions,[s,i]=this.pageTranslation,a=u(this,ao),o=new Float32Array(a.length*8);let l=0;for(const{x:c,y:d,width:f,height:p}of a){const m=c*t+s,y=(1-d)*r+i;o[l]=o[l+4]=m,o[l+1]=o[l+3]=y,o[l+2]=o[l+6]=m+f*t,o[l+5]=o[l+7]=y-p*r,l+=8}return o},wS=new WeakSet,IB=function(t){return u(this,rs).serialize(t,T(this,lp,Ub).call(this))},SS=new WeakSet,LB=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},kS=new WeakSet,DB=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},AS=new WeakSet,OB=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((s,i)=>s!==r[i])},k(Qe,Pl),k(Qe,SS),k(Qe,kS),J(Qe,"_defaultColor",null),J(Qe,"_defaultOpacity",1),J(Qe,"_defaultThickness",12),J(Qe,"_type","highlight"),J(Qe,"_editorType",Ne.HIGHLIGHT),J(Qe,"_freeHighlightId",-1),J(Qe,"_freeHighlight",null),J(Qe,"_freeHighlightClipId","");let Uw=Qe;var Ku;class FB{constructor(){k(this,Ku,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){u(this,Ku)[e]=t}toSVGProperties(){const e=u(this,Ku);return A(this,Ku,Object.create(null)),{root:e}}reset(){A(this,Ku,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){mt("Not implemented")}}Ku=new WeakMap;var is,cp,xn,Yu,Qu,jl,Rl,Ml,Ju,gv,dT,yv,hT,vv,fT,Zu,eg,ES,BB,up,Hb,ed,tg,Il,Wd;const he=class he extends kt{constructor(t){super(t);k(this,gv);k(this,yv);k(this,vv);k(this,Zu);k(this,ES);k(this,up);k(this,ed);k(this,Il);k(this,is,null);k(this,cp,void 0);J(this,"_colorPicker",null);J(this,"_drawId",null);A(this,cp,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(T(this,gv,dT).call(this,t),T(this,Zu,eg).call(this))}static _mergeSVGProperties(t,r){const s=new Set(Object.keys(t));for(const[i,a]of Object.entries(r))s.has(i)?Object.assign(t[i],a):t[i]=a;return t}static getDefaultDrawingOptions(t){mt("Not implemented")}static get typesMap(){mt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,r),this._currentParent&&(u(he,xn).updateProperty(s,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)t.push([s,r[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[s,i]of this.constructor.typesMap)t.push([s,r[i]]);return t}_updateProperty(t,r,s){const i=this._drawingOptions,a=i[r],o=l=>{var d;i.updateProperty(r,l);const c=u(this,is).updateProperty(r,l);c&&T(this,ed,tg).call(this,c),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties(u(this,is).getPathResizingSVGProperties(T(this,up,Hb).call(this)),{bbox:T(this,Il,Wd).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties(u(this,is).getPathResizedSVGProperties(T(this,up,Hb).call(this)),{bbox:T(this,Il,Wd).call(this)}))}_onTranslating(t,r){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:T(this,Il,Wd).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties(u(this,is).getPathTranslatedSVGProperties(T(this,up,Hb).call(this),this.parentDimensions),{bbox:T(this,Il,Wd).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,cp)&&(A(this,cp,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){T(this,vv,fT).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(T(this,Zu,eg).call(this),T(this,ed,tg).call(this,u(this,is).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),T(this,vv,fT).call(this)):t&&(this._uiManager.addShouldRescale(this),T(this,Zu,eg).call(this,t),r=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,he._mergeSVGProperties({bbox:T(this,Il,Wd).call(this)},u(this,is).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&T(this,ed,tg).call(this,u(this,is).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),s}static createDrawerInstance(t,r,s,i,a){mt("Not implemented")}static startDrawing(t,r,s,i){var w;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=i;if(u(he,Rl)&&u(he,Rl)!==d)return;const{viewport:{rotation:f}}=t,{width:p,height:m}=a.getBoundingClientRect(),y=A(he,Yu,new AbortController),g=t.combinedSignal(y);if(u(he,jl)||A(he,jl,c),u(he,Rl)??A(he,Rl,d),window.addEventListener("pointerup",v=>{var x;u(he,jl)===v.pointerId?this._endDraw(v):(x=u(he,Ml))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var x;u(he,jl)===v.pointerId?this._currentParent.endDrawingSession():(x=u(he,Ml))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{u(he,Rl)===v.pointerType&&((u(he,Ml)||A(he,Ml,new Set)).add(v.pointerId),u(he,xn).isCancellable()&&(u(he,xn).removeLastElement(),u(he,xn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",gs,{signal:g}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),a.addEventListener("touchmove",v=>{v.timeStamp===u(he,Ju)&&Bt(v)},{signal:g}),t.toggleDrawing(),(w=r._editorUndoBar)==null||w.hide(),u(he,xn)){t.drawLayer.updateProperties(this._currentDrawId,u(he,xn).startNew(o,l,p,m,f));return}r.updateUIForDefaultProperties(this),A(he,xn,this.createDrawerInstance(o,l,p,m,f)),A(he,Qu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(he,Qu).toSVGProperties(),u(he,xn).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(A(he,Ju,-1),!u(he,xn))return;const{offsetX:r,offsetY:s,pointerId:i}=t;if(u(he,jl)===i){if(((a=u(he,Ml))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(he,xn).add(r,s)),A(he,Ju,t.timeStamp),Bt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,A(he,xn,null),A(he,Qu,null),A(he,Rl,null),A(he,Ju,NaN)),u(he,Yu)&&(u(he,Yu).abort(),A(he,Yu,null),A(he,jl,NaN),A(he,Ml,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,u(he,xn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=u(he,xn),i=this._currentDrawId,a=s.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(i,s.setLastElement(a))},undo:()=>{r.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:We.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(We.DRAW_STEP),!u(he,xn).isEmpty()){const{pageDimensions:[s,i],scale:a}=r,o=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(he,xn).getOutlines(s*a,i*a,a,this._INNER_MARGIN),drawingOptions:u(he,Qu),mustBeCommitted:!t});return this._cleanup(!0),o}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,s,i,a,o){mt("Not implemented")}static async deserialize(t,r,s){var f,p;const{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:l}}=r.viewport,c=this.deserializeDraw(o,l,i,a,this._INNER_MARGIN,t),d=await super.deserialize(t,r,s);return d.createDrawingOptions(t),T(f=d,gv,dT).call(f,{drawOutlines:c}),T(p=d,Zu,eg).call(p),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[r,s]=this.pageTranslation,[i,a]=this.pageDimensions;return u(this,is).serialize([r,s,i,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};is=new WeakMap,cp=new WeakMap,xn=new WeakMap,Yu=new WeakMap,Qu=new WeakMap,jl=new WeakMap,Rl=new WeakMap,Ml=new WeakMap,Ju=new WeakMap,gv=new WeakSet,dT=function({drawOutlines:t,drawId:r,drawingOptions:s}){A(this,is,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=T(this,yv,hT).call(this,t,this.parent),T(this,ed,tg).call(this,t.box)},yv=new WeakSet,hT=function(t,r){const{id:s}=r.drawLayer.draw(he._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},vv=new WeakSet,fT=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Zu=new WeakSet,eg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=T(this,yv,hT).call(this,u(this,is),t)}},ES=new WeakSet,BB=function([t,r,s,i]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[r,1-t,s*(o/a),i*(a/o)];case 180:return[1-t,1-r,s,i];case 270:return[1-r,t,s*(o/a),i*(a/o)];default:return[t,r,s,i]}},up=new WeakSet,Hb=function(){const{x:t,y:r,width:s,height:i,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-r,t,s*(a/o),i*(o/a)];case 180:return[1-t,1-r,s,i];case 270:return[r,1-t,s*(a/o),i*(o/a)];default:return[t,r,s,i]}},ed=new WeakSet,tg=function(t){[this.x,this.y,this.width,this.height]=T(this,ES,BB).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Il=new WeakSet,Wd=function(){const{x:t,y:r,width:s,height:i,rotation:a,parentRotation:o,parentDimensions:[l,c]}=this;switch((a*4+o)/90){case 1:return[1-r-i,t,i,s];case 2:return[1-t-s,1-r-i,s,i];case 3:return[r,1-t-s,i,s];case 4:return[t,r-s*(l/c),i*(c/l),s*(l/c)];case 5:return[1-r,t,s*(l/c),i*(c/l)];case 6:return[1-t-i*(c/l),1-r,i*(c/l),s*(l/c)];case 7:return[r-s*(l/c),1-t-i*(c/l),s*(l/c),i*(c/l)];case 8:return[t-s,r-i,s,i];case 9:return[1-r,t-s,i,s];case 10:return[1-t,1-r,s,i];case 11:return[r-i,1-t,i,s];case 12:return[t-i*(c/l),r,i*(c/l),s*(l/c)];case 13:return[1-r-s*(l/c),t-i*(c/l),s*(l/c),i*(c/l)];case 14:return[1-t,1-r-s*(l/c),i*(c/l),s*(l/c)];case 15:return[r,1-t,s*(l/c),i*(c/l)];default:return[t,r,s,i]}},J(he,"_currentDrawId",-1),J(he,"_currentParent",null),k(he,xn,null),k(he,Yu,null),k(he,Qu,null),k(he,jl,NaN),k(he,Rl,null),k(he,Ml,null),k(he,Ju,NaN),J(he,"_INNER_MARGIN",3);let Hw=he;var na,bn,wn,td,dp,ir,Mn,Ds,nd,rd,sd,hp,qb;class rQ{constructor(e,t,r,s,i,a){k(this,hp);k(this,na,new Float64Array(6));k(this,bn,void 0);k(this,wn,void 0);k(this,td,void 0);k(this,dp,void 0);k(this,ir,void 0);k(this,Mn,"");k(this,Ds,0);k(this,nd,new Qv);k(this,rd,void 0);k(this,sd,void 0);A(this,rd,r),A(this,sd,s),A(this,td,i),A(this,dp,a),[e,t]=T(this,hp,qb).call(this,e,t);const o=A(this,bn,[NaN,NaN,NaN,NaN,e,t]);A(this,ir,[e,t]),A(this,wn,[{line:o,points:u(this,ir)}]),u(this,na).set(o,0)}updateProperty(e,t){e==="stroke-width"&&A(this,dp,t)}isEmpty(){return!u(this,wn)||u(this,wn).length===0}isCancellable(){return u(this,ir).length<=10}add(e,t){[e,t]=T(this,hp,qb).call(this,e,t);const[r,s,i,a]=u(this,na).subarray(2,6),o=e-i,l=t-a;return Math.hypot(u(this,rd)*o,u(this,sd)*l)<=2?null:(u(this,ir).push(e,t),isNaN(r)?(u(this,na).set([i,a,e,t],2),u(this,bn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,na)[0])&&u(this,bn).splice(6,6),u(this,na).set([r,s,i,a,e,t],0),u(this,bn).push(...ue.createBezierPoints(r,s,i,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(u(this,ir).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,s,i){A(this,rd,r),A(this,sd,s),A(this,td,i),[e,t]=T(this,hp,qb).call(this,e,t);const a=A(this,bn,[NaN,NaN,NaN,NaN,e,t]);A(this,ir,[e,t]);const o=u(this,wn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),u(this,wn).push({line:a,points:u(this,ir)}),u(this,na).set(a,0),A(this,Ds,0),this.toSVGPath(),null}getLastElement(){return u(this,wn).at(-1)}setLastElement(e){return u(this,wn)?(u(this,wn).push(e),A(this,bn,e.line),A(this,ir,e.points),A(this,Ds,0),{path:{d:this.toSVGPath()}}):u(this,nd).setLastElement(e)}removeLastElement(){if(!u(this,wn))return u(this,nd).removeLastElement();u(this,wn).pop(),A(this,Mn,"");for(let e=0,t=u(this,wn).length;e<t;e++){const{line:r,points:s}=u(this,wn)[e];A(this,bn,r),A(this,ir,s),A(this,Ds,0),this.toSVGPath()}return{path:{d:u(this,Mn)}}}toSVGPath(){const e=ue.svgRound(u(this,bn)[4]),t=ue.svgRound(u(this,bn)[5]);if(u(this,ir).length===2)return A(this,Mn,`${u(this,Mn)} M ${e} ${t} Z`),u(this,Mn);if(u(this,ir).length<=6){const s=u(this,Mn).lastIndexOf("M");A(this,Mn,`${u(this,Mn).slice(0,s)} M ${e} ${t}`),A(this,Ds,6)}if(u(this,ir).length===4){const s=ue.svgRound(u(this,bn)[10]),i=ue.svgRound(u(this,bn)[11]);return A(this,Mn,`${u(this,Mn)} L ${s} ${i}`),A(this,Ds,12),u(this,Mn)}const r=[];u(this,Ds)===0&&(r.push(`M ${e} ${t}`),A(this,Ds,6));for(let s=u(this,Ds),i=u(this,bn).length;s<i;s+=6){const[a,o,l,c,d,f]=u(this,bn).slice(s,s+6).map(ue.svgRound);r.push(`C${a} ${o} ${l} ${c} ${d} ${f}`)}return A(this,Mn,u(this,Mn)+r.join(" ")),A(this,Ds,u(this,bn).length),u(this,Mn)}getOutlines(e,t,r,s){const i=u(this,wn).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),u(this,nd).build(u(this,wn),e,t,r,u(this,td),u(this,dp),s),A(this,na,null),A(this,bn,null),A(this,wn,null),A(this,Mn,null),u(this,nd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}na=new WeakMap,bn=new WeakMap,wn=new WeakMap,td=new WeakMap,dp=new WeakMap,ir=new WeakMap,Mn=new WeakMap,Ds=new WeakMap,nd=new WeakMap,rd=new WeakMap,sd=new WeakMap,hp=new WeakSet,qb=function(e,t){return ue._normalizePoint(e,t,u(this,rd),u(this,sd),u(this,td))};var ar,xv,bv,as,ra,sa,fp,pp,id,pi,Aa,CS,zB,_S,$B,TS,VB;class Qv extends ue{constructor(){super(...arguments);k(this,pi);k(this,CS);k(this,_S);k(this,TS);k(this,ar,void 0);k(this,xv,0);k(this,bv,void 0);k(this,as,void 0);k(this,ra,void 0);k(this,sa,void 0);k(this,fp,void 0);k(this,pp,void 0);k(this,id,void 0)}build(t,r,s,i,a,o,l){A(this,ra,r),A(this,sa,s),A(this,fp,i),A(this,pp,a),A(this,id,o),A(this,bv,l??0),A(this,as,t),T(this,_S,$B).call(this)}get thickness(){return u(this,id)}setLastElement(t){return u(this,as).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,as).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of u(this,as)){if(t.push(`M${ue.svgRound(r[4])} ${ue.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${ue.svgRound(r[10])} ${ue.svgRound(r[11])}`);continue}for(let s=6,i=r.length;s<i;s+=6){const[a,o,l,c,d,f]=r.subarray(s,s+6).map(ue.svgRound);t.push(`C${a} ${o} ${l} ${c} ${d} ${f}`)}}return t.join("")}serialize([t,r,s,i],a){const o=[],l=[],[c,d,f,p]=T(this,CS,zB).call(this);let m,y,g,w,v,x,b,C,_;switch(u(this,pp)){case 0:_=ue._rescale,m=t,y=r+i,g=s,w=-i,v=t+c*s,x=r+(1-d-p)*i,b=t+(c+f)*s,C=r+(1-d)*i;break;case 90:_=ue._rescaleAndSwap,m=t,y=r,g=s,w=i,v=t+d*s,x=r+c*i,b=t+(d+p)*s,C=r+(c+f)*i;break;case 180:_=ue._rescale,m=t+s,y=r,g=-s,w=i,v=t+(1-c-f)*s,x=r+d*i,b=t+(1-c)*s,C=r+(d+p)*i;break;case 270:_=ue._rescaleAndSwap,m=t+s,y=r+i,g=-s,w=-i,v=t+(1-d-p)*s,x=r+(1-c-f)*i,b=t+(1-d)*s,C=r+(1-c)*i;break}for(const{line:E,points:N}of u(this,as))o.push(_(E,m,y,g,w,a?new Array(E.length):null)),l.push(_(N,m,y,g,w,a?new Array(N.length):null));return{lines:o,points:l,rect:[v,x,b,C]}}static deserialize(t,r,s,i,a,{paths:{lines:o,points:l},rotation:c,thickness:d}){const f=[];let p,m,y,g,w;switch(c){case 0:w=ue._rescale,p=-t/s,m=r/i+1,y=1/s,g=-1/i;break;case 90:w=ue._rescaleAndSwap,p=-r/i,m=-t/s,y=1/i,g=1/s;break;case 180:w=ue._rescale,p=t/s+1,m=-r/i,y=-1/s,g=1/i;break;case 270:w=ue._rescaleAndSwap,p=r/i+1,m=t/s+1,y=-1/i,g=-1/s;break}if(!o){o=[];for(const x of l){const b=x.length;if(b===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(b===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const C=new Float32Array(3*(b-2));o.push(C);let[_,E,N,j]=x.subarray(0,4);C.set([NaN,NaN,NaN,NaN,_,E],0);for(let M=4;M<b;M+=2){const O=x[M],L=x[M+1];C.set(ue.createBezierPoints(_,E,N,j,O,L),(M-2)*3),[_,E,N,j]=[N,j,O,L]}}}for(let x=0,b=o.length;x<b;x++)f.push({line:w(o[x].map(C=>C??NaN),p,m,y,g),points:w(l[x].map(C=>C??NaN),p,m,y,g)});const v=new this.prototype.constructor;return v.build(f,s,i,1,c,d,a),v}get box(){return u(this,ar)}updateProperty(t,r){return t==="stroke-width"?T(this,TS,VB).call(this,r):null}updateParentDimensions([t,r],s){const[i,a]=T(this,pi,Aa).call(this);A(this,ra,t),A(this,sa,r),A(this,fp,s);const[o,l]=T(this,pi,Aa).call(this),c=o-i,d=l-a,f=u(this,ar);return f[0]-=c,f[1]-=d,f[2]+=2*c,f[3]+=2*d,f}updateRotation(t){return A(this,xv,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,ar).map(ue.svgRound).join(" ")}get defaultProperties(){const[t,r]=u(this,ar);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=u(this,ar);let s=0,i=0,a=0,o=0,l=0,c=0;switch(u(this,xv)){case 90:i=r/t,a=-t/r,l=t;break;case 180:s=-1,o=-1,l=t,c=r;break;case 270:i=-r/t,a=t/r,c=r;break;default:return""}return`matrix(${s} ${i} ${a} ${o} ${ue.svgRound(l)} ${ue.svgRound(c)})`}getPathResizingSVGProperties([t,r,s,i]){const[a,o]=T(this,pi,Aa).call(this),[l,c,d,f]=u(this,ar);if(Math.abs(d-a)<=ue.PRECISION||Math.abs(f-o)<=ue.PRECISION){const w=t+s/2-(l+d/2),v=r+i/2-(c+f/2);return{path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(r)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const p=(s-2*a)/(d-2*a),m=(i-2*o)/(f-2*o),y=d/s,g=f/i;return{path:{"transform-origin":`${ue.svgRound(l)} ${ue.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${ue.svgRound(a)} ${ue.svgRound(o)}) scale(${p} ${m}) translate(${ue.svgRound(-a)} ${ue.svgRound(-o)})`}}}getPathResizedSVGProperties([t,r,s,i]){const[a,o]=T(this,pi,Aa).call(this),l=u(this,ar),[c,d,f,p]=l;if(l[0]=t,l[1]=r,l[2]=s,l[3]=i,Math.abs(f-a)<=ue.PRECISION||Math.abs(p-o)<=ue.PRECISION){const v=t+s/2-(c+f/2),x=r+i/2-(d+p/2);for(const{line:b,points:C}of u(this,as))ue._translate(b,v,x,b),ue._translate(C,v,x,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*a)/(f-2*a),y=(i-2*o)/(p-2*o),g=-m*(c+a)+t+a,w=-y*(d+o)+r+o;if(m!==1||y!==1||g!==0||w!==0)for(const{line:v,points:x}of u(this,as))ue._rescale(v,g,w,m,y,v),ue._rescale(x,g,w,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],s){const[i,a]=s,o=u(this,ar),l=t-o[0],c=r-o[1];if(u(this,ra)===i&&u(this,sa)===a)for(const{line:d,points:f}of u(this,as))ue._translate(d,l,c,d),ue._translate(f,l,c,f);else{const d=u(this,ra)/i,f=u(this,sa)/a;A(this,ra,i),A(this,sa,a);for(const{line:p,points:m}of u(this,as))ue._rescale(p,l,c,d,f,p),ue._rescale(m,l,c,d,f,m);o[2]*=d,o[3]*=f}return o[0]=t,o[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ue.svgRound(t)} ${ue.svgRound(r)}`}}}get defaultSVGProperties(){const t=u(this,ar);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ue.svgRound(t[0])} ${ue.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}ar=new WeakMap,xv=new WeakMap,bv=new WeakMap,as=new WeakMap,ra=new WeakMap,sa=new WeakMap,fp=new WeakMap,pp=new WeakMap,id=new WeakMap,pi=new WeakSet,Aa=function(t=u(this,id)){const r=u(this,bv)+t/2*u(this,fp);return u(this,pp)%180===0?[r/u(this,ra),r/u(this,sa)]:[r/u(this,sa),r/u(this,ra)]},CS=new WeakSet,zB=function(){const[t,r,s,i]=u(this,ar),[a,o]=T(this,pi,Aa).call(this,0);return[t+a,r+o,s-2*a,i-2*o]},_S=new WeakSet,$B=function(){const t=A(this,ar,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of u(this,as)){if(i.length<=12){for(let l=4,c=i.length;l<c;l+=6)ce.pointBoundingBox(i[l],i[l+1],t);continue}let a=i[4],o=i[5];for(let l=6,c=i.length;l<c;l+=6){const[d,f,p,m,y,g]=i.subarray(l,l+6);ce.bezierBoundingBox(a,o,d,f,p,m,y,g,t),a=y,o=g}}const[r,s]=T(this,pi,Aa).call(this);t[0]=Yn(t[0]-r,0,1),t[1]=Yn(t[1]-s,0,1),t[2]=Yn(t[2]+r,0,1),t[3]=Yn(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},TS=new WeakSet,VB=function(t){const[r,s]=T(this,pi,Aa).call(this);A(this,id,t);const[i,a]=T(this,pi,Aa).call(this),[o,l]=[i-r,a-s],c=u(this,ar);return c[0]-=o,c[1]-=l,c[2]+=2*o,c[3]+=2*l,c};class Tk extends FB{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:kt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Tk(this._viewParameters);return e.updateAll(this),e}}var NS,UB;const mh=class mh extends Hw{constructor(t){super({...t,name:"inkEditor"});k(this,NS);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){kt.initialize(t,r),this._defaultDrawingOptions=new Tk(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Oe(this,"typesMap",new Map([[We.INK_THICKNESS,"stroke-width"],[We.INK_COLOR,"stroke"],[We.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,s,i,a){return new rQ(t,r,s,i,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,s,i,a,o){return Qv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){let i=null;if(t instanceof FN){const{data:{inkLists:o,rect:l,rotation:c,id:d,color:f,opacity:p,borderStyle:{rawWidth:m},popupRef:y,richText:g,contentsObj:w,creationDate:v,modificationDate:x},parent:{page:{pageNumber:b}}}=t;i=t={annotationType:Ne.INK,color:Array.from(f),thickness:m,opacity:p,paths:{points:o},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:g,comment:(w==null?void 0:w.str)||null,creationDate:v,modificationDate:x}}const a=await super.deserialize(t,r,s);return a._initialData=i,t.comment&&a.setCommentData(t),a}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new $w(this)),[["colorPicker",this._colorPicker]]}get colorType(){return We.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:s}=this;r.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:s}){this._drawingOptions=mh.getDefaultDrawingOptions({stroke:ce.makeHexColor(...t),"stroke-width":r,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":a,"stroke-width":o}}=this,l=Object.assign(super.serialize(t),{color:kt._colorManager.convert(i),opacity:a,thickness:o,paths:{lines:r,points:s}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!T(this,NS,UB).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};NS=new WeakSet,UB=function(t){const{color:r,thickness:s,opacity:i,pageIndex:a}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==r[l])||t.thickness!==s||t.opacity!==i||t.pageIndex!==a},J(mh,"_type","ink"),J(mh,"_editorType",Ne.INK),J(mh,"_defaultDrawingOptions",null);let pT=mh;class mT extends Qv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Yx=8,Tm=3;var ad,wv,gT,mi,PS,HB,jS,qB,Sv,yT,mp,Gb,RS,GB,MS,WB,IS,XB,kv,vT,Av,xT,LS,KB;class sn{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:s},i,a,o,l){let c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const f=200,p=d.font=`${r} ${s} ${f}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:b}=d.measureText(e),C=1.5,_=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,b)*C),E=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||f,Math.abs(v)+Math.abs(x)||f)*C);c=new OffscreenCanvas(_,E),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=p,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,_,E),d.fillStyle="black",d.fillText(e,_*(C-1)/2,E*(3-C)/2);const N=T(this,kv,vT).call(this,d.getImageData(0,0,_,E).data),j=T(this,IS,XB).call(this,N),M=T(this,Av,xT).call(this,j),O=T(this,Sv,yT).call(this,N,_,E,M);return this.processDrawnLines({lines:{curves:O,width:_,height:E},pageWidth:i,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,s,i){const[a,o,l]=T(this,LS,KB).call(this,e),[c,d]=T(this,MS,WB).call(this,a,o,l,Math.hypot(o,l)*u(this,ad).sigmaSFactor,u(this,ad).sigmaR,u(this,ad).kernelSize),f=T(this,Av,xT).call(this,d),p=T(this,Sv,yT).call(this,c,o,l,f);return this.processDrawnLines({lines:{curves:p,width:o,height:l},pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:s,innerMargin:i,mustSmooth:a,areContours:o}){s%180!==0&&([t,r]=[r,t]);const{curves:l,width:c,height:d}=e,f=e.thickness??0,p=[],m=Math.min(t/c,r/d),y=m/t,g=m/r,w=[];for(const{points:x}of l){const b=a?T(this,RS,GB).call(this,x):x;if(!b)continue;w.push(b);const C=b.length,_=new Float32Array(C),E=new Float32Array(3*(C===2?2:C-2));if(p.push({line:E,points:_}),C===2){_[0]=b[0]*y,_[1]=b[1]*g,E.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[N,j,M,O]=b;N*=y,j*=g,M*=y,O*=g,_.set([N,j,M,O],0),E.set([NaN,NaN,NaN,NaN,N,j],0);for(let L=4;L<C;L+=2){const F=_[L]=b[L]*y,U=_[L+1]=b[L+1]*g;E.set(ue.createBezierPoints(N,j,M,O,F,U),(L-2)*3),[N,j,M,O]=[M,O,F,U]}}if(p.length===0)return null;const v=o?new mT:new Qv;return v.build(p,t,r,1,s,o?0:f,i),{outline:v,newCurves:w,areContours:o,thickness:f,width:c,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:s,height:i}){let a=1/0,o=-1/0,l=0;for(const b of e){l+=b.length;for(let C=2,_=b.length;C<_;C++){const E=b[C]-b[C-2];a=Math.min(a,E),o=Math.max(o,E)}}let c;a>=-128&&o<=127?c=Int8Array:a>=-32768&&o<=32767?c=Int16Array:c=Int32Array;const d=e.length,f=Yx+Tm*d,p=new Uint32Array(f);let m=0;p[m++]=f*Uint32Array.BYTES_PER_ELEMENT+(l-2*d)*c.BYTES_PER_ELEMENT,p[m++]=0,p[m++]=s,p[m++]=i,p[m++]=t?0:1,p[m++]=Math.max(0,Math.floor(r??0)),p[m++]=d,p[m++]=c.BYTES_PER_ELEMENT;for(const b of e)p[m++]=b.length-2,p[m++]=b[0],p[m++]=b[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(p);const w=c.prototype.constructor;for(const b of e){const C=new w(b.length-2);for(let _=2,E=b.length;_<E;_++)C[_-2]=b[_]-b[_-2];g.write(C)}g.close();const v=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(v);return G4(x)}static async decompressSignature(e){try{const t=TK(e),{readable:r,writable:s}=new DecompressionStream("deflate-raw"),i=s.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let a=null,o=0;for await(const b of r)a||(a=new Uint8Array(new Uint32Array(b.buffer,0,4)[0])),a.set(b,o),o+=b.length;const l=new Uint32Array(a.buffer,0,a.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const d=l[2],f=l[3],p=l[4]===0,m=l[5],y=l[6],g=l[7],w=[],v=(Yx+Tm*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(a.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(a.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(a.buffer,v);break}o=0;for(let b=0;b<y;b++){const C=l[Tm*b+Yx],_=new Float32Array(C+2);w.push(_);for(let E=0;E<Tm-1;E++)_[E]=l[Tm*b+Yx+E+1];for(let E=0;E<C;E++)_[E+2]=_[E]+x[o++]}return{areContours:p,thickness:m,outlines:w,width:d,height:f}}catch(t){return Pe(`decompressSignature: ${t}`),null}}}ad=new WeakMap,wv=new WeakSet,gT=function(e,t,r,s){return r-=e,s-=t,r===0?s>0?0:4:r===1?s+6:2-s},mi=new WeakMap,PS=new WeakSet,HB=function(e,t,r,s,i,a,o){const l=T(this,wv,gT).call(this,r,s,i,a);for(let c=0;c<8;c++){const d=(-c+l-o+16)%8,f=u(this,mi)[2*d],p=u(this,mi)[2*d+1];if(e[(r+f)*t+(s+p)]!==0)return d}return-1},jS=new WeakSet,qB=function(e,t,r,s,i,a,o){const l=T(this,wv,gT).call(this,r,s,i,a);for(let c=0;c<8;c++){const d=(c+l+o+16)%8,f=u(this,mi)[2*d],p=u(this,mi)[2*d+1];if(e[(r+f)*t+(s+p)]!==0)return d}return-1},Sv=new WeakSet,yT=function(e,t,r,s){const i=e.length,a=new Int32Array(i);for(let d=0;d<i;d++)a[d]=e[d]<=s?1:0;for(let d=1;d<r-1;d++)a[d*t]=a[d*t+t-1]=0;for(let d=0;d<t;d++)a[d]=a[t*r-1-d]=0;let o=1,l;const c=[];for(let d=1;d<r-1;d++){l=1;for(let f=1;f<t-1;f++){const p=d*t+f,m=a[p];if(m===0)continue;let y=d,g=f;if(m===1&&a[p-1]===0)o+=1,g-=1;else if(m>=1&&a[p+1]===0)o+=1,g+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const w=[f,d],v=g===f+1,x={isHole:v,points:w,id:o,parent:0};c.push(x);let b;for(const L of c)if(L.id===l){b=L;break}b?b.isHole?x.parent=v?b.parent:l:x.parent=v?l:b.parent:x.parent=v?l:0;const C=T(this,PS,HB).call(this,a,t,d,f,y,g,0);if(C===-1){a[p]=-o,a[p]!==1&&(l=Math.abs(a[p]));continue}let _=u(this,mi)[2*C],E=u(this,mi)[2*C+1];const N=d+_,j=f+E;y=N,g=j;let M=d,O=f;for(;;){const L=T(this,jS,qB).call(this,a,t,M,O,y,g,1);_=u(this,mi)[2*L],E=u(this,mi)[2*L+1];const F=M+_,U=O+E;w.push(U,F);const B=M*t+O;if(a[B+1]===0?a[B]=-o:a[B]===1&&(a[B]=o),F===d&&U===f&&M===N&&O===j){a[p]!==1&&(l=Math.abs(a[p]));break}else y=M,g=O,M=F,O=U}}}return c},mp=new WeakSet,Gb=function(e,t,r,s){if(r-t<=4){for(let N=t;N<r-2;N+=2)s.push(e[N],e[N+1]);return}const i=e[t],a=e[t+1],o=e[r-4]-i,l=e[r-3]-a,c=Math.hypot(o,l),d=o/c,f=l/c,p=d*a-f*i,m=l/o,y=1/c,g=Math.atan(m),w=Math.cos(g),v=Math.sin(g),x=y*(Math.abs(w)+Math.abs(v)),b=y*(1-x+x**2),C=Math.max(Math.atan(Math.abs(v+w)*b),Math.atan(Math.abs(v-w)*b));let _=0,E=t;for(let N=t+2;N<r-2;N+=2){const j=Math.abs(p-d*e[N+1]+f*e[N]);j>_&&(E=N,_=j)}_>(c*C)**2?(T(this,mp,Gb).call(this,e,t,E+2,s),T(this,mp,Gb).call(this,e,E,r,s)):s.push(i,a)},RS=new WeakSet,GB=function(e){const t=[],r=e.length;return T(this,mp,Gb).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},MS=new WeakSet,WB=function(e,t,r,s,i,a){const o=new Float32Array(a**2),l=-2*s**2,c=a>>1;for(let g=0;g<a;g++){const w=(g-c)**2;for(let v=0;v<a;v++)o[g*a+v]=Math.exp((w+(v-c)**2)/l)}const d=new Float32Array(256),f=-2*i**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/f);const p=e.length,m=new Uint8Array(p),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let w=0;w<t;w++){const v=g*t+w,x=e[v];let b=0,C=0;for(let E=0;E<a;E++){const N=g+E-c;if(!(N<0||N>=r))for(let j=0;j<a;j++){const M=w+j-c;if(M<0||M>=t)continue;const O=e[N*t+M],L=o[E*a+j]*d[Math.abs(O-x)];b+=O*L,C+=L}}const _=m[v]=Math.round(b/C);y[_]++}return[m,y]},IS=new WeakSet,XB=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},kv=new WeakSet,vT=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let s=-1/0,i=1/0;for(let o=0,l=r.length;o<l;o++){const c=r[o]=e[o<<2];s=Math.max(s,c),i=Math.min(i,c)}const a=255/(s-i);for(let o=0,l=r.length;o<l;o++)r[o]=(r[o]-i)*a;return r},Av=new WeakSet,xT=function(e){let t,r=-1/0,s=-1/0;const i=e.findIndex(l=>l!==0);let a=i,o=i;for(t=i;t<256;t++){const l=e[t];l>r&&(t-a>s&&(s=t-a,o=t-1),r=l,a=t)}for(t=o-1;t>=0&&!(e[t]>e[t+1]);t--);return t},LS=new WeakSet,KB=function(e){const t=e,{width:r,height:s}=e,{maxDim:i}=u(this,ad);let a=r,o=s;if(r>i||s>i){let p=r,m=s,y=Math.log2(Math.max(r,s)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){a=Math.ceil(p/2),o=Math.ceil(m/2);const x=new OffscreenCanvas(a,o);x.getContext("2d").drawImage(e,0,0,p,m,0,0,a,o),p=a,m=o,e!==t&&e.close(),e=x.transferToImageBitmap()}const w=Math.min(i/a,i/o);a=Math.round(a*w),o=Math.round(o*w)}const c=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,a,o),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,a,o);const d=c.getImageData(0,0,a,o).data;return[T(this,kv,vT).call(this,d),a,o]},k(sn,wv),k(sn,PS),k(sn,jS),k(sn,Sv),k(sn,mp),k(sn,RS),k(sn,MS),k(sn,IS),k(sn,kv),k(sn,Av),k(sn,LS),k(sn,ad,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),k(sn,mi,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class zN extends FB{constructor(){super(),super.updateProperties({fill:kt._defaultLineColor,"stroke-width":0})}clone(){const e=new zN;return e.updateAll(this),e}}class $N extends Tk{constructor(e){super(e),super.updateProperties({stroke:kt._defaultLineColor,"stroke-width":1})}clone(){const e=new $N(this._viewParameters);return e.updateAll(this),e}}var Ll,ia,Dl,od;const Ur=class Ur extends Hw{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});k(this,Ll,!1);k(this,ia,null);k(this,Dl,null);k(this,od,null);this._willKeepAspectRatio=!0,A(this,Dl,t.signatureData||null),A(this,ia,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){kt.initialize(t,r),this._defaultDrawingOptions=new zN,this._defaultDrawnSignatureOptions=new $N(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Oe(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,ia)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(u(this,Dl)){const{lines:i,mustSmooth:a,areContours:o,description:l,uuid:c,heightInPage:d}=u(this,Dl),{rawDims:{pageWidth:f,pageHeight:p},rotation:m}=this.parent.viewport,y=sn.processDrawnLines({lines:i,pageWidth:f,pageHeight:p,rotation:m,innerMargin:Ur._INNER_MARGIN,mustSmooth:a,areContours:o});this.addSignature(y,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,ia)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){A(this,od,t),this.addEditToolbar()}getUuid(){return u(this,od)}get description(){return u(this,ia)}set description(t){A(this,ia,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:s,width:i,height:a}=u(this,Dl),o=Math.max(i,a),l=sn.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:s,width:i,height:a},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,s,i){const{x:a,y:o}=this,{outline:l}=A(this,Dl,t);A(this,Ll,l instanceof mT),this.description=s;let c;u(this,Ll)?c=Ur.getDefaultDrawingOptions():(c=Ur._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let f=r/d;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=a,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return sn.process(t,r,s,i,Ur._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:s,pageHeight:i},rotation:a}=this.parent.viewport;return sn.extractContoursFromText(t,r,s,i,a,Ur._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:s},rotation:i}=this.parent.viewport;return sn.processDrawnLines({lines:t,pageWidth:r,pageHeight:s,rotation:i,innerMargin:Ur._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=Ur.getDefaultDrawingOptions():(this._drawingOptions=Ur._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,a=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,Ll),color:[0,0,0],thickness:u(this,Ll)?0:i});return this.addComment(a),t?(a.paths={lines:r,points:s},a.uuid=u(this,od),a.isCopy=!0):a.lines=r,u(this,ia)&&(a.accessibilityData={type:"Figure",alt:u(this,ia)}),a}static deserializeDraw(t,r,s,i,a,o){return o.areContours?mT.deserialize(t,r,s,i,a,o):Qv.deserialize(t,r,s,i,a,o)}static async deserialize(t,r,s){var a;const i=await super.deserialize(t,r,s);return A(i,Ll,t.areContours),i.description=((a=t.accessibilityData)==null?void 0:a.alt)||"",A(i,od,t.uuid),i}};Ll=new WeakMap,ia=new WeakMap,Dl=new WeakMap,od=new WeakMap,J(Ur,"_type","signature"),J(Ur,"_editorType",Ne.SIGNATURE),J(Ur,"_defaultDrawingOptions",null);let bT=Ur;var Rt,Sn,Ol,lo,Fl,gp,co,ld,aa,os,yp,cd,ng,ud,rg,vp,Wb,xp,Xb,bp,Kb,Ev,ST,wp,Yb,DS,YB;class wT extends kt{constructor(t){super({...t,name:"stampEditor"});k(this,cd);k(this,ud);k(this,vp);k(this,xp);k(this,bp);k(this,Ev);k(this,wp);k(this,DS);k(this,Rt,null);k(this,Sn,null);k(this,Ol,null);k(this,lo,null);k(this,Fl,null);k(this,gp,"");k(this,co,null);k(this,ld,!1);k(this,aa,null);k(this,os,!1);k(this,yp,!1);A(this,lo,t.bitmapUrl),A(this,Fl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){kt.initialize(t,r)}static isHandlingMimeForPasting(t){return Dw.includes(t)}static paste(t,r){r.pasteEditor({mode:Ne.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:i,width:a,height:o,channels:i.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;u(this,Sn)&&(A(this,Rt,null),this._uiManager.imageManager.deleteId(u(this,Sn)),(t=u(this,co))==null||t.remove(),A(this,co,null),u(this,aa)&&(clearTimeout(u(this,aa)),A(this,aa,null))),super.remove()}rebuild(){if(!this.parent){u(this,Sn)&&T(this,vp,Wb).call(this);return}super.rebuild(),this.div!==null&&(u(this,Sn)&&u(this,co)===null&&T(this,vp,Wb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,Ol)||u(this,Rt)||u(this,lo)||u(this,Fl)||u(this,Sn)||u(this,ld))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,ld)||(u(this,Rt)?T(this,xp,Xb).call(this):T(this,vp,Wb).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(A(this,Sn,s),i&&A(this,Rt,i),A(this,ld,!1),T(this,xp,Xb).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,aa)!==null&&clearTimeout(u(this,aa)),A(this,aa,setTimeout(()=>{A(this,aa,null),T(this,Ev,ST).call(this)},200))}copyCanvas(t,r,s=!1){t||(t=224);const{width:i,height:a}=u(this,Rt),o=new Ai;let l=u(this,Rt),c=i,d=a,f=null;if(r){if(i>r||a>r){const N=Math.min(r/i,r/a);c=Math.floor(i*N),d=Math.floor(a*N)}f=document.createElement("canvas");const m=f.width=Math.ceil(c*o.sx),y=f.height=Math.ceil(d*o.sy);u(this,os)||(l=T(this,bp,Kb).call(this,m,y));const g=f.getContext("2d");g.filter=this._uiManager.hcmFilter;let w="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":jK.isDarkMode&&(w="#8f8f9d",v="#42414d");const x=15,b=x*o.sx,C=x*o.sy,_=new OffscreenCanvas(b*2,C*2),E=_.getContext("2d");E.fillStyle=w,E.fillRect(0,0,b*2,C*2),E.fillStyle=v,E.fillRect(0,0,b,C),E.fillRect(b,C,b,C),g.fillStyle=g.createPattern(_,"repeat"),g.fillRect(0,0,m,y),g.drawImage(l,0,0,l.width,l.height,0,0,m,y)}let p=null;if(s){let m,y;if(o.symmetric&&l.width<t&&l.height<t)m=l.width,y=l.height;else if(l=u(this,Rt),i>t||a>t){const v=Math.min(t/i,t/a);m=Math.floor(i*v),y=Math.floor(a*v),u(this,os)||(l=T(this,bp,Kb).call(this,m,y))}const w=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});w.drawImage(l,0,0,l.width,l.height,0,0,m,y),p={width:m,height:y,data:w.getImageData(0,0,m,y).data}}return{canvas:f,width:c,height:d,imageData:p}}static async deserialize(t,r,s){var w;let i=null,a=!1;if(t instanceof hB){const{data:{rect:v,rotation:x,id:b,structParent:C,popupRef:_,richText:E,contentsObj:N,creationDate:j,modificationDate:M},container:O,parent:{page:{pageNumber:L}},canvas:F}=t;let U,B;F?(delete t.canvas,{id:U,bitmap:B}=s.imageManager.getFromCanvas(O.id,F),F.remove()):(a=!0,t._hasNoCanvas=!0);const I=((w=await r._structTree.getAriaAttributes(`${TN}${b}`))==null?void 0:w.get("aria-label"))||"";i=t={annotationType:Ne.STAMP,bitmapId:U,bitmap:B,pageIndex:L-1,rect:v.slice(0),rotation:x,annotationElementId:b,id:b,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:C,popupRef:_,richText:E,comment:(N==null?void 0:N.str)||null,creationDate:j,modificationDate:M}}const o=await super.deserialize(t,r,s),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:f,isSvg:p,accessibilityData:m}=t;a?(s.addMissingCanvas(t.id,o),A(o,ld,!0)):f&&s.imageManager.isValidId(f)?(A(o,Sn,f),c&&A(o,Rt,c)):A(o,lo,d),A(o,os,p);const[y,g]=o.pageDimensions;return o.width=(l[2]-l[0])/y,o.height=(l[3]-l[1])/g,m&&(o.altTextData=m),o._initialData=i,t.comment&&o.setCommentData(t),A(o,yp,!!i),o}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:u(this,Sn),isSvg:u(this,os)});if(this.addComment(s),t)return s.bitmapUrl=T(this,wp,Yb).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:a}=this.serializeAltText(!1);if(!i&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=T(this,DS,YB).call(this,s);return l.isSame?null:(l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(r===null)return s;r.stamps||(r.stamps=new Map);const o=u(this,os)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!r.stamps.has(u(this,Sn)))r.stamps.set(u(this,Sn),{area:o,serialized:s}),s.bitmap=T(this,wp,Yb).call(this,!1);else if(u(this,os)){const l=r.stamps.get(u(this,Sn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=T(this,wp,Yb).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Rt=new WeakMap,Sn=new WeakMap,Ol=new WeakMap,lo=new WeakMap,Fl=new WeakMap,gp=new WeakMap,co=new WeakMap,ld=new WeakMap,aa=new WeakMap,os=new WeakMap,yp=new WeakMap,cd=new WeakSet,ng=function(t,r=!1){if(!t){this.remove();return}A(this,Rt,t.bitmap),r||(A(this,Sn,t.id),A(this,os,t.isSvg)),t.file&&A(this,gp,t.file.name),T(this,xp,Xb).call(this)},ud=new WeakSet,rg=function(){if(A(this,Ol,null),this._uiManager.enableWaiting(!1),!!u(this,co)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Rt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Rt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},vp=new WeakSet,Wb=function(){if(u(this,Sn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,Sn)).then(s=>T(this,cd,ng).call(this,s,!0)).finally(()=>T(this,ud,rg).call(this));return}if(u(this,lo)){const s=u(this,lo);A(this,lo,null),this._uiManager.enableWaiting(!0),A(this,Ol,this._uiManager.imageManager.getFromUrl(s).then(i=>T(this,cd,ng).call(this,i)).finally(()=>T(this,ud,rg).call(this)));return}if(u(this,Fl)){const s=u(this,Fl);A(this,Fl,null),this._uiManager.enableWaiting(!0),A(this,Ol,this._uiManager.imageManager.getFromFile(s).then(i=>T(this,cd,ng).call(this,i)).finally(()=>T(this,ud,rg).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Dw.join(",");const r=this._uiManager._signal;A(this,Ol,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),T(this,cd,ng).call(this,i)}s()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:r})}).finally(()=>T(this,ud,rg).call(this))),t.click()},xp=new WeakSet,Xb=function(){var c;const{div:t}=this;let{width:r,height:s}=u(this,Rt);const[i,a]=this.pageDimensions,o=.75;if(this.width)r=this.width*i,s=this.height*a;else if(r>o*i||s>o*a){const d=Math.min(o*i/r,o*a/s);r*=d,s*=d}this._uiManager.enableWaiting(!1);const l=A(this,co,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=r/i,this.height=s/a,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),T(this,Ev,ST).call(this),u(this,yp)||(this.parent.addUndoableEditor(this),A(this,yp,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,gp)&&this.div.setAttribute("aria-description",u(this,gp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},bp=new WeakSet,Kb=function(t,r){const{width:s,height:i}=u(this,Rt);let a=s,o=i,l=u(this,Rt);for(;a>2*t||o>2*r;){const c=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*r&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const f=new OffscreenCanvas(a,o);f.getContext("2d").drawImage(l,0,0,c,d,0,0,a,o),l=f.transferToImageBitmap()}return l},Ev=new WeakSet,ST=function(){const[t,r]=this.parentDimensions,{width:s,height:i}=this,a=new Ai,o=Math.ceil(s*t*a.sx),l=Math.ceil(i*r*a.sy),c=u(this,co);if(!c||c.width===o&&c.height===l)return;c.width=o,c.height=l;const d=u(this,os)?u(this,Rt):T(this,bp,Kb).call(this,o,l),f=c.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(d,0,0,d.width,d.height,0,0,o,l)},wp=new WeakSet,Yb=function(t){if(t){if(u(this,os)){const i=this._uiManager.imageManager.getSvgUrl(u(this,Sn));if(i)return i}const r=document.createElement("canvas");return{width:r.width,height:r.height}=u(this,Rt),r.getContext("2d").drawImage(u(this,Rt),0,0),r.toDataURL()}if(u(this,os)){const[r,s]=this.pageDimensions,i=Math.round(this.width*r*To.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*To.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,a);return o.getContext("2d").drawImage(u(this,Rt),0,0,u(this,Rt).width,u(this,Rt).height,0,0,i,a),o.transferToImageBitmap()}return structuredClone(u(this,Rt))},DS=new WeakSet,YB=function(t){var o;const{pageIndex:r,accessibilityData:{altText:s}}=this._initialData,i=t.pageIndex===r,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&a,isSameAltText:a}},J(wT,"_type","stamp"),J(wT,"_editorType",Ne.STAMP);var dd,Sp,Bl,zl,uo,Nr,$l,kp,Ap,gi,ho,kn,fo,Vl,Ep,pe,Ul,Cv,kT,OS,QB,Os,Mi,_v,AT,Tv,ET,Cp,Qb;const ni=class ni{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:s,accessibilityManager:i,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}){k(this,Cv);k(this,OS);k(this,Os);k(this,_v);k(this,Tv);k(this,Cp);k(this,dd,void 0);k(this,Sp,!1);k(this,Bl,null);k(this,zl,null);k(this,uo,null);k(this,Nr,new Map);k(this,$l,!1);k(this,kp,!1);k(this,Ap,!1);k(this,gi,null);k(this,ho,null);k(this,kn,null);k(this,fo,null);k(this,Vl,null);k(this,Ep,-1);k(this,pe,void 0);const f=[...u(ni,Ul).values()];if(!ni._initialized){ni._initialized=!0;for(const p of f)p.initialize(d,e)}e.registerEditorTypes(f),A(this,pe,e),this.pageIndex=t,this.div=r,A(this,dd,i),A(this,Bl,a),this.viewport=c,A(this,kn,l),this.drawLayer=o,this._structTree=s,u(this,pe).addLayer(this)}get isEmpty(){return u(this,Nr).size===0}get isInvisible(){return this.isEmpty&&u(this,pe).getMode()===Ne.NONE}updateToolbar(e){u(this,pe).updateToolbar(e)}updateMode(e=u(this,pe).getMode()){switch(T(this,Cp,Qb).call(this),e){case Ne.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ne.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ne.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Ne.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of u(ni,Ul).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,kn))==null?void 0:t.div)}setEditingState(e){u(this,pe).setEditingState(e)}addCommands(e){u(this,pe).addCommands(e)}cleanUndoStack(e){u(this,pe).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,Bl))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;A(this,Ap,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=u(this,Vl))==null||r.abort(),A(this,Vl,null);const e=new Set;for(const s of u(this,Cv,kT))s.enableEditing(),s.show(!0),s.annotationElementId&&(u(this,pe).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=u(this,Bl);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),u(this,pe).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}A(this,Ap,!1),u(this,pe)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(A(this,kp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,kn)&&!u(this,Vl)){A(this,Vl,new AbortController);const s=u(this,pe).combinedSignal(u(this,Vl));u(this,kn).div.addEventListener("pointerdown",i=>{const{clientX:o,clientY:l,timeStamp:c}=i,d=u(this,Ep);if(c-d>500){A(this,Ep,c);return}A(this,Ep,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const p=document.elementsFromPoint(o,l);if(f.toggle("getElements",!1),!this.div.contains(p[0]))return;let m;const y=new RegExp(`^${Xg}[0-9]+$`);for(const w of p)if(y.test(w.id)){m=w.id;break}if(!m)return;const g=u(this,Nr).get(m);(g==null?void 0:g.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),g.dblclick(i))},{signal:s,capture:!0})}const e=u(this,Bl);if(e){const s=new Map,i=new Map;for(const o of u(this,Cv,kT)){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(e);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else i.set(o.annotationElementId,o);(r=this.getEditableAnnotation(o.annotationElementId))==null||r.show(),o.remove()}const a=e.getEditableAnnotations();for(const o of a){const{id:l}=o.data;if(u(this,pe).isDeletedAnnotationElement(l)){o.updateEdited({deleted:!0});continue}let c=i.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=s.get(l),c&&(u(this,pe).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}T(this,Cp,Qb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of u(ni,Ul).values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,kp,!1)}getEditableAnnotation(e){var t;return((t=u(this,Bl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,pe).getActive()!==e&&u(this,pe).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,kn))!=null&&e.div&&!u(this,fo)){A(this,fo,new AbortController);const t=u(this,pe).combinedSignal(u(this,fo));u(this,kn).div.addEventListener("pointerdown",T(this,OS,QB).bind(this),{signal:t}),u(this,kn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,kn))!=null&&e.div&&u(this,fo)&&(u(this,fo).abort(),A(this,fo,null),u(this,kn).div.classList.remove("highlighting"))}enableClick(){if(u(this,zl))return;A(this,zl,new AbortController);const e=u(this,pe).combinedSignal(u(this,zl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,zl))==null||e.abort(),A(this,zl,null)}attach(e){u(this,Nr).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,pe).isDeletedAnnotationElement(t)&&u(this,pe).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,Nr).delete(e.id),(t=u(this,dd))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,kp)&&e.annotationElementId&&u(this,pe).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,pe).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,pe).addDeletedAnnotationElement(e.annotationElementId),kt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,pe).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,Ap)),u(this,pe).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,uo)&&(e._focusEventsAllowed=!1,A(this,uo,setTimeout(()=>{A(this,uo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,pe)._signal}),t.focus())},0))),e._structTreeParentId=(r=u(this,dd))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of u(this,Nr).values())if(t.uid===e)return t;return null}getNextId(){return u(this,pe).getId()}combinedSignal(e){return u(this,pe).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,Os,Mi))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,pe).updateMode(e.mode);const{offsetX:r,offsetY:s}=T(this,Tv,ET).call(this),i=this.getNextId(),a=T(this,_v,AT).call(this,{parent:this,id:i,x:r,y:s,uiManager:u(this,pe),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=u(ni,Ul).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,pe)))||null}createAndAddNewEditor(e,t,r={}){const s=this.getNextId(),i=T(this,_v,AT).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:u(this,pe),isCentered:t,...r});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(T(this,Tv,ET).call(this),!0,e)}setSelected(e){u(this,pe).setSelected(e)}toggleSelected(e){u(this,pe).toggleSelected(e)}unselect(e){u(this,pe).unselect(e)}pointerup(e){var s;const{isMac:t}=Cn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,$l)||(A(this,$l,!1),(s=u(this,Os,Mi))!=null&&s.isDrawer&&u(this,Os,Mi).supportMultipleDrawings))return;if(!u(this,Sp)){A(this,Sp,!0);return}const r=u(this,pe).getMode();if(r===Ne.STAMP||r===Ne.SIGNATURE){u(this,pe).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(u(this,pe).getMode()===Ne.HIGHLIGHT&&this.enableTextSelection(),u(this,$l)){A(this,$l,!1);return}const{isMac:t}=Cn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(A(this,$l,!0),(s=u(this,Os,Mi))!=null&&s.isDrawer){this.startDrawingSession(e);return}const r=u(this,pe).getActive();A(this,Sp,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,gi)){u(this,Os,Mi).startDrawing(this,u(this,pe),!1,e);return}u(this,pe).setCurrentDrawingSession(this),A(this,gi,new AbortController);const t=u(this,pe).combinedSignal(u(this,gi));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(A(this,ho,null),this.commitOrRemove())},{signal:t}),u(this,Os,Mi).startDrawing(this,u(this,pe),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&A(this,ho,t);return}u(this,ho)&&setTimeout(()=>{var t;(t=u(this,ho))==null||t.focus(),A(this,ho,null)},0)}endDrawingSession(e=!1){return u(this,gi)?(u(this,pe).setCurrentDrawingSession(null),u(this,gi).abort(),A(this,gi,null),A(this,ho,null),u(this,Os,Mi).endDrawing(e)):null}findNewParent(e,t,r){const s=u(this,pe).findParent(t,r);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return u(this,gi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,gi)&&u(this,Os,Mi).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,pe).getActive())==null?void 0:e.parent)===this&&(u(this,pe).commitOrRemove(),u(this,pe).setActiveEditor(null)),u(this,uo)&&(clearTimeout(u(this,uo)),A(this,uo,null));for(const r of u(this,Nr).values())(t=u(this,dd))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,u(this,Nr).clear(),u(this,pe).removeLayer(this)}render({viewport:e}){this.viewport=e,ac(this.div,e);for(const t of u(this,pe).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,pe).commitOrRemove(),T(this,Cp,Qb).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,ac(this.div,{rotation:r}),t!==r)for(const s of u(this,Nr).values())s.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,pe).viewParameters.realScale}};dd=new WeakMap,Sp=new WeakMap,Bl=new WeakMap,zl=new WeakMap,uo=new WeakMap,Nr=new WeakMap,$l=new WeakMap,kp=new WeakMap,Ap=new WeakMap,gi=new WeakMap,ho=new WeakMap,kn=new WeakMap,fo=new WeakMap,Vl=new WeakMap,Ep=new WeakMap,pe=new WeakMap,Ul=new WeakMap,Cv=new WeakSet,kT=function(){return u(this,Nr).size!==0?u(this,Nr).values():u(this,pe).getEditors(this.pageIndex)},OS=new WeakSet,QB=function(e){u(this,pe).unselectAll();const{target:t}=e;if(t===u(this,kn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,kn).div.contains(t)){const{isMac:r}=Cn.platform;if(e.button!==0||e.ctrlKey&&r)return;u(this,pe).showAllEditors("highlight",!0,!0),u(this,kn).div.classList.add("free"),this.toggleDrawing(),Uw.startHighlighting(this,u(this,pe).direction==="ltr",{target:u(this,kn).div,x:e.x,y:e.y}),u(this,kn).div.addEventListener("pointerup",()=>{u(this,kn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,pe)._signal}),e.preventDefault()}},Os=new WeakSet,Mi=function(){return u(ni,Ul).get(u(this,pe).getMode())},_v=new WeakSet,AT=function(e){const t=u(this,Os,Mi);return t?new t.prototype.constructor(e):null},Tv=new WeakSet,ET=function(){const{x:e,y:t,width:r,height:s}=this.boundingClientRect,i=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+s),c=(i+o)/2-e,d=(a+l)/2-t,[f,p]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:f,offsetY:p}},Cp=new WeakSet,Qb=function(){for(const e of u(this,Nr).values())e.isEmpty()&&e.remove()},J(ni,"_initialized",!1),k(ni,Ul,new Map([sT,pT,wT,Uw,bT].map(e=>[e._editorType,e])));let qw=ni;var yi,or,hd,Nv,FS,JB,Pv,CT,BS,ZB,jv,_T;const un=class un{constructor({pageIndex:e}){k(this,Pv);k(this,BS);k(this,jv);k(this,yi,null);k(this,or,new Map);k(this,hd,new Map);this.pageIndex=e}setParent(e){if(!u(this,yi)){A(this,yi,e);return}if(u(this,yi)!==e){if(u(this,or).size>0)for(const t of u(this,or).values())t.remove(),e.append(t);A(this,yi,e)}}static get _svgFactory(){return Oe(this,"_svgFactory",new t0)}draw(e,t=!1,r=!1){const s=ln(un,Nv)._++,i=T(this,Pv,CT).call(this),a=un._svgFactory.createElement("defs");i.append(a);const o=un._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,hd).set(s,o);const c=r?T(this,BS,ZB).call(this,a,l):null,d=un._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(i,e),u(this,or).set(s,i),{id:s,clipPathId:`url(#${c})`}}drawOutline(e,t){const r=ln(un,Nv)._++,s=T(this,Pv,CT).call(this),i=un._svgFactory.createElement("defs");s.append(i);const a=un._svgFactory.createElement("path");i.append(a);const o=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=un._svgFactory.createElement("mask");i.append(f),l=`mask_p${this.pageIndex}_${r}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const p=un._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const m=un._svgFactory.createElement("use");f.append(m),m.setAttribute("href",`#${o}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=un._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${o}`),l&&c.setAttribute("mask",`url(#${l})`);const d=c.cloneNode();return s.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),u(this,or).set(r,s),r}finalizeDraw(e,t){u(this,hd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:s,rootClass:i,path:a}=t,o=typeof e=="number"?u(this,or).get(e):e;if(o){if(r&&T(this,jv,_T).call(this,o,r),s&&T(l=un,FS,JB).call(l,o,s),i){const{classList:c}=o;for(const[d,f]of Object.entries(i))c.toggle(d,f)}if(a){const d=o.firstChild.firstChild;T(this,jv,_T).call(this,d,a)}}}updateParent(e,t){if(t===this)return;const r=u(this,or).get(e);r&&(u(t,yi).append(r),u(this,or).delete(e),u(t,or).set(e,r))}remove(e){u(this,hd).delete(e),u(this,yi)!==null&&(u(this,or).get(e).remove(),u(this,or).delete(e))}destroy(){A(this,yi,null);for(const e of u(this,or).values())e.remove();u(this,or).clear(),u(this,hd).clear()}};yi=new WeakMap,or=new WeakMap,hd=new WeakMap,Nv=new WeakMap,FS=new WeakSet,JB=function(e,[t,r,s,i]){const{style:a}=e;a.top=`${100*r}%`,a.left=`${100*t}%`,a.width=`${100*s}%`,a.height=`${100*i}%`},Pv=new WeakSet,CT=function(){const e=un._svgFactory.create(1,1,!0);return u(this,yi).append(e),e.setAttribute("aria-hidden",!0),e},BS=new WeakSet,ZB=function(e,t){const r=un._svgFactory.createElement("clipPath");e.append(r);const s=`clip_${t}`;r.setAttribute("id",s),r.setAttribute("clipPathUnits","objectBoundingBox");const i=un._svgFactory.createElement("use");return r.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),s},jv=new WeakSet,_T=function(e,t){for(const[r,s]of Object.entries(t))s===null?e.removeAttribute(r):e.setAttribute(r,s)},k(un,FS),k(un,Nv,0);let Gw=un;globalThis._pdfjsTestingUtils={HighlightOutliner:aT};globalThis.pdfjsLib={AbortException:_o,AnnotationEditorLayer:qw,AnnotationEditorParamsType:We,AnnotationEditorType:Ne,AnnotationEditorUIManager:oc,AnnotationLayer:BN,AnnotationMode:la,AnnotationType:Yt,applyOpacity:Q4,build:eB,ColorPicker:e0,createValidAbsoluteUrl:EN,CSSConstants:Y4,DOMSVGFactory:t0,DrawLayer:Gw,FeatureTest:Cn,fetchData:Wp,findContrastColor:J4,getDocument:IN,getFilenameFromUrl:W4,getPdfFilenameFromUrl:X4,getRGB:Xp,getUuid:_N,getXfaPageViewport:K4,GlobalWorkerOptions:$s,ImageKind:Sg,InvalidPDFException:Lw,isDataScheme:Xv,isPdfFile:Ck,isValidExplicitDest:j5,MathClamp:Yn,noContextMenu:gs,normalizeUnicode:q4,OPS:Op,OutputScale:Ai,PasswordResponses:U4,PDFDataRangeTransport:LN,PDFDateString:Qg,PDFWorker:Fp,PermissionFlag:V4,PixelsPerInch:To,RenderingCancelledException:Ek,renderRichText:PN,ResponseException:Kg,setLayerDimensions:ac,shadow:Oe,SignatureExtractor:sn,stopEvent:Bt,SupportedImageMimeTypes:Dw,TextLayer:Zg,TouchManager:Jg,updateUrlHash:CN,Util:ce,VerbosityLevel:qv,version:DN,XfaLayer:NN};const sQ=Object.freeze(Object.defineProperty({__proto__:null,AbortException:_o,AnnotationEditorLayer:qw,AnnotationEditorParamsType:We,AnnotationEditorType:Ne,AnnotationEditorUIManager:oc,AnnotationLayer:BN,AnnotationMode:la,AnnotationType:Yt,CSSConstants:Y4,ColorPicker:e0,DOMSVGFactory:t0,DrawLayer:Gw,FeatureTest:Cn,GlobalWorkerOptions:$s,ImageKind:Sg,InvalidPDFException:Lw,MathClamp:Yn,OPS:Op,OutputScale:Ai,PDFDataRangeTransport:LN,PDFDateString:Qg,PDFWorker:Fp,PasswordResponses:U4,PermissionFlag:V4,PixelsPerInch:To,RenderingCancelledException:Ek,ResponseException:Kg,SignatureExtractor:sn,SupportedImageMimeTypes:Dw,TextLayer:Zg,TouchManager:Jg,Util:ce,VerbosityLevel:qv,XfaLayer:NN,applyOpacity:Q4,build:eB,createValidAbsoluteUrl:EN,fetchData:Wp,findContrastColor:J4,getDocument:IN,getFilenameFromUrl:W4,getPdfFilenameFromUrl:X4,getRGB:Xp,getUuid:_N,getXfaPageViewport:K4,isDataScheme:Xv,isPdfFile:Ck,isValidExplicitDest:j5,noContextMenu:gs,normalizeUnicode:q4,renderRichText:PN,setLayerDimensions:ac,shadow:Oe,stopEvent:Bt,updateUrlHash:CN,version:DN},Symbol.toStringTag,{value:"Module"}));var SI=Object.prototype.hasOwnProperty;function kI(n,e,t){for(t of n.keys())if(kh(t,e))return t}function kh(n,e){var t,r,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&kh(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(s=r,s&&typeof s=="object"&&(s=kI(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(s=r[0],s&&typeof s=="object"&&(s=kI(e,s),!s)||!kh(r[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(SI.call(n,t)&&++r&&!SI.call(e,t)||!(t in e)||!kh(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function Jv(n){let e=!1;return{promise:new Promise((r,s)=>{n.then(i=>!e&&r(i)).catch(i=>!e&&s(i))}),cancel(){e=!0}}}const iQ=["onCopy","onCut","onPaste"],aQ=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],oQ=["onFocus","onBlur"],lQ=["onInput","onInvalid","onReset","onSubmit"],cQ=["onLoad","onError"],uQ=["onKeyDown","onKeyPress","onKeyUp"],dQ=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],hQ=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],fQ=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],pQ=["onSelect"],mQ=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],gQ=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],yQ=["onScroll"],vQ=["onWheel"],xQ=["onAnimationStart","onAnimationEnd","onAnimationIteration"],bQ=["onTransitionEnd"],wQ=["onToggle"],SQ=["onChange"],kQ=[...iQ,...aQ,...oQ,...lQ,...cQ,...uQ,...dQ,...hQ,...fQ,...pQ,...mQ,...gQ,...yQ,...vQ,...xQ,...bQ,...SQ,...wQ];function ez(n,e){const t={};for(const r of kQ){const s=n[r];s&&(e?t[r]=i=>s(i,e(r)):t[r]=s)}return t}var AQ=!0,dE="Invariant failed";function pt(n,e){if(!n){if(AQ)throw new Error(dE);var t=typeof e=="function"?e():e,r=t?"".concat(dE,": ").concat(t):dE;throw new Error(r)}}var EQ=function(){},CQ=EQ;const Jn=No(CQ),_Q=S.createContext(null),tz=_Q,TQ="noopener noreferrer nofollow";class NQ{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return pt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){pt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||TQ,e.target=r?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{pt(this.pdfDocument,"PDF document not loaded."),pt(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{pt(Array.isArray(t),`"${t}" is not a valid destination array.`);const r=t[0];new Promise(s=>{pt(this.pdfDocument,"PDF document not loaded."),r instanceof Object?this.pdfDocument.getPageIndex(r).then(i=>{s(i)}).catch(()=>{pt(!1,`"${r}" is not a valid page reference.`)}):typeof r=="number"?s(r):pt(!1,`"${r}" is not a valid destination reference.`)}).then(s=>{const i=s+1;pt(this.pdfViewer,"PDF viewer is not initialized."),pt(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:i})})})}goToPage(e){const t=e-1;pt(this.pdfViewer,"PDF viewer is not initialized."),pt(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Ah({children:n,type:e}){return h.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const PQ={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},AI=PQ;function jQ(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Bp(){return S.useReducer(jQ,{value:void 0,error:void 0})}const Nk=typeof window<"u",nz=Nk&&window.location.protocol==="file:";function RQ(n){return typeof n<"u"}function xc(n){return RQ(n)&&n!==null}function MQ(n){return typeof n=="string"}function IQ(n){return n instanceof ArrayBuffer}function LQ(n){return pt(Nk,"isBlob can only be used in a browser environment"),n instanceof Blob}function TT(n){return MQ(n)&&/^data:/.test(n)}function EI(n){pt(TT(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function DQ(){return Nk&&window.devicePixelRatio||1}const rz="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function CI(){Jn(!nz,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${rz}`)}function OQ(){Jn(!nz,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${rz}`)}function kd(n){n!=null&&n.cancel&&n.cancel()}function NT(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function FQ(n){return n.name==="RenderingCancelledException"}function BQ(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:i}=s.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:zQ}=sQ,$Q=(n,e)=>{switch(e){case AI.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case AI.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function _I(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const VQ=S.forwardRef(function({children:e,className:t,error:r="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:i,file:a,inputRef:o,imageResourcesPath:l,loading:c="Loading PDF",noData:d="No PDF file specified.",onItemClick:f,onLoadError:p,onLoadProgress:m,onLoadSuccess:y,onPassword:g=$Q,onSourceError:w,onSourceSuccess:v,options:x,renderMode:b,rotate:C,scale:_,...E},N){const[j,M]=Bp(),{value:O,error:L}=j,[F,U]=Bp(),{value:B,error:I}=F,D=S.useRef(new NQ),z=S.useRef([]),V=S.useRef(void 0),q=S.useRef(void 0);a&&a!==V.current&&_I(a)&&(Jn(!kh(a,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=a),x&&x!==q.current&&(Jn(!kh(x,q.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),q.current=x);const P=S.useRef({scrollPageIntoView:ge=>{const{dest:Z,pageNumber:le,pageIndex:ye=le-1}=ge;if(f){f({dest:Z,pageIndex:ye,pageNumber:le});return}const Ve=z.current[ye];if(Ve){Ve.scrollIntoView();return}Jn(!1,`An internal link leading to page ${le} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});S.useImperativeHandle(N,()=>({linkService:D,pages:z,viewer:P}),[]);function Y(){v&&v()}function K(){L&&(Jn(!1,L.toString()),w&&w(L))}function R(){M({type:"RESET"})}S.useEffect(R,[a,M]);const ie=S.useCallback(async()=>{if(!a)return null;if(typeof a=="string")return TT(a)?{data:EI(a)}:(CI(),{url:a});if(a instanceof zQ)return{range:a};if(IQ(a))return{data:a};if(Nk&&LQ(a))return{data:await BQ(a)};if(pt(typeof a=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),pt(_I(a),"Invalid parameter object: need either .data, .range or .url"),"url"in a&&typeof a.url=="string"){if(TT(a.url)){const{url:ge,...Z}=a;return{data:EI(ge),...Z}}CI()}return a},[a]);S.useEffect(()=>{const ge=Jv(ie());return ge.promise.then(Z=>{M({type:"RESOLVE",value:Z})}).catch(Z=>{M({type:"REJECT",error:Z})}),()=>{kd(ge)}},[ie,M]),S.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){K();return}Y()}},[O]);function ke(){B&&(y&&y(B),z.current=new Array(B.numPages),D.current.setDocument(B))}function me(){I&&(Jn(!1,I.toString()),p&&p(I))}S.useEffect(function(){U({type:"RESET"})},[U,O]),S.useEffect(function(){if(!O)return;const Z=x?{...O,...x}:O,le=IN(Z);m&&(le.onProgress=m),g&&(le.onPassword=g);const ye=le,Ve=ye.promise.then(Nt=>{U({type:"RESOLVE",value:Nt})}).catch(Nt=>{ye.destroyed||U({type:"REJECT",error:Nt})});return()=>{Ve.finally(()=>ye.destroy())}},[x,U,O]),S.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){me();return}ke()}},[B]),S.useEffect(function(){D.current.setViewer(P.current),D.current.setExternalLinkRel(s),D.current.setExternalLinkTarget(i)},[s,i]);const ve=S.useCallback((ge,Z)=>{z.current[ge]=Z},[]),Ke=S.useCallback(ge=>{delete z.current[ge]},[]),Re=S.useMemo(()=>({imageResourcesPath:l,linkService:D.current,onItemClick:f,pdf:B,registerPage:ve,renderMode:b,rotate:C,scale:_,unregisterPage:Ke}),[l,f,B,ve,b,C,_,Ke]),xe=S.useMemo(()=>ez(E,()=>B),[E,B]);function He(){function ge(le){return!!(le!=null&&le.pdf)}if(!ge(Re))throw new Error("pdf is undefined");const Z=typeof e=="function"?e(Re):e;return h.jsx(tz.Provider,{value:Re,children:Z})}function Be(){return a?B==null?h.jsx(Ah,{type:"loading",children:typeof c=="function"?c():c}):B===!1?h.jsx(Ah,{type:"error",children:typeof r=="function"?r():r}):He():h.jsx(Ah,{type:"no-data",children:typeof d=="function"?d():d})}return h.jsx("div",{className:Hp("react-pdf__Document",t),ref:o,...xe,children:Be()})}),UQ=VQ;function sz(){return S.useContext(tz)}function iz(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(i){for(var a=0,o=t;a<o.length;a++){var l=o[a];typeof l=="function"?l(i):l&&(l.current=i)}}}const HQ=S.createContext(null),az=HQ;function Pk(){return S.useContext(az)}function qQ(){const n=sz(),e=Pk();pt(e,"Unable to find Page context.");const t={...n,...e},{imageResourcesPath:r,linkService:s,onGetAnnotationsError:i,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:l,page:c,pdf:d,renderForms:f,rotate:p,scale:m=1}=t;pt(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),pt(c,"Attempted to load page annotations, but no page was specified."),pt(s,"Attempted to load page annotations, but no linkService was specified.");const[y,g]=Bp(),{value:w,error:v}=y,x=S.useRef(null);Jn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function b(){w&&a&&a(w)}function C(){v&&(Jn(!1,v.toString()),i&&i(v))}S.useEffect(function(){g({type:"RESET"})},[g,c]),S.useEffect(function(){if(!c)return;const M=Jv(c.getAnnotations()),O=M;return M.promise.then(L=>{g({type:"RESOLVE",value:L})}).catch(L=>{g({type:"REJECT",error:L})}),()=>{kd(O)}},[g,c]),S.useEffect(()=>{if(w!==void 0){if(w===!1){C();return}b()}},[w]);function _(){l&&l()}function E(j){Jn(!1,`${j}`),o&&o(j)}const N=S.useMemo(()=>c.getViewport({scale:m,rotation:p}),[c,p,m]);return S.useEffect(function(){if(!d||!c||!s||!w)return;const{current:M}=x;if(!M)return;const O=N.clone({dontFlip:!0}),L={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:M,l10n:null,linkService:s,page:c,structTreeLayer:null,viewport:O},F={annotations:w,annotationStorage:d.annotationStorage,div:M,imageResourcesPath:r,linkService:s,page:c,renderForms:f,viewport:O};M.innerHTML="";try{new BN(L).render(F),_()}catch(U){E(U)}return()=>{}},[w,r,s,c,d,f,N]),h.jsx("div",{className:Hp("react-pdf__Page__annotations","annotationLayer"),ref:x})}const oz={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},GQ=/^H(\d+)$/;function WQ(n){return n in oz}function jk(n){return"children"in n}function lz(n){return jk(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function XQ(n){const e={};if(jk(n)){const{role:t}=n,r=t.match(GQ);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(WQ(t)){const s=oz[t];s&&(e.role=s)}}return e}function cz(n){const e={};if(jk(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),lz(n)){const[t]=n.children;if(t){const r=cz(t);return{...e,...r}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function KQ(n){return n?{...XQ(n),...cz(n)}:null}function uz({className:n,node:e}){const t=S.useMemo(()=>KQ(e),[e]),r=S.useMemo(()=>!jk(e)||lz(e)?null:e.children.map((s,i)=>h.jsx(uz,{node:s},i)),[e]);return h.jsx("span",{className:n,...t,children:r})}function YQ(){const n=Pk();pt(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,s]=Bp(),{value:i,error:a}=r,{customTextRenderer:o,page:l}=n;function c(){i&&t&&t(i)}function d(){a&&(Jn(!1,a.toString()),e&&e(a))}return S.useEffect(function(){s({type:"RESET"})},[s,l]),S.useEffect(function(){if(o||!l)return;const p=Jv(l.getStructTree()),m=p;return p.promise.then(y=>{s({type:"RESOLVE",value:y})}).catch(y=>{s({type:"REJECT",error:y})}),()=>kd(m)},[o,l,s]),S.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}c()}},[i]),i?h.jsx(uz,{className:"react-pdf__Page__structTree structTree",node:i}):null}const TI=la;function QQ(n){const e=Pk();pt(e,"Unable to find Page context.");const t={...e,...n},{_className:r,canvasBackground:s,devicePixelRatio:i=DQ(),onRenderError:a,onRenderSuccess:o,page:l,renderForms:c,renderTextLayer:d,rotate:f,scale:p}=t,{canvasRef:m}=n;pt(l,"Attempted to render page canvas, but no page was specified.");const y=S.useRef(null);function g(){l&&o&&o(NT(l,p))}function w(C){FQ(C)||(Jn(!1,C.toString()),a&&a(C))}const v=S.useMemo(()=>l.getViewport({scale:p*i,rotation:f}),[i,l,f,p]),x=S.useMemo(()=>l.getViewport({scale:p,rotation:f}),[l,f,p]);S.useEffect(function(){if(!l)return;l.cleanup();const{current:_}=y;if(!_)return;_.width=v.width,_.height=v.height,_.style.width=`${Math.floor(x.width)}px`,_.style.height=`${Math.floor(x.height)}px`,_.style.visibility="hidden";const E={annotationMode:c?TI.ENABLE_FORMS:TI.ENABLE,canvas:_,canvasContext:_.getContext("2d",{alpha:!1}),viewport:v};s&&(E.background=s);const N=l.render(E),j=N;return N.promise.then(()=>{_.style.visibility="",g()}).catch(w),()=>kd(j)},[s,l,c,v,x]);const b=S.useCallback(()=>{const{current:C}=y;C&&(C.width=0,C.height=0)},[]);return S.useEffect(()=>b,[b]),h.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:iz(m,y),style:{display:"block",userSelect:"none"},children:d?h.jsx(YQ,{}):null})}function JQ(n){return"str"in n}function ZQ(){const n=Pk();pt(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:i,page:a,pageIndex:o,pageNumber:l,rotate:c,scale:d}=n;pt(a,"Attempted to load page text content, but no page was specified.");const[f,p]=Bp(),{value:m,error:y}=f,g=S.useRef(null);Jn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function w(){m&&r&&r(m)}function v(){y&&(Jn(!1,y.toString()),t&&t(y))}S.useEffect(function(){p({type:"RESET"})},[a,p]),S.useEffect(function(){if(!a)return;const j=Jv(a.getTextContent()),M=j;return j.promise.then(O=>{p({type:"RESOLVE",value:O})}).catch(O=>{p({type:"REJECT",error:O})}),()=>kd(M)},[a,p]),S.useEffect(()=>{if(m!==void 0){if(m===!1){v();return}w()}},[m]);const x=S.useCallback(()=>{i&&i()},[i]),b=S.useCallback(N=>{Jn(!1,N.toString()),s&&s(N)},[s]);function C(){const N=g.current;N&&N.classList.add("selecting")}function _(){const N=g.current;N&&N.classList.remove("selecting")}const E=S.useMemo(()=>a.getViewport({scale:d,rotation:c}),[a,c,d]);return S.useLayoutEffect(function(){if(!a||!m)return;const{current:j}=g;if(!j)return;j.innerHTML="";const M=a.streamTextContent({includeMarkedContent:!0}),O={container:j,textContentSource:M,viewport:E},L=new Zg(O),F=L;return L.render().then(()=>{const U=document.createElement("div");U.className="endOfContent",j.append(U);const B=j.querySelectorAll('[role="presentation"]');if(e){let I=0;m.items.forEach((D,z)=>{if(!JQ(D))return;const V=B[I];if(!V)return;const q=e({pageIndex:o,pageNumber:l,itemIndex:z,...D});V.innerHTML=q,I+=D.str&&D.hasEOL?2:1})}x()}).catch(b),()=>kd(F)},[e,b,x,a,o,l,m,E]),h.jsx("div",{className:Hp("react-pdf__Page__textContent","textLayer"),onMouseUp:_,onMouseDown:C,ref:g})}const NI=1;function eJ(n){const t={...sz(),...n},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:i,canvasRef:a,children:o,className:l,customRenderer:c,customTextRenderer:d,devicePixelRatio:f,error:p="Failed to load the page.",height:m,inputRef:y,loading:g="Loading page",noData:w="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:x,onGetStructTreeError:b,onGetStructTreeSuccess:C,onGetTextError:_,onGetTextSuccess:E,onLoadError:N,onLoadSuccess:j,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:O,onRenderError:L,onRenderSuccess:F,onRenderTextLayerError:U,onRenderTextLayerSuccess:B,pageIndex:I,pageNumber:D,pdf:z,registerPage:V,renderAnnotationLayer:q=!0,renderForms:P=!1,renderMode:Y="canvas",renderTextLayer:K=!0,rotate:R,scale:ie=NI,unregisterPage:ke,width:me,...ve}=t,[Ke,Re]=Bp(),{value:xe,error:He}=Ke,Be=S.useRef(null);pt(z,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ge=xc(D)?D-1:I??null,Z=D??(xc(I)?I+1:null),le=R??(xe?xe.rotate:null),ye=S.useMemo(()=>{if(!xe)return null;let $=1;const X=ie??NI;if(me||m){const oe=xe.getViewport({scale:1,rotation:le});me?$=me/oe.width:m&&($=m/oe.height)}return X*$},[m,xe,le,ie,me]);S.useEffect(function(){return()=>{xc(ge)&&s&&ke&&ke(ge)}},[s,z,ge,ke]);function Ve(){if(j){if(!xe||!ye)return;j(NT(xe,ye))}if(s&&V){if(!xc(ge)||!Be.current)return;V(ge,Be.current)}}function Nt(){He&&(Jn(!1,He.toString()),N&&N(He))}S.useEffect(function(){Re({type:"RESET"})},[Re,z,ge]),S.useEffect(function(){if(!z||!Z)return;const X=Jv(z.getPage(Z)),oe=X;return X.promise.then(qe=>{Re({type:"RESOLVE",value:qe})}).catch(qe=>{Re({type:"REJECT",error:qe})}),()=>kd(oe)},[Re,z,Z]),S.useEffect(()=>{if(xe!==void 0){if(xe===!1){Nt();return}Ve()}},[xe,ye]);const De=S.useMemo(()=>xc(ge)&&Z&&xc(le)&&xc(ye)?{_className:r,canvasBackground:i,customTextRenderer:d,devicePixelRatio:f,onGetAnnotationsError:v,onGetAnnotationsSuccess:x,onGetStructTreeError:b,onGetStructTreeSuccess:C,onGetTextError:_,onGetTextSuccess:E,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:O,onRenderError:L,onRenderSuccess:F,onRenderTextLayerError:U,onRenderTextLayerSuccess:B,page:xe,pageIndex:ge,pageNumber:Z,renderForms:P,renderTextLayer:K,rotate:le,scale:ye}:null,[r,i,d,f,v,x,b,C,_,E,M,O,L,F,U,B,xe,ge,Z,P,K,le,ye]),Br=S.useMemo(()=>ez(ve,()=>xe&&(ye?NT(xe,ye):void 0)),[ve,xe,ye]),tr=`${ge}@${ye}/${le}`;function zr(){switch(Y){case"custom":return pt(c,'renderMode was set to "custom", but no customRenderer was passed.'),h.jsx(c,{},`${tr}_custom`);case"none":return null;case"canvas":default:return h.jsx(QQ,{canvasRef:a},`${tr}_canvas`)}}function Ks(){return K?h.jsx(ZQ,{},`${tr}_text`):null}function ma(){return q?h.jsx(qQ,{},`${tr}_annotations`):null}function Ys(){function $(oe){return!!(oe!=null&&oe.page)}if(!$(De))throw new Error("page is undefined");const X=typeof o=="function"?o(De):o;return h.jsxs(az.Provider,{value:De,children:[zr(),Ks(),ma(),X]})}function _i(){return Z?z===null||xe===void 0||xe===null?h.jsx(Ah,{type:"loading",children:typeof g=="function"?g():g}):z===!1||xe===!1?h.jsx(Ah,{type:"error",children:typeof p=="function"?p():p}):Ys():h.jsx(Ah,{type:"no-data",children:typeof w=="function"?w():w})}return h.jsx("div",{className:Hp(r,l),"data-page-number":Z,ref:iz(y,Be),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ye}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Br,children:_i()})}OQ();$s.workerSrc="pdf.worker.mjs";const tJ={idle:"Para activar la experiencia WebAR necesitamos permiso para usar tu cmara.",requesting:"Solicitando acceso a la cmara",granted:"Cmara lista. Si no ves la previsualizacin, asegrate de apuntar a la taza.",error:"No pudimos usar la cmara de tu dispositivo."},nJ=({onGranted:n,className:e="",copy:t={},variant:r="card"})=>{const[s,i]=S.useState("idle"),a=S.useMemo(()=>({...tJ,...t}),[t]),o=async()=>{var c;if(!((c=navigator.mediaDevices)!=null&&c.getUserMedia)){i("error");return}i("requesting");try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(f=>f.stop()),i("granted"),n==null||n()}catch(d){console.error("[CameraPermissionPrompt] Error al iniciar cmara:",d),i("error")}},l=r==="overlay"?"w-full max-w-xs rounded-3xl border border-white/20 bg-black/70 p-6 text-center space-y-4 text-slate-200 backdrop-blur":"rounded-2xl border border-white/10 bg-black/40 p-4 space-y-3 text-slate-300/90";return h.jsxs("div",{className:`${l} ${e}`,children:[h.jsx("p",{className:"text-sm leading-relaxed",children:a[s]}),s!=="granted"?h.jsx("button",{type:"button",onClick:o,className:"inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold bg-purple-500/80 hover:bg-purple-500 transition text-white disabled:opacity-50",disabled:s==="requesting",children:s==="requesting"?"Abriendo cmara":"Activar cmara"}):null]})},rJ="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js";let hE=null;function sJ(){var n,e;return typeof window>"u"?Promise.reject(new Error("MindAR solo est disponible en el navegador.")):(e=(n=window.MINDAR)==null?void 0:n.IMAGE)!=null&&e.MindARThree?Promise.resolve(window.MINDAR.IMAGE):(hE||(hE=jo(()=>import(rJ),[]).then(t=>{var r,s;if(t!=null&&t.MindARThree)return t;if((s=(r=window.MINDAR)==null?void 0:r.IMAGE)!=null&&s.MindARThree)return window.MINDAR.IMAGE;throw new Error("MindAR no se inicializ correctamente.")}).catch(t=>{throw console.error("[loadMindAR] Error al importar MindAR:",t),t})),hE)}const iJ="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js";let fE=null;function aJ(){return typeof window>"u"?Promise.reject(new Error("Three.js solo est disponible en el navegador.")):window.__THREE_INSTANCE__?Promise.resolve(window.__THREE_INSTANCE__):(fE||(fE=jo(()=>import(iJ),[]).then(n=>(window.__THREE_INSTANCE__=n,n))),fE)}const oJ=n=>{const e=new n.Group,t=new n.Mesh(new n.IcosahedronGeometry(.35,1),new n.MeshStandardMaterial({color:"#c084fc",emissive:"#6b21a8",metalness:.2,roughness:.35,transparent:!0,opacity:.9})),r=new n.Mesh(new n.TorusGeometry(.5,.035,14,48),new n.MeshBasicMaterial({color:"#e879f9",transparent:!0,opacity:.65}));r.rotation.x=Math.PI/2;const s=new n.Mesh(new n.SphereGeometry(.18,16,16),new n.MeshBasicMaterial({color:"#a5b4fc",transparent:!0,opacity:.35}));return e.add(t),e.add(r),e.add(s),e},lJ=S.forwardRef(({targetSrc:n="/assets/targets.mind",isCameraReady:e=!1,className:t="",message:r="La taza te escucha.",overlay:s=null},i)=>{const a=S.useMemo(()=>{if(!n||/^(https?:)?\/\//i.test(n))return n;const y="/";if(n.startsWith(y))return n;const g=y.endsWith("/")?y:`${y}/`,w=n.replace(/^\/+/,"");return`${g}${w}`},[n]),o=S.useRef(null),l=S.useRef(null),[c,d]=S.useState("idle"),[f,p]=S.useState("");return S.useEffect(()=>{if(!e||!o.current||!a)return;let m=null,y=null,g=null,w=null,v=null;return(async()=>{d("loading"),p("");try{const b=await aJ(),C=await sJ();m=new C.MindARThree({container:o.current,imageTargetSrc:a,uiLoading:"no",uiError:"no",uiScanning:"no"});const{renderer:_,scene:E,camera:N}=m;y=_;const j=new b.HemisphereLight("#ffffff","#333344",1);E.add(j);const M=new b.DirectionalLight("#ffffff",.8);M.position.set(.5,1,.5),E.add(M);const O=m.addAnchor(0),{GLTFLoader:L}=await jo(()=>import("./GLTFLoader-ab5cd9e3.js"),[]),F=new L;let U=null;try{U=(await F.loadAsync("/webar/taza/gato-abstracto.glb")).scene}catch(D){console.warn("[MindARScene] No se pudo cargar /webar/taza/gato-abstracto.glb, usando modelo fallback.",D),U=oJ(b)}v=U,v.scale.set(.6,.6,.6),v.position.set(0,.3,0),v.rotation.set(0,Math.PI,0),O.group.add(v),await m.start();const B=m.video;B&&!o.current.contains(B)&&(B.setAttribute("playsinline","true"),B.muted=!0,B.style.position="absolute",B.style.top="0",B.style.left="0",B.style.width="100%",B.style.height="100%",B.style.objectFit="cover",B.style.zIndex="0",B.style.display="block",o.current.appendChild(B),w=B,l.current=B),d("running");const I=new b.Clock;g=()=>{const D=I.getElapsedTime();if(v){v.rotation.y=D*.4;const z=.6+Math.sin(D*.8)*.03;v.scale.set(z,z,z)}y.render(E,N)},y.setAnimationLoop(g)}catch(b){console.error("[MindARScene] Error al iniciar AR:",b),p((b==null?void 0:b.message)??"No pudimos iniciar la experiencia AR."),d("error")}})(),()=>{var b;y&&g&&y.setAnimationLoop(null),m&&(m.stop(),(b=m.renderer)==null||b.dispose()),l.current=null,w&&w.parentElement===o.current&&o.current.removeChild(w)}},[e,a]),S.useEffect(()=>{},[r]),S.useImperativeHandle(i,()=>({async captureFrame(){const m=l.current;if(!m||m.videoWidth===0||m.videoHeight===0)return null;const y=document.createElement("canvas");return y.width=m.videoWidth,y.height=m.videoHeight,y.getContext("2d").drawImage(m,0,0,y.width,y.height),await new Promise(w=>{y.toBlob(v=>w(v),"image/jpeg",.95)})}})),h.jsxs("div",{className:`relative w-full bg-transparent rounded-3xl overflow-hidden ${t}`,"data-ar-container":"true",children:[h.jsx("div",{ref:o,className:"absolute inset-0"}),c==="idle"&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 text-sm pointer-events-none",children:"Esperando a que actives la cmara"}),c==="loading"&&h.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-200 text-sm bg-black/40 pointer-events-none",children:[h.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-purple-300 border-t-transparent mb-3"}),"Preparando portal..."]}),c==="error"&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center px-6 text-sm text-red-300 bg-black/70 pointer-events-none",children:f}),s&&h.jsx("div",{className:"absolute inset-0",children:typeof s=="function"?s():s})]})}),PI=["La taza te escucha."],jI=({targetSrc:n="/assets/targets.mind",phrases:e=PI,onExit:t})=>{const[r,s]=S.useState(!1),[i,a]=S.useState(0),o=S.useRef(null),l=S.useMemo(()=>Array.isArray(e)&&e.length>0?e:PI,[e]);S.useEffect(()=>{a(0)},[n]);const c=()=>{a(y=>(y+1)%l.length)},d=()=>{t==null||t()},f=S.useCallback(async()=>{var y,g;if(!((y=o.current)!=null&&y.captureFrame)){Fe({description:"La cmara an no est lista para capturar."});return}try{const w=await o.current.captureFrame();if(!w){Fe({description:"No pudimos obtener la captura. Intenta de nuevo."});return}const v=new File([w],"miniverso-taza.jpg",{type:"image/jpeg"}),x="#EstoNoEsUnaTaza  Comparte tu portal y etiqueta a @gatoencerradoai para aparecer en la galera.";if(navigator.share&&((g=navigator.canShare)!=null&&g.call(navigator,{files:[v]})))await navigator.share({files:[v],title:"Miniverso Taza",text:x});else{const b=URL.createObjectURL(w),C=document.createElement("a");C.href=b,C.download="miniverso-taza.jpg",document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(b),Fe({description:"Guardamos la captura. Comprtela desde tu galera con #EstoNoEsUnaTaza."})}}catch(w){console.error("[ARExperience] Error al compartir captura:",w),Fe({description:"No pudimos compartir la captura. Intenta ms tarde."})}},[]),p="rounded-full bg-black/55 text-white p-3 shadow-lg border border-white/15 hover:bg-black/70 transition backdrop-blur",m=r?h.jsx("div",{className:"absolute inset-x-0 bottom-5 flex justify-center pointer-events-none",children:h.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[h.jsx("button",{type:"button",onClick:c,className:p,"aria-label":"Nueva frase",children:h.jsx(_8,{size:18})}),h.jsx("button",{type:"button",onClick:f,className:p,"aria-label":"Compartir captura",children:h.jsx(N8,{size:18})}),h.jsx("button",{type:"button",onClick:d,className:p,"aria-label":"Salir de AR",children:h.jsx(ok,{size:18})})]})}):h.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-6",children:h.jsx(nJ,{onGranted:()=>s(!0),variant:"overlay",copy:{idle:"Activa tu cmara para revelar la frase de tu taza."}})});return h.jsxs("section",{className:"space-y-4 -mx-4 sm:mx-0",children:[h.jsx(lJ,{ref:o,targetSrc:n,isCameraReady:r,message:l[i],className:"w-full min-h-[75vh] sm:min-h-[80vh]",overlay:m}),h.jsx("p",{className:"text-sm text-slate-400/80 px-4 sm:px-0",children:"Si el marcador no se detecta de inmediato, ajusta la iluminacin y mantn la taza completa dentro del encuadre."})]})},cJ=(n=[])=>{const e=[...n];for(let t=e.length-1;t>0;t-=1){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},pE=n=>n?String(n).toLowerCase().trim():"",Ww=(n,e)=>{for(const t of e)if(n[t])return n[t];return""},mE=(n,e)=>({id:n.id??`audio-${e}`,label:n.label??n.title??"Pista",title:n.title??n.label??"",url_audio:Ww(n,["url_audio","audio_url","audioUrl","url"])}),gE=(n,e)=>({id:n.id??`poema-${e}`,label:n.label??n.title??"Poema ritual",title:n.title??n.label??"",poem_text:n.poem_text??n.text??n.poemText??"",poem_lines:n.poem_lines??null}),yE=(n,e)=>({id:n.id??`video-${e}`,url_video:Ww(n,["url_video","video_url","videoUrl","url"]),title:n.title??n.label??"Video ritual",artist:n.artist??n.author??"Residencia #GatoEncerrado"}),RI=(n=[])=>n.some(t=>t.id==="silencio")?n:[{id:"silencio",label:"Silencio",title:"Silencio",url_audio:""},...n],uJ=(n=[])=>{var t;const e=n.find(r=>r.id==="silencio");return e?e.id:((t=n[0])==null?void 0:t.id)??""},dJ=({fallbackVideoUrl:n,fallbackVideoTitle:e="Video ritual",fallbackVideoArtist:t="Residencia #GatoEncerrado",fallbackAudioOptions:r=[],fallbackPoemOptions:s=[],videoLimit:i=null,audioLimit:a=null,poemLimit:o=null,fragmentLines:l=4}={})=>{const[c,d]=S.useState(!0),[f,p]=S.useState(""),[m,y]=S.useState([]),[g,w]=S.useState(0),[v,x]=S.useState([]),[b,C]=S.useState([]);S.useState([]),S.useEffect(()=>{let M=!1;return(async()=>{d(!0),p("");try{const{data:L,error:F}=await wt.from("sonoro_media").select("*");if(M)return;if(F)throw F;const U=L??[],B=U.filter(P=>{const Y=pE(P.kind||P.type),K=Ww(P,["url_video","video_url","videoUrl","url"]);return Y==="video"&&!!K}).map(yE),I=U.filter(P=>{const Y=pE(P.kind||P.type),K=Ww(P,["url_audio","audio_url","audioUrl","url"]);return Y==="audio"&&!!K}).map(mE),D=U.filter(P=>{const Y=pE(P.kind||P.type),K=typeof P.poem_text=="string"&&P.poem_text.trim()!==""||Array.isArray(P.poem_lines)&&P.poem_lines.length>0||typeof P.text=="string"&&P.text.trim()!==""||typeof P.poemText=="string"&&P.poemText.trim()!=="";return(Y==="poema"||Y==="poem"||Y==="poetry")&&K}).map((P,Y)=>{const K=gE(P,Y);if(!K.poem_lines&&K.poem_text){const R=K.poem_text.split(`
`).map(ie=>ie.trim()).filter(Boolean);K.poem_lines=R.slice(0,l)}return K.poem_lines&&l&&(K.poem_lines=K.poem_lines.slice(0,l)),K}),z=B.length>0?cJ(i?B.slice(0,i):B):n?[yE({url_video:n,title:e,artist:t},0)]:[],V=RI(I.length>0?a?I.slice(0,a):I:(r??[]).map(mE)),q=D.length>0?o?D.slice(0,o):D:(s??[]).map(gE);y(z),w(0),x(V),C(q),B.length===0&&I.length===0&&D.length===0&&p("Cargando con datos de respaldo. No hay registros recientes en sonoro_media.")}catch(L){const F=n?[yE({url_video:n,title:e,artist:t},0)]:[],U=RI((r??[]).map(mE)),B=(s??[]).map(gE);y(F),w(0),x(U),C(B),p((L==null?void 0:L.message)??"No pudimos cargar el miniverso sonoro.")}finally{M||d(!1)}})(),()=>{M=!0}},[r,s,t,e,n]);const _=S.useMemo(()=>m.length>0?m[g%m.length]:null,[m,g]),E=S.useMemo(()=>uJ(v),[v]),N=S.useMemo(()=>"",[b]);return{videoQueue:m,currentVideoIndex:g,currentVideo:_,audioOptions:v,poemOptions:b,initialAudioId:E,initialPoemId:N,isLoading:c,errorMessage:f,nextVideo:()=>{w(M=>m.length===0?M:(M+1)%m.length)}}};const vE=[{id:"neblina",label:"Modo",short:"Neblina-Suave",copy:"Neblina suave que difumina los bordes del sueo."},{id:"sombras",label:"Modo",short:"Deep-Shadow",copy:"Contrastes ms profundos, como si todo ocurriera a media luz."},{id:"respiracion",label:"Modo",short:"Pulse-Bloom",copy:"La luz late con la escena, como si el sueo respirara."},{id:"umbral",label:"Modo",short:"Umbral-Deep",copy:"Un tnel suave y profundo que suspende la temporalidad."}];function MI({videoUrl:n,videoTitle:e="Video ritual",videoArtist:t="Residencia #GatoEncerrado",audioOptions:r=[],poemOptions:s=[],initialAudioId:i="",initialPoemId:a="",isLoading:o=!1,errorMessage:l,showHeader:c=!0,showCTA:d=!0,onEnterExperience:f,experienceHref:p="/miniverso-sonoro",isSpent:m=!1,coinBlast:y=!1,costLabel:g="130 gatokens"}){const{currentVideo:w,audioOptions:v,poemOptions:x,initialAudioId:b,initialPoemId:C,videoQueue:_,isLoading:E,errorMessage:N,nextVideo:j}=dJ({fallbackVideoUrl:n,fallbackVideoTitle:e,fallbackVideoArtist:t,fallbackAudioOptions:r,fallbackPoemOptions:s}),[M,O]=S.useState("neblina"),[L,F]=S.useState(!1),[U,B]=S.useState(b||i||""),[I,D]=S.useState(a||C||""),[z,V]=S.useState([]),[q,P]=S.useState(null),[Y,K]=S.useState(!1),[R,ie]=S.useState(!1),[ke,me]=S.useState(!1),ve=!!U&&!!I,Ke=S.useRef(null),Re=S.useRef(null),xe=S.useRef(0),He=E||o,Be=S.useMemo(()=>v.find($=>$.id===U),[v,U]),ge=S.useMemo(()=>x.find($=>$.id===I),[x,I]),Z=(ge==null?void 0:ge.poem_text)||(ge==null?void 0:ge.text)||"",le=S.useMemo(()=>vE.find($=>$.id===M)||vE[0],[M]);S.useEffect(()=>{var $;if(!U&&b){B(b);return}v.find(X=>X.id===U)||B((($=v[0])==null?void 0:$.id)||b||"")},[v,b,U]),S.useEffect(()=>{if(!I&&C){D(C);return}I!==""&&(x.find($=>$.id===I)||D(""))},[x,C,I]),S.useEffect(()=>{if(!ge){V([]),P(0);return}const $=ge.poem_lines&&Array.isArray(ge.poem_lines)&&ge.poem_lines.length>0?ge.poem_lines:typeof Z=="string"?Z.split(`
`).map(X=>X.trim()).filter(Boolean):[];V($),P($.length>0?0:null),K($.length>0)},[ge,Z]),S.useEffect(()=>{if(!z||z.length===0||q===null)return;const $=q===z.length-1,X=setTimeout(()=>{$?K(!1):P(oe=>oe===null?0:oe+1)},1500);return()=>clearTimeout(X)},[z,q,R]),S.useEffect(()=>{if(typeof window>"u")return;const $=window.matchMedia("(max-width: 768px)"),X=()=>F($.matches);return X(),$.addEventListener("change",X),()=>$.removeEventListener("change",X)},[]),S.useEffect(()=>{if(!(typeof document>"u"))return R?(document.body.classList.add("overflow-hidden"),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})):document.body.classList.remove("overflow-hidden"),()=>document.body.classList.remove("overflow-hidden")},[R]),S.useEffect(()=>{if(L&&!R)return;const $=Ke.current;!$||!(w!=null&&w.url_video)||$.play().catch(()=>{})},[L,w]),S.useEffect(()=>{if(!Ke.current)return;if(L&&!R){Ke.current.pause();return}const $=Ke.current,X=$.play();X&&X.catch&&X.catch(()=>{setTimeout(()=>$.play().catch(()=>{}),250)})},[w==null?void 0:w.url_video,R,L]),S.useEffect(()=>{Re.current&&(R&&Be&&Be.url_audio?Re.current.play().catch(()=>{}):Re.current.pause())},[Be,R]);const ye=$=>{B($.target.value);const X=Re.current;X&&X.play().catch(()=>{})},Ve=$=>{D($.target.value)},Nt=()=>{if(_.length>1){j();return}const $=Ke.current;$&&($.currentTime=0,$.play().catch(()=>{}))},De=()=>{!ve||m||ke||(me(!0),typeof window<"u"&&(xe.current=window.scrollY||0),f&&f(),setTimeout(()=>{ie(!0),me(!1)},900))},Br=()=>{ie(!1),typeof window<"u"&&window.scrollTo({top:xe.current||0,behavior:"auto"})};S.useEffect(()=>{const $=Ke.current,X=Re.current;if(R){if($){try{$.currentTime=0}catch{}$.play().catch(()=>{})}if(X&&(Be!=null&&Be.url_audio)){try{X.currentTime=0}catch{}X.play().catch(()=>{})}z.length>0&&(P(0),K(!0))}else $&&L&&$.pause(),X&&X.pause(),K(!1),P(z.length>0?0:null)},[R,L,z.length,Be==null?void 0:Be.url_audio]);const tr=($="")=>h.jsxs("div",{className:`sonoro-preview-video-card mode-${M} ${$}`,children:[h.jsxs("div",{className:"sonoro-preview-hud",children:[h.jsxs("div",{children:[h.jsx("p",{className:"sonoro-preview-hud__kicker",children:"Cmara de resonancia"}),h.jsx("p",{className:"sonoro-preview-hud__title",children:(w==null?void 0:w.title)||e||"Video ritual"}),h.jsx("p",{className:"sonoro-preview-hud__artist",children:(w==null?void 0:w.artist)||t||"Residencia #GatoEncerrado"})]}),h.jsxs("div",{className:"sonoro-preview-hud__mode",children:[h.jsx("span",{className:"sonoro-preview-pill",children:le.label}),h.jsx("small",{children:le.short})]})]}),h.jsxs("div",{className:"sonoro-ambient",children:[h.jsxs("div",{className:"sonoro-ambient-video",children:[w!=null&&w.url_video?h.jsx("video",{ref:Ke,className:"sonoro-preview-video",src:w==null?void 0:w.url_video,muted:!0,autoPlay:!L||R,playsInline:!0,loop:!L||R,onEnded:Nt},(w==null?void 0:w.id)||(w==null?void 0:w.url_video)):h.jsx("div",{className:"sonoro-preview-video-placeholder",children:h.jsx("p",{children:He?"Cargando el archivo sonoro":"Pronto se abrir un video ritual."})}),h.jsx("div",{className:`dream-overlay dream-${M}`,"aria-hidden":"true"})]}),h.jsx("div",{className:"sonoro-ambient-fog","aria-hidden":"true"}),h.jsx("div",{className:"sonoro-ambient-shadow","aria-hidden":"true"}),h.jsx("div",{className:"sonoro-ambient-breath","aria-hidden":"true"}),h.jsx("div",{className:"sonoro-ambient-grain","aria-hidden":"true"}),h.jsxs("div",{className:"sonoro-video-overlay","aria-hidden":"true",children:[h.jsx("span",{className:"sonoro-video-overlay__layer layer-1"}),h.jsx("span",{className:"sonoro-video-overlay__layer layer-2"}),h.jsx("span",{className:"sonoro-video-overlay__layer layer-3"}),h.jsx("span",{className:"sonoro-video-overlay__layer layer-4"})]})]}),((z==null?void 0:z.length)||Z)&&h.jsx("div",{className:"sonoro-preview-poem-overlay poem-overlay",children:z!=null&&z.length?z.map((X,oe)=>h.jsx("p",{className:`poem-line ${oe===q&&Y?"is-visible":""}`,style:{zIndex:oe===q?2:1},children:X},`${(ge==null?void 0:ge.id)||"poema"}-${oe}`)):h.jsx("p",{className:"poem-line is-visible",children:Z})})]}),zr=h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"sonoro-preview-control-group sonoro-preview-control-group--modes",children:[h.jsx("p",{className:"sonoro-preview-control-label",children:"Modos de sueo"}),h.jsx("div",{className:"sonoro-preview-mode-pills",children:vE.map($=>h.jsxs("button",{type:"button",className:`sonoro-preview-mode-pill ${M===$.id?"is-active":""}`,onClick:()=>O($.id),"aria-pressed":M===$.id,children:[h.jsxs("div",{className:"sonoro-preview-mode-pill__header",children:[h.jsx("span",{children:$.label}),h.jsx("small",{children:$.short})]}),h.jsx("p",{children:$.copy})]},$.id))})]}),h.jsxs("div",{className:"sonoro-preview-control-group",children:[h.jsx("p",{className:"sonoro-preview-control-label",children:"Elige la msica"}),h.jsx("select",{value:(Be==null?void 0:Be.id)??"",onChange:ye,className:"sonoro-preview-select",children:v.map($=>h.jsx("option",{value:$.id,children:$.label||$.title},$.id))})]}),h.jsxs("div",{className:"sonoro-preview-control-group",children:[h.jsx("p",{className:"sonoro-preview-control-label",children:"Elige un poema"}),h.jsxs("select",{value:(ge==null?void 0:ge.id)??"",onChange:Ve,className:"sonoro-preview-select",children:[h.jsx("option",{value:"",children:"Ninguno"}),x.map($=>h.jsx("option",{value:$.id,children:$.label||$.title||"Poema ritual"},$.id))]})]})]}),Ks=h.jsxs("div",{className:`sonoro-preview-layout ${L?"is-mobile":"is-desktop"}`,children:[h.jsx("aside",{className:"sonoro-preview-controls",children:zr}),h.jsxs("section",{className:"sonoro-preview-stage",children:[tr(),d&&h.jsxs("div",{className:"relative",children:[y?h.jsxs(ne.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:-6},exit:{opacity:0,y:-10},className:"absolute -top-6 right-0 rounded-full border border-amber-200/60 bg-amber-500/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-amber-100 shadow-[0_0_12px_rgba(250,204,21,0.25)]",children:["-",g]}):null,h.jsxs("button",{type:"button",className:"sonoro-preview-cta relative",onClick:De,disabled:!ve||m||ke,children:[h.jsx("span",{className:"relative z-10",children:m?"Crditos aplicados":ke?"Entrando":"Entrar a la cmara de resonancia"}),y?h.jsx("span",{className:"pointer-events-none absolute inset-0",children:Array.from({length:7}).map(($,X)=>{const oe=140+X*12,qe=-130-X*14;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.5)]",initial:{opacity:.9,scale:.7,x:0,y:0},animate:{opacity:0,scale:1,x:oe,y:qe,rotate:120+X*22},transition:{duration:1.1,ease:"easeOut",delay:.05}},`sonoro-coin-${X}`)})}):null]})]})]})]}),ma=h.jsxs("div",{className:"sonoro-preview-layout is-desktop",children:[h.jsx("aside",{className:"sonoro-preview-controls",children:zr}),h.jsxs("section",{className:"sonoro-preview-stage",children:[tr(),d&&h.jsx("button",{type:"button",className:"sonoro-preview-cta",onClick:De,disabled:!ve,children:"Entrar a la cmara de resonancia"})]})]}),Ys=typeof document<"u"&&R?Up.createPortal(h.jsxs("div",{className:"sonoro-fullscreen-layer",children:[h.jsxs("div",{className:"sonoro-fullscreen-header",children:[h.jsx("p",{className:"sonoro-fullscreen-kicker",children:"Cmara de resonancia"}),h.jsx("button",{type:"button",className:"sonoro-fullscreen-close",onClick:Br,children:"Cerrar experiencia"})]}),h.jsx("div",{className:"sonoro-fullscreen-body",children:tr("is-full-experience")})]}),document.body):null,_i=h.jsxs(h.Fragment,{children:[c&&h.jsx("div",{className:"sonoro-preview-header",children:h.jsx("div",{className:"sonoro-preview-header__top",children:h.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] ${m?"border-emerald-200/70 bg-emerald-500/25 text-emerald-50":"border-amber-200/80 bg-amber-500/30 text-amber-50"}`,children:[h.jsx("span",{className:"text-amber-50",children:""}),m?"0 gatokens":g]})})}),L?Ks:ma]});return h.jsxs("div",{className:`sonoro-preview root-mode-${M}`,children:[!R&&_i,Ys,h.jsx("audio",{ref:Re,src:(Be==null?void 0:Be.url_audio)||(Be==null?void 0:Be.url)||void 0,loop:!0}),(N||l)&&h.jsx("p",{className:"sonoro-preview-error",children:N||l})]})}function hJ(){const[n,e]=S.useState("segment"),[t,r]=S.useState([]),[s,i]=S.useState(!1),[a,o]=S.useState(null),[l,c]=S.useState(null),[d,f]=S.useState(""),[p,m]=S.useState(!1),[y,g]=S.useState(0),w=25,v=6,[x,b]=S.useState(!1),C=async()=>{try{const M=await(await fetch("/data/novela-preview.json")).json();r(M.segments||[])}catch(j){console.error("Error cargando segmentos:",j)}},_=(j,M)=>{y>=v||(o(j),c(M),f(""),i(!0))},E=()=>{i(!1),o(null),c(null),f("")};return S.useEffect(()=>{var M;if(typeof window>"u")return;const j=(M=window.localStorage)==null?void 0:M.getItem("gatoencerrado:novela-questions");j&&!Number.isNaN(Number.parseInt(j,10))&&g(Number.parseInt(j,10))},[]),{mode:n,setMode:e,segments:t,loadSegments:C,isModalOpen:s,openModal:_,closeModal:E,activeSegment:a,activePlan:l,reflection:d,setReflection:f,loading:p,reflectionCount:y,triggerCoins:x,setTriggerCoins:b,sendReflection:async()=>{if(d.trim()){m(!0);try{const{data:j,error:M}=await fetch("/functions/v1/send-blog-reflection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({segment_id:a.id,plan:l,reflection:d,author:"Invitado"})});M&&console.error("Supabase error:",M),g(L=>{var U;const F=Math.min(L+1,v);return typeof window<"u"&&((U=window.localStorage)==null||U.setItem("gatoencerrado:novela-questions",String(F)),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"novela",spent:!0,amount:w,count:F}}))),b(!0),F}),setTimeout(()=>{E()},900)}catch(j){console.error("Error enviando reflexin:",j)}m(!1)}}}}function fJ(){const[n,e]=S.useState(!0),t=S.useRef(null);return S.useEffect(()=>{if(typeof window>"u"||!("ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0))return;const s=()=>{e(!1),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{e(!0)},500)};return window.addEventListener("touchstart",s,{passive:!0}),window.addEventListener("touchmove",s,{passive:!0}),()=>{window.removeEventListener("touchstart",s),window.removeEventListener("touchmove",s),t.current&&clearTimeout(t.current)}},[]),n}function pJ({isOpen:n,onClose:e,segment:t,plan:r,reflection:s,setReflection:i,onSubmit:a,loading:o,triggerCoins:l,setTriggerCoins:c}){var f;if(S.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[n]),!n)return null;const d={academic:"Plano Acadmico",psychological:"Plano Psicolgico",narrative:"Plano Narrativo",theatrical:"Plano Teatral"};return h.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/80 backdrop-blur-3xl px-4",children:h.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-purple-400/40 bg-black/90 p-6 shadow-[0_30px_80px_rgba(15,23,42,0.75)]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300/80",children:"Plano"}),h.jsx("h2",{className:"text-2xl font-semibold text-white",children:d[r]??"Plano"})]}),h.jsx("button",{onClick:e,className:"text-sm text-slate-300 hover:text-white",children:"Cerrar "})]}),h.jsx("p",{className:"text-sm text-slate-300/80 mb-6 leading-relaxed",children:(f=t==null?void 0:t.questions)==null?void 0:f[r]}),h.jsx("textarea",{className:"w-full min-h-[160px] rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-100 outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500/40 transition",placeholder:"Escribe tu reflexin aqu",value:s,onChange:p=>i(p.target.value)}),h.jsxs("div",{className:"mt-6 flex items-center justify-between gap-4",children:[h.jsx("button",{onClick:e,className:"text-sm uppercase tracking-[0.4em] text-slate-400 hover:text-white",children:"Cancelar"}),h.jsxs("div",{className:"relative",children:[l?h.jsx(ne.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:-4},exit:{opacity:0,y:-10},className:"absolute -top-6 right-0 rounded-full border border-amber-200/60 bg-amber-500/15 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-amber-100 shadow-[0_0_12px_rgba(250,204,21,0.25)]",children:"-25 gat"}):null,h.jsxs("button",{onClick:a,disabled:o,className:"relative rounded-full bg-gradient-to-r from-purple-600/90 to-indigo-600/80 px-6 py-3 text-sm font-semibold text-white transition hover:from-purple-500/90 hover:to-indigo-500/90 disabled:opacity-60",children:[h.jsx("span",{className:"relative z-10",children:o?"Enviando":"Enviar reflexin"}),l?h.jsx("span",{className:"pointer-events-none absolute inset-0",children:Array.from({length:6}).map((p,m)=>{const y=120+m*12,g=-110-m*10;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.5)]",initial:{opacity:.9,scale:.6,x:0,y:0},animate:{opacity:0,scale:1,x:y,y:g,rotate:110+m*22},transition:{duration:1.05,ease:"easeOut",delay:.1},onAnimationComplete:()=>c(!1)},`modal-coin-${m}`)})}):null]})]})]})]})})}const mJ=[{plan:"academic",label:"Acadmico",Icon:z2},{plan:"psychological",label:"Psicolgico",Icon:ik},{plan:"narrative",label:"Narrativo",Icon:ak},{plan:"theatrical",label:"Teatral",Icon:j8}];function gJ({iconsVisible:n=!0,onSelect:e,disabled:t=!1,isTouchDevice:r=!1,readingMode:s="dark"}){return h.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:mJ.map(({plan:i,label:a,Icon:o})=>{const l=r?n?"opacity-100":"opacity-50":"opacity-0 group-hover:opacity-100",c=s==="premium"?"text-[#3b2a1f]":"text-white",d=s==="premium"?"stroke-[#3b2a1f]":"stroke-current";return h.jsxs("button",{type:"button",onClick:()=>!t&&e(i),disabled:t,className:`group flex flex-col items-center justify-center rounded-full border border-white/10 bg-white/5 py-3 text-[0.6rem] uppercase tracking-[0.4em] text-white transition-opacity duration-300 ${l} ${t?"cursor-not-allowed opacity-40":`hover:border-purple-400 hover:text-white ${c}`}`,"aria-label":`Abrir plano ${a}`,children:[h.jsx(o,{size:18,className:d}),h.jsx("span",{className:`mt-1 ${c}`,children:a})]},i)})})}function yJ(){const{segments:n,loadSegments:e,openModal:t,activeSegment:r,activePlan:s,reflection:i,setReflection:a,isModalOpen:o,closeModal:l,sendReflection:c,loading:d,reflectionCount:f,triggerCoins:p,setTriggerCoins:m}=hJ(),y=fJ(),g=f>=6,[w,v]=S.useState(!1),[x,b]=S.useState("dark"),C={dark:"bg-black/40 border-white/10 text-slate-100",premium:"bg-[#f7f2e8] border-[#c4bdae] text-[#3b2a1f] shadow-[0_20px_35px_rgba(0,0,0,0.15)]"},_={dark:"text-slate-100",premium:"text-[#3b2a1f]"},E={dark:'"Literata", "Times New Roman", serif',premium:'"Cormorant Garamond", "Palatino Linotype", serif'};return S.useEffect(()=>{e()},[]),S.useEffect(()=>{if(typeof window>"u")return;const N="ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0;v(N)},[]),h.jsxs("div",{className:"w-full min-h-screen px-4 py-8 text-slate-100",children:[h.jsxs("div",{className:"mx-auto flex w-full max-w-3xl flex-col items-center gap-6",children:[h.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:h.jsx("div",{className:"flex gap-3 items-center",children:["dark","premium"].map(N=>h.jsx("button",{onClick:()=>b(N),className:`w-8 h-8 rounded-full border transition ${x===N?"border-white/90 bg-white/80 shadow-lg":"border-white/30 bg-black/20"}`,"aria-label":`Modo ${N}`,children:h.jsx("span",{className:"hidden",children:N})},N))})}),h.jsx("div",{className:"space-y-6",children:n.map(N=>h.jsxs("div",{className:`group mx-auto max-w-[650px] space-y-6 rounded-3xl border px-8 py-10 backdrop-blur-md shadow-[0_20px_50px_rgba(0,0,0,0.45)] transition-colors duration-500 ${C[x]}`,children:[h.jsx("p",{className:`text-base leading-relaxed ${_[x]}`,style:{fontFamily:E[x],lineHeight:1.8},children:N.text}),h.jsx(gJ,{onSelect:j=>t(N,j),iconsVisible:y,isTouchDevice:w,disabled:g,readingMode:x})]},N.id))}),")}"]}),h.jsx(pJ,{isOpen:o,onClose:l,segment:r,plan:s,reflection:i,setReflection:a,loading:d,onSubmit:c,triggerCoins:p,setTriggerCoins:m})]})}const II="gx_anon_id";function vJ(){return typeof window<"u"&&typeof window.localStorage<"u"}function xJ(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`}function Rk(){if(!vJ())return null;try{const n=window.localStorage.getItem(II);if(n)return n;const e=xJ();return window.localStorage.setItem(II,e),e}catch(n){return console.warn("gx_anon_id storage unavailable",n),null}}async function bJ(){const n=Rk();if(!n)return{success:!1,error:null};try{const{error:e}=await wt.from("anon_sessions").upsert({anon_id:n,last_seen_at:new Date().toISOString(),user_agent:typeof navigator>"u"?null:navigator.userAgent??null},{onConflict:"anon_id"});return e?(console.error("touchAnonSession upsert failed",e),{success:!1,error:e}):{success:!0}}catch(e){return console.error("touchAnonSession error",e),{success:!1,error:e}}}const wJ="https://ytubybkoucltwnselbhc.supabase.co",LI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo";async function dz({action_type:n,anon_id:e,context:t={},metadata:r={}}){if(!n)return{success:!1,error:new Error("action_type is required")};await bJ();const s=e??Rk();if(!s)return{success:!1,error:new Error("anon_id is required for interactions")};const i=t&&typeof t=="object"?t:{},a=r&&typeof r=="object"?r:{};try{const o=await fetch(`${wJ}/rest/v1/interactions`,{method:"POST",headers:{"Content-Type":"application/json",apikey:LI,Authorization:`Bearer ${LI}`,Prefer:"return=minimal"},body:JSON.stringify({action_type:n,anon_id:s,context:i,metadata:a})});if(!o.ok){let l=null;try{l=await o.json()}catch{l=await o.text()}const c=new Error(`trackInteraction failed with status ${o.status} (${o.statusText})`);return l&&(c.details=l),{success:!1,error:c}}return{success:!0,error:null}}catch(o){return{success:!1,error:o}}}async function SJ({showcaseId:n,user:e}){if(!n)return{success:!1,error:new Error("Falta el identificador del showcase")};const t=Rk();if(!t)return{success:!1,error:new Error("No se pudo generar un anon_id para la interaccin.")};const r={showcase_id:n,recorded_at:new Date().toISOString(),user_email:(e==null?void 0:e.email)??null};return dz({action_type:"showcase_like",anon_id:t,context:{source:"transmedia",component:"ShowcaseReaction"},metadata:r})}function kJ(){const[n,e]=S.useState(!1),[t,r]=S.useState(()=>new Set);S.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const o=window.matchMedia("(max-width: 768px)"),l=c=>e(c.matches);return l(o),typeof o.addEventListener=="function"?(o.addEventListener("change",l),()=>o.removeEventListener("change",l)):(o.addListener(l),()=>o.removeListener(l))},[]),S.useEffect(()=>{n||r(new Set)},[n]);const s=S.useCallback(o=>{o&&r(l=>{if(l.has(o))return l;const c=new Set(l);return c.add(o),c})},[]),i=S.useCallback(o=>!n||!o?!0:t.has(o),[t,n]),a=S.useCallback(async(o,l)=>{if(!n)return;o.preventDefault(),o.stopPropagation();const c=o.currentTarget;if(!(c instanceof HTMLVideoElement))return;const d=async()=>{(c.paused||c.readyState<2)&&await c.play()};if(typeof document<"u"&&"pictureInPictureEnabled"in document&&document.pictureInPictureEnabled&&typeof c.requestPictureInPicture=="function"&&!c.disablePictureInPicture)try{await d(),await c.requestPictureInPicture();return}catch{}const p=c.requestFullscreen||c.webkitEnterFullscreen||c.webkitRequestFullscreen||c.mozRequestFullScreen||c.msRequestFullscreen;if(p)try{await d(),await p.call(c);return}catch{}s(l),c.controls=!0;try{await d()}catch{}},[s,n]);return{isMobileViewport:n,canUseInlinePlayback:i,requestMobileVideoPresentation:a}}const AJ=({title:n="Cmo funciona aqu gatoencerrado.ai?",type:e,interaction:t,tokensRange:r,coverage:s,footnote:i,compact:a=!1})=>{const[o,l]=S.useState(!a);return!(e||t||r||s)&&!i?null:h.jsxs("div",{className:"rounded-xl border border-purple-700/30 bg-purple-950/25 p-5 text-sm text-purple-100 backdrop-blur-md shadow-[0_10px_35px_rgba(0,0,0,0.4)]",children:[h.jsxs("button",{type:"button",onClick:()=>l(d=>!d),className:"flex w-full items-center justify-between gap-3 text-left",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Vg,{size:16,className:"text-amber-200"}),h.jsx("h4",{className:"text-base font-semibold text-purple-200",children:n})]}),h.jsx(S3,{size:18,className:`text-purple-200 transition ${o?"rotate-180":""}`,"aria-hidden":"true"})]}),o?h.jsxs("div",{className:"mt-4 space-y-2 text-purple-100/90",children:[e?h.jsxs("div",{className:"flex items-start gap-2 leading-relaxed",children:[h.jsx(v8,{size:16,className:"mt-0.5 text-purple-200"}),h.jsxs("p",{children:[h.jsx("strong",{children:"Tipo de IA:"})," ",e]})]}):null,t?h.jsxs("div",{className:"flex items-start gap-2 leading-relaxed",children:[h.jsx(k8,{size:16,className:"mt-0.5 text-purple-200"}),h.jsxs("p",{children:[h.jsx("strong",{children:"Interaccin esperada:"})," ",t]})]}):null,r?h.jsxs("div",{className:"flex items-start gap-2 leading-relaxed",children:[h.jsx(Vg,{size:16,className:"mt-0.5 text-amber-200"}),h.jsxs("p",{children:[h.jsx("strong",{children:"Tokens estimados:"})," ",r]})]}):null,s?h.jsxs("div",{className:"flex items-start gap-2 leading-relaxed",children:[h.jsx(P8,{size:16,className:"mt-0.5 text-emerald-200"}),h.jsxs("p",{children:[h.jsx("strong",{children:"Costos cubiertos:"})," ",s]})]}):null,i?h.jsx("p",{className:"pt-1 text-purple-300/85 italic",children:i}):null]}):null]})};$s.workerSrc=`https://unpkg.com/pdfjs-dist@${DN}/build/pdf.worker.min.mjs`;const $n={quironFull:300,graficoSwipe:110,novelaChapter:150,sonoroMix:130,tazaActivation:90,movimientoRuta:280},EJ=["miniversos","lataza","miniversoNovela","miniversoGrafico","copycats","miniversoSonoro","miniversoMovimiento","detodxs","oraculo"],DI="gatoencerrado:explorer-badge",xE=1e3,CJ="Errante Consagrado",_J={unlocked:!1,unlockedAt:null,rewardClaimed:!1,claimedAt:null,claimedType:null},Qx={miniversos:"linear-gradient(135deg, rgba(31,21,52,0.95), rgba(64,36,93,0.85), rgba(122,54,127,0.65))",copycats:"linear-gradient(135deg, rgba(16,27,54,0.95), rgba(38,63,109,0.85), rgba(92,47,95,0.7))",miniversoGrafico:"linear-gradient(135deg, rgba(37,19,52,0.95), rgba(70,32,86,0.85), rgba(141,58,121,0.65))",miniversoNovela:"linear-gradient(135deg, rgba(26,24,60,0.95), rgba(59,43,95,0.85), rgba(108,56,118,0.7))",miniversoSonoro:"linear-gradient(135deg, rgba(18,29,62,0.95), rgba(32,65,103,0.85), rgba(70,91,146,0.65))",lataza:"linear-gradient(135deg, rgba(44,20,30,0.95), rgba(101,45,66,0.85), rgba(196,111,86,0.6))",miniversoMovimiento:"linear-gradient(135deg, rgba(24,30,45,0.95), rgba(40,64,65,0.85), rgba(74,123,102,0.65))",oraculo:"linear-gradient(135deg, rgba(38,18,56,0.95), rgba(86,33,115,0.85), rgba(168,68,139,0.65))",default:"linear-gradient(135deg, rgba(20,14,35,0.95), rgba(47,28,71,0.85), rgba(90,42,100,0.65))"},OI={miniversos:{background:"rgba(31,21,52,0.75)",border:"rgba(186,131,255,0.35)",text:"#e9d8ff",accent:"#f4c8ff"},copycats:{background:"rgba(16,27,54,0.75)",border:"rgba(132,176,255,0.35)",text:"#dbeafe",accent:"#c6f6ff"},miniversoGrafico:{background:"rgba(37,19,52,0.75)",border:"rgba(214,146,255,0.35)",text:"#fce7f3",accent:"#fed7e2"},miniversoNovela:{background:"rgba(26,24,60,0.75)",border:"rgba(163,148,255,0.35)",text:"#e0e7ff",accent:"#c7d2fe"},miniversoSonoro:{background:"rgba(18,29,62,0.75)",border:"rgba(122,179,255,0.35)",text:"#e0f2fe",accent:"#bae6fd"},lataza:{background:"rgba(44,20,30,0.75)",border:"rgba(255,173,145,0.35)",text:"#ffedd5",accent:"#fed7aa"},miniversoMovimiento:{background:"rgba(24,30,45,0.75)",border:"rgba(163,233,208,0.35)",text:"#d1fae5",accent:"#a7f3d0"},oraculo:{background:"rgba(38,18,56,0.75)",border:"rgba(225,160,235,0.35)",text:"#fbe7ff",accent:"#f3d1ff"},default:{background:"rgba(20,14,35,0.7)",border:"rgba(186,131,255,0.3)",text:"#f3e8ff",accent:"#e9d8fd"}},TJ=({title:n,verse:e,palette:t,effect:r="reveal",isTragedia:s=!1,onFirstReveal:i=null,celebration:a=!1})=>{const[o,l]=S.useState(!1),c=s?"text-sm":"text-sm leading-relaxed",d=()=>{l(m=>{const y=!m;return!m&&y&&typeof i=="function"&&i(),y})},f=()=>a?h.jsx("div",{className:"pointer-events-none absolute inset-0 z-20",children:Array.from({length:7}).map((m,y)=>{const g=(y-3)*22,w=-50-y*10;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_15px_rgba(250,204,21,0.5)]",initial:{opacity:.95,scale:.7,x:0,y:0},animate:{opacity:0,scale:1.1,x:g,y:w,rotate:90+y*25},transition:{duration:1.2,ease:"easeOut",delay:y*.04}},`mini-coin-${y}`)})}):null,p=h.jsxs(ne.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"},className:`rounded-2xl border min-h-[220px] flex flex-col justify-between relative overflow-hidden cursor-pointer ${c}`,style:{backgroundImage:t.gradient,backgroundSize:"220% 220%",borderColor:t.border,color:t.text,boxShadow:o?"0 10px 30px rgba(0,0,0,0.55)":"0 0 25px rgba(0,0,0,0.35)"},onClick:d,children:[f(),h.jsx("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.35),_transparent_60%)] pointer-events-none"}),h.jsx("div",{className:"relative z-10 mb-3 flex justify-center",children:h.jsx("span",{className:"inline-flex items-center gap-2 rounded-full px-4 py-1 text-[0.6rem] uppercase tracking-[0.35em] shadow-lg transition",style:{color:t.accent,backgroundColor:`${t.background}cc`,border:`1px solid ${t.border}`},children:n})}),h.jsxs("div",{className:"relative z-10 flex-1 flex items-center justify-center px-4",children:[h.jsx("p",{className:`leading-relaxed whitespace-pre-line text-center font-light transition-all duration-500 ${o?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:e}),h.jsx("div",{className:`absolute inset-0 flex items-center justify-center text-xs uppercase tracking-[0.35em] text-white/70 transition-all duration-500 ${o?"opacity-0 scale-95":"opacity-100 scale-100"}`,children:"Toca para revelar"})]})]},n);return r==="flip"?h.jsxs("div",{className:"relative [perspective:1200px]",onClick:d,children:[f(),h.jsxs(ne.div,{animate:{rotateY:o?180:0},transition:{duration:.7,ease:"easeInOut"},className:"relative min-h-[220px] [transform-style:preserve-3d]",children:[h.jsxs("div",{className:`absolute inset-0 rounded-2xl border flex flex-col items-center justify-center gap-4 ${c} [backface-visibility:hidden]`,style:{backgroundImage:t.gradient,borderColor:t.border,color:t.text,inset:0},children:[h.jsx("span",{className:"inline-flex items-center gap-2 rounded-full px-4 py-1 text-[0.6rem] uppercase tracking-[0.35em] shadow-lg",style:{color:t.accent,backgroundColor:`${t.background}cc`,border:`1px solid ${t.border}`},children:n}),h.jsx("span",{className:"text-xs tracking-[0.35em] text-white/70",children:"Toca para girar"})]}),h.jsx("div",{className:`absolute inset-0 rounded-2xl border px-6 py-5 [backface-visibility:hidden] flex items-center justify-center ${c}`,style:{backgroundImage:t.gradient,borderColor:t.border,color:t.text,transform:"rotateY(180deg)"},children:h.jsx("p",{className:"leading-relaxed whitespace-pre-line text-center font-light",children:e})})]})]}):p},FI={miniversoNovela:"flip",miniversoSonoro:"flip",lataza:"flip",copycats:"flip",miniversos:"flip",miniversoGrafico:"flip",miniversoMovimiento:"flip",oraculo:"flip",default:"flip"};let BI=!1;function NJ(){if(BI||typeof document>"u")return;const n=document.createElement("style");n.id="miniverso-breath-style",n.textContent=`
    @keyframes miniverso-breath {
      0% {
        background-position: 0% 0%;
        transform: scale(1);
        filter: brightness(1);
      }
      50% {
        background-position: 50% 50%;
        transform: scale(1.03);
        filter: brightness(1.08);
      }
      100% {
        background-position: 100% 100%;
        transform: scale(1);
        filter: brightness(1);
      }
    }
  `,document.head.appendChild(n),BI=!0}const Nm={miniversos:{label:"Drama",type:"tragedia",intro:"Aqu nace la obra dentro de la obra. El gato encerrado de Es un gato encerrado.",cartaTitle:"#VibracinEscnica",notaAutoral:`De la escena brot el universo:
voz, trance y cuerpo
abriendo portales.`,narrative:["En este miniverso puedes entrar al mundo de Silvestre: escuchar sus ecos, leer a sus fantasmas o conversar directamente con su trasunto, el Payasito Tiste, en un chat que habita la herida."],ctaLabel:"Hablar con Silvestre",ctaDescription:"Activa el vnculo con la voz que an no se apaga. Aqu es donde Silvestre o lo que queda de l te responde.",iaProfile:{type:"GPT-4o afinada para voz literaria y contencin emocional.",interaction:"1 a 3 mensajes con Silvestre (texto o voz).",tokensRange:"250600 tokens.",coverage:"Cubierto por suscriptores; entra en el plan de soporte colectivo.",footnote:"Cada conversacin tiene un costo real. Gracias por mantenerla viva."}},copycats:{label:"Cine",type:"cinema",intro:"El cine dentro de #GatoEncerrado es un laboratorio donde la realidad se revela por roce, no por imitacin. Obra, proceso y mirada se mezclan hasta volver indistinguibles sus fronteras.",promise:"Aqu no solo ves cine: te invitamos a entrar a su laboratorio.",theme:"La doble vida de una imagen: aquello que se ve y aquello que tiembla detrs. CopyCats (farsa lcida) y Quirn (herida ntima) responden a la misma pregunta en dos lenguajes.",tone:["Premiere ntima","Laboratorio abierto","Cine con memoria"],cartaTitle:"#LuzQueHiere",copycats:{title:"CopyCats",description:"Un juego serio sobre cmo nos repetimos sin notarlo. Mira su bitcora creativa y descubre cmo surgi esta pieza.",microcopy:"CopyCats es un ensayo cinematogrfico sobre el desgaste creativo: un making-of que piensa el acto de crear mientras sucede. Se detiene en el burnout, en la autocrtica feroz, y en ese desprecio silencioso que a veces sentimos por la obra justo cuando ms nos necesita.",assets:[{id:"copycats-carta",label:"Carta audiovisual (4:02)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/ensayos/La%20Cadena%20del%20Gesto.mp4"}],tags:["Cine-ensayo","Identidad Digital","Archivo autoficcional"]},quiron:{title:"Quirn",description:"Mira el teaser y los stills de rodaje de un cortometraje que busca la vulnerabilidad donde casi no se nota.",microcopy:"Quirn explora un silencio heredado: una familia atravesada por el suicidio de un padre y un abuelo. La pelcula nace para darle lenguaje a ese dolor y acercarnos a lo que normalmente se calla.",fullVideo:{id:"quiron-full",label:"Cortometraje completo",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/Quiron_10min.mp4"},teaser:{id:"quiron-teaser",label:"Teaser oficial",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/Quiron.mp4"},stills:[{id:"quiron-still-01",label:"Still 01  Primera llamada",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/stills%20-%20quiron/rodaje%201.jpg"},{id:"quiron-still-02",label:"Still 02  Lectura en el set",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/stills%20-%20quiron/IMG_2290.JPG"},{id:"quiron-still-03",label:"Still 03  Seales del da",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/stills%20-%20quiron/IMG_2382.JPG"}]},collaborators:[{id:"viviana-gonzalez",name:"Viviana Gonzlez",role:"Direccin de foto y registro creativo",bio:"Viviana acompaa al Miniverso Cine con una mirada que piensa. Comunicloga y docente en la Ibero, su experiencia ilumina procesos ms que superficies. Fue quien sostuvo el pulso visual de Quirn y CopyCats: cmara, escucha y dilogo creativo continuo. Su presencia abri rutas nuevas para traducir lo ntimo, lo incierto y lo que apenas empieza a nacer en pantalla",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/placeholder-colaboradores.jpg",anchor:"#team"},{id:"diego-madera",name:"Diego Madera",role:"Compositor  Tema musical",bio:"Diego tiende puentes entre emocin y estructura. Compositor de formacin precisa y sensibilidad abierta, su msica respira junto al material filmado: acompaa, sostiene y revela. En el Miniverso Cine, sus partituras funcionan como una lnea de vida, un lugar donde el caos ordena su ritmo. Es tambin maestro de piano, y esa pedagoga silenciosa termin resonando en la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png",anchor:"#team"},{id:"lia-perez",name:"La Prez",role:"Diseo Sonoro & Pulso emocional",bio:"La se sum a Cine de #GatoEncerrado con una entrega luminosa: sin pedir nada a cambio y afinando cada capa de sonido en Quirn y CopyCats. Su odo construye atmsferas que no se escuchan: se sienten. Entre risas, ruidos, silencios y tormentas interiores, su trabajo sostuvo el timbre emocional de las piezas y dej una huella discreta, pero imprescindible.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/lia.png"},{id:"maria-diana-laura-rodriguez",name:"Mara Diana Laura Rodriguez",role:"Produccin en lnea & Cuerpo en escena",bio:"Mara Diana Laura cruz el Miniverso Cine desde dos frentes: coordin la produccin en lnea del cortometraje y encarn a Cirila en el orculo, llevando esa figura entre lo ritual y lo domstico a la pantalla. Su energa organizativa y su presencia performtica sostuvieron momentos clave del proceso, dejando constancia de que producir tambin es un acto de imaginacin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariadianalaura.jpg",anchor:"#team"},{id:"tania-fraire",name:"Tania Fraire Vzques",role:"Autoficcin & Presenica natural en pantalla",bio:"Tania lleg a este proyecto transmedia desde la autoficcin, pero pronto revel algo ms: una actriz natural, sin artificio, capaz de sostener la cmara como si respirara con ella. En el screening privado de Quirn, el maestro Gilberto Corrales lo seal con asombro: su actuacin encenda la escena desde un lugar genuino, vulnerable y preciso. Su participacin abri una grieta luminosa por donde la historia pudo volverse ms humana. Tania colabora en una non-profit, es diseadora grfica y transfronteriza de corazn.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/tania.jpg",anchor:"#team"}],bridge:{title:"Una lnea que vibra entre ambas historias",description:"CopyCats y Quirn dialogan desde extremos distintos del mismo territorio. Una filma el desgaste creativo y la fractura del proceso;la otra abre una confesin ntima que decide hablar del suicidio sin rodeos.",note:"Dos pelculas, dos vulnerabilidades distintas, un mismo impulso: usar el arte para tocar aquello que no queremos decir en voz alta y encontrar otra manera de contarlo."},screening:{title:"Marzo 2026  Cineteca CECUT",description:"nete al universo transmedia y asegura tu acceso al primer screening doble de CopyCats + Quirn, con conservatorio del equipo.",cta:"Quiero ser parte del screening",footnote:"El cine es otro modo de entrar al encierro. Acompanos en marzo para ver ambas pelculas antes que nadie."},notaAutoral:`Cuando la escena no basta,
la cmara sostiene la memoria
Quirn, CopyCats:
el mismo espacio, expuesto de otra forma.`,iaProfile:{type:"GPT-4o mini + subttulos vivos y notas crticas asistidas.",interaction:"Notas crticas y captions contextuales por espectador.",tokensRange:"200450 tokens por visita.",coverage:"Incluido en las suscripciones transmedia.",footnote:"La IA acompaa la mirada; la decisin sigue siendo humana."}},lataza:{label:"Artesanas",type:"object-webar",slug:"taza-que-habla",subtitle:"Esta no es una taza. Es un portal.",intro:"Un objeto cotidiano convertido en smbolo de comunin. Cada taza est vinculada a un sentimiento. Cada sentimiento, a una historia personal.",note:"Apunta tu cmara... La clave aparecer.",ctaLabel:"Probar activacin WebAR",ctaLink:"/webar/taza/index.html",ctaMessage:"Cuando liberes la activacin WebAR, descubrirs la pista que le corresponde a tu taza.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/taza_h.png",phrases:["La taza te habla."],instructions:["Permite el acceso a tu cmara para iniciar.","Coloca la taza completa en cuadro, con buena iluminacin.","Mantn el marcador visible hasta que aparezca la orbe."],collaborators:[{id:"miroslava-wilson",name:"Miroslava Wilson",role:"Produtora ejecutiva",bio:"Miroslava fue pieza clave en la estrategia que convirti la Taza en un gesto vivo: un puente entre la obra y su comunidad. Coordin su uso como incentivo de preventa, cuid los tiempos, los envos y el pulso organizativo que permiti que cada taza llegara a manos que ya estaban esperando la historia. Su trabajo teji logstica con cario y abri el camino para que el universo creciera desde un objeto que tambin es smbolo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/Miroslava%20.jpg"},{id:"taller-paco-padilla",name:"Taller Paco Padilla",role:"Cermica artesanal de Tlaquepaque",bio:"Referente de la cermica artesanal de Tlaquepaque.El Taller Paco Padilla puso sus manos y su fuego en la primera serie de tazas del universo. Cada pieza sali de su horno con una vibracin artesanal nica, sosteniendo en barro el pulso ntimo de Gato Encerrado y regalndole un hogar fsico a lo que antes era solo smbolo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/pacopadilla.webp"},{id:"yeraldin-roman",name:"Yeraldn Romn",role:"Diseo grfico, fotografa y enlace local",bio:"Yeraldn fue la primera en mirar la Taza en sus manos: tom la iniciativa de fotografiarla y capturar su espritu antes de que viajara al pblico. Desde su experiencia en diseo grfico, afin la esttica del proyecto, puso en pantalla el logotipo y cuid la coherencia visual del universo. En su trabajo continuo con Isabel Ayuda para la Vida y en este miniverso, su sensibilidad conect imagen, artesanos y propsito.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/yeraldin.png"}],comments:[{id:"la-taza-comment-1",quote:"La taza me mostr una frase que me persigui toda la semana.",author:"Usuario annimo"},{id:"la-taza-comment-2",quote:"No entend nada hasta que le agarr el modo.",author:"Sofa B."}],cartaTitle:"#EstoNoEsUnaTaza",notaAutoral:`Una taza que escucha.
Un marcador que mira.
Lo cotidiano tambin es ritual.`,iaProfile:{type:"IA ligera para pistas contextuales + WebAR.",interaction:"1 activacin guiada por objeto (escaneo breve).",tokensRange:"90140 tokens por activacin.",coverage:"Cubierto por suscriptores; no hay costo directo por usuario.",footnote:"La IA solo gua la pista; el ritual lo completa quien sostiene la taza."}},miniversoNovela:{label:"Literatura",type:"blog-series",slug:null,intro:"Aqu se cruzan la autoficcin, la novela grfica y las vidas que an no caben en escena. Fragmentos, procesos y pistas que solo existen cuando alguien las lee.",cartaTitle:"#PginaViva",notaAutoral:`La palabra devolvi lo que el gato se trag:
Mi Gato Encerrado
huy de s misma y se encontr.`,collaborators:[{id:"pepe-rojo",name:"Pepe Rojo",role:"Escritor y prlogo de Mi Gato Encerrado",bio:"Pepe Rojo acompa el Miniverso Literatura con una lectura precisa y generosa. Autor emblemtico de la narrativa fronteriza, ofreci el prlogo de Mi Gato Encerrado, abriendo el libro desde una mirada que entiende el artificio, la herida y la imaginacin como un mismo territorio. Su intervencin dio claridad y ruta al futuro de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/peperojo.jpeg"},{id:"groppe-imprenta",name:"Groppe Libros",role:"Edicin fsica",bio:"Acompaaron la primera edicin fsica de Mi Gato Encerrado con oficio paciente y preciso. Pusieron forma donde antes haba solo palabras: papel, tinta y cuidado. Gracias a su trabajo, este universo encontr tambin su cuerpo de libro.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/groppelibros.png"}],entries:[{id:"compra-libro",title:"Edicin fsica",description:"La novela completa en su versin impresa. Incluye QR secreto.",image:"/assets/edicion-fisica.png",type:"purchase-link",url:"/comprar-novela"},{id:"novel-apps",title:"Activa tu novela",description:"Cada formato tiene su propia app interactiva. La novela de autoficcin ya se puede activar; el cmic transmedia abre pronto su lector con pistas y capas expandidas.",type:"novel-apps",apps:[{id:"autoficcion-app",name:"Lector interactivo",description:"Lee los primeros fragmentos de la novela y desbloquea preguntas guiadas en cuatro planos de lectura: acadmico, psicolgico, narrativo y teatral.",snippet:{tagline:"Contraportada transmedia",text:"Al escanear el QR de tu ejemplar se desbloquean lecturas personalizadas. Aqu puedes probar una versin de inicio.",sideLayout:!0},ctaLabel:"Leer fragmentos",ctaAction:"openAutoficcionPreview"}]},{id:"comentarios-lectores",title:"Conversaciones con lectores",type:"quotes",quotes:[{quote:"No saba que un libro poda hablarme a mitad de la pgina.",author:"Lectora annima"}]}],ctaLabel:"Leer los primeros fragmentos",iaProfile:{type:"GPT-4o mini + voz sinttica para fragmentos.",interaction:"Gua de lectura y acompaamiento breve por captulo.",tokensRange:"150320 tokens por fragmento ledo.",coverage:"Cubierto por suscriptores; lectura sin costo adicional.",footnote:"La IA susurra; la historia sigue siendo tuya."}},miniversoSonoro:{label:"Sonoridades",type:"audio-dream",intro:"Este miniverso mezcla imgenes errantes, pistas sonoras y palabras mviles para que crees tu propia atmsfera. Solo entra, prende un video, ponle la msica que quieras, elige un poema y deja que la combinacin te sorprenda.",highlights:["Video que fluye solo.","Msica que t eliges.","Poemas que respiran en pantalla."],exploration:["El video corre por su cuenta  cambia con cada visita.","T eliges la msica  ajusta el nimo del sueo.","Escoge un poema  y observa cmo se desliza mientras todo ocurre."],closing:["Sueo en tres capas","Cada combinacin abre un sueo distinto.","Entra y crea el tuyo."],videoUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/videos-v/Vacio.mov",musicOptions:[{id:"silencio",label:"Silencio",url:""},{id:"ensayo-abierto",label:"Ensayo Abierto (pista)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/audio/cat_theme.m4a"}],poems:[{id:"pulmon",label:"Poema 1  Pulmn",text:"La noche se abre como un pulmn cansado."},{id:"cuerpo",label:"Poema 2  Cuerpo",text:"Lo que cae del sueo tambin cae del cuerpo."}],cartaTitle:"#SueoEnCapas",notaAutoral:`Suea una imagen.
Ajusta el pulso.
Pwermite que el poema respire sin ti.`,iaProfile:{type:"GPT-4o mini para poemas mviles + curadura sonora.",interaction:"Seleccin de poema y mezcla guiada.",tokensRange:"130280 tokens por mezcla.",coverage:"Incluido en la suscripcin transmedia.",footnote:"La IA elige la forma; t eliges el nimo."},collaborators:[{id:"lia-perez",name:"La Prez",role:"Diseo Sonoro",bio:"Artista sonora con ms de doce aos de experiencia. Fundadora de Concrete Sounds, ha colaborado en filmes como Ya no estoy aqu y Monos. Su especialidad es la creacin de paisajes inmersivos que amplan la dimensin sensorial del teatro.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/lia.png"},{id:"diego-madera",name:"Diego Madera",role:"Compositor",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio. Su pieza original acompaa los pasajes emocionales de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png"}]},miniversoGrafico:{label:"Grficos",type:"graphic-lab",intro:"Coleccin viva de exploraciones visuales: cmics en curso, vietas interactivas, posters simblicos, caricaturas conceptuales, murales colaborativos y avances con IA/tcnicas mixtas.",cartaTitle:"#FronteraAbierta",notaAutoral:`Garabatea tu lmite, dibuja tu refugio.
Lo grfico como portal emocional.
Cada trazo se siente antes de entenderse.`,collaborators:[{id:"manuel-sarabia",name:"Manuel Sarabia",role:"Ilustrador y crtico de cine",bio:"Desde Sadaka Estudio traz los primeros storyboards de Tres pies al gato, ayudando a imaginar cmo se ve un mundo cuando an no existe.",image:"/images/placeholder-colaboradores.jpg"}],collection:["Cmics en curso y por venir","Vietas interactivas","Posters simblicos","Caricaturas conceptuales","Murales colaborativos","Avances con IA y tcnicas mixtas"],swipe:{title:"Swipe narrativo (modo vieta)",description:"Haz scroll hacia arriba para navegar por tarjetas verticales.",steps:["Cada tarjeta revela una escena, una decisin o una herida.","Desliza y elige: quieres ver lo que pasa o lo que duele?"]},swipeShowcases:[{id:"tres-pies-galeria",title:"Tres Pies al Gato",description:"Exploraciones de la novela grfica.",previewImage:"/assets/silvestre-comic.jpeg",type:"internal-reading",previewMode:"pdf",previewPdfUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/grafico/Cap%20Aula.pdf",swipeNotes:["Swipe vertical en PDF; cada pgina es una vieta-ritual.","Optimizado para mvil y tableta."]}],ctas:{primary:"Explora el miniverso grfico",secondary:"Smate a la residencia grfica"},iaProfile:{type:"IA asistida para glifos y variaciones grficas.",interaction:"Swipe narrativo con prompts curados.",tokensRange:"110220 tokens por sesin.",coverage:"Cubierto por suscriptores; sin costo por visitante.",footnote:"La IA abre caminos; el trazo final sigue siendo humano."}},miniversoMovimiento:{label:"Movimiento  Diosas en danza",type:"movement-ritual",pendingName:"La Ruta de las Diosas",tagline:"Ciudades como escenario. Tecnologa como portal.",overview:["En este miniverso, el cuerpo se convierte en conjuro. La danza, en escritura. Y la ciudad en altar vivo.","La Ruta de las Diosas es una experiencia coreogrfica transmedial que recorre plazas, parques y espacios pblicos para activar un ritual contemporneo con avatares, realidad aumentada y movimiento colectivo."],diosaHighlights:["Una presencia digital inspirada en mitologas mesoamericanas.","Diseada con motion capture.","Acompaada de msica original.","Proyectada con videomapping lser durante las noches."],dayNight:["Durante el da, los talleres coreogrficos en comunidad trazan mapas sensibles sobre el territorio.","Durante la noche, los cuerpos fsicos y virtuales se funden en un mismo acto escnico."],invitation:"Y t? Bailars con nosotrxs o solo mirars pasar a las diosas?",actions:[{id:"ruta",label:"Explora su ruta",description:"Sigue el mapa interactivo o la lnea de tiempo animada de cada estacin (Tijuana, La Paz, etc.).",badge:"CTA principal",buttonLabel:"Explorar",toastMessage:"Muy pronto liberaremos el mapa coreogrfico y el timeline de estaciones.",icon:U2},{id:"marcador-ar",label:"Activa un marcador AR en tu ciudad",description:"Activa la cmara (WebAR) o abre la gua para instalar la app y recibir instrucciones.",buttonLabel:"Activar AR",toastMessage:"La gua WebAR se est terminando; te avisaremos cuando la cmara pueda abrir el portal.",icon:R3},{id:"talleres",label:"Inscrbete a los talleres coreogrficos",description:"Conecta con la comunidad y reserva tu lugar en los talleres diurnos que trazan la ruta.",buttonLabel:"Inscribirme",toastMessage:"Abriremos el formulario conectado a Supabase para registrar tu participacin.",icon:R8},{id:"livestream",label:"Sigue el livestream de la funcin final",description:"Activa un embed o cuenta regresiva para ver la ruta completa cuando llegue la noche.",buttonLabel:"Ver livestream",toastMessage:"El livestream y su countdown estarn activos antes de la funcin final.",icon:C8}],collaborators:[],cartaTitle:"#RutaCoreogrfica",notaAutoral:`El cuerpo es conjuro.
La ciudad tiembla y abre un portal.
La ruta solo existe si alguien baila.`,iaProfile:{type:"IA de ruta + prompts de movimiento guiados en app.",interaction:"Seleccin de estacin y avatar ritual en AR.",tokensRange:"180320 tokens por usuario.",coverage:"Incluido en la suscripcin transmedia.",footnote:"La IA gua; el rito sucede cuando alguien baila."}},oraculo:{label:"Orculos",type:"oracle",intro:"Preguntas que no buscan respuestas, sino resonancia. Alimenta la mente del Gato y gana GATokens por compartir tu pensamiento. El Orculo no da respuestas, pero s te recompensa por cada huella que dejas en la red del misterio. Tu pensamiento tambin construye este universo.",loops:["Responde preguntas simblicas, filosficas, existenciales, absurdas o personales.","Cada respuesta se guarda como semilla de conocimiento simblico para IA, literatura y obra interactiva.","Mientras ms participas, ms GATokens generas (proof-of-resonance con lmites diarios anti-spam)."],rewards:[{title:"Responder a una pregunta profunda",tokens:"+20 GAT",description:"Comparte una reflexin que vibre en lo simblico o emocional."},{title:"Elegir y comentar reflexiones de otrxs",tokens:"+30 GAT",description:"Modo foro: amplifica ideas y suma tu mirada."},{title:"Volver tras una semana",tokens:"+30 GAT",description:"Retorno que sostiene el hilo y da seguimiento a tu huella."},{title:"Invitar a alguien con su primera reflexin",tokens:"+50 GAT",description:"Trae a otra mente al Orculo. Recompensa nica por invitacin."}],limitsNote:"Lmites por da para evitar spam y mantener el valor simblico.",seedNotes:["Las respuestas se almacenan como semillas de conocimiento simblico.","Enriquecen una base de datos viviente para literatura, IA personalizada y obra interactiva.","Cada huella deja seal en la mente del Gato."],ctaLabel:"Pregunta, responde y mintea",ctaDescription:"El Orculo no da respuestas, pero s te recompensa con GATokens por cada huella que dejas en la red del misterio. Tu pensamiento tambin construye este universo.",tagline:" Interaccin que deja huella.  Reflexin que te recompensa.",cartaTitle:"#MinadoSimblico",notaAutoral:`Juega con el misterio.
Piensa con el corazn.
Mintea con el alma.`,iaProfile:{type:"GPT-4o + embeddings simblicos curados por la comunidad.",interaction:"13 reflexiones cortas por sesin; foro breve guiado.",tokensRange:"20120 tokens por reflexin (promedio ~20 GAT).",coverage:"Cubierto por suscriptores; las recompensas son GATokens internos.",footnote:"El minado es simblico y humano: no es financiero, es resonancia."}}},ba=({showcaseId:n,title:e,description:t,buttonLabel:r,className:s=""})=>{var c,d,f,p,m,y;const{user:i}=Pd();(c=i==null?void 0:i.user_metadata)!=null&&c.isSubscriber||(d=i==null?void 0:i.user_metadata)!=null&&d.is_subscriber||((f=i==null?void 0:i.user_metadata)==null?void 0:f.subscription_status)==="active"||(y=(m=(p=i==null?void 0:i.app_metadata)==null?void 0:p.roles)==null?void 0:m.includes)!=null&&y.call(m,"subscriber"),S.useEffect(()=>{NJ()},[]);const[a,o]=S.useState("idle"),l=S.useCallback(async()=>{if(a==="loading")return;o("loading");const{success:g,error:w}=await SJ({showcaseId:n,user:i});if(!g){console.error("[ShowcaseReaction] Error guardando like:",w),Fe({description:"No pudimos registrar el like. Intenta de nuevo ms tarde."}),o("idle");return}o("success"),Fe({description:"Gracias por tu apoyo en este escaparate."})},[n,a,i]);return h.jsxs("div",{className:`mt-4 flex flex-col gap-3 rounded-2xl border border-white/10 bg-black/20 p-4 ${s}`,children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.35em] text-slate-500",children:e}),h.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:t})]}),h.jsx("button",{type:"button",onClick:l,className:`rounded-full p-3 transition ${a==="success"?"bg-gradient-to-r from-pink-500 via-rose-500 to-yellow-500 shadow-[0_0_25px_rgba(244,114,182,0.6)] text-white border border-transparent":"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 text-white hover:from-purple-500 hover:to-indigo-500"}`,disabled:a==="loading",children:h.jsx(V2,{size:20})})]}),r?h.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:a==="loading"?"Enviando":r}):null]})},zI=[{id:"miniversos",title:"Dramaturgia",icon:E3,iconClass:"text-purple-300",notaAutoral:"Aqu nunca abaca bien. Por lo menos no hasta el final.",iaTokensNote:"Energa requerida: ~300 GAT"},{id:"lataza",title:"Artesanas",icon:A3,iconClass:"text-amber-300",notaAutoral:"Un objeto cotidiano con WebAR que abren un portal. La Taza no acompaa: revela. Lo que sostiene no es barro, sino vnculo.",iaTokensNote:"Mantener ritual: ~90 GAT."},{id:"miniversoNovela",title:"Literatura",icon:z2,iconClass:"text-emerald-300",notaAutoral:"La novela es donde la escena se desborda. Fragmentos que respiran distinto cuando alguien los lee. Aqu la historia sigue probndose.",iaTokensNote:"Energa viva: ~150 GAT."},{id:"miniversoGrafico",title:"Grficos",icon:H2,iconClass:"text-fuchsia-300",notaAutoral:`Garabatea tu lmite, dibuja tu refugio.
Lo grfico como portal emocional.
Cada trazo se siente antes de entenderse.`,iaTokensNote:"Requiere ~110 GAT."},{id:"copycats",title:"Cine",icon:_3,iconClass:"text-rose-300",notaAutoral:"La cmara mir lo que el teatro no poda sostener. CopyCats cuestiona; Quirn hiere con luz. Este espacio guarda esas miradas.",iaTokensNote:"Requiere ~250 de atencin."},{id:"miniversoSonoro",title:"Sonoridades",icon:P3,iconClass:"text-cyan-300",notaAutoral:"Imagen, msica y palabra en suspensin. Cada mezcla inventa otro nimo. Aqu el sueo se edita solo.",iaTokensNote:"Requiere ~130 GAT de mezcla."},{id:"miniversoMovimiento",title:"Movimiento",icon:U2,iconClass:"text-sky-300",notaAutoral:"Diosas en danza. El mapa vibra si alguien lo recorre.",iaTokensNote:"~280 por mapa."},{id:"detodxs",title:"Apps",icon:q2,iconClass:"text-lime-300",notaAutoral:"Tecnologa como acompaamiento, no como solucin. Experiencias que cuidan, preguntan y extienden la historia cuando nadie est mirando.",iaTokensNote:"Requiere ~220 GAT de acceso."},{id:"oraculo",title:"Orculo",icon:ik,iconClass:"text-indigo-300",notaAutoral:"Juega con el misterio. Piensa con el corazn. Mintea con el alma.",iaTokensNote:"Aqu el Gato te regala GAT."}],$I=[{id:"tratamientos",title:"Tratamientos emocionales",description:"Tu suscripcin asigna hasta 6 sesiones a un joven sin costo para su familia. Isabel Ayuda para la Vida, A.C. activa las sesiones cuando se detecta riesgo emocional.",icon:T3,metric:"6 sesiones promedio por suscriptor"},{id:"residencias",title:"Residencias creativas",description:"Laboratorios de 2 meses donde arte y acompaamiento reparan memoria y cuerpo. Cada 17 suscripciones financian una residencia completa.",icon:H2,metric:"3 residencias activas por temporada"},{id:"app-escolar",title:"App Causa Social en escuelas",description:"Implementacin y seguimiento semestral de la app de deteccin temprana. 75 suscripciones financian 1 escuela por semestre.",icon:q2,metric:"5 escuelas atendidas por ciclo escolar"}],PJ=({open:n,onClose:e})=>!n||typeof document>"u"?null:Up.createPortal(h.jsx("div",{className:"fixed inset-0 z-[200] overflow-auto bg-black/80 backdrop-blur-xl p-6",children:h.jsxs("div",{className:"max-w-3xl mx-auto",children:[h.jsx("button",{type:"button",onClick:e,className:"text-slate-300 hover:text-white mb-6",children:"Cerrar "}),h.jsx(yJ,{})]})}),document.body),jJ=()=>{var PP,jP,RP,MP,ox,IP;const n=S.useMemo(()=>{const H={},ee=be=>{if(typeof be!="string")return 0;const ze=be.match(/(\d+)/);return ze?Number.parseInt(ze[1],10):0},Q=(be,ze)=>{if(H[be])return;let tt=0;switch(be){case"copycats":tt=$n.quironFull;break;case"miniversoGrafico":tt=$n.graficoSwipe;break;case"miniversoNovela":tt=$n.novelaChapter;break;case"miniversoSonoro":tt=$n.sonoroMix;break;case"lataza":tt=$n.tazaActivation;break;case"miniversoMovimiento":tt=$n.movimientoRuta;break;default:tt=0}tt||(tt=ee(ze)),H[be]=tt};return zI.forEach(be=>Q(be.id,be.iaTokensNote)),H},[]),[e,t]=S.useState(!1),[r,s]=S.useState(null),[i,a]=S.useState(null),[o,l]=S.useState({}),c=S.useRef(null),[d,f]=S.useState($I[0].id),[p,m]=S.useState(null),[y,g]=S.useState(null),[w,v]=S.useState(null),[x,b]=S.useState(null),C=S.useRef(null),_=S.useRef(null),[E,N]=S.useState(0),j=Math.max(E-48,320),[M,O]=S.useState(!1),[L,F]=S.useState(!1),[U,B]=S.useState(!1),[I,D]=S.useState(!1),[z,V]=S.useState(!1),[q,P]=S.useState(""),[Y,K]=S.useState(""),[R,ie]=S.useState(!1),[ke,me]=S.useState(!1),ve=S.useRef(null),Ke=S.useRef(""),Re=S.useRef(null),[xe,He]=S.useState(!1),[Be,ge]=S.useState(!1),[Z,le]=S.useState(null),{isMobileViewport:ye,canUseInlinePlayback:Ve,requestMobileVideoPresentation:Nt}=kJ(),{user:De}=Pd(),[Br,tr]=S.useState(!1),[zr,Ks]=S.useState(!1),[ma,Ys]=S.useState(0),[_i,$]=S.useState(!1),[X,oe]=S.useState(0),[qe,et]=S.useState(!1),[Fn,Qs]=S.useState(!1),[xs,Ro]=S.useState(!1),[fc,gt]=S.useState(!1),[ga,gr]=S.useState(150),[uP,dP]=S.useState(!1),[Vre,hP]=S.useState(!1),[fP,Xk]=S.useState(!1),[pP,Kk]=S.useState(!1),[tx,Yk]=S.useState(!1),[mP,Qk]=S.useState(!1),[nx,Jk]=S.useState(!1),[S$,rx]=S.useState(!1),[k$,gP]=S.useState(null),[Ti,Zk]=S.useState(_J),[A$,yP]=S.useState(!1),[E$,vP]=S.useState(!1),[eA,sx]=S.useState({}),[Js,tA]=S.useState({}),[C$,xP]=S.useState(null),Qp=S.useRef(null),Jp=S.useRef(null),_$=!!De,nA=!!((PP=De==null?void 0:De.user_metadata)!=null&&PP.isSubscriber||(jP=De==null?void 0:De.user_metadata)!=null&&jP.is_subscriber||((RP=De==null?void 0:De.user_metadata)==null?void 0:RP.subscription_status)==="active"||(IP=(ox=(MP=De==null?void 0:De.app_metadata)==null?void 0:MP.roles)==null?void 0:ox.includes)!=null&&IP.call(ox,"subscriber")),Id=S.useMemo(()=>EJ.every(H=>Js==null?void 0:Js[H]),[Js]);S.useEffect(()=>{var ya,mc,Zp,em,tm,nm,rm,sm,im,am,om;if(typeof window>"u")return;((ya=window.localStorage)==null?void 0:ya.getItem("gatoencerrado:quiron-spent"))==="true"&&(tr(!0),gt(!0));const ee=(mc=window.localStorage)==null?void 0:mc.getItem("gatoencerrado:novela-questions");ee&&!Number.isNaN(Number.parseInt(ee,10))&&Ys(Number.parseInt(ee,10)),((Zp=window.localStorage)==null?void 0:Zp.getItem("gatoencerrado:graphic-spent"))==="true"&&Ks(!0),((em=window.localStorage)==null?void 0:em.getItem("gatoencerrado:sonoro-spent"))==="true"&&$(!0);const ze=(tm=window.localStorage)==null?void 0:tm.getItem("gatoencerrado:gatokens-available");ze&&!Number.isNaN(Number.parseInt(ze,10))?gr(Number.parseInt(ze,10)):(nm=window.localStorage)==null||nm.setItem("gatoencerrado:gatokens-available","150");const tt=(rm=window.localStorage)==null?void 0:rm.getItem("gatoencerrado:taza-activations");tt&&!Number.isNaN(Number.parseInt(tt,10))&&oe(Number.parseInt(tt,10));const on=(sm=window.localStorage)==null?void 0:sm.getItem("gatoencerrado:showcase-energy");if(on)try{const bs=JSON.parse(on);sx({...n,...bs})}catch(bs){console.warn("Error parsing showcase energy cache",bs),sx(n)}else sx(n),(im=window.localStorage)==null||im.setItem("gatoencerrado:showcase-energy",JSON.stringify(n));const Ni=(am=window.localStorage)==null?void 0:am.getItem("gatoencerrado:showcase-boosts");if(Ni)try{tA(JSON.parse(Ni))}catch(bs){console.warn("Error parsing showcase boosts cache",bs),tA({})}const yr=(om=window.localStorage)==null?void 0:om.getItem(DI);if(yr)try{const bs=JSON.parse(yr);Zk(lx=>({...lx,...bs}))}catch(bs){console.warn("Error parsing explorer badge cache",bs)}},[n]),S.useEffect(()=>{if(typeof window>"u")return;const H=()=>rx(!0);return window.addEventListener("gatoencerrado:resume-contribution",H),()=>window.removeEventListener("gatoencerrado:resume-contribution",H)},[]),S.useEffect(()=>{var H;typeof window>"u"||(H=window.localStorage)==null||H.setItem(DI,JSON.stringify(Ti))},[Ti]),S.useEffect(()=>()=>{Qp.current&&clearTimeout(Qp.current),Jp.current&&clearTimeout(Jp.current)},[]),S.useEffect(()=>{if(typeof window>"u")return;const H=Q=>{if(Q.key==="gatoencerrado:novela-questions"){const be=Q.newValue?Number.parseInt(Q.newValue,10):0;Number.isNaN(be)||Ys(be)}if(Q.key==="gatoencerrado:sonoro-spent"&&Q.newValue==="true"&&$(!0),Q.key==="gatoencerrado:sonoro-spent"&&Q.newValue===null&&$(!1),Q.key==="gatoencerrado:graphic-spent"&&Ks(Q.newValue==="true"),Q.key==="gatoencerrado:taza-activations"){const be=Q.newValue?Number.parseInt(Q.newValue,10):0;Number.isNaN(be)||oe(be)}},ee=Q=>{var be,ze,tt,on;((be=Q==null?void 0:Q.detail)==null?void 0:be.id)==="novela"&&typeof Q.detail.count=="number"&&Ys(Q.detail.count),((ze=Q==null?void 0:Q.detail)==null?void 0:ze.id)==="sonoro"&&typeof Q.detail.spent=="boolean"&&$(Q.detail.spent),((tt=Q==null?void 0:Q.detail)==null?void 0:tt.id)==="grafico"&&typeof Q.detail.spent=="boolean"&&Ks(Q.detail.spent),((on=Q==null?void 0:Q.detail)==null?void 0:on.id)==="taza"&&typeof Q.detail.count=="number"&&oe(Q.detail.count)};return window.addEventListener("storage",H),window.addEventListener("gatoencerrado:miniverse-spent",ee),()=>{window.removeEventListener("storage",H),window.removeEventListener("gatoencerrado:miniverse-spent",ee)}},[]),S.useEffect(()=>{!Id||Ti.unlocked||Zk(H=>({...H,unlocked:!0,unlockedAt:Date.now()}))},[Id,Ti.unlocked]),S.useCallback(()=>{if(uP)return;dP(!0),hP(!0),new Promise(ee=>setTimeout(ee,1100)).then(()=>{hP(!1),dP(!1),Ys(ee=>{var be;const Q=ee+1;return typeof window<"u"&&((be=window.localStorage)==null||be.setItem("gatoencerrado:novela-questions",String(Q)),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"novela",spent:!0,amount:25,count:Q}}))),Q})})},[uP]);const bP=S.useCallback(()=>{var H;_i||(Xk(!0),setTimeout(()=>Xk(!1),1100),$(!0),typeof window<"u"&&((H=window.localStorage)==null||H.setItem("gatoencerrado:sonoro-spent","true"),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"sonoro",spent:!0,amount:130}}))))},[_i]),T$=S.useCallback(()=>{if(!De){et(ee=>!ee);return}if(Fn)return;if(ga<$n.quironFull){et(!1),Fe({description:`Necesitas ${$n.quironFull} GATokens para ver el cortometraje completo. Tu saldo actual es ${ga}.`});return}et(!1),Qs(!0),Ro(!0),new Promise(ee=>setTimeout(ee,1100)).then(()=>{var Q,be;gt(!0),Ro(!1),Qs(!1),tr(!0);const ee=Math.max(ga-$n.quironFull,0);gr(ee),typeof window<"u"&&((Q=window.localStorage)==null||Q.setItem("gatoencerrado:quiron-spent","true"),(be=window.localStorage)==null||be.setItem("gatoencerrado:gatokens-available",String(ee)),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"cine",spent:!0,amount:$n.quironFull}})))})},[ga,Fn,De]),N$=S.useCallback(()=>{gt(!1)},[]),rA=()=>ye?h.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:h.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-black/70 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-white/80",children:[h.jsx(M8,{size:14}),"Ver video"]})}):null,pc=S.useCallback((H=null)=>{s(typeof H=="string"?H:null),t(!0)},[]),P$=S.useCallback(()=>{t(!1),s(null)},[]),wP=S.useCallback(async H=>{const ee=Nm[H];if(!(!ee||ee.type==="blog-series"||!ee.slug)){l(Q=>({...Q,[H]:{...Q[H]??{},status:"loading",error:null}}));try{const Q=await vK(ee.slug);if(!Q)throw new Error("No encontramos el texto asociado a este miniverso.");l(be=>({...be,[H]:{status:"success",post:Q,error:null}}))}catch(Q){l(be=>({...be,[H]:{status:"error",post:null,error:(Q==null?void 0:Q.message)??"Ocurri un error al cargar este escaparate."}}))}}},[]),j$=S.useCallback(H=>{if(Nm[H]){a(Q=>Q===H?null:H);const ee=Nm[H];if(ee.slug&&ee.type!=="blog-series"){const Q=o[H];(!Q||Q.status==="error")&&wP(H)}return}pc()},[pc,wP,o]),R$=S.useCallback(H=>{var ee;H&&(window.dispatchEvent(new CustomEvent("gatoencerrado:open-blog",{detail:{slug:H}})),(ee=document.getElementById("dialogo-critico"))==null||ee.scrollIntoView({behavior:"smooth",block:"start"}))},[]),SP=S.useCallback(async H=>{if(!H)return!1;try{return await xb("/api/silvestre-voice",{method:"POST",headers:{"X-User-Id":(De==null?void 0:De.id)??"anonymous"},body:JSON.stringify({mensaje:H})}),K(""),me(!0),setTimeout(()=>me(!1),1200),!0}catch(ee){return console.error("[Silvestre Voice] Error sending transcript:",ee),K("No pudimos enviar tu mensaje de voz. Intenta nuevamente ms tarde."),me(!0),setTimeout(()=>me(!1),1200),!1}},[De]),sA=S.useCallback(()=>{if(Re.current&&(clearTimeout(Re.current),Re.current=null),ve.current&&R)try{ve.current.stop()}catch(H){console.error("[Silvestre Voice] stop error:",H)}ie(!1)},[R]),M$=S.useCallback(()=>{if(typeof window>"u")return;z?I||D(!0):(D(!0),V(!0));const H=window.SpeechRecognition||window.webkitSpeechRecognition;if(!H){K("Tu navegador no permite activar el micrfono. Puedes escribirle a Silvestre si prefieres."),window.dispatchEvent(new CustomEvent("gatoencerrado:open-silvestre"));return}if(!ve.current){const ee=new H;ee.continuous=!0,ee.interimResults=!0,ee.lang="es-MX",ee.maxAlternatives=1,ee.onresult=Q=>{const ze=Array.from(Q.results).map(tt=>{var on;return((on=tt[0])==null?void 0:on.transcript)??""}).join(" ");Ke.current=ze,P(ze)},ee.onerror=Q=>{console.error("[Silvestre Voice] recognition error:",Q),K("No pudimos acceder al micrfono. Intenta nuevamente."),ie(!1)},ee.onend=()=>{ie(!1);const Q=Ke.current.trim();Q&&(SP(Q),Ke.current="")},ve.current=ee}if(R){sA();return}try{ve.current.start(),ie(!0),K(""),Re.current&&clearTimeout(Re.current),Re.current=setTimeout(()=>{sA()},45e3)}catch(ee){console.error("[Silvestre Voice] start error:",ee),K("No pudimos abrir el micrfono. Intenta nuevamente.")}window.dispatchEvent(new CustomEvent("gatoencerrado:open-silvestre"))},[z,R,I,SP,sA]);S.useEffect(()=>()=>{Re.current&&clearTimeout(Re.current)},[]);const kP=S.useCallback(H=>{H!=null&&H.src&&m({src:H.src,title:H.title??"",description:H.description??""})},[]),ix=S.useCallback(()=>{m(null)},[]),I$=S.useCallback(()=>{var H;(H=_.current)==null||H.scrollIntoView({behavior:"smooth",block:"start"})},[]),AP=S.useCallback(H=>{H!=null&&H.src&&(g({src:H.src,title:H.title??"",description:H.description??""}),v(null),b(null))},[]),ax=S.useCallback(()=>{g(null),v(null),b(null)},[]),L$=S.useCallback(H=>{var Q;if(!(H!=null&&H.previewPdfUrl)||nx)return;Jk(!0);const ee=()=>{AP({src:H.previewPdfUrl,title:H.title,description:H.description?`${H.description}  Modo swipe vertical.`:"Modo swipe vertical del lector visual interactivo."}),setTimeout(()=>Jk(!1),150)};if(!zr){Ks(!0),Qk(!0),setTimeout(()=>Qk(!1),1100),typeof window<"u"&&((Q=window.localStorage)==null||Q.setItem("gatoencerrado:graphic-spent","true"),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"grafico",spent:!0,amount:$n.graficoSwipe}}))),setTimeout(ee,900);return}ee()},[zr,AP,nx]),D$=S.useCallback(()=>{var Q;if(Math.max(90-X*30,0)<=0){Fe({description:"Sin gatokens para esta activacin."});return}if(tx)return;const ee=X+1;oe(ee),Kk(!0),Yk(!0),setTimeout(()=>{Kk(!1),Yk(!1),O(!0),typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches?(F(!0),document.body.classList.add("overflow-hidden")):F(!1)},950),typeof window<"u"&&((Q=window.localStorage)==null||Q.setItem("gatoencerrado:taza-activations",String(ee)),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"taza",spent:!0,amount:30,count:ee}})))},[tx,X]),EP=S.useCallback(()=>{O(!1),F(!1),document.body.classList.remove("overflow-hidden"),Yk(!1)},[]);S.useCallback(()=>{var H,ee,Q,be,ze;tr(!1),gt(!1),Ys(0),$(!1),Xk(!1),Ks(!1),Qk(!1),Jk(!1),oe(0),Kk(!1),typeof window<"u"&&((H=window.localStorage)==null||H.removeItem("gatoencerrado:quiron-spent"),(ee=window.localStorage)==null||ee.removeItem("gatoencerrado:novela-questions"),(Q=window.localStorage)==null||Q.removeItem("gatoencerrado:sonoro-spent"),(be=window.localStorage)==null||be.removeItem("gatoencerrado:graphic-spent"),(ze=window.localStorage)==null||ze.removeItem("gatoencerrado:taza-activations"),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"novela",spent:!1,amount:0,count:0}})),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"cine",spent:!1,amount:0}})),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"sonoro",spent:!1,amount:0}})),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"grafico",spent:!1,amount:0}})),window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"taza",spent:!1,amount:0,count:0}})))},[]);const O$=S.useCallback(({numPages:H})=>{v(H)},[]),W=i?Nm[i]:null,Lt=i?o[i]:null,CP=S.useMemo(()=>{var H;return(H=Lt==null?void 0:Lt.post)!=null&&H.content?Lt.post.content.split(/\n{2,}/).map(ee=>ee.trim()).filter(Boolean):[]},[Lt]);S.useEffect(()=>{i&&c.current&&c.current.scrollIntoView({behavior:"smooth",block:"start"})},[i]),S.useEffect(()=>{i!=="copycats"&&(He(!1),le(null))},[i]),S.useEffect(()=>{i!=="lataza"&&(O(!1),F(!1),document.body.classList.remove("overflow-hidden"))},[i]),S.useEffect(()=>{if(!p&&!y)return;const H=ee=>{ee.key==="Escape"&&(p&&ix(),y&&ax())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[p,y,ix,ax]),S.useEffect(()=>{if(!y)return;const H=()=>{C.current&&N(C.current.offsetWidth)};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[y]),S.useEffect(()=>()=>{document.body.classList.remove("overflow-hidden")},[]),S.useEffect(()=>()=>{var H,ee;(ee=(H=ve.current)==null?void 0:H.abort)==null||ee.call(H),ve.current=null},[]);const F$=H=>{Fe({description:H||"Muy pronto liberaremos la activacin WebAR de este objeto."})},_P=S.useCallback(async()=>{var H;if(typeof navigator>"u"||!((H=navigator.mediaDevices)!=null&&H.getUserMedia)){Fe({description:"Tu dispositivo no permite abrir la cmara desde el navegador."});return}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})).getTracks().forEach(Q=>Q.stop()),Fe({description:"Listo. En la versin final validaremos el QR con geolocalizacin para redimir tu ejemplar."})}catch(ee){console.error("Error al acceder a la cmara:",ee),Fe({description:"No pudimos acceder a la cmara. Revisa los permisos e intntalo de nuevo."})}},[]),B$=S.useCallback(H=>{if(H){if(H.ctaUrl){window.open(H.ctaUrl,"_blank","noopener,noreferrer");return}if(H.ctaAction==="openCamera"){_P();return}if(H.ctaAction==="openAutoficcionPreview"){B(!0);return}Fe({description:H.ctaMessage||"Muy pronto liberaremos esta app interactiva."})}},[_P]),z$=S.useCallback((H,ee=null)=>{H&&pc(ee)},[pc]),$$=S.useCallback((H=null)=>{gP(H),rx(!0)},[]),V$=S.useCallback(()=>{vP(!0)},[]),U$=S.useCallback(()=>{vP(!1)},[]),H$=S.useCallback(()=>{const H=document.getElementById("cta");if(H){H.scrollIntoView({behavior:"smooth",block:"center"});return}rx(!0)},[]),TP=S.useCallback((H="subscriber")=>{if(!Id||Ti.rewardClaimed)return;const ee=H==="subscriber"?xE:0;ee<=0||(yP(!0),gr(Q=>{var ze;const be=Q+ee;return typeof window<"u"&&((ze=window.localStorage)==null||ze.setItem("gatoencerrado:gatokens-available",String(be))),be}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:"explorer-badge",boost:!0,amount:ee}})),Zk(Q=>({...Q,rewardClaimed:!0,claimedType:H,claimedAt:Date.now()})),Jp.current&&clearTimeout(Jp.current),Jp.current=setTimeout(()=>yP(!1),1300))},[Id,Ti.rewardClaimed]),q$=S.useCallback(H=>{if(!H||Js!=null&&Js[H])return;const ee=n[H]??0;ee&&(tA((Q={})=>{var ze;const be={...Q,[H]:!0};return typeof window<"u"&&((ze=window.localStorage)==null||ze.setItem("gatoencerrado:showcase-boosts",JSON.stringify(be))),be}),sx((Q={})=>{var on;const ze=((Q==null?void 0:Q[H])??n[H])+ee,tt={...Q,[H]:ze};return typeof window<"u"&&((on=window.localStorage)==null||on.setItem("gatoencerrado:showcase-energy",JSON.stringify(tt))),tt}),gr(Q=>{var ze;const be=Q+ee;return typeof window<"u"&&((ze=window.localStorage)==null||ze.setItem("gatoencerrado:gatokens-available",String(be))),be}),typeof window<"u"&&window.dispatchEvent(new CustomEvent("gatoencerrado:miniverse-spent",{detail:{id:H,boost:!0,amount:ee}})),xP(H),Qp.current&&clearTimeout(Qp.current),Qp.current=setTimeout(()=>{xP(Q=>Q===H?null:Q)},1400))},[n,Js]);S.useEffect(()=>{!Id||!nA||Ti.rewardClaimed||TP("subscriber")},[Id,Ti.rewardClaimed,TP,nA]);const iA=()=>{if(!(W!=null&&W.notaAutoral))return null;const H=W.id??i,ee=OI[H]??OI.default,Q=Qx[H]??Qx.default,be=W.type==="tragedia",ze=FI[H]??FI.default;return h.jsxs("div",{className:"relative flex flex-col gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Mini-verso Autoral"}),h.jsx(TJ,{title:W.cartaTitle||"Nota autoral",verse:W.notaAutoral,palette:{gradient:Q,border:ee.border,text:ee.text,accent:ee.accent,background:ee.background},effect:ze,isTragedia:be,onFirstReveal:()=>q$(H),celebration:C$===H})]})},NP=(H="Pronto liberaremos la carta completa de este miniverso.")=>W!=null&&W.slug?(Lt==null?void 0:Lt.status)==="loading"?h.jsx("p",{className:"text-slate-400 text-sm",children:"Cargando la carta que acompaa a este miniverso"}):(Lt==null?void 0:Lt.status)==="error"?h.jsx("p",{className:"text-red-300 text-sm",children:Lt.error}):(Lt==null?void 0:Lt.status)==="success"&&Lt.post?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400 mb-4",children:[Lt.post.author?h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(ak,{size:16}),Lt.post.author,Lt.post.author_role?h.jsxs("span",{className:"text-slate-500",children:["/ ",Lt.post.author_role]}):null]}):null,Lt.post.published_at?h.jsx("span",{children:new Date(Lt.post.published_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}):null]}),h.jsx("h4",{className:"font-display text-2xl text-slate-100 mb-6",children:Lt.post.title}),h.jsx("div",{className:"space-y-5 text-slate-200 leading-relaxed font-light",children:CP.length===0?h.jsx("p",{children:"Muy pronto abriremos el expediente completo de este miniverso. Gracias por tu curiosidad."}):CP.map((ee,Q)=>h.jsx("p",{children:ee},Q))})]}):h.jsx("p",{className:"text-slate-400 text-sm",children:H}):null,G$=()=>{var ee,Q,be,ze,tt,on,Ni,yr,ya,mc,Zp,em,tm,nm,rm,sm,im,am,om,bs,lx,LP,DP,OP,FP,BP,zP,$P,VP,UP,HP,qP,GP,WP,XP,KP;if(!W)return h.jsx("p",{className:"text-slate-400 text-sm",children:"Selecciona un miniverso para explorar su carta y materiales."});if(W.type==="object-webar"){const fe=`${i??"object-webar"}-video`,ae=Math.max(90-X*30,0);return h.jsxs("div",{className:"space-y-8",children:[fc&&((ee=W.quiron)!=null&&ee.fullVideo)?h.jsx("div",{className:"fixed inset-0 z-[120] bg-black/85 backdrop-blur-sm p-4 sm:p-6 overflow-auto",children:h.jsxs("div",{className:"max-w-5xl mx-auto space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-amber-200",children:"Cortometraje completo desbloqueado"}),h.jsx(we,{variant:"outline",className:"border-white/30 text-slate-100 hover:bg-white/10",onClick:N$,children:"Cerrar"})]}),h.jsx("div",{className:"rounded-2xl border border-white/15 bg-black/40 overflow-hidden shadow-2xl",children:renderMedia({id:W.quiron.fullVideo.id||"quiron-full",label:W.quiron.fullVideo.label||"Cortometraje completo",url:W.quiron.fullVideo.url})})]})}):null,(Q=W.collaborators)!=null&&Q.length?h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),h.jsx("button",{type:"button",onClick:()=>He(G=>!G),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:xe?"Ocultar":"Ver"})]}),xe?h.jsx("div",{className:"space-y-3",children:W.collaborators.map((G,se)=>{const Ae=Z===G.id,Ee=G.image||"/images/placeholder-colaboradores.jpg";return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[h.jsxs("button",{type:"button",onClick:()=>le(Ye=>Ye===G.id?null:G.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:Ee,alt:`Retrato de ${G.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-100 font-semibold",children:G.name}),G.role?h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:G.role}):null]})]}),h.jsx("span",{className:"text-slate-400 text-lg",children:Ae?"":"+"})]}),Ae?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:G.bio?h.jsx("p",{children:G.bio}):null}):null]},G.id||`taza-collab-${se}`)})}):null]}):null,h.jsxs("div",{className:"grid gap-10 lg:grid-cols-[2fr_1fr]",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 overflow-hidden bg-black/30",children:[h.jsx("div",{className:"flex items-center justify-between gap-3 px-6 pt-4",children:h.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400/70",children:"Activa tu objeto"})}),i==="lataza"&&M&&!L?h.jsx("div",{className:"p-0 sm:p-4",children:h.jsx(jI,{targetSrc:"/webar/taza/taza.mind",phrases:W.phrases,onExit:EP})}):h.jsxs(h.Fragment,{children:[/\.mp4($|\?)/i.test(W.image)?h.jsxs("div",{className:"relative",children:[ye?h.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/25 via-transparent to-black/55"}):null,rA(),h.jsx("video",{src:W.image,className:"w-full h-64 object-cover bg-black/50",autoPlay:!0,playsInline:!0,muted:!0,loop:!0,controls:Ve(fe),onClick:G=>Nt(G,fe),poster:W.imagePoster})]}):h.jsx("img",{src:W.image,alt:"Ilustracin de La Taza",className:"w-full h-64 object-cover bg-black/50"}),h.jsxs("div",{className:"p-6 space-y-3",children:[h.jsx("p",{className:"text-sm text-slate-400 uppercase tracking-[0.3em]",children:W.note}),W.instructions?h.jsx("ul",{className:"text-sm text-slate-300/90 space-y-2",children:W.instructions.map((G,se)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-purple-300 mt-1",children:""}),h.jsx("span",{children:G})]},se))}):null,i==="lataza"?h.jsxs("div",{className:"relative inline-flex overflow-visible",children:[pP?h.jsx(ne.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:-6},exit:{opacity:0,y:-10},className:"absolute -top-7 right-0 rounded-full border border-amber-200/60 bg-amber-500/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-amber-100 shadow-[0_0_12px_rgba(250,204,21,0.25)]",children:"-30 gat"}):null,h.jsxs(we,{className:"relative border-purple-400/40 text-purple-200 hover:bg-purple-500/10 overflow-visible",variant:"outline",onClick:D$,disabled:ae<=0||tx,children:[h.jsx("span",{className:"relative z-10",children:ae<=0?"Sin gatokens":tx?"Procesando...":W.ctaLabel}),pP?h.jsx("span",{className:"pointer-events-none absolute inset-0",children:Array.from({length:6}).map((G,se)=>{const Ae=120+se*12,Ee=-110-se*12;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.5)]",initial:{opacity:.9,scale:.7,x:0,y:0},animate:{opacity:0,scale:1,x:Ae,y:Ee,rotate:120+se*22},transition:{duration:1.05,ease:"easeOut",delay:.05}},`taza-coin-${se}`)})}):null]})]}):W.ctaLink?h.jsx("a",{href:W.ctaLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold",children:W.ctaLabel}):h.jsx(we,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>F$(W.ctaMessage),children:W.ctaLabel}),h.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-[0.25em] text-amber-100",children:[h.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200/60 bg-amber-500/15 px-3 py-1 text-amber-50",children:[h.jsx(ws,{size:14,className:"text-amber-50"}),ae," gatokens"]}),i==="lataza"?h.jsx("span",{className:"text-slate-400",children:"Energa por activacin: 30 gatokens"}):null]})]})]})]}),W.sentiments?h.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Sentimientos vinculados"}),h.jsx("ul",{className:"space-y-3 text-slate-300/80 text-sm leading-relaxed",children:W.sentiments.map((G,se)=>h.jsxs("li",{children:[" ",G]},se))})]}):null]}),h.jsx("div",{className:"space-y-6",children:W.comments?h.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-0",children:"Comentarios de la comunidad"}),h.jsx("div",{className:"space-y-4",children:W.comments.map(G=>h.jsxs("div",{className:"rounded-xl border border-white/5 p-4 bg-black/20",children:[h.jsx("p",{className:"text-slate-100 font-light mb-2",children:G.quote}),h.jsx("p",{className:"text-xs text-slate-500",children:G.author})]},G.id))}),i==="lataza"?h.jsx(ba,{showcaseId:"lataza",description:"Haz clic para guardar un like que conecta a la comunidad alrededor de la taza.",buttonLabel:"Resonar con la taza"}):null]}):null})]})]})}if(W.type==="audio-dream")return h.jsxs("div",{className:"space-y-8",children:[(be=W.collaborators)!=null&&be.length?h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),h.jsx("button",{type:"button",onClick:()=>He(fe=>!fe),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:xe?"Ocultar":"Ver"})]}),xe?h.jsx("div",{className:"space-y-3",children:W.collaborators.map((fe,ae)=>{const G=Z===fe.id,se=fe.image||"/images/placeholder-colaboradores.jpg";return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[h.jsxs("button",{type:"button",onClick:()=>le(Ae=>Ae===fe.id?null:fe.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:se,alt:`Retrato de ${fe.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-100 font-semibold",children:fe.name}),fe.role?h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:fe.role}):null]})]}),h.jsx("span",{className:"text-slate-400 text-lg",children:G?"":"+"})]}),G?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:fe.bio?h.jsx("p",{children:fe.bio}):null}):null]},fe.id||`sonoro-collab-${ae}`)})}):null]}):null,h.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[1fr_2fr]",children:[h.jsxs("div",{className:"space-y-6 order-1 lg:order-2",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cmo explorar"}),h.jsx("ol",{className:"list-decimal list-inside space-y-3 text-slate-200 text-sm leading-relaxed md:text-base",children:(ze=W.exploration)==null?void 0:ze.map((fe,ae)=>h.jsx("li",{children:fe},ae))})]}),h.jsxs("div",{className:"hidden lg:block space-y-4",children:[h.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3 text-sm text-slate-300",children:(tt=W.closing)==null?void 0:tt.map((fe,ae)=>h.jsx("p",{children:fe},ae))}),i==="miniversoSonoro"?h.jsx(ba,{showcaseId:"miniversoSonoro",title:"La voz de quienes escuchan",description:"Comparte tu vibracin y deja un like que resuene en este miniverso.",buttonLabel:"Hacer latir la resonancia"}):null]}),h.jsxs("div",{className:"lg:hidden",children:[h.jsx(MI,{videoUrl:W.videoUrl,videoTitle:W.label,videoArtist:"Residencia #GatoEncerrado",audioOptions:W.musicOptions,poemOptions:W.poems,showHeader:!0,showCTA:!0,onEnterExperience:bP,isSpent:_i,coinBlast:fP,costLabel:"130 gatokens"}),h.jsxs("div",{className:"mt-4 space-y-4",children:[h.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3 text-sm text-slate-300",children:(on=W.closing)==null?void 0:on.map((fe,ae)=>h.jsx("p",{children:fe},ae))}),i==="miniversoSonoro"?h.jsx(ba,{showcaseId:"miniversoSonoro",title:"La voz de quienes escuchan",description:"Comparte tu vibracin y deja un like que resuene en este miniverso.",buttonLabel:"Hacer latir la resonancia"}):null]})]})]}),h.jsx("div",{className:"hidden lg:flex justify-center px-4 order-2 lg:order-1 lg:px-0",children:h.jsx("div",{className:"w-full max-w-[1100px]",children:h.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6",children:h.jsx(MI,{videoUrl:W.videoUrl,videoTitle:W.label,videoArtist:"Residencia #GatoEncerrado",audioOptions:W.musicOptions,poemOptions:W.poems,showHeader:!0,showCTA:!0,onEnterExperience:bP,isSpent:_i,coinBlast:fP,costLabel:"130 gatokens"})})})})]})]});if(W.type==="oracle")return h.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[2fr_1fr]",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Minado simblico"}),W.loops?h.jsx("ul",{className:"space-y-2 text-sm text-slate-200/90 leading-relaxed",children:W.loops.map((fe,ae)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-purple-300 mt-1",children:""}),h.jsx("span",{children:fe})]},`oraculo-loop-${ae}`))}):null,W.tagline?h.jsx("p",{className:"text-sm text-purple-200/90",children:W.tagline}):null,h.jsxs("div",{className:"space-y-2",children:[h.jsx(we,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>Fe({description:"Muy pronto abriremos el Orculo interactivo para mintear tus GATokens."}),children:W.ctaLabel}),h.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:W.ctaDescription})]})]}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Sistema de recompensas"}),h.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:(Ni=W.rewards)==null?void 0:Ni.map((fe,ae)=>h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 space-y-2",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:"text-sm font-semibold text-slate-100",children:fe.title}),h.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-amber-200",children:[h.jsx(ws,{size:14,className:"text-amber-200"}),fe.tokens]})]}),h.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:fe.description})]},`oraculo-reward-${ae}`))}),h.jsx("p",{className:"text-xs text-slate-500",children:W.limitsNote})]})]}),h.jsxs("div",{className:"space-y-4 lg:space-y-6",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Semillas de conocimiento"}),h.jsx("ul",{className:"space-y-2 text-sm text-slate-300/85 leading-relaxed",children:(yr=W.seedNotes)==null?void 0:yr.map((fe,ae)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx(Vg,{size:14,className:"mt-1 text-amber-200"}),h.jsx("span",{children:fe})]},`oraculo-seed-${ae}`))})]}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(ik,{size:18,className:"text-purple-200"}),h.jsx("p",{className:"text-sm text-slate-200 font-semibold",children:"Interaccin que deja huella"})]}),h.jsx("p",{className:"text-sm text-slate-300/85 leading-relaxed",children:"Tus reflexiones afinan la mente del Gato: entrenamiento simblico, no binario y emocional. Cada participacin se audita para evitar ruido."}),h.jsx("p",{className:"text-xs text-slate-500",children:"El Orculo es un espacio curado; el minado es resonancia, no dinero."})]})]})]});if(W.type==="tragedia")return h.jsx("div",{className:"space-y-10",children:h.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-white/10 bg-gradient-to-br from-slate-900/90 via-black/60 to-rose-900/40 shadow-[0_25px_65px_rgba(15,23,42,0.65)]",children:[h.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.15),_transparent_45%)]"}),h.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(15,23,42,0.8),_transparent_65%)]"}),h.jsxs("div",{className:"relative mx-auto grid w-full max-w-[min(100vw-2rem,1100px)] gap-6 p-4 sm:p-6 lg:p-8 lg:grid-cols-[3fr_2fr]",children:[h.jsx("div",{className:"space-y-6",children:h.jsxs("div",{className:`space-y-5 ${ye?"rounded-none border-0 bg-transparent p-0 shadow-none":"rounded-3xl border border-white/10 bg-black/30 p-6 shadow-[0_20px_40px_rgba(0,0,0,0.45)]"}`,children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300",children:"Escaparate"}),h.jsx("h3",{className:"font-display text-3xl leading-tight text-white md:text-4xl",children:W.label}),h.jsx("p",{className:"text-lg text-slate-200/80 leading-relaxed font-light",children:W.intro}),h.jsx("div",{className:"space-y-3",children:(ya=W.narrative)==null?void 0:ya.map((fe,ae)=>h.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:fe},`tragico-paragraph-${ae}`))}),iA()]})}),h.jsxs("div",{className:`space-y-5 ${ye?"rounded-none border-0 bg-transparent p-0 shadow-none":"rounded-3xl border border-white/10 bg-black/40 p-6 shadow-[0_25px_45px_rgba(0,0,0,0.45)]"}`,children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Conciencia abierta"}),h.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:W.ctaDescription}),h.jsxs("div",{className:"rounded-2xl border border-amber-200/40 bg-amber-500/10 px-4 py-3 flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-amber-100 font-semibold",children:[h.jsx(ws,{size:16}),h.jsx("span",{children:"~300 gatokens"})]}),h.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-amber-100/80"})]}),h.jsxs(we,{type:"button",variant:"outline",className:"w-full border border-purple-400/40 text-purple-100 hover:bg-purple-500/10 silvestre-cta relative overflow-visible",onClick:M$,children:[h.jsx("span",{className:"relative z-10",children:R?"Detener y enviar":W.ctaLabel}),ke?h.jsx("span",{className:"pointer-events-none absolute inset-0 overflow-visible",children:Array.from({length:6}).map((fe,ae)=>{const G=220+ae*16,se=-240-ae*14;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.5)]",initial:{opacity:.95,scale:.8,x:0,y:0},animate:{opacity:0,scale:1.05,x:G,y:se,rotate:110+ae*22},transition:{duration:1.15,ease:"easeOut",delay:.05}},`silvestre-coin-${ae}`)})}):null]}),h.jsx("p",{className:"text-[11px] text-slate-500",children:"La conversacin se abre dentro del universo transmedia (pronto con GPT de Silvestre)."}),I&&!Y?h.jsxs("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-200",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Silvestre quiere escucharte"}),h.jsx("p",{children:"Dale acceso a tu micrfono para comenzar."})]}):null,Y&&!R&&!q?h.jsxs("div",{className:"mt-3 rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm text-red-100",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-red-300",children:"Sin micrfono"}),h.jsx("p",{children:"Tu navegador no permite activar el micrfono. Puedes escribirle a Silvestre si prefieres."})]}):null,q?h.jsxs("div",{className:"mt-3 rounded-2xl border border-purple-500/40 bg-white/5 p-4 text-sm text-slate-100",children:[h.jsxs("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:["Tu voz",R?" (escuchando...)":""]}),h.jsx("p",{className:"break-words",children:q})]}):null,h.jsx(ba,{showcaseId:"miniversos",title:"Resonancia colectiva",description:"Haz clic para dejar un pulso que mantenga viva la conversacin de Silvestre.",buttonLabel:"Enviar pulsaciones"})]})]})]})});if(W.type==="graphic-lab"){const fe=W.swipeShowcases??[],ae=W.swipe??{};return h.jsxs("div",{className:"space-y-8",children:[(mc=W.collaborators)!=null&&mc.length?h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),h.jsx("button",{type:"button",onClick:()=>He(G=>!G),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:xe?"Ocultar":"Ver"})]}),xe?h.jsx("div",{className:"space-y-3",children:W.collaborators.map((G,se)=>{const Ae=Z===G.id,Ee=G.image||"/images/placeholder-colaboradores.jpg";return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[h.jsxs("button",{type:"button",onClick:()=>le(Ye=>Ye===G.id?null:G.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:Ee,alt:`Retrato de ${G.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-100 font-semibold",children:G.name}),G.role?h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:G.role}):null]})]}),h.jsx("span",{className:"text-slate-400 text-lg",children:Ae?"":"+"})]}),Ae?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:G.bio?h.jsx("p",{children:G.bio}):null}):null]},G.id||`grafico-collab-${se}`)})}):null]}):null,h.jsxs("div",{className:"grid gap-6 lg:gap-8 lg:grid-cols-[3fr_2fr]",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Coleccin viva"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:(Zp=W.collection)==null?void 0:Zp.map((G,se)=>h.jsx("span",{className:"px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs text-slate-100",children:G},`collection-pill-${se}`))})]}),fe.length?h.jsx("div",{className:"space-y-4",children:fe.map(G=>{var se,Ae;return h.jsx("div",{className:"rounded-[32px] border border-white/10 bg-gradient-to-r from-slate-900/80 via-black/60 to-fuchsia-900/40 overflow-hidden shadow-[0_20px_60px_rgba(15,23,42,0.65)]",children:h.jsxs("div",{className:"grid gap-0 lg:grid-cols-[1fr_1.3fr]",children:[G.previewImage?h.jsxs("div",{className:"relative h-full min-h-[240px]",children:[h.jsx("img",{src:G.previewImage,alt:G.title,className:"h-full w-full object-cover",loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/75 via-black/45 to-transparent"}),h.jsxs("div",{className:"absolute left-4 top-4 inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.3em] text-white",children:[h.jsx(R3,{size:14,className:"text-fuchsia-200"}),"Swipe PDF"]}),h.jsx("div",{className:"absolute left-4 bottom-4 text-sm text-white/90",children:"Lector visual  scroll vertical"})]}):null,h.jsxs("div",{className:"flex flex-col space-y-4 p-6",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-fuchsia-200/80",children:ae.title??"Lector visual activo"}),h.jsx("h4",{className:"font-display text-2xl text-slate-100",children:G.title}),G.description?h.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:G.description}):null,ae.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ae.description}):null,(se=ae.steps)!=null&&se.length?h.jsx("ul",{className:"space-y-2 text-sm text-slate-100 leading-relaxed",children:ae.steps.map((Ee,Ye)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-fuchsia-200 mt-1",children:""}),h.jsx("span",{children:Ee})]},`swipe-step-${Ye}`))}):null,(Ae=G.swipeNotes)!=null&&Ae.length?h.jsx("ul",{className:"space-y-2 text-sm text-slate-100 leading-relaxed",children:G.swipeNotes.map((Ee,Ye)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-fuchsia-200 mt-1",children:""}),h.jsx("span",{children:Ee})]},`${G.id}-note-${Ye}`))}):null,h.jsxs("div",{className:"flex flex-wrap gap-3",children:[G.previewImage?h.jsx(we,{className:"sm:flex-none justify-center bg-gradient-to-r from-fuchsia-600/80 to-purple-500/80 hover:from-fuchsia-500 hover:to-purple-400 text-white",onClick:()=>kP({src:G.previewImage,title:G.title,description:G.description}),children:"Ver portada"}):null,G.previewPdfUrl?h.jsxs("div",{className:"relative inline-flex overflow-visible",children:[mP?h.jsxs(ne.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:-6},exit:{opacity:0,y:-10},className:"absolute -top-7 right-0 rounded-full border border-amber-200/60 bg-amber-500/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-amber-100 shadow-[0_0_12px_rgba(250,204,21,0.25)]",children:["-",$n.graficoSwipe," gat"]}):null,h.jsxs(we,{variant:"outline",disabled:nx,onClick:()=>L$(G),className:"w-full sm:w-auto justify-center border-fuchsia-300/40 text-fuchsia-200 hover:bg-fuchsia-500/10 relative overflow-visible",children:[h.jsx("span",{className:"relative z-10",children:zr?"Abrir swipe en PDF":nx?"Aplicando...":"Aplicar y abrir"}),mP?h.jsx("span",{className:"pointer-events-none absolute inset-0",children:Array.from({length:6}).map((Ee,Ye)=>{const $r=140+Ye*14,vr=-140-Ye*12;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.5)]",initial:{opacity:.9,scale:.7,x:0,y:0},animate:{opacity:0,scale:1.05,x:$r,y:vr,rotate:120+Ye*18},transition:{duration:1.1,ease:"easeOut",delay:.05}},`graphic-coin-${Ye}`)})}):null]})]}):null]}),h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-gray-100/80",children:"Prototipo del Captulo 1"})]})]})},G.id)})}):null]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6",children:iA()}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Acciones"}),h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:"Activa el lector visual o smate a la residencia grfica."}),h.jsxs("div",{className:"rounded-2xl border border-amber-200/40 bg-amber-500/10 px-4 py-3 flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-amber-100 font-semibold",children:[h.jsx(ws,{size:16}),h.jsx("span",{children:zr?"0 gatokens":`~${$n.graficoSwipe} gatokens`})]}),h.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-amber-100/80",children:zr?"Aplicado":""})]}),h.jsx("p",{className:"text-[11px] text-amber-100/70",children:zr?"Ya aplicaste tus gatokens.":"Al abrir el swipe en PDF se descontarn todas las gatokens disponibles."}),h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsx(we,{onClick:()=>pc("Miniverso Grfico"),className:"w-full justify-center bg-gradient-to-r from-purple-600/80 to-fuchsia-500/80 hover:from-purple-500 hover:to-fuchsia-400 text-white",children:(em=W.ctas)==null?void 0:em.primary}),h.jsx(we,{variant:"outline",onClick:()=>pc("Miniverso Grfico"),className:"w-full justify-center border-purple-400/40 text-purple-200 hover:bg-purple-500/10",children:(tm=W.ctas)==null?void 0:tm.secondary})]})]}),i==="miniversoGrafico"?h.jsx(ba,{showcaseId:"miniversoGrafico",title:"Validacin grfica",description:"Haz clic para dejar un like y seguir curando esta coleccin.",buttonLabel:"Resonar con el trazo"}):null]})]})]})}if(W.type==="movement-ritual"){const fe=Array.isArray(W.collaborators)&&W.collaborators.length>0;return h.jsxs("div",{className:"space-y-10",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),fe?h.jsx("button",{type:"button",onClick:()=>ge(ae=>!ae),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:Be?"Ocultar":"Ver"}):null]}),fe?Be?h.jsx("div",{className:"space-y-3",children:W.collaborators.map((ae,G)=>{const se=Z===ae.id,Ae=ae.image||"/images/placeholder-colaboradores.jpg";return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[h.jsxs("button",{type:"button",onClick:()=>le(Ee=>Ee===ae.id?null:ae.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:Ae,alt:`Retrato de ${ae.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-100 font-semibold",children:ae.name}),ae.role?h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:ae.role}):null]})]}),h.jsx("span",{className:"text-slate-400 text-lg",children:se?"":"+"})]}),se?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:ae.bio?h.jsx("p",{children:ae.bio}):null}):null]},ae.id||`movement-collab-${G}`)})}):null:h.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[h.jsx("p",{className:"text-sm text-slate-300/85 leading-relaxed",children:"An no hay colaboradores confirmados para esta ruta."}),h.jsx(we,{type:"button",onClick:()=>$$("movimiento"),className:"w-full sm:w-auto justify-center bg-gradient-to-r from-emerald-500/90 to-emerald-600/90 hover:from-emerald-400/90 hover:to-emerald-500/90 text-white",children:"Proponer colaboracin"})]})]}),h.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[2fr_1fr]",children:[h.jsxs("div",{className:"space-y-5 rounded-3xl border border-white/10 bg-gradient-to-br from-slate-950/80 via-black/60 to-purple-900/30 p-6 lg:p-8",children:[h.jsx("h3",{className:"font-display text-3xl text-slate-100",children:W.tagline}),h.jsxs("div",{className:"space-y-4 text-slate-300/85 leading-relaxed text-sm md:text-base",children:[(nm=W.overview)==null?void 0:nm.map((ae,G)=>h.jsx("p",{children:ae},`movement-overview-${G}`)),(rm=W.diosaHighlights)!=null&&rm.length?h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cada estacin revela una diosa distinta"}),h.jsx("ul",{className:"mt-3 space-y-2",children:W.diosaHighlights.map((ae,G)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-purple-300 mt-1",children:""}),h.jsx("span",{children:ae})]},`movement-highlight-${G}`))})]}):null,(sm=W.dayNight)==null?void 0:sm.map((ae,G)=>h.jsx("p",{children:ae},`movement-daynight-${G}`)),W.invitation?h.jsx("p",{className:"text-lg text-slate-100 italic",children:W.invitation}):null]}),h.jsx("div",{className:"mt-6",children:h.jsx(ba,{showcaseId:"miniversoMovimiento",title:"Resonancia colectiva",description:"Haz clic y deja un pulso para que la Ruta de las Diosas siga viva.",buttonLabel:"Hacer vibrar la ruta",className:"mt-0"})})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"rounded-2xl border border-amber-200/40 bg-amber-500/10 px-4 py-3 flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 text-amber-100 font-semibold",children:[h.jsx(ws,{size:16}),h.jsx("span",{children:"~280 gatokens"})]}),h.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-amber-100/80",children:"Mapa + estacin"})]}),h.jsx("p",{className:"text-[11px] text-amber-100/70",children:"Se aplican al liberar la ruta, los talleres o el marcador AR; las suscripciones cubren el saldo."}),(im=W.actions)==null?void 0:im.map(ae=>{const G=ae.icon||dR;return h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-5 space-y-3 hover:border-purple-400/40 transition",children:[h.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"rounded-full border border-white/10 bg-white/5 p-3",children:h.jsx(G,{size:20,className:"text-purple-200"})}),h.jsxs("div",{children:[ae.badge?h.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.35em] text-slate-500",children:ae.badge}):null,h.jsx("p",{className:"font-semibold text-slate-100",children:ae.label})]})]}),h.jsx(we,{type:"button",variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10 w-full sm:w-auto justify-center",onClick:()=>z$(ae,W.pendingName||W.label),children:ae.buttonLabel??"Activar"})]}),ae.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ae.description}):null]},ae.id)})]})]}),(am=W.microinteractions)!=null&&am.length?h.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:W.microinteractions.map((ae,G)=>{var se;return h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-3 text-sm leading-relaxed",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:ae.title}),ae.description?h.jsx("p",{className:"text-slate-300/85",children:ae.description}):null,(se=ae.items)!=null&&se.length?h.jsx("ul",{className:"space-y-2 text-slate-200/85",children:ae.items.map((Ae,Ee)=>h.jsxs("li",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"text-purple-300 mt-1",children:""}),h.jsx("span",{children:Ae})]},`movement-micro-item-${G}-${Ee}`))}):null]},`movement-micro-${G}`)})}):null]})}if(W.type==="cinema"){const fe=(()=>{var Ae;const se=new Set;return(((Ae=W.copycats)==null?void 0:Ae.assets)??[]).filter(Ee=>{const Ye=(Ee==null?void 0:Ee.id)||(Ee==null?void 0:Ee.url);return Ye?se.has(Ye)?!1:(se.add(Ye),!0):!0})})(),ae=(()=>{var Ae;const se=new Set;return(((Ae=W.quiron)==null?void 0:Ae.stills)??[]).filter((Ee,Ye)=>{const $r=typeof Ee=="string"?Ee:(Ee==null?void 0:Ee.id)||(Ee==null?void 0:Ee.url)||`idx-${Ye}`;return se.has($r)?!1:(se.add($r),!0)})})();W.tone;const G=se=>{if(!(se!=null&&se.url))return null;const Ae=/\.mp4($|\?)/i.test(se.url),Ee=(se==null?void 0:se.id)||(se==null?void 0:se.url);return h.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40",children:[h.jsx("div",{className:"aspect-video w-full bg-black/60",children:Ae?h.jsxs("div",{className:"relative h-full w-full",children:[ye?h.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/25 via-transparent to-black/55"}):null,rA(),h.jsx("video",{src:se.url,title:se.label,className:"w-full h-full object-cover",controls:Ve(Ee),onClick:Ye=>Nt(Ye,Ee),playsInline:!0,preload:"metadata"})]}):h.jsx("iframe",{src:se.url,title:se.label,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share",allowFullScreen:!0,loading:"lazy",referrerPolicy:"strict-origin-when-cross-origin"})}),se.label?h.jsx("div",{className:"px-4 py-3 text-sm text-slate-300 flex items-center justify-between gap-3",children:h.jsx("span",{children:se.label})}):null]})};return h.jsxs("div",{className:"space-y-8",children:[(om=W.collaborators)!=null&&om.length?h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),h.jsx("button",{type:"button",onClick:()=>He(se=>!se),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:xe?"Ocultar":"Ver"})]}),xe?h.jsx("div",{className:"space-y-3",children:W.collaborators.map((se,Ae)=>{const Ee=Z===se.id,Ye=se.image||"/images/placeholder-colaboradores.jpg";return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[h.jsxs("button",{type:"button",onClick:()=>le($r=>$r===se.id?null:se.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:Ye,alt:`Retrato de ${se.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-100 font-semibold",children:se.name}),se.role?h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:se.role}):null]})]}),h.jsx("span",{className:"text-slate-400 text-lg",children:Ee?"":"+"})]}),Ee?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:se.bio?h.jsx("p",{children:se.bio}):null}):null]},se.id||`cinema-collab-${Ae}`)})}):null]}):null,h.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsx("div",{className:"flex items-start justify-between gap-3",children:h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Meta-documental"}),h.jsx("h4",{className:"font-display text-xl text-slate-100",children:(bs=W.copycats)==null?void 0:bs.title})]})}),h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:(lx=W.copycats)==null?void 0:lx.description}),h.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(LP=W.copycats)==null?void 0:LP.microcopy}),(OP=(DP=W.copycats)==null?void 0:DP.tags)!=null&&OP.length?h.jsx("div",{className:"flex flex-wrap gap-2",children:W.copycats.tags.map((se,Ae)=>h.jsx("span",{className:"px-3 py-1 rounded-full border border-purple-400/30 bg-purple-900/20 text-xs text-purple-100",children:se},`copycats-tag-${Ae}`))}):null,fe.length?h.jsx("div",{className:"space-y-4",children:fe.map(se=>h.jsx("div",{children:G(se)},se.id))}):null]}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-r from-slate-900/80 via-black/60 to-purple-900/40 p-6 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Screening privado"}),h.jsx("h4",{className:"font-display text-2xl text-slate-100",children:(FP=W.screening)==null?void 0:FP.title}),h.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(BP=W.screening)==null?void 0:BP.description}),h.jsx(we,{onClick:()=>Fe({description:"Guardaremos tu inters; pronto abriremos la lista de suscriptores para el screening doble en CECUT."}),className:"w-full sm:w-auto justify-center bg-gradient-to-r from-purple-600/80 to-indigo-500/80 hover:from-purple-500 hover:to-indigo-400 text-white",children:(zP=W.screening)==null?void 0:zP.cta}),($P=W.screening)!=null&&$P.footnote?h.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:W.screening.footnote}):null]}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Lo que las conecta"}),h.jsx("h4",{className:"font-display text-xl text-slate-100",children:(VP=W.bridge)==null?void 0:VP.title}),h.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(UP=W.bridge)==null?void 0:UP.description}),h.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:(HP=W.bridge)==null?void 0:HP.note})]})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"relative rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cortometraje"}),h.jsxs("div",{className:"flex flex-wrap items-baseline gap-2",children:[h.jsx("h4",{className:"font-display text-xl text-slate-100",children:(qP=W.quiron)==null?void 0:qP.title}),h.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-rose-300",children:"Teaser + stills"})]})]}),h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:(GP=W.quiron)==null?void 0:GP.description}),h.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(WP=W.quiron)==null?void 0:WP.microcopy}),h.jsxs("div",{className:"space-y-3",children:[Br?h.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-200/60 bg-emerald-500/10 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.25em] text-emerald-100",children:[h.jsx(ws,{size:14})," 0 gatokens"]}):h.jsxs(we,{variant:"outline",onClick:T$,disabled:Fn,className:"relative w-full sm:w-auto justify-center border-purple-400/40 text-purple-200 hover:bg-purple-500/10 overflow-visible",children:[h.jsx("span",{className:"relative z-10",children:Fn?"Procesando":"Ver cortometraje completo"}),xs?h.jsx("span",{className:"pointer-events-none absolute inset-0",children:Array.from({length:5}).map((se,Ae)=>{const $r=140+Ae*10,vr=-120-Ae*10;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-5 w-5 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.5)]",initial:{opacity:.9,scale:.6,x:0,y:0},animate:{opacity:0,scale:.9,x:$r,y:vr,rotate:90+Ae*25},transition:{duration:1,ease:"easeOut"}},`quiron-coin-btn-${Ae}`)})}):null]}),h.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-[0.25em] text-amber-100",children:[h.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200/60 bg-amber-500/15 px-3 py-1 text-amber-50",children:[h.jsx(ws,{size:14,className:"text-amber-50"}),$n.quironFull," gatokens"]}),h.jsx("span",{className:"text-slate-400",children:Br?`0 gatokens pendientes  ${$n.quironFull} aplicadas`:`Se descontarn ${$n.quironFull} GATokens de tu saldo`}),Br?null:h.jsxs("span",{className:"text-slate-500",children:["Saldo actual: ",ga," GATokens"]})]})]}),qe?h.jsx(ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"rounded-2xl border border-amber-200/40 bg-amber-500/10 p-4 text-sm text-amber-100",children:"nete a la comunidad para usar tus gatokens y desbloquear experiencias completas. Muy pronto podrs conectar tu saldo y suscripcin aqu mismo."}):null,xs?h.jsx("div",{className:"pointer-events-none absolute inset-0 overflow-visible",children:Array.from({length:6}).map((se,Ae)=>{const Ee=.35+Ae*.04,Ye=.7,$r=220+Ae*8,vr=-240-Ae*18;return h.jsx(ne.span,{className:"absolute h-6 w-6 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_18px_rgba(250,204,21,0.55)]",style:{left:`${Ee*100}%`,top:`${Ye*100}%`},initial:{opacity:.95,scale:.8,rotate:0,x:0,y:0},animate:{opacity:0,scale:1,rotate:140+Ae*18,x:$r,y:vr},transition:{duration:1.15,ease:"easeOut"}},`quiron-coin-flight-${Ae}`)})}):null,h.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:"Al desbloquear, el cortometraje se abre en vista completa fuera de esta tarjeta."}),(XP=W.quiron)!=null&&XP.teaser?h.jsx("div",{children:G(W.quiron.teaser)}):null,ae.length?h.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:ae.map((se,Ae)=>{const Ee=typeof se=="string"?se:se.label||`Still ${Ae+1}`,Ye=typeof se=="string"?null:se.url;return Ye?h.jsxs("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black/20",children:[h.jsx("div",{className:"aspect-[4/3] bg-black/40",children:h.jsx("img",{src:Ye,alt:Ee,className:"h-full w-full object-cover",loading:"lazy"})}),h.jsx("p",{className:"px-4 py-3 text-xs uppercase tracking-[0.25em] text-slate-200",children:Ee})]},se.id||`quiron-still-${Ae}`):h.jsx("span",{className:"px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs text-slate-100",children:Ee},`quiron-still-pill-${Ae}`)})}):null]}),h.jsx("div",{className:"space-y-4",children:h.jsx(ba,{showcaseId:"copycats",title:"Validacin cinematogrfica",description:"Haz clic para dejar un like y amplificar el screening de CopyCats + Quirn.",buttonLabel:"Sumar mi aplauso"})})]})]})]})}if(W.type==="blog-series"){const fe=W.entries??[],ae=G=>{switch(G.type){case"internal-reading":return G.previewMode==="pdf"&&G.previewPdfUrl?h.jsxs(h.Fragment,{children:[h.jsx(we,{onClick:()=>B(!0),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}),h.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-[0.25em] text-amber-100",children:[h.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200/60 bg-amber-500/15 px-3 py-1 text-amber-50",children:[h.jsx(ws,{size:14,className:"text-amber-50"}),"150 gatokens"]}),h.jsx("span",{className:"text-slate-400",children:"Lectura y desbloqueo del PDF interactivo"})]})]}):G.previewMode==="image"&&G.previewImage?h.jsx(we,{onClick:()=>kP({src:G.previewImage,title:G.title,description:G.description}),className:"w-full sm:w-auto justify-center",children:"Ver fragmento"}):G.contentSlug?h.jsxs(h.Fragment,{children:[h.jsx(we,{onClick:()=>R$(G.contentSlug),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}),h.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 text-[11px] uppercase tracking-[0.25em] text-amber-100",children:[h.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200/60 bg-amber-500/15 px-3 py-1 text-amber-50",children:[h.jsx(ws,{size:14,className:"text-amber-50"}),"150 gatokens"]}),h.jsx("span",{className:"text-slate-400",children:"Lectura y desbloqueo del fragmento"})]})]}):null;case"purchase-link":return G.url?h.jsx("a",{href:G.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold transition",children:"Comprar edicin"}):null;case"qr-scan":return h.jsx(we,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10 w-full sm:w-auto justify-center",onClick:()=>Fe({title:"Escanea el QR",description:"Abre la cmara de tu dispositivo y apunta al cdigo para activar la experiencia."}),children:"Escanear QR"});default:return null}};return h.jsxs("div",{className:"space-y-10",children:[(KP=W.collaborators)!=null&&KP.length?h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),h.jsx("button",{type:"button",onClick:()=>He(G=>!G),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:xe?"Ocultar":"Ver"})]}),xe?h.jsx("div",{className:"space-y-3",children:W.collaborators.map((G,se)=>{const Ae=Z===G.id,Ee=G.image||"/images/placeholder-colaboradores.jpg";return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[h.jsxs("button",{type:"button",onClick:()=>le(Ye=>Ye===G.id?null:G.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("img",{src:Ee,alt:`Retrato de ${G.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-slate-100 font-semibold",children:G.name}),G.role?h.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:G.role}):null]})]}),h.jsx("span",{className:"text-slate-400 text-lg",children:Ae?"":"+"})]}),Ae?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:G.bio?h.jsx("p",{children:G.bio}):null}):null]},G.id||`novela-collab-${se}`)})}):null]}):null,h.jsx("div",{children:NP()}),fe.length>0?h.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:fe.map(G=>{var Ee,Ye,$r;if(G.type==="horizontal-gallery")return h.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("h5",{className:"font-display text-xl text-slate-100",children:G.title}),G.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:G.description}):null]}),h.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:(Ee=G.images)==null?void 0:Ee.map((vr,Kt)=>h.jsx("div",{className:"w-48 h-32 flex-shrink-0 rounded-xl overflow-hidden border border-white/5 bg-black/40",children:h.jsx("img",{src:vr,alt:`${G.title} ${Kt+1}`,className:"w-full h-full object-cover"})},`${G.id}-${Kt}`))})]},G.id);if(G.type==="quotes")return h.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[h.jsx("h5",{className:"font-display text-xl text-slate-100",children:G.title}),h.jsx("div",{className:"space-y-4",children:(Ye=G.quotes)==null?void 0:Ye.map((vr,Kt)=>h.jsxs("blockquote",{className:"text-slate-100 font-light leading-relaxed",children:[h.jsx("p",{children:vr.quote}),vr.author?h.jsx("p",{className:"text-xs text-slate-500 mt-2",children:vr.author}):null]},`${G.id}-quote-${Kt}`))}),h.jsx(ba,{showcaseId:"miniversoNovela",description:"Haz clic para guardar un like y amplificar las conversaciones que la novela susurra.",buttonLabel:"Apoyar la novela"})]},G.id);if(G.type==="novel-apps"){const vr=ma*25;return h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-6 space-y-6 relative overflow-hidden",children:[h.jsx("div",{className:"flex items-start justify-between gap-3",children:h.jsxs("div",{className:"space-y-2 flex-1",children:[h.jsx("h5",{className:"font-display text-xl text-slate-100",children:G.title}),G.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:G.description}):null]})}),h.jsx("div",{className:"grid gap-4 grid-cols-1",children:($r=G.apps)==null?void 0:$r.map(Kt=>h.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between gap-4",children:[h.jsx("p",{className:"font-semibold text-slate-100",children:Kt.name}),h.jsx("span",{className:`text-xs uppercase tracking-[0.3em] ${Kt.status==="Disponible"?"text-emerald-300":"text-slate-500"}`,children:Kt.status})]}),h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Kt.description}),Kt.snippet?h.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/60 p-4 space-y-2",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:Kt.snippet.tagline}),Kt.snippet.image?h.jsx("img",{src:Kt.snippet.image,alt:Kt.name,className:"w-full h-32 object-cover rounded-lg border border-white/5"}):null,Kt.snippet.text?h.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:Kt.snippet.text}):null]}):null,h.jsxs("div",{className:"space-y-2",children:[h.jsx(we,{onClick:()=>B$(Kt),variant:Kt.status==="Disponible"?"default":"outline",className:`w-full justify-center ${Kt.status==="Disponible"?"bg-purple-600/80 hover:bg-purple-600 text-white":"border-purple-400/40 text-purple-200 hover:bg-purple-500/10"}`,children:Kt.ctaLabel}),h.jsx("div",{className:"flex items-center justify-center gap-2 text-[11px] uppercase tracking-[0.35em] text-amber-200/90",children:h.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200/60 bg-amber-500/15 px-3 py-1 text-amber-50",children:[h.jsx(ws,{size:14,className:"text-amber-50"}),h.jsx("span",{className:"text-amber-50",children:"150 gatokens"})]})}),h.jsx("div",{className:"flex items-center justify-center text-[11px] uppercase tracking-[0.35em] text-amber-200/90",children:vr>0?`${vr} gatokens usadas  ${ma} pregunta${ma===1?"":"s"}`:"0 gatokens usadas  0 preguntas"})]})]},Kt.id))})]},G.id)}const se=G.previewImage||G.image,Ae=ae(G);return h.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[se?h.jsx("div",{className:"rounded-xl overflow-hidden border border-white/5 bg-black/40 h-52 sm:h-64",children:h.jsx("img",{src:se,alt:G.title,className:"w-full h-full object-cover",loading:"lazy"})}):null,h.jsxs("div",{className:"space-y-2",children:[h.jsx("h5",{className:"font-display text-xl text-slate-100",children:G.title}),G.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:G.description}):null]}),Ae]},G.id)})}):h.jsx("p",{className:"text-sm text-slate-400",children:"Muy pronto liberaremos el resto de la serie."})]})}const H=W.videos??[];return h.jsxs("div",{className:"space-y-10",children:[h.jsx("div",{children:NP("Pronto liberaremos la carta completa de este miniverso. Mientras tanto puedes explorar la galera audiovisual.")}),H.length>0?h.jsxs("div",{children:[h.jsx("h5",{className:"font-display text-xl text-slate-100 mb-4",children:"Galera audiovisual"}),h.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:H.map((fe,ae)=>{const G=fe.id||fe.url||`video-${ae}`;return h.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40 flex flex-col",children:[h.jsx("div",{className:"relative aspect-video w-full",children:/\.mp4($|\?)/i.test(fe.url)?h.jsxs(h.Fragment,{children:[ye?h.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/25 via-transparent to-black/55"}):null,rA(),h.jsx("video",{src:fe.url,title:fe.title,className:"w-full h-full object-cover bg-black",controls:Ve(G),onClick:se=>Nt(se,G),playsInline:!0,preload:"metadata",poster:fe.poster})]}):h.jsx("iframe",{src:fe.url,title:fe.title,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}),h.jsxs("div",{className:"p-4 space-y-1 text-sm text-slate-300",children:[h.jsx("p",{className:"font-semibold text-slate-100",children:fe.title}),fe.author?h.jsx("p",{children:fe.author}):null,fe.duration?h.jsxs("p",{className:"text-slate-500",children:["Duracin: ",fe.duration]}):null]})]},fe.id||fe.url||`video-${ae}`)})})]}):null,i==="copycats"?h.jsx(ba,{showcaseId:"copycats",description:"Guarda un like que celebra las miradas que quedarn en escena.",title:"Opiniones despus del corte"}):null]})},W$=()=>{var ze,tt,on;if(!Ti.unlocked)return null;const H=_$?nA?"subscriber":"member":"guest",ee=((ze=De==null?void 0:De.user_metadata)==null?void 0:ze.alias)||((tt=De==null?void 0:De.user_metadata)==null?void 0:tt.full_name)||((on=De==null?void 0:De.user_metadata)==null?void 0:on.display_name)||"Errante annimo",Q={guest:"Inicia sesin para guardar esta insignia, nombrarla y recibir futuras recompensas vinculadas a tu cuenta.",member:"Tu badge ya est en tu cuenta. Hazte suscriptor para transformar este logro en energa real y recibir recargas automticas.",subscriber:`Recompensa activada. Sumamos ${xE} GATokens a tu saldo como agradecimiento.`},be=H==="guest"?h.jsx(we,{onClick:V$,className:"bg-purple-600/80 hover:bg-purple-600 text-white",children:"Iniciar sesin"}):H==="member"?h.jsx(we,{onClick:H$,variant:"outline",className:"border-amber-300/60 text-amber-200 hover:bg-amber-200/10",children:"Suscribirme"}):null;return h.jsx(ne.div,{initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},className:"mt-10 rounded-2xl border border-purple-500/40 bg-gradient-to-br from-slate-900/70 to-purple-900/30 p-6 md:p-8 shadow-[0_20px_80px_rgba(115,73,255,0.15)]",children:h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[h.jsxs("div",{className:"flex items-start gap-4 md:gap-6",children:[h.jsxs("div",{className:"relative h-16 w-16 rounded-2xl border border-purple-400/40 bg-black/40 flex items-center justify-center",children:[h.jsx(Vg,{className:"text-purple-200",size:28}),A$?h.jsx("span",{className:"pointer-events-none absolute inset-0",children:Array.from({length:6}).map((Ni,yr)=>{const ya=(yr-2.5)*18,mc=-50-yr*12;return h.jsx(ne.span,{className:"absolute left-1/2 top-1/2 h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full bg-gradient-to-br from-amber-200 to-yellow-500 shadow-[0_0_12px_rgba(250,204,21,0.4)]",initial:{opacity:.95,scale:.7,x:0,y:0},animate:{opacity:0,scale:1.05,x:ya,y:mc,rotate:100+yr*24},transition:{duration:1.05,ease:"easeOut",delay:yr*.03}},`badge-coin-${yr}`)})}):null]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-200/80",children:"Insignia secreta"}),h.jsx("h4",{className:"font-display text-2xl text-white",children:CJ}),h.jsxs("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:["Leste los nueve mini-versos autorales y abriste cada portal. ",ee," ahora figura en el registro de errantes."]}),h.jsx("p",{className:"text-xs text-slate-300/70 uppercase tracking-[0.25em]",children:Q[H]}),H==="subscriber"&&Ti.rewardClaimed?h.jsxs("div",{className:"inline-flex items-center gap-2 rounded-full border border-emerald-300/40 bg-emerald-500/10 px-4 py-1 text-[0.65rem] uppercase tracking-[0.35em] text-emerald-200",children:[h.jsx(ws,{size:14,className:"text-emerald-200"}),"+",xE," GAT"]}):null]})]}),be?h.jsx("div",{className:"flex-shrink-0",children:be}):null]})})};return h.jsxs(h.Fragment,{children:[h.jsxs("section",{id:"transmedia",className:"py-24 relative min-h-[1200px]",children:[null,h.jsx("div",{className:"section-divider mb-24"}),h.jsxs("div",{className:"container mx-auto px-6",children:[h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16 space-y-6",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Universo Transmedia"}),h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium text-gradient italic",children:"Escaparate de Miniversos"}),h.jsxs("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:["#GatoEncerrado es un universo transmedia compuesto por miniversos que sostienen una causa. Cada experiencia digital, objeto o narrativa expandida genera GATokens, el pulso que mueve este ecosistema y, al mismo tiempo, sostiene la  "," ",h.jsx("button",{type:"button",onClick:I$,className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"causa social"})," "," de Ayuda para la Vida, A.C."]}),h.jsxs("p",{className:"text-sm text-slate-400 max-w-3xl mx-auto leading-relaxed font-light",children:["Con ",h.jsx("span",{className:"font-semibold text-purple-200",children:"600 MXN"})," recibes"," ",h.jsx("span",{className:"font-semibold text-purple-200",children:"12,000 GATOKENS:"}),h.jsx("span",{className:"block mt-1",children:"suficiente energa para que esto no se apague."})]})]}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 min-h-[720px]",children:zI.map((H,ee)=>{const Q=H.icon,be=H.iconClass??"text-purple-200",ze=Qx[H.id]??Qx.default;return h.jsxs(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:ee*.1,ease:"easeOut"},viewport:{once:!0},className:"group glass-effect rounded-xl p-8 hover-glow cursor-pointer flex flex-col transition-all duration-300 hover:border-purple-400/50 relative overflow-hidden",onClick:()=>j$(H.id),children:[h.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 opacity-80 group-hover:opacity-100 transition duration-500 pointer-events-none",style:{backgroundImage:ze,filter:"saturate(1.1)",backgroundSize:"160% 160%",backgroundPosition:"0% 0%",animation:"miniverso-breath 14s ease-in-out infinite alternate",willChange:"background-position, transform"}}),h.jsx("div",{className:"absolute inset-0 opacity-30 mix-blend-screen pointer-events-none bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.25),_transparent_55%)]"}),h.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[h.jsx("div",{className:"flex items-center justify-start mb-6 transition-all duration-300 group-hover:scale-110",children:h.jsx(Q,{size:32,className:`${be} drop-shadow-[0_0_12px_rgba(168,85,247,0.4)]`})}),h.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-3",children:H.title}),h.jsx("p",{className:"text-slate-200/80 text-base leading-relaxed mb-4 flex-grow font-light",children:H.description}),(()=>{const tt=n[H.id]??0,on=(eA==null?void 0:eA[H.id])??(tt>0?tt:0),Ni=!!(Js!=null&&Js[H.id]),yr=Ni?"text-emerald-200":"text-amber-200",ya=Ni?"Saldo acumulado:":"Energa inicial:";return h.jsxs("div",{className:"mb-4 text-xs text-slate-200/80 flex flex-wrap items-center gap-2",children:[h.jsx(ws,{size:14,className:yr}),h.jsx("span",{className:"uppercase tracking-[0.25em] text-slate-100/70",children:ya}),h.jsxs("span",{className:`font-semibold ${yr}`,children:[on," GAT"]}),Ni?h.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-emerald-200",children:"Miniverso ledo"}):h.jsx("span",{className:"text-[0.65rem] uppercase tracking-[0.35em] text-slate-400",children:"Descubre cmo sumar energa"})]})})(),h.jsxs("div",{className:"text-purple-300 flex items-center gap-2 font-semibold transition-all duration-300 group-hover:gap-3",children:["Explorar",h.jsx(dR,{size:18})]})]})]},H.id)})}),W?h.jsxs(ne.div,{ref:c,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"relative mt-12 glass-effect rounded-2xl p-8 md:p-12 border border-white/10",children:[h.jsx("button",{onClick:()=>a(null),className:"absolute top-4 right-4 text-sm text-slate-400 hover:text-white transition","aria-label":"Cerrar escaparate",children:"Cerrar escaparate "}),W.type!=="tragedia"?h.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:gap-10 pr-0",children:[h.jsxs("div",{className:"flex-1 space-y-6",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-2",children:"Escaparate"}),h.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-3",children:W.label}),h.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light max-w-3xl",children:W.intro}),W.iaProfile?h.jsx("div",{className:"max-w-xl",children:h.jsx(AJ,{...W.iaProfile,compact:!0})}):null]}),W.type!=="graphic-lab"?h.jsx("div",{className:"md:w-[360px] flex-shrink-0",children:iA()}):null]}):null,h.jsx("div",{className:"mt-8",children:G$()})]}):null,W$(),h.jsxs("div",{className:"mt-16 grid lg:grid-cols-[3fr_2fr] gap-10",children:[h.jsxs(ne.div,{id:"apoya",ref:_,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col justify-between relative overflow-hidden opacity-100",style:{opacity:1},children:[h.jsx("div",{"aria-hidden":"true",className:"pointer-events-none absolute inset-0 opacity-5 bg-no-repeat bg-center bg-[length:auto_100%] md:bg-[length:200%]",style:{backgroundImage:"linear-gradient(rgba(5,5,10,0.85), rgba(5,5,10,0.85)), url(/assets/bg-logo.png)",backgroundBlendMode:"screen",filter:"grayscale(0.25)"}}),h.jsxs("div",{className:"space-y-5",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/80",children:"Apoya el proyecto"}),h.jsx("h3",{className:"font-display text-3xl text-slate-100",children:"Nuestro impacto social crece contigo"}),h.jsxs("p",{className:"text-slate-300/80 leading-relaxed font-light",children:["La taquilla mantiene la obra en escena; el universo transmedia financia acompaamiento emocional real. Cada cuota se distribuye en tres frentes que opera Isabel Ayuda para la Vida, A.C."," ",h.jsx("a",{href:"https://www.ayudaparalavida.com/index.html",target:"_blank",rel:"noreferrer",className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Visita su sitio"})]}),h.jsx("div",{className:"mt-4 space-y-3",children:$I.map(H=>{const ee=H.icon,Q=d===H.id;return h.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20 overflow-hidden transition",children:[h.jsxs("button",{type:"button",onClick:()=>f(be=>be===H.id?null:H.id),className:"w-full flex items-center justify-between gap-4 px-4 py-3 text-left hover:bg-white/5 transition",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2 rounded-full bg-purple-500/15 text-purple-200",children:h.jsx(ee,{size:18})}),h.jsxs("div",{children:[h.jsx("p",{className:"font-medium text-slate-100",children:H.title}),h.jsx("p",{className:"text-xs text-slate-400",children:H.metric})]})]}),h.jsx("span",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:Q?"Ocultar":"Ver impacto"})]}),Q?h.jsx("div",{className:"px-4 pb-4 text-sm text-slate-300/90",children:H.description}):null]},H.id)})})]}),h.jsxs("div",{className:"mt-8 flex flex-col gap-4 md:flex-row md:items-center",children:[h.jsx(we,{onClick:pc,variant:"ghost",className:"text-purple-200 hover:text-white hover:bg-white/10 justify-start md:justify-center",children:" Ver miniversos activos"}),h.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:[h.jsx(T3,{size:20,className:"text-purple-300"}),h.jsx("span",{children:"Tu suscripcin = Apoyo directo"})]})]})]}),h.jsx(ne.div,{id:"cta",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-6 border border-white/10 bg-slate-950/50 shadow-2xl",children:h.jsx(cK,{})}),h.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.4,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-6 border border-white/10 bg-slate-950/50 shadow-2xl",children:h.jsx(dK,{})})]})]})]}),h.jsx(iK,{open:e,onClose:P$,contextLabel:r}),h.jsx(z4,{open:S$,onClose:()=>{rx(!1),gP(null)},initialCategoryId:k$}),E$?h.jsx(Sk,{onClose:U$}):null,y?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[h.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:ax}),h.jsxs("div",{className:"relative z-10 w-full max-w-5xl space-y-4",children:[h.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Lectura en progreso"}),h.jsx("h4",{className:"font-display text-2xl text-slate-100",children:y.title||"Fragmento en PDF"}),y.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed max-w-2xl",children:y.description}):null]}),h.jsx("button",{type:"button",onClick:ax,className:"self-start rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})]}),h.jsx("div",{ref:C,className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl p-4 max-h-[75vh] overflow-auto",children:x?h.jsx("p",{className:"text-sm text-red-300 text-center py-8",children:x}):h.jsx(UQ,{file:y.src,onLoadSuccess:O$,onLoadError:H=>{console.error("Error al cargar PDF del miniverso:",H),b("No pudimos cargar el fragmento en PDF. Intenta de nuevo ms tarde.")},loading:h.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Preparando pginas"}),children:w?Array.from(new Array(w),(H,ee)=>h.jsx("div",{className:"mb-6 last:mb-0",children:h.jsx(eJ,{pageNumber:ee+1,width:j,renderTextLayer:!1,renderAnnotationLayer:!1})},`pdf-page-${ee+1}`)):null})})]})]}):null,p?h.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[h.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:ix}),h.jsxs("div",{className:"relative z-10 w-full max-w-3xl",children:[h.jsx("div",{className:"flex justify-end mb-4",children:h.jsx("button",{type:"button",onClick:ix,className:"rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})}),h.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl overflow-hidden",children:[h.jsx("div",{className:"bg-black/60",children:h.jsx("img",{src:p.src,alt:p.title||"Vista previa",className:"w-full h-auto"})}),p.title||p.description?h.jsxs("div",{className:"p-6 space-y-2",children:[p.title?h.jsx("h4",{className:"font-display text-2xl text-slate-100",children:p.title}):null,p.description?h.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:p.description}):null,h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:"Ilustracin de la novela"})]}):null]})]})]}):null,M&&L?h.jsx("div",{className:"fixed inset-0 z-40 bg-black",children:h.jsx(jI,{targetSrc:"/webar/taza/taza.mind",phrases:Nm.lataza.phrases,onExit:EP})}):null,h.jsx(PJ,{open:U,onClose:()=>B(!1)})]})},VI=["http","https","mailto","tel"];function RJ(n){const e=(n||"").trim(),t=e.charAt(0);if(t==="#"||t==="/")return e;const r=e.indexOf(":");if(r===-1)return e;let s=-1;for(;++s<VI.length;){const i=VI[s];if(r===i.length&&e.slice(0,i.length).toLowerCase()===i)return e}return s=e.indexOf("?"),s!==-1&&r>s||(s=e.indexOf("#"),s!==-1&&r>s)?e:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var MJ=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};const hz=No(MJ);function kg(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?UI(n.position):"start"in n||"end"in n?UI(n):"line"in n||"column"in n?PT(n):""}function PT(n){return HI(n&&n.line)+":"+HI(n&&n.column)}function UI(n){return PT(n&&n.start)+"-"+PT(n&&n.end)}function HI(n){return n&&typeof n=="number"?n:1}class Gs extends Error{constructor(e,t,r){const s=[null,null];let i={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(r=t,t=void 0),typeof r=="string"){const a=r.indexOf(":");a===-1?s[1]=r:(s[0]=r.slice(0,a),s[1]=r.slice(a+1))}t&&("type"in t||"position"in t?t.position&&(i=t.position):"start"in t||"end"in t?i=t:("line"in t||"column"in t)&&(i.start=t)),this.name=kg(t)||"1:1",this.message=typeof e=="object"?e.message:e,this.stack="",typeof e=="object"&&e.stack&&(this.stack=e.stack),this.reason=this.message,this.fatal,this.line=i.start.line,this.column=i.start.column,this.position=i,this.source=s[0],this.ruleId=s[1],this.file,this.actual,this.expected,this.url,this.note}}Gs.prototype.file="";Gs.prototype.name="";Gs.prototype.reason="";Gs.prototype.message="";Gs.prototype.stack="";Gs.prototype.fatal=null;Gs.prototype.column=null;Gs.prototype.line=null;Gs.prototype.source=null;Gs.prototype.ruleId=null;Gs.prototype.position=null;const Di={basename:IJ,dirname:LJ,extname:DJ,join:OJ,sep:"/"};function IJ(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Zv(n);let t=0,r=-1,s=n.length,i;if(e===void 0||e.length===0||e.length>n.length){for(;s--;)if(n.charCodeAt(s)===47){if(i){t=s+1;break}}else r<0&&(i=!0,r=s+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let a=-1,o=e.length-1;for(;s--;)if(n.charCodeAt(s)===47){if(i){t=s+1;break}}else a<0&&(i=!0,a=s+1),o>-1&&(n.charCodeAt(s)===e.charCodeAt(o--)?o<0&&(r=s):(o=-1,r=a));return t===r?r=a:r<0&&(r=n.length),n.slice(t,r)}function LJ(n){if(Zv(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.charCodeAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.charCodeAt(0)===47?"/":".":e===1&&n.charCodeAt(0)===47?"//":n.slice(0,e)}function DJ(n){Zv(n);let e=n.length,t=-1,r=0,s=-1,i=0,a;for(;e--;){const o=n.charCodeAt(e);if(o===47){if(a){r=e+1;break}continue}t<0&&(a=!0,t=e+1),o===46?s<0?s=e:i!==1&&(i=1):s>-1&&(i=-1)}return s<0||t<0||i===0||i===1&&s===t-1&&s===r+1?"":n.slice(s,t)}function OJ(...n){let e=-1,t;for(;++e<n.length;)Zv(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":FJ(t)}function FJ(n){Zv(n);const e=n.charCodeAt(0)===47;let t=BJ(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.charCodeAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function BJ(n,e){let t="",r=0,s=-1,i=0,a=-1,o,l;for(;++a<=n.length;){if(a<n.length)o=n.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),s=a,i=0;continue}}else if(t.length>0){t="",r=0,s=a,i=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(s+1,a):t=n.slice(s+1,a),r=a-s-1;s=a,i=0}else o===46&&i>-1?i++:i=-1}return t}function Zv(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const zJ={cwd:$J};function $J(){return"/"}function jT(n){return n!==null&&typeof n=="object"&&n.href&&n.origin}function VJ(n){if(typeof n=="string")n=new URL(n);else if(!jT(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return UJ(n)}function UJ(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.charCodeAt(t)===37&&e.charCodeAt(t+1)===50){const r=e.charCodeAt(t+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(e)}const bE=["history","path","basename","stem","extname","dirname"];class fz{constructor(e){let t;e?typeof e=="string"||HJ(e)?t={value:e}:jT(e)?t={path:e}:t=e:t={},this.data={},this.messages=[],this.history=[],this.cwd=zJ.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<bE.length;){const i=bE[r];i in t&&t[i]!==void 0&&t[i]!==null&&(this[i]=i==="history"?[...t[i]]:t[i])}let s;for(s in t)bE.includes(s)||(this[s]=t[s])}get path(){return this.history[this.history.length-1]}set path(e){jT(e)&&(e=VJ(e)),SE(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return typeof this.path=="string"?Di.dirname(this.path):void 0}set dirname(e){qI(this.basename,"dirname"),this.path=Di.join(e||"",this.basename)}get basename(){return typeof this.path=="string"?Di.basename(this.path):void 0}set basename(e){SE(e,"basename"),wE(e,"basename"),this.path=Di.join(this.dirname||"",e)}get extname(){return typeof this.path=="string"?Di.extname(this.path):void 0}set extname(e){if(wE(e,"extname"),qI(this.dirname,"extname"),e){if(e.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Di.join(this.dirname,this.stem+(e||""))}get stem(){return typeof this.path=="string"?Di.basename(this.path,this.extname):void 0}set stem(e){SE(e,"stem"),wE(e,"stem"),this.path=Di.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e||void 0)}message(e,t,r){const s=new Gs(e,t,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}info(e,t,r){const s=this.message(e,t,r);return s.fatal=null,s}fail(e,t,r){const s=this.message(e,t,r);throw s.fatal=!0,s}}function wE(n,e){if(n&&n.includes(Di.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Di.sep+"`")}function SE(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function qI(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function HJ(n){return hz(n)}function GI(n){if(n)throw n}var Jb=Object.prototype.hasOwnProperty,pz=Object.prototype.toString,WI=Object.defineProperty,XI=Object.getOwnPropertyDescriptor,KI=function(e){return typeof Array.isArray=="function"?Array.isArray(e):pz.call(e)==="[object Array]"},YI=function(e){if(!e||pz.call(e)!=="[object Object]")return!1;var t=Jb.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Jb.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;var s;for(s in e);return typeof s>"u"||Jb.call(e,s)},QI=function(e,t){WI&&t.name==="__proto__"?WI(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},JI=function(e,t){if(t==="__proto__")if(Jb.call(e,t)){if(XI)return XI(e,t).value}else return;return e[t]},qJ=function n(){var e,t,r,s,i,a,o=arguments[0],l=1,c=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<c;++l)if(e=arguments[l],e!=null)for(t in e)r=JI(o,t),s=JI(e,t),o!==s&&(d&&s&&(YI(s)||(i=KI(s)))?(i?(i=!1,a=r&&KI(r)?r:[]):a=r&&YI(r)?r:{},QI(o,{name:t,newValue:n(d,a,s)})):typeof s<"u"&&QI(o,{name:t,newValue:s}));return o};const ZI=No(qJ);function RT(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function GJ(){const n=[],e={run:t,use:r};return e;function t(...s){let i=-1;const a=s.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...s);function o(l,...c){const d=n[++i];let f=-1;if(l){a(l);return}for(;++f<s.length;)(c[f]===null||c[f]===void 0)&&(c[f]=s[f]);s=c,d?WJ(d,o)(...c):a(null,...c)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return n.push(s),e}}function WJ(n,e){let t;return r;function r(...a){const o=n.length>a.length;let l;o&&a.push(s);try{l=n.apply(this,a)}catch(c){const d=c;if(o&&t)throw d;return s(d)}o||(l&&l.then&&typeof l.then=="function"?l.then(i,s):l instanceof Error?s(l):i(l))}function s(a,...o){t||(t=!0,e(a,...o))}function i(a){s(null,a)}}const XJ=gz().freeze(),mz={}.hasOwnProperty;function gz(){const n=GJ(),e=[];let t={},r,s=-1;return i.data=a,i.Parser=void 0,i.Compiler=void 0,i.freeze=o,i.attachers=e,i.use=l,i.parse=c,i.stringify=d,i.run=f,i.runSync=p,i.process=m,i.processSync=y,i;function i(){const g=gz();let w=-1;for(;++w<e.length;)g.use(...e[w]);return g.data(ZI(!0,{},t)),g}function a(g,w){return typeof g=="string"?arguments.length===2?(EE("data",r),t[g]=w,i):mz.call(t,g)&&t[g]||null:g?(EE("data",r),t=g,i):t}function o(){if(r)return i;for(;++s<e.length;){const[g,...w]=e[s];if(w[0]===!1)continue;w[0]===!0&&(w[0]=void 0);const v=g.call(i,...w);typeof v=="function"&&n.use(v)}return r=!0,s=Number.POSITIVE_INFINITY,i}function l(g,...w){let v;if(EE("use",r),g!=null)if(typeof g=="function")_(g,...w);else if(typeof g=="object")Array.isArray(g)?C(g):b(g);else throw new TypeError("Expected usable value, not `"+g+"`");return v&&(t.settings=Object.assign(t.settings||{},v)),i;function x(E){if(typeof E=="function")_(E);else if(typeof E=="object")if(Array.isArray(E)){const[N,...j]=E;_(N,...j)}else b(E);else throw new TypeError("Expected usable value, not `"+E+"`")}function b(E){C(E.plugins),E.settings&&(v=Object.assign(v||{},E.settings))}function C(E){let N=-1;if(E!=null)if(Array.isArray(E))for(;++N<E.length;){const j=E[N];x(j)}else throw new TypeError("Expected a list of plugins, not `"+E+"`")}function _(E,N){let j=-1,M;for(;++j<e.length;)if(e[j][0]===E){M=e[j];break}M?(RT(M[1])&&RT(N)&&(N=ZI(!0,M[1],N)),M[1]=N):e.push([...arguments])}}function c(g){i.freeze();const w=Pm(g),v=i.Parser;return kE("parse",v),eL(v,"parse")?new v(String(w),w).parse():v(String(w),w)}function d(g,w){i.freeze();const v=Pm(w),x=i.Compiler;return AE("stringify",x),tL(g),eL(x,"compile")?new x(g,v).compile():x(g,v)}function f(g,w,v){if(tL(g),i.freeze(),!v&&typeof w=="function"&&(v=w,w=void 0),!v)return new Promise(x);x(null,v);function x(b,C){n.run(g,Pm(w),_);function _(E,N,j){N=N||g,E?C(E):b?b(N):v(null,N,j)}}}function p(g,w){let v,x;return i.run(g,w,b),nL("runSync","run",x),v;function b(C,_){GI(C),v=_,x=!0}}function m(g,w){if(i.freeze(),kE("process",i.Parser),AE("process",i.Compiler),!w)return new Promise(v);v(null,w);function v(x,b){const C=Pm(g);i.run(i.parse(C),C,(E,N,j)=>{if(E||!N||!j)_(E);else{const M=i.stringify(N,j);M==null||(QJ(M)?j.value=M:j.result=M),_(E,j)}});function _(E,N){E||!N?b(E):x?x(N):w(null,N)}}}function y(g){let w;i.freeze(),kE("processSync",i.Parser),AE("processSync",i.Compiler);const v=Pm(g);return i.process(v,x),nL("processSync","process",w),v;function x(b){w=!0,GI(b)}}}function eL(n,e){return typeof n=="function"&&n.prototype&&(KJ(n.prototype)||e in n.prototype)}function KJ(n){let e;for(e in n)if(mz.call(n,e))return!0;return!1}function kE(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `Parser`")}function AE(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `Compiler`")}function EE(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function tL(n){if(!RT(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function nL(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Pm(n){return YJ(n)?n:new fz(n)}function YJ(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function QJ(n){return typeof n=="string"||hz(n)}const JJ={};function ZJ(n,e){const t=e||JJ,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,s=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return yz(n,r,s)}function yz(n,e,t){if(eZ(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return rL(n.children,e,t)}return Array.isArray(n)?rL(n,e,t):""}function rL(n,e,t){const r=[];let s=-1;for(;++s<n.length;)r[s]=yz(n[s],e,t);return r.join("")}function eZ(n){return!!(n&&typeof n=="object")}function pa(n,e,t,r){const s=n.length;let i=0,a;if(e<0?e=-e>s?0:s+e:e=e>s?s:e,t=t>0?t:0,r.length<1e4)a=Array.from(r),a.unshift(e,t),n.splice(...a);else for(t&&n.splice(e,t);i<r.length;)a=r.slice(i,i+1e4),a.unshift(e,0),n.splice(...a),i+=1e4,e+=1e4}function zs(n,e){return n.length>0?(pa(n,n.length,0,e),n):e}const sL={}.hasOwnProperty;function tZ(n){const e={};let t=-1;for(;++t<n.length;)nZ(e,n[t]);return e}function nZ(n,e){let t;for(t in e){const s=(sL.call(n,t)?n[t]:void 0)||(n[t]={}),i=e[t];let a;if(i)for(a in i){sL.call(s,a)||(s[a]=[]);const o=i[a];rZ(s[a],Array.isArray(o)?o:o?[o]:[])}}}function rZ(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);pa(n,0,0,r)}const sZ=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ca=hc(/[A-Za-z]/),hs=hc(/[\dA-Za-z]/),iZ=hc(/[#-'*+\--9=?A-Z^-~]/);function MT(n){return n!==null&&(n<32||n===127)}const IT=hc(/\d/),aZ=hc(/[\dA-Fa-f]/),oZ=hc(/[!-/:-@[-`{-~]/);function Ce(n){return n!==null&&n<-2}function Or(n){return n!==null&&(n<0||n===32)}function rt(n){return n===-2||n===-1||n===32}const lZ=hc(sZ),cZ=hc(/\s/);function hc(n){return e;function e(t){return t!==null&&n.test(String.fromCharCode(t))}}function At(n,e,t,r){const s=r?r-1:Number.POSITIVE_INFINITY;let i=0;return a;function a(l){return rt(l)?(n.enter(t),o(l)):e(l)}function o(l){return rt(l)&&i++<s?(n.consume(l),o):(n.exit(t),e(l))}}const uZ={tokenize:dZ};function dZ(n){const e=n.attempt(this.parser.constructs.contentInitial,r,s);let t;return e;function r(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),At(n,e,"linePrefix")}function s(o){return n.enter("paragraph"),i(o)}function i(o){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,a(o)}function a(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return Ce(o)?(n.consume(o),n.exit("chunkText"),i):(n.consume(o),a)}}const hZ={tokenize:fZ},iL={tokenize:pZ};function fZ(n){const e=this,t=[];let r=0,s,i,a;return o;function o(b){if(r<t.length){const C=t[r];return e.containerState=C[1],n.attempt(C[0].continuation,l,c)(b)}return c(b)}function l(b){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,s&&x();const C=e.events.length;let _=C,E;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){E=e.events[_][1].end;break}v(r);let N=C;for(;N<e.events.length;)e.events[N][1].end=Object.assign({},E),N++;return pa(e.events,_+1,0,e.events.slice(C)),e.events.length=N,c(b)}return o(b)}function c(b){if(r===t.length){if(!s)return p(b);if(s.currentConstruct&&s.currentConstruct.concrete)return y(b);e.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(iL,d,f)(b)}function d(b){return s&&x(),v(r),p(b)}function f(b){return e.parser.lazy[e.now().line]=r!==t.length,a=e.now().offset,y(b)}function p(b){return e.containerState={},n.attempt(iL,m,y)(b)}function m(b){return r++,t.push([e.currentConstruct,e.containerState]),p(b)}function y(b){if(b===null){s&&x(),v(0),n.consume(b);return}return s=s||e.parser.flow(e.now()),n.enter("chunkFlow",{contentType:"flow",previous:i,_tokenizer:s}),g(b)}function g(b){if(b===null){w(n.exit("chunkFlow"),!0),v(0),n.consume(b);return}return Ce(b)?(n.consume(b),w(n.exit("chunkFlow")),r=0,e.interrupt=void 0,o):(n.consume(b),g)}function w(b,C){const _=e.sliceStream(b);if(C&&_.push(null),b.previous=i,i&&(i.next=b),i=b,s.defineSkip(b.start),s.write(_),e.parser.lazy[b.start.line]){let E=s.events.length;for(;E--;)if(s.events[E][1].start.offset<a&&(!s.events[E][1].end||s.events[E][1].end.offset>a))return;const N=e.events.length;let j=N,M,O;for(;j--;)if(e.events[j][0]==="exit"&&e.events[j][1].type==="chunkFlow"){if(M){O=e.events[j][1].end;break}M=!0}for(v(r),E=N;E<e.events.length;)e.events[E][1].end=Object.assign({},O),E++;pa(e.events,j+1,0,e.events.slice(N)),e.events.length=E}}function v(b){let C=t.length;for(;C-- >b;){const _=t[C];e.containerState=_[1],_[0].exit.call(e,n)}t.length=b}function x(){s.write([null]),i=void 0,s=void 0,e.containerState._closeFlow=void 0}}function pZ(n,e,t){return At(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function aL(n){if(n===null||Or(n)||cZ(n))return 1;if(lZ(n))return 2}function VN(n,e,t){const r=[];let s=-1;for(;++s<n.length;){const i=n[s].resolveAll;i&&!r.includes(i)&&(e=i(e,t),r.push(i))}return e}const LT={name:"attention",tokenize:gZ,resolveAll:mZ};function mZ(n,e){let t=-1,r,s,i,a,o,l,c,d;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const f=Object.assign({},n[r][1].end),p=Object.assign({},n[t][1].start);oL(f,-l),oL(p,l),a={type:l>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},n[r][1].end)},o={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[t][1].start),end:p},i={type:l>1?"strongText":"emphasisText",start:Object.assign({},n[r][1].end),end:Object.assign({},n[t][1].start)},s={type:l>1?"strong":"emphasis",start:Object.assign({},a.start),end:Object.assign({},o.end)},n[r][1].end=Object.assign({},a.start),n[t][1].start=Object.assign({},o.end),c=[],n[r][1].end.offset-n[r][1].start.offset&&(c=zs(c,[["enter",n[r][1],e],["exit",n[r][1],e]])),c=zs(c,[["enter",s,e],["enter",a,e],["exit",a,e],["enter",i,e]]),c=zs(c,VN(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),c=zs(c,[["exit",i,e],["enter",o,e],["exit",o,e],["exit",s,e]]),n[t][1].end.offset-n[t][1].start.offset?(d=2,c=zs(c,[["enter",n[t][1],e],["exit",n[t][1],e]])):d=0,pa(n,r-1,t-r+3,c),t=r+c.length-d-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function gZ(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,s=aL(r);let i;return a;function a(l){return i=l,n.enter("attentionSequence"),o(l)}function o(l){if(l===i)return n.consume(l),o;const c=n.exit("attentionSequence"),d=aL(l),f=!d||d===2&&s||t.includes(l),p=!s||s===2&&d||t.includes(r);return c._open=!!(i===42?f:f&&(s||!p)),c._close=!!(i===42?p:p&&(d||!f)),e(l)}}function oL(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const yZ={name:"autolink",tokenize:vZ};function vZ(n,e,t){let r=0;return s;function s(m){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),i}function i(m){return ca(m)?(n.consume(m),a):c(m)}function a(m){return m===43||m===45||m===46||hs(m)?(r=1,o(m)):c(m)}function o(m){return m===58?(n.consume(m),r=0,l):(m===43||m===45||m===46||hs(m))&&r++<32?(n.consume(m),o):(r=0,c(m))}function l(m){return m===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):m===null||m===32||m===60||MT(m)?t(m):(n.consume(m),l)}function c(m){return m===64?(n.consume(m),d):iZ(m)?(n.consume(m),c):t(m)}function d(m){return hs(m)?f(m):t(m)}function f(m){return m===46?(n.consume(m),r=0,d):m===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):p(m)}function p(m){if((m===45||hs(m))&&r++<63){const y=m===45?p:f;return n.consume(m),y}return t(m)}}const Mk={tokenize:xZ,partial:!0};function xZ(n,e,t){return r;function r(i){return rt(i)?At(n,s,"linePrefix")(i):s(i)}function s(i){return i===null||Ce(i)?e(i):t(i)}}const vz={name:"blockQuote",tokenize:bZ,continuation:{tokenize:wZ},exit:SZ};function bZ(n,e,t){const r=this;return s;function s(a){if(a===62){const o=r.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),i}return t(a)}function i(a){return rt(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(a))}}function wZ(n,e,t){const r=this;return s;function s(a){return rt(a)?At(n,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):i(a)}function i(a){return n.attempt(vz,e,t)(a)}}function SZ(n){n.exit("blockQuote")}const xz={name:"characterEscape",tokenize:kZ};function kZ(n,e,t){return r;function r(i){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(i),n.exit("escapeMarker"),s}function s(i){return oZ(i)?(n.enter("characterEscapeValue"),n.consume(i),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(i)}}const lL=document.createElement("i");function UN(n){const e="&"+n+";";lL.innerHTML=e;const t=lL.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}const bz={name:"characterReference",tokenize:AZ};function AZ(n,e,t){const r=this;let s=0,i,a;return o;function o(f){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(f),n.exit("characterReferenceMarker"),l}function l(f){return f===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(f),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),i=31,a=hs,d(f))}function c(f){return f===88||f===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(f),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),i=6,a=aZ,d):(n.enter("characterReferenceValue"),i=7,a=IT,d(f))}function d(f){if(f===59&&s){const p=n.exit("characterReferenceValue");return a===hs&&!UN(r.sliceSerialize(p))?t(f):(n.enter("characterReferenceMarker"),n.consume(f),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return a(f)&&s++<i?(n.consume(f),d):t(f)}}const cL={tokenize:CZ,partial:!0},uL={name:"codeFenced",tokenize:EZ,concrete:!0};function EZ(n,e,t){const r=this,s={tokenize:_,partial:!0};let i=0,a=0,o;return l;function l(E){return c(E)}function c(E){const N=r.events[r.events.length-1];return i=N&&N[1].type==="linePrefix"?N[2].sliceSerialize(N[1],!0).length:0,o=E,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(E)}function d(E){return E===o?(a++,n.consume(E),d):a<3?t(E):(n.exit("codeFencedFenceSequence"),rt(E)?At(n,f,"whitespace")(E):f(E))}function f(E){return E===null||Ce(E)?(n.exit("codeFencedFence"),r.interrupt?e(E):n.check(cL,g,C)(E)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),p(E))}function p(E){return E===null||Ce(E)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),f(E)):rt(E)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),At(n,m,"whitespace")(E)):E===96&&E===o?t(E):(n.consume(E),p)}function m(E){return E===null||Ce(E)?f(E):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),y(E))}function y(E){return E===null||Ce(E)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),f(E)):E===96&&E===o?t(E):(n.consume(E),y)}function g(E){return n.attempt(s,C,w)(E)}function w(E){return n.enter("lineEnding"),n.consume(E),n.exit("lineEnding"),v}function v(E){return i>0&&rt(E)?At(n,x,"linePrefix",i+1)(E):x(E)}function x(E){return E===null||Ce(E)?n.check(cL,g,C)(E):(n.enter("codeFlowValue"),b(E))}function b(E){return E===null||Ce(E)?(n.exit("codeFlowValue"),x(E)):(n.consume(E),b)}function C(E){return n.exit("codeFenced"),e(E)}function _(E,N,j){let M=0;return O;function O(I){return E.enter("lineEnding"),E.consume(I),E.exit("lineEnding"),L}function L(I){return E.enter("codeFencedFence"),rt(I)?At(E,F,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(I):F(I)}function F(I){return I===o?(E.enter("codeFencedFenceSequence"),U(I)):j(I)}function U(I){return I===o?(M++,E.consume(I),U):M>=a?(E.exit("codeFencedFenceSequence"),rt(I)?At(E,B,"whitespace")(I):B(I)):j(I)}function B(I){return I===null||Ce(I)?(E.exit("codeFencedFence"),N(I)):j(I)}}}function CZ(n,e,t){const r=this;return s;function s(a){return a===null?t(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i)}function i(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}const CE={name:"codeIndented",tokenize:TZ},_Z={tokenize:NZ,partial:!0};function TZ(n,e,t){const r=this;return s;function s(c){return n.enter("codeIndented"),At(n,i,"linePrefix",4+1)(c)}function i(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(c):t(c)}function a(c){return c===null?l(c):Ce(c)?n.attempt(_Z,a,l)(c):(n.enter("codeFlowValue"),o(c))}function o(c){return c===null||Ce(c)?(n.exit("codeFlowValue"),a(c)):(n.consume(c),o)}function l(c){return n.exit("codeIndented"),e(c)}}function NZ(n,e,t){const r=this;return s;function s(a){return r.parser.lazy[r.now().line]?t(a):Ce(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s):At(n,i,"linePrefix",4+1)(a)}function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):Ce(a)?s(a):t(a)}}const PZ={name:"codeText",tokenize:MZ,resolve:jZ,previous:RZ};function jZ(n){let e=n.length-4,t=3,r,s;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)s===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(s=r):(r===e||n[r][1].type==="lineEnding")&&(n[s][1].type="codeTextData",r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),e-=r-s-2,r=s+2),s=void 0);return n}function RZ(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function MZ(n,e,t){let r=0,s,i;return a;function a(f){return n.enter("codeText"),n.enter("codeTextSequence"),o(f)}function o(f){return f===96?(n.consume(f),r++,o):(n.exit("codeTextSequence"),l(f))}function l(f){return f===null?t(f):f===32?(n.enter("space"),n.consume(f),n.exit("space"),l):f===96?(i=n.enter("codeTextSequence"),s=0,d(f)):Ce(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),l):(n.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||Ce(f)?(n.exit("codeTextData"),l(f)):(n.consume(f),c)}function d(f){return f===96?(n.consume(f),s++,d):s===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(f)):(i.type="codeTextData",c(f))}}function wz(n){const e={};let t=-1,r,s,i,a,o,l,c;for(;++t<n.length;){for(;t in e;)t=e[t];if(r=n[t],t&&r[1].type==="chunkFlow"&&n[t-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,i=0,i<l.length&&l[i][1].type==="lineEndingBlank"&&(i+=2),i<l.length&&l[i][1].type==="content"))for(;++i<l.length&&l[i][1].type!=="content";)l[i][1].type==="chunkText"&&(l[i][1]._isInFirstContentOfListItem=!0,i++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,IZ(n,t)),t=e[t],c=!0);else if(r[1]._container){for(i=t,s=void 0;i--&&(a=n[i],a[1].type==="lineEnding"||a[1].type==="lineEndingBlank");)a[0]==="enter"&&(s&&(n[s][1].type="lineEndingBlank"),a[1].type="lineEnding",s=i);s&&(r[1].end=Object.assign({},n[s][1].start),o=n.slice(s,t),o.unshift(r),pa(n,s,t-s+1,o))}}return!c}function IZ(n,e){const t=n[e][1],r=n[e][2];let s=e-1;const i=[],a=t._tokenizer||r.parser[t.contentType](t.start),o=a.events,l=[],c={};let d,f,p=-1,m=t,y=0,g=0;const w=[g];for(;m;){for(;n[++s][1]!==m;);i.push(s),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),f&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),f=m,m=m.next}for(m=t;++p<o.length;)o[p][0]==="exit"&&o[p-1][0]==="enter"&&o[p][1].type===o[p-1][1].type&&o[p][1].start.line!==o[p][1].end.line&&(g=p+1,w.push(g),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):w.pop(),p=w.length;p--;){const v=o.slice(w[p],w[p+1]),x=i.pop();l.unshift([x,x+v.length-1]),pa(n,x,2,v)}for(p=-1;++p<l.length;)c[y+l[p][0]]=y+l[p][1],y+=l[p][1]-l[p][0]-1;return c}const LZ={tokenize:FZ,resolve:OZ},DZ={tokenize:BZ,partial:!0};function OZ(n){return wz(n),n}function FZ(n,e){let t;return r;function r(o){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),s(o)}function s(o){return o===null?i(o):Ce(o)?n.check(DZ,a,i)(o):(n.consume(o),s)}function i(o){return n.exit("chunkContent"),n.exit("content"),e(o)}function a(o){return n.consume(o),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,s}}function BZ(n,e,t){const r=this;return s;function s(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),At(n,i,"linePrefix")}function i(a){if(a===null||Ce(a))return t(a);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):n.interrupt(r.parser.constructs.flow,t,e)(a)}}function Sz(n,e,t,r,s,i,a,o,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return f;function f(v){return v===60?(n.enter(r),n.enter(s),n.enter(i),n.consume(v),n.exit(i),p):v===null||v===32||v===41||MT(v)?t(v):(n.enter(r),n.enter(a),n.enter(o),n.enter("chunkString",{contentType:"string"}),g(v))}function p(v){return v===62?(n.enter(i),n.consume(v),n.exit(i),n.exit(s),n.exit(r),e):(n.enter(o),n.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===62?(n.exit("chunkString"),n.exit(o),p(v)):v===null||v===60||Ce(v)?t(v):(n.consume(v),v===92?y:m)}function y(v){return v===60||v===62||v===92?(n.consume(v),m):m(v)}function g(v){return!d&&(v===null||v===41||Or(v))?(n.exit("chunkString"),n.exit(o),n.exit(a),n.exit(r),e(v)):d<c&&v===40?(n.consume(v),d++,g):v===41?(n.consume(v),d--,g):v===null||v===32||v===40||MT(v)?t(v):(n.consume(v),v===92?w:g)}function w(v){return v===40||v===41||v===92?(n.consume(v),g):g(v)}}function kz(n,e,t,r,s,i){const a=this;let o=0,l;return c;function c(m){return n.enter(r),n.enter(s),n.consume(m),n.exit(s),n.enter(i),d}function d(m){return o>999||m===null||m===91||m===93&&!l||m===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?t(m):m===93?(n.exit(i),n.enter(s),n.consume(m),n.exit(s),n.exit(r),e):Ce(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),f(m))}function f(m){return m===null||m===91||m===93||Ce(m)||o++>999?(n.exit("chunkString"),d(m)):(n.consume(m),l||(l=!rt(m)),m===92?p:f)}function p(m){return m===91||m===92||m===93?(n.consume(m),o++,f):f(m)}}function Az(n,e,t,r,s,i){let a;return o;function o(p){return p===34||p===39||p===40?(n.enter(r),n.enter(s),n.consume(p),n.exit(s),a=p===40?41:p,l):t(p)}function l(p){return p===a?(n.enter(s),n.consume(p),n.exit(s),n.exit(r),e):(n.enter(i),c(p))}function c(p){return p===a?(n.exit(i),l(a)):p===null?t(p):Ce(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),At(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===a||p===null||Ce(p)?(n.exit("chunkString"),c(p)):(n.consume(p),p===92?f:d)}function f(p){return p===a||p===92?(n.consume(p),d):d(p)}}function Ag(n,e){let t;return r;function r(s){return Ce(s)?(n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),t=!0,r):rt(s)?At(n,r,t?"linePrefix":"lineSuffix")(s):e(s)}}function Eh(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zZ={name:"definition",tokenize:VZ},$Z={tokenize:UZ,partial:!0};function VZ(n,e,t){const r=this;let s;return i;function i(m){return n.enter("definition"),a(m)}function a(m){return kz.call(r,n,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function o(m){return s=Eh(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(n.enter("definitionMarker"),n.consume(m),n.exit("definitionMarker"),l):t(m)}function l(m){return Or(m)?Ag(n,c)(m):c(m)}function c(m){return Sz(n,d,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return n.attempt($Z,f,f)(m)}function f(m){return rt(m)?At(n,p,"whitespace")(m):p(m)}function p(m){return m===null||Ce(m)?(n.exit("definition"),r.parser.defined.push(s),e(m)):t(m)}}function UZ(n,e,t){return r;function r(o){return Or(o)?Ag(n,s)(o):t(o)}function s(o){return Az(n,i,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function i(o){return rt(o)?At(n,a,"whitespace")(o):a(o)}function a(o){return o===null||Ce(o)?e(o):t(o)}}const HZ={name:"hardBreakEscape",tokenize:qZ};function qZ(n,e,t){return r;function r(i){return n.enter("hardBreakEscape"),n.consume(i),s}function s(i){return Ce(i)?(n.exit("hardBreakEscape"),e(i)):t(i)}}const GZ={name:"headingAtx",tokenize:XZ,resolve:WZ};function WZ(n,e){let t=n.length-2,r=3,s,i;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(s={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},i={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},pa(n,r,t-r+1,[["enter",s,e],["enter",i,e],["exit",i,e],["exit",s,e]])),n}function XZ(n,e,t){let r=0;return s;function s(d){return n.enter("atxHeading"),i(d)}function i(d){return n.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&r++<6?(n.consume(d),a):d===null||Or(d)?(n.exit("atxHeadingSequence"),o(d)):t(d)}function o(d){return d===35?(n.enter("atxHeadingSequence"),l(d)):d===null||Ce(d)?(n.exit("atxHeading"),e(d)):rt(d)?At(n,o,"whitespace")(d):(n.enter("atxHeadingText"),c(d))}function l(d){return d===35?(n.consume(d),l):(n.exit("atxHeadingSequence"),o(d))}function c(d){return d===null||d===35||Or(d)?(n.exit("atxHeadingText"),o(d)):(n.consume(d),c)}}const KZ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],dL=["pre","script","style","textarea"],YZ={name:"htmlFlow",tokenize:eee,resolveTo:ZZ,concrete:!0},QZ={tokenize:nee,partial:!0},JZ={tokenize:tee,partial:!0};function ZZ(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function eee(n,e,t){const r=this;let s,i,a,o,l;return c;function c(R){return d(R)}function d(R){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(R),f}function f(R){return R===33?(n.consume(R),p):R===47?(n.consume(R),i=!0,g):R===63?(n.consume(R),s=3,r.interrupt?e:P):ca(R)?(n.consume(R),a=String.fromCharCode(R),w):t(R)}function p(R){return R===45?(n.consume(R),s=2,m):R===91?(n.consume(R),s=5,o=0,y):ca(R)?(n.consume(R),s=4,r.interrupt?e:P):t(R)}function m(R){return R===45?(n.consume(R),r.interrupt?e:P):t(R)}function y(R){const ie="CDATA[";return R===ie.charCodeAt(o++)?(n.consume(R),o===ie.length?r.interrupt?e:F:y):t(R)}function g(R){return ca(R)?(n.consume(R),a=String.fromCharCode(R),w):t(R)}function w(R){if(R===null||R===47||R===62||Or(R)){const ie=R===47,ke=a.toLowerCase();return!ie&&!i&&dL.includes(ke)?(s=1,r.interrupt?e(R):F(R)):KZ.includes(a.toLowerCase())?(s=6,ie?(n.consume(R),v):r.interrupt?e(R):F(R)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(R):i?x(R):b(R))}return R===45||hs(R)?(n.consume(R),a+=String.fromCharCode(R),w):t(R)}function v(R){return R===62?(n.consume(R),r.interrupt?e:F):t(R)}function x(R){return rt(R)?(n.consume(R),x):O(R)}function b(R){return R===47?(n.consume(R),O):R===58||R===95||ca(R)?(n.consume(R),C):rt(R)?(n.consume(R),b):O(R)}function C(R){return R===45||R===46||R===58||R===95||hs(R)?(n.consume(R),C):_(R)}function _(R){return R===61?(n.consume(R),E):rt(R)?(n.consume(R),_):b(R)}function E(R){return R===null||R===60||R===61||R===62||R===96?t(R):R===34||R===39?(n.consume(R),l=R,N):rt(R)?(n.consume(R),E):j(R)}function N(R){return R===l?(n.consume(R),l=null,M):R===null||Ce(R)?t(R):(n.consume(R),N)}function j(R){return R===null||R===34||R===39||R===47||R===60||R===61||R===62||R===96||Or(R)?_(R):(n.consume(R),j)}function M(R){return R===47||R===62||rt(R)?b(R):t(R)}function O(R){return R===62?(n.consume(R),L):t(R)}function L(R){return R===null||Ce(R)?F(R):rt(R)?(n.consume(R),L):t(R)}function F(R){return R===45&&s===2?(n.consume(R),D):R===60&&s===1?(n.consume(R),z):R===62&&s===4?(n.consume(R),Y):R===63&&s===3?(n.consume(R),P):R===93&&s===5?(n.consume(R),q):Ce(R)&&(s===6||s===7)?(n.exit("htmlFlowData"),n.check(QZ,K,U)(R)):R===null||Ce(R)?(n.exit("htmlFlowData"),U(R)):(n.consume(R),F)}function U(R){return n.check(JZ,B,K)(R)}function B(R){return n.enter("lineEnding"),n.consume(R),n.exit("lineEnding"),I}function I(R){return R===null||Ce(R)?U(R):(n.enter("htmlFlowData"),F(R))}function D(R){return R===45?(n.consume(R),P):F(R)}function z(R){return R===47?(n.consume(R),a="",V):F(R)}function V(R){if(R===62){const ie=a.toLowerCase();return dL.includes(ie)?(n.consume(R),Y):F(R)}return ca(R)&&a.length<8?(n.consume(R),a+=String.fromCharCode(R),V):F(R)}function q(R){return R===93?(n.consume(R),P):F(R)}function P(R){return R===62?(n.consume(R),Y):R===45&&s===2?(n.consume(R),P):F(R)}function Y(R){return R===null||Ce(R)?(n.exit("htmlFlowData"),K(R)):(n.consume(R),Y)}function K(R){return n.exit("htmlFlow"),e(R)}}function tee(n,e,t){const r=this;return s;function s(a){return Ce(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),i):t(a)}function i(a){return r.parser.lazy[r.now().line]?t(a):e(a)}}function nee(n,e,t){return r;function r(s){return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),n.attempt(Mk,e,t)}}const ree={name:"htmlText",tokenize:see};function see(n,e,t){const r=this;let s,i,a;return o;function o(P){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(P),l}function l(P){return P===33?(n.consume(P),c):P===47?(n.consume(P),_):P===63?(n.consume(P),b):ca(P)?(n.consume(P),j):t(P)}function c(P){return P===45?(n.consume(P),d):P===91?(n.consume(P),i=0,y):ca(P)?(n.consume(P),x):t(P)}function d(P){return P===45?(n.consume(P),m):t(P)}function f(P){return P===null?t(P):P===45?(n.consume(P),p):Ce(P)?(a=f,z(P)):(n.consume(P),f)}function p(P){return P===45?(n.consume(P),m):f(P)}function m(P){return P===62?D(P):P===45?p(P):f(P)}function y(P){const Y="CDATA[";return P===Y.charCodeAt(i++)?(n.consume(P),i===Y.length?g:y):t(P)}function g(P){return P===null?t(P):P===93?(n.consume(P),w):Ce(P)?(a=g,z(P)):(n.consume(P),g)}function w(P){return P===93?(n.consume(P),v):g(P)}function v(P){return P===62?D(P):P===93?(n.consume(P),v):g(P)}function x(P){return P===null||P===62?D(P):Ce(P)?(a=x,z(P)):(n.consume(P),x)}function b(P){return P===null?t(P):P===63?(n.consume(P),C):Ce(P)?(a=b,z(P)):(n.consume(P),b)}function C(P){return P===62?D(P):b(P)}function _(P){return ca(P)?(n.consume(P),E):t(P)}function E(P){return P===45||hs(P)?(n.consume(P),E):N(P)}function N(P){return Ce(P)?(a=N,z(P)):rt(P)?(n.consume(P),N):D(P)}function j(P){return P===45||hs(P)?(n.consume(P),j):P===47||P===62||Or(P)?M(P):t(P)}function M(P){return P===47?(n.consume(P),D):P===58||P===95||ca(P)?(n.consume(P),O):Ce(P)?(a=M,z(P)):rt(P)?(n.consume(P),M):D(P)}function O(P){return P===45||P===46||P===58||P===95||hs(P)?(n.consume(P),O):L(P)}function L(P){return P===61?(n.consume(P),F):Ce(P)?(a=L,z(P)):rt(P)?(n.consume(P),L):M(P)}function F(P){return P===null||P===60||P===61||P===62||P===96?t(P):P===34||P===39?(n.consume(P),s=P,U):Ce(P)?(a=F,z(P)):rt(P)?(n.consume(P),F):(n.consume(P),B)}function U(P){return P===s?(n.consume(P),s=void 0,I):P===null?t(P):Ce(P)?(a=U,z(P)):(n.consume(P),U)}function B(P){return P===null||P===34||P===39||P===60||P===61||P===96?t(P):P===47||P===62||Or(P)?M(P):(n.consume(P),B)}function I(P){return P===47||P===62||Or(P)?M(P):t(P)}function D(P){return P===62?(n.consume(P),n.exit("htmlTextData"),n.exit("htmlText"),e):t(P)}function z(P){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(P),n.exit("lineEnding"),V}function V(P){return rt(P)?At(n,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):q(P)}function q(P){return n.enter("htmlTextData"),a(P)}}const HN={name:"labelEnd",tokenize:uee,resolveTo:cee,resolveAll:lee},iee={tokenize:dee},aee={tokenize:hee},oee={tokenize:fee};function lee(n){let e=-1;for(;++e<n.length;){const t=n[e][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(n.splice(e+1,t.type==="labelImage"?4:2),t.type="data",e++)}return n}function cee(n,e){let t=n.length,r=0,s,i,a,o;for(;t--;)if(s=n[t][1],i){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;n[t][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(a){if(n[t][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(i=t,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(a=t);const l={type:n[i][1].type==="labelLink"?"link":"image",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)},c={type:"label",start:Object.assign({},n[i][1].start),end:Object.assign({},n[a][1].end)},d={type:"labelText",start:Object.assign({},n[i+r+2][1].end),end:Object.assign({},n[a-2][1].start)};return o=[["enter",l,e],["enter",c,e]],o=zs(o,n.slice(i+1,i+r+3)),o=zs(o,[["enter",d,e]]),o=zs(o,VN(e.parser.constructs.insideSpan.null,n.slice(i+r+4,a-3),e)),o=zs(o,[["exit",d,e],n[a-2],n[a-1],["exit",c,e]]),o=zs(o,n.slice(a+1)),o=zs(o,[["exit",l,e]]),pa(n,i,n.length,o),n}function uee(n,e,t){const r=this;let s=r.events.length,i,a;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){i=r.events[s][1];break}return o;function o(p){return i?i._inactive?f(p):(a=r.parser.defined.includes(Eh(r.sliceSerialize({start:i.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(p),n.exit("labelMarker"),n.exit("labelEnd"),l):t(p)}function l(p){return p===40?n.attempt(iee,d,a?d:f)(p):p===91?n.attempt(aee,d,a?c:f)(p):a?d(p):f(p)}function c(p){return n.attempt(oee,d,f)(p)}function d(p){return e(p)}function f(p){return i._balanced=!0,t(p)}}function dee(n,e,t){return r;function r(f){return n.enter("resource"),n.enter("resourceMarker"),n.consume(f),n.exit("resourceMarker"),s}function s(f){return Or(f)?Ag(n,i)(f):i(f)}function i(f){return f===41?d(f):Sz(n,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function a(f){return Or(f)?Ag(n,l)(f):d(f)}function o(f){return t(f)}function l(f){return f===34||f===39||f===40?Az(n,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function c(f){return Or(f)?Ag(n,d)(f):d(f)}function d(f){return f===41?(n.enter("resourceMarker"),n.consume(f),n.exit("resourceMarker"),n.exit("resource"),e):t(f)}}function hee(n,e,t){const r=this;return s;function s(o){return kz.call(r,n,i,a,"reference","referenceMarker","referenceString")(o)}function i(o){return r.parser.defined.includes(Eh(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function a(o){return t(o)}}function fee(n,e,t){return r;function r(i){return n.enter("reference"),n.enter("referenceMarker"),n.consume(i),n.exit("referenceMarker"),s}function s(i){return i===93?(n.enter("referenceMarker"),n.consume(i),n.exit("referenceMarker"),n.exit("reference"),e):t(i)}}const pee={name:"labelStartImage",tokenize:mee,resolveAll:HN.resolveAll};function mee(n,e,t){const r=this;return s;function s(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),i}function i(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),a):t(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const gee={name:"labelStartLink",tokenize:yee,resolveAll:HN.resolveAll};function yee(n,e,t){const r=this;return s;function s(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),i}function i(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const _E={name:"lineEnding",tokenize:vee};function vee(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),At(n,e,"linePrefix")}}const Zb={name:"thematicBreak",tokenize:xee};function xee(n,e,t){let r=0,s;return i;function i(c){return n.enter("thematicBreak"),a(c)}function a(c){return s=c,o(c)}function o(c){return c===s?(n.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||Ce(c))?(n.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===s?(n.consume(c),r++,l):(n.exit("thematicBreakSequence"),rt(c)?At(n,o,"whitespace")(c):o(c))}}const br={name:"list",tokenize:See,continuation:{tokenize:kee},exit:Eee},bee={tokenize:Cee,partial:!0},wee={tokenize:Aee,partial:!0};function See(n,e,t){const r=this,s=r.events[r.events.length-1];let i=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,a=0;return o;function o(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:IT(m)){if(r.containerState.type||(r.containerState.type=y,n.enter(y,{_container:!0})),y==="listUnordered")return n.enter("listItemPrefix"),m===42||m===45?n.check(Zb,t,c)(m):c(m);if(!r.interrupt||m===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(m)}return t(m)}function l(m){return IT(m)&&++a<10?(n.consume(m),l):(!r.interrupt||a<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(n.exit("listItemValue"),c(m)):t(m)}function c(m){return n.enter("listItemMarker"),n.consume(m),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,n.check(Mk,r.interrupt?t:d,n.attempt(bee,p,f))}function d(m){return r.containerState.initialBlankLine=!0,i++,p(m)}function f(m){return rt(m)?(n.enter("listItemPrefixWhitespace"),n.consume(m),n.exit("listItemPrefixWhitespace"),p):t(m)}function p(m){return r.containerState.size=i+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(m)}}function kee(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(Mk,s,i);function s(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,At(n,e,"listItemIndent",r.containerState.size+1)(o)}function i(o){return r.containerState.furtherBlankLines||!rt(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,a(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(wee,e,a)(o))}function a(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,At(n,n.attempt(br,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function Aee(n,e,t){const r=this;return At(n,s,"listItemIndent",r.containerState.size+1);function s(i){const a=r.events[r.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===r.containerState.size?e(i):t(i)}}function Eee(n){n.exit(this.containerState.type)}function Cee(n,e,t){const r=this;return At(n,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function s(i){const a=r.events[r.events.length-1];return!rt(i)&&a&&a[1].type==="listItemPrefixWhitespace"?e(i):t(i)}}const hL={name:"setextUnderline",tokenize:Tee,resolveTo:_ee};function _ee(n,e){let t=n.length,r,s,i;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(s=t)}else n[t][1].type==="content"&&n.splice(t,1),!i&&n[t][1].type==="definition"&&(i=t);const a={type:"setextHeading",start:Object.assign({},n[s][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[s][1].type="setextHeadingText",i?(n.splice(s,0,["enter",a,e]),n.splice(i+1,0,["exit",n[r][1],e]),n[r][1].end=Object.assign({},n[i][1].end)):n[r][1]=a,n.push(["exit",a,e]),n}function Tee(n,e,t){const r=this;let s;return i;function i(c){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(n.enter("setextHeadingLine"),s=c,a(c)):t(c)}function a(c){return n.enter("setextHeadingLineSequence"),o(c)}function o(c){return c===s?(n.consume(c),o):(n.exit("setextHeadingLineSequence"),rt(c)?At(n,l,"lineSuffix")(c):l(c))}function l(c){return c===null||Ce(c)?(n.exit("setextHeadingLine"),e(c)):t(c)}}const Nee={tokenize:Pee};function Pee(n){const e=this,t=n.attempt(Mk,r,n.attempt(this.parser.constructs.flowInitial,s,At(n,n.attempt(this.parser.constructs.flow,s,n.attempt(LZ,s)),"linePrefix")));return t;function r(i){if(i===null){n.consume(i);return}return n.enter("lineEndingBlank"),n.consume(i),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function s(i){if(i===null){n.consume(i);return}return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const jee={resolveAll:Cz()},Ree=Ez("string"),Mee=Ez("text");function Ez(n){return{tokenize:e,resolveAll:Cz(n==="text"?Iee:void 0)};function e(t){const r=this,s=this.parser.constructs[n],i=t.attempt(s,a,o);return a;function a(d){return c(d)?i(d):o(d)}function o(d){if(d===null){t.consume(d);return}return t.enter("data"),t.consume(d),l}function l(d){return c(d)?(t.exit("data"),i(d)):(t.consume(d),l)}function c(d){if(d===null)return!0;const f=s[d];let p=-1;if(f)for(;++p<f.length;){const m=f[p];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function Cz(n){return e;function e(t,r){let s=-1,i;for(;++s<=t.length;)i===void 0?t[s]&&t[s][1].type==="data"&&(i=s,s++):(!t[s]||t[s][1].type!=="data")&&(s!==i+2&&(t[i][1].end=t[s-1][1].end,t.splice(i+2,s-i-2),s=i+2),i=void 0);return n?n(t,r):t}}function Iee(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],s=e.sliceStream(r);let i=s.length,a=-1,o=0,l;for(;i--;){const c=s[i];if(typeof c=="string"){for(a=c.length;c.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(c===-2)l=!0,o++;else if(c!==-1){i++;break}}if(o){const c={type:t===n.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-o,offset:r.end.offset-o,_index:r.start._index+i,_bufferIndex:i?a:r.start._bufferIndex+a},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(n.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return n}function Lee(n,e,t){let r=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},i=[];let a=[],o=[];const l={consume:x,enter:b,exit:C,attempt:N(_),check:N(E),interrupt:N(E,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:m,sliceSerialize:p,now:y,defineSkip:g,write:f};let d=e.tokenize.call(c,l);return e.resolveAll&&i.push(e),c;function f(L){return a=zs(a,L),w(),a[a.length-1]!==null?[]:(j(e,0),c.events=VN(i,c.events,c),c.events)}function p(L,F){return Oee(m(L),F)}function m(L){return Dee(a,L)}function y(){const{line:L,column:F,offset:U,_index:B,_bufferIndex:I}=r;return{line:L,column:F,offset:U,_index:B,_bufferIndex:I}}function g(L){s[L.line]=L.column,O()}function w(){let L;for(;r._index<a.length;){const F=a[r._index];if(typeof F=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<F.length;)v(F.charCodeAt(r._bufferIndex));else v(F)}}function v(L){d=d(L)}function x(L){Ce(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,O()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=L}function b(L,F){const U=F||{};return U.type=L,U.start=y(),c.events.push(["enter",U,c]),o.push(U),U}function C(L){const F=o.pop();return F.end=y(),c.events.push(["exit",F,c]),F}function _(L,F){j(L,F.from)}function E(L,F){F.restore()}function N(L,F){return U;function U(B,I,D){let z,V,q,P;return Array.isArray(B)?K(B):"tokenize"in B?K([B]):Y(B);function Y(me){return ve;function ve(Ke){const Re=Ke!==null&&me[Ke],xe=Ke!==null&&me.null,He=[...Array.isArray(Re)?Re:Re?[Re]:[],...Array.isArray(xe)?xe:xe?[xe]:[]];return K(He)(Ke)}}function K(me){return z=me,V=0,me.length===0?D:R(me[V])}function R(me){return ve;function ve(Ke){return P=M(),q=me,me.partial||(c.currentConstruct=me),me.name&&c.parser.constructs.disable.null.includes(me.name)?ke():me.tokenize.call(F?Object.assign(Object.create(c),F):c,l,ie,ke)(Ke)}}function ie(me){return L(q,P),I}function ke(me){return P.restore(),++V<z.length?R(z[V]):D}}}function j(L,F){L.resolveAll&&!i.includes(L)&&i.push(L),L.resolve&&pa(c.events,F,c.events.length-F,L.resolve(c.events.slice(F),c)),L.resolveTo&&(c.events=L.resolveTo(c.events,c))}function M(){const L=y(),F=c.previous,U=c.currentConstruct,B=c.events.length,I=Array.from(o);return{restore:D,from:B};function D(){r=L,c.previous=F,c.currentConstruct=U,c.events.length=B,o=I,O()}}function O(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function Dee(n,e){const t=e.start._index,r=e.start._bufferIndex,s=e.end._index,i=e.end._bufferIndex;let a;if(t===s)a=[n[t].slice(r,i)];else{if(a=n.slice(t,s),r>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(r):a.shift()}i>0&&a.push(n[s].slice(0,i))}return a}function Oee(n,e){let t=-1;const r=[];let s;for(;++t<n.length;){const i=n[t];let a;if(typeof i=="string")a=i;else switch(i){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&s)continue;a=" ";break}default:a=String.fromCharCode(i)}s=i===-2,r.push(a)}return r.join("")}const Fee={42:br,43:br,45:br,48:br,49:br,50:br,51:br,52:br,53:br,54:br,55:br,56:br,57:br,62:vz},Bee={91:zZ},zee={[-2]:CE,[-1]:CE,32:CE},$ee={35:GZ,42:Zb,45:[hL,Zb],60:YZ,61:hL,95:Zb,96:uL,126:uL},Vee={38:bz,92:xz},Uee={[-5]:_E,[-4]:_E,[-3]:_E,33:pee,38:bz,42:LT,60:[yZ,ree],91:gee,92:[HZ,xz],93:HN,95:LT,96:PZ},Hee={null:[LT,jee]},qee={null:[42,95]},Gee={null:[]},Wee=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:qee,contentInitial:Bee,disable:Gee,document:Fee,flow:$ee,flowInitial:zee,insideSpan:Hee,string:Vee,text:Uee},Symbol.toStringTag,{value:"Module"}));function Xee(n){const t=tZ([Wee,...(n||{}).extensions||[]]),r={defined:[],lazy:{},constructs:t,content:s(uZ),document:s(hZ),flow:s(Nee),string:s(Ree),text:s(Mee)};return r;function s(i){return a;function a(o){return Lee(r,i,o)}}}const fL=/[\0\t\n\r]/g;function Kee(){let n=1,e="",t=!0,r;return s;function s(i,a,o){const l=[];let c,d,f,p,m;for(i=e+i.toString(a),f=0,e="",t&&(i.charCodeAt(0)===65279&&f++,t=void 0);f<i.length;){if(fL.lastIndex=f,c=fL.exec(i),p=c&&c.index!==void 0?c.index:i.length,m=i.charCodeAt(p),!c){e=i.slice(f);break}if(m===10&&f===p&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<p&&(l.push(i.slice(f,p)),n+=p-f),m){case 0:{l.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,l.push(-2);n++<d;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}f=p+1}return o&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}function Yee(n){for(;!wz(n););return n}function _z(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCharCode(t)}const Qee=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Jee(n){return n.replace(Qee,Zee)}function Zee(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const s=t.charCodeAt(1),i=s===120||s===88;return _z(t.slice(i?2:1),i?16:10)}return UN(t)||n}const Tz={}.hasOwnProperty,ete=function(n,e,t){return typeof e!="string"&&(t=e,e=void 0),tte(t)(Yee(Xee(t).document().write(Kee()(n,e,!0))))};function tte(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Br),autolinkProtocol:L,autolinkEmail:L,atxHeading:o(ye),blockQuote:o(He),characterEscape:L,characterReference:L,codeFenced:o(Be),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:o(Be,l),codeText:o(ge,l),codeTextData:L,data:L,codeFlowValue:L,definition:o(Z),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:o(le),hardBreakEscape:o(Ve),hardBreakTrailing:o(Ve),htmlFlow:o(Nt,l),htmlFlowData:L,htmlText:o(Nt,l),htmlTextData:L,image:o(De),label:l,link:o(Br),listItem:o(zr),listItemValue:y,listOrdered:o(tr,m),listUnordered:o(tr),paragraph:o(Ks),reference:ke,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:o(ye),strong:o(ma),thematicBreak:o(_i)},exit:{atxHeading:d(),atxHeadingSequence:N,autolink:d(),autolinkEmail:xe,autolinkProtocol:Re,blockQuote:d(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:ve,characterReferenceMarkerNumeric:ve,characterReferenceValue:Ke,codeFenced:d(x),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:w,codeFlowValue:F,codeIndented:d(b),codeText:d(z),codeTextData:F,data:F,definition:d(),definitionDestinationString:E,definitionLabelString:C,definitionTitleString:_,emphasis:d(),hardBreakEscape:d(B),hardBreakTrailing:d(B),htmlFlow:d(I),htmlFlowData:F,htmlText:d(D),htmlTextData:F,image:d(q),label:Y,labelText:P,lineEnding:U,link:d(V),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:me,resourceDestinationString:K,resourceTitleString:R,resource:ie,setextHeading:d(O),setextHeadingLineSequence:M,setextHeadingText:j,strong:d(),thematicBreak:d()}};Nz(e,(n||{}).mdastExtensions||[]);const t={};return r;function r($){let X={type:"root",children:[]};const oe={stack:[X],tokenStack:[],config:e,enter:c,exit:f,buffer:l,resume:p,setData:i,getData:a},qe=[];let et=-1;for(;++et<$.length;)if($[et][1].type==="listOrdered"||$[et][1].type==="listUnordered")if($[et][0]==="enter")qe.push(et);else{const Fn=qe.pop();et=s($,Fn,et)}for(et=-1;++et<$.length;){const Fn=e[$[et][0]];Tz.call(Fn,$[et][1].type)&&Fn[$[et][1].type].call(Object.assign({sliceSerialize:$[et][2].sliceSerialize},oe),$[et][1])}if(oe.tokenStack.length>0){const Fn=oe.tokenStack[oe.tokenStack.length-1];(Fn[1]||pL).call(oe,void 0,Fn[0])}for(X.position={start:Do($.length>0?$[0][1].start:{line:1,column:1,offset:0}),end:Do($.length>0?$[$.length-2][1].end:{line:1,column:1,offset:0})},et=-1;++et<e.transforms.length;)X=e.transforms[et](X)||X;return X}function s($,X,oe){let qe=X-1,et=-1,Fn=!1,Qs,xs,Ro,fc;for(;++qe<=oe;){const gt=$[qe];if(gt[1].type==="listUnordered"||gt[1].type==="listOrdered"||gt[1].type==="blockQuote"?(gt[0]==="enter"?et++:et--,fc=void 0):gt[1].type==="lineEndingBlank"?gt[0]==="enter"&&(Qs&&!fc&&!et&&!Ro&&(Ro=qe),fc=void 0):gt[1].type==="linePrefix"||gt[1].type==="listItemValue"||gt[1].type==="listItemMarker"||gt[1].type==="listItemPrefix"||gt[1].type==="listItemPrefixWhitespace"||(fc=void 0),!et&&gt[0]==="enter"&&gt[1].type==="listItemPrefix"||et===-1&&gt[0]==="exit"&&(gt[1].type==="listUnordered"||gt[1].type==="listOrdered")){if(Qs){let ga=qe;for(xs=void 0;ga--;){const gr=$[ga];if(gr[1].type==="lineEnding"||gr[1].type==="lineEndingBlank"){if(gr[0]==="exit")continue;xs&&($[xs][1].type="lineEndingBlank",Fn=!0),gr[1].type="lineEnding",xs=ga}else if(!(gr[1].type==="linePrefix"||gr[1].type==="blockQuotePrefix"||gr[1].type==="blockQuotePrefixWhitespace"||gr[1].type==="blockQuoteMarker"||gr[1].type==="listItemIndent"))break}Ro&&(!xs||Ro<xs)&&(Qs._spread=!0),Qs.end=Object.assign({},xs?$[xs][1].start:gt[1].end),$.splice(xs||qe,0,["exit",Qs,gt[2]]),qe++,oe++}gt[1].type==="listItemPrefix"&&(Qs={type:"listItem",_spread:!1,start:Object.assign({},gt[1].start),end:void 0},$.splice(qe,0,["enter",Qs,gt[2]]),qe++,oe++,Ro=void 0,fc=!0)}}return $[X][1]._spread=Fn,oe}function i($,X){t[$]=X}function a($){return t[$]}function o($,X){return oe;function oe(qe){c.call(this,$(qe),qe),X&&X.call(this,qe)}}function l(){this.stack.push({type:"fragment",children:[]})}function c($,X,oe){return this.stack[this.stack.length-1].children.push($),this.stack.push($),this.tokenStack.push([X,oe]),$.position={start:Do(X.start)},$}function d($){return X;function X(oe){$&&$.call(this,oe),f.call(this,oe)}}function f($,X){const oe=this.stack.pop(),qe=this.tokenStack.pop();if(qe)qe[0].type!==$.type&&(X?X.call(this,$,qe[0]):(qe[1]||pL).call(this,$,qe[0]));else throw new Error("Cannot close `"+$.type+"` ("+kg({start:$.start,end:$.end})+"): its not open");return oe.position.end=Do($.end),oe}function p(){return ZJ(this.stack.pop())}function m(){i("expectingFirstListItemValue",!0)}function y($){if(a("expectingFirstListItemValue")){const X=this.stack[this.stack.length-2];X.start=Number.parseInt(this.sliceSerialize($),10),i("expectingFirstListItemValue")}}function g(){const $=this.resume(),X=this.stack[this.stack.length-1];X.lang=$}function w(){const $=this.resume(),X=this.stack[this.stack.length-1];X.meta=$}function v(){a("flowCodeInside")||(this.buffer(),i("flowCodeInside",!0))}function x(){const $=this.resume(),X=this.stack[this.stack.length-1];X.value=$.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),i("flowCodeInside")}function b(){const $=this.resume(),X=this.stack[this.stack.length-1];X.value=$.replace(/(\r?\n|\r)$/g,"")}function C($){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.label=X,oe.identifier=Eh(this.sliceSerialize($)).toLowerCase()}function _(){const $=this.resume(),X=this.stack[this.stack.length-1];X.title=$}function E(){const $=this.resume(),X=this.stack[this.stack.length-1];X.url=$}function N($){const X=this.stack[this.stack.length-1];if(!X.depth){const oe=this.sliceSerialize($).length;X.depth=oe}}function j(){i("setextHeadingSlurpLineEnding",!0)}function M($){const X=this.stack[this.stack.length-1];X.depth=this.sliceSerialize($).charCodeAt(0)===61?1:2}function O(){i("setextHeadingSlurpLineEnding")}function L($){const X=this.stack[this.stack.length-1];let oe=X.children[X.children.length-1];(!oe||oe.type!=="text")&&(oe=Ys(),oe.position={start:Do($.start)},X.children.push(oe)),this.stack.push(oe)}function F($){const X=this.stack.pop();X.value+=this.sliceSerialize($),X.position.end=Do($.end)}function U($){const X=this.stack[this.stack.length-1];if(a("atHardBreak")){const oe=X.children[X.children.length-1];oe.position.end=Do($.end),i("atHardBreak");return}!a("setextHeadingSlurpLineEnding")&&e.canContainEols.includes(X.type)&&(L.call(this,$),F.call(this,$))}function B(){i("atHardBreak",!0)}function I(){const $=this.resume(),X=this.stack[this.stack.length-1];X.value=$}function D(){const $=this.resume(),X=this.stack[this.stack.length-1];X.value=$}function z(){const $=this.resume(),X=this.stack[this.stack.length-1];X.value=$}function V(){const $=this.stack[this.stack.length-1];if(a("inReference")){const X=a("referenceType")||"shortcut";$.type+="Reference",$.referenceType=X,delete $.url,delete $.title}else delete $.identifier,delete $.label;i("referenceType")}function q(){const $=this.stack[this.stack.length-1];if(a("inReference")){const X=a("referenceType")||"shortcut";$.type+="Reference",$.referenceType=X,delete $.url,delete $.title}else delete $.identifier,delete $.label;i("referenceType")}function P($){const X=this.sliceSerialize($),oe=this.stack[this.stack.length-2];oe.label=Jee(X),oe.identifier=Eh(X).toLowerCase()}function Y(){const $=this.stack[this.stack.length-1],X=this.resume(),oe=this.stack[this.stack.length-1];if(i("inReference",!0),oe.type==="link"){const qe=$.children;oe.children=qe}else oe.alt=X}function K(){const $=this.resume(),X=this.stack[this.stack.length-1];X.url=$}function R(){const $=this.resume(),X=this.stack[this.stack.length-1];X.title=$}function ie(){i("inReference")}function ke(){i("referenceType","collapsed")}function me($){const X=this.resume(),oe=this.stack[this.stack.length-1];oe.label=X,oe.identifier=Eh(this.sliceSerialize($)).toLowerCase(),i("referenceType","full")}function ve($){i("characterReferenceType",$.type)}function Ke($){const X=this.sliceSerialize($),oe=a("characterReferenceType");let qe;oe?(qe=_z(X,oe==="characterReferenceMarkerNumeric"?10:16),i("characterReferenceType")):qe=UN(X);const et=this.stack.pop();et.value+=qe,et.position.end=Do($.end)}function Re($){F.call(this,$);const X=this.stack[this.stack.length-1];X.url=this.sliceSerialize($)}function xe($){F.call(this,$);const X=this.stack[this.stack.length-1];X.url="mailto:"+this.sliceSerialize($)}function He(){return{type:"blockquote",children:[]}}function Be(){return{type:"code",lang:null,meta:null,value:""}}function ge(){return{type:"inlineCode",value:""}}function Z(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function le(){return{type:"emphasis",children:[]}}function ye(){return{type:"heading",depth:void 0,children:[]}}function Ve(){return{type:"break"}}function Nt(){return{type:"html",value:""}}function De(){return{type:"image",title:null,url:"",alt:null}}function Br(){return{type:"link",title:null,url:"",children:[]}}function tr($){return{type:"list",ordered:$.type==="listOrdered",start:null,spread:$._spread,children:[]}}function zr($){return{type:"listItem",spread:$._spread,checked:null,children:[]}}function Ks(){return{type:"paragraph",children:[]}}function ma(){return{type:"strong",children:[]}}function Ys(){return{type:"text",value:""}}function _i(){return{type:"thematicBreak"}}}function Do(n){return{line:n.line,column:n.column,offset:n.offset}}function Nz(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?Nz(n,r):nte(n,r)}}function nte(n,e){let t;for(t in e)if(Tz.call(e,t)){if(t==="canContainEols"){const r=e[t];r&&n[t].push(...r)}else if(t==="transforms"){const r=e[t];r&&n[t].push(...r)}else if(t==="enter"||t==="exit"){const r=e[t];r&&Object.assign(n[t],r)}}}function pL(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+kg({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+kg({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+kg({start:e.start,end:e.end})+") is still open")}function rte(n){Object.assign(this,{Parser:t=>{const r=this.data("settings");return ete(t,Object.assign({},r,n,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function ste(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function ite(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function ate(n,e){const t=e.value?e.value+`
`:"",r=e.lang?e.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,s={};r&&(s.className=["language-"+r]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:t}]};return e.meta&&(i.data={meta:e.meta}),n.patch(e,i),i=n.applyData(e,i),i={type:"element",tagName:"pre",properties:{},children:[i]},n.patch(e,i),i}function ote(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function lte(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Kp(n){const e=[];let t=-1,r=0,s=0;for(;++t<n.length;){const i=n.charCodeAt(t);let a="";if(i===37&&hs(n.charCodeAt(t+1))&&hs(n.charCodeAt(t+2)))s=2;else if(i<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(i))||(a=String.fromCharCode(i));else if(i>55295&&i<57344){const o=n.charCodeAt(t+1);i<56320&&o>56319&&o<57344?(a=String.fromCharCode(i,o),s=1):a=""}else a=String.fromCharCode(i);a&&(e.push(n.slice(r,t),encodeURIComponent(a)),r=t+s+1,a=""),s&&(t+=s,s=0)}return e.join("")+n.slice(r)}function Pz(n,e){const t=String(e.identifier).toUpperCase(),r=Kp(t.toLowerCase()),s=n.footnoteOrder.indexOf(t);let i;s===-1?(n.footnoteOrder.push(t),n.footnoteCounts[t]=1,i=n.footnoteOrder.length):(n.footnoteCounts[t]++,i=s+1);const a=n.footnoteCounts[t],o={type:"element",tagName:"a",properties:{href:"#"+n.clobberPrefix+"fn-"+r,id:n.clobberPrefix+"fnref-"+r+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};n.patch(e,o);const l={type:"element",tagName:"sup",properties:{},children:[o]};return n.patch(e,l),n.applyData(e,l)}function cte(n,e){const t=n.footnoteById;let r=1;for(;r in t;)r++;const s=String(r);return t[s]={type:"footnoteDefinition",identifier:s,children:[{type:"paragraph",children:e.children}],position:e.position},Pz(n,{type:"footnoteReference",identifier:s,position:e.position})}function ute(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function dte(n,e){if(n.dangerous){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}return null}function jz(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return{type:"text",value:"!["+e.alt+r};const s=n.all(e),i=s[0];i&&i.type==="text"?i.value="["+i.value:s.unshift({type:"text",value:"["});const a=s[s.length-1];return a&&a.type==="text"?a.value+=r:s.push({type:"text",value:r}),s}function hte(n,e){const t=n.definition(e.identifier);if(!t)return jz(n,e);const r={src:Kp(t.url||""),alt:e.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,s),n.applyData(e,s)}function fte(n,e){const t={src:Kp(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function pte(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function mte(n,e){const t=n.definition(e.identifier);if(!t)return jz(n,e);const r={href:Kp(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);const s={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function gte(n,e){const t={href:Kp(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function yte(n,e,t){const r=n.all(e),s=t?vte(t):Rz(e),i={},a=[];if(typeof e.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),i.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const d=r[o];(s||o!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!s?a.push(...d.children):a.push(d)}const l=r[r.length-1];l&&(s||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:i,children:a};return n.patch(e,c),n.applyData(e,c)}function vte(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=Rz(t[r])}return e}function Rz(n){const e=n.spread;return e??n.children.length>1}function xte(n,e){const t={},r=n.all(e);let s=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++s<r.length;){const a=r[s];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const i={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,i),n.applyData(e,i)}function bte(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function wte(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function Ste(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const qN=Mz("start"),GN=Mz("end");function kte(n){return{start:qN(n),end:GN(n)}}function Mz(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function Ate(n,e){const t=n.all(e),r=t.shift(),s=[];if(r){const a={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],a),s.push(a)}if(t.length>0){const a={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},o=qN(e.children[1]),l=GN(e.children[e.children.length-1]);o.line&&l.line&&(a.position={start:o,end:l}),s.push(a)}const i={type:"element",tagName:"table",properties:{},children:n.wrap(s,!0)};return n.patch(e,i),n.applyData(e,i)}function Ete(n,e,t){const r=t?t.children:void 0,i=(r?r.indexOf(e):1)===0?"th":"td",a=t&&t.type==="table"?t.align:void 0,o=a?a.length:e.children.length;let l=-1;const c=[];for(;++l<o;){const f=e.children[l],p={},m=a?a[l]:void 0;m&&(p.align=m);let y={type:"element",tagName:i,properties:p,children:[]};f&&(y.children=n.all(f),n.patch(f,y),y=n.applyData(e,y)),c.push(y)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(c,!0)};return n.patch(e,d),n.applyData(e,d)}function Cte(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const mL=9,gL=32;function _te(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),s=0;const i=[];for(;r;)i.push(yL(e.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=t.exec(e);return i.push(yL(e.slice(s),s>0,!1)),i.join("")}function yL(n,e,t){let r=0,s=n.length;if(e){let i=n.codePointAt(r);for(;i===mL||i===gL;)r++,i=n.codePointAt(r)}if(t){let i=n.codePointAt(s-1);for(;i===mL||i===gL;)s--,i=n.codePointAt(s-1)}return s>r?n.slice(r,s):""}function Tte(n,e){const t={type:"text",value:_te(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function Nte(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const Pte={blockquote:ste,break:ite,code:ate,delete:ote,emphasis:lte,footnoteReference:Pz,footnote:cte,heading:ute,html:dte,imageReference:hte,image:fte,inlineCode:pte,linkReference:mte,link:gte,listItem:yte,list:xte,paragraph:bte,root:wte,strong:Ste,table:Ate,tableCell:Cte,tableRow:Ete,text:Tte,thematicBreak:Nte,toml:Jx,yaml:Jx,definition:Jx,footnoteDefinition:Jx};function Jx(){return null}const Iz=function(n){if(n==null)return Ite;if(typeof n=="string")return Mte(n);if(typeof n=="object")return Array.isArray(n)?jte(n):Rte(n);if(typeof n=="function")return Ik(n);throw new Error("Expected function, string, or object as test")};function jte(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=Iz(n[t]);return Ik(r);function r(...s){let i=-1;for(;++i<e.length;)if(e[i].call(this,...s))return!0;return!1}}function Rte(n){return Ik(e);function e(t){let r;for(r in n)if(t[r]!==n[r])return!1;return!0}}function Mte(n){return Ik(e);function e(t){return t&&t.type===n}}function Ik(n){return e;function e(t,...r){return!!(t&&typeof t=="object"&&"type"in t&&n.call(this,t,...r))}}function Ite(){return!0}const Lte=!0,vL=!1,Dte="skip",Ote=function(n,e,t,r){typeof e=="function"&&typeof t!="function"&&(r=t,t=e,e=null);const s=Iz(e),i=r?-1:1;a(n,void 0,[])();function a(o,l,c){const d=o&&typeof o=="object"?o:{};if(typeof d.type=="string"){const p=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(o.type+(p?"<"+p+">":""))+")"})}return f;function f(){let p=[],m,y,g;if((!e||s(o,l,c[c.length-1]||null))&&(p=Fte(t(o,c)),p[0]===vL))return p;if(o.children&&p[0]!==Dte)for(y=(r?o.children.length:-1)+i,g=c.concat(o);y>-1&&y<o.children.length;){if(m=a(o.children[y],y,g)(),m[0]===vL)return m;y=typeof m[1]=="number"?m[1]:y+i}return p}}};function Fte(n){return Array.isArray(n)?n:typeof n=="number"?[Lte,n]:[n]}const WN=function(n,e,t,r){typeof e=="function"&&typeof t!="function"&&(r=t,t=e,e=null),Ote(n,e,s,r);function s(i,a){const o=a[a.length-1];return t(i,o?o.children.indexOf(i):null,o)}};function Bte(n){return!n||!n.position||!n.position.start||!n.position.start.line||!n.position.start.column||!n.position.end||!n.position.end.line||!n.position.end.column}const xL={}.hasOwnProperty;function zte(n){const e=Object.create(null);if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return WN(n,"definition",r=>{const s=bL(r.identifier);s&&!xL.call(e,s)&&(e[s]=r)}),t;function t(r){const s=bL(r);return s&&xL.call(e,s)?e[s]:null}}function bL(n){return String(n||"").toUpperCase()}const Xw={}.hasOwnProperty;function $te(n,e){const t=e||{},r=t.allowDangerousHtml||!1,s={};return a.dangerous=r,a.clobberPrefix=t.clobberPrefix===void 0||t.clobberPrefix===null?"user-content-":t.clobberPrefix,a.footnoteLabel=t.footnoteLabel||"Footnotes",a.footnoteLabelTagName=t.footnoteLabelTagName||"h2",a.footnoteLabelProperties=t.footnoteLabelProperties||{className:["sr-only"]},a.footnoteBackLabel=t.footnoteBackLabel||"Back to content",a.unknownHandler=t.unknownHandler,a.passThrough=t.passThrough,a.handlers={...Pte,...t.handlers},a.definition=zte(n),a.footnoteById=s,a.footnoteOrder=[],a.footnoteCounts={},a.patch=Vte,a.applyData=Ute,a.one=o,a.all=l,a.wrap=qte,a.augment=i,WN(n,"footnoteDefinition",c=>{const d=String(c.identifier).toUpperCase();Xw.call(s,d)||(s[d]=c)}),a;function i(c,d){if(c&&"data"in c&&c.data){const f=c.data;f.hName&&(d.type!=="element"&&(d={type:"element",tagName:"",properties:{},children:[]}),d.tagName=f.hName),d.type==="element"&&f.hProperties&&(d.properties={...d.properties,...f.hProperties}),"children"in d&&d.children&&f.hChildren&&(d.children=f.hChildren)}if(c){const f="type"in c?c:{position:c};Bte(f)||(d.position={start:qN(f),end:GN(f)})}return d}function a(c,d,f,p){return Array.isArray(f)&&(p=f,f={}),i(c,{type:"element",tagName:d,properties:f||{},children:p||[]})}function o(c,d){return Lz(a,c,d)}function l(c){return XN(a,c)}}function Vte(n,e){n.position&&(e.position=kte(n))}function Ute(n,e){let t=e;if(n&&n.data){const r=n.data.hName,s=n.data.hChildren,i=n.data.hProperties;typeof r=="string"&&(t.type==="element"?t.tagName=r:t={type:"element",tagName:r,properties:{},children:[]}),t.type==="element"&&i&&(t.properties={...t.properties,...i}),"children"in t&&t.children&&s!==null&&s!==void 0&&(t.children=s)}return t}function Lz(n,e,t){const r=e&&e.type;if(!r)throw new Error("Expected node, got `"+e+"`");return Xw.call(n.handlers,r)?n.handlers[r](n,e,t):n.passThrough&&n.passThrough.includes(r)?"children"in e?{...e,children:XN(n,e)}:e:n.unknownHandler?n.unknownHandler(n,e,t):Hte(n,e)}function XN(n,e){const t=[];if("children"in e){const r=e.children;let s=-1;for(;++s<r.length;){const i=Lz(n,r[s],e);if(i){if(s&&r[s-1].type==="break"&&(!Array.isArray(i)&&i.type==="text"&&(i.value=i.value.replace(/^\s+/,"")),!Array.isArray(i)&&i.type==="element")){const a=i.children[0];a&&a.type==="text"&&(a.value=a.value.replace(/^\s+/,""))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t}function Hte(n,e){const t=e.data||{},r="value"in e&&!(Xw.call(t,"hProperties")||Xw.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:XN(n,e)};return n.patch(e,r),n.applyData(e,r)}function qte(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function Gte(n){const e=[];let t=-1;for(;++t<n.footnoteOrder.length;){const r=n.footnoteById[n.footnoteOrder[t]];if(!r)continue;const s=n.all(r),i=String(r.identifier).toUpperCase(),a=Kp(i.toLowerCase());let o=0;const l=[];for(;++o<=n.footnoteCounts[i];){const f={type:"element",tagName:"a",properties:{href:"#"+n.clobberPrefix+"fnref-"+a+(o>1?"-"+o:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:n.footnoteBackLabel},children:[{type:"text",value:""}]};o>1&&f.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(o)}]}),l.length>0&&l.push({type:"text",value:" "}),l.push(f)}const c=s[s.length-1];if(c&&c.type==="element"&&c.tagName==="p"){const f=c.children[c.children.length-1];f&&f.type==="text"?f.value+=" ":c.children.push({type:"text",value:" "}),c.children.push(...l)}else s.push(...l);const d={type:"element",tagName:"li",properties:{id:n.clobberPrefix+"fn-"+a},children:n.wrap(s,!0)};n.patch(r,d),e.push(d)}if(e.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:n.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(n.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:n.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(e,!0)},{type:"text",value:`
`}]}}function Dz(n,e){const t=$te(n,e),r=t.one(n,null),s=Gte(t);return s&&r.children.push({type:"text",value:`
`},s),Array.isArray(r)?{type:"root",children:r}:r}const Wte=function(n,e){return n&&"run"in n?Kte(n,e):Yte(n||e)},Xte=Wte;function Kte(n,e){return(t,r,s)=>{n.run(Dz(t,e),r,i=>{s(i)})}}function Yte(n){return e=>Dz(e,n)}var Oz={exports:{}},Qte="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Jte=Qte,Zte=Jte;function Fz(){}function Bz(){}Bz.resetWarningCache=Fz;var ene=function(){function n(r,s,i,a,o,l){if(l!==Zte){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Bz,resetWarningCache:Fz};return t.PropTypes=t,t};Oz.exports=ene();var tne=Oz.exports;const Te=No(tne);class ex{constructor(e,t,r){this.property=e,this.normal=t,r&&(this.space=r)}}ex.prototype.property={};ex.prototype.normal={};ex.prototype.space=null;function zz(n,e){const t={},r={};let s=-1;for(;++s<n.length;)Object.assign(t,n[s].property),Object.assign(r,n[s].normal);return new ex(t,r,e)}function DT(n){return n.toLowerCase()}class Ws{constructor(e,t){this.property=e,this.attribute=t}}Ws.prototype.space=null;Ws.prototype.boolean=!1;Ws.prototype.booleanish=!1;Ws.prototype.overloadedBoolean=!1;Ws.prototype.number=!1;Ws.prototype.commaSeparated=!1;Ws.prototype.spaceSeparated=!1;Ws.prototype.commaOrSpaceSeparated=!1;Ws.prototype.mustUseProperty=!1;Ws.prototype.defined=!1;let nne=0;const Me=Md(),rn=Md(),$z=Md(),re=Md(),bt=Md(),Ch=Md(),Vr=Md();function Md(){return 2**++nne}const OT=Object.freeze(Object.defineProperty({__proto__:null,boolean:Me,booleanish:rn,commaOrSpaceSeparated:Vr,commaSeparated:Ch,number:re,overloadedBoolean:$z,spaceSeparated:bt},Symbol.toStringTag,{value:"Module"})),TE=Object.keys(OT);class KN extends Ws{constructor(e,t,r,s){let i=-1;if(super(e,t),wL(this,"space",s),typeof r=="number")for(;++i<TE.length;){const a=TE[i];wL(this,TE[i],(r&OT[a])===OT[a])}}}KN.prototype.defined=!0;function wL(n,e,t){t&&(n[e]=t)}const rne={}.hasOwnProperty;function Yp(n){const e={},t={};let r;for(r in n.properties)if(rne.call(n.properties,r)){const s=n.properties[r],i=new KN(r,n.transform(n.attributes||{},r),s,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(i.mustUseProperty=!0),e[r]=i,t[DT(r)]=r,t[DT(i.attribute)]=r}return new ex(e,t,n.space)}const Vz=Yp({space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Uz=Yp({space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Hz(n,e){return e in n?n[e]:e}function qz(n,e){return Hz(n,e.toLowerCase())}const Gz=Yp({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:qz,properties:{xmlns:null,xmlnsXLink:null}}),Wz=Yp({transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:rn,ariaAutoComplete:null,ariaBusy:rn,ariaChecked:rn,ariaColCount:re,ariaColIndex:re,ariaColSpan:re,ariaControls:bt,ariaCurrent:null,ariaDescribedBy:bt,ariaDetails:null,ariaDisabled:rn,ariaDropEffect:bt,ariaErrorMessage:null,ariaExpanded:rn,ariaFlowTo:bt,ariaGrabbed:rn,ariaHasPopup:null,ariaHidden:rn,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:bt,ariaLevel:re,ariaLive:null,ariaModal:rn,ariaMultiLine:rn,ariaMultiSelectable:rn,ariaOrientation:null,ariaOwns:bt,ariaPlaceholder:null,ariaPosInSet:re,ariaPressed:rn,ariaReadOnly:rn,ariaRelevant:null,ariaRequired:rn,ariaRoleDescription:bt,ariaRowCount:re,ariaRowIndex:re,ariaRowSpan:re,ariaSelected:rn,ariaSetSize:re,ariaSort:null,ariaValueMax:re,ariaValueMin:re,ariaValueNow:re,ariaValueText:null,role:null}}),sne=Yp({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:qz,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Ch,acceptCharset:bt,accessKey:bt,action:null,allow:null,allowFullScreen:Me,allowPaymentRequest:Me,allowUserMedia:Me,alt:null,as:null,async:Me,autoCapitalize:null,autoComplete:bt,autoFocus:Me,autoPlay:Me,blocking:bt,capture:null,charSet:null,checked:Me,cite:null,className:bt,cols:re,colSpan:null,content:null,contentEditable:rn,controls:Me,controlsList:bt,coords:re|Ch,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Me,defer:Me,dir:null,dirName:null,disabled:Me,download:$z,draggable:rn,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Me,formTarget:null,headers:bt,height:re,hidden:Me,high:re,href:null,hrefLang:null,htmlFor:bt,httpEquiv:bt,id:null,imageSizes:null,imageSrcSet:null,inert:Me,inputMode:null,integrity:null,is:null,isMap:Me,itemId:null,itemProp:bt,itemRef:bt,itemScope:Me,itemType:bt,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Me,low:re,manifest:null,max:null,maxLength:re,media:null,method:null,min:null,minLength:re,multiple:Me,muted:Me,name:null,nonce:null,noModule:Me,noValidate:Me,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Me,optimum:re,pattern:null,ping:bt,placeholder:null,playsInline:Me,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Me,referrerPolicy:null,rel:bt,required:Me,reversed:Me,rows:re,rowSpan:re,sandbox:bt,scope:null,scoped:Me,seamless:Me,selected:Me,shadowRootClonable:Me,shadowRootDelegatesFocus:Me,shadowRootMode:null,shape:null,size:re,sizes:null,slot:null,span:re,spellCheck:rn,src:null,srcDoc:null,srcLang:null,srcSet:null,start:re,step:null,style:null,tabIndex:re,target:null,title:null,translate:null,type:null,typeMustMatch:Me,useMap:null,value:rn,width:re,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:bt,axis:null,background:null,bgColor:null,border:re,borderColor:null,bottomMargin:re,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Me,declare:Me,event:null,face:null,frame:null,frameBorder:null,hSpace:re,leftMargin:re,link:null,longDesc:null,lowSrc:null,marginHeight:re,marginWidth:re,noResize:Me,noHref:Me,noShade:Me,noWrap:Me,object:null,profile:null,prompt:null,rev:null,rightMargin:re,rules:null,scheme:null,scrolling:rn,standby:null,summary:null,text:null,topMargin:re,valueType:null,version:null,vAlign:null,vLink:null,vSpace:re,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Me,disableRemotePlayback:Me,prefix:null,property:null,results:re,security:null,unselectable:null}}),ine=Yp({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Hz,properties:{about:Vr,accentHeight:re,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:re,amplitude:re,arabicForm:null,ascent:re,attributeName:null,attributeType:null,azimuth:re,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:re,by:null,calcMode:null,capHeight:re,className:bt,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:re,diffuseConstant:re,direction:null,display:null,dur:null,divisor:re,dominantBaseline:null,download:Me,dx:null,dy:null,edgeMode:null,editable:null,elevation:re,enableBackground:null,end:null,event:null,exponent:re,externalResourcesRequired:null,fill:null,fillOpacity:re,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Ch,g2:Ch,glyphName:Ch,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:re,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:re,horizOriginX:re,horizOriginY:re,id:null,ideographic:re,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:re,k:re,k1:re,k2:re,k3:re,k4:re,kernelMatrix:Vr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:re,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:re,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:re,overlineThickness:re,paintOrder:null,panose1:null,path:null,pathLength:re,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:bt,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:re,pointsAtY:re,pointsAtZ:re,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Vr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Vr,rev:Vr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Vr,requiredFeatures:Vr,requiredFonts:Vr,requiredFormats:Vr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:re,specularExponent:re,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:re,strikethroughThickness:re,string:null,stroke:null,strokeDashArray:Vr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:re,strokeOpacity:re,strokeWidth:null,style:null,surfaceScale:re,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Vr,tabIndex:re,tableValues:null,target:null,targetX:re,targetY:re,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Vr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:re,underlineThickness:re,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:re,values:null,vAlphabetic:re,vMathematical:re,vectorEffect:null,vHanging:re,vIdeographic:re,version:null,vertAdvY:re,vertOriginX:re,vertOriginY:re,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:re,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),ane=/^data[-\w.:]+$/i,SL=/-[a-z]/g,one=/[A-Z]/g;function lne(n,e){const t=DT(e);let r=e,s=Ws;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&ane.test(e)){if(e.charAt(4)==="-"){const i=e.slice(5).replace(SL,une);r="data"+i.charAt(0).toUpperCase()+i.slice(1)}else{const i=e.slice(4);if(!SL.test(i)){let a=i.replace(one,cne);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}s=KN}return new s(r,e)}function cne(n){return"-"+n.toLowerCase()}function une(n){return n.charAt(1).toUpperCase()}const kL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},dne=zz([Uz,Vz,Gz,Wz,sne],"html"),hne=zz([Uz,Vz,Gz,Wz,ine],"svg");function fne(n){if(n.allowedElements&&n.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(n.allowedElements||n.disallowedElements||n.allowElement)return e=>{WN(e,"element",(t,r,s)=>{const i=s;let a;if(n.allowedElements?a=!n.allowedElements.includes(t.tagName):n.disallowedElements&&(a=n.disallowedElements.includes(t.tagName)),!a&&n.allowElement&&typeof r=="number"&&(a=!n.allowElement(t,r,i)),a&&typeof r=="number")return n.unwrapDisallowed&&t.children?i.children.splice(r,1,...t.children):i.children.splice(r,1),r})}}var Xz={exports:{}},ot={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN=Symbol.for("react.element"),QN=Symbol.for("react.portal"),Lk=Symbol.for("react.fragment"),Dk=Symbol.for("react.strict_mode"),Ok=Symbol.for("react.profiler"),Fk=Symbol.for("react.provider"),Bk=Symbol.for("react.context"),pne=Symbol.for("react.server_context"),zk=Symbol.for("react.forward_ref"),$k=Symbol.for("react.suspense"),Vk=Symbol.for("react.suspense_list"),Uk=Symbol.for("react.memo"),Hk=Symbol.for("react.lazy"),mne=Symbol.for("react.offscreen"),Kz;Kz=Symbol.for("react.module.reference");function Xs(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case YN:switch(n=n.type,n){case Lk:case Ok:case Dk:case $k:case Vk:return n;default:switch(n=n&&n.$$typeof,n){case pne:case Bk:case zk:case Hk:case Uk:case Fk:return n;default:return e}}case QN:return e}}}ot.ContextConsumer=Bk;ot.ContextProvider=Fk;ot.Element=YN;ot.ForwardRef=zk;ot.Fragment=Lk;ot.Lazy=Hk;ot.Memo=Uk;ot.Portal=QN;ot.Profiler=Ok;ot.StrictMode=Dk;ot.Suspense=$k;ot.SuspenseList=Vk;ot.isAsyncMode=function(){return!1};ot.isConcurrentMode=function(){return!1};ot.isContextConsumer=function(n){return Xs(n)===Bk};ot.isContextProvider=function(n){return Xs(n)===Fk};ot.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===YN};ot.isForwardRef=function(n){return Xs(n)===zk};ot.isFragment=function(n){return Xs(n)===Lk};ot.isLazy=function(n){return Xs(n)===Hk};ot.isMemo=function(n){return Xs(n)===Uk};ot.isPortal=function(n){return Xs(n)===QN};ot.isProfiler=function(n){return Xs(n)===Ok};ot.isStrictMode=function(n){return Xs(n)===Dk};ot.isSuspense=function(n){return Xs(n)===$k};ot.isSuspenseList=function(n){return Xs(n)===Vk};ot.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===Lk||n===Ok||n===Dk||n===$k||n===Vk||n===mne||typeof n=="object"&&n!==null&&(n.$$typeof===Hk||n.$$typeof===Uk||n.$$typeof===Fk||n.$$typeof===Bk||n.$$typeof===zk||n.$$typeof===Kz||n.getModuleId!==void 0)};ot.typeOf=Xs;Xz.exports=ot;var gne=Xz.exports;const yne=No(gne);function vne(n){const e=n&&typeof n=="object"&&n.type==="text"?n.value||"":n;return typeof e=="string"&&e.replace(/[ \t\n\f\r]/g,"")===""}function xne(n){return n.join(" ").trim()}function bne(n,e){const t=e||{};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}var JN={exports:{}},AL=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,wne=/\n/g,Sne=/^\s*/,kne=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Ane=/^:\s*/,Ene=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Cne=/^[;\s]*/,_ne=/^\s+|\s+$/g,Tne=`
`,EL="/",CL="*",Pc="",Nne="comment",Pne="declaration",jne=function(n,e){if(typeof n!="string")throw new TypeError("First argument must be a string");if(!n)return[];e=e||{};var t=1,r=1;function s(y){var g=y.match(wne);g&&(t+=g.length);var w=y.lastIndexOf(Tne);r=~w?y.length-w:r+y.length}function i(){var y={line:t,column:r};return function(g){return g.position=new a(y),c(),g}}function a(y){this.start=y,this.end={line:t,column:r},this.source=e.source}a.prototype.content=n;function o(y){var g=new Error(e.source+":"+t+":"+r+": "+y);if(g.reason=y,g.filename=e.source,g.line=t,g.column=r,g.source=n,!e.silent)throw g}function l(y){var g=y.exec(n);if(g){var w=g[0];return s(w),n=n.slice(w.length),g}}function c(){l(Sne)}function d(y){var g;for(y=y||[];g=f();)g!==!1&&y.push(g);return y}function f(){var y=i();if(!(EL!=n.charAt(0)||CL!=n.charAt(1))){for(var g=2;Pc!=n.charAt(g)&&(CL!=n.charAt(g)||EL!=n.charAt(g+1));)++g;if(g+=2,Pc===n.charAt(g-1))return o("End of comment missing");var w=n.slice(2,g-2);return r+=2,s(w),n=n.slice(g),r+=2,y({type:Nne,comment:w})}}function p(){var y=i(),g=l(kne);if(g){if(f(),!l(Ane))return o("property missing ':'");var w=l(Ene),v=y({type:Pne,property:_L(g[0].replace(AL,Pc)),value:w?_L(w[0].replace(AL,Pc)):Pc});return l(Cne),v}}function m(){var y=[];d(y);for(var g;g=p();)g!==!1&&(y.push(g),d(y));return y}return c(),m()};function _L(n){return n?n.replace(_ne,Pc):Pc}var Rne=jne;function Yz(n,e){var t=null;if(!n||typeof n!="string")return t;for(var r,s=Rne(n),i=typeof e=="function",a,o,l=0,c=s.length;l<c;l++)r=s[l],a=r.property,o=r.value,i?e(a,o,r):o&&(t||(t={}),t[a]=o);return t}JN.exports=Yz;JN.exports.default=Yz;var Mne=JN.exports;const Ine=No(Mne),FT={}.hasOwnProperty,Lne=new Set(["table","thead","tbody","tfoot","tr"]);function Qz(n,e){const t=[];let r=-1,s;for(;++r<e.children.length;)s=e.children[r],s.type==="element"?t.push(Dne(n,s,r,e)):s.type==="text"?(e.type!=="element"||!Lne.has(e.tagName)||!vne(s))&&t.push(s.value):s.type==="raw"&&!n.options.skipHtml&&t.push(s.value);return t}function Dne(n,e,t,r){const s=n.options,i=s.transformLinkUri===void 0?RJ:s.transformLinkUri,a=n.schema,o=e.tagName,l={};let c=a,d;if(a.space==="html"&&o==="svg"&&(c=hne,n.schema=c),e.properties)for(d in e.properties)FT.call(e.properties,d)&&Fne(l,d,e.properties[d],n);(o==="ol"||o==="ul")&&n.listDepth++;const f=Qz(n,e);(o==="ol"||o==="ul")&&n.listDepth--,n.schema=a;const p=e.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},m=s.components&&FT.call(s.components,o)?s.components[o]:o,y=typeof m=="string"||m===Le.Fragment;if(!yne.isValidElementType(m))throw new TypeError(`Component for name \`${o}\` not defined or is not renderable`);if(l.key=t,o==="a"&&s.linkTarget&&(l.target=typeof s.linkTarget=="function"?s.linkTarget(String(l.href||""),e.children,typeof l.title=="string"?l.title:null):s.linkTarget),o==="a"&&i&&(l.href=i(String(l.href||""),e.children,typeof l.title=="string"?l.title:null)),!y&&o==="code"&&r.type==="element"&&r.tagName!=="pre"&&(l.inline=!0),!y&&(o==="h1"||o==="h2"||o==="h3"||o==="h4"||o==="h5"||o==="h6")&&(l.level=Number.parseInt(o.charAt(1),10)),o==="img"&&s.transformImageUri&&(l.src=s.transformImageUri(String(l.src||""),String(l.alt||""),typeof l.title=="string"?l.title:null)),!y&&o==="li"&&r.type==="element"){const g=One(e);l.checked=g&&g.properties?!!g.properties.checked:null,l.index=NE(r,e),l.ordered=r.tagName==="ol"}return!y&&(o==="ol"||o==="ul")&&(l.ordered=o==="ol",l.depth=n.listDepth),(o==="td"||o==="th")&&(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),y||(l.isHeader=o==="th")),!y&&o==="tr"&&r.type==="element"&&(l.isHeader=r.tagName==="thead"),s.sourcePos&&(l["data-sourcepos"]=$ne(p)),!y&&s.rawSourcePos&&(l.sourcePosition=e.position),!y&&s.includeElementIndex&&(l.index=NE(r,e),l.siblingCount=NE(r)),y||(l.node=e),f.length>0?Le.createElement(m,l,f):Le.createElement(m,l)}function One(n){let e=-1;for(;++e<n.children.length;){const t=n.children[e];if(t.type==="element"&&t.tagName==="input")return t}return null}function NE(n,e){let t=-1,r=0;for(;++t<n.children.length&&n.children[t]!==e;)n.children[t].type==="element"&&r++;return r}function Fne(n,e,t,r){const s=lne(r.schema,e);let i=t;i==null||i!==i||(Array.isArray(i)&&(i=s.commaSeparated?bne(i):xne(i)),s.property==="style"&&typeof i=="string"&&(i=Bne(i)),s.space&&s.property?n[FT.call(kL,s.property)?kL[s.property]:s.property]=i:s.attribute&&(n[s.attribute]=i))}function Bne(n){const e={};try{Ine(n,t)}catch{}return e;function t(r,s){const i=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;e[i.replace(/-([a-z])/g,zne)]=s}}function zne(n,e){return e.toUpperCase()}function $ne(n){return[n.start.line,":",n.start.column,"-",n.end.line,":",n.end.column].map(String).join("")}const TL={}.hasOwnProperty,Vne="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Zx={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function Jz(n){for(const i in Zx)if(TL.call(Zx,i)&&TL.call(n,i)){const a=Zx[i];console.warn(`[react-markdown] Warning: please ${a.to?`use \`${a.to}\` instead of`:"remove"} \`${i}\` (see <${Vne}#${a.id}> for more info)`),delete Zx[i]}const e=XJ().use(rte).use(n.remarkPlugins||[]).use(Xte,{...n.remarkRehypeOptions,allowDangerousHtml:!0}).use(n.rehypePlugins||[]).use(fne,n),t=new fz;typeof n.children=="string"?t.value=n.children:n.children!==void 0&&n.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${n.children}\`)`);const r=e.runSync(e.parse(t),t);if(r.type!=="root")throw new TypeError("Expected a `root` node");let s=Le.createElement(Le.Fragment,{},Qz({options:n,schema:dne,listDepth:0},r));return n.className&&(s=Le.createElement("div",{className:n.className},s)),s}Jz.propTypes={children:Te.string,className:Te.string,allowElement:Te.func,allowedElements:Te.arrayOf(Te.string),disallowedElements:Te.arrayOf(Te.string),unwrapDisallowed:Te.bool,remarkPlugins:Te.arrayOf(Te.oneOfType([Te.object,Te.func,Te.arrayOf(Te.oneOfType([Te.bool,Te.string,Te.object,Te.func,Te.arrayOf(Te.any)]))])),rehypePlugins:Te.arrayOf(Te.oneOfType([Te.object,Te.func,Te.arrayOf(Te.oneOfType([Te.bool,Te.string,Te.object,Te.func,Te.arrayOf(Te.any)]))])),sourcePos:Te.bool,rawSourcePos:Te.bool,skipHtml:Te.bool,includeElementIndex:Te.bool,transformLinkUri:Te.oneOfType([Te.func,Te.bool]),linkTarget:Te.oneOfType([Te.func,Te.string]),transformImageUri:Te.func,components:Te.object};const PE=n=>(n||"").toString().trim().toLowerCase(),n0=["curaduria","expansiones","backstage"],ew={curaduria:{id:"curaduria",label:"Curadura Reflexiva",summary:"Textos crticos y anlisis profundos sobre la obra y su universo, escritos por investigadores, curadoras y voces especializadas.",keywords:["curaduria","curatorial","critica","ensayo","analisis","reflexiva"]},expansiones:{id:"expansiones",label:"Expansiones Narrativas",summary:"Microficciones, comunidad y relatos que acompaan los miniversos transmedia: cartas, diarios, audios y relatos colectivos.",keywords:["miniverso","transmedia","ficcion","comunidad","microficcion","expansion"]},backstage:{id:"backstage",label:"Detrs de Cmaras",summary:"Noticias, avances y bitcoras del proceso creativo: apps, novela, ensayo tcnico, produccin y archivos del montaje.",keywords:["backstage","proceso","produccion","apps","novela","noticias","detras"]}},Une=["carta-a-copycats","taza-que-habla"],NL=n0[0],Hne=n=>{if(!n)return NL;const e=PE(n.category);if(e&&n0.includes(e))return e;const t=PE(n.slug);if(t&&Une.includes(t))return"expansiones";const r=Array.isArray(n.tags)?n.tags.map(s=>PE(s)).filter(Boolean):[];for(const s of n0){const i=ew[s].keywords;if(r.some(a=>i.includes(a)))return s}return NL};async function qne({post:n,action:e,liked:t,notify:r,miniverse:s,mostViewedMiniverse:i,mostViewedMiniverseCount:a,interactionContext:o="blog_article_footer"}){if(!(n!=null&&n.id)||!(n!=null&&n.slug))return{success:!1,error:new Error("Falta el identificador del artculo")};const l=Rk();if(!l)return{success:!1,error:new Error("No se pudo generar un anon_id para la interaccin.")};const c={source:"blog",component:"ArticleInteractionPanel",interaction_context:o},d={post_id:n.id,post_slug:n.slug,post_title:n.title,author:n.author,tags:n.tags??[],published_at:n.published_at,liked:!!t,notify:!!r,miniverse:s,most_viewed_miniverse:i,most_viewed_miniverse_count:a??null};return dz({action_type:e==="like"?"article_like":"article_notify",anon_id:l,context:c,metadata:d})}const Zz={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},PL={cine:{label:"Miniverso Cine",views:4320,subcategories:["Quirn","Copycats","Campo expandido"]},expansiones:{label:"Expansiones Narrativas",views:3860,subcategories:["Cartas","Bitcoras","Microrrelatos"]},curaduria:{label:"Curadura Reflexiva",views:2780,subcategories:["Ensayo crtico","Cartografas emocionales"]},apps:{label:"Miniverso Apps",views:2190,subcategories:["Guardianes digitales","Glitches","Rituales mviles"]},sonoro:{label:"Miniverso Sonoro",views:2010,subcategories:["Pistas","Field recordings","Ondas"]},bitacora:{label:"Miniverso Bitcora",views:1760,subcategories:["Crnicas","Archivo vivo","Cartas"]},taza:{label:"Miniverso Taza",views:1630,subcategories:["Objetos rituales","Memorias lquidas"]},otro:{label:"Otra contribucin",views:1480,subcategories:["Performance","Investigacin hbrida"]}},Gne={cine:["cine","quirn","copycats","film","pelcula"],expansiones:["expansiones","miniverso","novela","diario","microficcin"],curaduria:["curadura","critica","analisis","ensayo"],apps:["app","apps","digital","interactivo"],sonoro:["sonoro","audio","msica","sonidos"],bitacora:["bitcora","bitacora","cronica","crnica"],taza:["taza","objeto","cermica","ritual"],otro:["performance","hbrido","glitch","experimental"]},Wne=n=>{const e=[n.category,n.slug,n.title,n.excerpt,...Array.isArray(n.tags)?n.tags:[]].filter(Boolean).join(" ").toLowerCase();for(const[t,r]of Object.entries(Gne))if(r.some(s=>e.includes(s)))return t;return"curaduria"},Xne={p:({node:n,...e})=>h.jsx("p",{className:"leading-relaxed font-light text-slate-200",...e}),strong:({node:n,...e})=>h.jsx("strong",{className:"font-semibold text-white",...e}),em:({node:n,...e})=>h.jsx("em",{className:"italic text-slate-100",...e}),blockquote:({node:n,...e})=>h.jsx("blockquote",{className:"border-l-4 border-purple-400/60 pl-4 italic text-slate-200/90 bg-white/5 py-2 rounded-r-xl",...e}),ul:({node:n,...e})=>h.jsx("ul",{className:"ml-6 list-disc space-y-2 text-slate-200",...e}),ol:({node:n,...e})=>h.jsx("ol",{className:"ml-6 list-decimal space-y-2 text-slate-200",...e}),li:({node:n,...e})=>h.jsx("li",{className:"leading-relaxed",...e}),a:({node:n,...e})=>h.jsx("a",{className:"text-purple-300 underline decoration-dotted hover:text-purple-200 transition-colors",target:"_blank",rel:"noopener noreferrer",...e})},Kne=({post:n,onSelect:e})=>{const t=n.published_at?new Date(n.published_at):null;return h.jsxs(ne.article,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,ease:"easeOut"},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col hover-glow transition-shadow min-h-[420px]",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm text-slate-400",children:[t&&h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx($2,{size:16}),t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}),n.read_time_minutes?h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(k3,{size:16}),n.read_time_minutes," min lectura"]}):null,h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(ak,{size:16}),n.author,n.author_role?h.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]})]}),h.jsx("h3",{className:"font-display text-2xl md:text-3xl font-medium text-slate-100 mb-4",children:n.title}),h.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-6",children:n.excerpt}),Array.isArray(n.tags)&&n.tags.length>0?h.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:n.tags.map(r=>h.jsx("span",{className:"text-xs uppercase tracking-wider text-purple-200/80 bg-purple-500/10 border border-purple-400/20 px-3 py-1 rounded-full",children:r},r))}):null,h.jsx(we,{onClick:()=>e(n),variant:"outline",className:"self-start border-purple-400/40 text-purple-200 hover:bg-purple-500/20",children:"Leer artculo completo"})]})},Yne=()=>h.jsxs(ne.div,{variants:Zz,className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col gap-4 animate-pulse min-h-[420px]",children:[h.jsx("div",{className:"h-4 bg-white/10 rounded w-1/3"}),h.jsx("div",{className:"h-8 bg-white/10 rounded w-3/4"}),h.jsx("div",{className:"h-20 bg-white/5 rounded"}),h.jsxs("div",{className:"flex gap-2 mt-auto",children:[h.jsx("span",{className:"h-8 w-24 bg-white/10 rounded-full"}),h.jsx("span",{className:"h-8 w-32 bg-white/10 rounded-full"})]})]}),Qne=({post:n,onClose:e})=>{const t=S.useMemo(()=>{var i;return((i=n==null?void 0:n.content)==null?void 0:i.trim())??""},[n]),r=(n==null?void 0:n.featured_image_url)??null,s=n.published_at?new Date(n.published_at):null;return h.jsxs(ne.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.4,ease:"easeOut"},className:"glass-effect rounded-3xl p-8 md:p-12 border border-white/10 shadow-2xl backdrop-blur-xl",children:[h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[h.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-400",children:[s?h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx($2,{size:16}),s.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}):null,h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(ak,{size:16}),n.author,n.author_role?h.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]}),n.read_time_minutes?h.jsxs("span",{className:"inline-flex items-center gap-2",children:[h.jsx(k3,{size:16}),n.read_time_minutes," min lectura"]}):null]}),h.jsx(we,{onClick:e,variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/10",children:"Cerrar artculo"})]}),h.jsx("h3",{className:"font-display text-3xl md:text-4xl font-semibold text-slate-50 mb-8",children:n.title}),r?h.jsx("div",{className:"mb-10 overflow-hidden rounded-3xl border border-white/10 bg-white/5",children:h.jsx("img",{src:r,alt:`https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/grafico/_V7M6281_.jpg ${n.title}`,className:"w-full max-h-[480px] object-cover",loading:"lazy"})}):null,t?h.jsx("div",{className:"flex flex-col gap-6 text-slate-200 leading-relaxed font-light",children:h.jsx(Jz,{components:Xne,skipHtml:!1,linkTarget:"_blank",children:t})}):h.jsx("div",{className:"space-y-6 text-slate-200 leading-relaxed font-light",children:h.jsx("p",{children:"Este artculo estar disponible muy pronto. Gracias por tu inters en la comunidad crtica de #GatoEncerrado."})}),h.jsx(Jne,{post:n})]})},Jne=({post:n})=>{const{user:e}=Pd(),[t,r]=S.useState(!1),s=S.useCallback(()=>r(!0),[]),i=S.useCallback(()=>r(!1),[]),a=S.useMemo(()=>Wne(n),[n]),o=PL[a]??PL.curaduria,[l,c]=S.useState(!1),[d,f]=S.useState(!1),[p,m]=S.useState({like:"idle",notify:"idle"}),y=async g=>{const w=g==="like"?!l:l,v=g==="notify"?!d:d;if(g==="notify"&&!e){Fe({description:"Inicia sesin para recibir notificaciones y continuar en el Backstage."}),s();return}m(C=>({...C,[g]:"loading"}));const{success:x,error:b}=await qne({post:n,action:g,liked:w,notify:v,miniverse:a,mostViewedMiniverse:o.label,mostViewedMiniverseCount:o.views??null});x?g==="like"?(c(w),Fe({description:w?"Gracias por tu apoyo.":"Quitaste el Me gusta."})):(f(v),Fe({description:v?"Te avisaremos cuando haya novedades sobre este texto.":"Ya no recibes notificaciones de este artculo."})):(console.error("[ArticleInteraction] Error guardando interaccin:",b),Fe({description:"No pudimos guardar tu interaccin. Intenta nuevamente."})),m(C=>({...C,[g]:"idle"}))};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mt-10 rounded-3xl border border-white/10 bg-black/40 p-6 shadow-[0_30px_80px_rgba(0,0,0,0.35)]",children:[h.jsx("p",{className:"text-base text-slate-200",children:"La lectura te movi?"}),h.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Clic en los botones y registramos la interaccin para alimentar al gato del Backstage."}),h.jsxs("div",{className:"mt-6 flex flex-col gap-3 md:flex-row",children:[h.jsx(we,{variant:l?"secondary":"default",size:"lg",onClick:()=>y("like"),disabled:p.like==="loading",className:"flex-1",children:l?"Gracias por el Me gusta":"Me gust este artculo"}),h.jsx(we,{variant:"outline",size:"lg",onClick:()=>y("notify"),disabled:p.notify==="loading",className:"flex-1",children:d?"Te avisaremos de novedades":"Quiero recibir notificaciones"})]})]}),t?h.jsx(Sk,{onClose:i}):null]})},Zne=({posts:n=[],isLoading:e=!1,error:t=null})=>{const[r,s]=S.useState(null),[i,a]=S.useState(null),[o,l]=S.useState("all"),[c,d]=S.useState(""),f=S.useRef(null),p=S.useMemo(()=>n.map(v=>({...v,category:Hne(v)})),[n]),m=S.useMemo(()=>[...p].sort((v,x)=>{const b=v.published_at?new Date(v.published_at).getTime():0;return(x.published_at?new Date(x.published_at).getTime():0)-b}),[p]),y=S.useMemo(()=>{const v=c.trim().toLowerCase();return m.filter(x=>(o==="all"?!0:x.category===o)?v?[x.title,x.author,x.excerpt,...Array.isArray(x.tags)?x.tags:[]].filter(Boolean).join(" ").toLowerCase().includes(v):!0:!1)},[m,o,c]),g=S.useCallback(v=>{s(v),requestAnimationFrame(()=>{const x=document.getElementById("blog-article");x==null||x.scrollIntoView({behavior:"smooth",block:"start"})})},[]),w=S.useCallback(v=>{l(v),requestAnimationFrame(()=>{var x;(x=f.current)==null||x.scrollIntoView({behavior:"smooth",block:"start"})})},[]);return S.useEffect(()=>{if(i&&p.length>0){const v=p.find(x=>x.slug===i);v&&(g(v),a(null))}},[g,i,p]),S.useEffect(()=>{t&&Fe({description:"No se pudieron cargar los artculos del blog."})},[t]),S.useEffect(()=>{const v=x=>{var _;const{slug:b}=x.detail||{};if(!b)return;const C=p.find(E=>E.slug===b);C?g(C):a(b),(_=document.getElementById("dialogo-critico"))==null||_.scrollIntoView({behavior:"smooth"})};return window.addEventListener("gatoencerrado:open-blog",v),()=>window.removeEventListener("gatoencerrado:open-blog",v)},[g,p]),h.jsx(h.Fragment,{children:h.jsxs("section",{id:"dialogo-critico",className:"py-24 relative min-h-[900px]",children:[h.jsx("div",{className:"section-divider mb-24"}),h.jsxs("div",{className:"container mx-auto px-6",children:[h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Dilogo Crtico"}),h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Pensamiento crtico, comunidad y resonancia"}),h.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Un espacio de pensamiento crtico, creatividad y potica donde convergen curadura, ficcin expandida y noticias detrs de escena. Filtra por inters, busca autoras especficas o explora las lneas editoriales."})]}),h.jsxs("div",{className:"space-y-16",children:[h.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx("button",{type:"button",onClick:()=>l("all"),className:`rounded-full border px-4 py-2 text-sm transition ${o==="all"?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:"Todas"}),n0.map(v=>h.jsx("button",{type:"button",onClick:()=>l(v),className:`rounded-full border px-4 py-2 text-sm transition ${o===v?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:ew[v].label},v))]}),h.jsxs("div",{className:"relative w-full md:w-72",children:[h.jsx(T8,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),h.jsx("input",{type:"search",value:c,onChange:v=>d(v.target.value),placeholder:"Buscar por ttulo o autor",className:"w-full rounded-full border border-white/10 bg-black/30 pl-10 pr-4 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400"})]})]}),h.jsx(ne.div,{ref:f,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.12}}},className:"grid md:grid-cols-2 gap-8 min-h-[640px]",children:e?Array.from({length:4}).map((v,x)=>h.jsx(Yne,{},`skeleton-${x}`)):y.length===0?h.jsx(ne.div,{variants:Zz,className:"md:col-span-2 text-center text-slate-400 py-12",children:"No encontramos textos con ese criterio. Ajusta el filtro o comparte un nuevo testimonio."}):y.map(v=>h.jsx(Kne,{post:v,onSelect:g},v.id))}),h.jsx("div",{id:"blog-article",children:h.jsx(fa,{mode:"wait",children:r?h.jsx(Qne,{post:r,onClose:()=>s(null)},r.id):null})}),h.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1,ease:"easeOut"},viewport:{once:!0},className:"grid md:grid-cols-3 gap-6",children:n0.map(v=>h.jsxs("div",{className:"glass-effect rounded-2xl p-6 border border-white/10 flex flex-col gap-3",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:ew[v].label}),h.jsx("p",{className:"text-slate-300/80 text-sm leading-relaxed flex-1",children:ew[v].summary}),h.jsx(we,{variant:"link",onClick:()=>w(v),className:"text-purple-300 hover:text-white self-start px-0",children:"Leer esta lnea editorial"})]},v))})]})]})]})})};var ere=HL[" useId ".trim().toString()]||(()=>{}),tre=0;function e$(n){const[e,t]=S.useState(ere());return wd(()=>{n||t(r=>r??String(tre++))},[n]),n||(e?`radix-${e}`:"")}var qk="Collapsible",[nre,t$]=nk(qk),[rre,ZN]=nre(qk),n$=S.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:s,disabled:i,onOpenChange:a,...o}=n,[l,c]=rk({prop:r,defaultProp:s??!1,onChange:a,caller:qk});return h.jsx(rre,{scope:t,disabled:i,contentId:e$(),open:l,onOpenToggle:S.useCallback(()=>c(d=>!d),[c]),children:h.jsx(mr.div,{"data-state":tP(l),"data-disabled":i?"":void 0,...o,ref:e})})});n$.displayName=qk;var r$="CollapsibleTrigger",s$=S.forwardRef((n,e)=>{const{__scopeCollapsible:t,...r}=n,s=ZN(r$,t);return h.jsx(mr.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":tP(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:dr(n.onClick,s.onOpenToggle)})});s$.displayName=r$;var eP="CollapsibleContent",i$=S.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=ZN(eP,n.__scopeCollapsible);return h.jsx(L2,{present:t||s.open,children:({present:i})=>h.jsx(sre,{...r,ref:e,present:i})})});i$.displayName=eP;var sre=S.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:r,children:s,...i}=n,a=ZN(eP,t),[o,l]=S.useState(r),c=S.useRef(null),d=Eo(e,c),f=S.useRef(0),p=f.current,m=S.useRef(0),y=m.current,g=a.open||o,w=S.useRef(g),v=S.useRef(void 0);return S.useEffect(()=>{const x=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(x)},[]),wd(()=>{const x=c.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const b=x.getBoundingClientRect();f.current=b.height,m.current=b.width,w.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),l(r)}},[a.open,r]),h.jsx(mr.div,{"data-state":tP(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:g&&s})});function tP(n){return n?"open":"closed"}var ire=n$,are=s$,ore=i$,lre=S.createContext(void 0);function cre(n){const e=S.useContext(lre);return n||e||"ltr"}var Ci="Accordion",ure=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[nP,dre,hre]=XO(Ci),[Gk,rse]=nk(Ci,[hre,t$]),rP=t$(),a$=Le.forwardRef((n,e)=>{const{type:t,...r}=n,s=r,i=r;return h.jsx(nP.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?h.jsx(gre,{...i,ref:e}):h.jsx(mre,{...s,ref:e})})});a$.displayName=Ci;var[o$,fre]=Gk(Ci),[l$,pre]=Gk(Ci,{collapsible:!1}),mre=Le.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...a}=n,[o,l]=rk({prop:t,defaultProp:r??"",onChange:s,caller:Ci});return h.jsx(o$,{scope:n.__scopeAccordion,value:Le.useMemo(()=>o?[o]:[],[o]),onItemOpen:l,onItemClose:Le.useCallback(()=>i&&l(""),[i,l]),children:h.jsx(l$,{scope:n.__scopeAccordion,collapsible:i,children:h.jsx(c$,{...a,ref:e})})})}),gre=Le.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:s=()=>{},...i}=n,[a,o]=rk({prop:t,defaultProp:r??[],onChange:s,caller:Ci}),l=Le.useCallback(d=>o((f=[])=>[...f,d]),[o]),c=Le.useCallback(d=>o((f=[])=>f.filter(p=>p!==d)),[o]);return h.jsx(o$,{scope:n.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c,children:h.jsx(l$,{scope:n.__scopeAccordion,collapsible:!0,children:h.jsx(c$,{...i,ref:e})})})}),[yre,Wk]=Gk(Ci),c$=Le.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:r,dir:s,orientation:i="vertical",...a}=n,o=Le.useRef(null),l=Eo(o,e),c=dre(t),f=cre(s)==="ltr",p=dr(n.onKeyDown,m=>{var j;if(!ure.includes(m.key))return;const y=m.target,g=c().filter(M=>{var O;return!((O=M.ref.current)!=null&&O.disabled)}),w=g.findIndex(M=>M.ref.current===y),v=g.length;if(w===-1)return;m.preventDefault();let x=w;const b=0,C=v-1,_=()=>{x=w+1,x>C&&(x=b)},E=()=>{x=w-1,x<b&&(x=C)};switch(m.key){case"Home":x=b;break;case"End":x=C;break;case"ArrowRight":i==="horizontal"&&(f?_():E());break;case"ArrowDown":i==="vertical"&&_();break;case"ArrowLeft":i==="horizontal"&&(f?E():_());break;case"ArrowUp":i==="vertical"&&E();break}const N=x%v;(j=g[N].ref.current)==null||j.focus()});return h.jsx(yre,{scope:t,disabled:r,direction:s,orientation:i,children:h.jsx(nP.Slot,{scope:t,children:h.jsx(mr.div,{...a,"data-orientation":i,ref:l,onKeyDown:r?void 0:p})})})}),Kw="AccordionItem",[vre,sP]=Gk(Kw),u$=Le.forwardRef((n,e)=>{const{__scopeAccordion:t,value:r,...s}=n,i=Wk(Kw,t),a=fre(Kw,t),o=rP(t),l=e$(),c=r&&a.value.includes(r)||!1,d=i.disabled||n.disabled;return h.jsx(vre,{scope:t,open:c,disabled:d,triggerId:l,children:h.jsx(ire,{"data-orientation":i.orientation,"data-state":g$(c),...o,...s,ref:e,disabled:d,open:c,onOpenChange:f=>{f?a.onItemOpen(r):a.onItemClose(r)}})})});u$.displayName=Kw;var d$="AccordionHeader",h$=Le.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,s=Wk(Ci,t),i=sP(d$,t);return h.jsx(mr.h3,{"data-orientation":s.orientation,"data-state":g$(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});h$.displayName=d$;var BT="AccordionTrigger",f$=Le.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,s=Wk(Ci,t),i=sP(BT,t),a=pre(BT,t),o=rP(t);return h.jsx(nP.ItemSlot,{scope:t,children:h.jsx(are,{"aria-disabled":i.open&&!a.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...o,...r,ref:e})})});f$.displayName=BT;var p$="AccordionContent",m$=Le.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,s=Wk(Ci,t),i=sP(p$,t),a=rP(t);return h.jsx(ore,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...a,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});m$.displayName=p$;function g$(n){return n?"open":"closed"}var xre=a$,bre=u$,wre=h$,y$=f$,v$=m$;const Sre=xre,x$=Le.forwardRef(({className:n,...e},t)=>h.jsx(bre,{ref:t,className:Ei("border-b",n),...e}));x$.displayName="AccordionItem";const b$=Le.forwardRef(({className:n,children:e,...t},r)=>h.jsx(wre,{className:"flex",children:h.jsxs(y$,{ref:r,className:Ei("tran-accordion-trigger flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,h.jsx("span",{className:"trigger-line","aria-hidden":"true"}),h.jsx(S3,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));b$.displayName=y$.displayName;const w$=Le.forwardRef(({className:n,children:e,...t},r)=>h.jsx(v$,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:h.jsx("div",{className:Ei("pb-4 pt-0",n),children:e})}));w$.displayName=v$.displayName;const kre={Dramaturgia:{name:"Carlos A. Prez H.",bio:"Comuniclogo, autor, y artista transmedia. Su obra habita entre teatro, escritura y tecnologa, proponiendo una potica crtica y humana. Formado en el ITESO, la Universidad de Salamanca y LABASAD Barcelona, integra astrologa psicolgica, cuerpo y arte digital en una mirada simblica. Creador del universo transmedia #GatoEncerrado, concibe el acto creativo como una forma de acompaamiento y transformacin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlos_perez.gif"},Direccin:{name:"Gilberto Corrales",bio:"Director, dramaturgo y actor. Licenciado en Teatro por la Facultad de Artes de la UABC, ha dirigido ms de cuarenta obras, la mayora de su autora. Su trabajo explora la transdisciplina y la investigacin del lenguaje escnico. Fundador de Incendio Producciones, sus obras han estado presentes en la Muestra Nacional de Teatro y en festivales de Colombia, Argentina y EE.UU. Ganador del Premio Juventud 2016 y del FITU UNAM. Dirige el Contagio Tijuana y colabora con artistas como Jorge Ballina y Daniel Primo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/gil-corrales.gif"},Produccin:{description:"Un equipo que coordina, articula y acompaa cada engranaje de la produccin escnica con mirada sensible, tcnica y humana.",members:[{name:"Rosala Hernndez Milln",role:"Produccin General y Vinculacin Social",bio:"Presidenta de Isabel A.C. Ayuda para la Vida, Maestra en Psicobiologa y Neurociencia Cognitiva (UAB). Su labor impulsa la integracin entre arte y bienestar emocional, fortaleciendo el puente entre el proyecto escnico y la comunidad.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/presidentaross.jpg"},{name:"Miroslava Wilson",role:"Produccin Ejecutiva",bio:"Productora ejecutiva, directora y asesora de movimiento. Originaria de Hermosillo y radicada en Tijuana, es fundadora de Pndulo Cero A.C. y educadora de movimiento somtico certificada por Body Mind Movement. Su trabajo interdisciplinario vincula arte, medio ambiente y humanismo. Ha presentado su obra en Asia, Amrica y Europa, y actualmente impulsa proyectos como Casa Viva y SomasSomos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/Miroslava%20.jpg"},{name:"Marcela Durn Mulia",role:"Produccin Administrativa",bio:"Actriz, gestora y representante legal de Incendio Producciones. Licenciada en Comunicacin (UABC) y Maestra en Alta Direccin Corporativa (Humanitas). Ha participado en la Muestra Nacional de Teatro, ENARTES y otros festivales internacionales. Su mirada estratgica une la gestin cultural con la sensibilidad artstica.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/marcela.png"},{name:"Gabriel Monroy",role:"Asistencia de Direccin y Gestin",bio:"Actor, fotgrafo escnico y gestor. Licenciado en Artes Escnicas por la Universidad de Sonora. Creador de la serie fotogrfica 'Reflejos de la escena', exhibida internacionalmente. Su mirada visual y su acompaamiento escnico fortalecen el proceso de direccin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/gabriel.jpg"},{name:"Roco Morgan",role:"Asistencia Ejecutiva",bio:"Gestora cultural y apoyo logstico de produccin. Su labor sostiene los procesos administrativos y humanos que hacen posible la operacin cotidiana de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rocio.jpg"},{name:"Mara Diana Laura Rodriguez",role:"Enlace de Produccin",bio:"Maquillista y traspunte en el Teatro Camafeo. Fue un apoyo operativo clave en la etapa temprana de #GatoEncerrado y facilit el enlace con el director Gilberto Corrales, gesto que defini la continuidad del proyecto. Su iniciativa y acompaamiento hicieron posible que el montaje avanzara en el momento ms decisivo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariadianalaura.jpg"}]},Elenco:{description:"Actores y actrices que encarnan el pulso emocional de la obra desde la fisicalidad, la voz y la presencia simblica.",members:[{id:"elenco-cyndi",name:"Cynthia Teresa Rodrguez Aguirre",role:"Intrprete",bio:"Artista interdisciplinaria egresada de la UABC. Su prctica integra fotografa, escritura y teatro. Ha participado en el San Diego Fringe Festival y en montajes de Incendio Producciones. Actualmente se enfoca en la direccin escnica y la exploracin visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/cyndi.jpg"},{id:"elenco-mariana",name:"Mariana de los Santos",role:"Intrprete",bio:"Actriz tijuanense formada en CEART y con experiencia en cine y teatro contemporneo. Su trabajo corporal revela una sensibilidad potica que dialoga entre lo ntimo y lo colectivo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariana.jpg"},{id:"elenco-ricardo",name:"Ricardo Mrquez Salgado",role:"Intrprete",bio:"Comuniclogo, modelo y actor. Ha participado en teatro, cine y publicidad. Destacan sus coprotagnicos en 'Ideas para no morir en el anonimato' y 'Entre Dos'. Su presencia combina energa escnica y precisin esttica.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/ricardo.jpg"},{id:"elenco-carlos-valdez",name:"Carlos Valdez Rosas",role:"Intrprete",bio:"Actor y productor de Incendio Producciones. Su trabajo combina performance, posdrama e interdisciplina. Ha participado en la Muestra Nacional de Teatro y festivales internacionales en Argentina y Estados Unidos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlitos.jpg"}]},"Diseo Escnico":{description:"Diseadoras y diseadores que construyen atmsferas visuales y espaciales para expandir la potica de la obra.",members:[{name:"Jorge Ballina",role:"Escenografa",bio:"Arquitecto y escengrafo con ms de 120 obras en teatro, danza y pera. Miembro del Sistema Nacional de Creadores de Arte, ha sido galardonado con premios internacionales como el World Stage Design Toronto y Calgary. Su trabajo combina estructura y poesa visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/jorge.jpg"},{name:"Daniel Primo",role:"Video Escenogrfico e Iluminacin",bio:"Artista visual y diseador escnico. Explora la relacin entre multimedia y espacio escnico. Integrante del Sistema Nacional de Creadores, su trabajo ha sido presentado en Europa, Asia y Amrica. Cofundador de Engranaje Invertebrado.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/primo.jpg"},{name:"Ximena Inurreta",role:"Asistente de Diseo de Escenografa",bio:"Diseadora escnica emergente que apoya el desarrollo de atmsferas visuales y transiciones espaciales en el montaje de #GatoEncerrado.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/Ximena.jpg"}]},"Msica y Sonido":{description:"Artistas que modelan la experiencia auditiva, desde la composicin musical hasta la espacializacin del sonido.",members:[{name:"La Prez",role:"Diseo Sonoro",bio:"Artista sonora con ms de doce aos de experiencia. Fundadora de Concrete Sounds, ha colaborado en filmes como 'Ya no estoy aqu' y 'Monos'. Su especialidad es la creacin de paisajes inmersivos que amplan la dimensin sensorial del teatro.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/lia.png"},{name:"Diego Madera",role:"Composicin Musical",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio. Su pieza original acompaa los pasajes emocionales de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png"}]},"Vestuario y Caracterizacin":{description:"Diseo textil y caracterizacin que traducen la psicologa de los personajes en textura, color y forma.",members:[{name:"Karla Flores",role:"Realizacin de Vestuario",bio:"Diseadora de vestuario que traduce emociones en textura, movimiento y color. Su trabajo aporta profundidad simblica a la corporalidad de los intrpretes.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/Karla.jpg"},{name:"Jonathan Lazcano",role:"Pelucas y Caracterizacin Capilar",bio:"Artista de caracterizacin. Su trabajo artesanal da vida y coherencia visual a los personajes a travs del detalle y la textura.",image:"/images/placeholder-diseno.jpg"}]},"Realizacin Tcnica":{description:"Especialistas que construyen y operan la infraestructura escnica para que cada funcin suceda con precisin y seguridad.",members:[{name:"Harold Garca",role:"Direccin Tcnica",bio:"Arquitecto y diseador lumnico. Ha colaborado en producciones como 'Matilda', 'Mamma Mia!' y 'Madame Butterfly'. Su trabajo abarca teatro, pera y danza contempornea, con presentaciones en Mxico, Los ngeles y festivales nacionales.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/harold.jpg"},{name:"Rebeca Hernndez",role:"Realizacin Escenogrfica",bio:"Diseadora industrial egresada del CIDI-UNAM y fundadora de Atelier RHC en Tijuana. Su taller produce escenografas, mobiliario y piezas funcionales para teatro y espacios pblicos, uniendo tcnica artesanal con visin contempornea.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rebeca.jpg"}]},"Colaboradores y Agradecimientos":{description:"Detrs de cada funcin existe una constelacin de manos, miradas y corazones que hacen posible la obra de Es un Gato Encerrado. Este bloque celebra su labor silenciosa y luminosa.",members:[],details:{tecnicos:"Asistencia tcnica y tramoya: Renee Camacho  asistencia tcnica y tramoya. Luis Fernando Lpez Snchez, Alex Nava, Christian Camacho  equipo de realizacin de escenografa. Marco Antonio Corral Gastelm, Manuel Axxel Aquino, Santiago Augusto Rodrguez, Alejandro Saldaa  realizadores y tramoya.",registro:"Registro, foto y medios: Viviana Gonzlez  registro creativo videogrfico. Sergio Brown  registro audiovisual. Enigma Creative  publicidad y diseo grfico. Eclipse Comunicacin Estratgica  difusin y medios.",institucionales:"Apoyos institucionales: Agradecimiento a Teatro CAMAFEO y sus productoras Margarita Martnez de Camarena y Elsa Prez de Vargas; CEART Tijuana, IMAC, Casa Viva y Adagio Studio por su apoyo en ensayos y espacios."}},"Alianza de Impacto Social":{name:"Isabel Ayuda para la Vida A.C.",bio:"Asociacin civil sin fines de lucro fundada en 2018 y dirigida por Rosala Hernndez Milln. Su misin es prevenir la violencia autoinfligida mediante el programa DySVAE, promoviendo el pedir ayuda como estrategia de vida. Colabora con #GatoEncerrado para visibilizar la salud emocional y la empata en contextos artsticos y educativos.",image:"/images/placeholder-institucional.jpg"}},Are=()=>{const[n,e]=S.useState(null),[t,r]=S.useState(!1),[s,i]=S.useState(null),a=S.useRef({}),o=S.useRef(null);S.useEffect(()=>{const d=()=>r(typeof window<"u"?window.innerWidth<768:!1);return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),S.useEffect(()=>{t&&n&&e(null)},[t,n]),S.useLayoutEffect(()=>{if(!o.current)return;const d=a.current[o.current];if(o.current=null,!d)return;const f=parseFloat(getComputedStyle(d).scrollMarginTop)||0,p=d.getBoundingClientRect(),m=window.scrollY+p.top-f;window.scrollTo({top:m,behavior:"auto"})},[s]);const l=(d,f)=>{var y;const p=f==="Elenco",m=t&&["Diseo Escnico","Msica y Sonido","Vestuario y Caracterizacin","Realizacin Tcnica","Produccin"].includes(f);if(Array.isArray(d==null?void 0:d.members)){const g=p&&!t,w=d.members.map((x,b)=>({member:x,id:x.id||`${x.name}-${b}`,idx:b})),v=g&&n?(y=w.find(({id:x})=>x===n))==null?void 0:y.member:null;return h.jsxs("div",{className:"space-y-6",children:[d.description&&h.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-2 md:text-base sm:text-sm",children:d.description}),g&&v&&h.jsxs(ne.div,{layout:!0,transition:{layout:{duration:.35,ease:[.22,1,.36,1]}},className:"relative overflow-hidden rounded-xl border border-white/5 shadow-lg shadow-black/30 max-h-[520px]",children:[h.jsx("img",{className:"w-full h-full object-cover",src:v.image,alt:`Retrato de ${v.name}`,loading:"lazy"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/75 via-black/30 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 left-0 p-6",children:[h.jsx("h4",{className:"font-display text-2xl text-purple-100 drop-shadow",children:v.name}),v.role&&h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-200/80",children:v.role})]})]}),h.jsx(ne.div,{layout:!0,className:"grid gap-6 md:grid-cols-2",children:w.map(({member:x,id:b})=>{const C=g&&n===b,_=()=>g?e(E=>E===b?null:b):void 0;return m?h.jsxs(ne.div,{layout:!0,transition:{layout:{duration:.35,ease:[.22,1,.36,1]}},className:"glass-effect rounded-xl p-5 flex flex-col gap-4 border border-white/5 items-center sm:flex-row sm:items-start",children:[h.jsx("img",{className:"h-20 w-20 flex-shrink-0 rounded-full object-cover shadow-lg shadow-black/30",src:x.image,alt:`Retrato de ${x.name}`,loading:"lazy"}),h.jsxs("div",{className:"space-y-2 text-center sm:text-left sm:flex-1",children:[h.jsx("h4",{className:"font-display text-lg text-purple-200",children:x.name}),x.role&&h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:x.role}),x.bio&&h.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:x.bio}),x.url&&h.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:x.urlLabel??"Ver perfil"})]})]},b):h.jsxs(ne.div,{layout:!0,transition:{layout:{duration:.35,ease:[.22,1,.36,1]}},className:`glass-effect rounded-xl p-5 flex flex-col md:flex-row gap-4 border border-white/5 transition-all duration-300 ${g?`cursor-pointer hover:border-purple-400/40 ${C?"border-purple-400/60 ring-2 ring-purple-300/40":""}`:""}`,onClick:_,role:g?"button":void 0,tabIndex:g?0:void 0,onKeyDown:g?E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),_())}:void 0,children:[h.jsx("div",{className:"w-full md:w-44 overflow-hidden rounded-lg border border-white/5 bg-black/30",children:h.jsx("img",{className:"w-full h-44 object-cover shadow-lg shadow-black/30",src:x.image,alt:`Retrato de ${x.name}`,loading:"lazy"})}),h.jsxs("div",{className:"space-y-2 flex-1",children:[h.jsx("h4",{className:"font-display text-lg text-purple-200",children:x.name}),x.role&&h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:x.role}),x.bio&&h.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:x.bio}),x.url&&h.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:x.urlLabel??"Ver perfil"})]})]},b)})}),d.details&&h.jsxs("div",{className:"text-slate-400 text-sm leading-relaxed space-y-4",children:[h.jsx("div",{className:"border-t border-white/10 pt-4",children:d.details.tecnicos}),h.jsx("div",{className:"border-t border-white/10 pt-4",children:d.details.registro}),h.jsx("div",{className:"border-t border-white/10 pt-4",children:d.details.institucionales})]})]})}return h.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[h.jsx("div",{className:"md:col-span-1",children:h.jsx("img",{className:"w-full h-48 object-cover rounded-lg shadow-lg shadow-black/30",alt:`Retrato de ${d.name}`,src:d.image})}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("h3",{className:"font-display text-xl font-bold text-purple-300 mb-2",children:d.name}),h.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light md:text-base sm:text-sm",children:d.bio})]})]})},c=d=>{const f=d??null;i(f),o.current=f};return h.jsxs("section",{id:"team",className:"py-24 relative",children:[h.jsx("div",{className:"section-divider mb-24"}),h.jsxs("div",{className:"container mx-auto px-6",children:[h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Equipo Creativo"}),h.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light md:text-base sm:text-sm",children:"Un colectivo de artistas multidisciplinarios unidos por la pasin de crear experiencias teatrales que desafan los lmites del arte escnico y la empata."})]}),h.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"max-w-4xl mx-auto",children:h.jsx(Sre,{type:"single",collapsible:!0,className:"w-full space-y-4",value:s??void 0,onValueChange:c,children:Object.entries(kre).map(([d,f],p)=>{const m=`item-${p}`;return h.jsxs(x$,{value:m,className:"glass-effect rounded-lg border-none overflow-hidden scroll-mt-24",ref:y=>{y?a.current[m]=y:delete a.current[m]},children:[h.jsx(b$,{className:"font-display text-xl md:text-2xl text-slate-100 p-6 hover:no-underline hover:bg-white/5 transition-colors duration-300",children:d}),h.jsx(w$,{className:"p-6 pt-0 bg-black/20",children:l(f,d)})]},d)})})})]})]})},jE="gatoencerrado-blog-onboarding",Ere=()=>{const[n,e]=S.useState(!1),[t,r]=S.useState(!1),s=S.useRef(!1),{user:i}=Pd(),a=!!(i!=null&&i.email),o=Ei("text-white px-8 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow transition mx-auto",a?"bg-gradient-to-r from-emerald-500/90 to-emerald-600/90 hover:from-emerald-400/90 hover:to-emerald-500/90 shadow-[0_0_35px_rgba(16,185,129,0.5)] ring-2 ring-emerald-400/30":"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600"),l=S.useCallback(()=>{e(!0),r(!1),s.current=!0,Wg(jE,"seen")},[]);return S.useEffect(()=>{if(typeof window>"u"||s.current)return;if(kN(jE)==="seen"){r(!1),s.current=!0;return}r(!0);const d=setTimeout(()=>{r(!1),Wg(jE,"seen"),s.current=!0},6e3);return()=>clearTimeout(d)},[]),S.useEffect(()=>{const c=()=>{e(!0)};return window.addEventListener("gatoencerrado:resume-contribution",c),()=>{window.removeEventListener("gatoencerrado:resume-contribution",c)}},[]),h.jsxs(h.Fragment,{children:[h.jsxs("section",{id:"blog-contribuye",className:"py-24 relative min-h-[700px]",children:[h.jsx("div",{className:"section-divider mb-24"}),h.jsx("div",{className:"container mx-auto px-6",children:h.jsxs(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"relative glass-effect rounded-2xl p-8 md:p-12 text-center overflow-hidden",children:[h.jsx("div",{"aria-hidden":"true",className:`
                absolute inset-0
                pointer-events-none
                flex items-center justify-center
                z-0
              `,children:h.jsx(ne.div,{initial:{opacity:.35,scale:.9},animate:{opacity:[.25,.45,.25],scale:[.95,1.05,.95]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:`
                  w-[85%] h-[85%]
                  md:w-[70%] md:h-[70%]
                  rounded-full
                  bg-purple-600/30
                  blur-[100px]
                `})}),h.jsxs("div",{className:"relative z-10",children:[h.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"Algo de la obra se qued contigo?"}),h.jsxs("p",{className:"text-slate-300/80 leading-relaxed mb-8 max-w-2xl mx-auto font-light whitespace-pre-line",children:[`Si algo de la obra se movi contigo, nos encantar saberlo.
    No buscamos opiniones: buscamos las huellas que dej en tu manera de mirar, sentir o recordar.
    Lo que compartas ayuda a seguir construyendo este universo.`,h.jsx("span",{className:"block mt-4 text-sm text-slate-400/70 italic",children:"(O si hubo algo ms que te llam la atencin durante tu visita, tambin puedes contarlo.)"})]}),h.jsxs("div",{className:"relative inline-flex flex-col items-center gap-2",children:[t?h.jsx(ne.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -top-10 bg-purple-600/80 text-white text-xs px-3 py-1 rounded-full shadow-lg",children:"Nuevo! Abre la bandeja lateral y comparte tu texto"}):null,h.jsxs(we,{id:"blog-submit-cta",onClick:l,className:o,children:[h.jsx(A8,{size:18}),"Compartir lo que me dej"]})]})]})]})})]}),h.jsx(z4,{open:n,onClose:()=>e(!1)})]})};async function Cre(){const n="galeria de gatoencerrado";try{const{data:e,error:t}=await wt.storage.from(n).list("",{limit:100,offset:0,sortBy:{column:"name",order:"desc"}});return t?(console.error("Error al listar imgenes:",t.message),[]):e.filter(s=>s.name.match(/\.(jpg|jpeg|png|webp)$/i)).map(s=>{const i=wt.storage.from(n).getPublicUrl(s.name).data.publicUrl;return{id:s.id||s.name,imgSrc:i,alt:s.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," "),postUrl:i}})}catch(e){return console.error("Excepcin al obtener imgenes del bucket:",e),[]}}const eb=[{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.8deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-2 lg:rotate-[0.3deg]",frame:"shadow-[14px_14px_0_rgba(167,139,250,0.14)]",tint:"from-purple-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:translate-y-3 lg:rotate-[0.9deg]",frame:"shadow-[12px_12px_0_rgba(129,140,248,0.14)]",tint:"from-indigo-400/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-2",frame:"shadow-[11px_11px_0_rgba(248,113,113,0.15)]",tint:"from-rose-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-2 sm:row-span-3 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-4",offset:"lg:translate-y-2 lg:-rotate-[1.6deg]",frame:"shadow-[16px_16px_0_rgba(251,191,36,0.14)]",tint:"from-amber-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-2",offset:"lg:-translate-y-4 lg:rotate-[-0.7deg]",frame:"shadow-[13px_13px_0_rgba(45,212,191,0.15)]",tint:"from-teal-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-3 lg:rotate-[0.6deg]",frame:"shadow-[12px_12px_0_rgba(148,163,184,0.16)]",tint:"from-slate-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-4 lg:row-span-4",offset:"lg:-translate-y-2 lg:rotate-[0.4deg]",frame:"shadow-[16px_16px_0_rgba(110,231,183,0.12)]",tint:"from-emerald-300/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-3",offset:"lg:translate-y-2 lg:-rotate-[0.9deg]",frame:"shadow-[13px_13px_0_rgba(244,162,97,0.13)]",tint:"from-orange-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.7deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-3",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-yellow-300/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-1 lg:rotate-[1deg]",frame:"shadow-[15px_15px_0_rgba(153,246,228,0.12)]",tint:"from-teal-200/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-2 md:row-span-4 lg:col-span-2 lg:row-span-4",offset:"lg:-translate-y-4 lg:-rotate-[1.1deg]",frame:"shadow-[20px_20px_0_rgba(203,213,225,0.13)]",tint:"from-slate-200/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[31px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.33deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"}],_re=[{match:"Copia de Foto 1 (1)",patternIndex:0,story:"Corte al vaco"},{match:"PoloyEstela",patternIndex:1,story:"Microclimas invisibles"},{match:"Copia de Foto 4",patternIndex:2,story:"Un nmero interminable"},{match:"Copia de Foto 3 (1)",patternIndex:3,story:"Memoria desdoblada"},{match:"Pausa entre actos",patternIndex:4,story:"Coreografa de luces"},{match:"Copia de Foto 4 (1)",patternIndex:5,story:"Confesin en penumbra"},{match:"_V7M6314",patternIndex:6,story:"Ritual previo al acto"},{match:"_V7M6296",patternIndex:7,story:"Risa entre grietas"},{match:"_V7M6348",patternIndex:8,story:"La jaula bajo la mesa"},{match:"Xanadu",patternIndex:9,story:"Voz que no se nombra"},{match:"_V7M6281",patternIndex:10,story:"El pliegue del vestido"},{match:"_V7M6324",patternIndex:11,story:"La cuerda floja"},{match:"_V7M6329",patternIndex:12,story:"Luz que acusa"},{match:"Copia de Foto 5 (1)",patternIndex:13,story:"Un eco sin dueo"},{match:"DSC02497",patternIndex:14,story:"Vestigio de sombras"}],Bd=["Vestigio de sombras"],Tre=()=>{const[n,e]=S.useState([]),[t,r]=S.useState(null),s=15,[i,a]=S.useState(null),o=S.useRef(null),l=S.useRef(null),[c,d]=S.useState([]),f=S.useRef(0),p=S.useRef([]),m=S.useCallback((O,L)=>{if(!L)return!1;const F=`${O.alt||""} ${O.imgSrc||""}`.toLowerCase();return Array.isArray(L)?L.some(U=>F.includes(String(U).toLowerCase())):F.includes(String(L).toLowerCase())},[]),y=S.useCallback(O=>["susurro de vestuario","foto 2"].some(F=>m(O,F)),[m]);S.useEffect(()=>{(async()=>{try{const L=await Cre();e(L)}catch(L){console.error("Error al traer imgenes del bucket:",L),r("No se pudieron cargar las imgenes del bucket.")}})()},[]),S.useEffect(()=>{if(n.length===0){d([]),f.current=0,p.current=[];return}const O=n.map((z,V)=>({post:z,originalIndex:V})).filter(({post:z})=>!y(z));if(O.length===0){d([]),f.current=0,p.current=[];return}const L=new Set,F=[];_re.forEach(z=>{const V=O.findIndex((q,P)=>!L.has(P)&&m(q.post,z.match));if(V!==-1){const q=O[V];L.add(V),F.push({postIndex:q.originalIndex,patternIndex:z.patternIndex??F.length%eb.length,story:z.story??Bd[F.length%Bd.length]})}});const U=O.map((z,V)=>({...z,idx:V})).filter(({idx:z})=>!L.has(z)).map((z,V)=>({postIndex:z.originalIndex,patternIndex:(F.length+V)%eb.length,story:Bd[(F.length+V)%Bd.length]})),B=[...F,...U];if(p.current=B,B.length===0){d([]),f.current=0;return}const I=Math.min(s,B.length),D=B.slice(0,I).map((z,V)=>({slotId:`${Date.now()}-${V}-${z.postIndex}-${Math.random()}`,postIndex:z.postIndex,patternIndex:z.patternIndex,story:z.story}));d(D),f.current=B.length>0?I%B.length:0},[n,s,m,y]);const g=S.useCallback(O=>{o.current=document.activeElement,a(O)},[]),w=S.useCallback(()=>{a(null),o.current&&typeof o.current.focus=="function"&&o.current.focus()},[]),v=S.useCallback(()=>{a(O=>O===null?O:(O-1+n.length)%n.length)},[n.length]),x=S.useCallback(()=>{a(O=>O===null?O:(O+1)%n.length)},[n.length]);S.useEffect(()=>{if(i===null)return;const O=L=>{L.key==="Escape"&&w(),L.key==="ArrowLeft"&&v(),L.key==="ArrowRight"&&x()};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[i,w,v,x]);const b=i!==null,C=b&&n[i]?n[i]:null,_=n.length,E=i!==null?i:0,N=_>0?(E+1)/_*100:0;S.useEffect(()=>{b&&l.current&&l.current.focus()},[b]);const j={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.55,ease:"easeOut"}},exit:{opacity:0,y:-30,scale:.94,transition:{duration:.4,ease:"easeInOut"}}},M=S.useCallback((O,L)=>{if(!L||n.length<=s)return;const F=typeof window<"u"?window.innerHeight:0,U=L.boundingClientRect.bottom<=0,B=F?L.boundingClientRect.top>=F:!1;!U&&!B||d(I=>{if(!Array.isArray(I)||I.length===0)return I;const D=[...I],z=new Set(D.filter((K,R)=>R!==O).map(K=>K.postIndex)),V=p.current;if(!V||V.length===0)return I;let q=f.current??0,P=0;for(;P<V.length&&z.has(V[q].postIndex);)q=(q+1)%V.length,P+=1;if(P>=V.length)return I;const Y=V[q];return f.current=(q+1)%V.length,D[O]={slotId:`${Date.now()}-${O}-${Y.postIndex}-${Math.random()}`,postIndex:Y.postIndex,patternIndex:Y.patternIndex,story:Y.story},D})},[n.length,s]);return h.jsxs("section",{id:"instagram",className:"py-20 relative",children:[h.jsx("div",{className:"section-divider mb-20"}),h.jsxs("div",{className:"container mx-auto px-5 sm:px-6",children:[h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.75,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-14",children:[h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-5 text-gradient italic",children:"Fractales Escnicos"}),h.jsx("p",{className:"text-base md:text-lg text-slate-300/75 max-w-3xl mx-auto leading-relaxed mb-7 font-light",children:"Memoria de lo que solo sucede una vez en escena Un homenaje visual al trabajo colectivo detrs de Es un gato encerrado: las funciones, los cuerpos, los silencios, las luces lo que solo existe cuando alguien lo mira."}),h.jsxs("p",{className:"text-xs text-slate-400/70 mt-3",children:["Fotografas: Gabriel Monroy. Su semblanza est disponible en "," ",h.jsx("a",{href:"#team",className:"underline text-slate-300",children:"Produccin y Asistencia"}),"."]})]}),t&&h.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 mb-6 text-center text-red-400 bg-red-900/20 rounded-lg",children:[h.jsx(m8,{size:22}),h.jsx("p",{children:t})]}),c.length>0?h.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 lg:grid-cols-8 auto-rows-[95px] sm:auto-rows-[110px] md:auto-rows-[130px] lg:auto-rows-[150px] gap-2 md:gap-3 lg:gap-3.5",children:h.jsx(fa,{mode:"popLayout",children:c.map((O,L)=>{const F=n[O.postIndex];if(!F)return null;const U=eb[O.patternIndex%eb.length],B=O.story??Bd[(L+O.postIndex)%Bd.length];return h.jsx(ne.button,{type:"button",layout:!0,variants:j,initial:"hidden",animate:"visible",exit:"exit",viewport:{amount:.5,once:!1},onViewportLeave:I=>M(L,I),onClick:()=>g(O.postIndex),onKeyDown:I=>{I.key==="Enter"&&g(O.postIndex)},className:`group relative isolate flex h-full w-full cursor-pointer items-stretch focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-400/60 ${U.grid}`,children:h.jsx("div",{className:`relative h-full w-full transition-transform duration-300 ease-out ${U.offset}`,children:h.jsxs(ne.div,{layout:!0,variants:j,initial:"hidden",whileInView:"visible",viewport:{amount:.6,once:!1},whileHover:{translateY:-6},transition:{duration:.35,ease:"easeOut"},className:`relative flex h-full w-full overflow-hidden rounded-[20px] bg-slate-950/70 backdrop-blur-sm ${U.frame}`,children:[h.jsx("span",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${U.tint}`,"aria-hidden":"true"}),h.jsx(ne.img,{src:F.imgSrc,alt:F.alt||"Recuerdo #GatoEncerrado",className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",initial:{scale:1.02,y:0,opacity:1},whileHover:{scale:1.06},transition:{duration:.35,ease:"easeOut"}}),h.jsxs("div",{className:"relative flex h-full flex-col justify-between p-3 md:p-4",children:[h.jsx("div",{className:"text-[0.58rem] uppercase tracking-[0.3em] text-slate-200/75 mix-blend-screen",children:"#GatoEncerrado"}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx("div",{className:"w-8 md:w-10 border-t border-slate-200/30"}),h.jsx("p",{className:"text-[0.8rem] md:text-sm font-light text-slate-50/90 max-w-[10rem] md:max-w-[10.5rem] leading-relaxed drop-shadow-[0_10px_22px_rgba(15,23,42,0.6)]",children:B})]})]})]})})},O.slotId)})})}):!t&&h.jsx("div",{className:"text-center text-slate-400 animate-pulse italic",children:h.jsx("p",{children:"Cargando recuerdos..."})}),h.jsx(fa,{children:b&&C&&h.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[h.jsx(ne.div,{className:"absolute inset-0 bg-slate-950/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:w}),h.jsxs(ne.div,{className:"relative z-10 w-full max-w-5xl overflow-hidden rounded-[28px] bg-slate-900/90 backdrop-blur-xl shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Recuerdo ampliado",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:26},children:[h.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:items-center md:gap-6",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center justify-between text-slate-300/90",children:[h.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300/70",children:"#GatoEncerrado"}),h.jsxs("span",{className:"text-xs font-medium tracking-wide",children:[_>0?`${E+1}`:"0",h.jsxs("span",{className:"text-slate-400/80",children:["/",_]})]})]}),h.jsx("div",{className:"mt-3 h-2 rounded-full bg-white/10 overflow-hidden",children:h.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 transition-all duration-500",style:{width:`${N}%`},"aria-hidden":"true"})})]}),h.jsxs("div",{className:"flex items-center gap-3 self-start md:self-center",children:[h.jsx("button",{"aria-label":"Anterior",onClick:v,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:h.jsx(g8,{size:20})}),h.jsx("button",{"aria-label":"Siguiente",onClick:x,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:h.jsx(y8,{size:20})}),h.jsx("button",{ref:l,"aria-label":"Cerrar",onClick:w,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:h.jsx(ok,{size:18})})]})]}),h.jsx("div",{className:"relative aspect-[3/2] w-full bg-black",children:h.jsx("img",{src:C.imgSrc,alt:C.alt||"Recuerdo #GatoEncerrado",className:"h-full w-full object-contain"})})]})]},"gallery-modal")})]})]})},Nre=()=>{const[n,e]=S.useState(!1),[t,r]=S.useState(!1),s=S.useCallback(()=>{e(!0)},[]),i=S.useCallback(()=>{e(!1)},[]),a=S.useCallback(()=>{r(!0)},[]),o=S.useCallback(()=>{r(!1)},[]);return h.jsxs(h.Fragment,{children:[h.jsxs("section",{id:"next-show",className:"py-24 relative",children:[h.jsx("div",{className:"section-divider mb-24"}),h.jsx("div",{className:"container mx-auto px-6",children:h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12 text-center overflow-hidden",children:[h.jsxs("div",{className:"relative z-10",children:[h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-4 text-gradient italic",children:"Prxima Funcin"}),h.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[h.jsx($2,{size:24,className:"text-purple-300"}),h.jsx("span",{className:"font-display text-2xl md:text-3xl text-slate-100 font-semibold",children:"28 de Diciembre"})]}),h.jsx("p",{className:"text-lg text-slate-300/80 max-w-2xl mx-auto leading-relaxed mb-8 italic font-light",children:'"En el Da de los Santos Inocentes, te invitamos a dudar de todo, incluso de lo que crees ver en escena. Quizs la mayor inocentada es pensar que algo es real."'}),h.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[h.jsxs(we,{onClick:a,className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[h.jsx(I3,{size:20}),"Comprar boleto"]}),h.jsxs(we,{variant:"outline",onClick:s,className:"border-slate-100/30 text-slate-200 hover:bg-white/5 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[h.jsx(j3,{size:20}),"Apartar merch"]})]})]}),h.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-purple-900/20 rounded-full blur-3xl animate-pulse"}),h.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl animate-pulse animation-delay-2000"})]})})]}),h.jsx(AN,{open:n,onClose:i,initialInterest:"recordatorio"}),h.jsx(L4,{open:t,onClose:o})]})},Pre=()=>{const[n,e]=S.useState({name:"",email:"",message:""}),[t,r]=S.useState("idle"),[s,i]=S.useState(""),a="https://www.instagram.com/esungatoencerrado/?hl=en",o="https://x.com/SilvestreFilis",l="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",c=S.useCallback(async p=>{if(p.preventDefault(),t==="loading")return;const m=n.name.trim(),y=n.email.trim(),g=n.message.trim();if(!m||!y||!g){Fe({description:"Completa nombre, email y mensaje antes de enviar."});return}r("loading"),i("");try{const{error:w}=await wt.functions.invoke("send-contact-message",{body:{name:m,email:y.toLowerCase(),message:g}});if(w)throw w;try{const{error:v}=await wt.from("blog_contributions").insert({name:m,email:y.toLowerCase(),subject:"Contacto pblico",message:g,meta:{route:"contact"}});v&&console.error("[Contact] No se pudo duplicar en blog_contributions:",v)}catch(v){console.error("[Contact] Excepcin duplicando en blog_contributions:",v)}r("success"),e({name:"",email:"",message:""}),Fe({description:"Recibimos tu mensaje y te escribiremos pronto."})}catch(w){console.error("[Contact] Error enviando mensaje:",w),r("error"),i("No pudimos enviar tu mensaje. Intenta de nuevo ms tarde."),Fe({description:"No pudimos enviar tu mensaje. Intenta de nuevo."})}},[n,t]),d=()=>{Fe({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},f=p=>{p?window.open(p,"_blank","noopener,noreferrer"):Fe({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})};return h.jsxs("section",{id:"contact",className:"py-24 relative min-h-[880px]",children:[h.jsx("div",{className:"section-divider mb-24"}),h.jsxs("div",{className:"container mx-auto px-6",children:[h.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[h.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Contacto, Prensa & Crditos"}),h.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Para colaboraciones, entrevistas o simplemente para compartir tus teoras. Aqu cae el teln, pero la conversacin contina."})]}),h.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[h.jsxs(ne.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8",children:[h.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-8",children:"Envanos un Mensaje"}),h.jsxs("form",{onSubmit:c,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Nombre"}),h.jsx("input",{name:"name",type:"text",value:n.name,onChange:p=>e(m=>({...m,name:p.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Email"}),h.jsx("input",{name:"email",type:"email",value:n.email,onChange:p=>e(m=>({...m,email:p.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"tu@email.com"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Mensaje"}),h.jsx("textarea",{name:"message",rows:5,value:n.message,onChange:p=>e(m=>({...m,message:p.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Cuntanos ms..."})]}),t==="error"&&h.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:s}),t==="success"&&h.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu mensaje lleg. Te escribiremos a la brevedad."}),h.jsxs(we,{type:"submit",disabled:t==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:[h.jsx(M3,{size:20}),t==="loading"?"Enviando":"Enviar"]})]})]}),h.jsxs(ne.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"space-y-8",children:[h.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[h.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Redes Sociales"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(we,{onClick:()=>f(a),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:h.jsx(N3,{size:24})}),h.jsx(we,{onClick:()=>f(o),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:h.jsx(L3,{size:24})}),h.jsx(we,{onClick:()=>f(l),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:h.jsx(C3,{size:24})})]})]}),h.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[h.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Kit de Prensa"}),h.jsx("p",{className:"text-slate-300/70 mb-4 font-light",children:"Descarga nuestro kit de prensa con imgenes en alta resolucin, dossier y ms."}),h.jsxs(we,{onClick:d,variant:"outline",className:"border-purple-400/50 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400",children:[h.jsx(x8,{size:18,className:"mr-2"}),"Descargar Kit"]})]}),h.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[h.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Crditos Finales"}),h.jsxs("p",{className:"text-slate-300/70 text-sm leading-relaxed font-light",children:["Una produccin de ",h.jsx("span",{className:"text-slate-200",children:"#GatoEncerrado"}),".",h.jsx("br",{}),"Con el apoyo de ",h.jsx("span",{className:"text-slate-200",children:"Isabel Ayuda para la Vida, A.C."}),".",h.jsx("br",{}),"Agradecimientos especiales a todos los que creyeron en esta locura."]})]})]})]})]})]})},jre=()=>{const n="https://www.instagram.com/esungatoencerrado/?hl=en",e="https://x.com/SilvestreFilis",t="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",r=i=>{i?window.open(i,"_blank","noopener,noreferrer"):Fe({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},s=i=>{const a=document.querySelector(i);a&&a.scrollIntoView({behavior:"smooth"})};return h.jsxs("footer",{className:"relative py-16 mt-24 min-h-[560px]",children:[h.jsx("div",{className:"section-divider mb-16"}),h.jsxs("div",{className:"container mx-auto px-6",children:[h.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[h.jsx("div",{className:"md:col-span-2",children:h.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},children:[h.jsx("span",{className:"font-display text-3xl font-medium italic text-gradient mb-4 block",children:"#GatoEncerrado"}),h.jsx("p",{className:"text-slate-400 leading-relaxed mb-6 max-w-md font-light",children:"Una experiencia teatral transmedia que explora los lmites entre la realidad y la ficcin, creando nuevas formas de narrativa artstica."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>r(n),className:"text-slate-400 hover:text-white hover:bg-white/10",children:h.jsx(N3,{size:20})}),h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>r(e),className:"text-slate-400 hover:text-white hover:bg-white/10",children:h.jsx(L3,{size:20})}),h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>r(t),className:"text-slate-400 hover:text-white hover:bg-white/10",children:h.jsx(C3,{size:20})}),h.jsx(we,{variant:"ghost",size:"icon",onClick:()=>s("#contact"),className:"text-slate-400 hover:text-white hover:bg-white/10",children:h.jsx(w8,{size:20})})]})]})}),h.jsx("div",{children:h.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1,ease:"easeOut"},viewport:{once:!0},children:[h.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Navegacin"}),h.jsx("ul",{className:"space-y-3",children:[{name:"Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"},{name:"Textos",href:"#dialogo-critico"},{name:"Miniversos",href:"#transmedia"}].map(i=>h.jsx("li",{children:h.jsx("button",{onClick:()=>s(i.href),className:"text-slate-400 hover:text-white transition-colors text-sm font-light",children:i.name})},i.name))})]})}),h.jsx("div",{children:h.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:"easeOut"},viewport:{once:!0},children:[h.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Contacto"}),h.jsxs("ul",{className:"space-y-3 text-sm font-light",children:[h.jsx("li",{className:"text-slate-400",children:"contacto@gatoencerrado.ai"}),h.jsx("li",{className:"text-slate-400",children:"+52 123 456 789"}),h.jsxs("li",{className:"text-slate-400",children:["#Universotransmedia",h.jsx("br",{}),"Tijuana, Mxico"]})]})]})})]}),h.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[h.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," #GatoEncerrado. Todos los derechos reservados."]}),h.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[h.jsx("span",{children:"Hecho con"}),h.jsx(V2,{size:16,className:"text-red-500/70"}),h.jsx("span",{children:"para el arte teatral"})]})]})]})]})},Rre=()=>{const[n,e]=S.useState([]),[t,r]=S.useState(!0),[s,i]=S.useState(null),a=S.useCallback(async()=>{r(!0),i(null);try{const o=await yK();e(Array.isArray(o)?o:[])}catch(o){console.error("[useBlogPosts] Error al cargar posts:",o),i(o),e([])}finally{r(!1)}},[]);return S.useEffect(()=>{a()},[a]),{posts:n,isLoading:t,error:s,refreshPosts:a}},dh="email_28d",tb="gatoencerrado:email-login-bubble-seen",Mre="email_metrics",zT=async(n,e,t=null)=>{const r={event_name:n,source:e,metadata:t?{email_hash:t}:null},{error:s}=await wt.from(Mre).insert(r);s?console.error("[trackMetric] supabase error",{payload:r,error:s}):console.debug("[trackMetric] OK",r)},Ire=/^[\w.%+-]+@[\w.-]+\.[A-Za-z]{2,}$/,Lre=n=>{if(!n)return null;const e=n.trim().toLowerCase();return Ire.test(e)?e:null},Dre=async n=>{var r;if(typeof window>"u"||!((r=window.crypto)!=null&&r.subtle))return null;const e=new TextEncoder,t=await window.crypto.subtle.digest("SHA-256",e.encode(n));return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")},Ore=()=>{const{user:n}=Pd(),[e,t]=S.useState(!1),[r,s]=S.useState(null),i=S.useRef(!1),a=S.useCallback(()=>{typeof window<"u"&&window.localStorage.setItem(tb,"true"),t(!1)},[]);return S.useEffect(()=>{if(typeof window>"u")return;const o=window.location.search,c=new URLSearchParams(o).get("source"),d=window.localStorage.getItem(tb)==="true",f=!!n,p=!f&&c===dh&&!d;if(i.current||(console.debug("useEmailRedirect rawSearch",o),console.debug("useEmailRedirect source constant",dh),console.debug("useEmailRedirect parsed source",c),console.debug("useEmailRedirect hasSeen",d),console.debug("useEmailRedirect isAuthenticated",f),console.debug("useEmailRedirect shouldShowToast decision",p),i.current=!0),n)return;let m=!0;return(async()=>{const g=new URLSearchParams(window.location.search);if(g.get("source")!==dh)return;if(window.localStorage.getItem(tb)==="true"){g.delete("source"),g.delete("email");const E=g.toString(),N=`${window.location.pathname}${E?`?${E}`:""}${window.location.hash}`;window.history.replaceState({},document.title,N);return}const x=Lre(g.get("email")),b=x?await Dre(x):null;if(!m)return;s(b),t(!0),window.localStorage.setItem(tb,"true"),zT("email_redirect_impression",dh,b),g.delete("source"),g.delete("email");const C=g.toString(),_=`${window.location.pathname}${C?`?${C}`:""}${window.location.hash}`;m&&window.history.replaceState({},document.title,_)})(),()=>{m=!1}},[n]),{shouldShowToast:e,dismissToast:a,emailHash:r}},Fre=({emailHash:n,onLoginClick:e,onDismiss:t})=>{const r=()=>{zT("login_click",dh,n),typeof window<"u"&&window.dispatchEvent(new CustomEvent("open-login-modal")),e==null||e()},s=()=>{zT("dismiss_click",dh,n),t==null||t()};return h.jsxs("div",{role:"status",className:"fixed left-1/2 top-[72px] z-[999] w-[min(94%,360px)] -translate-x-1/2 rounded-[30px] border border-white/20 bg-gradient-to-r from-[#130022]/90 via-[#0c041c]/90 to-[#070312]/90 px-5 py-4 shadow-[0_20px_60px_rgba(0,0,0,0.7)] backdrop-blur-[22px] text-white md:left-auto md:right-6 md:top-6 md:w-[320px] md:-translate-x-0",children:[h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{className:"font-display text-sm font-semibold",children:"Sabemos que vienes desde tu correo."}),h.jsx("p",{className:"text-xs text-slate-300",children:"Quieres iniciar sesin aqu mismo?"})]}),h.jsxs("div",{className:"mt-3 flex flex-col gap-2 md:flex-row",children:[h.jsx("button",{type:"button",onClick:r,className:"flex-1 rounded-full bg-gradient-to-r from-purple-500 to-fuchsia-500 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-[#0c031c] shadow-[0_20px_40px_rgba(131,64,255,0.5)] transition hover:-translate-y-0.5",children:"Iniciar sesin"}),h.jsx("button",{type:"button",onClick:s,className:"flex-1 rounded-full border border-white/30 px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] text-white/80 transition hover:border-white/60",children:"Ms tarde"})]})]})},Bre="#GatoEncerrado - Obra de Teatro transmedia",zre="La historia de alguien que desaparece y deja una huella emocional. Una experiencia teatral nica que explora mltiples formatos transmediaes.";function $re(){const n=Rre(),{shouldShowToast:e,dismissToast:t,emailHash:r}=Ore();return S.useEffect(()=>{document.title=Bre;let s=document.querySelector('meta[name="description"]');s||(s=document.createElement("meta"),s.setAttribute("name","description"),document.head.appendChild(s)),s.setAttribute("content",zre)},[]),h.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[h.jsx(OX,{}),h.jsxs("main",{className:"pt-20 lg:pt-24",children:[h.jsx(YX,{}),h.jsx(tK,{}),h.jsx(Are,{}),h.jsx(Tre,{}),h.jsx(Ere,{}),h.jsx(Zne,{posts:n.posts,isLoading:n.isLoading,error:n.error}),h.jsx(jJ,{}),h.jsx(Nre,{}),h.jsx(Pre,{})]}),h.jsx(jre,{}),e&&h.jsx(Fre,{emailHash:r,onDismiss:t}),h.jsx(mH,{})]})}RE.createRoot(document.getElementById("root")).render(h.jsx(Le.StrictMode,{children:h.jsx(LX,{children:h.jsx($re,{})})}));

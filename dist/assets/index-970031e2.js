var UF=Object.defineProperty;var VF=(n,e,t)=>e in n?UF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var G=(n,e,t)=>(VF(n,typeof e!="symbol"?e+"":e,t),t),B1=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var c=(n,e,t)=>(B1(n,e,"read from private field"),t?t.call(n):e.get(n)),w=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},x=(n,e,t,s)=>(B1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);var kt=(n,e,t,s)=>({set _(r){x(n,e,r,t)},get _(){return c(n,e,s)}}),E=(n,e,t)=>(B1(n,e,"access private method"),t);function $2(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function el(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var U2={exports:{}},Wx={},V2={exports:{}},ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv=Symbol.for("react.element"),HF=Symbol.for("react.portal"),GF=Symbol.for("react.fragment"),WF=Symbol.for("react.strict_mode"),qF=Symbol.for("react.profiler"),KF=Symbol.for("react.provider"),XF=Symbol.for("react.context"),YF=Symbol.for("react.forward_ref"),QF=Symbol.for("react.suspense"),JF=Symbol.for("react.memo"),ZF=Symbol.for("react.lazy"),ik=Symbol.iterator;function eB(n){return n===null||typeof n!="object"?null:(n=ik&&n[ik]||n["@@iterator"],typeof n=="function"?n:null)}var z2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H2=Object.assign,G2={};function Tf(n,e,t){this.props=n,this.context=e,this.refs=G2,this.updater=t||z2}Tf.prototype.isReactComponent={};Tf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Tf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function W2(){}W2.prototype=Tf.prototype;function XE(n,e,t){this.props=n,this.context=e,this.refs=G2,this.updater=t||z2}var YE=XE.prototype=new W2;YE.constructor=XE;H2(YE,Tf.prototype);YE.isPureReactComponent=!0;var ok=Array.isArray,q2=Object.prototype.hasOwnProperty,QE={current:null},K2={key:!0,ref:!0,__self:!0,__source:!0};function X2(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)q2.call(e,s)&&!K2.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:tv,type:n,key:i,ref:o,props:r,_owner:QE.current}}function tB(n,e){return{$$typeof:tv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function JE(n){return typeof n=="object"&&n!==null&&n.$$typeof===tv}function nB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ak=/\/+/g;function $1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?nB(""+n.key):e.toString(36)}function d0(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case tv:case HF:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+$1(o,0):s,ok(r)?(t="",n!=null&&(t=n.replace(ak,"$&/")+"/"),d0(r,e,t,"",function(u){return u})):r!=null&&(JE(r)&&(r=tB(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ak,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",ok(n))for(var a=0;a<n.length;a++){i=n[a];var l=s+$1(i,a);o+=d0(i,e,t,l,r)}else if(l=eB(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=s+$1(i,a++),o+=d0(i,e,t,l,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Av(n,e,t){if(n==null)return n;var s=[],r=0;return d0(n,s,"","",function(i){return e.call(t,i,r++)}),s}function sB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Mn={current:null},h0={transition:null},rB={ReactCurrentDispatcher:Mn,ReactCurrentBatchConfig:h0,ReactCurrentOwner:QE};function Y2(){throw Error("act(...) is not supported in production builds of React.")}ge.Children={map:Av,forEach:function(n,e,t){Av(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Av(n,function(){e++}),e},toArray:function(n){return Av(n,function(e){return e})||[]},only:function(n){if(!JE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ge.Component=Tf;ge.Fragment=GF;ge.Profiler=qF;ge.PureComponent=XE;ge.StrictMode=WF;ge.Suspense=QF;ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rB;ge.act=Y2;ge.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=H2({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=QE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)q2.call(e,l)&&!K2.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:tv,type:n.type,key:r,ref:i,props:s,_owner:o}};ge.createContext=function(n){return n={$$typeof:XF,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:KF,_context:n},n.Consumer=n};ge.createElement=X2;ge.createFactory=function(n){var e=X2.bind(null,n);return e.type=n,e};ge.createRef=function(){return{current:null}};ge.forwardRef=function(n){return{$$typeof:YF,render:n}};ge.isValidElement=JE;ge.lazy=function(n){return{$$typeof:ZF,_payload:{_status:-1,_result:n},_init:sB}};ge.memo=function(n,e){return{$$typeof:JF,type:n,compare:e===void 0?null:e}};ge.startTransition=function(n){var e=h0.transition;h0.transition={};try{n()}finally{h0.transition=e}};ge.unstable_act=Y2;ge.useCallback=function(n,e){return Mn.current.useCallback(n,e)};ge.useContext=function(n){return Mn.current.useContext(n)};ge.useDebugValue=function(){};ge.useDeferredValue=function(n){return Mn.current.useDeferredValue(n)};ge.useEffect=function(n,e){return Mn.current.useEffect(n,e)};ge.useId=function(){return Mn.current.useId()};ge.useImperativeHandle=function(n,e,t){return Mn.current.useImperativeHandle(n,e,t)};ge.useInsertionEffect=function(n,e){return Mn.current.useInsertionEffect(n,e)};ge.useLayoutEffect=function(n,e){return Mn.current.useLayoutEffect(n,e)};ge.useMemo=function(n,e){return Mn.current.useMemo(n,e)};ge.useReducer=function(n,e,t){return Mn.current.useReducer(n,e,t)};ge.useRef=function(n){return Mn.current.useRef(n)};ge.useState=function(n){return Mn.current.useState(n)};ge.useSyncExternalStore=function(n,e,t){return Mn.current.useSyncExternalStore(n,e,t)};ge.useTransition=function(){return Mn.current.useTransition()};ge.version="18.3.1";V2.exports=ge;var C=V2.exports;const he=el(C),Q2=$2({__proto__:null,default:he},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iB=C,oB=Symbol.for("react.element"),aB=Symbol.for("react.fragment"),lB=Object.prototype.hasOwnProperty,cB=iB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uB={key:!0,ref:!0,__self:!0,__source:!0};function J2(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)lB.call(e,s)&&!uB.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:oB,type:n,key:i,ref:o,props:r,_owner:cB.current}}Wx.Fragment=aB;Wx.jsx=J2;Wx.jsxs=J2;U2.exports=Wx;var m=U2.exports,KA={},Z2={exports:{}},Ts={},eN={exports:{}},tN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,$){var U=F.length;F.push($);e:for(;0<U;){var q=U-1>>>1,K=F[q];if(0<r(K,$))F[q]=$,F[U]=K,U=q;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var $=F[0],U=F.pop();if(U!==$){F[0]=U;e:for(var q=0,K=F.length,z=K>>>1;q<z;){var X=2*(q+1)-1,pe=F[X],Ce=X+1,me=F[Ce];if(0>r(pe,U))Ce<K&&0>r(me,pe)?(F[q]=me,F[Ce]=U,q=Ce):(F[q]=pe,F[X]=U,q=X);else if(Ce<K&&0>r(me,U))F[q]=me,F[Ce]=U,q=Ce;else break e}}return $}function r(F,$){var U=F.sortIndex-$.sortIndex;return U!==0?U:F.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,f=3,p=!1,y=!1,g=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(F){for(var $=t(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=F)s(u),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(u)}}function _(F){if(g=!1,A(F),!y)if(t(l)!==null)y=!0,M(T);else{var $=t(u);$!==null&&B(_,$.startTime-F)}}function T(F,$){y=!1,g&&(g=!1,v(R),R=-1),p=!0;var U=f;try{for(A($),h=t(l);h!==null&&(!(h.expirationTime>$)||F&&!O());){var q=h.callback;if(typeof q=="function"){h.callback=null,f=h.priorityLevel;var K=q(h.expirationTime<=$);$=n.unstable_now(),typeof K=="function"?h.callback=K:h===t(l)&&s(l),A($)}else s(l);h=t(l)}if(h!==null)var z=!0;else{var X=t(u);X!==null&&B(_,X.startTime-$),z=!1}return z}finally{h=null,f=U,p=!1}}var k=!1,P=null,R=-1,L=5,I=-1;function O(){return!(n.unstable_now()-I<L)}function D(){if(P!==null){var F=n.unstable_now();I=F;var $=!0;try{$=P(!0,F)}finally{$?V():(k=!1,P=null)}}else k=!1}var V;if(typeof b=="function")V=function(){b(D)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,N=j.port2;j.port1.onmessage=D,V=function(){N.postMessage(null)}}else V=function(){S(D,0)};function M(F){P=F,k||(k=!0,V())}function B(F,$){R=S(function(){F(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){y||p||(y=!0,M(T))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var U=f;f=$;try{return F()}finally{f=U}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,$){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var U=f;f=F;try{return $()}finally{f=U}},n.unstable_scheduleCallback=function(F,$,U){var q=n.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?q+U:q):U=q,F){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=U+K,F={id:d++,callback:$,priorityLevel:F,startTime:U,expirationTime:K,sortIndex:-1},U>q?(F.sortIndex=U,e(u,F),t(l)===null&&F===t(u)&&(g?(v(R),R=-1):g=!0,B(_,U-q))):(F.sortIndex=K,e(l,F),y||p||(y=!0,M(T))),F},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(F){var $=f;return function(){var U=f;f=$;try{return F.apply(this,arguments)}finally{f=U}}}})(tN);eN.exports=tN;var dB=eN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hB=C,_s=dB;function W(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nN=new Set,Xp={};function fu(n,e){pf(n,e),pf(n+"Capture",e)}function pf(n,e){for(Xp[n]=e,n=0;n<e.length;n++)nN.add(e[n])}var fo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),XA=Object.prototype.hasOwnProperty,fB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,lk={},ck={};function pB(n){return XA.call(ck,n)?!0:XA.call(lk,n)?!1:fB.test(n)?ck[n]=!0:(lk[n]=!0,!1)}function mB(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function gB(n,e,t,s){if(e===null||typeof e>"u"||mB(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ln(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){rn[n]=new Ln(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];rn[e]=new Ln(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){rn[n]=new Ln(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){rn[n]=new Ln(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){rn[n]=new Ln(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){rn[n]=new Ln(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){rn[n]=new Ln(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){rn[n]=new Ln(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){rn[n]=new Ln(n,5,!1,n.toLowerCase(),null,!1,!1)});var ZE=/[\-:]([a-z])/g;function eC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(ZE,eC);rn[e]=new Ln(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(ZE,eC);rn[e]=new Ln(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(ZE,eC);rn[e]=new Ln(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){rn[n]=new Ln(n,1,!1,n.toLowerCase(),null,!1,!1)});rn.xlinkHref=new Ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){rn[n]=new Ln(n,1,!1,n.toLowerCase(),null,!0,!0)});function tC(n,e,t,s){var r=rn.hasOwnProperty(e)?rn[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gB(e,t,r,s)&&(t=null),s||r===null?pB(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var xo=hB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sv=Symbol.for("react.element"),Ou=Symbol.for("react.portal"),Fu=Symbol.for("react.fragment"),nC=Symbol.for("react.strict_mode"),YA=Symbol.for("react.profiler"),sN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),sC=Symbol.for("react.forward_ref"),QA=Symbol.for("react.suspense"),JA=Symbol.for("react.suspense_list"),rC=Symbol.for("react.memo"),Ro=Symbol.for("react.lazy"),iN=Symbol.for("react.offscreen"),uk=Symbol.iterator;function If(n){return n===null||typeof n!="object"?null:(n=uk&&n[uk]||n["@@iterator"],typeof n=="function"?n:null)}var ut=Object.assign,U1;function sp(n){if(U1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);U1=e&&e[1]||""}return`
`+U1+n}var V1=!1;function z1(n,e){if(!n||V1)return"";V1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{V1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?sp(n):""}function yB(n){switch(n.tag){case 5:return sp(n.type);case 16:return sp("Lazy");case 13:return sp("Suspense");case 19:return sp("SuspenseList");case 0:case 2:case 15:return n=z1(n.type,!1),n;case 11:return n=z1(n.type.render,!1),n;case 1:return n=z1(n.type,!0),n;default:return""}}function ZA(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Fu:return"Fragment";case Ou:return"Portal";case YA:return"Profiler";case nC:return"StrictMode";case QA:return"Suspense";case JA:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case rN:return(n.displayName||"Context")+".Consumer";case sN:return(n._context.displayName||"Context")+".Provider";case sC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case rC:return e=n.displayName||null,e!==null?e:ZA(n.type)||"Memo";case Ro:e=n._payload,n=n._init;try{return ZA(n(e))}catch{}}return null}function vB(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ZA(e);case 8:return e===nC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function oN(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bB(n){var e=oN(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _v(n){n._valueTracker||(n._valueTracker=bB(n))}function aN(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=oN(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function lb(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function eS(n,e){var t=e.checked;return ut({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function dk(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=qa(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lN(n,e){e=e.checked,e!=null&&tC(n,"checked",e,!1)}function tS(n,e){lN(n,e);var t=qa(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?nS(n,e.type,t):e.hasOwnProperty("defaultValue")&&nS(n,e.type,qa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function hk(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function nS(n,e,t){(e!=="number"||lb(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var rp=Array.isArray;function rd(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+qa(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function sS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ut({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function fk(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(W(92));if(rp(t)){if(1<t.length)throw Error(W(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:qa(t)}}function cN(n,e){var t=qa(e.value),s=qa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function pk(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function uN(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?uN(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ev,dN=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ev=Ev||document.createElement("div"),Ev.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ev.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Yp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Np={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wB=["Webkit","ms","Moz","O"];Object.keys(Np).forEach(function(n){wB.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Np[e]=Np[n]})});function hN(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Np.hasOwnProperty(n)&&Np[n]?(""+e).trim():e+"px"}function fN(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=hN(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var xB=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iS(n,e){if(e){if(xB[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function oS(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aS=null;function iC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var lS=null,id=null,od=null;function mk(n){if(n=rv(n)){if(typeof lS!="function")throw Error(W(280));var e=n.stateNode;e&&(e=Qx(e),lS(n.stateNode,n.type,e))}}function pN(n){id?od?od.push(n):od=[n]:id=n}function mN(){if(id){var n=id,e=od;if(od=id=null,mk(n),e)for(n=0;n<e.length;n++)mk(e[n])}}function gN(n,e){return n(e)}function yN(){}var H1=!1;function vN(n,e,t){if(H1)return n(e,t);H1=!0;try{return gN(n,e,t)}finally{H1=!1,(id!==null||od!==null)&&(yN(),mN())}}function Qp(n,e){var t=n.stateNode;if(t===null)return null;var s=Qx(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(W(231,e,typeof t));return t}var cS=!1;if(fo)try{var jf={};Object.defineProperty(jf,"passive",{get:function(){cS=!0}}),window.addEventListener("test",jf,jf),window.removeEventListener("test",jf,jf)}catch{cS=!1}function AB(n,e,t,s,r,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Mp=!1,cb=null,ub=!1,uS=null,SB={onError:function(n){Mp=!0,cb=n}};function _B(n,e,t,s,r,i,o,a,l){Mp=!1,cb=null,AB.apply(SB,arguments)}function EB(n,e,t,s,r,i,o,a,l){if(_B.apply(this,arguments),Mp){if(Mp){var u=cb;Mp=!1,cb=null}else throw Error(W(198));ub||(ub=!0,uS=u)}}function pu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function bN(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function gk(n){if(pu(n)!==n)throw Error(W(188))}function CB(n){var e=n.alternate;if(!e){if(e=pu(n),e===null)throw Error(W(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return gk(r),n;if(i===s)return gk(r),e;i=i.sibling}throw Error(W(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error(W(189))}}if(t.alternate!==s)throw Error(W(190))}if(t.tag!==3)throw Error(W(188));return t.stateNode.current===t?n:e}function wN(n){return n=CB(n),n!==null?xN(n):null}function xN(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=xN(n);if(e!==null)return e;n=n.sibling}return null}var AN=_s.unstable_scheduleCallback,yk=_s.unstable_cancelCallback,TB=_s.unstable_shouldYield,kB=_s.unstable_requestPaint,xt=_s.unstable_now,PB=_s.unstable_getCurrentPriorityLevel,oC=_s.unstable_ImmediatePriority,SN=_s.unstable_UserBlockingPriority,db=_s.unstable_NormalPriority,RB=_s.unstable_LowPriority,_N=_s.unstable_IdlePriority,qx=null,ii=null;function NB(n){if(ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(qx,n,void 0,(n.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:DB,MB=Math.log,LB=Math.LN2;function DB(n){return n>>>=0,n===0?32:31-(MB(n)/LB|0)|0}var Cv=64,Tv=4194304;function ip(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function hb(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=ip(a):(i&=o,i!==0&&(s=ip(i)))}else o=t&~r,o!==0?s=ip(o):i!==0&&(s=ip(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-Ar(e),r=1<<t,s|=n[t],e&=~r;return s}function IB(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jB(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-Ar(i),a=1<<o,l=r[o];l===-1?(!(a&t)||a&s)&&(r[o]=IB(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function dS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function EN(){var n=Cv;return Cv<<=1,!(Cv&4194240)&&(Cv=64),n}function G1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function nv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ar(e),n[e]=t}function OB(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Ar(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function aC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-Ar(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Re=0;function CN(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var TN,lC,kN,PN,RN,hS=!1,kv=[],Oa=null,Fa=null,Ba=null,Jp=new Map,Zp=new Map,Lo=[],FB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vk(n,e){switch(n){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Fa=null;break;case"mouseover":case"mouseout":Ba=null;break;case"pointerover":case"pointerout":Jp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zp.delete(e.pointerId)}}function Of(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=rv(e),e!==null&&lC(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function BB(n,e,t,s,r){switch(e){case"focusin":return Oa=Of(Oa,n,e,t,s,r),!0;case"dragenter":return Fa=Of(Fa,n,e,t,s,r),!0;case"mouseover":return Ba=Of(Ba,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return Jp.set(i,Of(Jp.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Zp.set(i,Of(Zp.get(i)||null,n,e,t,s,r)),!0}return!1}function NN(n){var e=Al(n.target);if(e!==null){var t=pu(e);if(t!==null){if(e=t.tag,e===13){if(e=bN(t),e!==null){n.blockedOn=e,RN(n.priority,function(){kN(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function f0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=fS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);aS=s,t.target.dispatchEvent(s),aS=null}else return e=rv(t),e!==null&&lC(e),n.blockedOn=t,!1;e.shift()}return!0}function bk(n,e,t){f0(n)&&t.delete(e)}function $B(){hS=!1,Oa!==null&&f0(Oa)&&(Oa=null),Fa!==null&&f0(Fa)&&(Fa=null),Ba!==null&&f0(Ba)&&(Ba=null),Jp.forEach(bk),Zp.forEach(bk)}function Ff(n,e){n.blockedOn===e&&(n.blockedOn=null,hS||(hS=!0,_s.unstable_scheduleCallback(_s.unstable_NormalPriority,$B)))}function em(n){function e(r){return Ff(r,n)}if(0<kv.length){Ff(kv[0],n);for(var t=1;t<kv.length;t++){var s=kv[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Oa!==null&&Ff(Oa,n),Fa!==null&&Ff(Fa,n),Ba!==null&&Ff(Ba,n),Jp.forEach(e),Zp.forEach(e),t=0;t<Lo.length;t++)s=Lo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Lo.length&&(t=Lo[0],t.blockedOn===null);)NN(t),t.blockedOn===null&&Lo.shift()}var ad=xo.ReactCurrentBatchConfig,fb=!0;function UB(n,e,t,s){var r=Re,i=ad.transition;ad.transition=null;try{Re=1,cC(n,e,t,s)}finally{Re=r,ad.transition=i}}function VB(n,e,t,s){var r=Re,i=ad.transition;ad.transition=null;try{Re=4,cC(n,e,t,s)}finally{Re=r,ad.transition=i}}function cC(n,e,t,s){if(fb){var r=fS(n,e,t,s);if(r===null)tA(n,e,s,pb,t),vk(n,s);else if(BB(r,n,e,t,s))s.stopPropagation();else if(vk(n,s),e&4&&-1<FB.indexOf(n)){for(;r!==null;){var i=rv(r);if(i!==null&&TN(i),i=fS(n,e,t,s),i===null&&tA(n,e,s,pb,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else tA(n,e,s,null,t)}}var pb=null;function fS(n,e,t,s){if(pb=null,n=iC(s),n=Al(n),n!==null)if(e=pu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=bN(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return pb=n,null}function MN(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PB()){case oC:return 1;case SN:return 4;case db:case RB:return 16;case _N:return 536870912;default:return 16}default:return 16}}var Ia=null,uC=null,p0=null;function LN(){if(p0)return p0;var n,e=uC,t=e.length,s,r="value"in Ia?Ia.value:Ia.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return p0=r.slice(n,1<s?1-s:void 0)}function m0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Pv(){return!0}function wk(){return!1}function ks(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pv:wk,this.isPropagationStopped=wk,this}return ut(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Pv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Pv)},persist:function(){},isPersistent:Pv}),e}var kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dC=ks(kf),sv=ut({},kf,{view:0,detail:0}),zB=ks(sv),W1,q1,Bf,Kx=ut({},sv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Bf&&(Bf&&n.type==="mousemove"?(W1=n.screenX-Bf.screenX,q1=n.screenY-Bf.screenY):q1=W1=0,Bf=n),W1)},movementY:function(n){return"movementY"in n?n.movementY:q1}}),xk=ks(Kx),HB=ut({},Kx,{dataTransfer:0}),GB=ks(HB),WB=ut({},sv,{relatedTarget:0}),K1=ks(WB),qB=ut({},kf,{animationName:0,elapsedTime:0,pseudoElement:0}),KB=ks(qB),XB=ut({},kf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YB=ks(XB),QB=ut({},kf,{data:0}),Ak=ks(QB),JB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t3(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=e3[n])?!!e[n]:!1}function hC(){return t3}var n3=ut({},sv,{key:function(n){if(n.key){var e=JB[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=m0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ZB[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hC,charCode:function(n){return n.type==="keypress"?m0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?m0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),s3=ks(n3),r3=ut({},Kx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sk=ks(r3),i3=ut({},sv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hC}),o3=ks(i3),a3=ut({},kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),l3=ks(a3),c3=ut({},Kx,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),u3=ks(c3),d3=[9,13,27,32],fC=fo&&"CompositionEvent"in window,Lp=null;fo&&"documentMode"in document&&(Lp=document.documentMode);var h3=fo&&"TextEvent"in window&&!Lp,DN=fo&&(!fC||Lp&&8<Lp&&11>=Lp),_k=String.fromCharCode(32),Ek=!1;function IN(n,e){switch(n){case"keyup":return d3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jN(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Bu=!1;function f3(n,e){switch(n){case"compositionend":return jN(e);case"keypress":return e.which!==32?null:(Ek=!0,_k);case"textInput":return n=e.data,n===_k&&Ek?null:n;default:return null}}function p3(n,e){if(Bu)return n==="compositionend"||!fC&&IN(n,e)?(n=LN(),p0=uC=Ia=null,Bu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DN&&e.locale!=="ko"?null:e.data;default:return null}}var m3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ck(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!m3[n.type]:e==="textarea"}function ON(n,e,t,s){pN(s),e=mb(e,"onChange"),0<e.length&&(t=new dC("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Dp=null,tm=null;function g3(n){KN(n,0)}function Xx(n){var e=Vu(n);if(aN(e))return n}function y3(n,e){if(n==="change")return e}var FN=!1;if(fo){var X1;if(fo){var Y1="oninput"in document;if(!Y1){var Tk=document.createElement("div");Tk.setAttribute("oninput","return;"),Y1=typeof Tk.oninput=="function"}X1=Y1}else X1=!1;FN=X1&&(!document.documentMode||9<document.documentMode)}function kk(){Dp&&(Dp.detachEvent("onpropertychange",BN),tm=Dp=null)}function BN(n){if(n.propertyName==="value"&&Xx(tm)){var e=[];ON(e,tm,n,iC(n)),vN(g3,e)}}function v3(n,e,t){n==="focusin"?(kk(),Dp=e,tm=t,Dp.attachEvent("onpropertychange",BN)):n==="focusout"&&kk()}function b3(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Xx(tm)}function w3(n,e){if(n==="click")return Xx(e)}function x3(n,e){if(n==="input"||n==="change")return Xx(e)}function A3(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var _r=typeof Object.is=="function"?Object.is:A3;function nm(n,e){if(_r(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!XA.call(e,r)||!_r(n[r],e[r]))return!1}return!0}function Pk(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Rk(n,e){var t=Pk(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Pk(t)}}function $N(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?$N(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function UN(){for(var n=window,e=lb();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=lb(n.document)}return e}function pC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function S3(n){var e=UN(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&$N(t.ownerDocument.documentElement,t)){if(s!==null&&pC(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=Rk(t,i);var o=Rk(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _3=fo&&"documentMode"in document&&11>=document.documentMode,$u=null,pS=null,Ip=null,mS=!1;function Nk(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;mS||$u==null||$u!==lb(s)||(s=$u,"selectionStart"in s&&pC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ip&&nm(Ip,s)||(Ip=s,s=mb(pS,"onSelect"),0<s.length&&(e=new dC("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=$u)))}function Rv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Uu={animationend:Rv("Animation","AnimationEnd"),animationiteration:Rv("Animation","AnimationIteration"),animationstart:Rv("Animation","AnimationStart"),transitionend:Rv("Transition","TransitionEnd")},Q1={},VN={};fo&&(VN=document.createElement("div").style,"AnimationEvent"in window||(delete Uu.animationend.animation,delete Uu.animationiteration.animation,delete Uu.animationstart.animation),"TransitionEvent"in window||delete Uu.transitionend.transition);function Yx(n){if(Q1[n])return Q1[n];if(!Uu[n])return n;var e=Uu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in VN)return Q1[n]=e[t];return n}var zN=Yx("animationend"),HN=Yx("animationiteration"),GN=Yx("animationstart"),WN=Yx("transitionend"),qN=new Map,Mk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tl(n,e){qN.set(n,e),fu(e,[n])}for(var J1=0;J1<Mk.length;J1++){var Z1=Mk[J1],E3=Z1.toLowerCase(),C3=Z1[0].toUpperCase()+Z1.slice(1);tl(E3,"on"+C3)}tl(zN,"onAnimationEnd");tl(HN,"onAnimationIteration");tl(GN,"onAnimationStart");tl("dblclick","onDoubleClick");tl("focusin","onFocus");tl("focusout","onBlur");tl(WN,"onTransitionEnd");pf("onMouseEnter",["mouseout","mouseover"]);pf("onMouseLeave",["mouseout","mouseover"]);pf("onPointerEnter",["pointerout","pointerover"]);pf("onPointerLeave",["pointerout","pointerover"]);fu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fu("onBeforeInput",["compositionend","keypress","textInput","paste"]);fu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var op="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T3=new Set("cancel close invalid load scroll toggle".split(" ").concat(op));function Lk(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,EB(s,e,void 0,n),n.currentTarget=null}function KN(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&r.isPropagationStopped())break e;Lk(r,a,u),i=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&r.isPropagationStopped())break e;Lk(r,a,u),i=l}}}if(ub)throw n=uS,ub=!1,uS=null,n}function We(n,e){var t=e[wS];t===void 0&&(t=e[wS]=new Set);var s=n+"__bubble";t.has(s)||(XN(e,n,2,!1),t.add(s))}function eA(n,e,t){var s=0;e&&(s|=4),XN(t,n,s,e)}var Nv="_reactListening"+Math.random().toString(36).slice(2);function sm(n){if(!n[Nv]){n[Nv]=!0,nN.forEach(function(t){t!=="selectionchange"&&(T3.has(t)||eA(t,!1,n),eA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Nv]||(e[Nv]=!0,eA("selectionchange",!1,e))}}function XN(n,e,t,s){switch(MN(e)){case 1:var r=UB;break;case 4:r=VB;break;default:r=cC}t=r.bind(null,e,t,n),r=void 0,!cS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function tA(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Al(a),o===null)return;if(l=o.tag,l===5||l===6){s=i=o;continue e}a=a.parentNode}}s=s.return}vN(function(){var u=i,d=iC(t),h=[];e:{var f=qN.get(n);if(f!==void 0){var p=dC,y=n;switch(n){case"keypress":if(m0(t)===0)break e;case"keydown":case"keyup":p=s3;break;case"focusin":y="focus",p=K1;break;case"focusout":y="blur",p=K1;break;case"beforeblur":case"afterblur":p=K1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=xk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=GB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=o3;break;case zN:case HN:case GN:p=KB;break;case WN:p=l3;break;case"scroll":p=zB;break;case"wheel":p=u3;break;case"copy":case"cut":case"paste":p=YB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Sk}var g=(e&4)!==0,S=!g&&n==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,A;b!==null;){A=b;var _=A.stateNode;if(A.tag===5&&_!==null&&(A=_,v!==null&&(_=Qp(b,v),_!=null&&g.push(rm(b,_,A)))),S)break;b=b.return}0<g.length&&(f=new p(f,y,null,t,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",f&&t!==aS&&(y=t.relatedTarget||t.fromElement)&&(Al(y)||y[po]))break e;if((p||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=t.relatedTarget||t.toElement,p=u,y=y?Al(y):null,y!==null&&(S=pu(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=u),p!==y)){if(g=xk,_="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(g=Sk,_="onPointerLeave",v="onPointerEnter",b="pointer"),S=p==null?f:Vu(p),A=y==null?f:Vu(y),f=new g(_,b+"leave",p,t,d),f.target=S,f.relatedTarget=A,_=null,Al(d)===u&&(g=new g(v,b+"enter",y,t,d),g.target=A,g.relatedTarget=S,_=g),S=_,p&&y)t:{for(g=p,v=y,b=0,A=g;A;A=Su(A))b++;for(A=0,_=v;_;_=Su(_))A++;for(;0<b-A;)g=Su(g),b--;for(;0<A-b;)v=Su(v),A--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Su(g),v=Su(v)}g=null}else g=null;p!==null&&Dk(h,f,p,g,!1),y!==null&&S!==null&&Dk(h,S,y,g,!0)}}e:{if(f=u?Vu(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=y3;else if(Ck(f))if(FN)T=x3;else{T=b3;var k=v3}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=w3);if(T&&(T=T(n,u))){ON(h,T,t,d);break e}k&&k(n,f,u),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&nS(f,"number",f.value)}switch(k=u?Vu(u):window,n){case"focusin":(Ck(k)||k.contentEditable==="true")&&($u=k,pS=u,Ip=null);break;case"focusout":Ip=pS=$u=null;break;case"mousedown":mS=!0;break;case"contextmenu":case"mouseup":case"dragend":mS=!1,Nk(h,t,d);break;case"selectionchange":if(_3)break;case"keydown":case"keyup":Nk(h,t,d)}var P;if(fC)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Bu?IN(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(DN&&t.locale!=="ko"&&(Bu||R!=="onCompositionStart"?R==="onCompositionEnd"&&Bu&&(P=LN()):(Ia=d,uC="value"in Ia?Ia.value:Ia.textContent,Bu=!0)),k=mb(u,R),0<k.length&&(R=new Ak(R,n,null,t,d),h.push({event:R,listeners:k}),P?R.data=P:(P=jN(t),P!==null&&(R.data=P)))),(P=h3?f3(n,t):p3(n,t))&&(u=mb(u,"onBeforeInput"),0<u.length&&(d=new Ak("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=P))}KN(h,e)})}function rm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function mb(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Qp(n,t),i!=null&&s.unshift(rm(n,i,r)),i=Qp(n,e),i!=null&&s.push(rm(n,i,r))),n=n.return}return s}function Su(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Dk(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,r?(l=Qp(t,i),l!=null&&o.unshift(rm(t,l,a))):r||(l=Qp(t,i),l!=null&&o.push(rm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var k3=/\r\n?/g,P3=/\u0000|\uFFFD/g;function Ik(n){return(typeof n=="string"?n:""+n).replace(k3,`
`).replace(P3,"")}function Mv(n,e,t){if(e=Ik(e),Ik(n)!==e&&t)throw Error(W(425))}function gb(){}var gS=null,yS=null;function vS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bS=typeof setTimeout=="function"?setTimeout:void 0,R3=typeof clearTimeout=="function"?clearTimeout:void 0,jk=typeof Promise=="function"?Promise:void 0,N3=typeof queueMicrotask=="function"?queueMicrotask:typeof jk<"u"?function(n){return jk.resolve(null).then(n).catch(M3)}:bS;function M3(n){setTimeout(function(){throw n})}function nA(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),em(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);em(e)}function $a(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Ok(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Pf=Math.random().toString(36).slice(2),si="__reactFiber$"+Pf,im="__reactProps$"+Pf,po="__reactContainer$"+Pf,wS="__reactEvents$"+Pf,L3="__reactListeners$"+Pf,D3="__reactHandles$"+Pf;function Al(n){var e=n[si];if(e)return e;for(var t=n.parentNode;t;){if(e=t[po]||t[si]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Ok(n);n!==null;){if(t=n[si])return t;n=Ok(n)}return e}n=t,t=n.parentNode}return null}function rv(n){return n=n[si]||n[po],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Vu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(W(33))}function Qx(n){return n[im]||null}var xS=[],zu=-1;function nl(n){return{current:n}}function qe(n){0>zu||(n.current=xS[zu],xS[zu]=null,zu--)}function Ve(n,e){zu++,xS[zu]=n.current,n.current=e}var Ka={},wn=nl(Ka),Yn=nl(!1),ru=Ka;function mf(n,e){var t=n.type.contextTypes;if(!t)return Ka;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Qn(n){return n=n.childContextTypes,n!=null}function yb(){qe(Yn),qe(wn)}function Fk(n,e,t){if(wn.current!==Ka)throw Error(W(168));Ve(wn,e),Ve(Yn,t)}function YN(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(W(108,vB(n)||"Unknown",r));return ut({},t,s)}function vb(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ka,ru=wn.current,Ve(wn,n),Ve(Yn,Yn.current),!0}function Bk(n,e,t){var s=n.stateNode;if(!s)throw Error(W(169));t?(n=YN(n,e,ru),s.__reactInternalMemoizedMergedChildContext=n,qe(Yn),qe(wn),Ve(wn,n)):qe(Yn),Ve(Yn,t)}var xi=null,Jx=!1,sA=!1;function QN(n){xi===null?xi=[n]:xi.push(n)}function I3(n){Jx=!0,QN(n)}function sl(){if(!sA&&xi!==null){sA=!0;var n=0,e=Re;try{var t=xi;for(Re=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}xi=null,Jx=!1}catch(r){throw xi!==null&&(xi=xi.slice(n+1)),AN(oC,sl),r}finally{Re=e,sA=!1}}return null}var Hu=[],Gu=0,bb=null,wb=0,Ws=[],qs=0,iu=null,io=1,oo="";function cl(n,e){Hu[Gu++]=wb,Hu[Gu++]=bb,bb=n,wb=e}function JN(n,e,t){Ws[qs++]=io,Ws[qs++]=oo,Ws[qs++]=iu,iu=n;var s=io;n=oo;var r=32-Ar(s)-1;s&=~(1<<r),t+=1;var i=32-Ar(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,io=1<<32-Ar(e)+r|t<<r|s,oo=i+n}else io=1<<i|t<<r|s,oo=n}function mC(n){n.return!==null&&(cl(n,1),JN(n,1,0))}function gC(n){for(;n===bb;)bb=Hu[--Gu],Hu[Gu]=null,wb=Hu[--Gu],Hu[Gu]=null;for(;n===iu;)iu=Ws[--qs],Ws[qs]=null,oo=Ws[--qs],Ws[qs]=null,io=Ws[--qs],Ws[qs]=null}var Ss=null,As=null,tt=!1,wr=null;function ZN(n,e){var t=Xs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function $k(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ss=n,As=$a(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ss=n,As=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=iu!==null?{id:io,overflow:oo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Xs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ss=n,As=null,!0):!1;default:return!1}}function AS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function SS(n){if(tt){var e=As;if(e){var t=e;if(!$k(n,e)){if(AS(n))throw Error(W(418));e=$a(t.nextSibling);var s=Ss;e&&$k(n,e)?ZN(s,t):(n.flags=n.flags&-4097|2,tt=!1,Ss=n)}}else{if(AS(n))throw Error(W(418));n.flags=n.flags&-4097|2,tt=!1,Ss=n}}}function Uk(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ss=n}function Lv(n){if(n!==Ss)return!1;if(!tt)return Uk(n),tt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!vS(n.type,n.memoizedProps)),e&&(e=As)){if(AS(n))throw eM(),Error(W(418));for(;e;)ZN(n,e),e=$a(e.nextSibling)}if(Uk(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(W(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){As=$a(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}As=null}}else As=Ss?$a(n.stateNode.nextSibling):null;return!0}function eM(){for(var n=As;n;)n=$a(n.nextSibling)}function gf(){As=Ss=null,tt=!1}function yC(n){wr===null?wr=[n]:wr.push(n)}var j3=xo.ReactCurrentBatchConfig;function $f(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(W(309));var s=t.stateNode}if(!s)throw Error(W(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(W(284));if(!t._owner)throw Error(W(290,n))}return n}function Dv(n,e){throw n=Object.prototype.toString.call(e),Error(W(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Vk(n){var e=n._init;return e(n._payload)}function tM(n){function e(v,b){if(n){var A=v.deletions;A===null?(v.deletions=[b],v.flags|=16):A.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(v,b){return v=Ha(v,b),v.index=0,v.sibling=null,v}function i(v,b,A){return v.index=A,n?(A=v.alternate,A!==null?(A=A.index,A<b?(v.flags|=2,b):A):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,b,A,_){return b===null||b.tag!==6?(b=uA(A,v.mode,_),b.return=v,b):(b=r(b,A),b.return=v,b)}function l(v,b,A,_){var T=A.type;return T===Fu?d(v,b,A.props.children,_,A.key):b!==null&&(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ro&&Vk(T)===b.type)?(_=r(b,A.props),_.ref=$f(v,b,A),_.return=v,_):(_=A0(A.type,A.key,A.props,null,v.mode,_),_.ref=$f(v,b,A),_.return=v,_)}function u(v,b,A,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=dA(A,v.mode,_),b.return=v,b):(b=r(b,A.children||[]),b.return=v,b)}function d(v,b,A,_,T){return b===null||b.tag!==7?(b=nu(A,v.mode,_,T),b.return=v,b):(b=r(b,A),b.return=v,b)}function h(v,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=uA(""+b,v.mode,A),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Sv:return A=A0(b.type,b.key,b.props,null,v.mode,A),A.ref=$f(v,null,b),A.return=v,A;case Ou:return b=dA(b,v.mode,A),b.return=v,b;case Ro:var _=b._init;return h(v,_(b._payload),A)}if(rp(b)||If(b))return b=nu(b,v.mode,A,null),b.return=v,b;Dv(v,b)}return null}function f(v,b,A,_){var T=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return T!==null?null:a(v,b,""+A,_);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Sv:return A.key===T?l(v,b,A,_):null;case Ou:return A.key===T?u(v,b,A,_):null;case Ro:return T=A._init,f(v,b,T(A._payload),_)}if(rp(A)||If(A))return T!==null?null:d(v,b,A,_,null);Dv(v,A)}return null}function p(v,b,A,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(A)||null,a(b,v,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sv:return v=v.get(_.key===null?A:_.key)||null,l(b,v,_,T);case Ou:return v=v.get(_.key===null?A:_.key)||null,u(b,v,_,T);case Ro:var k=_._init;return p(v,b,A,k(_._payload),T)}if(rp(_)||If(_))return v=v.get(A)||null,d(b,v,_,T,null);Dv(b,_)}return null}function y(v,b,A,_){for(var T=null,k=null,P=b,R=b=0,L=null;P!==null&&R<A.length;R++){P.index>R?(L=P,P=null):L=P.sibling;var I=f(v,P,A[R],_);if(I===null){P===null&&(P=L);break}n&&P&&I.alternate===null&&e(v,P),b=i(I,b,R),k===null?T=I:k.sibling=I,k=I,P=L}if(R===A.length)return t(v,P),tt&&cl(v,R),T;if(P===null){for(;R<A.length;R++)P=h(v,A[R],_),P!==null&&(b=i(P,b,R),k===null?T=P:k.sibling=P,k=P);return tt&&cl(v,R),T}for(P=s(v,P);R<A.length;R++)L=p(P,v,R,A[R],_),L!==null&&(n&&L.alternate!==null&&P.delete(L.key===null?R:L.key),b=i(L,b,R),k===null?T=L:k.sibling=L,k=L);return n&&P.forEach(function(O){return e(v,O)}),tt&&cl(v,R),T}function g(v,b,A,_){var T=If(A);if(typeof T!="function")throw Error(W(150));if(A=T.call(A),A==null)throw Error(W(151));for(var k=T=null,P=b,R=b=0,L=null,I=A.next();P!==null&&!I.done;R++,I=A.next()){P.index>R?(L=P,P=null):L=P.sibling;var O=f(v,P,I.value,_);if(O===null){P===null&&(P=L);break}n&&P&&O.alternate===null&&e(v,P),b=i(O,b,R),k===null?T=O:k.sibling=O,k=O,P=L}if(I.done)return t(v,P),tt&&cl(v,R),T;if(P===null){for(;!I.done;R++,I=A.next())I=h(v,I.value,_),I!==null&&(b=i(I,b,R),k===null?T=I:k.sibling=I,k=I);return tt&&cl(v,R),T}for(P=s(v,P);!I.done;R++,I=A.next())I=p(P,v,R,I.value,_),I!==null&&(n&&I.alternate!==null&&P.delete(I.key===null?R:I.key),b=i(I,b,R),k===null?T=I:k.sibling=I,k=I);return n&&P.forEach(function(D){return e(v,D)}),tt&&cl(v,R),T}function S(v,b,A,_){if(typeof A=="object"&&A!==null&&A.type===Fu&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Sv:e:{for(var T=A.key,k=b;k!==null;){if(k.key===T){if(T=A.type,T===Fu){if(k.tag===7){t(v,k.sibling),b=r(k,A.props.children),b.return=v,v=b;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ro&&Vk(T)===k.type){t(v,k.sibling),b=r(k,A.props),b.ref=$f(v,k,A),b.return=v,v=b;break e}t(v,k);break}else e(v,k);k=k.sibling}A.type===Fu?(b=nu(A.props.children,v.mode,_,A.key),b.return=v,v=b):(_=A0(A.type,A.key,A.props,null,v.mode,_),_.ref=$f(v,b,A),_.return=v,v=_)}return o(v);case Ou:e:{for(k=A.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){t(v,b.sibling),b=r(b,A.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=dA(A,v.mode,_),b.return=v,v=b}return o(v);case Ro:return k=A._init,S(v,b,k(A._payload),_)}if(rp(A))return y(v,b,A,_);if(If(A))return g(v,b,A,_);Dv(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(t(v,b.sibling),b=r(b,A),b.return=v,v=b):(t(v,b),b=uA(A,v.mode,_),b.return=v,v=b),o(v)):t(v,b)}return S}var yf=tM(!0),nM=tM(!1),xb=nl(null),Ab=null,Wu=null,vC=null;function bC(){vC=Wu=Ab=null}function wC(n){var e=xb.current;qe(xb),n._currentValue=e}function _S(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function ld(n,e){Ab=n,vC=Wu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Xn=!0),n.firstContext=null)}function Qs(n){var e=n._currentValue;if(vC!==n)if(n={context:n,memoizedValue:e,next:null},Wu===null){if(Ab===null)throw Error(W(308));Wu=n,Ab.dependencies={lanes:0,firstContext:n}}else Wu=Wu.next=n;return e}var Sl=null;function xC(n){Sl===null?Sl=[n]:Sl.push(n)}function sM(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,xC(e)):(t.next=r.next,r.next=t),e.interleaved=t,mo(n,s)}function mo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var No=!1;function AC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rM(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function co(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ua(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Ee&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,mo(n,t)}return r=s.interleaved,r===null?(e.next=e,xC(s)):(e.next=r.next,r.next=e),s.interleaved=e,mo(n,t)}function g0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,aC(n,t)}}function zk(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Sb(n,e,t,s){var r=n.updateQueue;No=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var h=r.baseState;o=0,d=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(f=e,p=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(p,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(p,h,f):y,f==null)break e;h=ut({},h,f);break e;case 2:No=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=p,l=h):d=d.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);au|=o,n.lanes=o,n.memoizedState=h}}function Hk(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(W(191,r));r.call(s)}}}var iv={},oi=nl(iv),om=nl(iv),am=nl(iv);function _l(n){if(n===iv)throw Error(W(174));return n}function SC(n,e){switch(Ve(am,e),Ve(om,n),Ve(oi,iv),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=rS(e,n)}qe(oi),Ve(oi,e)}function vf(){qe(oi),qe(om),qe(am)}function iM(n){_l(am.current);var e=_l(oi.current),t=rS(e,n.type);e!==t&&(Ve(om,n),Ve(oi,t))}function _C(n){om.current===n&&(qe(oi),qe(om))}var it=nl(0);function _b(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rA=[];function EC(){for(var n=0;n<rA.length;n++)rA[n]._workInProgressVersionPrimary=null;rA.length=0}var y0=xo.ReactCurrentDispatcher,iA=xo.ReactCurrentBatchConfig,ou=0,lt=null,Dt=null,Ht=null,Eb=!1,jp=!1,lm=0,O3=0;function on(){throw Error(W(321))}function CC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!_r(n[t],e[t]))return!1;return!0}function TC(n,e,t,s,r,i){if(ou=i,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,y0.current=n===null||n.memoizedState===null?U3:V3,n=t(s,r),jp){i=0;do{if(jp=!1,lm=0,25<=i)throw Error(W(301));i+=1,Ht=Dt=null,e.updateQueue=null,y0.current=z3,n=t(s,r)}while(jp)}if(y0.current=Cb,e=Dt!==null&&Dt.next!==null,ou=0,Ht=Dt=lt=null,Eb=!1,e)throw Error(W(300));return n}function kC(){var n=lm!==0;return lm=0,n}function Nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?lt.memoizedState=Ht=n:Ht=Ht.next=n,Ht}function Js(){if(Dt===null){var n=lt.alternate;n=n!==null?n.memoizedState:null}else n=Dt.next;var e=Ht===null?lt.memoizedState:Ht.next;if(e!==null)Ht=e,Dt=n;else{if(n===null)throw Error(W(310));Dt=n,n={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ht===null?lt.memoizedState=Ht=n:Ht=Ht.next=n}return Ht}function cm(n,e){return typeof e=="function"?e(n):e}function oA(n){var e=Js(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=Dt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((ou&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=s):l=l.next=h,lt.lanes|=d,au|=d}u=u.next}while(u!==null&&u!==i);l===null?o=s:l.next=a,_r(s,e.memoizedState)||(Xn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,lt.lanes|=i,au|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function aA(n){var e=Js(),t=e.queue;if(t===null)throw Error(W(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);_r(i,e.memoizedState)||(Xn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function oM(){}function aM(n,e){var t=lt,s=Js(),r=e(),i=!_r(s.memoizedState,r);if(i&&(s.memoizedState=r,Xn=!0),s=s.queue,PC(uM.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||Ht!==null&&Ht.memoizedState.tag&1){if(t.flags|=2048,um(9,cM.bind(null,t,s,r,e),void 0,null),Wt===null)throw Error(W(349));ou&30||lM(t,e,r)}return r}function lM(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function cM(n,e,t,s){e.value=t,e.getSnapshot=s,dM(e)&&hM(n)}function uM(n,e,t){return t(function(){dM(e)&&hM(n)})}function dM(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!_r(n,t)}catch{return!0}}function hM(n){var e=mo(n,1);e!==null&&Sr(e,n,1,-1)}function Gk(n){var e=Nr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cm,lastRenderedState:n},e.queue=n,n=n.dispatch=$3.bind(null,lt,n),[e.memoizedState,n]}function um(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function fM(){return Js().memoizedState}function v0(n,e,t,s){var r=Nr();lt.flags|=n,r.memoizedState=um(1|e,t,void 0,s===void 0?null:s)}function Zx(n,e,t,s){var r=Js();s=s===void 0?null:s;var i=void 0;if(Dt!==null){var o=Dt.memoizedState;if(i=o.destroy,s!==null&&CC(s,o.deps)){r.memoizedState=um(e,t,i,s);return}}lt.flags|=n,r.memoizedState=um(1|e,t,i,s)}function Wk(n,e){return v0(8390656,8,n,e)}function PC(n,e){return Zx(2048,8,n,e)}function pM(n,e){return Zx(4,2,n,e)}function mM(n,e){return Zx(4,4,n,e)}function gM(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function yM(n,e,t){return t=t!=null?t.concat([n]):null,Zx(4,4,gM.bind(null,e,n),t)}function RC(){}function vM(n,e){var t=Js();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&CC(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function bM(n,e){var t=Js();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&CC(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function wM(n,e,t){return ou&21?(_r(t,e)||(t=EN(),lt.lanes|=t,au|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Xn=!0),n.memoizedState=t)}function F3(n,e){var t=Re;Re=t!==0&&4>t?t:4,n(!0);var s=iA.transition;iA.transition={};try{n(!1),e()}finally{Re=t,iA.transition=s}}function xM(){return Js().memoizedState}function B3(n,e,t){var s=za(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},AM(n))SM(e,t);else if(t=sM(n,e,t,s),t!==null){var r=Nn();Sr(t,n,s,r),_M(t,e,s)}}function $3(n,e,t){var s=za(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(AM(n))SM(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,_r(a,o)){var l=e.interleaved;l===null?(r.next=r,xC(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=sM(n,e,r,s),t!==null&&(r=Nn(),Sr(t,n,s,r),_M(t,e,s))}}function AM(n){var e=n.alternate;return n===lt||e!==null&&e===lt}function SM(n,e){jp=Eb=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function _M(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,aC(n,t)}}var Cb={readContext:Qs,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},U3={readContext:Qs,useCallback:function(n,e){return Nr().memoizedState=[n,e===void 0?null:e],n},useContext:Qs,useEffect:Wk,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,v0(4194308,4,gM.bind(null,e,n),t)},useLayoutEffect:function(n,e){return v0(4194308,4,n,e)},useInsertionEffect:function(n,e){return v0(4,2,n,e)},useMemo:function(n,e){var t=Nr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=Nr();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=B3.bind(null,lt,n),[s.memoizedState,n]},useRef:function(n){var e=Nr();return n={current:n},e.memoizedState=n},useState:Gk,useDebugValue:RC,useDeferredValue:function(n){return Nr().memoizedState=n},useTransition:function(){var n=Gk(!1),e=n[0];return n=F3.bind(null,n[1]),Nr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=lt,r=Nr();if(tt){if(t===void 0)throw Error(W(407));t=t()}else{if(t=e(),Wt===null)throw Error(W(349));ou&30||lM(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,Wk(uM.bind(null,s,i,n),[n]),s.flags|=2048,um(9,cM.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=Nr(),e=Wt.identifierPrefix;if(tt){var t=oo,s=io;t=(s&~(1<<32-Ar(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=lm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=O3++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},V3={readContext:Qs,useCallback:vM,useContext:Qs,useEffect:PC,useImperativeHandle:yM,useInsertionEffect:pM,useLayoutEffect:mM,useMemo:bM,useReducer:oA,useRef:fM,useState:function(){return oA(cm)},useDebugValue:RC,useDeferredValue:function(n){var e=Js();return wM(e,Dt.memoizedState,n)},useTransition:function(){var n=oA(cm)[0],e=Js().memoizedState;return[n,e]},useMutableSource:oM,useSyncExternalStore:aM,useId:xM,unstable_isNewReconciler:!1},z3={readContext:Qs,useCallback:vM,useContext:Qs,useEffect:PC,useImperativeHandle:yM,useInsertionEffect:pM,useLayoutEffect:mM,useMemo:bM,useReducer:aA,useRef:fM,useState:function(){return aA(cm)},useDebugValue:RC,useDeferredValue:function(n){var e=Js();return Dt===null?e.memoizedState=n:wM(e,Dt.memoizedState,n)},useTransition:function(){var n=aA(cm)[0],e=Js().memoizedState;return[n,e]},useMutableSource:oM,useSyncExternalStore:aM,useId:xM,unstable_isNewReconciler:!1};function sr(n,e){if(n&&n.defaultProps){e=ut({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function ES(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:ut({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var e1={isMounted:function(n){return(n=n._reactInternals)?pu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=Nn(),r=za(n),i=co(s,r);i.payload=e,t!=null&&(i.callback=t),e=Ua(n,i,r),e!==null&&(Sr(e,n,r,s),g0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=Nn(),r=za(n),i=co(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Ua(n,i,r),e!==null&&(Sr(e,n,r,s),g0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Nn(),s=za(n),r=co(t,s);r.tag=2,e!=null&&(r.callback=e),e=Ua(n,r,s),e!==null&&(Sr(e,n,s,t),g0(e,n,s))}};function qk(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!nm(t,s)||!nm(r,i):!0}function EM(n,e,t){var s=!1,r=Ka,i=e.contextType;return typeof i=="object"&&i!==null?i=Qs(i):(r=Qn(e)?ru:wn.current,s=e.contextTypes,i=(s=s!=null)?mf(n,r):Ka),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=e1,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function Kk(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&e1.enqueueReplaceState(e,e.state,null)}function CS(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},AC(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Qs(i):(i=Qn(e)?ru:wn.current,r.context=mf(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ES(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&e1.enqueueReplaceState(r,r.state,null),Sb(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function bf(n,e){try{var t="",s=e;do t+=yB(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function lA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function TS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var H3=typeof WeakMap=="function"?WeakMap:Map;function CM(n,e,t){t=co(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){kb||(kb=!0,OS=s),TS(n,e)},t}function TM(n,e,t){t=co(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){TS(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){TS(n,e),typeof s!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function Xk(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new H3;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=r4.bind(null,n,e,t),e.then(n,n))}function Yk(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Qk(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=co(-1,1),e.tag=2,Ua(t,e,1))),t.lanes|=1),n)}var G3=xo.ReactCurrentOwner,Xn=!1;function Pn(n,e,t,s){e.child=n===null?nM(e,null,t,s):yf(e,n.child,t,s)}function Jk(n,e,t,s,r){t=t.render;var i=e.ref;return ld(e,r),s=TC(n,e,t,s,i,r),t=kC(),n!==null&&!Xn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,go(n,e,r)):(tt&&t&&mC(e),e.flags|=1,Pn(n,e,s,r),e.child)}function Zk(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!FC(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,kM(n,e,i,s,r)):(n=A0(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:nm,t(o,s)&&n.ref===e.ref)return go(n,e,r)}return e.flags|=1,n=Ha(i,s),n.ref=e.ref,n.return=e,e.child=n}function kM(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(nm(i,s)&&n.ref===e.ref)if(Xn=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(Xn=!0);else return e.lanes=n.lanes,go(n,e,r)}return kS(n,e,t,s,r)}function PM(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Ku,ws),ws|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ve(Ku,ws),ws|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,Ve(Ku,ws),ws|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,Ve(Ku,ws),ws|=s;return Pn(n,e,r,t),e.child}function RM(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function kS(n,e,t,s,r){var i=Qn(t)?ru:wn.current;return i=mf(e,i),ld(e,r),t=TC(n,e,t,s,i,r),s=kC(),n!==null&&!Xn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,go(n,e,r)):(tt&&s&&mC(e),e.flags|=1,Pn(n,e,t,r),e.child)}function eP(n,e,t,s,r){if(Qn(t)){var i=!0;vb(e)}else i=!1;if(ld(e,r),e.stateNode===null)b0(n,e),EM(e,t,s),CS(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Qs(u):(u=Qn(t)?ru:wn.current,u=mf(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&Kk(e,o,s,u),No=!1;var f=e.memoizedState;o.state=f,Sb(e,s,o,r),l=e.memoizedState,a!==s||f!==l||Yn.current||No?(typeof d=="function"&&(ES(e,t,d,s),l=e.memoizedState),(a=No||qk(e,t,a,s,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,rM(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:sr(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Qs(l):(l=Qn(t)?ru:wn.current,l=mf(e,l));var p=t.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&Kk(e,o,s,l),No=!1,f=e.memoizedState,o.state=f,Sb(e,s,o,r);var y=e.memoizedState;a!==h||f!==y||Yn.current||No?(typeof p=="function"&&(ES(e,t,p,s),y=e.memoizedState),(u=No||qk(e,t,u,s,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return PS(n,e,t,s,i,r)}function PS(n,e,t,s,r,i){RM(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&Bk(e,t,!1),go(n,e,i);s=e.stateNode,G3.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=yf(e,n.child,null,i),e.child=yf(e,null,a,i)):Pn(n,e,a,i),e.memoizedState=s.state,r&&Bk(e,t,!0),e.child}function NM(n){var e=n.stateNode;e.pendingContext?Fk(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Fk(n,e.context,!1),SC(n,e.containerInfo)}function tP(n,e,t,s,r){return gf(),yC(r),e.flags|=256,Pn(n,e,t,s),e.child}var RS={dehydrated:null,treeContext:null,retryLane:0};function NS(n){return{baseLanes:n,cachePool:null,transitions:null}}function MM(n,e,t){var s=e.pendingProps,r=it.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ve(it,r&1),n===null)return SS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=s1(o,s,0,null),n=nu(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=NS(t),e.memoizedState=RS,n):NC(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return W3(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Ha(r,l),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Ha(a,i):(i=nu(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?NS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=RS,s}return i=n.child,n=i.sibling,s=Ha(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function NC(n,e){return e=s1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Iv(n,e,t,s){return s!==null&&yC(s),yf(e,n.child,null,t),n=NC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function W3(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=lA(Error(W(422))),Iv(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=s1({mode:"visible",children:s.children},r,0,null),i=nu(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&yf(e,n.child,null,o),e.child.memoizedState=NS(o),e.memoizedState=RS,i);if(!(e.mode&1))return Iv(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(W(419)),s=lA(i,s,void 0),Iv(n,e,o,s)}if(a=(o&n.childLanes)!==0,Xn||a){if(s=Wt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,mo(n,r),Sr(s,n,r,-1))}return OC(),s=lA(Error(W(421))),Iv(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=i4.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,As=$a(r.nextSibling),Ss=e,tt=!0,wr=null,n!==null&&(Ws[qs++]=io,Ws[qs++]=oo,Ws[qs++]=iu,io=n.id,oo=n.overflow,iu=e),e=NC(e,s.children),e.flags|=4096,e)}function nP(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),_S(n.return,e,t)}function cA(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function LM(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Pn(n,e,s.children,t),s=it.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&nP(n,t,e);else if(n.tag===19)nP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Ve(it,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&_b(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),cA(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&_b(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}cA(e,!0,t,null,i);break;case"together":cA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function b0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function go(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),au|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(W(153));if(e.child!==null){for(n=e.child,t=Ha(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ha(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function q3(n,e,t){switch(e.tag){case 3:NM(e),gf();break;case 5:iM(e);break;case 1:Qn(e.type)&&vb(e);break;case 4:SC(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Ve(xb,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ve(it,it.current&1),e.flags|=128,null):t&e.child.childLanes?MM(n,e,t):(Ve(it,it.current&1),n=go(n,e,t),n!==null?n.sibling:null);Ve(it,it.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return LM(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ve(it,it.current),s)break;return null;case 22:case 23:return e.lanes=0,PM(n,e,t)}return go(n,e,t)}var DM,MS,IM,jM;DM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};MS=function(){};IM=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,_l(oi.current);var i=null;switch(t){case"input":r=eS(n,r),s=eS(n,s),i=[];break;case"select":r=ut({},r,{value:void 0}),s=ut({},s,{value:void 0}),i=[];break;case"textarea":r=sS(n,r),s=sS(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=gb)}iS(t,s);var o;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var l=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(i||(i=[]),i.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&We("scroll",n),i||a===l||(i=[])):(i=i||[]).push(u,l))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};jM=function(n,e,t,s){t!==s&&(e.flags|=4)};function Uf(n,e){if(!tt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function an(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function K3(n,e,t){var s=e.pendingProps;switch(gC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return Qn(e.type)&&yb(),an(e),null;case 3:return s=e.stateNode,vf(),qe(Yn),qe(wn),EC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Lv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wr!==null&&($S(wr),wr=null))),MS(n,e),an(e),null;case 5:_C(e);var r=_l(am.current);if(t=e.type,n!==null&&e.stateNode!=null)IM(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(W(166));return an(e),null}if(n=_l(oi.current),Lv(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[si]=e,s[im]=i,n=(e.mode&1)!==0,t){case"dialog":We("cancel",s),We("close",s);break;case"iframe":case"object":case"embed":We("load",s);break;case"video":case"audio":for(r=0;r<op.length;r++)We(op[r],s);break;case"source":We("error",s);break;case"img":case"image":case"link":We("error",s),We("load",s);break;case"details":We("toggle",s);break;case"input":dk(s,i),We("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},We("invalid",s);break;case"textarea":fk(s,i),We("invalid",s)}iS(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Mv(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Mv(s.textContent,a,n),r=["children",""+a]):Xp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&We("scroll",s)}switch(t){case"input":_v(s),hk(s,i,!0);break;case"textarea":_v(s),pk(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=gb)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=uN(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[si]=e,n[im]=s,DM(n,e,!1,!1),e.stateNode=n;e:{switch(o=oS(t,s),t){case"dialog":We("cancel",n),We("close",n),r=s;break;case"iframe":case"object":case"embed":We("load",n),r=s;break;case"video":case"audio":for(r=0;r<op.length;r++)We(op[r],n);r=s;break;case"source":We("error",n),r=s;break;case"img":case"image":case"link":We("error",n),We("load",n),r=s;break;case"details":We("toggle",n),r=s;break;case"input":dk(n,s),r=eS(n,s),We("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=ut({},s,{value:void 0}),We("invalid",n);break;case"textarea":fk(n,s),r=sS(n,s),We("invalid",n);break;default:r=s}iS(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?fN(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dN(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Yp(n,l):typeof l=="number"&&Yp(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&We("scroll",n):l!=null&&tC(n,i,l,o))}switch(t){case"input":_v(n),hk(n,s,!1);break;case"textarea":_v(n),pk(n);break;case"option":s.value!=null&&n.setAttribute("value",""+qa(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?rd(n,!!s.multiple,i,!1):s.defaultValue!=null&&rd(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=gb)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(n&&e.stateNode!=null)jM(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(W(166));if(t=_l(am.current),_l(oi.current),Lv(e)){if(s=e.stateNode,t=e.memoizedProps,s[si]=e,(i=s.nodeValue!==t)&&(n=Ss,n!==null))switch(n.tag){case 3:Mv(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Mv(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[si]=e,e.stateNode=s}return an(e),null;case 13:if(qe(it),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(tt&&As!==null&&e.mode&1&&!(e.flags&128))eM(),gf(),e.flags|=98560,i=!1;else if(i=Lv(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[si]=e}else gf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else wr!==null&&($S(wr),wr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||it.current&1?It===0&&(It=3):OC())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return vf(),MS(n,e),n===null&&sm(e.stateNode.containerInfo),an(e),null;case 10:return wC(e.type._context),an(e),null;case 17:return Qn(e.type)&&yb(),an(e),null;case 19:if(qe(it),i=e.memoizedState,i===null)return an(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Uf(i,!1);else{if(It!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=_b(n),o!==null){for(e.flags|=128,Uf(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ve(it,it.current&1|2),e.child}n=n.sibling}i.tail!==null&&xt()>wf&&(e.flags|=128,s=!0,Uf(i,!1),e.lanes=4194304)}else{if(!s)if(n=_b(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Uf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!tt)return an(e),null}else 2*xt()-i.renderingStartTime>wf&&t!==1073741824&&(e.flags|=128,s=!0,Uf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=xt(),e.sibling=null,t=it.current,Ve(it,s?t&1|2:t&1),e):(an(e),null);case 22:case 23:return jC(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ws&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function X3(n,e){switch(gC(e),e.tag){case 1:return Qn(e.type)&&yb(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return vf(),qe(Yn),qe(wn),EC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return _C(e),null;case 13:if(qe(it),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(W(340));gf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return qe(it),null;case 4:return vf(),null;case 10:return wC(e.type._context),null;case 22:case 23:return jC(),null;case 24:return null;default:return null}}var jv=!1,yn=!1,Y3=typeof WeakSet=="function"?WeakSet:Set,Z=null;function qu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){mt(n,e,s)}else t.current=null}function LS(n,e,t){try{t()}catch(s){mt(n,e,s)}}var sP=!1;function Q3(n,e){if(gS=fb,n=UN(),pC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var p;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(l=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===n)break t;if(f===t&&++u===r&&(a=o),f===i&&++d===s&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(yS={focusedElem:n,selectionRange:t},fb=!1,Z=e;Z!==null;)if(e=Z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Z=n;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,S=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:sr(e.type,g),S);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(_){mt(e,e.return,_)}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}return y=sP,sP=!1,y}function Op(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&LS(e,t,i)}r=r.next}while(r!==s)}}function t1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function DS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function OM(n){var e=n.alternate;e!==null&&(n.alternate=null,OM(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[si],delete e[im],delete e[wS],delete e[L3],delete e[D3])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function FM(n){return n.tag===5||n.tag===3||n.tag===4}function rP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||FM(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function IS(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gb));else if(s!==4&&(n=n.child,n!==null))for(IS(n,e,t),n=n.sibling;n!==null;)IS(n,e,t),n=n.sibling}function jS(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(jS(n,e,t),n=n.sibling;n!==null;)jS(n,e,t),n=n.sibling}var tn=null,vr=!1;function Eo(n,e,t){for(t=t.child;t!==null;)BM(n,e,t),t=t.sibling}function BM(n,e,t){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(qx,t)}catch{}switch(t.tag){case 5:yn||qu(t,e);case 6:var s=tn,r=vr;tn=null,Eo(n,e,t),tn=s,vr=r,tn!==null&&(vr?(n=tn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):tn.removeChild(t.stateNode));break;case 18:tn!==null&&(vr?(n=tn,t=t.stateNode,n.nodeType===8?nA(n.parentNode,t):n.nodeType===1&&nA(n,t),em(n)):nA(tn,t.stateNode));break;case 4:s=tn,r=vr,tn=t.stateNode.containerInfo,vr=!0,Eo(n,e,t),tn=s,vr=r;break;case 0:case 11:case 14:case 15:if(!yn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&LS(t,e,o),r=r.next}while(r!==s)}Eo(n,e,t);break;case 1:if(!yn&&(qu(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){mt(t,e,a)}Eo(n,e,t);break;case 21:Eo(n,e,t);break;case 22:t.mode&1?(yn=(s=yn)||t.memoizedState!==null,Eo(n,e,t),yn=s):Eo(n,e,t);break;default:Eo(n,e,t)}}function iP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Y3),e.forEach(function(s){var r=o4.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function Zs(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:tn=a.stateNode,vr=!1;break e;case 3:tn=a.stateNode.containerInfo,vr=!0;break e;case 4:tn=a.stateNode.containerInfo,vr=!0;break e}a=a.return}if(tn===null)throw Error(W(160));BM(i,o,r),tn=null,vr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){mt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)$M(e,n),e=e.sibling}function $M(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zs(e,n),Tr(n),s&4){try{Op(3,n,n.return),t1(3,n)}catch(g){mt(n,n.return,g)}try{Op(5,n,n.return)}catch(g){mt(n,n.return,g)}}break;case 1:Zs(e,n),Tr(n),s&512&&t!==null&&qu(t,t.return);break;case 5:if(Zs(e,n),Tr(n),s&512&&t!==null&&qu(t,t.return),n.flags&32){var r=n.stateNode;try{Yp(r,"")}catch(g){mt(n,n.return,g)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&lN(r,i),oS(a,o);var u=oS(a,i);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?fN(r,h):d==="dangerouslySetInnerHTML"?dN(r,h):d==="children"?Yp(r,h):tC(r,d,h,u)}switch(a){case"input":tS(r,i);break;case"textarea":cN(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?rd(r,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?rd(r,!!i.multiple,i.defaultValue,!0):rd(r,!!i.multiple,i.multiple?[]:"",!1))}r[im]=i}catch(g){mt(n,n.return,g)}}break;case 6:if(Zs(e,n),Tr(n),s&4){if(n.stateNode===null)throw Error(W(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(g){mt(n,n.return,g)}}break;case 3:if(Zs(e,n),Tr(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{em(e.containerInfo)}catch(g){mt(n,n.return,g)}break;case 4:Zs(e,n),Tr(n);break;case 13:Zs(e,n),Tr(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(DC=xt())),s&4&&iP(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(yn=(u=yn)||d,Zs(e,n),yn=u):Zs(e,n),Tr(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Z=n,d=n.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,p=f.child,f.tag){case 0:case 11:case 14:case 15:Op(4,f,f.return);break;case 1:qu(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){mt(s,t,g)}}break;case 5:qu(f,f.return);break;case 22:if(f.memoizedState!==null){aP(h);continue}}p!==null?(p.return=f,Z=p):aP(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=hN("display",o))}catch(g){mt(n,n.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){mt(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Zs(e,n),Tr(n),s&4&&iP(n);break;case 21:break;default:Zs(e,n),Tr(n)}}function Tr(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(FM(t)){var s=t;break e}t=t.return}throw Error(W(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Yp(r,""),s.flags&=-33);var i=rP(n);jS(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=rP(n);IS(n,a,o);break;default:throw Error(W(161))}}catch(l){mt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function J3(n,e,t){Z=n,UM(n)}function UM(n,e,t){for(var s=(n.mode&1)!==0;Z!==null;){var r=Z,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||jv;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||yn;a=jv;var u=yn;if(jv=o,(yn=l)&&!u)for(Z=r;Z!==null;)o=Z,l=o.child,o.tag===22&&o.memoizedState!==null?lP(r):l!==null?(l.return=o,Z=l):lP(r);for(;i!==null;)Z=i,UM(i),i=i.sibling;Z=r,jv=a,yn=u}oP(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Z=i):oP(n)}}function oP(n){for(;Z!==null;){var e=Z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:yn||t1(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!yn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:sr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Hk(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}Hk(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&em(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}yn||e.flags&512&&DS(e)}catch(f){mt(e,e.return,f)}}if(e===n){Z=null;break}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}}function aP(n){for(;Z!==null;){var e=Z;if(e===n){Z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Z=t;break}Z=e.return}}function lP(n){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{t1(4,e)}catch(l){mt(e,t,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(l){mt(e,r,l)}}var i=e.return;try{DS(e)}catch(l){mt(e,i,l)}break;case 5:var o=e.return;try{DS(e)}catch(l){mt(e,o,l)}}}catch(l){mt(e,e.return,l)}if(e===n){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var Z3=Math.ceil,Tb=xo.ReactCurrentDispatcher,MC=xo.ReactCurrentOwner,Ys=xo.ReactCurrentBatchConfig,Ee=0,Wt=null,Tt=null,sn=0,ws=0,Ku=nl(0),It=0,dm=null,au=0,n1=0,LC=0,Fp=null,qn=null,DC=0,wf=1/0,yi=null,kb=!1,OS=null,Va=null,Ov=!1,ja=null,Pb=0,Bp=0,FS=null,w0=-1,x0=0;function Nn(){return Ee&6?xt():w0!==-1?w0:w0=xt()}function za(n){return n.mode&1?Ee&2&&sn!==0?sn&-sn:j3.transition!==null?(x0===0&&(x0=EN()),x0):(n=Re,n!==0||(n=window.event,n=n===void 0?16:MN(n.type)),n):1}function Sr(n,e,t,s){if(50<Bp)throw Bp=0,FS=null,Error(W(185));nv(n,t,s),(!(Ee&2)||n!==Wt)&&(n===Wt&&(!(Ee&2)&&(n1|=t),It===4&&Do(n,sn)),Jn(n,s),t===1&&Ee===0&&!(e.mode&1)&&(wf=xt()+500,Jx&&sl()))}function Jn(n,e){var t=n.callbackNode;jB(n,e);var s=hb(n,n===Wt?sn:0);if(s===0)t!==null&&yk(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&yk(t),e===1)n.tag===0?I3(cP.bind(null,n)):QN(cP.bind(null,n)),N3(function(){!(Ee&6)&&sl()}),t=null;else{switch(CN(s)){case 1:t=oC;break;case 4:t=SN;break;case 16:t=db;break;case 536870912:t=_N;break;default:t=db}t=XM(t,VM.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function VM(n,e){if(w0=-1,x0=0,Ee&6)throw Error(W(327));var t=n.callbackNode;if(cd()&&n.callbackNode!==t)return null;var s=hb(n,n===Wt?sn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Rb(n,s);else{e=s;var r=Ee;Ee|=2;var i=HM();(Wt!==n||sn!==e)&&(yi=null,wf=xt()+500,tu(n,e));do try{n4();break}catch(a){zM(n,a)}while(1);bC(),Tb.current=i,Ee=r,Tt!==null?e=0:(Wt=null,sn=0,e=It)}if(e!==0){if(e===2&&(r=dS(n),r!==0&&(s=r,e=BS(n,r))),e===1)throw t=dm,tu(n,0),Do(n,s),Jn(n,xt()),t;if(e===6)Do(n,s);else{if(r=n.current.alternate,!(s&30)&&!e4(r)&&(e=Rb(n,s),e===2&&(i=dS(n),i!==0&&(s=i,e=BS(n,i))),e===1))throw t=dm,tu(n,0),Do(n,s),Jn(n,xt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(W(345));case 2:ul(n,qn,yi);break;case 3:if(Do(n,s),(s&130023424)===s&&(e=DC+500-xt(),10<e)){if(hb(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){Nn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=bS(ul.bind(null,n,qn,yi),e);break}ul(n,qn,yi);break;case 4:if(Do(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-Ar(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=xt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Z3(s/1960))-s,10<s){n.timeoutHandle=bS(ul.bind(null,n,qn,yi),s);break}ul(n,qn,yi);break;case 5:ul(n,qn,yi);break;default:throw Error(W(329))}}}return Jn(n,xt()),n.callbackNode===t?VM.bind(null,n):null}function BS(n,e){var t=Fp;return n.current.memoizedState.isDehydrated&&(tu(n,e).flags|=256),n=Rb(n,e),n!==2&&(e=qn,qn=t,e!==null&&$S(e)),n}function $S(n){qn===null?qn=n:qn.push.apply(qn,n)}function e4(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!_r(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Do(n,e){for(e&=~LC,e&=~n1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ar(e),s=1<<t;n[t]=-1,e&=~s}}function cP(n){if(Ee&6)throw Error(W(327));cd();var e=hb(n,0);if(!(e&1))return Jn(n,xt()),null;var t=Rb(n,e);if(n.tag!==0&&t===2){var s=dS(n);s!==0&&(e=s,t=BS(n,s))}if(t===1)throw t=dm,tu(n,0),Do(n,e),Jn(n,xt()),t;if(t===6)throw Error(W(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ul(n,qn,yi),Jn(n,xt()),null}function IC(n,e){var t=Ee;Ee|=1;try{return n(e)}finally{Ee=t,Ee===0&&(wf=xt()+500,Jx&&sl())}}function lu(n){ja!==null&&ja.tag===0&&!(Ee&6)&&cd();var e=Ee;Ee|=1;var t=Ys.transition,s=Re;try{if(Ys.transition=null,Re=1,n)return n()}finally{Re=s,Ys.transition=t,Ee=e,!(Ee&6)&&sl()}}function jC(){ws=Ku.current,qe(Ku)}function tu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,R3(t)),Tt!==null)for(t=Tt.return;t!==null;){var s=t;switch(gC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&yb();break;case 3:vf(),qe(Yn),qe(wn),EC();break;case 5:_C(s);break;case 4:vf();break;case 13:qe(it);break;case 19:qe(it);break;case 10:wC(s.type._context);break;case 22:case 23:jC()}t=t.return}if(Wt=n,Tt=n=Ha(n.current,null),sn=ws=e,It=0,dm=null,LC=n1=au=0,qn=Fp=null,Sl!==null){for(e=0;e<Sl.length;e++)if(t=Sl[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}Sl=null}return n}function zM(n,e){do{var t=Tt;try{if(bC(),y0.current=Cb,Eb){for(var s=lt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Eb=!1}if(ou=0,Ht=Dt=lt=null,jp=!1,lm=0,MC.current=null,t===null||t.return===null){It=1,dm=e,Tt=null;break}e:{var i=n,o=t.return,a=t,l=e;if(e=sn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=Yk(o);if(p!==null){p.flags&=-257,Qk(p,o,a,i,e),p.mode&1&&Xk(i,u,e),e=p,l=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){Xk(i,u,e),OC();break e}l=Error(W(426))}}else if(tt&&a.mode&1){var S=Yk(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Qk(S,o,a,i,e),yC(bf(l,a));break e}}i=l=bf(l,a),It!==4&&(It=2),Fp===null?Fp=[i]:Fp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=CM(i,l,e);zk(i,v);break e;case 1:a=l;var b=i.type,A=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Va===null||!Va.has(A)))){i.flags|=65536,e&=-e,i.lanes|=e;var _=TM(i,a,e);zk(i,_);break e}}i=i.return}while(i!==null)}WM(t)}catch(T){e=T,Tt===t&&t!==null&&(Tt=t=t.return);continue}break}while(1)}function HM(){var n=Tb.current;return Tb.current=Cb,n===null?Cb:n}function OC(){(It===0||It===3||It===2)&&(It=4),Wt===null||!(au&268435455)&&!(n1&268435455)||Do(Wt,sn)}function Rb(n,e){var t=Ee;Ee|=2;var s=HM();(Wt!==n||sn!==e)&&(yi=null,tu(n,e));do try{t4();break}catch(r){zM(n,r)}while(1);if(bC(),Ee=t,Tb.current=s,Tt!==null)throw Error(W(261));return Wt=null,sn=0,It}function t4(){for(;Tt!==null;)GM(Tt)}function n4(){for(;Tt!==null&&!TB();)GM(Tt)}function GM(n){var e=KM(n.alternate,n,ws);n.memoizedProps=n.pendingProps,e===null?WM(n):Tt=e,MC.current=null}function WM(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=X3(t,e),t!==null){t.flags&=32767,Tt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{It=6,Tt=null;return}}else if(t=K3(t,e,ws),t!==null){Tt=t;return}if(e=e.sibling,e!==null){Tt=e;return}Tt=e=n}while(e!==null);It===0&&(It=5)}function ul(n,e,t){var s=Re,r=Ys.transition;try{Ys.transition=null,Re=1,s4(n,e,t,s)}finally{Ys.transition=r,Re=s}return null}function s4(n,e,t,s){do cd();while(ja!==null);if(Ee&6)throw Error(W(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(W(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(OB(n,i),n===Wt&&(Tt=Wt=null,sn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ov||(Ov=!0,XM(db,function(){return cd(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Ys.transition,Ys.transition=null;var o=Re;Re=1;var a=Ee;Ee|=4,MC.current=null,Q3(n,t),$M(t,n),S3(yS),fb=!!gS,yS=gS=null,n.current=t,J3(t),kB(),Ee=a,Re=o,Ys.transition=i}else n.current=t;if(Ov&&(Ov=!1,ja=n,Pb=r),i=n.pendingLanes,i===0&&(Va=null),NB(t.stateNode),Jn(n,xt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(kb)throw kb=!1,n=OS,OS=null,n;return Pb&1&&n.tag!==0&&cd(),i=n.pendingLanes,i&1?n===FS?Bp++:(Bp=0,FS=n):Bp=0,sl(),null}function cd(){if(ja!==null){var n=CN(Pb),e=Ys.transition,t=Re;try{if(Ys.transition=null,Re=16>n?16:n,ja===null)var s=!1;else{if(n=ja,ja=null,Pb=0,Ee&6)throw Error(W(331));var r=Ee;for(Ee|=4,Z=n.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Op(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,p=d.return;if(OM(d),d===u){Z=null;break}if(f!==null){f.return=p,Z=f;break}Z=p}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var S=g.sibling;g.sibling=null,g=S}while(g!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Op(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Z=v;break e}Z=i.return}}var b=n.current;for(Z=b;Z!==null;){o=Z;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Z=A;else e:for(o=b;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:t1(9,a)}}catch(T){mt(a,a.return,T)}if(a===o){Z=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Z=_;break e}Z=a.return}}if(Ee=r,sl(),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(qx,n)}catch{}s=!0}return s}finally{Re=t,Ys.transition=e}}return!1}function uP(n,e,t){e=bf(t,e),e=CM(n,e,1),n=Ua(n,e,1),e=Nn(),n!==null&&(nv(n,1,e),Jn(n,e))}function mt(n,e,t){if(n.tag===3)uP(n,n,t);else for(;e!==null;){if(e.tag===3){uP(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Va===null||!Va.has(s))){n=bf(t,n),n=TM(e,n,1),e=Ua(e,n,1),n=Nn(),e!==null&&(nv(e,1,n),Jn(e,n));break}}e=e.return}}function r4(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=Nn(),n.pingedLanes|=n.suspendedLanes&t,Wt===n&&(sn&t)===t&&(It===4||It===3&&(sn&130023424)===sn&&500>xt()-DC?tu(n,0):LC|=t),Jn(n,e)}function qM(n,e){e===0&&(n.mode&1?(e=Tv,Tv<<=1,!(Tv&130023424)&&(Tv=4194304)):e=1);var t=Nn();n=mo(n,e),n!==null&&(nv(n,e,t),Jn(n,t))}function i4(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),qM(n,t)}function o4(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(W(314))}s!==null&&s.delete(e),qM(n,t)}var KM;KM=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Yn.current)Xn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Xn=!1,q3(n,e,t);Xn=!!(n.flags&131072)}else Xn=!1,tt&&e.flags&1048576&&JN(e,wb,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;b0(n,e),n=e.pendingProps;var r=mf(e,wn.current);ld(e,t),r=TC(null,e,s,n,r,t);var i=kC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(s)?(i=!0,vb(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,AC(e),r.updater=e1,e.stateNode=r,r._reactInternals=e,CS(e,s,n,t),e=PS(null,e,s,!0,i,t)):(e.tag=0,tt&&i&&mC(e),Pn(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(b0(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=l4(s),n=sr(s,n),r){case 0:e=kS(null,e,s,n,t);break e;case 1:e=eP(null,e,s,n,t);break e;case 11:e=Jk(null,e,s,n,t);break e;case 14:e=Zk(null,e,s,sr(s.type,n),t);break e}throw Error(W(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:sr(s,r),kS(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:sr(s,r),eP(n,e,s,r,t);case 3:e:{if(NM(e),n===null)throw Error(W(387));s=e.pendingProps,i=e.memoizedState,r=i.element,rM(n,e),Sb(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=bf(Error(W(423)),e),e=tP(n,e,s,t,r);break e}else if(s!==r){r=bf(Error(W(424)),e),e=tP(n,e,s,t,r);break e}else for(As=$a(e.stateNode.containerInfo.firstChild),Ss=e,tt=!0,wr=null,t=nM(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(gf(),s===r){e=go(n,e,t);break e}Pn(n,e,s,t)}e=e.child}return e;case 5:return iM(e),n===null&&SS(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,vS(s,r)?o=null:i!==null&&vS(s,i)&&(e.flags|=32),RM(n,e),Pn(n,e,o,t),e.child;case 6:return n===null&&SS(e),null;case 13:return MM(n,e,t);case 4:return SC(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=yf(e,null,s,t):Pn(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:sr(s,r),Jk(n,e,s,r,t);case 7:return Pn(n,e,e.pendingProps,t),e.child;case 8:return Pn(n,e,e.pendingProps.children,t),e.child;case 12:return Pn(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Ve(xb,s._currentValue),s._currentValue=o,i!==null)if(_r(i.value,o)){if(i.children===r.children&&!Yn.current){e=go(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(i.tag===1){l=co(-1,t&-t),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),_S(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(W(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),_S(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pn(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,ld(e,t),r=Qs(r),s=s(r),e.flags|=1,Pn(n,e,s,t),e.child;case 14:return s=e.type,r=sr(s,e.pendingProps),r=sr(s.type,r),Zk(n,e,s,r,t);case 15:return kM(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:sr(s,r),b0(n,e),e.tag=1,Qn(s)?(n=!0,vb(e)):n=!1,ld(e,t),EM(e,s,r),CS(e,s,r,t),PS(null,e,s,!0,n,t);case 19:return LM(n,e,t);case 22:return PM(n,e,t)}throw Error(W(156,e.tag))};function XM(n,e){return AN(n,e)}function a4(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(n,e,t,s){return new a4(n,e,t,s)}function FC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function l4(n){if(typeof n=="function")return FC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sC)return 11;if(n===rC)return 14}return 2}function Ha(n,e){var t=n.alternate;return t===null?(t=Xs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function A0(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")FC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Fu:return nu(t.children,r,i,e);case nC:o=8,r|=8;break;case YA:return n=Xs(12,t,e,r|2),n.elementType=YA,n.lanes=i,n;case QA:return n=Xs(13,t,e,r),n.elementType=QA,n.lanes=i,n;case JA:return n=Xs(19,t,e,r),n.elementType=JA,n.lanes=i,n;case iN:return s1(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case sN:o=10;break e;case rN:o=9;break e;case sC:o=11;break e;case rC:o=14;break e;case Ro:o=16,s=null;break e}throw Error(W(130,n==null?n:typeof n,""))}return e=Xs(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function nu(n,e,t,s){return n=Xs(7,n,s,e),n.lanes=t,n}function s1(n,e,t,s){return n=Xs(22,n,s,e),n.elementType=iN,n.lanes=t,n.stateNode={isHidden:!1},n}function uA(n,e,t){return n=Xs(6,n,null,e),n.lanes=t,n}function dA(n,e,t){return e=Xs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function c4(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=G1(0),this.expirationTimes=G1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G1(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function BC(n,e,t,s,r,i,o,a,l){return n=new c4(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},AC(i),n}function u4(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ou,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function YM(n){if(!n)return Ka;n=n._reactInternals;e:{if(pu(n)!==n||n.tag!==1)throw Error(W(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(n.tag===1){var t=n.type;if(Qn(t))return YN(n,t,e)}return e}function QM(n,e,t,s,r,i,o,a,l){return n=BC(t,s,!0,n,r,i,o,a,l),n.context=YM(null),t=n.current,s=Nn(),r=za(t),i=co(s,r),i.callback=e??null,Ua(t,i,r),n.current.lanes=r,nv(n,r,s),Jn(n,s),n}function r1(n,e,t,s){var r=e.current,i=Nn(),o=za(r);return t=YM(t),e.context===null?e.context=t:e.pendingContext=t,e=co(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Ua(r,e,o),n!==null&&(Sr(n,r,o,i),g0(n,r,o)),o}function Nb(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function dP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function $C(n,e){dP(n,e),(n=n.alternate)&&dP(n,e)}function d4(){return null}var JM=typeof reportError=="function"?reportError:function(n){console.error(n)};function UC(n){this._internalRoot=n}i1.prototype.render=UC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(W(409));r1(n,e,null,null)};i1.prototype.unmount=UC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;lu(function(){r1(null,n,null,null)}),e[po]=null}};function i1(n){this._internalRoot=n}i1.prototype.unstable_scheduleHydration=function(n){if(n){var e=PN();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Lo.length&&e!==0&&e<Lo[t].priority;t++);Lo.splice(t,0,n),t===0&&NN(n)}};function VC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function hP(){}function h4(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Nb(o);i.call(u)}}var o=QM(e,s,n,0,null,!1,!1,"",hP);return n._reactRootContainer=o,n[po]=o.current,sm(n.nodeType===8?n.parentNode:n),lu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=Nb(l);a.call(u)}}var l=BC(n,0,!1,null,null,!1,!1,"",hP);return n._reactRootContainer=l,n[po]=l.current,sm(n.nodeType===8?n.parentNode:n),lu(function(){r1(e,l,t,s)}),l}function a1(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var l=Nb(o);a.call(l)}}r1(e,o,n,r)}else o=h4(t,e,n,r,s);return Nb(o)}TN=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ip(e.pendingLanes);t!==0&&(aC(e,t|1),Jn(e,xt()),!(Ee&6)&&(wf=xt()+500,sl()))}break;case 13:lu(function(){var s=mo(n,1);if(s!==null){var r=Nn();Sr(s,n,1,r)}}),$C(n,1)}};lC=function(n){if(n.tag===13){var e=mo(n,134217728);if(e!==null){var t=Nn();Sr(e,n,134217728,t)}$C(n,134217728)}};kN=function(n){if(n.tag===13){var e=za(n),t=mo(n,e);if(t!==null){var s=Nn();Sr(t,n,e,s)}$C(n,e)}};PN=function(){return Re};RN=function(n,e){var t=Re;try{return Re=n,e()}finally{Re=t}};lS=function(n,e,t){switch(e){case"input":if(tS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=Qx(s);if(!r)throw Error(W(90));aN(s),tS(s,r)}}}break;case"textarea":cN(n,t);break;case"select":e=t.value,e!=null&&rd(n,!!t.multiple,e,!1)}};gN=IC;yN=lu;var f4={usingClientEntryPoint:!1,Events:[rv,Vu,Qx,pN,mN,IC]},Vf={findFiberByHostInstance:Al,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},p4={bundleType:Vf.bundleType,version:Vf.version,rendererPackageName:Vf.rendererPackageName,rendererConfig:Vf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=wN(n),n===null?null:n.stateNode},findFiberByHostInstance:Vf.findFiberByHostInstance||d4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fv.isDisabled&&Fv.supportsFiber)try{qx=Fv.inject(p4),ii=Fv}catch{}}Ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f4;Ts.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!VC(e))throw Error(W(200));return u4(n,e,null,t)};Ts.createRoot=function(n,e){if(!VC(n))throw Error(W(299));var t=!1,s="",r=JM;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=BC(n,1,!1,null,null,t,!1,s,r),n[po]=e.current,sm(n.nodeType===8?n.parentNode:n),new UC(e)};Ts.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(W(188)):(n=Object.keys(n).join(","),Error(W(268,n)));return n=wN(e),n=n===null?null:n.stateNode,n};Ts.flushSync=function(n){return lu(n)};Ts.hydrate=function(n,e,t){if(!o1(e))throw Error(W(200));return a1(null,n,e,!0,t)};Ts.hydrateRoot=function(n,e,t){if(!VC(n))throw Error(W(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=JM;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=QM(e,null,n,1,t??null,r,!1,i,o),n[po]=e.current,sm(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new i1(e)};Ts.render=function(n,e,t){if(!o1(e))throw Error(W(200));return a1(null,n,e,!1,t)};Ts.unmountComponentAtNode=function(n){if(!o1(n))throw Error(W(40));return n._reactRootContainer?(lu(function(){a1(null,null,n,!1,function(){n._reactRootContainer=null,n[po]=null})}),!0):!1};Ts.unstable_batchedUpdates=IC;Ts.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!o1(t))throw Error(W(200));if(n==null||n._reactInternals===void 0)throw Error(W(38));return a1(n,e,t,!1,s)};Ts.version="18.3.1-next-f1338f8080-20240426";function ZM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ZM)}catch(n){console.error(n)}}ZM(),Z2.exports=Ts;var l1=Z2.exports;const m4=el(l1);var fP=l1;KA.createRoot=fP.createRoot,KA.hydrateRoot=fP.hydrateRoot;var eL={exports:{}},g4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",y4=g4,v4=y4;function tL(){}function nL(){}nL.resetWarningCache=tL;var b4=function(){function n(s,r,i,o,a,l){if(l!==v4){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:nL,resetWarningCache:tL};return t.PropTypes=t,t};eL.exports=b4();var w4=eL.exports;const Xe=el(w4);function x4(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var sL=C,A4=x4(sL);function pP(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function S4(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var _4=!!(typeof window<"u"&&window.document&&window.document.createElement);function E4(n,e,t){if(typeof n!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function s(r){return r.displayName||r.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],a;function l(){a=n(o.map(function(d){return d.props})),u.canUseDOM?e(a):t&&(a=t(a))}var u=function(d){S4(h,d);function h(){return d.apply(this,arguments)||this}h.peek=function(){return a},h.rewind=function(){if(h.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var y=a;return a=void 0,o=[],y};var f=h.prototype;return f.UNSAFE_componentWillMount=function(){o.push(this),l()},f.componentDidUpdate=function(){l()},f.componentWillUnmount=function(){var y=o.indexOf(this);o.splice(y,1),l()},f.render=function(){return A4.createElement(i,this.props)},h}(sL.PureComponent);return pP(u,"displayName","SideEffect("+s(i)+")"),pP(u,"canUseDOM",_4),u}}var C4=E4;const T4=el(C4);var k4=typeof Element<"u",P4=typeof Map=="function",R4=typeof Set=="function",N4=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function S0(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,s,r;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(s=t;s--!==0;)if(!S0(n[s],e[s]))return!1;return!0}var i;if(P4&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(i=n.entries();!(s=i.next()).done;)if(!e.has(s.value[0]))return!1;for(i=n.entries();!(s=i.next()).done;)if(!S0(s.value[1],e.get(s.value[0])))return!1;return!0}if(R4&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(i=n.entries();!(s=i.next()).done;)if(!e.has(s.value[0]))return!1;return!0}if(N4&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(s=t;s--!==0;)if(n[s]!==e[s])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(r=Object.keys(n),t=r.length,t!==Object.keys(e).length)return!1;for(s=t;s--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[s]))return!1;if(k4&&n instanceof Element)return!1;for(s=t;s--!==0;)if(!((r[s]==="_owner"||r[s]==="__v"||r[s]==="__o")&&n.$$typeof)&&!S0(n[r[s]],e[r[s]]))return!1;return!0}return n!==n&&e!==e}var M4=function(e,t){try{return S0(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw s}};const L4=el(M4);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var mP=Object.getOwnPropertySymbols,D4=Object.prototype.hasOwnProperty,I4=Object.prototype.propertyIsEnumerable;function j4(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function O4(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var s=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(s.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(i){r[i]=i}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var F4=O4()?Object.assign:function(n,e){for(var t,s=j4(n),r,i=1;i<arguments.length;i++){t=Object(arguments[i]);for(var o in t)D4.call(t,o)&&(s[o]=t[o]);if(mP){r=mP(t);for(var a=0;a<r.length;a++)I4.call(t,r[a])&&(s[r[a]]=t[r[a]])}}return s};const B4=el(F4);var su={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},ce={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(ce).map(function(n){return ce[n]});var Ze={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},Mb={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},hm={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},$4=Object.keys(Mb).reduce(function(n,e){return n[Mb[e]]=e,n},{}),U4=[ce.NOSCRIPT,ce.SCRIPT,ce.STYLE],xr="data-react-helmet",V4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},z4=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},H4=function(){function n(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,s){return t&&n(e.prototype,t),s&&n(e,s),e}}(),jn=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},G4=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},gP=function(n,e){var t={};for(var s in n)e.indexOf(s)>=0||Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},W4=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},US=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},q4=function(e){var t=ud(e,ce.TITLE),s=ud(e,hm.TITLE_TEMPLATE);if(s&&t)return s.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=ud(e,hm.DEFAULT_TITLE);return t||r||void 0},K4=function(e){return ud(e,hm.ON_CHANGE_CLIENT_STATE)||function(){}},hA=function(e,t){return t.filter(function(s){return typeof s[e]<"u"}).map(function(s){return s[e]}).reduce(function(s,r){return jn({},s,r)},{})},X4=function(e,t){return t.filter(function(s){return typeof s[ce.BASE]<"u"}).map(function(s){return s[ce.BASE]}).reverse().reduce(function(s,r){if(!s.length)for(var i=Object.keys(r),o=0;o<i.length;o++){var a=i[o],l=a.toLowerCase();if(e.indexOf(l)!==-1&&r[l])return s.concat(r)}return s},[])},zf=function(e,t,s){var r={};return s.filter(function(i){return Array.isArray(i[e])?!0:(typeof i[e]<"u"&&Z4("Helmet: "+e+' should be of type "Array". Instead found type "'+V4(i[e])+'"'),!1)}).map(function(i){return i[e]}).reverse().reduce(function(i,o){var a={};o.filter(function(f){for(var p=void 0,y=Object.keys(f),g=0;g<y.length;g++){var S=y[g],v=S.toLowerCase();t.indexOf(v)!==-1&&!(p===Ze.REL&&f[p].toLowerCase()==="canonical")&&!(v===Ze.REL&&f[v].toLowerCase()==="stylesheet")&&(p=v),t.indexOf(S)!==-1&&(S===Ze.INNER_HTML||S===Ze.CSS_TEXT||S===Ze.ITEM_PROP)&&(p=S)}if(!p||!f[p])return!1;var b=f[p].toLowerCase();return r[p]||(r[p]={}),a[p]||(a[p]={}),r[p][b]?!1:(a[p][b]=!0,!0)}).reverse().forEach(function(f){return i.push(f)});for(var l=Object.keys(a),u=0;u<l.length;u++){var d=l[u],h=B4({},r[d],a[d]);r[d]=h}return i},[]).reverse()},ud=function(e,t){for(var s=e.length-1;s>=0;s--){var r=e[s];if(r.hasOwnProperty(t))return r[t]}return null},Y4=function(e){return{baseTag:X4([Ze.HREF,Ze.TARGET],e),bodyAttributes:hA(su.BODY,e),defer:ud(e,hm.DEFER),encode:ud(e,hm.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:hA(su.HTML,e),linkTags:zf(ce.LINK,[Ze.REL,Ze.HREF],e),metaTags:zf(ce.META,[Ze.NAME,Ze.CHARSET,Ze.HTTPEQUIV,Ze.PROPERTY,Ze.ITEM_PROP],e),noscriptTags:zf(ce.NOSCRIPT,[Ze.INNER_HTML],e),onChangeClientState:K4(e),scriptTags:zf(ce.SCRIPT,[Ze.SRC,Ze.INNER_HTML],e),styleTags:zf(ce.STYLE,[Ze.CSS_TEXT],e),title:q4(e),titleAttributes:hA(su.TITLE,e)}},VS=function(){var n=Date.now();return function(e){var t=Date.now();t-n>16?(n=t,e(t)):setTimeout(function(){VS(e)},0)}}(),yP=function(e){return clearTimeout(e)},Q4=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||VS:global.requestAnimationFrame||VS,J4=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||yP:global.cancelAnimationFrame||yP,Z4=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},Hf=null,e5=function(e){Hf&&J4(Hf),e.defer?Hf=Q4(function(){vP(e,function(){Hf=null})}):(vP(e),Hf=null)},vP=function(e,t){var s=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,u=e.onChangeClientState,d=e.scriptTags,h=e.styleTags,f=e.title,p=e.titleAttributes;zS(ce.BODY,r),zS(ce.HTML,i),t5(f,p);var y={baseTag:_u(ce.BASE,s),linkTags:_u(ce.LINK,o),metaTags:_u(ce.META,a),noscriptTags:_u(ce.NOSCRIPT,l),scriptTags:_u(ce.SCRIPT,d),styleTags:_u(ce.STYLE,h)},g={},S={};Object.keys(y).forEach(function(v){var b=y[v],A=b.newTags,_=b.oldTags;A.length&&(g[v]=A),_.length&&(S[v]=y[v].oldTags)}),t&&t(),u(e,g,S)},rL=function(e){return Array.isArray(e)?e.join(""):e},t5=function(e,t){typeof e<"u"&&document.title!==e&&(document.title=rL(e)),zS(ce.TITLE,t)},zS=function(e,t){var s=document.getElementsByTagName(e)[0];if(s){for(var r=s.getAttribute(xr),i=r?r.split(","):[],o=[].concat(i),a=Object.keys(t),l=0;l<a.length;l++){var u=a[l],d=t[u]||"";s.getAttribute(u)!==d&&s.setAttribute(u,d),i.indexOf(u)===-1&&i.push(u);var h=o.indexOf(u);h!==-1&&o.splice(h,1)}for(var f=o.length-1;f>=0;f--)s.removeAttribute(o[f]);i.length===o.length?s.removeAttribute(xr):s.getAttribute(xr)!==a.join(",")&&s.setAttribute(xr,a.join(","))}},_u=function(e,t){var s=document.head||document.querySelector(ce.HEAD),r=s.querySelectorAll(e+"["+xr+"]"),i=Array.prototype.slice.call(r),o=[],a=void 0;return t&&t.length&&t.forEach(function(l){var u=document.createElement(e);for(var d in l)if(l.hasOwnProperty(d))if(d===Ze.INNER_HTML)u.innerHTML=l.innerHTML;else if(d===Ze.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var h=typeof l[d]>"u"?"":l[d];u.setAttribute(d,h)}u.setAttribute(xr,"true"),i.some(function(f,p){return a=p,u.isEqualNode(f)})?i.splice(a,1):o.push(u)}),i.forEach(function(l){return l.parentNode.removeChild(l)}),o.forEach(function(l){return s.appendChild(l)}),{oldTags:i,newTags:o}},iL=function(e){return Object.keys(e).reduce(function(t,s){var r=typeof e[s]<"u"?s+'="'+e[s]+'"':""+s;return t?t+" "+r:r},"")},n5=function(e,t,s,r){var i=iL(s),o=rL(t);return i?"<"+e+" "+xr+'="true" '+i+">"+US(o,r)+"</"+e+">":"<"+e+" "+xr+'="true">'+US(o,r)+"</"+e+">"},s5=function(e,t,s){return t.reduce(function(r,i){var o=Object.keys(i).filter(function(u){return!(u===Ze.INNER_HTML||u===Ze.CSS_TEXT)}).reduce(function(u,d){var h=typeof i[d]>"u"?d:d+'="'+US(i[d],s)+'"';return u?u+" "+h:h},""),a=i.innerHTML||i.cssText||"",l=U4.indexOf(e)===-1;return r+"<"+e+" "+xr+'="true" '+o+(l?"/>":">"+a+"</"+e+">")},"")},oL=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(s,r){return s[Mb[r]||r]=e[r],s},t)},r5=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(s,r){return s[$4[r]||r]=e[r],s},t)},i5=function(e,t,s){var r,i=(r={key:t},r[xr]=!0,r),o=oL(s,i);return[he.createElement(ce.TITLE,o,t)]},o5=function(e,t){return t.map(function(s,r){var i,o=(i={key:r},i[xr]=!0,i);return Object.keys(s).forEach(function(a){var l=Mb[a]||a;if(l===Ze.INNER_HTML||l===Ze.CSS_TEXT){var u=s.innerHTML||s.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[l]=s[a]}),he.createElement(e,o)})},di=function(e,t,s){switch(e){case ce.TITLE:return{toComponent:function(){return i5(e,t.title,t.titleAttributes)},toString:function(){return n5(e,t.title,t.titleAttributes,s)}};case su.BODY:case su.HTML:return{toComponent:function(){return oL(t)},toString:function(){return iL(t)}};default:return{toComponent:function(){return o5(e,t)},toString:function(){return s5(e,t,s)}}}},aL=function(e){var t=e.baseTag,s=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,o=e.linkTags,a=e.metaTags,l=e.noscriptTags,u=e.scriptTags,d=e.styleTags,h=e.title,f=h===void 0?"":h,p=e.titleAttributes;return{base:di(ce.BASE,t,r),bodyAttributes:di(su.BODY,s,r),htmlAttributes:di(su.HTML,i,r),link:di(ce.LINK,o,r),meta:di(ce.META,a,r),noscript:di(ce.NOSCRIPT,l,r),script:di(ce.SCRIPT,u,r),style:di(ce.STYLE,d,r),title:di(ce.TITLE,{title:f,titleAttributes:p},r)}},a5=function(e){var t,s;return s=t=function(r){G4(i,r);function i(){return z4(this,i),W4(this,r.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(a){return!L4(this.props,a)},i.prototype.mapNestedChildrenToProps=function(a,l){if(!l)return null;switch(a.type){case ce.SCRIPT:case ce.NOSCRIPT:return{innerHTML:l};case ce.STYLE:return{cssText:l}}throw new Error("<"+a.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(a){var l,u=a.child,d=a.arrayTypeChildren,h=a.newChildProps,f=a.nestedChildren;return jn({},d,(l={},l[u.type]=[].concat(d[u.type]||[],[jn({},h,this.mapNestedChildrenToProps(u,f))]),l))},i.prototype.mapObjectTypeChildren=function(a){var l,u,d=a.child,h=a.newProps,f=a.newChildProps,p=a.nestedChildren;switch(d.type){case ce.TITLE:return jn({},h,(l={},l[d.type]=p,l.titleAttributes=jn({},f),l));case ce.BODY:return jn({},h,{bodyAttributes:jn({},f)});case ce.HTML:return jn({},h,{htmlAttributes:jn({},f)})}return jn({},h,(u={},u[d.type]=jn({},f),u))},i.prototype.mapArrayTypeChildrenToProps=function(a,l){var u=jn({},l);return Object.keys(a).forEach(function(d){var h;u=jn({},u,(h={},h[d]=a[d],h))}),u},i.prototype.warnOnInvalidChildren=function(a,l){return!0},i.prototype.mapChildrenToProps=function(a,l){var u=this,d={};return he.Children.forEach(a,function(h){if(!(!h||!h.props)){var f=h.props,p=f.children,y=gP(f,["children"]),g=r5(y);switch(u.warnOnInvalidChildren(h,p),h.type){case ce.LINK:case ce.META:case ce.NOSCRIPT:case ce.SCRIPT:case ce.STYLE:d=u.flattenArrayTypeChildren({child:h,arrayTypeChildren:d,newChildProps:g,nestedChildren:p});break;default:l=u.mapObjectTypeChildren({child:h,newProps:l,newChildProps:g,nestedChildren:p});break}}}),l=this.mapArrayTypeChildrenToProps(d,l),l},i.prototype.render=function(){var a=this.props,l=a.children,u=gP(a,["children"]),d=jn({},u);return l&&(d=this.mapChildrenToProps(l,d)),he.createElement(e,d)},H4(i,null,[{key:"canUseDOM",set:function(a){e.canUseDOM=a}}]),i}(he.Component),t.propTypes={base:Xe.object,bodyAttributes:Xe.object,children:Xe.oneOfType([Xe.arrayOf(Xe.node),Xe.node]),defaultTitle:Xe.string,defer:Xe.bool,encodeSpecialCharacters:Xe.bool,htmlAttributes:Xe.object,link:Xe.arrayOf(Xe.object),meta:Xe.arrayOf(Xe.object),noscript:Xe.arrayOf(Xe.object),onChangeClientState:Xe.func,script:Xe.arrayOf(Xe.object),style:Xe.arrayOf(Xe.object),title:Xe.string,titleAttributes:Xe.object,titleTemplate:Xe.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var r=e.rewind();return r||(r=aL({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),r},s},l5=function(){return null},c5=T4(Y4,e5,aL)(l5),HS=a5(c5);HS.renderStatic=HS.rewind;function Rn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function bP(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function lL(...n){return e=>{let t=!1;const s=n.map(r=>{const i=bP(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():bP(n[r],null)}}}}function yo(...n){return C.useCallback(lL(...n),n)}function c1(n,e=[]){let t=[];function s(i,o){const a=C.createContext(o),l=t.length;t=[...t,o];const u=h=>{var v;const{scope:f,children:p,...y}=h,g=((v=f==null?void 0:f[n])==null?void 0:v[l])||a,S=C.useMemo(()=>y,Object.values(y));return m.jsx(g.Provider,{value:S,children:p})};u.displayName=i+"Provider";function d(h,f){var g;const p=((g=f==null?void 0:f[n])==null?void 0:g[l])||a,y=C.useContext(p);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=t.map(o=>C.createContext(o));return function(a){const l=(a==null?void 0:a[n])||i;return C.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return r.scopeName=n,[s,u5(r,...e)]}function u5(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...a,...h}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Lb(n){const e=h5(n),t=C.forwardRef((s,r)=>{const{children:i,...o}=s,a=C.Children.toArray(i),l=a.find(p5);if(l){const u=l.props.children,d=a.map(h=>h===l?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:h);return m.jsx(e,{...o,ref:r,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return m.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var d5=Lb("Slot");function h5(n){const e=C.forwardRef((t,s)=>{const{children:r,...i}=t;if(C.isValidElement(r)){const o=g5(r),a=m5(i,r.props);return r.type!==C.Fragment&&(a.ref=s?lL(s,o):o),C.cloneElement(r,a)}return C.Children.count(r)>1?C.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var f5=Symbol("radix.slottable");function p5(n){return C.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===f5}function m5(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const l=i(...a);return r(...a),l}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function g5(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function cL(n){const e=n+"CollectionProvider",[t,s]=c1(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:S,children:v}=g,b=he.useRef(null),A=he.useRef(new Map).current;return m.jsx(r,{scope:S,itemMap:A,collectionRef:b,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=Lb(a),u=he.forwardRef((g,S)=>{const{scope:v,children:b}=g,A=i(a,v),_=yo(S,A.collectionRef);return m.jsx(l,{ref:_,children:b})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Lb(d),p=he.forwardRef((g,S)=>{const{scope:v,children:b,...A}=g,_=he.useRef(null),T=yo(S,_),k=i(d,v);return he.useEffect(()=>(k.itemMap.set(_,{ref:_,...A}),()=>void k.itemMap.delete(_))),m.jsx(f,{[h]:"",ref:T,children:b})});p.displayName=d;function y(g){const S=i(n+"CollectionConsumer",g);return he.useCallback(()=>{const b=S.collectionRef.current;if(!b)return[];const A=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(S.itemMap.values()).sort((k,P)=>A.indexOf(k.ref.current)-A.indexOf(P.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:o,Slot:u,ItemSlot:p},y,s]}var y5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Dn=y5.reduce((n,e)=>{const t=Lb(`Primitive.${e}`),s=C.forwardRef((r,i)=>{const{asChild:o,...a}=r,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(l,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function uL(n,e){n&&l1.flushSync(()=>n.dispatchEvent(e))}function cu(n){const e=C.useRef(n);return C.useEffect(()=>{e.current=n}),C.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function v5(n,e=globalThis==null?void 0:globalThis.document){const t=cu(n);C.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var b5="DismissableLayer",GS="dismissableLayer.update",w5="dismissableLayer.pointerDownOutside",x5="dismissableLayer.focusOutside",wP,dL=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hL=C.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...l}=n,u=C.useContext(dL),[d,h]=C.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,p]=C.useState({}),y=yo(e,P=>h(P)),g=Array.from(u.layers),[S]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(S),b=d?g.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,_=b>=v,T=S5(P=>{const R=P.target,L=[...u.branches].some(I=>I.contains(R));!_||L||(r==null||r(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),k=_5(P=>{const R=P.target;[...u.branches].some(I=>I.contains(R))||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return v5(P=>{b===u.layers.size-1&&(s==null||s(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),C.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(wP=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),xP(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=wP)}},[d,f,t,u]),C.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),xP())},[d,u]),C.useEffect(()=>{const P=()=>p({});return document.addEventListener(GS,P),()=>document.removeEventListener(GS,P)},[]),m.jsx(Dn.div,{...l,ref:y,style:{pointerEvents:A?_?"auto":"none":void 0,...n.style},onFocusCapture:Rn(n.onFocusCapture,k.onFocusCapture),onBlurCapture:Rn(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:Rn(n.onPointerDownCapture,T.onPointerDownCapture)})});hL.displayName=b5;var A5="DismissableLayerBranch",fL=C.forwardRef((n,e)=>{const t=C.useContext(dL),s=C.useRef(null),r=yo(e,s);return C.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),m.jsx(Dn.div,{...n,ref:r})});fL.displayName=A5;function S5(n,e=globalThis==null?void 0:globalThis.document){const t=cu(n),s=C.useRef(!1),r=C.useRef(()=>{});return C.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let l=function(){pL(w5,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=l,e.addEventListener("click",r.current,{once:!0})):l()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function _5(n,e=globalThis==null?void 0:globalThis.document){const t=cu(n),s=C.useRef(!1);return C.useEffect(()=>{const r=i=>{i.target&&!s.current&&pL(x5,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function xP(){const n=new CustomEvent(GS);document.dispatchEvent(n)}function pL(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?uL(r,i):r.dispatchEvent(i)}var E5=hL,C5=fL,uu=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},T5="Portal",mL=C.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[r,i]=C.useState(!1);uu(()=>i(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?m4.createPortal(m.jsx(Dn.div,{...s,ref:e}),o):null});mL.displayName=T5;function k5(n,e){return C.useReducer((t,s)=>e[t][s]??t,n)}var zC=n=>{const{present:e,children:t}=n,s=P5(e),r=typeof t=="function"?t({present:s.isPresent}):C.Children.only(t),i=yo(s.ref,R5(r));return typeof t=="function"||s.isPresent?C.cloneElement(r,{ref:i}):null};zC.displayName="Presence";function P5(n){const[e,t]=C.useState(),s=C.useRef(null),r=C.useRef(n),i=C.useRef("none"),o=n?"mounted":"unmounted",[a,l]=k5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=Bv(s.current);i.current=a==="mounted"?u:"none"},[a]),uu(()=>{const u=s.current,d=r.current;if(d!==n){const f=i.current,p=Bv(u);n?l("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&f!==p?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,l]),uu(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=p=>{const g=Bv(s.current).includes(CSS.escape(p.animationName));if(p.target===e&&g&&(l("ANIMATION_END"),!r.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},f=p=>{p.target===e&&(i.current=Bv(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(u=>{s.current=u?getComputedStyle(u):null,t(u)},[])}}function Bv(n){return(n==null?void 0:n.animationName)||"none"}function R5(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var N5=Q2[" useInsertionEffect ".trim().toString()]||uu;function u1({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,i,o]=M5({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r;{const d=C.useRef(n!==void 0);C.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,s])}const u=C.useCallback(d=>{var h;if(a){const f=L5(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,n,i,o]);return[l,u]}function M5({defaultProp:n,onChange:e}){const[t,s]=C.useState(n),r=C.useRef(t),i=C.useRef(e);return N5(()=>{i.current=e},[e]),C.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,s,i]}function L5(n){return typeof n=="function"}var D5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I5="VisuallyHidden",HC=C.forwardRef((n,e)=>m.jsx(Dn.span,{...n,ref:e,style:{...D5,...n.style}}));HC.displayName=I5;var GC="ToastProvider",[WC,j5,O5]=cL("Toast"),[gL,T7]=c1("Toast",[O5]),[F5,d1]=gL(GC),yL=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=n,[a,l]=C.useState(null),[u,d]=C.useState(0),h=C.useRef(!1),f=C.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${GC}\`. Expected non-empty \`string\`.`),m.jsx(WC.Provider,{scope:e,children:m.jsx(F5,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:l,onToastAdd:C.useCallback(()=>d(p=>p+1),[]),onToastRemove:C.useCallback(()=>d(p=>p-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};yL.displayName=GC;var vL="ToastViewport",B5=["F8"],WS="toast.viewportPause",qS="toast.viewportResume",bL=C.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=B5,label:r="Notifications ({hotkey})",...i}=n,o=d1(vL,t),a=j5(t),l=C.useRef(null),u=C.useRef(null),d=C.useRef(null),h=C.useRef(null),f=yo(e,h,o.onViewportChange),p=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;C.useEffect(()=>{const S=v=>{var A;s.length!==0&&s.every(_=>v[_]||v.code===_)&&((A=h.current)==null||A.focus())};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)},[s]),C.useEffect(()=>{const S=l.current,v=h.current;if(y&&S&&v){const b=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(WS);v.dispatchEvent(k),o.isClosePausedRef.current=!0}},A=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(qS);v.dispatchEvent(k),o.isClosePausedRef.current=!1}},_=k=>{!S.contains(k.relatedTarget)&&A()},T=()=>{S.contains(document.activeElement)||A()};return S.addEventListener("focusin",b),S.addEventListener("focusout",_),S.addEventListener("pointermove",b),S.addEventListener("pointerleave",T),window.addEventListener("blur",b),window.addEventListener("focus",A),()=>{S.removeEventListener("focusin",b),S.removeEventListener("focusout",_),S.removeEventListener("pointermove",b),S.removeEventListener("pointerleave",T),window.removeEventListener("blur",b),window.removeEventListener("focus",A)}}},[y,o.isClosePausedRef]);const g=C.useCallback(({tabbingDirection:S})=>{const b=a().map(A=>{const _=A.ref.current,T=[_,...J5(_)];return S==="forwards"?T:T.reverse()});return(S==="forwards"?b.reverse():b).flat()},[a]);return C.useEffect(()=>{const S=h.current;if(S){const v=b=>{var T,k,P;const A=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!A){const R=document.activeElement,L=b.shiftKey;if(b.target===S&&L){(T=u.current)==null||T.focus();return}const D=g({tabbingDirection:L?"backwards":"forwards"}),V=D.findIndex(j=>j===R);fA(D.slice(V+1))?b.preventDefault():L?(k=u.current)==null||k.focus():(P=d.current)==null||P.focus()}};return S.addEventListener("keydown",v),()=>S.removeEventListener("keydown",v)}},[a,g]),m.jsxs(C5,{ref:l,role:"region","aria-label":r.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&m.jsx(KS,{ref:u,onFocusFromOutsideViewport:()=>{const S=g({tabbingDirection:"forwards"});fA(S)}}),m.jsx(WC.Slot,{scope:t,children:m.jsx(Dn.ol,{tabIndex:-1,...i,ref:f})}),y&&m.jsx(KS,{ref:d,onFocusFromOutsideViewport:()=>{const S=g({tabbingDirection:"backwards"});fA(S)}})]})});bL.displayName=vL;var wL="ToastFocusProxy",KS=C.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=d1(wL,t);return m.jsx(HC,{tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&s()}})});KS.displayName=wL;var ov="Toast",$5="toast.swipeStart",U5="toast.swipeMove",V5="toast.swipeCancel",z5="toast.swipeEnd",xL=C.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...o}=n,[a,l]=u1({prop:s,defaultProp:r??!0,onChange:i,caller:ov});return m.jsx(zC,{present:t||a,children:m.jsx(W5,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:cu(n.onPause),onResume:cu(n.onResume),onSwipeStart:Rn(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Rn(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Rn(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Rn(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});xL.displayName=ov;var[H5,G5]=gL(ov,{onClose(){}}),W5=C.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:p,...y}=n,g=d1(ov,t),[S,v]=C.useState(null),b=yo(e,j=>v(j)),A=C.useRef(null),_=C.useRef(null),T=r||g.duration,k=C.useRef(0),P=C.useRef(T),R=C.useRef(0),{onToastAdd:L,onToastRemove:I}=g,O=cu(()=>{var N;(S==null?void 0:S.contains(document.activeElement))&&((N=g.viewport)==null||N.focus()),o()}),D=C.useCallback(j=>{!j||j===1/0||(window.clearTimeout(R.current),k.current=new Date().getTime(),R.current=window.setTimeout(O,j))},[O]);C.useEffect(()=>{const j=g.viewport;if(j){const N=()=>{D(P.current),u==null||u()},M=()=>{const B=new Date().getTime()-k.current;P.current=P.current-B,window.clearTimeout(R.current),l==null||l()};return j.addEventListener(WS,M),j.addEventListener(qS,N),()=>{j.removeEventListener(WS,M),j.removeEventListener(qS,N)}}},[g.viewport,T,l,u,D]),C.useEffect(()=>{i&&!g.isClosePausedRef.current&&D(T)},[i,T,g.isClosePausedRef,D]),C.useEffect(()=>(L(),()=>I()),[L,I]);const V=C.useMemo(()=>S?kL(S):null,[S]);return g.viewport?m.jsxs(m.Fragment,{children:[V&&m.jsx(q5,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:V}),m.jsx(H5,{scope:t,onClose:O,children:l1.createPortal(m.jsx(WC.ItemSlot,{scope:t,children:m.jsx(E5,{asChild:!0,onEscapeKeyDown:Rn(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||O(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:m.jsx(Dn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Rn(n.onKeyDown,j=>{j.key==="Escape"&&(a==null||a(j.nativeEvent),j.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,O()))}),onPointerDown:Rn(n.onPointerDown,j=>{j.button===0&&(A.current={x:j.clientX,y:j.clientY})}),onPointerMove:Rn(n.onPointerMove,j=>{if(!A.current)return;const N=j.clientX-A.current.x,M=j.clientY-A.current.y,B=!!_.current,F=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,U=F?$(0,N):0,q=F?0:$(0,M),K=j.pointerType==="touch"?10:2,z={x:U,y:q},X={originalEvent:j,delta:z};B?(_.current=z,$v(U5,h,X,{discrete:!1})):AP(z,g.swipeDirection,K)?(_.current=z,$v($5,d,X,{discrete:!1}),j.target.setPointerCapture(j.pointerId)):(Math.abs(N)>K||Math.abs(M)>K)&&(A.current=null)}),onPointerUp:Rn(n.onPointerUp,j=>{const N=_.current,M=j.target;if(M.hasPointerCapture(j.pointerId)&&M.releasePointerCapture(j.pointerId),_.current=null,A.current=null,N){const B=j.currentTarget,F={originalEvent:j,delta:N};AP(N,g.swipeDirection,g.swipeThreshold)?$v(z5,p,F,{discrete:!0}):$v(V5,f,F,{discrete:!0}),B.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),q5=n=>{const{__scopeToast:e,children:t,...s}=n,r=d1(ov,e),[i,o]=C.useState(!1),[a,l]=C.useState(!1);return Y5(()=>o(!0)),C.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:m.jsx(mL,{asChild:!0,children:m.jsx(HC,{...s,children:i&&m.jsxs(m.Fragment,{children:[r.label," ",t]})})})},K5="ToastTitle",AL=C.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return m.jsx(Dn.div,{...s,ref:e})});AL.displayName=K5;var X5="ToastDescription",SL=C.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return m.jsx(Dn.div,{...s,ref:e})});SL.displayName=X5;var _L="ToastAction",EL=C.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?m.jsx(TL,{altText:t,asChild:!0,children:m.jsx(qC,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${_L}\`. Expected non-empty \`string\`.`),null)});EL.displayName=_L;var CL="ToastClose",qC=C.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=G5(CL,t);return m.jsx(TL,{asChild:!0,children:m.jsx(Dn.button,{type:"button",...s,ref:e,onClick:Rn(n.onClick,r.onClose)})})});qC.displayName=CL;var TL=C.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return m.jsx(Dn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function kL(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),Q5(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...kL(s))}}),e}function $v(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?uL(r,i):r.dispatchEvent(i)}var AP=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function Y5(n=()=>{}){const e=cu(n);uu(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function Q5(n){return n.nodeType===n.ELEMENT_NODE}function J5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function fA(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Z5=yL,PL=bL,RL=xL,NL=AL,ML=SL,LL=EL,DL=qC;function IL(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=IL(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Rf(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=IL(n))&&(s&&(s+=" "),s+=e);return s}const SP=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,_P=Rf,jL=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return _P(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const f=SP(d)||SP(h);return r[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),l=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...p}=d;return Object.entries(p).every(y=>{let[g,S]=y;return Array.isArray(S)?S.includes({...i,...a}[g]):{...i,...a}[g]===S})?[...u,h,f]:u},[]);return _P(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};var e$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const t$=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),we=(n,e)=>{const t=C.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...l},u)=>C.createElement("svg",{ref:u,...e$,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${t$(n)}`,...l},[...e.map(([d,h])=>C.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},n$=we("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),s$=we("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),r$=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),OL=we("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),KC=we("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),i$=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),o$=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),a$=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),FL=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),l$=we("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),c$=we("CupSoda",[["path",{d:"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8",key:"8166m8"}],["path",{d:"M5 8h14",key:"pcz4l3"}],["path",{d:"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"yjz344"}],["path",{d:"m12 8 1-6h2",key:"3ybfa4"}]]),u$=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),BL=we("Drama",[["path",{d:"M 10 11h.01",key:"1lksi6"}],["path",{d:"M 14 6h.01",key:"1kxpxo"}],["path",{d:"M 18 6h.01",key:"1goweo"}],["path",{d:"M 6.5 13.1h.01",key:"1i19cj"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]]),d$=we("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),$L=we("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),XC=we("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),YC=we("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),UL=we("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),h$=we("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),QC=we("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),f$=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),p$=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),m$=we("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),g$=we("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),y$=we("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),v$=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),b$=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),w$=we("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),x$=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),JC=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),A$=we("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),ZC=we("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),VL=we("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),zL=we("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),h1=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function S$(){for(var n=0,e,t,s="";n<arguments.length;)(e=arguments[n++])&&(t=HL(e))&&(s&&(s+=" "),s+=t);return s}function HL(n){if(typeof n=="string")return n;for(var e,t="",s=0;s<n.length;s++)n[s]&&(e=HL(n[s]))&&(t&&(t+=" "),t+=e);return t}var eT="-";function _$(n){var e=C$(n),t=n.conflictingClassGroups,s=n.conflictingClassGroupModifiers,r=s===void 0?{}:s;function i(a){var l=a.split(eT);return l[0]===""&&l.length!==1&&l.shift(),GL(l,e)||E$(a)}function o(a,l){var u=t[a]||[];return l&&r[a]?[].concat(u,r[a]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function GL(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],s=e.nextPart.get(t),r=s?GL(n.slice(1),s):void 0;if(r)return r;if(e.validators.length!==0){var i=n.join(eT);return(o=e.validators.find(function(a){var l=a.validator;return l(i)}))==null?void 0:o.classGroupId}}var EP=/^\[(.+)\]$/;function E$(n){if(EP.test(n)){var e=EP.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function C$(n){var e=n.theme,t=n.prefix,s={nextPart:new Map,validators:[]},r=k$(Object.entries(n.classGroups),t);return r.forEach(function(i){var o=i[0],a=i[1];XS(a,s,o,e)}),s}function XS(n,e,t,s){n.forEach(function(r){if(typeof r=="string"){var i=r===""?e:CP(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(T$(r)){XS(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(function(o){var a=o[0],l=o[1];XS(l,CP(e,a),t,s)})})}function CP(n,e){var t=n;return e.split(eT).forEach(function(s){t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t}function T$(n){return n.isThemeGetter}function k$(n,e){return e?n.map(function(t){var s=t[0],r=t[1],i=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],u=a[1];return[e+l,u]})):o});return[s,i]}):n}function P$(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,s=new Map;function r(i,o){t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return r(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):r(o,a)}}}var WL="!";function R$(n){var e=n.separator||":",t=e.length===1,s=e[0],r=e.length;return function(o){for(var a=[],l=0,u=0,d,h=0;h<o.length;h++){var f=o[h];if(l===0){if(f===s&&(t||o.slice(h,h+r)===e)){a.push(o.slice(u,h)),u=h+r;continue}if(f==="/"){d=h;continue}}f==="["?l++:f==="]"&&l--}var p=a.length===0?o:o.substring(u),y=p.startsWith(WL),g=y?p.substring(1):p,S=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:S}}}function N$(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(s){var r=s[0]==="[";r?(e.push.apply(e,t.sort().concat([s])),t=[]):t.push(s)}),e.push.apply(e,t.sort()),e}function M$(n){return{cache:P$(n.cacheSize),splitModifiers:R$(n),..._$(n)}}var L$=/\s+/;function D$(n,e){var t=e.splitModifiers,s=e.getClassGroupId,r=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(L$).map(function(o){var a=t(o),l=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,f=s(h?d.substring(0,h):d),p=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=s(d),!f)return{isTailwindClass:!1,originalClassName:o};p=!1}var y=N$(l).join(":"),g=u?y+WL:y;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:p}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,u=o.hasPostfixModifier,d=a+l;return i.has(d)?!1:(i.add(d),r(l,u).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function I$(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var s,r,i,o=a;function a(u){var d=e[0],h=e.slice(1),f=h.reduce(function(p,y){return y(p)},d());return s=M$(f),r=s.cache.get,i=s.cache.set,o=l,l(u)}function l(u){var d=r(u);if(d)return d;var h=D$(u,s);return i(u,h),h}return function(){return o(S$.apply(null,arguments))}}function Ge(n){var e=function(s){return s[n]||[]};return e.isThemeGetter=!0,e}var qL=/^\[(?:([a-z-]+):)?(.+)\]$/i,j$=/^\d+\/\d+$/,O$=new Set(["px","full","screen"]),F$=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,B$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,$$=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function er(n){return El(n)||O$.has(n)||j$.test(n)||YS(n)}function YS(n){return mu(n,"length",W$)}function U$(n){return mu(n,"size",KL)}function V$(n){return mu(n,"position",KL)}function z$(n){return mu(n,"url",q$)}function Uv(n){return mu(n,"number",El)}function El(n){return!Number.isNaN(Number(n))}function H$(n){return n.endsWith("%")&&El(n.slice(0,-1))}function Gf(n){return TP(n)||mu(n,"number",TP)}function ye(n){return qL.test(n)}function Wf(){return!0}function Co(n){return F$.test(n)}function G$(n){return mu(n,"",K$)}function mu(n,e,t){var s=qL.exec(n);return s?s[1]?s[1]===e:t(s[2]):!1}function W$(n){return B$.test(n)}function KL(){return!1}function q$(n){return n.startsWith("url(")}function TP(n){return Number.isInteger(Number(n))}function K$(n){return $$.test(n)}function X$(){var n=Ge("colors"),e=Ge("spacing"),t=Ge("blur"),s=Ge("brightness"),r=Ge("borderColor"),i=Ge("borderRadius"),o=Ge("borderSpacing"),a=Ge("borderWidth"),l=Ge("contrast"),u=Ge("grayscale"),d=Ge("hueRotate"),h=Ge("invert"),f=Ge("gap"),p=Ge("gradientColorStops"),y=Ge("gradientColorStopPositions"),g=Ge("inset"),S=Ge("margin"),v=Ge("opacity"),b=Ge("padding"),A=Ge("saturate"),_=Ge("scale"),T=Ge("sepia"),k=Ge("skew"),P=Ge("space"),R=Ge("translate"),L=function(){return["auto","contain","none"]},I=function(){return["auto","hidden","clip","visible","scroll"]},O=function(){return["auto",ye,e]},D=function(){return[ye,e]},V=function(){return["",er]},j=function(){return["auto",El,ye]},N=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},M=function(){return["solid","dashed","dotted","double","none"]},B=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},F=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",ye]},U=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},q=function(){return[El,Uv]},K=function(){return[El,ye]};return{cacheSize:500,theme:{colors:[Wf],spacing:[er],blur:["none","",Co,ye],brightness:q(),borderColor:[n],borderRadius:["none","","full",Co,ye],borderSpacing:D(),borderWidth:V(),contrast:q(),grayscale:$(),hueRotate:K(),invert:$(),gap:D(),gradientColorStops:[n],gradientColorStopPositions:[H$,YS],inset:O(),margin:O(),opacity:q(),padding:D(),saturate:q(),scale:q(),sepia:$(),skew:K(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Co]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(N(),[ye])}],overflow:[{overflow:I()}],"overflow-x":[{"overflow-x":I()}],"overflow-y":[{"overflow-y":I()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gf]}],basis:[{basis:O()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Gf]}],"grid-cols":[{"grid-cols":[Wf]}],"col-start-end":[{col:["auto",{span:["full",Gf]},ye]}],"col-start":[{"col-start":j()}],"col-end":[{"col-end":j()}],"grid-rows":[{"grid-rows":[Wf]}],"row-start-end":[{row:["auto",{span:[Gf]},ye]}],"row-start":[{"row-start":j()}],"row-end":[{"row-end":j()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(F())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(F(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(F(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[S]}],mx:[{mx:[S]}],my:[{my:[S]}],ms:[{ms:[S]}],me:[{me:[S]}],mt:[{mt:[S]}],mr:[{mr:[S]}],mb:[{mb:[S]}],ml:[{ml:[S]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ye,e]}],"min-w":[{"min-w":["min","max","fit",ye,er]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Co]},Co,ye]}],h:[{h:[ye,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ye,er]}],"max-h":[{"max-h":[ye,e,"min","max","fit"]}],"font-size":[{text:["base",Co,YS]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Uv]}],"font-family":[{font:[Wf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",El,Uv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ye,er]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(M(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",er]}],"underline-offset":[{"underline-offset":["auto",ye,er]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(N(),[V$])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",U$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},z$]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(M(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:M()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(M())}],"outline-offset":[{"outline-offset":[ye,er]}],"outline-w":[{outline:[er]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:V()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[er]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Co,G$]}],"shadow-color":[{shadow:[Wf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":B()}],"bg-blend":[{"bg-blend":B()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Co,ye]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[A]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[A]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:K()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:K()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Gf,ye]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[er,Uv]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Y$=I$(X$);function li(...n){return Y$(Rf(n))}const Q$=Z5,XL=he.forwardRef(({className:n,...e},t)=>m.jsx(PL,{ref:t,className:li("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));XL.displayName=PL.displayName;const J$=jL("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),YL=he.forwardRef(({className:n,variant:e,...t},s)=>m.jsx(RL,{ref:s,className:li(J$({variant:e}),n),...t}));YL.displayName=RL.displayName;const Z$=he.forwardRef(({className:n,...e},t)=>m.jsx(LL,{ref:t,className:li("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Z$.displayName=LL.displayName;const QL=he.forwardRef(({className:n,...e},t)=>m.jsx(DL,{ref:t,className:li("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:m.jsx(h1,{className:"h-4 w-4"})}));QL.displayName=DL.displayName;const JL=he.forwardRef(({className:n,...e},t)=>m.jsx(NL,{ref:t,className:li("text-sm font-semibold",n),...e}));JL.displayName=NL.displayName;const ZL=he.forwardRef(({className:n,...e},t)=>m.jsx(ML,{ref:t,className:li("text-sm opacity-90",n),...e}));ZL.displayName=ML.displayName;const eU=1,tU=1e6,ao={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let pA=0;function nU(){return pA=(pA+1)%Number.MAX_SAFE_INTEGER,pA.toString()}const mA=new Map,kP=n=>{if(mA.has(n))return;const e=setTimeout(()=>{mA.delete(n),$p({type:ao.REMOVE_TOAST,toastId:n})},tU);mA.set(n,e)},sU=(n,e)=>{switch(e.type){case ao.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,eU)};case ao.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case ao.DISMISS_TOAST:{const{toastId:t}=e;return t?kP(t):n.toasts.forEach(s=>{kP(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case ao.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},_0=[];let E0={toasts:[]};function $p(n){E0=sU(E0,n),_0.forEach(e=>{e(E0)})}function nt({...n}){const e=nU(),t=r=>$p({type:ao.UPDATE_TOAST,toast:{...r,id:e}}),s=()=>$p({type:ao.DISMISS_TOAST,toastId:e});return $p({type:ao.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function eD(){const[n,e]=he.useState(E0);return he.useEffect(()=>(_0.push(e),()=>{const t=_0.indexOf(e);t>-1&&_0.splice(t,1)}),[n]),{...n,toast:nt,dismiss:t=>$p({type:ao.DISMISS_TOAST,toastId:t})}}function rU(){const{toasts:n}=eD();return m.jsxs(Q$,{children:[n.map(({id:e,title:t,description:s,action:r,...i})=>m.jsxs(YL,{...i,children:[m.jsxs("div",{className:"grid gap-1",children:[t&&m.jsx(JL,{children:t}),s&&m.jsx(ZL,{children:s})]}),r,m.jsx(QL,{})]},e)),m.jsx(XL,{})]})}const tD=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),f1=C.createContext({}),p1=C.createContext(null),m1=typeof document<"u",tT=m1?C.useLayoutEffect:C.useEffect,nD=C.createContext({strict:!1}),nT=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),iU="framerAppearId",sD="data-"+nT(iU);function oU(n,e,t,s){const{visualElement:r}=C.useContext(f1),i=C.useContext(nD),o=C.useContext(p1),a=C.useContext(tD).reducedMotion,l=C.useRef();s=s||i.renderer,!l.current&&s&&(l.current=s(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;C.useInsertionEffect(()=>{u&&u.update(t,o)});const d=C.useRef(!!(t[sD]&&!window.HandoffComplete));return tT(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),C.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Xu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function aU(n,e,t){return C.useCallback(s=>{s&&n.mount&&n.mount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Xu(t)&&(t.current=s))},[e])}function fm(n){return typeof n=="string"||Array.isArray(n)}function g1(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const sT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rT=["initial",...sT];function y1(n){return g1(n.animate)||rT.some(e=>fm(n[e]))}function rD(n){return!!(y1(n)||n.variants)}function lU(n,e){if(y1(n)){const{initial:t,animate:s}=n;return{initial:t===!1||fm(t)?t:void 0,animate:fm(s)?s:void 0}}return n.inherit!==!1?e:{}}function cU(n){const{initial:e,animate:t}=lU(n,C.useContext(f1));return C.useMemo(()=>({initial:e,animate:t}),[PP(e),PP(t)])}function PP(n){return Array.isArray(n)?n.join(" "):n}const RP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pm={};for(const n in RP)pm[n]={isEnabled:e=>RP[n].some(t=>!!e[t])};function uU(n){for(const e in n)pm[e]={...pm[e],...n[e]}}const iT=C.createContext({}),iD=C.createContext({}),dU=Symbol.for("motionComponentSymbol");function hU({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){n&&uU(n);function i(a,l){let u;const d={...C.useContext(tD),...a,layoutId:fU(a)},{isStatic:h}=d,f=cU(a),p=s(a,h);if(!h&&m1){f.visualElement=oU(r,p,d,e);const y=C.useContext(iD),g=C.useContext(nD).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,n,y))}return C.createElement(f1.Provider,{value:f},u&&f.visualElement?C.createElement(u,{visualElement:f.visualElement,...d}):null,t(r,a,aU(p,f.visualElement,l),p,h,f.visualElement))}const o=C.forwardRef(i);return o[dU]=r,o}function fU({layoutId:n}){const e=C.useContext(iT).id;return e&&n!==void 0?e+"-"+n:n}function pU(n){function e(s,r={}){return hU(n(s,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(s,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const mU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oT(n){return typeof n!="string"||n.includes("-")?!1:!!(mU.indexOf(n)>-1||/[A-Z]/.test(n))}const Db={};function gU(n){Object.assign(Db,n)}const av=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gu=new Set(av);function oD(n,{layout:e,layoutId:t}){return gu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Db[n]||n==="opacity")}const Zn=n=>!!(n&&n.getVelocity),yU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vU=av.length;function bU(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},s,r){let i="";for(let o=0;o<vU;o++){const a=av[o];if(n[a]!==void 0){const l=yU[a]||a;i+=`${l}(${n[a]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(n,s?"":i):t&&s&&(i="none"),i}const aD=n=>e=>typeof e=="string"&&e.startsWith(n),lD=aD("--"),QS=aD("var(--"),wU=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,xU=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Xa=(n,e,t)=>Math.min(Math.max(t,n),e),yu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Up={...yu,transform:n=>Xa(0,1,n)},Vv={...yu,default:1},Vp=n=>Math.round(n*1e5)/1e5,v1=/(-)?([\d]*\.?[\d])+/g,cD=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,AU=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function lv(n){return typeof n=="string"}const cv=n=>({test:e=>lv(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ko=cv("deg"),ai=cv("%"),ie=cv("px"),SU=cv("vh"),_U=cv("vw"),NP={...ai,parse:n=>ai.parse(n)/100,transform:n=>ai.transform(n*100)},MP={...yu,transform:Math.round},uD={borderWidth:ie,borderTopWidth:ie,borderRightWidth:ie,borderBottomWidth:ie,borderLeftWidth:ie,borderRadius:ie,radius:ie,borderTopLeftRadius:ie,borderTopRightRadius:ie,borderBottomRightRadius:ie,borderBottomLeftRadius:ie,width:ie,maxWidth:ie,height:ie,maxHeight:ie,size:ie,top:ie,right:ie,bottom:ie,left:ie,padding:ie,paddingTop:ie,paddingRight:ie,paddingBottom:ie,paddingLeft:ie,margin:ie,marginTop:ie,marginRight:ie,marginBottom:ie,marginLeft:ie,rotate:ko,rotateX:ko,rotateY:ko,rotateZ:ko,scale:Vv,scaleX:Vv,scaleY:Vv,scaleZ:Vv,skew:ko,skewX:ko,skewY:ko,distance:ie,translateX:ie,translateY:ie,translateZ:ie,x:ie,y:ie,z:ie,perspective:ie,transformPerspective:ie,opacity:Up,originX:NP,originY:NP,originZ:ie,zIndex:MP,fillOpacity:Up,strokeOpacity:Up,numOctaves:MP};function aT(n,e,t,s){const{style:r,vars:i,transform:o,transformOrigin:a}=n;let l=!1,u=!1,d=!0;for(const h in e){const f=e[h];if(lD(h)){i[h]=f;continue}const p=uD[h],y=xU(f,p);if(gu.has(h)){if(l=!0,o[h]=y,!d)continue;f!==(p.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=y):r[h]=y}if(e.transform||(l||s?r.transform=bU(n.transform,t,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=a;r.transformOrigin=`${h} ${f} ${p}`}}const lT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dD(n,e,t){for(const s in e)!Zn(e[s])&&!oD(s,t)&&(n[s]=e[s])}function EU({transformTemplate:n},e,t){return C.useMemo(()=>{const s=lT();return aT(s,e,{enableHardwareAcceleration:!t},n),Object.assign({},s.vars,s.style)},[e])}function CU(n,e,t){const s=n.style||{},r={};return dD(r,s,n),Object.assign(r,EU(n,e,t)),n.transformValues?n.transformValues(r):r}function TU(n,e,t){const s={},r=CU(n,e,t);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=r,s}const kU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ib(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||kU.has(n)}let hD=n=>!Ib(n);function PU(n){n&&(hD=e=>e.startsWith("on")?!Ib(e):n(e))}try{PU(require("@emotion/is-prop-valid").default)}catch{}function RU(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(hD(r)||t===!0&&Ib(r)||!e&&!Ib(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function LP(n,e,t){return typeof n=="string"?n:ie.transform(e+t*n)}function NU(n,e,t){const s=LP(e,n.x,n.width),r=LP(t,n.y,n.height);return`${s} ${r}`}const MU={offset:"stroke-dashoffset",array:"stroke-dasharray"},LU={offset:"strokeDashoffset",array:"strokeDasharray"};function DU(n,e,t=1,s=0,r=!0){n.pathLength=1;const i=r?MU:LU;n[i.offset]=ie.transform(-s);const o=ie.transform(e),a=ie.transform(t);n[i.array]=`${o} ${a}`}function cT(n,{attrX:e,attrY:t,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},d,h,f){if(aT(n,u,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:y,dimensions:g}=n;p.transform&&(g&&(y.transform=p.transform),delete p.transform),g&&(r!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=NU(g,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),s!==void 0&&(p.scale=s),o!==void 0&&DU(p,o,a,l,!1)}const fD=()=>({...lT(),attrs:{}}),uT=n=>typeof n=="string"&&n.toLowerCase()==="svg";function IU(n,e,t,s){const r=C.useMemo(()=>{const i=fD();return cT(i,e,{enableHardwareAcceleration:!1},uT(s),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};dD(i,n.style,n),r.style={...i,...r.style}}return r}function jU(n=!1){return(t,s,r,{latestValues:i},o)=>{const l=(oT(t)?IU:TU)(s,i,o,t),d={...RU(s,typeof t=="string",n),...l,ref:r},{children:h}=s,f=C.useMemo(()=>Zn(h)?h.get():h,[h]);return C.createElement(t,{...d,children:f})}}function pD(n,{style:e,vars:t},s,r){Object.assign(n.style,e,r&&r.getProjectionStyles(s));for(const i in t)n.style.setProperty(i,t[i])}const mD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function gD(n,e,t,s){pD(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(mD.has(r)?r:nT(r),e.attrs[r])}function dT(n,e){const{style:t}=n,s={};for(const r in t)(Zn(t[r])||e.style&&Zn(e.style[r])||oD(r,n))&&(s[r]=t[r]);return s}function yD(n,e){const t=dT(n,e);for(const s in n)if(Zn(n[s])||Zn(e[s])){const r=av.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;t[r]=n[s]}return t}function hT(n,e,t,s={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,r)),e}function vD(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const jb=n=>Array.isArray(n),OU=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),FU=n=>jb(n)?n[n.length-1]||0:n;function C0(n){const e=Zn(n)?n.get():n;return OU(e)?e.toValue():e}function BU({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},s,r,i){const o={latestValues:$U(s,r,i,n),renderState:e()};return t&&(o.mount=a=>t(s,a,o)),o}const bD=n=>(e,t)=>{const s=C.useContext(f1),r=C.useContext(p1),i=()=>BU(n,e,s,r);return t?i():vD(i)};function $U(n,e,t,s){const r={},i=s(n,{});for(const f in i)r[f]=C0(i[f]);let{initial:o,animate:a}=n;const l=y1(n),u=rD(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!g1(h)&&(Array.isArray(h)?h:[h]).forEach(p=>{const y=hT(n,p);if(!y)return;const{transitionEnd:g,transition:S,...v}=y;for(const b in v){let A=v[b];if(Array.isArray(A)){const _=d?A.length-1:0;A=A[_]}A!==null&&(r[b]=A)}for(const b in g)r[b]=g[b]}),r}const gt=n=>n;class DP{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function UU(n){let e=new DP,t=new DP,s=0,r=!1,i=!1;const o=new WeakSet,a={schedule:(l,u=!1,d=!1)=>{const h=d&&r,f=h?e:t;return u&&o.add(l),f.add(l)&&h&&r&&(s=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){i=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),s=e.order.length,s)for(let u=0;u<s;u++){const d=e.order[u];d(l),o.has(d)&&(a.schedule(d),n())}r=!1,i&&(i=!1,a.process(l))}};return a}const zv=["prepare","read","update","preRender","render","postRender"],VU=40;function zU(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=zv.reduce((h,f)=>(h[f]=UU(()=>t=!0),h),{}),o=h=>i[h].process(r),a=()=>{const h=performance.now();t=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,VU),1),r.timestamp=h,r.isProcessing=!0,zv.forEach(o),r.isProcessing=!1,t&&e&&(s=!1,n(a))},l=()=>{t=!0,s=!0,r.isProcessing||n(a)};return{schedule:zv.reduce((h,f)=>{const p=i[f];return h[f]=(y,g=!1,S=!1)=>(t||l(),p.schedule(y,g,S)),h},{}),cancel:h=>zv.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:He,cancel:vo,state:mn,steps:gA}=zU(typeof requestAnimationFrame<"u"?requestAnimationFrame:gt,!0),HU={useVisualState:bD({scrapeMotionValuesFromProps:yD,createRenderState:fD,onMount:(n,e,{renderState:t,latestValues:s})=>{He.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),He.render(()=>{cT(t,s,{enableHardwareAcceleration:!1},uT(e.tagName),n.transformTemplate),gD(e,t)})}})},GU={useVisualState:bD({scrapeMotionValuesFromProps:dT,createRenderState:lT})};function WU(n,{forwardMotionProps:e=!1},t,s){return{...oT(n)?HU:GU,preloadedFeatures:t,useRender:jU(e),createVisualElement:s,Component:n}}function lo(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}const wD=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function b1(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const qU=n=>e=>wD(e)&&n(e,b1(e));function uo(n,e,t,s){return lo(n,e,qU(t),s)}const KU=(n,e)=>t=>e(n(t)),Ga=(...n)=>n.reduce(KU);function xD(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const IP=xD("dragHorizontal"),jP=xD("dragVertical");function AD(n){let e=!1;if(n==="y")e=jP();else if(n==="x")e=IP();else{const t=IP(),s=jP();t&&s?e=()=>{t(),s()}:(t&&t(),s&&s())}return e}function SD(){const n=AD(!0);return n?(n(),!1):!0}class rl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function OP(n,e){const t="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),r=(i,o)=>{if(i.pointerType==="touch"||SD())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[s]&&He.update(()=>a[s](i,o))};return uo(n.current,t,r,{passive:!n.getProps()[s]})}class XU extends rl{mount(){this.unmount=Ga(OP(this.node,!0),OP(this.node,!1))}unmount(){}}class YU extends rl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ga(lo(this.node.current,"focus",()=>this.onFocus()),lo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const _D=(n,e)=>e?n===e?!0:_D(n,e.parentElement):!1;function yA(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,b1(t))}class QU extends rl{constructor(){super(...arguments),this.removeStartListeners=gt,this.removeEndListeners=gt,this.removeAccessibleListeners=gt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=uo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();He.update(()=>{!h&&!_D(this.node.current,a.target)?d&&d(a,l):u&&u(a,l)})},{passive:!(s.onTap||s.onPointerUp)}),o=uo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Ga(i,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||yA("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&He.update(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=lo(this.node.current,"keyup",o),yA("down",(a,l)=>{this.startPress(a,l)})},t=lo(this.node.current,"keydown",e),s=()=>{this.isPressing&&yA("cancel",(i,o)=>this.cancelPress(i,o))},r=lo(this.node.current,"blur",s);this.removeAccessibleListeners=Ga(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&He.update(()=>s(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!SD()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&He.update(()=>s(e,t))}mount(){const e=this.node.getProps(),t=uo(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=lo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ga(t,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const JS=new WeakMap,vA=new WeakMap,JU=n=>{const e=JS.get(n.target);e&&e(n)},ZU=n=>{n.forEach(JU)};function eV({root:n,...e}){const t=n||document;vA.has(t)||vA.set(t,{});const s=vA.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(ZU,{root:n,...e})),s[r]}function tV(n,e,t){const s=eV(e);return JS.set(n,t),s.observe(n),()=>{JS.delete(n),s.unobserve(n)}}const nV={some:0,all:1};class sV extends rl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:nV[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(l)};return tV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(rV(e,t))&&this.startObserver()}unmount(){}}function rV({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const iV={inView:{Feature:sV},tap:{Feature:QU},focus:{Feature:YU},hover:{Feature:XU}};function ED(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function oV(n){const e={};return n.values.forEach((t,s)=>e[s]=t.get()),e}function aV(n){const e={};return n.values.forEach((t,s)=>e[s]=t.getVelocity()),e}function w1(n,e,t){const s=n.getProps();return hT(s,e,t!==void 0?t:s.custom,oV(n),aV(n))}let lV=gt,fT=gt;const Wa=n=>n*1e3,ho=n=>n/1e3,cV={current:!1},CD=n=>Array.isArray(n)&&typeof n[0]=="number";function TD(n){return!!(!n||typeof n=="string"&&kD[n]||CD(n)||Array.isArray(n)&&n.every(TD))}const ap=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,kD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ap([0,.65,.55,1]),circOut:ap([.55,0,1,.45]),backIn:ap([.31,.01,.66,-.59]),backOut:ap([.33,1.53,.69,.99])};function PD(n){if(n)return CD(n)?ap(n):Array.isArray(n)?n.map(PD):kD[n]}function uV(n,e,t,{delay:s=0,duration:r,repeat:i=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const d=PD(a);return Array.isArray(d)&&(u.easing=d),n.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function dV(n,{repeat:e,repeatType:t="loop"}){const s=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[s]}const RD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,hV=1e-7,fV=12;function pV(n,e,t,s,r){let i,o,a=0;do o=e+(t-e)/2,i=RD(o,s,r)-n,i>0?t=o:e=o;while(Math.abs(i)>hV&&++a<fV);return o}function uv(n,e,t,s){if(n===e&&t===s)return gt;const r=i=>pV(i,0,1,n,t);return i=>i===0||i===1?i:RD(r(i),e,s)}const mV=uv(.42,0,1,1),gV=uv(0,0,.58,1),ND=uv(.42,0,.58,1),yV=n=>Array.isArray(n)&&typeof n[0]!="number",MD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,LD=n=>e=>1-n(1-e),pT=n=>1-Math.sin(Math.acos(n)),DD=LD(pT),vV=MD(pT),ID=uv(.33,1.53,.69,.99),mT=LD(ID),bV=MD(mT),wV=n=>(n*=2)<1?.5*mT(n):.5*(2-Math.pow(2,-10*(n-1))),xV={linear:gt,easeIn:mV,easeInOut:ND,easeOut:gV,circIn:pT,circInOut:vV,circOut:DD,backIn:mT,backInOut:bV,backOut:ID,anticipate:wV},FP=n=>{if(Array.isArray(n)){fT(n.length===4);const[e,t,s,r]=n;return uv(e,t,s,r)}else if(typeof n=="string")return xV[n];return n},gT=(n,e)=>t=>!!(lv(t)&&AU.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),jD=(n,e,t)=>s=>{if(!lv(s))return s;const[r,i,o,a]=s.match(v1);return{[n]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},AV=n=>Xa(0,255,n),bA={...yu,transform:n=>Math.round(AV(n))},Cl={test:gT("rgb","red"),parse:jD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+bA.transform(n)+", "+bA.transform(e)+", "+bA.transform(t)+", "+Vp(Up.transform(s))+")"};function SV(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const ZS={test:gT("#"),parse:SV,transform:Cl.transform},Yu={test:gT("hsl","hue"),parse:jD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+ai.transform(Vp(e))+", "+ai.transform(Vp(t))+", "+Vp(Up.transform(s))+")"},Tn={test:n=>Cl.test(n)||ZS.test(n)||Yu.test(n),parse:n=>Cl.test(n)?Cl.parse(n):Yu.test(n)?Yu.parse(n):ZS.parse(n),transform:n=>lv(n)?n:n.hasOwnProperty("red")?Cl.transform(n):Yu.transform(n)},at=(n,e,t)=>-t*n+t*e+n;function wA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function _V({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,i=0,o=0;if(!e)r=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=wA(l,a,n+1/3),i=wA(l,a,n),o=wA(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}const xA=(n,e,t)=>{const s=n*n;return Math.sqrt(Math.max(0,t*(e*e-s)+s))},EV=[ZS,Cl,Yu],CV=n=>EV.find(e=>e.test(n));function BP(n){const e=CV(n);let t=e.parse(n);return e===Yu&&(t=_V(t)),t}const OD=(n,e)=>{const t=BP(n),s=BP(e),r={...t};return i=>(r.red=xA(t.red,s.red,i),r.green=xA(t.green,s.green,i),r.blue=xA(t.blue,s.blue,i),r.alpha=at(t.alpha,s.alpha,i),Cl.transform(r))};function TV(n){var e,t;return isNaN(n)&&lv(n)&&(((e=n.match(v1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(cD))===null||t===void 0?void 0:t.length)||0)>0}const FD={regex:wU,countKey:"Vars",token:"${v}",parse:gt},BD={regex:cD,countKey:"Colors",token:"${c}",parse:Tn.parse},$D={regex:v1,countKey:"Numbers",token:"${n}",parse:yu.parse};function AA(n,{regex:e,countKey:t,token:s,parse:r}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,s),n.values.push(...i.map(r)))}function Ob(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&AA(t,FD),AA(t,BD),AA(t,$D),t}function UD(n){return Ob(n).values}function VD(n){const{values:e,numColors:t,numVars:s,tokenised:r}=Ob(n),i=e.length;return o=>{let a=r;for(let l=0;l<i;l++)l<s?a=a.replace(FD.token,o[l]):l<s+t?a=a.replace(BD.token,Tn.transform(o[l])):a=a.replace($D.token,Vp(o[l]));return a}}const kV=n=>typeof n=="number"?0:n;function PV(n){const e=UD(n);return VD(n)(e.map(kV))}const Ya={test:TV,parse:UD,createTransformer:VD,getAnimatableNone:PV},zD=(n,e)=>t=>`${t>0?e:n}`;function HD(n,e){return typeof n=="number"?t=>at(n,e,t):Tn.test(n)?OD(n,e):n.startsWith("var(")?zD(n,e):WD(n,e)}const GD=(n,e)=>{const t=[...n],s=t.length,r=n.map((i,o)=>HD(i,e[o]));return i=>{for(let o=0;o<s;o++)t[o]=r[o](i);return t}},RV=(n,e)=>{const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=HD(n[r],e[r]));return r=>{for(const i in s)t[i]=s[i](r);return t}},WD=(n,e)=>{const t=Ya.createTransformer(e),s=Ob(n),r=Ob(e);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?Ga(GD(s.values,r.values),t):zD(n,e)},mm=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},$P=(n,e)=>t=>at(n,e,t);function NV(n){return typeof n=="number"?$P:typeof n=="string"?Tn.test(n)?OD:WD:Array.isArray(n)?GD:typeof n=="object"?RV:$P}function MV(n,e,t){const s=[],r=t||NV(n[0]),i=n.length-1;for(let o=0;o<i;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||gt:e;a=Ga(l,a)}s.push(a)}return s}function qD(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const i=n.length;if(fT(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=MV(e,s,r),a=o.length,l=u=>{let d=0;if(a>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const h=mm(n[d],n[d+1],u);return o[d](h)};return t?u=>l(Xa(n[0],n[i-1],u)):l}function LV(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=mm(0,e,s);n.push(at(t,1,r))}}function DV(n){const e=[0];return LV(e,n.length-1),e}function IV(n,e){return n.map(t=>t*e)}function jV(n,e){return n.map(()=>e||ND).splice(0,n.length-1)}function Fb({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=yV(s)?s.map(FP):FP(s),i={done:!1,value:e[0]},o=IV(t&&t.length===e.length?t:DV(e),n),a=qD(o,e,{ease:Array.isArray(r)?r:jV(e,r)});return{calculatedDuration:n,next:l=>(i.value=a(l),i.done=l>=n,i)}}function KD(n,e){return e?n*(1e3/e):0}const OV=5;function XD(n,e,t){const s=Math.max(e-OV,0);return KD(t-n(s),e-s)}const SA=.001,FV=.01,UP=10,BV=.05,$V=1;function UV({duration:n=800,bounce:e=.25,velocity:t=0,mass:s=1}){let r,i;lV(n<=Wa(UP));let o=1-e;o=Xa(BV,$V,o),n=Xa(FV,UP,ho(n)),o<1?(r=u=>{const d=u*o,h=d*n,f=d-t,p=e_(u,o),y=Math.exp(-h);return SA-f/p*y},i=u=>{const h=u*o*n,f=h*t+t,p=Math.pow(o,2)*Math.pow(u,2)*n,y=Math.exp(-h),g=e_(Math.pow(u,2),o);return(-r(u)+SA>0?-1:1)*((f-p)*y)/g}):(r=u=>{const d=Math.exp(-u*n),h=(u-t)*n+1;return-SA+d*h},i=u=>{const d=Math.exp(-u*n),h=(t-u)*(n*n);return d*h});const a=5/n,l=zV(r,i,a);if(n=Wa(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:n}}}const VV=12;function zV(n,e,t){let s=t;for(let r=1;r<VV;r++)s=s-n(s)/e(s);return s}function e_(n,e){return n*Math.sqrt(1-e*e)}const HV=["duration","bounce"],GV=["stiffness","damping","mass"];function VP(n,e){return e.some(t=>n[t]!==void 0)}function WV(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!VP(n,GV)&&VP(n,HV)){const t=UV(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function YD({keyframes:n,restDelta:e,restSpeed:t,...s}){const r=n[0],i=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=WV({...s,velocity:-ho(s.velocity||0)}),p=h||0,y=l/(2*Math.sqrt(a*u)),g=i-r,S=ho(Math.sqrt(a/u)),v=Math.abs(g)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let b;if(y<1){const A=e_(S,y);b=_=>{const T=Math.exp(-y*S*_);return i-T*((p+y*S*g)/A*Math.sin(A*_)+g*Math.cos(A*_))}}else if(y===1)b=A=>i-Math.exp(-S*A)*(g+(p+S*g)*A);else{const A=S*Math.sqrt(y*y-1);b=_=>{const T=Math.exp(-y*S*_),k=Math.min(A*_,300);return i-T*((p+y*S*g)*Math.sinh(k)+A*g*Math.cosh(k))/A}}return{calculatedDuration:f&&d||null,next:A=>{const _=b(A);if(f)o.done=A>=d;else{let T=p;A!==0&&(y<1?T=XD(b,A,_):T=0);const k=Math.abs(T)<=t,P=Math.abs(i-_)<=e;o.done=k&&P}return o.value=o.done?i:_,o}}}function zP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:d}){const h=n[0],f={done:!1,value:h},p=R=>a!==void 0&&R<a||l!==void 0&&R>l,y=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let g=t*e;const S=h+g,v=o===void 0?S:o(S);v!==S&&(g=v-h);const b=R=>-g*Math.exp(-R/s),A=R=>v+b(R),_=R=>{const L=b(R),I=A(R);f.done=Math.abs(L)<=u,f.value=f.done?v:I};let T,k;const P=R=>{p(f.value)&&(T=R,k=YD({keyframes:[f.value,y(f.value)],velocity:XD(A,R,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:R=>{let L=!1;return!k&&T===void 0&&(L=!0,_(R),P(R)),T!==void 0&&R>T?k.next(R-T):(!L&&_(R),f)}}}const qV=n=>{const e=({timestamp:t})=>n(t);return{start:()=>He.update(e,!0),stop:()=>vo(e),now:()=>mn.isProcessing?mn.timestamp:performance.now()}},HP=2e4;function GP(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<HP;)e+=t,s=n.next(e);return e>=HP?1/0:e}const KV={decay:zP,inertia:zP,tween:Fb,keyframes:Fb,spring:YD};function Bb({autoplay:n=!0,delay:e=0,driver:t=qV,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:d,onUpdate:h,...f}){let p=1,y=!1,g,S;const v=()=>{S=new Promise(q=>{g=q})};v();let b;const A=KV[r]||Fb;let _;A!==Fb&&typeof s[0]!="number"&&(_=qD([0,100],s,{clamp:!1}),s=[0,100]);const T=A({...f,keyframes:s});let k;a==="mirror"&&(k=A({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let P="idle",R=null,L=null,I=null;T.calculatedDuration===null&&i&&(T.calculatedDuration=GP(T));const{calculatedDuration:O}=T;let D=1/0,V=1/0;O!==null&&(D=O+o,V=D*(i+1)-o);let j=0;const N=q=>{if(L===null)return;p>0&&(L=Math.min(L,q)),p<0&&(L=Math.min(q-V/p,L)),R!==null?j=R:j=Math.round(q-L)*p;const K=j-e*(p>=0?1:-1),z=p>=0?K<0:K>V;j=Math.max(K,0),P==="finished"&&R===null&&(j=V);let X=j,pe=T;if(i){const yt=Math.min(j,V)/D;let xe=Math.floor(yt),H=yt%1;!H&&yt>=1&&(H=1),H===1&&xe--,xe=Math.min(xe,i+1),!!(xe%2)&&(a==="reverse"?(H=1-H,o&&(H-=o/D)):a==="mirror"&&(pe=k)),X=Xa(0,1,H)*D}const Ce=z?{done:!1,value:s[0]}:pe.next(X);_&&(Ce.value=_(Ce.value));let{done:me}=Ce;!z&&O!==null&&(me=p>=0?j>=V:j<=0);const Ps=R===null&&(P==="finished"||P==="running"&&me);return h&&h(Ce.value),Ps&&F(),Ce},M=()=>{b&&b.stop(),b=void 0},B=()=>{P="idle",M(),g(),v(),L=I=null},F=()=>{P="finished",d&&d(),M(),g()},$=()=>{if(y)return;b||(b=t(N));const q=b.now();l&&l(),R!==null?L=q-R:(!L||P==="finished")&&(L=q),P==="finished"&&v(),I=L,R=null,P="running",b.start()};n&&$();const U={then(q,K){return S.then(q,K)},get time(){return ho(j)},set time(q){q=Wa(q),j=q,R!==null||!b||p===0?R=q:L=b.now()-q/p},get duration(){const q=T.calculatedDuration===null?GP(T):T.calculatedDuration;return ho(q)},get speed(){return p},set speed(q){q===p||!b||(p=q,U.time=ho(j))},get state(){return P},play:$,pause:()=>{P="paused",R=j},stop:()=>{y=!0,P!=="idle"&&(P="idle",u&&u(),B())},cancel:()=>{I!==null&&N(I),B()},complete:()=>{P="finished"},sample:q=>(L=0,N(q))};return U}function XV(n){let e;return()=>(e===void 0&&(e=n()),e)}const YV=XV(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),QV=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hv=10,JV=2e4,ZV=(n,e)=>e.type==="spring"||n==="backgroundColor"||!TD(e.ease);function ez(n,e,{onUpdate:t,onComplete:s,...r}){if(!(YV()&&QV.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l,u=!1;const d=()=>{l=new Promise(A=>{a=A})};d();let{keyframes:h,duration:f=300,ease:p,times:y}=r;if(ZV(e,r)){const A=Bb({...r,repeat:0,delay:0});let _={done:!1,value:h[0]};const T=[];let k=0;for(;!_.done&&k<JV;)_=A.sample(k),T.push(_.value),k+=Hv;y=void 0,h=T,f=k-Hv,p="linear"}const g=uV(n.owner.current,e,h,{...r,duration:f,ease:p,times:y}),S=()=>{u=!1,g.cancel()},v=()=>{u=!0,He.update(S),a(),d()};return g.onfinish=()=>{u||(n.set(dV(h,r)),s&&s(),v())},{then(A,_){return l.then(A,_)},attachTimeline(A){return g.timeline=A,g.onfinish=null,gt},get time(){return ho(g.currentTime||0)},set time(A){g.currentTime=Wa(A)},get speed(){return g.playbackRate},set speed(A){g.playbackRate=A},get duration(){return ho(f)},play:()=>{o||(g.play(),vo(S))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:A}=g;if(A){const _=Bb({...r,autoplay:!1});n.setWithVelocity(_.sample(A-Hv).value,_.sample(A).value,Hv)}v()},complete:()=>{u||g.finish()},cancel:v}}function tz({keyframes:n,delay:e,onUpdate:t,onComplete:s}){const r=()=>(t&&t(n[n.length-1]),s&&s(),{time:0,speed:1,duration:0,play:gt,pause:gt,stop:gt,then:i=>(i(),Promise.resolve()),cancel:gt,complete:gt});return e?Bb({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const nz={type:"spring",stiffness:500,damping:25,restSpeed:10},sz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),rz={type:"keyframes",duration:.8},iz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oz=(n,{keyframes:e})=>e.length>2?rz:gu.has(n)?n.startsWith("scale")?sz(e[1]):nz:iz,t_=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ya.test(e)||e==="0")&&!e.startsWith("url(")),az=new Set(["brightness","contrast","saturate","opacity"]);function lz(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(v1)||[];if(!s)return n;const r=t.replace(s,"");let i=az.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+r+")"}const cz=/([a-z-]*)\(.*?\)/g,n_={...Ya,getAnimatableNone:n=>{const e=n.match(cz);return e?e.map(lz).join(" "):n}},uz={...uD,color:Tn,backgroundColor:Tn,outlineColor:Tn,fill:Tn,stroke:Tn,borderColor:Tn,borderTopColor:Tn,borderRightColor:Tn,borderBottomColor:Tn,borderLeftColor:Tn,filter:n_,WebkitFilter:n_},yT=n=>uz[n];function QD(n,e){let t=yT(n);return t!==n_&&(t=Ya),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const JD=n=>/^0[^.\s]+$/.test(n);function dz(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||JD(n)}function hz(n,e,t,s){const r=t_(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const o=s.from!==void 0?s.from:n.get();let a;const l=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),dz(i[u])&&l.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(r&&l.length&&a)for(let u=0;u<l.length;u++){const d=l[u];i[d]=QD(e,a)}return i}function fz({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function vT(n,e){return n[e]||n.default||n}const pz={skipAnimations:!1},bT=(n,e,t,s={})=>r=>{const i=vT(s,n)||{},o=i.delay||s.delay||0;let{elapsed:a=0}=s;a=a-Wa(o);const l=hz(e,n,t,i),u=l[0],d=l[l.length-1],h=t_(n,u),f=t_(n,d);let p={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:y=>{e.set(y),i.onUpdate&&i.onUpdate(y)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(fz(i)||(p={...p,...oz(n,p)}),p.duration&&(p.duration=Wa(p.duration)),p.repeatDelay&&(p.repeatDelay=Wa(p.repeatDelay)),!h||!f||cV.current||i.type===!1||pz.skipAnimations)return tz(p);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=ez(e,n,p);if(y)return y}return Bb(p)};function $b(n){return!!(Zn(n)&&n.add)}const ZD=n=>/^\-?\d*\.?\d+$/.test(n);function wT(n,e){n.indexOf(e)===-1&&n.push(e)}function xT(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class AT{constructor(){this.subscriptions=[]}add(e){return wT(this.subscriptions,e),()=>xT(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mz=n=>!isNaN(parseFloat(n));class gz{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:o}=mn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,He.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>He.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=mz(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new AT);const s=this.events[e].add(t);return e==="change"?()=>{s(),He.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?KD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xf(n,e){return new gz(n,e)}const eI=n=>e=>e.test(n),yz={test:n=>n==="auto",parse:n=>n},tI=[yu,ie,ai,ko,_U,SU,yz],qf=n=>tI.find(eI(n)),vz=[...tI,Tn,Ya],bz=n=>vz.find(eI(n));function wz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,xf(t))}function xz(n,e){const t=w1(n,e);let{transitionEnd:s={},transition:r={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...s};for(const o in i){const a=FU(i[o]);wz(n,o,a)}}function Az(n,e,t){var s,r;const i=Object.keys(e).filter(a=>!n.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const l=i[a],u=e[l];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=t[l])!==null&&s!==void 0?s:n.readValue(l))!==null&&r!==void 0?r:e[l]),d!=null&&(typeof d=="string"&&(ZD(d)||JD(d))?d=parseFloat(d):!bz(d)&&Ya.test(u)&&(d=QD(l,u)),n.addValue(l,xf(d,{owner:n})),t[l]===void 0&&(t[l]=d),d!==null&&n.setBaseTarget(l,d))}}function Sz(n,e){return e?(e[n]||e.default||e).from:void 0}function _z(n,e,t){const s={};for(const r in n){const i=Sz(r,e);if(i!==void 0)s[r]=i;else{const o=t.getValue(r);o&&(s[r]=o.get())}}return s}function Ez({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function Cz(n,e){const t=n.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}else return t!==e}function nI(n,e,{delay:t=0,transitionOverride:s,type:r}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");s&&(i=s);const u=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const f=n.getValue(h),p=a[h];if(!f||p===void 0||d&&Ez(d,h))continue;const y={delay:t,elapsed:0,...vT(i||{},h)};if(window.HandoffAppearAnimations){const v=n.getProps()[sD];if(v){const b=window.HandoffAppearAnimations(v,h,f,He);b!==null&&(y.elapsed=b,y.isHandoff=!0)}}let g=!y.isHandoff&&!Cz(f,p);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(bT(h,f,p,n.shouldReduceMotion&&gu.has(h)?{type:!1}:y));const S=f.animation;$b(l)&&(l.add(h),S.then(()=>l.remove(h))),u.push(S)}return o&&Promise.all(u).then(()=>{o&&xz(n,o)}),u}function s_(n,e,t={}){const s=w1(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const i=s?()=>Promise.all(nI(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return Tz(n,e,u+l,d,h,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(t.delay)])}function Tz(n,e,t=0,s=0,r=1,i){const o=[],a=(n.variantChildren.size-1)*s,l=r===1?(u=0)=>u*s:(u=0)=>a-u*s;return Array.from(n.variantChildren).sort(kz).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(s_(u,e,{...i,delay:t+l(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function kz(n,e){return n.sortNodePosition(e)}function Pz(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>s_(n,i,t));s=Promise.all(r)}else if(typeof e=="string")s=s_(n,e,t);else{const r=typeof e=="function"?w1(n,e,t.custom):e;s=Promise.all(nI(n,r,t))}return s.then(()=>n.notify("AnimationComplete",e))}const Rz=[...sT].reverse(),Nz=sT.length;function Mz(n){return e=>Promise.all(e.map(({animation:t,options:s})=>Pz(n,t,s)))}function Lz(n){let e=Mz(n);const t=Iz();let s=!0;const r=(l,u)=>{const d=w1(n,u);if(d){const{transition:h,transitionEnd:f,...p}=d;l={...l,...p,...f}}return l};function i(l){e=l(n)}function o(l,u){const d=n.getProps(),h=n.getVariantContext(!0)||{},f=[],p=new Set;let y={},g=1/0;for(let v=0;v<Nz;v++){const b=Rz[v],A=t[b],_=d[b]!==void 0?d[b]:h[b],T=fm(_),k=b===u?A.isActive:null;k===!1&&(g=v);let P=_===h[b]&&_!==d[b]&&T;if(P&&s&&n.manuallyAnimateOnMount&&(P=!1),A.protectedKeys={...y},!A.isActive&&k===null||!_&&!A.prevProp||g1(_)||typeof _=="boolean")continue;let L=Dz(A.prevProp,_)||b===u&&A.isActive&&!P&&T||v>g&&T,I=!1;const O=Array.isArray(_)?_:[_];let D=O.reduce(r,{});k===!1&&(D={});const{prevResolvedValues:V={}}=A,j={...V,...D},N=M=>{L=!0,p.has(M)&&(I=!0,p.delete(M)),A.needsAnimating[M]=!0};for(const M in j){const B=D[M],F=V[M];if(y.hasOwnProperty(M))continue;let $=!1;jb(B)&&jb(F)?$=!ED(B,F):$=B!==F,$?B!==void 0?N(M):p.add(M):B!==void 0&&p.has(M)?N(M):A.protectedKeys[M]=!0}A.prevProp=_,A.prevResolvedValues=D,A.isActive&&(y={...y,...D}),s&&n.blockInitialAnimation&&(L=!1),L&&(!P||I)&&f.push(...O.map(M=>({animation:M,options:{type:b,...l}})))}if(p.size){const v={};p.forEach(b=>{const A=n.getBaseTarget(b);A!==void 0&&(v[b]=A)}),f.push({animation:v})}let S=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(S=!1),s=!1,S?e(f):Promise.resolve()}function a(l,u,d){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(p=>{var y;return(y=p.animationState)===null||y===void 0?void 0:y.setActive(l,u)}),t[l].isActive=u;const f=o(d,l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>t}}function Dz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!ED(e,n):!1}function ol(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Iz(){return{animate:ol(!0),whileInView:ol(),whileHover:ol(),whileTap:ol(),whileDrag:ol(),whileFocus:ol(),exit:ol()}}class jz extends rl{constructor(e){super(e),e.animationState||(e.animationState=Lz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),g1(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Oz=0;class Fz extends rl{constructor(){super(...arguments),this.id=Oz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Bz={animation:{Feature:jz},exit:{Feature:Fz}},WP=(n,e)=>Math.abs(n-e);function $z(n,e){const t=WP(n.x,e.x),s=WP(n.y,e.y);return Math.sqrt(t**2+s**2)}class sI{constructor(e,t,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=EA(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=$z(h.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:y}=h,{timestamp:g}=mn;this.history.push({...y,timestamp:g});const{onStart:S,onMove:v}=this.handlers;f||(S&&S(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=_A(f,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=EA(h.type==="pointercancel"?this.lastMoveEventInfo:_A(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(h,S),y&&y(h,S)},!wD(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const o=b1(e),a=_A(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=mn;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,EA(a,this.history)),this.removeListeners=Ga(uo(this.contextWindow,"pointermove",this.handlePointerMove),uo(this.contextWindow,"pointerup",this.handlePointerUp),uo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vo(this.updatePoint)}}function _A(n,e){return e?{point:e(n.point)}:n}function qP(n,e){return{x:n.x-e.x,y:n.y-e.y}}function EA({point:n},e){return{point:n,delta:qP(n,rI(e)),offset:qP(n,Uz(e)),velocity:Vz(e,.1)}}function Uz(n){return n[0]}function rI(n){return n[n.length-1]}function Vz(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=rI(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Wa(e)));)t--;if(!s)return{x:0,y:0};const i=ho(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Es(n){return n.max-n.min}function r_(n,e=0,t=.01){return Math.abs(n-e)<=t}function KP(n,e,t,s=.5){n.origin=s,n.originPoint=at(e.min,e.max,n.origin),n.scale=Es(t)/Es(e),(r_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=at(t.min,t.max,n.origin)-n.originPoint,(r_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function zp(n,e,t,s){KP(n.x,e.x,t.x,s?s.originX:void 0),KP(n.y,e.y,t.y,s?s.originY:void 0)}function XP(n,e,t){n.min=t.min+e.min,n.max=n.min+Es(e)}function zz(n,e,t){XP(n.x,e.x,t.x),XP(n.y,e.y,t.y)}function YP(n,e,t){n.min=e.min-t.min,n.max=n.min+Es(e)}function Hp(n,e,t){YP(n.x,e.x,t.x),YP(n.y,e.y,t.y)}function Hz(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?at(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?at(t,n,s.max):Math.min(n,t)),n}function QP(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Gz(n,{top:e,left:t,bottom:s,right:r}){return{x:QP(n.x,t,r),y:QP(n.y,e,s)}}function JP(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function Wz(n,e){return{x:JP(n.x,e.x),y:JP(n.y,e.y)}}function qz(n,e){let t=.5;const s=Es(n),r=Es(e);return r>s?t=mm(e.min,e.max-s,n.min):s>r&&(t=mm(n.min,n.max-r,e.min)),Xa(0,1,t)}function Kz(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const i_=.35;function Xz(n=i_){return n===!1?n=0:n===!0&&(n=i_),{x:ZP(n,"left","right"),y:ZP(n,"top","bottom")}}function ZP(n,e,t){return{min:eR(n,e),max:eR(n,t)}}function eR(n,e){return typeof n=="number"?n:n[e]||0}const tR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qu=()=>({x:tR(),y:tR()}),nR=()=>({min:0,max:0}),Et=()=>({x:nR(),y:nR()});function Ls(n){return[n("x"),n("y")]}function iI({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function Yz({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Qz(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function CA(n){return n===void 0||n===1}function o_({scale:n,scaleX:e,scaleY:t}){return!CA(n)||!CA(e)||!CA(t)}function dl(n){return o_(n)||oI(n)||n.z||n.rotate||n.rotateX||n.rotateY}function oI(n){return sR(n.x)||sR(n.y)}function sR(n){return n&&n!=="0%"}function Ub(n,e,t){const s=n-t,r=e*s;return t+r}function rR(n,e,t,s,r){return r!==void 0&&(n=Ub(n,r,s)),Ub(n,t,s)+e}function a_(n,e=0,t=1,s,r){n.min=rR(n.min,e,t,s,r),n.max=rR(n.max,e,t,s,r)}function aI(n,{x:e,y:t}){a_(n.x,e.translate,e.scale,e.originPoint),a_(n.y,t.translate,t.scale,t.originPoint)}function Jz(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=t[a],o=i.projectionDelta;const l=i.instance;l&&l.style&&l.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ju(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,aI(n,o)),s&&dl(i.latestValues)&&Ju(n,i.latestValues))}e.x=iR(e.x),e.y=iR(e.y)}function iR(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Mo(n,e){n.min=n.min+e,n.max=n.max+e}function oR(n,e,[t,s,r]){const i=e[r]!==void 0?e[r]:.5,o=at(n.min,n.max,i);a_(n,e[t],e[s],o,e.scale)}const Zz=["x","scaleX","originX"],e6=["y","scaleY","originY"];function Ju(n,e){oR(n.x,e,Zz),oR(n.y,e,e6)}function lI(n,e){return iI(Qz(n.getBoundingClientRect(),e))}function t6(n,e,t){const s=lI(n,t),{scroll:r}=e;return r&&(Mo(s.x,r.offset.x),Mo(s.y,r.offset.y)),s}const cI=({current:n})=>n?n.ownerDocument.defaultView:null,n6=new WeakMap;class s6{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Et(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(b1(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:p,onDragStart:y}=this.getProps();if(f&&!p&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=AD(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ls(S=>{let v=this.getAxisMotionValue(S).get()||0;if(ai.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const A=b.layout.layoutBox[S];A&&(v=Es(A)*(parseFloat(v)/100))}}this.originPoint[S]=v}),y&&He.update(()=>y(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:S}=h;if(p&&this.currentDirection===null){this.currentDirection=r6(S),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,S),this.updateAxis("y",h.point,S),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),l=()=>Ls(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new sI(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:cI(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&He.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!Gv(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=Hz(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&Xu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Gz(r.layoutBox,t):this.constraints=!1,this.elastic=Xz(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ls(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Kz(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Xu(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=t6(s,r.root,this.visualElement.getTransformPagePoint());let o=Wz(r.layout.layoutBox,i);if(t){const a=t(Yz(o));this.hasMutatedConstraints=!!a,a&&(o=iI(a))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=Ls(d=>{if(!Gv(d,t,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,y={type:"inertia",velocity:s?e[d]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return s.start(bT(e,s,0,t))}stopAnimation(){Ls(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ls(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Ls(t=>{const{drag:s}=this.getProps();if(!Gv(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];i.set(e[t]-at(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Xu(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ls(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=qz({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Ls(o=>{if(!Gv(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(at(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;n6.set(this.visualElement,this);const e=this.visualElement.current,t=uo(e,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();Xu(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const o=lo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ls(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=i_,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Gv(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function r6(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class i6 extends rl{constructor(e){super(e),this.removeGroupControls=gt,this.removeListeners=gt,this.controls=new s6(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gt}unmount(){this.removeGroupControls(),this.removeListeners()}}const aR=n=>(e,t)=>{n&&He.update(()=>n(e,t))};class o6 extends rl{constructor(){super(...arguments),this.removePointerDownListener=gt}onPointerDown(e){this.session=new sI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:aR(e),onStart:aR(t),onMove:s,onEnd:(i,o)=>{delete this.session,r&&He.update(()=>r(i,o))}}}mount(){this.removePointerDownListener=uo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function a6(){const n=C.useContext(p1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:s}=n,r=C.useId();return C.useEffect(()=>s(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const T0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function lR(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Kf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ie.test(n))n=parseFloat(n);else return n;const t=lR(n,e.target.x),s=lR(n,e.target.y);return`${t}% ${s}%`}},l6={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=Ya.parse(n);if(r.length>5)return s;const i=Ya.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=at(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class c6 extends he.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;gU(u6),i&&(t.group&&t.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),T0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||He.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function uI(n){const[e,t]=a6(),s=C.useContext(iT);return he.createElement(c6,{...n,layoutGroup:s,switchLayoutGroup:C.useContext(iD),isPresent:e,safeToRemove:t})}const u6={borderRadius:{...Kf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kf,borderTopRightRadius:Kf,borderBottomLeftRadius:Kf,borderBottomRightRadius:Kf,boxShadow:l6},dI=["TopLeft","TopRight","BottomLeft","BottomRight"],d6=dI.length,cR=n=>typeof n=="string"?parseFloat(n):n,uR=n=>typeof n=="number"||ie.test(n);function h6(n,e,t,s,r,i){r?(n.opacity=at(0,t.opacity!==void 0?t.opacity:1,f6(s)),n.opacityExit=at(e.opacity!==void 0?e.opacity:1,0,p6(s))):i&&(n.opacity=at(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let o=0;o<d6;o++){const a=`border${dI[o]}Radius`;let l=dR(e,a),u=dR(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||uR(l)===uR(u)?(n[a]=Math.max(at(cR(l),cR(u),s),0),(ai.test(u)||ai.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=at(e.rotate||0,t.rotate||0,s))}function dR(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const f6=hI(0,.5,DD),p6=hI(.5,.95,gt);function hI(n,e,t){return s=>s<n?0:s>e?1:t(mm(n,e,s))}function hR(n,e){n.min=e.min,n.max=e.max}function Rs(n,e){hR(n.x,e.x),hR(n.y,e.y)}function fR(n,e,t,s,r){return n-=e,n=Ub(n,1/t,s),r!==void 0&&(n=Ub(n,1/r,s)),n}function m6(n,e=0,t=1,s=.5,r,i=n,o=n){if(ai.test(e)&&(e=parseFloat(e),e=at(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=at(i.min,i.max,s);n===i&&(a-=e),n.min=fR(n.min,e,t,a,r),n.max=fR(n.max,e,t,a,r)}function pR(n,e,[t,s,r],i,o){m6(n,e[t],e[s],e[r],e.scale,i,o)}const g6=["x","scaleX","originX"],y6=["y","scaleY","originY"];function mR(n,e,t,s){pR(n.x,e,g6,t?t.x:void 0,s?s.x:void 0),pR(n.y,e,y6,t?t.y:void 0,s?s.y:void 0)}function gR(n){return n.translate===0&&n.scale===1}function fI(n){return gR(n.x)&&gR(n.y)}function v6(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function pI(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function yR(n){return Es(n.x)/Es(n.y)}class b6{constructor(){this.members=[]}add(e){wT(this.members,e),e.scheduleRender()}remove(e){if(xT(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vR(n,e,t){let s="";const r=n.x.translate/e.x,i=n.y.translate/e.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:d}=t;l&&(s+=`rotate(${l}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(s+=`scale(${o}, ${a})`),s||"none"}const w6=(n,e)=>n.depth-e.depth;class x6{constructor(){this.children=[],this.isDirty=!1}add(e){wT(this.children,e),this.isDirty=!0}remove(e){xT(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(w6),this.isDirty=!1,this.children.forEach(e)}}function A6(n,e){const t=performance.now(),s=({timestamp:r})=>{const i=r-t;i>=e&&(vo(s),n(i-e))};return He.read(s,!0),()=>vo(s)}function S6(n){window.MotionDebug&&window.MotionDebug.record(n)}function _6(n){return n instanceof SVGElement&&n.tagName!=="svg"}function E6(n,e,t){const s=Zn(n)?n:xf(n);return s.start(bT("",s,e,t)),s.animation}const bR=["","X","Y","Z"],C6={visibility:"hidden"},wR=1e3;let T6=0;const hl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function mI({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=T6++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,hl.totalNodes=hl.resolvedTargetDeltas=hl.recalculatedProjection=0,this.nodes.forEach(R6),this.nodes.forEach(I6),this.nodes.forEach(j6),this.nodes.forEach(N6),S6(hl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new x6)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new AT),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_6(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=A6(f,250),T0.hasAnimatedSinceResize&&(T0.hasAnimatedSinceResize=!1,this.nodes.forEach(AR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||U6,{onLayoutAnimationStart:S,onLayoutAnimationComplete:v}=d.getProps(),b=!this.targetLayout||!pI(this.targetLayout,y)||p,A=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||f&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,A);const _={...vT(g,"layout"),onPlay:S,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_)}else f||AR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(O6),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xR);return}this.isUpdating||this.nodes.forEach(L6),this.isUpdating=!1,this.nodes.forEach(D6),this.nodes.forEach(k6),this.nodes.forEach(P6),this.clearAllSnapshots();const a=performance.now();mn.delta=Xa(0,1e3/60,a-mn.timestamp),mn.timestamp=a,mn.isProcessing=!0,gA.update.process(mn),gA.preRender.process(mn),gA.render.process(mn),mn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(M6),this.sharedNodes.forEach(F6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Et(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!fI(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||dl(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),V6(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Et();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Mo(a.x,l.offset.x),Mo(a.y,l.offset.y)),a}removeElementScroll(o){const a=Et();Rs(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){Rs(a,o);const{scroll:f}=this.root;f&&(Mo(a.x,-f.offset.x),Mo(a.y,-f.offset.y))}Mo(a.x,d.offset.x),Mo(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=Et();Rs(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ju(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),dl(d.latestValues)&&Ju(l,d.latestValues)}return dl(this.latestValues)&&Ju(l,this.latestValues),l}removeTransform(o){const a=Et();Rs(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!dl(u.latestValues))continue;o_(u.latestValues)&&u.updateSnapshot();const d=Et(),h=u.measurePageBox();Rs(d,h),mR(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return dl(this.latestValues)&&mR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==mn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=mn.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Hp(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Rs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Et(),this.targetWithTransforms=Et()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Rs(this.target,this.layout.layoutBox),aI(this.target,this.targetDelta)):Rs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Et(),this.relativeTargetOrigin=Et(),Hp(this.relativeTargetOrigin,this.target,p.target),Rs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}hl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||o_(this.parent.latestValues)||oI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===mn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Rs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Jz(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Qu(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Qu(),this.projectionDeltaWithTransform=Qu());const g=this.projectionTransform;zp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=vR(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==p)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),hl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=Qu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Et(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,S=this.getStack(),v=!S||S.members.length<=1,b=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some($6));this.animationProgress=0;let A;this.mixTargetDelta=_=>{const T=_/1e3;SR(h.x,o.x,T),SR(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Hp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),B6(this.relativeTarget,this.relativeTargetOrigin,f,T),A&&v6(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=Et()),Rs(A,this.relativeTarget)),g&&(this.animationValues=d,h6(d,u,this.latestValues,T,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{T0.hasAnimatedSinceResize=!0,this.currentAnimation=E6(0,wR,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:d}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&gI(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Et();const h=Es(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Es(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}Rs(a,l),Ju(a,d),zp(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new b6),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<bR.length;d++){const h="rotate"+bR[d];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return C6;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=C0(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=C0(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!dl(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=vR(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:p,y}=this.projectionDelta;u.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Db){if(f[g]===void 0)continue;const{correct:S,applyTo:v}=Db[g],b=u.transform==="none"?f[g]:S(f[g],h);if(v){const A=v.length;for(let _=0;_<A;_++)u[v[_]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=h===this?C0(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(xR),this.root.sharedNodes.clear()}}}function k6(n){n.updateLayout()}function P6(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?Ls(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=Es(f);f.min=s[h].min,f.max=f.min+p}):gI(i,t.layoutBox,s)&&Ls(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],p=Es(s[h]);f.max=f.min+p,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+p)});const a=Qu();zp(a,s,t.layoutBox);const l=Qu();o?zp(l,n.applyTransform(r,!0),t.measuredBox):zp(l,s,t.layoutBox);const u=!fI(a);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const y=Et();Hp(y,t.layoutBox,f.layoutBox);const g=Et();Hp(g,s,p.layoutBox),pI(y,g)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function R6(n){hl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function N6(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function M6(n){n.clearSnapshot()}function xR(n){n.clearMeasurements()}function L6(n){n.isLayoutDirty=!1}function D6(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function AR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function I6(n){n.resolveTargetDelta()}function j6(n){n.calcProjection()}function O6(n){n.resetRotation()}function F6(n){n.removeLeadSnapshot()}function SR(n,e,t){n.translate=at(e.translate,0,t),n.scale=at(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function _R(n,e,t,s){n.min=at(e.min,t.min,s),n.max=at(e.max,t.max,s)}function B6(n,e,t,s){_R(n.x,e.x,t.x,s),_R(n.y,e.y,t.y,s)}function $6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const U6={duration:.45,ease:[.4,0,.1,1]},ER=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),CR=ER("applewebkit/")&&!ER("chrome/")?Math.round:gt;function TR(n){n.min=CR(n.min),n.max=CR(n.max)}function V6(n){TR(n.x),TR(n.y)}function gI(n,e,t){return n==="position"||n==="preserve-aspect"&&!r_(yR(e),yR(t),.2)}const z6=mI({attachResizeListener:(n,e)=>lo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),TA={current:void 0},yI=mI({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!TA.current){const n=new z6({});n.mount(window),n.setOptions({layoutScroll:!0}),TA.current=n}return TA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),H6={pan:{Feature:o6},drag:{Feature:i6,ProjectionNode:yI,MeasureLayout:uI}},G6=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function W6(n){const e=G6.exec(n);if(!e)return[,];const[,t,s]=e;return[t,s]}function l_(n,e,t=1){const[s,r]=W6(n);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return ZD(o)?parseFloat(o):o}else return QS(r)?l_(r,e,t+1):r}function q6(n,{...e},t){const s=n.current;if(!(s instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const i=r.get();if(!QS(i))return;const o=l_(i,s);o&&r.set(o)});for(const r in e){const i=e[r];if(!QS(i))continue;const o=l_(i,s);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=i))}return{target:e,transitionEnd:t}}const K6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),vI=n=>K6.has(n),X6=n=>Object.keys(n).some(vI),kR=n=>n===yu||n===ie,PR=(n,e)=>parseFloat(n.split(", ")[e]),RR=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return PR(r[1],e);{const i=s.match(/^matrix\((.+)\)$/);return i?PR(i[1],n):0}},Y6=new Set(["x","y","z"]),Q6=av.filter(n=>!Y6.has(n));function J6(n){const e=[];return Q6.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Af={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:RR(4,13),y:RR(5,14)};Af.translateX=Af.x;Af.translateY=Af.y;const Z6=(n,e,t)=>{const s=e.measureViewportBox(),r=e.current,i=getComputedStyle(r),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=Af[u](s,i)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),n[u]=Af[u](l,i)}),n},eH=(n,e,t={},s={})=>{e={...e},s={...s};const r=Object.keys(e).filter(vI);let i=[],o=!1;const a=[];if(r.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let d=t[l],h=qf(d);const f=e[l];let p;if(jb(f)){const y=f.length,g=f[0]===null?1:0;d=f[g],h=qf(d);for(let S=g;S<y&&f[S]!==null;S++)p?fT(qf(f[S])===p):p=qf(f[S])}else p=qf(f);if(h!==p)if(kR(h)&&kR(p)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&p===ie&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(p!=null&&p.transform)&&(d===0||f===0)?d===0?u.set(p.transform(d)):e[l]=h.transform(f):(o||(i=J6(n),o=!0),a.push(l),s[l]=s[l]!==void 0?s[l]:e[l],u.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=Z6(e,n,a);return i.length&&i.forEach(([d,h])=>{n.getValue(d).set(h)}),n.render(),m1&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:s}}else return{target:e,transitionEnd:s}};function tH(n,e,t,s){return X6(e)?eH(n,e,t,s):{target:e,transitionEnd:s}}const nH=(n,e,t,s)=>{const r=q6(n,e,s);return e=r.target,s=r.transitionEnd,tH(n,e,t,s)},c_={current:null},bI={current:!1};function sH(){if(bI.current=!0,!!m1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>c_.current=n.matches;n.addListener(e),e()}else c_.current=!1}function rH(n,e,t){const{willChange:s}=e;for(const r in e){const i=e[r],o=t[r];if(Zn(i))n.addValue(r,i),$b(s)&&s.add(r);else if(Zn(o))n.addValue(r,xf(i,{owner:n})),$b(s)&&s.remove(r);else if(o!==i)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,xf(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const NR=new WeakMap,wI=Object.keys(pm),iH=wI.length,MR=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],oH=rT.length;class aH{constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>He.render(this.render,!1,!0);const{latestValues:a,renderState:l}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=y1(t),this.isVariantNode=rD(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{});for(const h in d){const f=d[h];a[h]!==void 0&&Zn(f)&&(f.set(a[h],!1),$b(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,NR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),bI.current||sH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:c_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){NR.delete(this.current),this.projection&&this.projection.unmount(),vo(this.notifyUpdate),vo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const s=gu.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&He.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},s,r,i){let o,a;for(let l=0;l<iH;l++){const u=wI[l],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:p}=pm[u];f&&(o=f),d(t)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),p&&(a=p))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:p}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!d||h&&Xu(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:p})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Et()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<MR.length;s++){const r=MR[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=rH(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const t={};for(let s=0;s<oH;s++){const r=rT[s],i=this.props[r];(fm(i)||i===!1)&&(t[r]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=xf(t,{owner:this}),this.addValue(e,s)),s}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(t=hT(this.props,s))===null||t===void 0?void 0:t[e]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zn(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new AT),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class xI extends aH{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...s},{transformValues:r},i){let o=_z(s,e||{},this);if(r&&(t&&(t=r(t)),s&&(s=r(s)),o&&(o=r(o))),i){Az(this,s,o);const a=nH(this,s,o,t);t=a.transitionEnd,s=a.target}return{transition:e,transitionEnd:t,...s}}}function lH(n){return window.getComputedStyle(n)}class cH extends xI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(gu.has(t)){const s=yT(t);return s&&s.default||0}else{const s=lH(e),r=(lD(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return lI(e,t)}build(e,t,s,r){aT(e,t,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return dT(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,s,r){pD(e,t,s,r)}}class uH extends xI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(gu.has(t)){const s=yT(t);return s&&s.default||0}return t=mD.has(t)?t:nT(t),e.getAttribute(t)}measureInstanceViewportBox(){return Et()}scrapeMotionValuesFromProps(e,t){return yD(e,t)}build(e,t,s,r){cT(e,t,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,s,r){gD(e,t,s,r)}mount(e){this.isSVGTag=uT(e.tagName),super.mount(e)}}const dH=(n,e)=>oT(n)?new uH(e,{enableHardwareAcceleration:!1}):new cH(e,{enableHardwareAcceleration:!0}),hH={layout:{ProjectionNode:yI,MeasureLayout:uI}},fH={...Bz,...iV,...H6,...hH},re=pU((n,e)=>WU(n,e,fH,dH));function AI(){const n=C.useRef(!1);return tT(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function pH(){const n=AI(),[e,t]=C.useState(0),s=C.useCallback(()=>{n.current&&t(e+1)},[e]);return[C.useCallback(()=>He.postRender(s),[s]),e]}class mH extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function gH({children:n,isPresent:e}){const t=C.useId(),s=C.useRef(null),r=C.useRef({width:0,height:0,top:0,left:0});return C.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:l}=r.current;if(e||!s.current||!i||!o)return;s.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),C.createElement(mH,{isPresent:e,childRef:s,sizeRef:r},C.cloneElement(n,{ref:s}))}const kA=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o})=>{const a=vD(yH),l=C.useId(),u=C.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;s&&s()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[t]);return C.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[t]),C.useEffect(()=>{!t&&!a.size&&s&&s()},[t]),o==="popLayout"&&(n=C.createElement(gH,{isPresent:t},n)),C.createElement(p1.Provider,{value:u},n)};function yH(){return new Map}function vH(n){return C.useEffect(()=>()=>n(),[])}const fl=n=>n.key||"";function bH(n,e){n.forEach(t=>{const s=fl(t);e.set(s,t)})}function wH(n){const e=[];return C.Children.forEach(n,t=>{C.isValidElement(t)&&e.push(t)}),e}const Qa=({children:n,custom:e,initial:t=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=C.useContext(iT).forceRender||pH()[0],l=AI(),u=wH(n);let d=u;const h=C.useRef(new Map).current,f=C.useRef(d),p=C.useRef(new Map).current,y=C.useRef(!0);if(tT(()=>{y.current=!1,bH(u,p),f.current=d}),vH(()=>{y.current=!0,p.clear(),h.clear()}),y.current)return C.createElement(C.Fragment,null,d.map(b=>C.createElement(kA,{key:fl(b),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:o},b)));d=[...d];const g=f.current.map(fl),S=u.map(fl),v=g.length;for(let b=0;b<v;b++){const A=g[b];S.indexOf(A)===-1&&!h.has(A)&&h.set(A,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((b,A)=>{if(S.indexOf(A)!==-1)return;const _=p.get(A);if(!_)return;const T=g.indexOf(A);let k=b;if(!k){const P=()=>{h.delete(A);const R=Array.from(p.keys()).filter(L=>!S.includes(L));if(R.forEach(L=>p.delete(L)),f.current=u.filter(L=>{const I=fl(L);return I===A||R.includes(I)}),!h.size){if(l.current===!1)return;a(),s&&s()}};k=C.createElement(kA,{key:fl(_),isPresent:!1,onExitComplete:P,custom:e,presenceAffectsLayout:i,mode:o},_),h.set(A,k)}d.splice(T,0,k)}),d=d.map(b=>{const A=b.key;return h.has(A)?b:C.createElement(kA,{key:fl(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),C.createElement(C.Fragment,null,h.size?d:d.map(b=>C.cloneElement(b)))},xH=jL("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_e=C.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?d5:"button";return m.jsx(o,{className:li(xH({variant:e,size:t,className:n})),ref:i,...r})});_e.displayName="Button";const AH=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState(!1);C.useEffect(()=>{const o=()=>{s(window.scrollY>20)};return window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)},[]);const r=[{name:"Inicio",href:"#hero"},{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Universo",href:"#transmedia"},{name:"Textos",href:"#dialogo-critico"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}],i=o=>{e(!1);const a=document.querySelector(o);a&&a.scrollIntoView({behavior:"smooth"})};return m.jsx(re.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-black/60 backdrop-blur-lg border-b border-slate-100/10":"bg-transparent"}`,children:m.jsxs("nav",{className:"container mx-auto px-6 py-3",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(re.div,{whileHover:{scale:1.05,textShadow:"0 0 8px rgba(233, 213, 255, 0.5)"},className:"font-display text-2xl font-bold text-gradient cursor-pointer",onClick:()=>i("#hero"),children:"#GatoEncerrado "}),m.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[r.map(o=>m.jsx(re.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>i(o.href),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md",children:o.name},o.name)),m.jsx(re.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>i("#contact"),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md ml-4 border border-purple-300/30 hover:bg-purple-500/20",children:"Contacto"})]}),m.jsx(_e,{variant:"ghost",size:"icon",className:"md:hidden text-slate-200",onClick:()=>e(!n),children:n?m.jsx(h1,{size:24}):m.jsx(p$,{size:24})})]}),n&&m.jsxs(re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-4 bg-black/80 backdrop-blur-md rounded-lg p-4 border border-slate-100/10",children:[r.map(o=>m.jsx("button",{onClick:()=>i(o.href),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors",children:o.name},o.name)),m.jsx("button",{onClick:()=>i("#contact"),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2 border-t border-slate-100/10",children:"Contacto"})]})]})})},SH="modulepreload",_H=function(n){return"/"+n},LR={},il=function(e,t,s){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=_H(i),i in LR)return;LR[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let d=r.length-1;d>=0;d--){const h=r[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":SH,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},EH=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(()=>Promise.resolve().then(()=>hv),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class ST extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class DR extends ST{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class IR extends ST{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jR extends ST{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var u_;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(u_||(u_={}));var CH=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};class TH{constructor(e,{headers:t={},customFetch:s,region:r=u_.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=EH(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return CH(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o,signal:a}=t;let l={},{region:u}=t;u||(u=this.region);const d=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:h,signal:a}).catch(S=>{throw S.name==="AbortError"?S:new DR(S)}),p=f.headers.get("x-relay-error");if(p&&p==="true")throw new IR(f);if(!f.ok)throw new jR(f);let y=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield f.json():y==="application/octet-stream"?g=yield f.blob():y==="text/event-stream"?g=f:y==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(r){return r instanceof Error&&r.name==="AbortError"?{data:null,error:new DR(r)}:{data:null,error:r,response:r instanceof jR||r instanceof IR?r.context:void 0}}})}}var Kn={},_T={},x1={},dv={},A1={},S1={},kH=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Sf=kH();const PH=Sf.fetch,RH=Sf.fetch.bind(Sf),NH=Sf.Headers,MH=Sf.Request,LH=Sf.Response,hv=Object.freeze(Object.defineProperty({__proto__:null,Headers:NH,Request:MH,Response:LH,default:RH,fetch:PH},Symbol.toStringTag,{value:"Module"})),DH=zF(hv);var _1={};Object.defineProperty(_1,"__esModule",{value:!0});let IH=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};_1.default=IH;var SI=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(S1,"__esModule",{value:!0});const jH=SI(DH),OH=SI(_1);let FH=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=jH.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let d=null,h=null,f=null,p=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=b:h=JSON.parse(b))}const S=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");S&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,p=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const S=await i.text();try{d=JSON.parse(S),Array.isArray(d)&&i.status===404&&(h=[],d=null,p=200,y="OK")}catch{i.status===404&&S===""?(p=204,y="No Content"):d={message:S}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,p=200,y="OK"),d&&this.shouldThrowOnError)throw new OH.default(d)}return{error:d,data:h,count:f,status:p,statusText:y}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};S1.default=FH;var BH=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(A1,"__esModule",{value:!0});const $H=BH(S1);let UH=class extends $H.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};A1.default=UH;var VH=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(dv,"__esModule",{value:!0});const zH=VH(A1);let HH=class extends zH.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};dv.default=HH;var GH=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(x1,"__esModule",{value:!0});const Xf=GH(dv);let WH=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Xf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new Xf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var s;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Xf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Xf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};x1.default=WH;var _I=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(_T,"__esModule",{value:!0});const qH=_I(x1),KH=_I(dv);let XH=class EI{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new qH.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new EI(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let u;s||r?(a=s?"HEAD":"GET",Object.entries(t).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",u=t);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new KH.default({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};_T.default=XH;var Nf=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kn,"__esModule",{value:!0});Kn.PostgrestError=Kn.PostgrestBuilder=Kn.PostgrestTransformBuilder=Kn.PostgrestFilterBuilder=Kn.PostgrestQueryBuilder=Kn.PostgrestClient=void 0;const CI=Nf(_T);Kn.PostgrestClient=CI.default;const TI=Nf(x1);Kn.PostgrestQueryBuilder=TI.default;const kI=Nf(dv);Kn.PostgrestFilterBuilder=kI.default;const PI=Nf(A1);Kn.PostgrestTransformBuilder=PI.default;const RI=Nf(S1);Kn.PostgrestBuilder=RI.default;const NI=Nf(_1);Kn.PostgrestError=NI.default;var YH=Kn.default={PostgrestClient:CI.default,PostgrestQueryBuilder:TI.default,PostgrestFilterBuilder:kI.default,PostgrestTransformBuilder:PI.default,PostgrestBuilder:RI.default,PostgrestError:NI.default};const{PostgrestClient:QH,PostgrestQueryBuilder:D7,PostgrestFilterBuilder:I7,PostgrestTransformBuilder:j7,PostgrestBuilder:O7,PostgrestError:F7}=YH;class JH{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ZH="2.15.6",e8=`realtime-js/${ZH}`,t8="1.0.0",d_=1e4,n8=1e3,s8=100;var Gp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Gp||(Gp={}));var Pt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Pt||(Pt={}));var br;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(br||(br={}));var h_;(function(n){n.websocket="websocket"})(h_||(h_={}));var yl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(yl||(yl={}));class r8{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const l=s.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class MI{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Be;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Be||(Be={}));const OR=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=i8(o,n,e,r),i),{}):{}},i8=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?LI(i,o):f_(o)},LI=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return c8(e,t)}switch(n){case Be.bool:return o8(e);case Be.float4:case Be.float8:case Be.int2:case Be.int4:case Be.int8:case Be.numeric:case Be.oid:return a8(e);case Be.json:case Be.jsonb:return l8(e);case Be.timestamp:return u8(e);case Be.abstime:case Be.date:case Be.daterange:case Be.int4range:case Be.int8range:case Be.money:case Be.reltime:case Be.text:case Be.time:case Be.timestamptz:case Be.timetz:case Be.tsrange:case Be.tstzrange:return f_(e);default:return f_(e)}},f_=n=>n,o8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},a8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},l8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},c8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>LI(e,a))}return n},u8=n=>typeof n=="string"?n.replace(" ","T"):n,DI=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class PA{constructor(e,t,s={},r=d_){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var FR;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(FR||(FR={}));class Wp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wp.syncState(this.state,r,i,o),this.pendingDiffs.forEach(l=>{this.state=Wp.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Wp.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(S=>S.presence_ref),p=h.map(S=>S.presence_ref),y=d.filter(S=>p.indexOf(S.presence_ref)<0),g=h.filter(S=>f.indexOf(S.presence_ref)<0);y.length>0&&(a[u]=y),g.length>0&&(l[u]=g)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(p=>p.presence_ref),f=d.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}s(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,l),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var BR;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(BR||(BR={}));var qp;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(qp||(qp={}));var vi;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(vi||(vi={}));class ET{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new PA(this,br.join,this.params,this.timeout),this.rejoinTimer=new MI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(br.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Wp(this),this.broadcastEndpointURL=DI(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(p=>p.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[qp.PRESENCE]&&this.bindings[qp.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(vi.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(vi.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var y;if(this.socket.setAuth(),p===void 0){e==null||e(vi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,S=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let b=0;b<S;b++){const A=g[b],{filter:{event:_,schema:T,table:k,filter:P}}=A,R=p&&p[b];if(R&&R.event===_&&R.schema===T&&R.table===k&&R.filter===P)v.push(Object.assign(Object.assign({},A),{id:R.id}));else{this.unsubscribe(),this.state=Pt.errored,e==null||e(vi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(vi.SUBSCRIBED);return}}).receive("error",p=>{this.state=Pt.errored,e==null||e(vi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(vi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Pt.joined&&e===qp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Pt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(br.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new PA(this,br.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new PA(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>s8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=br;if(s&&[a,l,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var y,g,S;return((y=p.filter)===null||y===void 0?void 0:y.event)==="*"||((S=(g=p.filter)===null||g===void 0?void 0:g.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===o}).map(p=>p.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var y,g,S,v,b,A;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const _=p.id,T=(y=p.filter)===null||y===void 0?void 0:y.event;return _&&((g=t.ids)===null||g===void 0?void 0:g.includes(_))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((S=t.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const _=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((A=t==null?void 0:t.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:g,table:S,commit_timestamp:v,type:b,errors:A}=y;f=Object.assign(Object.assign({},{schema:g,table:S,commit_timestamp:v,eventType:b,new:{},old:{},errors:A}),this._getPayloadRecords(y))}p.callback(f,s)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&ET.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(br.close,{},e)}_onError(e){this._on(br.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=OR(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=OR(e.columns,e.old_record)),t}}const RA=()=>{},Wv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},d8=[1e3,2e3,5e3,1e4],h8=1e4,f8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class p8{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=d_,this.transport=null,this.heartbeatIntervalMs=Wv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=RA,this.ref=0,this.reconnectTimer=null,this.logger=RA,this.conn=null,this.sendBuffer=[],this.serializer=new r8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>il(()=>Promise.resolve().then(()=>hv),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${h_.websocket}`,this.httpEndpoint=DI(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=JH.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t8}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Gp.connecting:return yl.Connecting;case Gp.open:return yl.Open;case Gp.closing:return yl.Closing;default:return yl.Closed}}isConnected(){return this.connectionState()===yl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new ET(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(n8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Wv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:o}=t,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${s} ${r} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(br.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([f8],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:e8};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(br.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new MI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,o,a,l,u,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:d_,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Wv.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:RA,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>d8[h-1]||h8,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class CT extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Lt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class m8 extends CT{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p_ extends CT{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var g8=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};const II=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>il(()=>Promise.resolve().then(()=>hv),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},y8=()=>g8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield il(()=>Promise.resolve().then(()=>hv),void 0)).Response:Response}),m_=n=>{if(Array.isArray(n))return n.map(t=>m_(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=m_(s)}),e},v8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var vu=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};const NA=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),b8=(n,e,t)=>vu(void 0,void 0,void 0,function*(){const s=yield y8();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new m8(NA(r),i,o))}).catch(r=>{e(new p_(NA(r),r))}):e(new p_(NA(n),n))}),w8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?r:(v8(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function fv(n,e,t,s,r,i){return vu(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,w8(e,s,r,i)).then(l=>{if(!l.ok)throw l;return s!=null&&s.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>b8(l,a,s))})})}function Vb(n,e,t,s){return vu(this,void 0,void 0,function*(){return fv(n,"GET",e,t,s)})}function Mr(n,e,t,s,r){return vu(this,void 0,void 0,function*(){return fv(n,"POST",e,s,r,t)})}function g_(n,e,t,s,r){return vu(this,void 0,void 0,function*(){return fv(n,"PUT",e,s,r,t)})}function x8(n,e,t,s){return vu(this,void 0,void 0,function*(){return fv(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function jI(n,e,t,s,r){return vu(this,void 0,void 0,function*(){return fv(n,"DELETE",e,s,r,t)})}var xn=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};const A8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$R={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class S8{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=II(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return xn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},$R),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield(e=="PUT"?g_:Mr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Lt(i))return{data:null,error:i};throw i}})}upload(e,t,s){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return xn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:$R.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.append("cacheControl",u.cacheControl)):(l=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield g_(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Lt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return xn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Mr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new CT("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}update(e,t,s){return xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return xn(this,void 0,void 0,function*(){try{return{data:yield Mr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}copy(e,t,s){return xn(this,void 0,void 0,function*(){try{return{data:{path:(yield Mr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return xn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Mr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return xn(this,void 0,void 0,function*(){try{const r=yield Mr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}download(e,t){return xn(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Vb(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Lt(a))return{data:null,error:a};throw a}})}info(e){return xn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield Vb(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:m_(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}exists(e){return xn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield x8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s)&&s instanceof p_){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${u}`)}}}remove(e){return xn(this,void 0,void 0,function*(){try{return{data:yield jI(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Lt(t))return{data:null,error:t};throw t}})}list(e,t,s){return xn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},A8),t),{prefix:e||""});return{data:yield Mr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Lt(r))return{data:null,error:r};throw r}})}listV2(e,t){return xn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Mr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const _8="2.12.1",E8={"X-Client-Info":`storage-js/${_8}`};var Eu=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};class C8{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},E8),t),this.fetch=II(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Eu(this,void 0,void 0,function*(){try{return{data:yield Vb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Lt(e))return{data:null,error:e};throw e}})}getBucket(e){return Eu(this,void 0,void 0,function*(){try{return{data:yield Vb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Lt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Eu(this,void 0,void 0,function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Eu(this,void 0,void 0,function*(){try{return{data:yield g_(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Lt(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Eu(this,void 0,void 0,function*(){try{return{data:yield Mr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Lt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Eu(this,void 0,void 0,function*(){try{return{data:yield jI(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Lt(t))return{data:null,error:t};throw t}})}}class T8 extends C8{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new S8(this.url,this.headers,e,this.fetch)}}const k8="2.30.0",P8={"X-Client-Info":`supabase-js/${k8}`};var y_={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof bn<"u"&&bn,s=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof bn<"u"&&bn||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(N){return N&&DataView.prototype.isPrototypeOf(N)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(N){return N&&d.indexOf(Object.prototype.toString.call(N))>-1};function f(N){if(typeof N!="string"&&(N=String(N)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(N)||N==="")throw new TypeError('Invalid character in header field name: "'+N+'"');return N.toLowerCase()}function p(N){return typeof N!="string"&&(N=String(N)),N}function y(N){var M={next:function(){var B=N.shift();return{done:B===void 0,value:B}}};return l.iterable&&(M[Symbol.iterator]=function(){return M}),M}function g(N){this.map={},N instanceof g?N.forEach(function(M,B){this.append(B,M)},this):Array.isArray(N)?N.forEach(function(M){if(M.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+M.length);this.append(M[0],M[1])},this):N&&Object.getOwnPropertyNames(N).forEach(function(M){this.append(M,N[M])},this)}g.prototype.append=function(N,M){N=f(N),M=p(M);var B=this.map[N];this.map[N]=B?B+", "+M:M},g.prototype.delete=function(N){delete this.map[f(N)]},g.prototype.get=function(N){return N=f(N),this.has(N)?this.map[N]:null},g.prototype.has=function(N){return this.map.hasOwnProperty(f(N))},g.prototype.set=function(N,M){this.map[f(N)]=p(M)},g.prototype.forEach=function(N,M){for(var B in this.map)this.map.hasOwnProperty(B)&&N.call(M,this.map[B],B,this)},g.prototype.keys=function(){var N=[];return this.forEach(function(M,B){N.push(B)}),y(N)},g.prototype.values=function(){var N=[];return this.forEach(function(M){N.push(M)}),y(N)},g.prototype.entries=function(){var N=[];return this.forEach(function(M,B){N.push([B,M])}),y(N)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function S(N){if(!N._noBody){if(N.bodyUsed)return Promise.reject(new TypeError("Already read"));N.bodyUsed=!0}}function v(N){return new Promise(function(M,B){N.onload=function(){M(N.result)},N.onerror=function(){B(N.error)}})}function b(N){var M=new FileReader,B=v(M);return M.readAsArrayBuffer(N),B}function A(N){var M=new FileReader,B=v(M),F=/charset=([A-Za-z0-9_-]+)/.exec(N.type),$=F?F[1]:"utf-8";return M.readAsText(N,$),B}function _(N){for(var M=new Uint8Array(N),B=new Array(M.length),F=0;F<M.length;F++)B[F]=String.fromCharCode(M[F]);return B.join("")}function T(N){if(N.slice)return N.slice(0);var M=new Uint8Array(N.byteLength);return M.set(new Uint8Array(N)),M.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(N){this.bodyUsed=this.bodyUsed,this._bodyInit=N,N?typeof N=="string"?this._bodyText=N:l.blob&&Blob.prototype.isPrototypeOf(N)?this._bodyBlob=N:l.formData&&FormData.prototype.isPrototypeOf(N)?this._bodyFormData=N:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)?this._bodyText=N.toString():l.arrayBuffer&&l.blob&&u(N)?(this._bodyArrayBuffer=T(N.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(N)||h(N))?this._bodyArrayBuffer=T(N):this._bodyText=N=Object.prototype.toString.call(N):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof N=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(N)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var N=S(this);if(N)return N;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var N=S(this);return N||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var N=S(this);if(N)return N;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(_(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(N){var M=N.toUpperCase();return P.indexOf(M)>-1?M:N}function L(N,M){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');M=M||{};var B=M.body;if(N instanceof L){if(N.bodyUsed)throw new TypeError("Already read");this.url=N.url,this.credentials=N.credentials,M.headers||(this.headers=new g(N.headers)),this.method=N.method,this.mode=N.mode,this.signal=N.signal,!B&&N._bodyInit!=null&&(B=N._bodyInit,N.bodyUsed=!0)}else this.url=String(N);if(this.credentials=M.credentials||this.credentials||"same-origin",(M.headers||!this.headers)&&(this.headers=new g(M.headers)),this.method=R(M.method||this.method||"GET"),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal||function(){if("AbortController"in a){var U=new AbortController;return U.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&B)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(B),(this.method==="GET"||this.method==="HEAD")&&(M.cache==="no-store"||M.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function I(N){var M=new FormData;return N.trim().split("&").forEach(function(B){if(B){var F=B.split("="),$=F.shift().replace(/\+/g," "),U=F.join("=").replace(/\+/g," ");M.append(decodeURIComponent($),decodeURIComponent(U))}}),M}function O(N){var M=new g,B=N.replace(/\r?\n[\t ]+/g," ");return B.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var $=F.split(":"),U=$.shift().trim();if(U){var q=$.join(":").trim();try{M.append(U,q)}catch(K){console.warn("Response "+K.message)}}}),M}k.call(L.prototype);function D(N,M){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=M.statusText===void 0?"":""+M.statusText,this.headers=new g(M.headers),this.url=M.url||"",this._initBody(N)}k.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},D.error=function(){var N=new D(null,{status:200,statusText:""});return N.ok=!1,N.status=0,N.type="error",N};var V=[301,302,303,307,308];D.redirect=function(N,M){if(V.indexOf(M)===-1)throw new RangeError("Invalid status code");return new D(null,{status:M,headers:{location:N}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(M,B){this.message=M,this.name=B;var F=Error(M);this.stack=F.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function j(N,M){return new Promise(function(B,F){var $=new L(N,M);if($.signal&&$.signal.aborted)return F(new o.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function q(){U.abort()}U.onload=function(){var X={statusText:U.statusText,headers:O(U.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(U.status<200||U.status>599)?X.status=200:X.status=U.status,X.url="responseURL"in U?U.responseURL:X.headers.get("X-Request-URL");var pe="response"in U?U.response:U.responseText;setTimeout(function(){B(new D(pe,X))},0)},U.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){F(new o.DOMException("Aborted","AbortError"))},0)};function K(X){try{return X===""&&a.location.href?a.location.href:X}catch{return X}}if(U.open($.method,K($.url),!0),$.credentials==="include"?U.withCredentials=!0:$.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(l.blob?U.responseType="blob":l.arrayBuffer&&(U.responseType="arraybuffer")),M&&typeof M.headers=="object"&&!(M.headers instanceof g||a.Headers&&M.headers instanceof a.Headers)){var z=[];Object.getOwnPropertyNames(M.headers).forEach(function(X){z.push(f(X)),U.setRequestHeader(X,p(M.headers[X]))}),$.headers.forEach(function(X,pe){z.indexOf(pe)===-1&&U.setRequestHeader(pe,X)})}else $.headers.forEach(function(X,pe){U.setRequestHeader(pe,X)});$.signal&&($.signal.addEventListener("abort",q),U.onreadystatechange=function(){U.readyState===4&&$.signal.removeEventListener("abort",q)}),U.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return j.polyfill=!0,a.fetch||(a.fetch=j,a.Headers=g,a.Request=L,a.Response=D),o.Headers=g,o.Request=L,o.Response=D,o.fetch=j,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var r=t.fetch?t:s;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,n.exports=e})(y_,y_.exports);var TT=y_.exports;const OI=el(TT),R8=$2({__proto__:null,default:OI},[TT]);var N8=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};const M8=n=>{let e;return n?e=n:typeof fetch>"u"?e=OI:e=fetch,(...t)=>e(...t)},L8=()=>typeof Headers>"u"?TT.Headers:Headers,D8=(n,e,t)=>{const s=M8(t),r=L8();return(i,o)=>N8(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};function I8(n){return n.replace(/\/$/,"")}function j8(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),i)}}function O8(n){return Math.round(Date.now()/1e3)+n}function F8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const fi=()=>typeof document<"u",al={tested:!1,writable:!1},k0=()=>{if(!fi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(al.tested)return al.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),al.tested=!0,al.writable=!0}catch{al.tested=!0,al.writable=!1}return al.writable};function In(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const s=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),r=s.exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const FI=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await il(()=>Promise.resolve().then(()=>R8),void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},B8=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Yf=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},qv=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},MA=async(n,e)=>{await n.removeItem(e)};function $8(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,l,u,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=e.indexOf(n.charAt(d++)),a=e.indexOf(n.charAt(d++)),l=e.indexOf(n.charAt(d++)),u=e.indexOf(n.charAt(d++)),s=o<<2|a>>4,r=(a&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(s),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class E1{constructor(){this.promise=new E1.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}E1.promiseConstructor=Promise;function UR(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse($8(s))}function U8(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function V8(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function z8(n){return("0"+n.toString(16)).substr(-2)}function Kv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,z8).join("")}async function H8(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function G8(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xv(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await H8(n);return G8(e)}const W8="__stack_guard__",q8="__",K8=/__stack_guard__([a-zA-Z0-9_-]+)__/;let VR=!1,kT;function v_(n){var e,t;kT();let s;try{throw new Error}catch(i){s=i}const r=(t=(e=s.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let i=0;i<r.length;i+=1){const a=r[i].match(K8);if(a&&a[1]===n)return!0}return!1}async function b_(n,e){await kT();const t=`${W8}${n}${q8}`;return await{[t]:async()=>await e()}[t]()}kT=async()=>{VR||(VR=!0,await b_("ENV_CHECK",async()=>{const n=v_("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class PT extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Se(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class X8 extends PT{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Y8(n){return Se(n)&&n.name==="AuthApiError"}class BI extends PT{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Mf extends PT{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Cu extends Mf{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class LA extends Mf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class Yv extends Mf{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class hi extends Mf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class DA extends Mf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class w_ extends Mf{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function zR(n){return Se(n)&&n.name==="AuthRetryableFetchError"}var Q8=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const lp=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),J8=[502,503,504];async function HR(n){if(!B8(n))throw new w_(lp(n),0);if(J8.includes(n.status))throw new w_(lp(n),n.status);let e;try{e=await n.json()}catch(t){throw new BI(lp(t),t)}throw new X8(lp(e),n.status||500)}const Z8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function Te(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await eG(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(l):{data:Object.assign({},l),error:null}}async function eG(n,e,t,s,r,i){const o=Z8(e,s,r,i);let a;try{a=await n(t,o)}catch(l){throw console.error(l),new w_(lp(l),0)}if(a.ok||await HR(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(l){await HR(l)}}function To(n){var e;let t=null;rG(n)&&(t=Object.assign({},n),t.expires_at=O8(n.expires_in));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function vl(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function tG(n){return{data:n,error:null}}function nG(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=Q8(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function sG(n){return n}function rG(n){return n.access_token&&n.refresh_token&&n.expires_in}var iG=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class oG{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=FI(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Te(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await Te(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:vl})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=iG(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await Te(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:nG,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Se(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Te(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vl})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Te(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:sG});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(y.split(";")[1].split("=")[1]);u[`${S}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Se(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await Te(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vl})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Te(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:vl})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:vl})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await Te(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Te(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Se(t))return{data:null,error:t};throw t}}}const aG="2.43.1",lG="http://localhost:9999",cG="supabase.auth.token",uG={"X-Client-Info":`gotrue-js/${aG}`},GR=10,WR={getItem:n=>k0()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{k0()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{k0()&&globalThis.localStorage.removeItem(n)}};function dG(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}dG();const hG={url:lG,storageKey:cG,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uG,flowType:"implicit",debug:!1},Qv=30*1e3,qR=3;class gm{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=gm.nextInstanceID,gm.nextInstanceID+=1,this.instanceID>0&&fi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},hG),e);if(this.logDebugMessages=s.debug,this.inMemorySession=null,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.persistSession=s.persistSession,this.storage=s.storage||WR,this.admin=new oG({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=FI(s.fetch),this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===WR&&!k0()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),fi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=b_("_initialize",async()=>{try{const e=fi()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromUrl(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),await this._removeSession(),{error:s};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Se(e)?{error:e}:{error:new BI("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,s,r;try{await this._removeSession();let i;if("email"in e){const{email:d,password:h,options:f}=e;let p=null,y=null;if(this.flowType==="pkce"){const g=Kv();await Yf(this.storage,`${this.storageKey}-code-verifier`,g),p=await Xv(g),y=g===p?"plain":"s256"}i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:y},xform:To})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await Te(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:To})}else throw new Yv("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Se(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:To})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await Te(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:To})}else throw new Yv("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new LA}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:{user:s.user,session:s.session},error:r})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await qv(this.storage,`${this.storageKey}-code-verifier`),{data:s,error:r}=await Te(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:To});return await MA(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new LA}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:r})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await Te(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:To}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new LA}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let u=null,d=null;if(this.flowType==="pkce"){const f=Kv();await Yf(this.storage,`${this.storageKey}-code-verifier`,f),u=await Xv(f),d=f===u?"plain":"s256"}const{error:h}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await Te(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Yv("You must provide either an email or phone number.")}catch(a){if(Se(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:r,error:i}=await Te(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,xform:To});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,a=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(r){if(Se(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{return await this._removeSession(),await Te(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:tG})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new Cu;const{error:r}=await Te(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Se(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await Te(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Yv("You must provide either an email or phone number and a type")}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await b_("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!v_("_useSession"))throw new Error("Please use #_useSession()");v_("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const i=await qv(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var s,r;if(!e){const{data:i,error:o}=t;if(o)throw o;e=(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0}return await Te(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:vl})})}catch(t){if(Se(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new Cu;const o=r.session,{data:a,error:l}=await Te(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:o.access_token,xform:vl});if(l)throw l;return o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Se(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return UR(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cu;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=UR(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this.getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Se(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new Cu;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Se(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!fi())throw new hi("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new hi("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new DA("Not a valid PKCE flow url.");if(e){const S=In("code");if(!S)throw new DA("No code detected.");const{data:v,error:b}=await this.exchangeCodeForSession(S);if(b)throw b;if(!v.session)throw new DA("No session detected.");let A=new URL(window.location.href);return A.searchParams.delete("code"),window.history.replaceState(window.history.state,"",A.toString()),{data:{session:v.session,redirectType:null},error:null}}const t=In("error_description");if(t){const S=In("error_code");if(!S)throw new hi("No error_code detected.");const v=In("error");throw v?new hi(t,{error:v,code:S}):new hi("No error detected.")}const s=In("provider_token"),r=In("provider_refresh_token"),i=In("access_token");if(!i)throw new hi("No access_token detected.");const o=In("expires_in");if(!o)throw new hi("No expires_in detected.");const a=In("refresh_token");if(!a)throw new hi("No refresh_token detected.");const l=In("token_type");if(!l)throw new hi("No token_type detected.");const d=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:f}=await this.getUser(i);if(f)throw f;const p=h.user,y={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:parseInt(o),expires_at:d,refresh_token:a,token_type:l,user:p},g=In("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:y,redirectType:g},error:null}}catch(t){if(Se(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return fi()&&(!!In("access_token")||!!In("error_description"))}async _isPKCEFlow(){const e=await qv(this.storage,`${this.storageKey}-code-verifier`);return!!In("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Y8(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await MA(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=F8(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),this._emitInitialSession(t),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if(this.flowType==="pkce"){const i=Kv();await Yf(this.storage,`${this.storageKey}-code-verifier`,i),s=await Xv(i),r=i===s?"plain":"s256"}try{return await Te(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Se(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await V8(async r=>(await U8(r*200),this._debug(t,"refreshing attempt",r),await Te(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:To})),(r,i,o)=>o&&o.error&&zR(o.error)&&Date.now()+(r+1)*200-s<Qv)}catch(s){if(this._debug(t,"error",s),Se(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),fi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await qv(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+GR;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${GR}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),zR(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new Cu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new E1;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Cu;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Se(i)){const o={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Yf(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await MA(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Qv);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/Qv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Qv}ms, refresh threshold is ${qR} ticks`),r<=qR&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const s=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const r=Kv();await Yf(this.storage,`${this.storageKey}-code-verifier`,r);const i=await Xv(r),o=r===i?"plain":"s256";this._debug("PKCE","code verifier",`${r.substring(0,5)}...`,"code challenge",i,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(t!=null&&t.queryParams){const r=new URLSearchParams(t.queryParams);s.push(r.toString())}return`${this.url}/authorize?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await Te(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await Te(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await Te(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Se(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}})}}gm.nextInstanceID=0;class fG extends gm{constructor(e){super(e)}}var pG=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function l(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,l)}u((s=s.apply(n,e||[])).next())})};const mG={headers:P8},gG={schema:"public"},yG={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vG={};class bG{constructor(e,t,s){var r,i,o,a,l,u,d,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=I8(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const p=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:gG,realtime:vG,auth:Object.assign(Object.assign({},yG),{storageKey:p}),global:mG},g=j8(s??{},y);this.storageKey=(i=(r=g.auth)===null||r===void 0?void 0:r.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,(u=g.global)===null||u===void 0?void 0:u.fetch),this.fetch=D8(t,this._getAccessToken.bind(this),(d=g.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new QH(`${f}/rest/v1`,{headers:this.headers,schema:(h=g.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new TH(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new T8(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return pG(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,debug:a},l,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fG({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,debug:a,fetch:u})}_initRealtimeClient(e){return new p8(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wG=(n,e,t)=>new bG(n,e,t),xG="https://ytubybkoucltwnselbhc.supabase.co",AG="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo",Gt=wG(xG,AG),cp=[{value:"recordatorios",label:"Recordatorios del evento",description:"Fechas, horarios y detalles de la funcin en CECUT."},{value:"activaciones-transmedia",label:"Alertas de activaciones transmedia",description:"Acceso prioritario a dinmicas con objetos / QR / WebAR."},{value:"contenido-exclusivo",label:"Contenido exclusivo del universo Gato Encerrado",description:"Textos curatoriales, miniversos y material extendido."}],$I=[{id:"taza-250",title:"Taza",price:"$250",helper:"Edicin especial disponible el da del evento."},{id:"taza-causa-600",title:"Taza con causa",price:"$600",helper:"Incluye membresa de 6 meses. Se entrega el 28 de diciembre."},{id:"novela-400",title:"Novela Mi Gato Encerrado",price:"$400",helper:"Primera edicin con QR secreto."},{id:"combo-900",title:"Combo novela + taza con causa",price:"$900",helper:"Paquete completo disponible solo el da del evento."}],SG=$I.reduce((n,e)=>(n[e.id]=`${e.title}  ${e.price}`,n),{}),KR={fullName:"",email:"",city:"",interest:cp[0].value,notes:"",packages:[]},_G={hidden:{opacity:0},visible:{opacity:.85}},EG={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},RT=({open:n,onClose:e,initialInterest:t=cp[0].value})=>{const[s,r]=C.useState(KR),[i,o]=C.useState("idle"),[a,l]=C.useState("");C.useEffect(()=>{n&&(r({...KR,interest:t}),o("idle"),l(""))},[n,t]),C.useEffect(()=>{if(!n)return;const y=g=>{g.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[n,e]);const u=C.useCallback(y=>{const{name:g,value:S}=y.target;r(v=>({...v,[g]:S}))},[]),d=C.useCallback(y=>{r(g=>{const S=g.packages.includes(y);return{...g,packages:S?g.packages.filter(v=>v!==y):[...g.packages,y]}})},[]),h=C.useMemo(()=>cp.find(y=>y.value===s.interest)??cp[0],[s.interest]),f=C.useCallback(async y=>{if(y.preventDefault(),i!=="loading"){if(!s.fullName.trim()||!s.email.trim()){nt({description:"Por favor completa tu nombre y correo electrnico."});return}o("loading"),l("");try{const g=s.packages.length>0?`Paquetes apartados (sin pago): ${s.packages.map(b=>SG[b]).join(", ")}`:null,S={full_name:s.fullName.trim(),email:s.email.trim().toLowerCase(),city:s.city.trim()||null,interest:s.interest,channel:"landing",object_type:"boleto",event:"funcion-2024-12-28",notes:[g,s.notes.trim()].filter(Boolean).join(" | ")||null},{error:v}=await Gt.from("rsvp_extended").insert(S);if(v){o("error"),l("No pudimos registrar tu solicitud. Intenta nuevamente.");return}await CG({email:S.email,name:S.full_name,interestLabel:h.label,city:S.city,notes:S.notes}),o("success"),nt({description:"Gracias! Te enviaremos las prximas novedades."})}catch{o("error"),l("Ocurri un error inesperado. Intenta ms tarde.")}}},[s,h.label,i]),p=C.useCallback(()=>{i!=="loading"&&(e==null||e())},[e,i]);return m.jsx(Qa,{children:n&&m.jsxs(re.div,{className:"fixed inset-0 z-50 flex items-start justify-center px-4 py-6 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[m.jsx(re.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:_G,onClick:p}),m.jsxs(re.div,{role:"dialog","aria-modal":"true",variants:EG,className:"relative z-10 w-full max-w-3xl rounded-3xl border border-white/10 bg-slate-950/95 p-6 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"28 de diciembre  CECUT"}),m.jsx("h2",{className:"font-display text-3xl text-slate-50",children:"Regstrate para recibir acceso y novedades del Gato Encerrado"})]}),m.jsx("button",{onClick:p,className:"self-end text-slate-400 hover:text-white transition",children:""})]}),m.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"space-y-5 text-sm text-slate-300/90 leading-relaxed",children:[m.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4 space-y-3",children:[m.jsx("h3",{className:"font-display text-lg text-slate-100",children:"Compra presencial en taquilla del CECUT"}),m.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[m.jsx("li",{children:" Taquilla del CECUT  Preventa disponible hasta agotar localidades."}),m.jsx("li",{children:" Solo 45 tazas disponibles como incentivo de preventa."}),m.jsx("li",{children:" Las tazas se entregan exclusivamente en taquilla, hasta agotar existencias."}),m.jsx("li",{children:" El da del evento habr mesa de merch con tazas extra y la novela impresa."})]})]}),m.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4 space-y-3",children:[m.jsx("h3",{className:"font-display text-lg text-purple-200",children:"Qu te gustara apartar?"}),m.jsx("p",{className:"text-xs text-slate-400/80",children:"Si deseas pagarlo por adelantado, djalo marcado y te enviaremos un enlace seguro para completar tu compra."}),m.jsx("div",{className:"grid sm:grid-cols-2 gap-3 text-sm text-slate-200",children:$I.map(y=>m.jsxs("label",{className:"flex items-start gap-3 rounded-xl border border-white/10 bg-black/30 px-3 py-2",children:[m.jsx("input",{type:"checkbox",checked:s.packages.includes(y.id),onChange:()=>d(y.id),className:"mt-1 h-4 w-4 rounded border-slate-400 bg-black/40 text-purple-500 focus:ring-purple-400"}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("p",{className:"font-semibold text-slate-100",children:[y.title," ",m.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",y.price]})]}),m.jsx("p",{className:"text-xs text-slate-400",children:y.helper})]})]},y.id))})]})]}),m.jsxs("form",{className:"space-y-5",onSubmit:f,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),m.jsx("input",{name:"fullName",type:"text",required:!0,value:s.fullName,onChange:u,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo te llamas?"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),m.jsx("input",{name:"email",type:"email",required:!0,value:s.email,onChange:u,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Ciudad"}),m.jsx("input",{name:"city",type:"text",value:s.city,onChange:u,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Desde dnde nos visitas?"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Qu quieres recibir?"}),m.jsx("select",{name:"interest",value:s.interest,onChange:u,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",children:cp.map(y=>m.jsx("option",{value:y.value,children:y.label},y.value))}),m.jsx("p",{className:"text-xs text-slate-400/80",children:h.description})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),m.jsx("textarea",{name:"notes",rows:3,value:s.notes,onChange:u,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Necesitas facilidades especiales o tienes un cdigo de preventa?"})]}),i==="error"&&m.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:a}),i==="success"&&m.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu registro qued guardado. Revisaremos tu correo con los siguientes pasos."}),m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsx(_e,{type:"submit",disabled:i==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:i==="loading"?"Enviando":"Guardar mi registro"}),m.jsx("button",{type:"button",onClick:p,className:"text-sm text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]})]})]})})};async function CG({email:n,name:e,interestLabel:t,city:s,notes:r}){if(n)try{const{error:i}=await Gt.functions.invoke("send-reserve-confirmation",{body:{email:n,name:e,interestLabel:t,city:s,notes:r}});i&&console.error("[ReserveModal] Error en sendReserveConfirmationEmail:",i)}catch(i){console.error("[ReserveModal] Excepcin en sendReserveConfirmationEmail:",i)}}const TG="/assets/bg-logo-ba7fccc4.png",kG=()=>{const[n,e]=C.useState(!1),t=C.useCallback(()=>{const i=document.querySelector("#about");i==null||i.scrollIntoView({behavior:"smooth"})},[]),s=C.useCallback(()=>{e(!0)},[]),r=C.useCallback(()=>{e(!1)},[]);return m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"hero",className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[m.jsxs("div",{className:"absolute inset-0 bg-black",children:[m.jsxs("div",{className:"absolute inset-0 opacity-30",children:[m.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 bg-gradient-to-br from-purple-900/80 via-transparent to-transparent blur-3xl"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-blue-900/60 via-transparent to-transparent blur-3xl"})]}),m.jsx("img",{className:"absolute inset-0 w-full h-full object-cover opacity-25 mix-blend-luminosity pointer-events-none",style:{filter:"contrast(20%) brightness(45%)"},alt:"Textura de teln de teatro de terciopelo oscuro",src:TG})]}),m.jsx("div",{className:"container mx-auto px-6 text-center relative z-10",children:m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"max-w-4xl mx-auto",children:[m.jsx(re.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.2},className:"font-display text-5xl md:text-7xl font-medium italic mb-6 text-gradient",style:{textShadow:"0 0 20px rgba(233, 213, 255, 0.3)"},children:"#GatoEncerrado"}),m.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.5},className:"text-xl md:text-2xl text-slate-300/80 mb-12 leading-relaxed font-light",children:"Lo ves aqu, pero su voz tambin habita otras dimensiones."}),m.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.8},className:"flex flex-col gap-4 justify-center items-center",children:[m.jsxs(_e,{onClick:()=>s("preventa"),className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[m.jsx(ZC,{size:20}),"Reserva tu acceso"]}),m.jsx(_e,{variant:"ghost",onClick:t,className:"text-slate-300 hover:text-white hover:bg-white/5 px-8 py-3 rounded-full font-semibold flex items-center gap-2 text-base",children:"Conoce la Obra"}),m.jsx(re.div,{animate:{y:[0,10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"text-slate-500 pt-2",children:m.jsx(s$,{size:24})})]})]})})]}),m.jsx(RT,{open:n,onClose:r,initialInterest:"preventa"})]})},UI="trailers",PG="trailer",RG=/\.(mp4|mov|webm|mkv|m4v)$/i,NG=(n="")=>{var t;switch((t=n.split(".").pop())==null?void 0:t.toLowerCase()){case"webm":return"video/webm";case"mov":return"video/quicktime";case"mkv":return"video/x-matroska";case"m4v":return"video/x-m4v";case"mp4":default:return"video/mp4"}},VI=async(n="")=>{const{data:e,error:t}=await Gt.storage.from(UI).list(n,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});if(t)throw new Error(t.message);if(!Array.isArray(e)||e.length===0)return[];const s=[];for(const r of e){const i=n?`${n}/${r.name}`:r.name;if(!r.metadata){const o=await VI(i);s.push(...o);continue}s.push({...r,fullPath:i})}return s};async function MG(n=PG){var e;try{let t;try{t=await VI("")}catch(o){return console.error("Error al listar trailers:",o.message),null}if(!Array.isArray(t)||t.length===0)return null;const s=n==null?void 0:n.toLowerCase();let r=t.find(o=>{const a=o.fullPath.toLowerCase();return s&&(a===s||a.endsWith(`/${s}`)||a.includes(`/${s}.`)||a===`${s}.mp4`||a.startsWith(`${s}.`))});if(r||(r=t.find(o=>RG.test(o.fullPath))),!r)return null;const{data:i}=Gt.storage.from(UI).getPublicUrl(r.fullPath);return i!=null&&i.publicUrl?{url:i.publicUrl,name:r.fullPath,mimeType:((e=r.metadata)==null?void 0:e.mimetype)||NG(r.fullPath)}:null}catch(t){return console.error("Excepcin al obtener el triler:",t),null}}const LG="Es un gato encerrado existe como obra y como #UniversoTransmedia: es, al mismo tiempo, un relato ntimo en un escenario y una constelacin de la mente y del dolor humano en mltiples lenguajes artsticos. Nuestra obra es el corazn que hace pulsar aquellas preguntas que no estn aqu para contestarse, sino para sentirlas en compaa. En pocas palabras, cuando la obra est latente, el universo #GatoEncerrado contina latiendo en otras narrativas. Un recordatorio de que el corazn nunca se encierra del todo.",DG=[{quote:"Salir de la funcin fue como despertar con nuevos recuerdos. La obra me oblig a conversar con mis propias ausencias.",author:"Maru Solano",role:"Espectadora / Tijuana"},{quote:"Es un Gato Encerrado nos recuerda que el teatro puede ser tambin archivo emocional y dispositivo de memoria.",author:"Dr. Luis Miguel Snchez",role:"Crtico invitado"}],IG=()=>{const[n,e]=C.useState(null),[t,s]=C.useState(!1),[r,i]=C.useState(!1),[o,a]=C.useState(!1),[l,u]=C.useState("preventa"),d=C.useCallback(g=>{u(g),a(!0)},[]),h=C.useCallback(()=>{a(!1)},[]),f=C.useCallback(()=>{var S,v;const g=document.getElementById("blog-submit-cta");if(g){g.scrollIntoView({behavior:"smooth",block:"center"}),(S=g.focus)==null||S.call(g);return}(v=document.querySelector("#blog-contribuye"))==null||v.scrollIntoView({behavior:"smooth",block:"start"})},[]),p=C.useCallback(async()=>{if(!r){if(n!=null&&n.url){s(!0);return}try{i(!0);const g=await MG("trailer");g!=null&&g.url?(e(g),s(!0)):nt({description:"El triler an no est disponible. Intenta ms tarde."})}catch(g){console.error("Error al obtener el triler:",g),nt({description:"No se pudo cargar el triler. Intntalo de nuevo ms tarde."})}finally{i(!1)}}},[r,n]),y=C.useCallback(()=>{s(!1);const g=document.getElementById("gato-encerrado-trailer");g&&typeof g.pause=="function"&&g.pause()},[]);return m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"about",className:"py-24 relative",children:[m.jsx("div",{className:"section-divider mb-24"}),m.jsxs("div",{className:"container mx-auto px-6",children:[m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Sobre la Obra"}),m.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light whitespace-pre-line",children:LG})]}),m.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12",children:m.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[m.jsxs("div",{className:"relative order-2 md:order-1",children:[m.jsx("img",{className:"w-full h-96 object-cover rounded-xl shadow-2xl shadow-black/50",alt:"Escena de la obra #GatoEncerrado, luz tenue y misteriosa",src:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/DSC02497.jpg"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl","aria-hidden":"true"})]}),m.jsxs("div",{className:"order-1 md:order-2",children:[m.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"La Mente de Silvestre"}),m.jsxs("p",{className:"text-slate-300/80 leading-relaxed mb-8 font-light",children:["Silvestre vive en ",m.jsx("strong",{children:"Es un gato encerrado"}),". Este es el ",m.jsx("i",{children:"rincn onrico"})," donde enfrenta sus desdoblamientos y dilemas existenciales. Aqu, lo real y lo imaginario ya no compiten. Y t espectador, visitante, cmplice puedes entrar sin tocar la puerta, porque quizs t tambin tienes un gato encerrado en el pecho."]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[m.jsxs(_e,{onClick:p,disabled:r,className:"bg-purple-500/20 border border-purple-400/30 text-purple-300 hover:bg-purple-500/30 hover:text-purple-200 disabled:opacity-60 disabled:cursor-not-allowed px-6 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow",children:[m.jsx(YC,{size:20}),r?"Cargando":"Ver Triler"]}),m.jsxs(_e,{variant:"outline",onClick:()=>d("preventa"),className:"border-slate-100/20 text-slate-200 hover:bg-slate-100/10 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[m.jsx(ZC,{size:20}),"Reserva tu acceso"]})]})]})]})}),m.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-16 glass-effect rounded-2xl p-8 md:p-12",children:m.jsxs("div",{className:"grid md:grid-cols-[3fr_2fr] gap-8 items-center",children:[m.jsxs("div",{children:[m.jsx("p",{className:"uppercase tracking-[0.35em] text-xs text-slate-400/80 mb-4",children:"Perspectivas del pblico"}),m.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-6 italic",children:"Qu provoca La Obra?"}),m.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-6 font-light",children:"Reunimos testimonios, crticas y preguntas abiertas que continan la conversacin. Haz scroll hacia Textos y Blog para leer ms y expandir tu propia mirada."}),m.jsx(_e,{variant:"outline",onClick:f,className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/20 w-full sm:w-auto whitespace-normal break-words text-center leading-snug",children:"Clica aqu si ya tienes un perspectiva que compartir"})]}),m.jsx("div",{className:"space-y-6",children:DG.map(g=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-6",children:[m.jsx(y$,{className:"text-purple-300 mb-4",size:28}),m.jsx("p",{className:"text-slate-200 italic leading-relaxed mb-4",children:g.quote}),m.jsxs("div",{className:"text-sm text-slate-400",children:[m.jsx("p",{className:"text-slate-200 font-semibold",children:g.author}),m.jsx("p",{children:g.role})]})]},g.author))})]})})]}),m.jsx(Qa,{children:t&&(n==null?void 0:n.url)&&m.jsxs(re.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[m.jsx(re.div,{className:"absolute inset-0 bg-black/70",onClick:y,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),m.jsxs(re.div,{className:"relative z-10 w-full max-w-4xl overflow-hidden rounded-3xl bg-slate-950/90 backdrop-blur-xl border border-white/10 shadow-2xl",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:[m.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10 text-slate-200 uppercase tracking-[0.35em] text-xs",children:[m.jsx("span",{children:"Triler #GatoEncerrado"}),m.jsx("button",{onClick:y,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar triler",children:""})]}),m.jsx("div",{className:"relative aspect-video bg-black",children:m.jsx("video",{id:"gato-encerrado-trailer",src:n.url,controls:!0,autoPlay:!0,className:"h-full w-full object-contain"},n.url)})]})]})})]}),m.jsx(RT,{open:o,onClose:h,initialInterest:l})]})},Qf=[{id:"waitlist",label:"Prximamente"},{id:"experiences",label:"Miniversos activos"}],jG=[{title:"Microficciones sonoras",description:"Voces internas de Silvestre publicadas en notas de voz efmeras.",action:"Pronto recibirs el enlace secreto."},{title:"Bitcora interactiva",description:"Un recorrido visual por los objetos que habitan la habitacin de Silvestre.",action:"Se liberar con la novela impresa."},{title:"Constelacin de espectadores",description:"Mapa colaborativo donde la comunidad comparte sueos y teoras.",action:"Disponible a partir de enero 2025."}],XR={fullName:"",email:"",interest:"miniversos",message:""},OG={hidden:{opacity:0},visible:{opacity:.85}},FG={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},BG=({open:n,onClose:e})=>{const[t,s]=C.useState(Qf[0].id),[r,i]=C.useState(XR),[o,a]=C.useState("idle"),[l,u]=C.useState("");C.useEffect(()=>{n&&(s(Qf[0].id),i(XR),a("idle"),u(""))},[n]),C.useEffect(()=>{if(!n)return;const y=g=>{g.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[n,e]);const d=C.useCallback(y=>{const{name:g,value:S}=y.target;i(v=>({...v,[g]:S}))},[]),h=C.useMemo(()=>{var y;return((y=Qf.find(g=>g.id===t))==null?void 0:y.label)??Qf[0].label},[t]),f=C.useCallback(async y=>{var g;if(y.preventDefault(),o!=="loading"){if(!r.fullName.trim()||!r.email.trim()){nt({description:"Por favor completa tu nombre y correo."});return}a("loading"),u("");try{const S={full_name:r.fullName.trim(),email:r.email.trim().toLowerCase(),city:null,interest:"miniversos",channel:"landing",object_type:"experiencia-digital",event:"miniversos",notes:r.message.trim()||null},{error:v}=await Gt.from("rsvp_extended").insert(S);if(v){console.error("[MiniverseModal] Error al registrar miniverso:",v),a("error"),u((g=v.message)!=null&&g.includes("rsvp_extended")?"Crea la tabla rsvp_extended en Supabase para habilitar este formulario.":"No pudimos registrar tu inters. Intenta de nuevo.");return}a("success"),nt({description:"Gracias. Te enviaremos una seal cuando el prximo miniverso cobre vida."})}catch(S){console.error("[MiniverseModal] Excepcin al guardar:",S),a("error"),u("Ocurri un error inesperado. Intenta ms tarde.")}}},[r,o]),p=C.useCallback(()=>{o!=="loading"&&(e==null||e())},[e,o]);return m.jsx(Qa,{children:n?m.jsxs(re.div,{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center px-3 py-6 sm:px-4 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[m.jsx(re.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:OG,onClick:p,"aria-hidden":"true"}),m.jsxs(re.div,{role:"dialog","aria-modal":"true","aria-labelledby":"miniverse-modal-title",variants:FG,className:"relative z-10 w-full max-w-4xl rounded-3xl border border-white/10 bg-slate-950/95 p-5 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"Universos expandidos #GatoEncerrado"}),m.jsx("h2",{id:"miniverse-modal-title",className:"font-display text-3xl text-slate-50",children:"Explora los miniversos"}),m.jsx("p",{className:"text-sm text-slate-400/80",children:"Lo que empieza en el escenario contina en otros formatos. Aqu reunimos las experiencias emergentes."})]}),m.jsx("button",{onClick:p,className:"self-end text-slate-400 hover:text-white transition","aria-label":"Cerrar explorador de miniversos",children:""})]}),m.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Qf.map(y=>m.jsx("button",{onClick:()=>s(y.id),className:`rounded-full border px-4 py-2 text-sm transition ${t===y.id?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:y.label},y.id))}),m.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t==="waitlist"?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-4 text-slate-300/90 text-sm leading-relaxed",children:[m.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4",children:[m.jsx("h3",{className:"font-display text-lg text-slate-100 mb-3",children:"Qu necesitas saber?"}),m.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[m.jsx("li",{children:" Las activaciones WebAR de la taza se liberarn primero para esta lista."}),m.jsx("li",{children:" Algunas experiencias requieren tokens nicos impresos en la novela."}),m.jsx("li",{children:" Los miniversos tienen ventanas de tiempo limitadas para preservar la intimidad."})]})]}),m.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4",children:[m.jsx("h3",{className:"font-display text-lg text-purple-200 mb-3",children:"Qu recibirs?"}),m.jsx("p",{children:"Invitaciones privadas, cdigos de acceso, experimentos digitales y acceso anticipado a los contenidos de la Comunidad #GatoEncerrado."})]})]}),m.jsxs("form",{className:"space-y-5",onSubmit:f,children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),m.jsx("input",{name:"fullName",type:"text",required:!0,value:r.fullName,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),m.jsx("input",{name:"email",type:"email",required:!0,value:r.email,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),m.jsx("textarea",{name:"message",rows:3,value:r.message,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Comparte qu miniverso te emociona ms o si traes alguna propuesta."})]}),o==="error"?m.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:l}):null,o==="success"?m.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Quedas en lista para las prximas experiencias. Llegar un correo con la primera pista."}):null,m.jsx(_e,{type:"submit",disabled:o==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:o==="loading"?"Guardando":"Quiero recibir las activaciones"})]})]}):m.jsx("div",{className:"md:col-span-2 grid md:grid-cols-3 gap-6",children:jG.map(y=>m.jsxs("div",{className:"glass-effect rounded-2xl border border-white/10 p-6",children:[m.jsx("h3",{className:"font-display text-xl text-slate-100 mb-3",children:y.title}),m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed mb-4",children:y.description}),m.jsx("span",{className:"text-xs uppercase tracking-[0.25em] text-purple-200/80",children:y.action})]},y.title))})}),m.jsxs("div",{className:"mt-8 flex items-center justify-between text-xs text-slate-500",children:[m.jsx("span",{children:h}),m.jsx("button",{onClick:p,className:"text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]}):null})},$G=()=>{const[n,e]=C.useState(""),[t,s]=C.useState(!1),[r,i]=C.useState("");async function o(){try{s(!0),i("");const a=await fetch("http://localhost:8787/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),l=await a.json();if(!a.ok)throw new Error((l==null?void 0:l.error)||"No se pudo crear la sesin");window.location.href=l.url}catch(a){i(a.message)}finally{s(!1)}}return m.jsxs("div",{className:"max-w-lg mx-auto text-center space-y-3",children:[m.jsx(re.p,{className:"text-md text-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.3},children:"Tu suscripcin mantiene vivo el universo transmedia y respalda la causa que sostiene a #GatoEncerrado."}),m.jsx("input",{type:"email",placeholder:"tu@email.com",value:n,onChange:a=>e(a.target.value),className:"w-full px-3 py-2 rounded text-black"}),m.jsx("button",{onClick:o,disabled:t||!n,className:"bg-white/90 text-black px-4 py-2 rounded disabled:opacity-50",children:t?"Creando sesin":"Continuar con Stripe"}),r&&m.jsx("p",{className:"text-red-300 text-sm",children:r})]})},zI="blog_posts",Jv=[{id:"sample-1",slug:"cartografia-emocional-gato-encerrado",title:"Cartografa emocional de #GatoEncerrado",excerpt:"Un recorrido ntimo por los estados afectivos que atraviesa el universo de la obra y cmo se expanden ms all del escenario.",author:"Equipo Dramaturgia",author_role:"Residencia #GatoEncerrado",content:`Este es un texto de muestra para ilustrar la futura experiencia del blog. Muy pronto podrs leer aqu anlisis curatoriales, entrevistas y reflexiones creadas por la comunidad de #GatoEncerrado. Si quieres contribuir, utiliza el formulario "Enviar Propuesta" dentro de la seccin del blog.

Por ahora, este contenido sirve para validar el diseo y la navegacin. Actualizaremos esta entrada en cuanto estn listas las primeras publicaciones reales.`,published_at:"2024-09-01T12:00:00Z",read_time_minutes:4,tags:["Ensayo","Proceso creativo"]},{id:"sample-2",slug:"practicas-transmedia-teatro",title:"Prcticas transmedia aplicadas al teatro contemporneo",excerpt:"Reflexionamos sobre cmo el universo narrativo de la obra dialoga con otras plataformas y formatos digitales.",author:"Laboratorio Transmedia",author_role:"Investigacin de campo",content:`El blog de #GatoEncerrado abrir la puerta a colaboraciones con investigadores, crticos y artistas. Este artculo placeholder es un recordatorio de que pronto compartiremos crnicas del montaje, estudios de caso y ensayos colaborativos.

Si quieres recibir la publicacin cuando salga, djanos tu correo en el formulario de propuestas.`,published_at:"2024-08-18T12:00:00Z",read_time_minutes:6,tags:["Transmedia","Investigacin"]}],YR=()=>`post-${Math.random().toString(36).slice(2,10)}`,x_=n=>({id:n.id??n.slug??YR(),slug:n.slug??`post-${n.id??YR()}`,title:n.title??"Entrada sin ttulo",excerpt:n.excerpt??n.summary??"",author:n.author??n.byline??"Autora pendiente",author_role:n.author_role??n.role??"",content:n.content??n.body??"",published_at:n.published_at??n.publish_date??null,read_time_minutes:n.read_time_minutes??n.read_time??null,tags:n.tags??[],featured_image_url:n.featured_image_url??n.cover_image??null});async function UG(){try{const{data:n,error:e}=await Gt.from(zI).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).order("published_at",{ascending:!1}).limit(20);if(e)return console.error("[blogService] Error al obtener posts:",e.message),Jv;if(!Array.isArray(n)||n.length===0)return Jv;const t=n.filter(r=>r.is_published===!0||r.is_published===null||typeof r.is_published>"u").map(x_),s=Jv.filter(r=>!t.some(i=>i.slug===r.slug)).map(x_);return[...t,...s]}catch(n){return console.error("[blogService] Excepcin al obtener posts:",n),Jv}}async function VG(n){if(!n)return null;try{const{data:e,error:t}=await Gt.from(zI).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).eq("slug",n).maybeSingle();return t?(console.error("[blogService] Error al obtener post por slug:",t.message),null):!e||e.is_published===!1?null:x_(e)}catch(e){return console.error("[blogService] Excepcin al buscar post por slug:",e),null}}const kn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),A_=[.001,0,0,.001,0,0],IA=1.35,bs={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ri={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ym="pdfjs_internal_editor_",oe={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ve={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},HI={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Kp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Pu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},pv={ERRORS:0,WARNINGS:1,INFOS:5},_f={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Zv={moveTo:0,lineTo:1,curveTo:2,closePath:3},GI={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let C1=pv.WARNINGS;function zG(n){Number.isInteger(n)&&(C1=n)}function HG(){return C1}function T1(n){C1>=pv.INFOS&&console.info(`Info: ${n}`)}function ae(n){C1>=pv.WARNINGS&&console.warn(`Warning: ${n}`)}function Fe(n){throw new Error(n)}function be(n,e){n||Fe(e)}function GG(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function NT(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=YG(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return GG(s)?s:null}function MT(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&NT(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function de(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const bu=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class QR extends bu{constructor(e,t){super(e,"PasswordException"),this.code=t}}class jA extends bu{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class zb extends bu{constructor(e){super(e,"InvalidPDFException")}}class vm extends bu{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class WG extends bu{constructor(e){super(e,"FormatError")}}class bo extends bu{constructor(e){super(e,"AbortException")}}function WI(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Fe("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function mv(n){typeof n!="string"&&Fe("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function qG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function KG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function XG(){try{return new Function(""),!0}catch{return!1}}class qt{static get isLittleEndian(){return de(this,"isLittleEndian",KG())}static get isEvalSupported(){return de(this,"isEvalSupported",XG())}static get isOffscreenCanvasSupported(){return de(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return de(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return de(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return de(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const OA=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var pd,P0,Cm,S_;class Q{static makeHexColor(e,t,s){return`#${OA[e]}${OA[t]}${OA[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[s+d],f=e[s+d+1];e[s+d]=h*r+f*o+l,e[s+d+1]=h*i+f*a+u}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],a=t[3],l=t[4],u=t[5],d=e[0],h=e[1],f=e[2],p=e[3];let y=r*d+l,g=y,S=r*f+l,v=S,b=a*h+u,A=b,_=a*p+u,T=_;if(i!==0||o!==0){const k=i*d,P=i*f,R=o*h,L=o*p;y+=R,v+=R,S+=L,g+=L,b+=k,T+=k,_+=P,A+=P}s[0]=Math.min(s[0],y,S,g,v),s[1]=Math.min(s[1],b,_,A,T),s[2]=Math.max(s[2],y,S,g,v),s[3]=Math.max(s[3],b,_,A,T)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,l=s*i+r*o,u=i**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-l**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,a,l,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,l),E(this,Cm,S_).call(this,e,s,i,a,t,r,o,l,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),u),E(this,Cm,S_).call(this,e,s,i,a,t,r,o,l,3*(-t+3*(r-o)+l),6*(t-2*r+o),3*(r-t),u)}}pd=new WeakSet,P0=function(e,t,s,r,i,o,a,l,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,p=f*u,y=h*(h*(h*e+3*u*t)+3*f*s)+p*r,g=h*(h*(h*i+3*u*o)+3*f*a)+p*l;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],g)},Cm=new WeakSet,S_=function(e,t,s,r,i,o,a,l,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&E(this,pd,P0).call(this,e,t,s,r,i,o,a,l,-h/d,f);return}const p=d**2-4*h*u;if(p<0)return;const y=Math.sqrt(p),g=2*u;E(this,pd,P0).call(this,e,t,s,r,i,o,a,l,(-d+y)/g,f),E(this,pd,P0).call(this,e,t,s,r,i,o,a,l,(-d-y)/g,f)},w(Q,pd),w(Q,Cm);function YG(n){return decodeURIComponent(escape(n))}let FA=null,JR=null;function qI(n){return FA||(FA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,JR=new Map([["","t"]])),n.replaceAll(FA,(e,t,s)=>t?t.normalize("NFKC"):JR.get(s))}function LT(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),WI(n)}const DT="pdfjs_internal_id_";function QG(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of i)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function gn(n,e,t){return Math.min(Math.max(n,e),t)}function KI(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(WI(n))}function JG(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):mv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class bm{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var l;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(bm.shouldBuildText(a))(l=i==null?void 0:i.attributes)!=null&&l.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class IT{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[l,u]of Object.entries(o))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var h,f;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",l=e.div;if(l.append(o),e.viewport){const p=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=p}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const p=document.createTextNode(r.value);o.append(p),a&&bm.shouldBuildText(r.name)&&u.push(p)}return{textDivs:u}}const d=[[r,-1,o]];for(;d.length>0;){const[p,y,g]=d.at(-1);if(y+1===p.children.length){d.pop();continue}const S=p.children[++d.at(-1)[1]];if(S===null)continue;const{name:v}=S;if(v==="#text"){const A=document.createTextNode(S.value);u.push(A),g.append(A);continue}const b=(h=S==null?void 0:S.attributes)!=null&&h.xmlns?document.createElementNS(S.attributes.xmlns,v):document.createElement(v);if(g.append(b),S.attributes&&this.setAttributes({html:b,element:S,storage:t,intent:i,linkService:s}),((f=S.children)==null?void 0:f.length)>0)d.push([S,-1,b]);else if(S.value){const A=document.createTextNode(S.value);a&&bm.shouldBuildText(v)&&u.push(A),b.append(A)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const pi="http://www.w3.org/2000/svg",bl=class bl{};G(bl,"CSS",96),G(bl,"PDF",72),G(bl,"PDF_TO_CSS_UNITS",bl.CSS/bl.PDF);let wo=bl;async function Lf(n,e="text"){if(up(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class gv{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,p;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,f=0,p=1;break;case 90:d=0,h=1,f=1,p=0;break;case 270:d=0,h=-1,f=-1,p=0;break;case 0:d=1,h=0,f=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,p=-p);let y,g,S,v;d===0?(y=Math.abs(u-e[1])*s+i,g=Math.abs(l-e[0])*s+o,S=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(y=Math.abs(l-e[0])*s+i,g=Math.abs(u-e[1])*s+o,S=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[d*s,h*s,f*s,p*s,y-d*s*l-f*s*u,g-h*s*l-p*s*u],this.width=S,this.height=v}get rawDims(){const e=this.viewBox;return de(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new gv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return Q.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];Q.applyTransform(t,this.transform);const s=[e[2],e[3]];return Q.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return Q.applyInverseTransform(s,this.transform),s}}class k1 extends bu{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function yv(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function P1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function XI(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function YI(n,e="document.pdf"){if(typeof n!="string")return e;if(yv(n))return ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const u of a)if(i.test(u))return r(u);const l=Array.from(s.searchParams.keys()).reverse();for(const u of l)if(i.test(u))return r(u)}if(s.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(l)return r(l[0])}return e}class ZR{constructor(){G(this,"started",Object.create(null));G(this,"times",[])}time(e){e in this.started&&ae(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ae(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function up(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Cs(n){n.preventDefault()}function ot(n){n.preventDefault(),n.stopPropagation()}function ZG(n){console.log("Deprecated API usage: "+n)}var Tm;class wm{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;c(this,Tm)||x(this,Tm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Tm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(s,r,i,o,a,l))}}Tm=new WeakMap,w(wm,Tm,void 0);function QI(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new gv({viewBox:i,userUnit:1,scale:e,rotation:t})}function Df(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ae(`Not a valid color format: "${n}"`),[0,0,0])}function eW(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Df(s))}e.remove()}function rt(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function kr(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function Ja(n,e,t=!1,s=!0){if(e instanceof gv){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=qt.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${i}px`,d=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Er{constructor(){const{pixelRatio:e}=Er;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,a=1/0,l=1/0;s=Er.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(a=r/e,l=r/t);const u=Math.min(o,a,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Hb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class tW{static get isDarkMode(){var e;return de(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class JI{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),de(this,"commentForegroundColor",Df(s))}}function ZI(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function e2(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),o=Math.min(t,s,r),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const l=i-o;switch(e[1]=a<.5?l/(i+o):l/(2-i-o),i){case t:e[0]=((s-r)/l+(s<r?6:0))*60;break;case s:e[0]=((r-t)/l+2)*60;break;case r:e[0]=((t-s)/l+4)*60;break}}e[2]=a}function __(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,o=i*(1-Math.abs(t/60%2-1)),a=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function t2(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function n2(n,e,t){__(n,t),t.map(t2);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];__(e,t),t.map(t2);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const s2=new Map;function ej(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=s2.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);e2(n,o);const a=r.subarray(6,9);e2(e,a);const l=a[2]<.5,u=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),n2(o,a,i)<u){let d,h;l?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const p=o[2]=(d+h)/2;l===n2(o,a,i)<u?d=p:h=p}o[2]=l?h:d}return __(o,i),s=Q.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),s2.set(t,s),s}function jT({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const u=o[a];i.append(document.createTextNode(u)),a<l-1&&i.append(document.createElement("br"))}r.append(i)}else IT.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}var Io,jo,Ds,Is,km,Oo,md,gd,Pm,nw,tj,sw,nj,rw,sj,Fo,Ru,Tl,dp;const bi=class bi{constructor(e){w(this,sw);w(this,rw);w(this,Fo);w(this,Tl);w(this,Io,null);w(this,jo,null);w(this,Ds,void 0);w(this,Is,null);w(this,km,null);w(this,Oo,null);w(this,md,null);w(this,gd,null);x(this,Ds,e),c(bi,Pm)||x(bi,Pm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=x(this,Io,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,Ds)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Cs,{signal:t}),e.addEventListener("pointerdown",E(bi,nw,tj),{signal:t}));const s=x(this,Is,document.createElement("div"));s.className="buttons",e.append(s);const r=c(this,Ds).toolbarPosition;if(r){const{style:i}=e,o=c(this,Ds)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return c(this,Io)}hide(){var e;c(this,Io).classList.add("hidden"),(e=c(this,jo))==null||e.hideDropdown()}show(){var e,t;c(this,Io).classList.remove("hidden"),(e=c(this,km))==null||e.shown(),(t=c(this,Oo))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=c(this,Ds),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",c(bi,Pm)[e]),E(this,Fo,Ru).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,Is).append(s)}async addAltText(e){const t=await e.render();E(this,Fo,Ru).call(this,t),c(this,Is).append(t,c(this,Tl,dp)),x(this,km,e)}addComment(e,t=null){if(c(this,Oo))return;const s=e.renderForToolbar();if(!s)return;E(this,Fo,Ru).call(this,s);const r=x(this,md,c(this,Tl,dp));t?(c(this,Is).insertBefore(s,t),c(this,Is).insertBefore(r,t)):c(this,Is).append(s,r),x(this,Oo,e),e.toolbar=this}addColorPicker(e){if(c(this,jo))return;x(this,jo,e);const t=e.renderButton();E(this,Fo,Ru).call(this,t),c(this,Is).append(t,c(this,Tl,dp))}async addEditSignatureButton(e){const t=x(this,gd,await e.renderEditButton(c(this,Ds)));E(this,Fo,Ru).call(this,t),c(this,Is).append(t,c(this,Tl,dp))}removeButton(e){var t,s;switch(e){case"comment":(t=c(this,Oo))==null||t.removeToolbarCommentButton(),x(this,Oo,null),(s=c(this,md))==null||s.remove(),x(this,md,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=c(this,Is).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){c(this,gd)&&(c(this,gd).title=e)}remove(){var e;c(this,Io).remove(),(e=c(this,jo))==null||e.destroy(),x(this,jo,null)}};Io=new WeakMap,jo=new WeakMap,Ds=new WeakMap,Is=new WeakMap,km=new WeakMap,Oo=new WeakMap,md=new WeakMap,gd=new WeakMap,Pm=new WeakMap,nw=new WeakSet,tj=function(e){e.stopPropagation()},sw=new WeakSet,nj=function(e){c(this,Ds)._focusEventsAllowed=!1,ot(e)},rw=new WeakSet,sj=function(e){c(this,Ds)._focusEventsAllowed=!0,ot(e)},Fo=new WeakSet,Ru=function(e){const t=c(this,Ds)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",E(this,sw,nj).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",E(this,rw,sj).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Cs,{signal:t}),!0)},Tl=new WeakSet,dp=function(){const e=document.createElement("div");return e.className="divider",e},w(bi,nw),w(bi,Pm,null);let E_=bi;var Rm,kl,Ai,iw,rj,ow,ij,Nm,C_;class nW{constructor(e){w(this,iw);w(this,ow);w(this,Nm);w(this,Rm,null);w(this,kl,null);w(this,Ai,void 0);x(this,Ai,e)}show(e,t,s){const[r,i]=E(this,ow,ij).call(this,t,s),{style:o}=c(this,kl)||x(this,kl,E(this,iw,rj).call(this));e.append(c(this,kl)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,kl).remove()}}Rm=new WeakMap,kl=new WeakMap,Ai=new WeakMap,iw=new WeakSet,rj=function(){const e=x(this,kl,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=c(this,Ai)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Cs,{signal:t});const s=x(this,Rm,document.createElement("div"));return s.className="buttons",e.append(s),c(this,Ai).hasCommentManager()&&E(this,Nm,C_).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{c(this,Ai).commentSelection("floating_button")}),E(this,Nm,C_).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{c(this,Ai).highlightSelection("floating_button")}),e},ow=new WeakSet,ij=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},Nm=new WeakSet,C_=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const a=c(this,Ai)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Cs,{signal:a}),i.addEventListener("click",r,{signal:a})),c(this,Rm).append(i)};function oj(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var aw;class sW{constructor(){w(this,aw,0)}get id(){return`${ym}${kt(this,aw)._++}`}}aw=new WeakMap;var yd,Mm,cn,vd,R0;const ek=class ek{constructor(){w(this,vd);w(this,yd,LT());w(this,Mm,0);w(this,cn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return de(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return E(this,vd,R0).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return E(this,vd,R0).call(this,e,e)}async getFromBlob(e,t){const s=await t;return E(this,vd,R0).call(this,e,s)}async getFromId(e){c(this,cn)||x(this,cn,new Map);const t=c(this,cn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,cn)||x(this,cn,new Map);let s=c(this,cn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${c(this,yd)}_${kt(this,Mm)._++}`,refCounter:1,isSvg:!1},c(this,cn).set(e,s),c(this,cn).set(s.id,s),s}getSvgUrl(e){const t=c(this,cn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,cn)||x(this,cn,new Map);const t=c(this,cn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,yd)}_`)}};yd=new WeakMap,Mm=new WeakMap,cn=new WeakMap,vd=new WeakSet,R0=async function(e,t){c(this,cn)||x(this,cn,new Map);let s=c(this,cn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${c(this,yd)}_${kt(this,Mm)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await Lf(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=ek._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((u,d)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const h=s.svgUrl=o.result;a.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(r),await l}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){ae(r),s=null}return c(this,cn).set(e,s),s&&c(this,cn).set(s.id,s),s};let T_=ek;var bt,Bo,Lm,st;class rW{constructor(e=128){w(this,bt,[]);w(this,Bo,!1);w(this,Lm,void 0);w(this,st,-1);x(this,Lm,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),c(this,Bo))return;const l={cmd:e,undo:t,post:s,type:i};if(c(this,st)===-1){c(this,bt).length>0&&(c(this,bt).length=0),x(this,st,0),c(this,bt).push(l);return}if(o&&c(this,bt)[c(this,st)].type===i){a&&(l.undo=c(this,bt)[c(this,st)].undo),c(this,bt)[c(this,st)]=l;return}const u=c(this,st)+1;u===c(this,Lm)?c(this,bt).splice(0,1):(x(this,st,u),u<c(this,bt).length&&c(this,bt).splice(u)),c(this,bt).push(l)}undo(){if(c(this,st)===-1)return;x(this,Bo,!0);const{undo:e,post:t}=c(this,bt)[c(this,st)];e(),t==null||t(),x(this,Bo,!1),x(this,st,c(this,st)-1)}redo(){if(c(this,st)<c(this,bt).length-1){x(this,st,c(this,st)+1),x(this,Bo,!0);const{cmd:e,post:t}=c(this,bt)[c(this,st)];e(),t==null||t(),x(this,Bo,!1)}}hasSomethingToUndo(){return c(this,st)!==-1}hasSomethingToRedo(){return c(this,st)<c(this,bt).length-1}cleanType(e){if(c(this,st)!==-1){for(let t=c(this,st);t>=0;t--)if(c(this,bt)[t].type!==e){c(this,bt).splice(t+1,c(this,st)-t),x(this,st,t);return}c(this,bt).length=0,x(this,st,-1)}}destroy(){x(this,bt,null)}}bt=new WeakMap,Bo=new WeakMap,Lm=new WeakMap,st=new WeakMap;var lw,aj;class vv{constructor(e){w(this,lw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=qt.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(E(this,lw,aj).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||ot(t))}}lw=new WeakSet,aj=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const cw=class cw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return eW(e),de(this,"_colors",e)}convert(e){const t=Df(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return cw._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Q.makeHexColor(...t):e}};G(cw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let k_=cw;var bd,ts,wd,ht,Nt,xd,js,Ad,Os,un,$o,Uo,Sd,Vo,Lr,Fs,Pl,Dm,Im,_d,jm,Dr,zo,Ed,Ho,Ir,uw,Go,Cd,Om,Wo,Rl,Td,qo,Fm,_t,ke,Si,Ko,Xo,Bm,kd,$m,Yo,jr,_i,Um,Vm,Bs,Pd,N0,zm,P_,dw,lj,hw,cj,Nl,hp,fw,uj,pw,dj,mw,hj,Hm,R_,gw,fj,Gm,N_,Wm,M_,yw,pj,Xt,An,rr,mi,vw,mj,bw,gj,qm,L_,ww,yj,Ml,fp,Km,D_;const ed=class ed{constructor(e,t,s,r,i,o,a,l,u,d,h,f,p,y,g,S){w(this,Pd);w(this,zm);w(this,dw);w(this,hw);w(this,Nl);w(this,fw);w(this,pw);w(this,mw);w(this,Hm);w(this,gw);w(this,Gm);w(this,Wm);w(this,yw);w(this,Xt);w(this,rr);w(this,vw);w(this,bw);w(this,qm);w(this,ww);w(this,Ml);w(this,Km);w(this,bd,new AbortController);w(this,ts,null);w(this,wd,null);w(this,ht,new Map);w(this,Nt,new Map);w(this,xd,null);w(this,js,null);w(this,Ad,null);w(this,Os,new rW);w(this,un,null);w(this,$o,null);w(this,Uo,null);w(this,Sd,0);w(this,Vo,new Set);w(this,Lr,null);w(this,Fs,null);w(this,Pl,new Set);G(this,"_editorUndoBar",null);w(this,Dm,!1);w(this,Im,!1);w(this,_d,!1);w(this,jm,null);w(this,Dr,null);w(this,zo,null);w(this,Ed,null);w(this,Ho,!1);w(this,Ir,null);w(this,uw,new sW);w(this,Go,!1);w(this,Cd,!1);w(this,Om,!1);w(this,Wo,null);w(this,Rl,null);w(this,Td,null);w(this,qo,null);w(this,Fm,null);w(this,_t,oe.NONE);w(this,ke,new Set);w(this,Si,null);w(this,Ko,null);w(this,Xo,null);w(this,Bm,null);w(this,kd,null);w(this,$m,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,Yo,[0,0]);w(this,jr,null);w(this,_i,null);w(this,Um,null);w(this,Vm,null);w(this,Bs,null);const v=this._signal=c(this,bd).signal;x(this,_i,e),x(this,Um,t),x(this,Vm,s),x(this,xd,r),x(this,un,i),x(this,Ko,o),x(this,kd,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),window.addEventListener("pointerdown",()=>{x(this,Cd,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{x(this,Cd,!1)},{capture:!0,signal:v}),E(this,fw,uj).call(this),E(this,yw,pj).call(this),E(this,Hm,R_).call(this),x(this,js,l.annotationStorage),x(this,jm,l.filterFactory),x(this,Xo,u),x(this,Ed,d||null),x(this,Dm,h),x(this,Im,f),x(this,_d,p),x(this,Fm,y||null),this.viewParameters={realScale:wo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=S!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=ed.prototype,t=o=>c(o,_i).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return de(this,"_keyboardManager",new vv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,_i).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&c(o,_i).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,a,l,u;(e=c(this,Bs))==null||e.resolve(),x(this,Bs,null),(t=c(this,bd))==null||t.abort(),x(this,bd,null),this._signal=null;for(const d of c(this,Nt).values())d.destroy();c(this,Nt).clear(),c(this,ht).clear(),c(this,Pl).clear(),(s=c(this,qo))==null||s.clear(),x(this,ts,null),c(this,ke).clear(),c(this,Os).destroy(),(r=c(this,xd))==null||r.destroy(),(i=c(this,un))==null||i.destroy(),(o=c(this,Ko))==null||o.destroy(),(a=c(this,Ir))==null||a.hide(),x(this,Ir,null),(l=c(this,Td))==null||l.destroy(),x(this,Td,null),x(this,wd,null),c(this,Dr)&&(clearTimeout(c(this,Dr)),x(this,Dr,null)),c(this,jr)&&(clearTimeout(c(this,jr)),x(this,jr,null)),(u=this._editorUndoBar)==null||u.destroy(),x(this,kd,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,Fm)}get useNewAltTextFlow(){return c(this,Im)}get useNewAltTextWhenAddingImage(){return c(this,_d)}get hcmFilter(){return de(this,"hcmFilter",c(this,Xo)?c(this,jm).addHCMFilter(c(this,Xo).foreground,c(this,Xo).background):"none")}get direction(){return de(this,"direction",getComputedStyle(c(this,_i)).direction)}get _highlightColors(){return de(this,"_highlightColors",c(this,Ed)?new Map(c(this,Ed).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return de(this,"highlightColors",null);const t=new Map,s=!!c(this,Xo);for(const[r,i]of e){const o=r.endsWith("_HCM");if(s&&o){t.set(r.replace("_HCM",""),i);continue}!s&&!o&&t.set(r,i)}return de(this,"highlightColors",t)}get highlightColorNames(){return de(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),x(this,Uo,e)}setMainHighlightColorPicker(e){x(this,Td,e)}editAltText(e,t=!1){var s;(s=c(this,xd))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!c(this,un)}editComment(e,t,s,r){var i;(i=c(this,un))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=c(this,Nt).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=c(this,un))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=c(this,un))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=c(this,un))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=c(this,un))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=c(this,un))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=c(this,un))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(c(this,Nt).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=c(this,Ko))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return c(this,Ko)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":x(this,_d,t);break}}onPageChanging({pageNumber:e}){x(this,Sd,e-1)}focusMainContainer(){c(this,_i).focus()}findParent(e,t){for(const s of c(this,Nt).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){c(this,Um).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Pl).add(e)}removeShouldRescale(e){c(this,Pl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*wo.PDF_TO_CSS_UNITS;for(const s of c(this,Pl))s.onScaleChanging();(t=c(this,Uo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=s,l=s.toString(),d=E(this,Pd,N0).call(this,s).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;s.empty();const f=E(this,zm,P_).call(this,d),p=c(this,_t)===oe.NONE,y=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a,text:l});p&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(p){this.switchToMode(oe.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!c(this,js))return null;const t=`${ym}${e}`,s=c(this,js).getRawValue(t);return s&&c(this,js).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&c(this,js)&&!c(this,js).has(e.id)&&c(this,js).setValue(e.id,e)}a11yAlert(e,t=null){const s=c(this,Vm);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,c(this,Ho)&&(x(this,Ho,!1),E(this,Nl,hp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,ke))if(t.div.contains(e)){x(this,Rl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,Rl))return;const[e,t]=c(this,Rl);x(this,Rl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){E(this,Hm,R_).call(this),E(this,Gm,N_).call(this)}removeEditListeners(){E(this,gw,fj).call(this),E(this,Wm,M_).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of c(this,Fs))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of c(this,Fs))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=c(this,ts))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,ke)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of c(this,Fs))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){ae(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const l of s){const u=await r.deserialize(l);if(!u)return;i.push(u)}const o=()=>{for(const l of i)E(this,qm,L_).call(this,l);E(this,Km,D_).call(this,i)},a=()=>{for(const l of i)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){ae(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,_t)!==oe.NONE&&!this.isEditorHandlingKeyboard&&ed._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,Ho)&&(x(this,Ho,!1),E(this,Nl,hp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(E(this,pw,dj).call(this),E(this,Gm,N_).call(this),E(this,Xt,An).call(this,{isEditing:c(this,_t)!==oe.NONE,isEmpty:E(this,Ml,fp).call(this),hasSomethingToUndo:c(this,Os).hasSomethingToUndo(),hasSomethingToRedo:c(this,Os).hasSomethingToRedo(),hasSelectedEditor:!1})):(E(this,mw,hj).call(this),E(this,Wm,M_).call(this),E(this,Xt,An).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,Fs)){x(this,Fs,e);for(const t of c(this,Fs))E(this,rr,mi).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,uw).id}get currentLayer(){return c(this,Nt).get(c(this,Sd))}getLayer(e){return c(this,Nt).get(e)}get currentPageIndex(){return c(this,Sd)}addLayer(e){c(this,Nt).set(e.pageIndex,e),c(this,Go)?e.enable():e.disable()}removeLayer(e){c(this,Nt).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var o,a,l,u,d,h;if(c(this,_t)!==e&&!(c(this,Bs)&&(await c(this,Bs).promise,!c(this,Bs)))){if(x(this,Bs,Promise.withResolvers()),(o=c(this,Uo))==null||o.commitOrRemove(),c(this,_t)===oe.POPUP&&((a=c(this,un))==null||a.hideSidebar()),(l=c(this,un))==null||l.destroyPopup(),x(this,_t,e),e===oe.NONE){this.setEditingState(!1),E(this,bw,gj).call(this);for(const f of c(this,ht).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),c(this,Bs).resolve();return}for(const f of c(this,ht).values())f.addStandaloneCommentButton();e===oe.SIGNATURE&&await((d=c(this,Ko))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await E(this,vw,mj).call(this),this.unselectAll();for(const f of c(this,Nt).values())f.updateMode(e);if(e===oe.POPUP){c(this,wd)||x(this,wd,await c(this,kd).getAnnotationsByType(new Set(c(this,Fs).map(y=>y._editorType))));const f=new Set,p=[];for(const y of c(this,ht).values()){const{annotationElementId:g,hasComment:S,deleted:v}=y;g&&f.add(g),S&&!v&&p.push(y.getData())}for(const y of c(this,wd)){const{id:g,popupRef:S,contentsObj:v}=y;S&&(v!=null&&v.str)&&!f.has(g)&&!c(this,Vo).has(g)&&p.push(y)}(h=c(this,un))==null||h.showSidebar(p)}if(!t){s&&this.addNewEditorFromKeyboard(),c(this,Bs).resolve();return}for(const f of c(this,ht).values())f.uid===t?(this.setSelected(f),i?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();c(this,Bs).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==c(this,_t)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(c(this,Fs)){switch(e){case ve.CREATE:this.currentLayer.addNewEditor(t);return;case ve.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,Bm)||x(this,Bm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of c(this,ke))s.updateParams(e,t);else for(const s of c(this,Fs))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of c(this,ht).values())o.editorType===e&&o.show(t);(((i=c(this,Bm))==null?void 0:i.get(ve.HIGHLIGHT_SHOW_ALL))??!0)!==t&&E(this,rr,mi).call(this,[[ve.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,Om)!==e){x(this,Om,e);for(const t of c(this,Nt).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of c(this,ht).values())t.pageIndex===e&&(yield t)}getEditor(e){return c(this,ht).get(e)}addEditor(e){c(this,ht).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(c(this,Dr)&&clearTimeout(c(this,Dr)),x(this,Dr,setTimeout(()=>{this.focusMainContainer(),x(this,Dr,null)},0))),c(this,ht).delete(e.id),e.annotationElementId&&((t=c(this,qo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!c(this,Vo).has(e.annotationElementId))&&((s=c(this,js))==null||s.remove(e.id))}addDeletedAnnotationElement(e){c(this,Vo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Vo).has(e)}removeDeletedAnnotationElement(e){c(this,Vo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,ts)!==e&&(x(this,ts,e),e&&E(this,rr,mi).call(this,e.propertiesToUpdate))}updateUI(e){c(this,ww,yj)===e&&E(this,rr,mi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){E(this,rr,mi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(c(this,ke).has(e)){c(this,ke).delete(e),e.unselect(),E(this,Xt,An).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,ke).add(e),e.select(),E(this,rr,mi).call(this,e.propertiesToUpdate),E(this,Xt,An).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=c(this,Uo))==null||t.commitOrRemove();for(const s of c(this,ke))s!==e&&s.unselect();c(this,ke).clear(),c(this,ke).add(e),e.select(),E(this,rr,mi).call(this,e.propertiesToUpdate),E(this,Xt,An).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,ke).has(e)}get firstSelectedEditor(){return c(this,ke).values().next().value}unselect(e){e.unselect(),c(this,ke).delete(e),E(this,Xt,An).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,ke).size!==0}get isEnterHandled(){return c(this,ke).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;c(this,Os).undo(),E(this,Xt,An).call(this,{hasSomethingToUndo:c(this,Os).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:E(this,Ml,fp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){c(this,Os).redo(),E(this,Xt,An).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,Os).hasSomethingToRedo(),isEmpty:E(this,Ml,fp).call(this)})}addCommands(e){c(this,Os).add(e),E(this,Xt,An).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:E(this,Ml,fp).call(this)})}cleanUndoStack(e){c(this,Os).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...c(this,ke)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)E(this,qm,L_).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=c(this,ts))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,ts)||this.hasSelection}selectAll(){for(const e of c(this,ke))e.commit();E(this,Km,D_).call(this,c(this,ht).values())}unselectAll(){var e;if(!(c(this,ts)&&(c(this,ts).commitOrRemove(),c(this,_t)!==oe.NONE))&&!((e=c(this,Uo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of c(this,ke))t.unselect();c(this,ke).clear(),E(this,Xt,An).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;c(this,Yo)[0]+=e,c(this,Yo)[1]+=t;const[r,i]=c(this,Yo),o=[...c(this,ke)],a=1e3;c(this,jr)&&clearTimeout(c(this,jr)),x(this,jr,setTimeout(()=>{x(this,jr,null),c(this,Yo)[0]=c(this,Yo)[1]=0,this.addCommands({cmd:()=>{for(const l of o)c(this,ht).has(l.id)&&(l.translateInPage(r,i),l.translationDone())},undo:()=>{for(const l of o)c(this,ht).has(l.id)&&(l.translateInPage(-r,-i),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,Lr,new Map);for(const e of c(this,ke))c(this,Lr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Lr))return!1;this.disableUserSelect(!1);const e=c(this,Lr);x(this,Lr,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(c(this,ht).has(r.id)){const l=c(this,Nt).get(a);l?r._setParentAndPosition(l,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,Lr))for(const s of c(this,Lr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,ke).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,ts)===e}getActive(){return c(this,ts)}getMode(){return c(this,_t)}isEditingMode(){return c(this,_t)!==oe.NONE}get imageManager(){return de(this,"imageManager",new T_)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-r)/o,y:1-(u+h-s)/i,width:f/o,height:h/i});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-s)/i,y:1-(d+f-r)/o,width:h/i,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-r)/o,y:(u-s)/i,width:f/o,height:h/i});break;default:a=(u,d,h,f)=>({x:(u-s)/i,y:(d-r)/o,width:h/i,height:f/o});break}const l=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:p,width:y,height:g}of h.getClientRects())y===0||g===0||l.push(a(f,p,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Ad)||x(this,Ad,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Ad))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Ad))==null?void 0:r.get(e.data.id);if(!t)return;const s=c(this,js).getRawValue(t);s&&(c(this,_t)===oe.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=c(this,qo))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),c(this,qo).delete(e))}addMissingCanvas(e,t){(c(this,qo)||x(this,qo,new Map)).set(e,t)}};bd=new WeakMap,ts=new WeakMap,wd=new WeakMap,ht=new WeakMap,Nt=new WeakMap,xd=new WeakMap,js=new WeakMap,Ad=new WeakMap,Os=new WeakMap,un=new WeakMap,$o=new WeakMap,Uo=new WeakMap,Sd=new WeakMap,Vo=new WeakMap,Lr=new WeakMap,Fs=new WeakMap,Pl=new WeakMap,Dm=new WeakMap,Im=new WeakMap,_d=new WeakMap,jm=new WeakMap,Dr=new WeakMap,zo=new WeakMap,Ed=new WeakMap,Ho=new WeakMap,Ir=new WeakMap,uw=new WeakMap,Go=new WeakMap,Cd=new WeakMap,Om=new WeakMap,Wo=new WeakMap,Rl=new WeakMap,Td=new WeakMap,qo=new WeakMap,Fm=new WeakMap,_t=new WeakMap,ke=new WeakMap,Si=new WeakMap,Ko=new WeakMap,Xo=new WeakMap,Bm=new WeakMap,kd=new WeakMap,$m=new WeakMap,Yo=new WeakMap,jr=new WeakMap,_i=new WeakMap,Um=new WeakMap,Vm=new WeakMap,Bs=new WeakMap,Pd=new WeakSet,N0=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},zm=new WeakSet,P_=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of c(this,Nt).values())if(s.hasTextLayer(e))return s;return null},dw=new WeakSet,lj=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=E(this,Pd,N0).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(c(this,Ir)||x(this,Ir,new nW(this)),c(this,Ir).show(s,r,this.direction==="ltr"))},hw=new WeakSet,cj=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){c(this,Si)&&((i=c(this,Ir))==null||i.hide(),x(this,Si,null),E(this,Xt,An).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,Si))return;const r=E(this,Pd,N0).call(this,e).closest(".textLayer");if(!r){c(this,Si)&&((o=c(this,Ir))==null||o.hide(),x(this,Si,null),E(this,Xt,An).call(this,{hasSelectedText:!1}));return}if((a=c(this,Ir))==null||a.hide(),x(this,Si,t),E(this,Xt,An).call(this,{hasSelectedText:!0}),!(c(this,_t)!==oe.HIGHLIGHT&&c(this,_t)!==oe.NONE)&&(c(this,_t)===oe.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,Ho,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,_t)===oe.HIGHLIGHT?E(this,zm,P_).call(this,r):null;if(l==null||l.toggleDrawing(),c(this,Cd)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&E(this,Nl,hp).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else l==null||l.toggleDrawing(!0),E(this,Nl,hp).call(this,"main_toolbar")}},Nl=new WeakSet,hp=function(e=""){c(this,_t)===oe.HIGHLIGHT?this.highlightSelection(e):c(this,Dm)&&E(this,dw,lj).call(this)},fw=new WeakSet,uj=function(){document.addEventListener("selectionchange",E(this,hw,cj).bind(this),{signal:this._signal})},pw=new WeakSet,dj=function(){if(c(this,zo))return;x(this,zo,new AbortController);const e=this.combinedSignal(c(this,zo));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},mw=new WeakSet,hj=function(){var e;(e=c(this,zo))==null||e.abort(),x(this,zo,null)},Hm=new WeakSet,R_=function(){if(c(this,Wo))return;x(this,Wo,new AbortController);const e=this.combinedSignal(c(this,Wo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},gw=new WeakSet,fj=function(){var e;(e=c(this,Wo))==null||e.abort(),x(this,Wo,null)},Gm=new WeakSet,N_=function(){if(c(this,$o))return;x(this,$o,new AbortController);const e=this.combinedSignal(c(this,$o));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Wm=new WeakSet,M_=function(){var e;(e=c(this,$o))==null||e.abort(),x(this,$o,null)},yw=new WeakSet,pj=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Xt=new WeakSet,An=function(e){Object.entries(e).some(([s,r])=>c(this,$m)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,$m),e)}),c(this,_t)===oe.HIGHLIGHT&&e.hasSelectedEditor===!1&&E(this,rr,mi).call(this,[[ve.HIGHLIGHT_FREE,!0]]))},rr=new WeakSet,mi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},vw=new WeakSet,mj=async function(){if(!c(this,Go)){x(this,Go,!0);const e=[];for(const t of c(this,Nt).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,ht).values())t.enable()}},bw=new WeakSet,gj=function(){if(this.unselectAll(),c(this,Go)){x(this,Go,!1);for(const e of c(this,Nt).values())e.disable();for(const e of c(this,ht).values())e.disable()}},qm=new WeakSet,L_=function(e){const t=c(this,Nt).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},ww=new WeakSet,yj=function(){let e=null;for(e of c(this,ke));return e},Ml=new WeakSet,fp=function(){if(c(this,ht).size===0)return!0;if(c(this,ht).size===1)for(const e of c(this,ht).values())return e.isEmpty();return!1},Km=new WeakSet,D_=function(e){for(const t of c(this,ke))t.unselect();c(this,ke).clear();for(const t of e)t.isEmpty()||(c(this,ke).add(t),t.select());E(this,Xt,An).call(this,{hasSelectedEditor:this.hasSelection})},G(ed,"TRANSLATE_SMALL",1),G(ed,"TRANSLATE_BIG",10);let Za=ed;var jt,Or,ir,Rd,Fr,ns,Nd,Br,Bn,Ei,Ll,$r,Qo,Dl,pp,Md,M0;const Sn=class Sn{constructor(e){w(this,Dl);w(this,Md);w(this,jt,null);w(this,Or,!1);w(this,ir,null);w(this,Rd,null);w(this,Fr,null);w(this,ns,null);w(this,Nd,!1);w(this,Br,null);w(this,Bn,null);w(this,Ei,null);w(this,Ll,null);w(this,$r,!1);x(this,Bn,e),x(this,$r,e._uiManager.useNewAltTextFlow),c(Sn,Qo)||x(Sn,Qo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Sn._l10n??(Sn._l10n=e)}async render(){const e=x(this,ir,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=x(this,Rd,document.createElement("span"));e.append(t),c(this,$r)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Sn,Qo).missing),t.setAttribute("data-l10n-id",c(Sn,Qo)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=c(this,Bn)._uiManager._signal;e.addEventListener("contextmenu",Cs,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),c(this,Bn)._uiManager.editAltText(c(this,Bn)),c(this,$r)&&c(this,Bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Dl,pp)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,Nd,!0),r(i))},{signal:s}),await E(this,Md,M0).call(this),e}finish(){c(this,ir)&&(c(this,ir).focus({focusVisible:c(this,Nd)}),x(this,Nd,!1))}isEmpty(){return c(this,$r)?c(this,jt)===null:!c(this,jt)&&!c(this,Or)}hasData(){return c(this,$r)?c(this,jt)!==null||!!c(this,Ei):this.isEmpty()}get guessedText(){return c(this,Ei)}async setGuessedText(e){c(this,jt)===null&&(x(this,Ei,e),x(this,Ll,await Sn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),E(this,Md,M0).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,$r)||c(this,jt)){(t=c(this,Br))==null||t.remove(),x(this,Br,null);return}if(!c(this,Br)){const s=x(this,Br,document.createElement("div"));s.className="noAltTextBadge",c(this,Bn).div.append(s)}c(this,Br).classList.toggle("hidden",!e)}serialize(e){let t=c(this,jt);return!e&&c(this,Ei)===t&&(t=c(this,Ll)),{altText:t,decorative:c(this,Or),guessedText:c(this,Ei),textWithDisclaimer:c(this,Ll)}}get data(){return{altText:c(this,jt),decorative:c(this,Or)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(x(this,Ei,s),x(this,Ll,r)),!(c(this,jt)===e&&c(this,Or)===t)&&(i||(x(this,jt,e),x(this,Or,t)),E(this,Md,M0).call(this))}toggle(e=!1){c(this,ir)&&(!e&&c(this,ns)&&(clearTimeout(c(this,ns)),x(this,ns,null)),c(this,ir).disabled=!e)}shown(){c(this,Bn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Dl,pp)}})}destroy(){var e,t;(e=c(this,ir))==null||e.remove(),x(this,ir,null),x(this,Rd,null),x(this,Fr,null),(t=c(this,Br))==null||t.remove(),x(this,Br,null)}};jt=new WeakMap,Or=new WeakMap,ir=new WeakMap,Rd=new WeakMap,Fr=new WeakMap,ns=new WeakMap,Nd=new WeakMap,Br=new WeakMap,Bn=new WeakMap,Ei=new WeakMap,Ll=new WeakMap,$r=new WeakMap,Qo=new WeakMap,Dl=new WeakSet,pp=function(){return c(this,jt)&&"added"||c(this,jt)===null&&this.guessedText&&"review"||"missing"},Md=new WeakSet,M0=async function(){var r,i,o;const e=c(this,ir);if(!e)return;if(c(this,$r)){if(e.classList.toggle("done",!!c(this,jt)),e.setAttribute("data-l10n-id",c(Sn,Qo)[c(this,Dl,pp)]),(r=c(this,Rd))==null||r.setAttribute("data-l10n-id",c(Sn,Qo)[`${c(this,Dl,pp)}-label`]),!c(this,jt)){(i=c(this,Fr))==null||i.remove();return}}else{if(!c(this,jt)&&!c(this,Or)){e.classList.remove("done"),(o=c(this,Fr))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Fr);if(!t){x(this,Fr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,Bn).id}`;const a=100,l=c(this,Bn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,ns)),x(this,ns,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,ns,setTimeout(()=>{x(this,ns,null),c(this,Fr).classList.add("show"),c(this,Bn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,ns)&&(clearTimeout(c(this,ns)),x(this,ns,null)),(u=c(this,Fr))==null||u.classList.remove("show")},{signal:l})}c(this,Or)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,jt)),t.parentNode||e.append(t);const s=c(this,Bn).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},w(Sn,Qo,null),G(Sn,"_l10n",null);let Gb=Sn;var Yt,$s,Il,Ue,Xm,jl,or,Ol,Fl,Bl,Ym,I_;class e0{constructor(e){w(this,Ym);w(this,Yt,null);w(this,$s,null);w(this,Il,!1);w(this,Ue,null);w(this,Xm,null);w(this,jl,null);w(this,or,null);w(this,Ol,null);w(this,Fl,!1);w(this,Bl,null);x(this,Ue,e)}renderForToolbar(){const e=x(this,$s,document.createElement("button"));return e.className="comment",E(this,Ym,I_).call(this,e,!1)}renderForStandalone(){const e=x(this,Yt,document.createElement("button"));e.className="annotationCommentButton";const t=c(this,Ue).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(c(this,Ue)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=c(this,Ue).commentButtonColor;r&&(s.backgroundColor=r)}return E(this,Ym,I_).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=c(this,Yt)??c(this,$s))==null||e.focus()},0)}onUpdatedColor(){if(!c(this,Yt))return;const e=c(this,Ue).commentButtonColor;e&&(c(this,Yt).style.backgroundColor=e),c(this,Ue)._uiManager.updatePopupColor(c(this,Ue))}get commentButtonWidth(){var e;return(((e=c(this,Yt))==null?void 0:e.getBoundingClientRect().width)??0)/c(this,Ue).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(c(this,Bl))return c(this,Bl);if(!c(this,Yt))return null;const{x:e,y:t,height:s}=c(this,Yt).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=c(this,Ue).parent.boundingClientRect;return[(e-r)/o,(t+s-i)/a]}set commentPopupPositionInLayer(e){x(this,Bl,e)}hasDefaultPopupPosition(){return c(this,Bl)===null}removeStandaloneCommentButton(){var e;(e=c(this,Yt))==null||e.remove(),x(this,Yt,null)}removeToolbarCommentButton(){var e;(e=c(this,$s))==null||e.remove(),x(this,$s,null)}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Yt)&&(c(this,Yt).classList.toggle("selected",e),c(this,Yt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=c(this,Ue).commentButtonPosition;const{width:d,height:h,x:f,y:p}=c(this,Ue);s=f+s*d,r=p+r*h}const i=c(this,Ue).parent.boundingClientRect,{x:o,y:a,width:l,height:u}=i;c(this,Ue)._uiManager.editComment(c(this,Ue),o+s*l,a+r*u,{...e,parentDimensions:i})}finish(){c(this,$s)&&(c(this,$s).focus({focusVisible:c(this,Il)}),x(this,Il,!1))}isDeleted(){return c(this,Fl)||c(this,or)===""}isEmpty(){return c(this,or)===null}hasBeenEdited(){return this.isDeleted()||c(this,or)!==c(this,Xm)}serialize(){return this.data}get data(){return{text:c(this,or),richText:c(this,jl),date:c(this,Ol),deleted:this.isDeleted()}}set data(e){if(e!==c(this,or)&&x(this,jl,null),e===null){x(this,or,""),x(this,Fl,!0);return}x(this,or,e),x(this,Ol,new Date),x(this,Fl,!1)}setInitialText(e,t=null){x(this,Xm,e),this.data=e,x(this,Ol,null),x(this,jl,t)}shown(){}destroy(){var e,t;(e=c(this,$s))==null||e.remove(),x(this,$s,null),(t=c(this,Yt))==null||t.remove(),x(this,Yt,null),x(this,or,""),x(this,jl,null),x(this,Ol,null),x(this,Ue,null),x(this,Il,!1),x(this,Fl,!1)}}Yt=new WeakMap,$s=new WeakMap,Il=new WeakMap,Ue=new WeakMap,Xm=new WeakMap,jl=new WeakMap,or=new WeakMap,Ol=new WeakMap,Fl=new WeakMap,Bl=new WeakMap,Ym=new WeakSet,I_=function(e,t){if(!c(this,Ue)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[c(this,Ue)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=c(this,Ue)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Cs,{signal:s}),t&&(e.addEventListener("focusin",i=>{c(this,Ue)._focusEventsAllowed=!1,ot(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{c(this,Ue)._focusEventsAllowed=!0,ot(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===c(this,$s)?this.edit():c(this,Ue).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(x(this,Il,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{c(this,Ue).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{c(this,Ue).toggleComment(!1,!1)},{signal:s}),e};var Ld,$l,Qm,Jm,Zm,eg,tg,Ci,Ul,Ti,Vl,ki,xw,vj,Aw,bj,Sw,wj;const tk=class tk{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){w(this,xw);w(this,Aw);w(this,Sw);w(this,Ld,void 0);w(this,$l,!1);w(this,Qm,null);w(this,Jm,void 0);w(this,Zm,void 0);w(this,eg,void 0);w(this,tg,void 0);w(this,Ci,null);w(this,Ul,void 0);w(this,Ti,null);w(this,Vl,void 0);w(this,ki,null);x(this,Ld,e),x(this,Qm,s),x(this,Jm,t),x(this,Zm,r),x(this,eg,i),x(this,tg,o),x(this,Vl,new AbortController),x(this,Ul,AbortSignal.any([a,c(this,Vl).signal])),e.addEventListener("touchstart",E(this,xw,vj).bind(this),{passive:!1,signal:c(this,Ul)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Er.pixelRatio}destroy(){var e,t;(e=c(this,Vl))==null||e.abort(),x(this,Vl,null),(t=c(this,Ci))==null||t.abort(),x(this,Ci,null)}};Ld=new WeakMap,$l=new WeakMap,Qm=new WeakMap,Jm=new WeakMap,Zm=new WeakMap,eg=new WeakMap,tg=new WeakMap,Ci=new WeakMap,Ul=new WeakMap,Ti=new WeakMap,Vl=new WeakMap,ki=new WeakMap,xw=new WeakSet,vj=function(e){var r,i,o;if((r=c(this,Jm))!=null&&r.call(this))return;if(e.touches.length===1){if(c(this,Ci))return;const a=x(this,Ci,new AbortController),l=AbortSignal.any([c(this,Ul),a.signal]),u=c(this,Ld),d={capture:!0,signal:l,passive:!1},h=f=>{var p;f.pointerType==="touch"&&((p=c(this,Ci))==null||p.abort(),x(this,Ci,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ot(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!c(this,ki)){x(this,ki,new AbortController);const a=AbortSignal.any([c(this,Ul),c(this,ki).signal]),l=c(this,Ld),u={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",E(this,Aw,bj).bind(this),u);const d=E(this,Sw,wj).bind(this);l.addEventListener("touchend",d,u),l.addEventListener("touchcancel",d,u),u.capture=!0,l.addEventListener("pointerdown",ot,u),l.addEventListener("pointermove",ot,u),l.addEventListener("pointercancel",ot,u),l.addEventListener("pointerup",ot,u),(i=c(this,Zm))==null||i.call(this)}if(ot(e),e.touches.length!==2||(o=c(this,Qm))!=null&&o.call(this)){x(this,Ti,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),x(this,Ti,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},Aw=new WeakSet,bj=function(e){var _;if(!c(this,Ti)||e.touches.length!==2)return;ot(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:a}=s,l=c(this,Ti),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=l,p=h-u,y=f-d,g=o-r,S=a-i,v=Math.hypot(g,S)||1,b=Math.hypot(p,y)||1;if(!c(this,$l)&&Math.abs(b-v)<=tk.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=i,l.touch1X=o,l.touch1Y=a,!c(this,$l)){x(this,$l,!0);return}const A=[(r+o)/2,(i+a)/2];(_=c(this,eg))==null||_.call(this,A,b,v)},Sw=new WeakSet,wj=function(e){var t;e.touches.length>=2||(c(this,ki)&&(c(this,ki).abort(),x(this,ki,null),(t=c(this,tg))==null||t.call(this)),c(this,Ti)&&(ot(e),x(this,Ti,null),x(this,$l,!1)))};let xm=tk;var zl,ar,Qe,Ie,Pi,Dd,Jo,ng,Qt,Hl,Ri,Ur,Zo,sg,Gl,ss,rg,Wl,Ni,Vr,Id,jd,Us,ql,ig,_w,og,j_,ag,O_,Od,L0,Ew,xj,Cw,Aj,lg,F_,Fd,D0,cg,B_,Tw,Sj,kw,_j,Pw,Ej,ug,$_,Rw,Cj,dg,U_,Nw,Tj,Mw,kj,Lw,Pj,hg,V_,Kl,mp;const le=class le{constructor(e){w(this,og);w(this,Od);w(this,Ew);w(this,Cw);w(this,lg);w(this,Fd);w(this,cg);w(this,Tw);w(this,kw);w(this,Pw);w(this,ug);w(this,Rw);w(this,dg);w(this,Nw);w(this,Mw);w(this,Lw);w(this,hg);w(this,Kl);w(this,zl,null);w(this,ar,null);w(this,Qe,null);w(this,Ie,null);w(this,Pi,null);w(this,Dd,!1);w(this,Jo,null);w(this,ng,"");w(this,Qt,null);w(this,Hl,null);w(this,Ri,null);w(this,Ur,null);w(this,Zo,null);w(this,sg,"");w(this,Gl,!1);w(this,ss,null);w(this,rg,!1);w(this,Wl,!1);w(this,Ni,!1);w(this,Vr,null);w(this,Id,0);w(this,jd,0);w(this,Us,null);w(this,ql,null);G(this,"isSelected",!1);G(this,"_isCopy",!1);G(this,"_editToolbar",null);G(this,"_initialOptions",Object.create(null));G(this,"_initialData",null);G(this,"_isVisible",!0);G(this,"_uiManager",null);G(this,"_focusEventsAllowed",!0);w(this,ig,!1);w(this,_w,le._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=le.prototype._resizeWithKeyboard,t=Za.TRANSLATE_SMALL,s=Za.TRANSLATE_BIG;return de(this,"_resizerKeyboardManager",new vv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],le.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return de(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new iW({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(le._l10n??(le._l10n=e),le._l10nResizer||(le._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),le._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);le._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,ig)}set _isDraggable(e){var t;x(this,ig,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,_w)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(E(this,Kl,mp).call(this),(t=c(this,Ur))==null||t.remove(),x(this,Ur,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Gl)?x(this,Gl,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){E(this,og,j_).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,ss)||x(this,ss,[this.x,this.y,this.width,this.height]),E(this,og,j_).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){c(this,ss)||x(this,ss,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,u]=this.getBaseTranslation();o+=l,a+=u;const{style:d}=s;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!c(this,ss)&&(c(this,ss)[0]!==this.x||c(this,ss)[1]!==this.y)}get _hasBeenResized(){return!!c(this,ss)&&(c(this,ss)[2]!==this.width||c(this,ss)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=le,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:l}=this;if(a*=s,l*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=gn(i,0,s-a),o=gn(o,0,r-l);break;case 90:i=gn(i,0,s-l),o=gn(o,a,r);break;case 180:i=gn(i,a,s),o=gn(o,l,r);break;case 270:i=gn(i,l,s),o=gn(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[u,d]=this.getBaseTranslation();i+=u,o+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return E(s=le,ag,O_).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return E(s=le,ag,O_).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=c(this,Qe))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||c(this,Wl))return this._editToolbar;this._editToolbar=new E_(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=c(this,Qe))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return c(this,Qe)||(Gb.initialize(le._l10n),x(this,Qe,new Gb(this)),c(this,zl)&&(c(this,Qe).data=c(this,zl),x(this,zl,null))),c(this,Qe)}get altTextData(){var e;return(e=c(this,Qe))==null?void 0:e.data}set altTextData(e){c(this,Qe)&&(c(this,Qe).data=e)}get guessedAltText(){var e;return(e=c(this,Qe))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Qe))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Qe))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Qe)&&!c(this,Qe).isEmpty()}hasAltTextData(){var e;return((e=c(this,Qe))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=c(this,Ie))==null||e.focusButton()}addCommentButton(){return c(this,Ie)||x(this,Ie,new e0(this))}addStandaloneCommentButton(){if(c(this,Pi)){this._uiManager.isEditingMode()&&c(this,Pi).classList.remove("hidden");return}this.hasComment&&(x(this,Pi,c(this,Ie).renderForStandalone()),this.div.append(c(this,Pi)))}removeStandaloneCommentButton(){c(this,Ie).removeStandaloneCommentButton(),x(this,Pi,null)}hideStandaloneCommentButton(){var e;(e=c(this,Pi))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=c(this,Ie);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){c(this,Ie)||x(this,Ie,new e0(this)),c(this,Ie).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(c(this,Ie)||x(this,Ie,new e0(this)),c(this,Ie).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=c(this,Ie))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=c(this,Ie))==null?void 0:e.isDeleted()}get hasComment(){return!!c(this,Ie)&&!c(this,Ie).isEmpty()&&!c(this,Ie).isDeleted()}async editComment(e){c(this,Ie)||x(this,Ie,new e0(this)),c(this,Ie).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){c(this,Ie).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,l=r-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){c(this,Ie).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=c(this,Dd)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),E(this,dg,U_).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),oj(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(c(this,ql)||x(this,ql,new xm({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:E(this,Tw,Sj).bind(this),onPinching:E(this,kw,_j).bind(this),onPinchEnd:E(this,Pw,Ej).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=qt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Gl,!0),this._isDraggable){E(this,Rw,Cj).call(this,e);return}E(this,ug,$_).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){c(this,Vr)&&clearTimeout(c(this,Vr)),x(this,Vr,setTimeout(()=>{var e;x(this,Vr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,l]=this.pageTranslation,u=e/r,d=t/r,h=this.x*i,f=this.y*o,p=this.width*i,y=this.height*o;switch(s){case 0:return[h+u+a,o-f-d-y+l,h+u+p+a,o-f-d+l];case 90:return[h+d+a,o-f+u+l,h+d+y+a,o-f+u+p+l];case 180:return[h-u-p+a,o-f+d+l,h-u+a,o-f+d+y+l];case 270:return[h-d-y+a,o-f-u-p+l,h-d+a,o-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,l=o-r;switch(this.rotation){case 0:return[s,t-o,a,l];case 90:return[s,t-r,l,a];case 180:return[i,t-r,a,l];case 270:return[i,t-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&le._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=c(this,Ie))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:o},uid:a,pageIndex:l,creationDate:u,modificationDate:d}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||d,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),x(this,Wl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),x(this,Wl,!1),!0):!1}isInEditMode(){return c(this,Wl)}shouldGetKeyboardEvents(){return c(this,Ni)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){E(this,dg,U_).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,x(r,zl,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,l,u,d]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=l/o,r.width=u/i,r.height=d/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=c(this,Zo))==null||e.abort(),x(this,Zo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Vr)&&(clearTimeout(c(this,Vr)),x(this,Vr,null)),E(this,Kl,mp).call(this),this.removeEditToolbar(),c(this,Us)){for(const s of c(this,Us).values())clearTimeout(s);x(this,Us,null)}this.parent=null,(t=c(this,ql))==null||t.destroy(),x(this,ql,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(E(this,Ew,xj).call(this),c(this,Qt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,o]=this.getPDFRect();return[le._round(s+(i-s)*e),le._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return c(this,Ie).commentPopupPositionInLayer}set commentPopupPosition(e){c(this,Ie).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return c(this,Ie).hasDefaultPopupPosition()}get commentButtonWidth(){return c(this,Ie).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){c(this,Ie).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Ri,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Qt).children;if(!c(this,ar)){x(this,ar,Array.from(t));const o=E(this,Nw,Tj).bind(this),a=E(this,Mw,kj).bind(this),l=this._uiManager._signal;for(const u of c(this,ar)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",E(this,Lw,Pj).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",le._l10nResizer[d])}}const s=c(this,ar)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(c(this,ar).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)c(this,Qt).append(c(this,Qt).firstChild);else if(i>r)for(let a=0;a<i-r;a++)c(this,Qt).firstChild.before(c(this,Qt).lastChild);let o=0;for(const a of t){const u=c(this,ar)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",le._l10nResizer[u])}}E(this,hg,V_).call(this,0),x(this,Ni,!0),c(this,Qt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Ni)&&E(this,cg,B_).call(this,c(this,sg),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){E(this,Kl,mp).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=c(this,Qe))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=c(this,Qt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=c(this,Qe))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return c(this,rg)}set isEditing(e){x(this,rg,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,Us)||x(this,Us,new Map);const{action:s}=e;let r=c(this,Us).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,Us).delete(s),c(this,Us).size===0&&x(this,Us,null)},le._telemetryTimeout),c(this,Us).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,Dd,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Dd,!0)}updateFakeAnnotationElement(e){if(!c(this,Ur)&&!this.deleted){x(this,Ur,e.addFakeAnnotation(this));return}if(this.deleted){c(this,Ur).remove(),x(this,Ur,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&c(this,Ur).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};zl=new WeakMap,ar=new WeakMap,Qe=new WeakMap,Ie=new WeakMap,Pi=new WeakMap,Dd=new WeakMap,Jo=new WeakMap,ng=new WeakMap,Qt=new WeakMap,Hl=new WeakMap,Ri=new WeakMap,Ur=new WeakMap,Zo=new WeakMap,sg=new WeakMap,Gl=new WeakMap,ss=new WeakMap,rg=new WeakMap,Wl=new WeakMap,Ni=new WeakMap,Vr=new WeakMap,Id=new WeakMap,jd=new WeakMap,Us=new WeakMap,ql=new WeakMap,ig=new WeakMap,_w=new WeakMap,og=new WeakSet,j_=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ag=new WeakSet,O_=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Od=new WeakSet,L0=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},Ew=new WeakSet,xj=function(){if(c(this,Qt))return;x(this,Qt,document.createElement("div")),c(this,Qt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");c(this,Qt).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",E(this,Cw,Aj).bind(this,s),{signal:t}),r.addEventListener("contextmenu",Cs,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Qt))},Cw=new WeakSet,Aj=function(e,t){var d;t.preventDefault();const{isMac:s}=qt.platform;if(t.button!==0||t.ctrlKey&&s)return;(d=c(this,Qe))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,x(this,Hl,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",E(this,cg,B_).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ot,{passive:!1,signal:o}),window.addEventListener("contextmenu",Cs,{signal:o}),x(this,Ri,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=c(this,Qe))==null||h.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=l,E(this,Fd,D0).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},lg=new WeakSet,F_=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Fd=new WeakSet,D0=function(){if(!c(this,Ri))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=c(this,Ri);x(this,Ri,null);const i=this.x,o=this.y,a=this.width,l=this.height;i===e&&o===t&&a===s&&l===r||this.addCommands({cmd:E(this,lg,F_).bind(this,i,o,a,l),undo:E(this,lg,F_).bind(this,e,t,s,r),mustExec:!0})},cg=new WeakSet,B_=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,l=this.height,u=le.MIN_SIZE/s,d=le.MIN_SIZE/r,h=E(this,Od,L0).call(this,this.rotation),f=(M,B)=>[h[0]*M+h[2]*B,h[1]*M+h[3]*B],p=E(this,Od,L0).call(this,360-this.rotation),y=(M,B)=>[p[0]*M+p[2]*B,p[1]*M+p[3]*B];let g,S,v=!1,b=!1;switch(e){case"topLeft":v=!0,g=(M,B)=>[0,0],S=(M,B)=>[M,B];break;case"topMiddle":g=(M,B)=>[M/2,0],S=(M,B)=>[M/2,B];break;case"topRight":v=!0,g=(M,B)=>[M,0],S=(M,B)=>[0,B];break;case"middleRight":b=!0,g=(M,B)=>[M,B/2],S=(M,B)=>[0,B/2];break;case"bottomRight":v=!0,g=(M,B)=>[M,B],S=(M,B)=>[0,0];break;case"bottomMiddle":g=(M,B)=>[M/2,B],S=(M,B)=>[M/2,0];break;case"bottomLeft":v=!0,g=(M,B)=>[0,B],S=(M,B)=>[M,0];break;case"middleLeft":b=!0,g=(M,B)=>[0,B/2],S=(M,B)=>[M,B/2];break}const A=g(a,l),_=S(a,l);let T=f(..._);const k=le._round(i+T[0]),P=le._round(o+T[1]);let R=1,L=1,I,O;if(t.fromKeyboard)({deltaX:I,deltaY:O}=t);else{const{screenX:M,screenY:B}=t,[F,$]=c(this,Hl);[I,O]=this.screenToPageTranslation(M-F,B-$),c(this,Hl)[0]=M,c(this,Hl)[1]=B}if([I,O]=y(I/s,O/r),v){const M=Math.hypot(a,l);R=L=Math.max(Math.min(Math.hypot(_[0]-A[0]-I,_[1]-A[1]-O)/M,1/a,1/l),u/a,d/l)}else b?R=gn(Math.abs(_[0]-A[0]-I),u,1)/a:L=gn(Math.abs(_[1]-A[1]-O),d,1)/l;const D=le._round(a*R),V=le._round(l*L);T=f(...S(D,V));const j=k-T[0],N=P-T[1];c(this,ss)||x(this,ss,[this.x,this.y,this.width,this.height]),this.width=D,this.height=V,this.x=j,this.y=N,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Tw=new WeakSet,Sj=function(){var e;x(this,Ri,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=c(this,Qe))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},kw=new WeakSet,_j=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=E(this,Od,L0).call(this,this.rotation),a=(k,P)=>[o[0]*k+o[2]*P,o[1]*k+o[3]*P],[l,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,p=this.height,y=le.MIN_SIZE/l,g=le.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/p),y/f,g/p);const S=le._round(f*i),v=le._round(p*i);if(S===f&&v===p)return;c(this,ss)||x(this,ss,[d,h,f,p]);const b=a(f/2,p/2),A=le._round(d+b[0]),_=le._round(h+b[1]),T=a(S/2,v/2);this.x=A-T[0],this.y=_-T[1],this.width=S,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Pw=new WeakSet,Ej=function(){var e;(e=c(this,Qe))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),E(this,Fd,D0).call(this)},ug=new WeakSet,$_=function(e){const{isMac:t}=qt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Rw=new WeakSet,Cj=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=u=>{r.abort(),x(this,Jo,null),x(this,Gl,!1),this._uiManager.endDragSession()||E(this,ug,$_).call(this,u),s&&this._onStopDragging()};t&&(x(this,Id,e.clientX),x(this,jd,e.clientY),x(this,Jo,e.pointerId),x(this,ng,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==c(this,Jo)){ot(u);return}const[p,y]=this.screenToPageTranslation(d-c(this,Id),h-c(this,jd));x(this,Id,d),x(this,jd,h),this._uiManager.dragSelectedEditors(p,y)},o),window.addEventListener("touchmove",ot,o),window.addEventListener("pointerdown",u=>{u.pointerType===c(this,ng)&&(c(this,ql)||u.isPrimary)&&a(u),ot(u)},o));const l=u=>{if(!c(this,Jo)||c(this,Jo)===u.pointerId){a(u);return}ot(u)};window.addEventListener("pointerup",l,{signal:i}),window.addEventListener("blur",l,{signal:i})},dg=new WeakSet,U_=function(){if(c(this,Zo)||!this.div)return;x(this,Zo,new AbortController);const e=this._uiManager.combinedSignal(c(this,Zo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Nw=new WeakSet,Tj=function(e){le._resizerKeyboardManager.exec(this,e)},Mw=new WeakSet,kj=function(e){var t;c(this,Ni)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Qt)&&E(this,Kl,mp).call(this)},Lw=new WeakSet,Pj=function(e){x(this,sg,c(this,Ni)?e:"")},hg=new WeakSet,V_=function(e){if(c(this,ar))for(const t of c(this,ar))t.tabIndex=e},Kl=new WeakSet,mp=function(){x(this,Ni,!1),E(this,hg,V_).call(this,-1),E(this,Fd,D0).call(this)},w(le,ag),G(le,"_l10n",null),G(le,"_l10nResizer",null),G(le,"_borderLineWidth",-1),G(le,"_colorManager",new k_),G(le,"_zIndex",1),G(le,"_telemetryTimeout",1e3);let ze=le;class iW extends ze{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const r2=3285377520,Ns=4294901760,Pr=65535;class Rj{constructor(e){this.h1=e?e&4294967295:r2,this.h2=e?e&4294967295:r2}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,S=e.length;g<S;g++){const v=e.charCodeAt(g);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,l=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,p=h&Pr,y=f&Pr;for(let g=0;g<r;g++)g&1?(a=o[g],a=a*h&Ns|a*p&Pr,a=a<<15|a>>>17,a=a*f&Ns|a*y&Pr,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=o[g],l=l*h&Ns|l*p&Pr,l=l<<15|l>>>17,l=l*f&Ns|l*y&Pr,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*h&Ns|a*p&Pr,a=a<<15|a>>>17,a=a*f&Ns|a*y&Pr,r&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ns|e*36045&Pr,t=t*4283543511&Ns|((t<<16|e>>>16)*2950163797&Ns)>>>16,e^=t>>>1,e=e*444984403&Ns|e*60499&Pr,t=t*3301882366&Ns|((t<<16|e>>>16)*3120437893&Ns)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const z_=Object.freeze({map:null,hash:"",transfer:void 0});var Xl,Yl,Mi,Jt,Dw,Nj;class OT{constructor(){w(this,Dw);w(this,Xl,!1);w(this,Yl,null);w(this,Mi,null);w(this,Jt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=c(this,Jt).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return c(this,Jt).get(e)}remove(e){const t=c(this,Jt).get(e);if(t!==void 0&&(t instanceof ze&&c(this,Mi).delete(t.annotationElementId),c(this,Jt).delete(e),c(this,Jt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of c(this,Jt).values())if(s instanceof ze)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=c(this,Jt).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,c(this,Jt).set(e,t);r&&E(this,Dw,Nj).call(this),t instanceof ze&&((c(this,Mi)||x(this,Mi,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return c(this,Jt).has(e)}get size(){return c(this,Jt).size}resetModified(){c(this,Xl)&&(x(this,Xl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Mj(this)}get serializable(){if(c(this,Jt).size===0)return z_;const e=new Map,t=new Rj,s=[],r=Object.create(null);let i=!1;for(const[o,a]of c(this,Jt)){const l=a instanceof ze?a.serialize(!1,r):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),i||(i=!!l.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:z_}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of c(this,Jt).values()){if(!(i instanceof ze)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=l.get(u);h||(h=new Map,l.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){x(this,Yl,null)}updateEditor(e,t){var r;const s=(r=c(this,Mi))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=c(this,Mi))==null?void 0:t.get(e))||null}get modifiedIds(){if(c(this,Yl))return c(this,Yl);const e=[];if(c(this,Mi))for(const t of c(this,Mi).values())t.serialize()&&e.push(t.annotationElementId);return x(this,Yl,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return c(this,Jt).entries()}}Xl=new WeakMap,Yl=new WeakMap,Mi=new WeakMap,Jt=new WeakMap,Dw=new WeakSet,Nj=function(){c(this,Xl)||(x(this,Xl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var fg;class Mj extends OT{constructor(t){super();w(this,fg,void 0);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);x(this,fg,{map:o,hash:r,transfer:i})}get print(){Fe("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,fg)}get modifiedIds(){return de(this,"modifiedIds",{ids:new Set,hash:""})}}fg=new WeakMap;var Bd;class oW{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){w(this,Bd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Bd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||c(this,Bd).has(e.loadedName))){if(be(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),c(this,Bd).add(r),s==null||s(e)}catch{ae(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw ae(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return de(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return de(this,"isSyncFontLoadingSupported",kn||qt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(be(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return de(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(_,T){return _.charCodeAt(T)<<24|_.charCodeAt(T+1)<<16|_.charCodeAt(T+2)<<8|_.charCodeAt(T+3)&255}function r(_,T,k,P){const R=_.substring(0,T),L=_.substring(T+k);return R+P+L}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function d(_,T){if(++u>30){ae("Load test font never loaded."),T();return}if(l.font="30px "+_,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,_,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,h.length,h);const y=16,g=1482184792;let S=s(f,y);for(i=0,o=h.length-3;i<o;i+=4)S=S-g+s(h,i)|0;i<h.length&&(S=S-g+s(h+"XXX",i)|0),f=r(f,y,4,qG(S));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(b);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const _ of[e.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=_,A.append(T)}this._document.body.append(A),d(h,()=>{A.remove(),t.complete()})}}Bd=new WeakMap;var Ne;class aW{constructor(e,t=null,s,r){w(this,Ne,void 0);this.compiledGlyphs=Object.create(null),x(this,Ne,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${KI(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){ae(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return c(this,Ne).black}get bold(){return c(this,Ne).bold}get disableFontFace(){return c(this,Ne).disableFontFace??!1}get fontExtraProperties(){return c(this,Ne).fontExtraProperties??!1}get isInvalidPDFjsFont(){return c(this,Ne).isInvalidPDFjsFont}get isType3Font(){return c(this,Ne).isType3Font}get italic(){return c(this,Ne).italic}get missingFile(){return c(this,Ne).missingFile}get remeasure(){return c(this,Ne).remeasure}get vertical(){return c(this,Ne).vertical}get ascent(){return c(this,Ne).ascent}get defaultWidth(){return c(this,Ne).defaultWidth}get descent(){return c(this,Ne).descent}get bbox(){return c(this,Ne).bbox}get fontMatrix(){return c(this,Ne).fontMatrix}get fallbackName(){return c(this,Ne).fallbackName}get loadedName(){return c(this,Ne).loadedName}get mimetype(){return c(this,Ne).mimetype}get name(){return c(this,Ne).name}get data(){return c(this,Ne).data}clearData(){c(this,Ne).clearData()}get cssFontInfo(){return c(this,Ne).cssFontInfo}get systemFontInfo(){return c(this,Ne).systemFontInfo}get defaultVMetrics(){return c(this,Ne).defaultVMetrics}}Ne=new WeakMap;function lW(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(kn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function cW(n){if(kn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return mv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function t0(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const H_=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,uW=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Lj=QG.bind(null,H_,uW);var Li,Iw;class dW{constructor(){w(this,Li,new Map);w(this,Iw,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};c(this,Iw).then(()=>{for(const[r]of c(this,Li))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){ae("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}c(this,Li).set(t,r)}removeEventListener(e,t){const s=c(this,Li).get(t);s==null||s(),c(this,Li).delete(t)}terminate(){for(const[,e]of c(this,Li))e==null||e();c(this,Li).clear()}}Li=new WeakMap,Iw=new WeakMap;const n0={DATA:1,ERROR:2},St={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function i2(){}function On(n){if(n instanceof bo||n instanceof zb||n instanceof QR||n instanceof vm||n instanceof jA)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new bo(n.message);case"InvalidPDFException":return new zb(n.message);case"PasswordException":return new QR(n.message,n.code);case"ResponseException":return new vm(n.message,n.status,n.missing);case"UnknownErrorException":return new jA(n.message,n.details)}return new jA(n.message,n.toString())}var $d,jw,Dj,Ow,Ij,Fw,jj,Ud,I0;class gp{constructor(e,t,s){w(this,jw);w(this,Ow);w(this,Fw);w(this,Ud);w(this,$d,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",E(this,jw,Dj).bind(this),{signal:c(this,$d).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,l.postMessage({sourceName:o,targetName:a,stream:St.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{be(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:St.CANCEL,streamId:i,reason:On(u)}),d.promise}},s)}destroy(){var e;(e=c(this,$d))==null||e.abort(),x(this,$d,null)}}$d=new WeakMap,jw=new WeakSet,Dj=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){E(this,Fw,jj).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===n0.DATA)r.resolve(e.data);else if(e.callback===n0.ERROR)r.reject(On(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:n0.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:n0.ERROR,callbackId:e.callbackId,reason:On(o)})});return}if(e.streamId){E(this,Ow,Ij).call(this,e);return}t(e.data)},Ow=new WeakSet,Ij=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:St.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:St.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){be(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:St.ERROR,streamId:t,reason:On(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:St.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:St.START_COMPLETE,streamId:t,reason:On(u)})})},Fw=new WeakSet,jj=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case St.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(On(e.reason));break;case St.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(On(e.reason));break;case St.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:St.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||i2).then(function(){i.postMessage({sourceName:s,targetName:r,stream:St.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:St.PULL_COMPLETE,streamId:t,reason:On(u)})});break;case St.ENQUEUE:if(be(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case St.CLOSE:if(be(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),E(this,Ud,I0).call(this,o,t);break;case St.ERROR:be(o,"error should have stream controller"),o.controller.error(On(e.reason)),E(this,Ud,I0).call(this,o,t);break;case St.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(On(e.reason)),E(this,Ud,I0).call(this,o,t);break;case St.CANCEL:if(!a)break;const l=On(e.reason);Promise.try(a.onCancel||i2,l).then(function(){i.postMessage({sourceName:s,targetName:r,stream:St.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:St.CANCEL_COMPLETE,streamId:t,reason:On(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Ud=new WeakSet,I0=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var pg;class Oj{constructor({enableHWA:e=!1}){w(this,pg,!1);x(this,pg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!c(this,pg)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Fe("Abstract method `_createCanvas` called.")}}pg=new WeakMap;class hW extends Oj{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class Fj{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class o2 extends Fj{async _fetch(e){const t=await Lf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):mv(t)}}class Bj{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var Ql,Vd,Di,Ii,dn,Jl,Zl,Ot,ln,ec,yp,ea,Nu,zd,j0,ta,Mu,Bw,$j,mg,G_,na,Lu,tc,vp,nc,bp,gg,W_,sc,wp;class fW extends Bj{constructor({docId:t,ownerDocument:s=globalThis.document}){super();w(this,Ot);w(this,ec);w(this,ea);w(this,zd);w(this,ta);w(this,Bw);w(this,mg);w(this,na);w(this,tc);w(this,nc);w(this,gg);w(this,sc);w(this,Ql,void 0);w(this,Vd,void 0);w(this,Di,void 0);w(this,Ii,void 0);w(this,dn,void 0);w(this,Jl,void 0);w(this,Zl,0);x(this,Ii,t),x(this,dn,s)}addFilter(t){if(!t)return"none";let s=c(this,Ot,ln).get(t);if(s)return s;const[r,i,o]=E(this,zd,j0).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=c(this,Ot,ln).get(a),s)return c(this,Ot,ln).set(t,s),s;const l=`g_${c(this,Ii)}_transfer_map_${kt(this,Zl)._++}`,u=E(this,ta,Mu).call(this,l);c(this,Ot,ln).set(t,u),c(this,Ot,ln).set(a,u);const d=E(this,na,Lu).call(this,l);return E(this,nc,bp).call(this,r,i,o,d),u}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let o=c(this,ec,yp).get(i);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},c(this,ec,yp).set(i,o)),!t||!s))return o.url;const a=E(this,sc,wp).call(this,t);t=Q.makeHexColor(...a);const l=E(this,sc,wp).call(this,s);if(s=Q.makeHexColor(...l),c(this,ea,Nu).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const S=g/255;u[g]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const d=u.join(","),h=`g_${c(this,Ii)}_hcm_filter`,f=o.filter=E(this,na,Lu).call(this,h);E(this,nc,bp).call(this,d,d,d,f),E(this,mg,G_).call(this,f);const p=(g,S)=>{const v=a[g]/255,b=l[g]/255,A=new Array(S+1);for(let _=0;_<=S;_++)A[_]=v+_/S*(b-v);return A.join(",")};return E(this,nc,bp).call(this,p(0,5),p(1,5),p(2,5),f),o.url=E(this,ta,Mu).call(this,h),o.url}addAlphaFilter(t){let s=c(this,Ot,ln).get(t);if(s)return s;const[r]=E(this,zd,j0).call(this,[t]),i=`alpha_${r}`;if(s=c(this,Ot,ln).get(i),s)return c(this,Ot,ln).set(t,s),s;const o=`g_${c(this,Ii)}_alpha_map_${kt(this,Zl)._++}`,a=E(this,ta,Mu).call(this,o);c(this,Ot,ln).set(t,a),c(this,Ot,ln).set(i,a);const l=E(this,na,Lu).call(this,o);return E(this,gg,W_).call(this,r,l),a}addLuminosityFilter(t){let s=c(this,Ot,ln).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=E(this,zd,j0).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=c(this,Ot,ln).get(i),s)return c(this,Ot,ln).set(t,s),s;const o=`g_${c(this,Ii)}_luminosity_map_${kt(this,Zl)._++}`,a=E(this,ta,Mu).call(this,o);c(this,Ot,ln).set(t,a),c(this,Ot,ln).set(i,a);const l=E(this,na,Lu).call(this,o);return E(this,Bw,$j).call(this,l),t&&E(this,gg,W_).call(this,r,l),a}addHighlightHCMFilter(t,s,r,i,o){var b;const a=`${s}-${r}-${i}-${o}`;let l=c(this,ec,yp).get(t);if((l==null?void 0:l.key)===a||(l?((b=l.filter)==null||b.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},c(this,ec,yp).set(t,l)),!s||!r))return l.url;const[u,d]=[s,r].map(E(this,sc,wp).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,y]=[i,o].map(E(this,sc,wp).bind(this));f<h&&([h,f,p,y]=[f,h,y,p]),c(this,ea,Nu).style.color="";const g=(A,_,T)=>{const k=new Array(256),P=(f-h)/T,R=A/255,L=(_-A)/(255*T);let I=0;for(let O=0;O<=T;O++){const D=Math.round(h+O*P),V=R+O*L;for(let j=I;j<=D;j++)k[j]=V;I=D+1}for(let O=I;O<256;O++)k[O]=k[I-1];return k.join(",")},S=`g_${c(this,Ii)}_hcm_${t}_filter`,v=l.filter=E(this,na,Lu).call(this,S);return E(this,mg,G_).call(this,v),E(this,nc,bp).call(this,g(p[0],y[0],5),g(p[1],y[1],5),g(p[2],y[2],5),v),l.url=E(this,ta,Mu).call(this,S),l.url}destroy(t=!1){var s,r,i,o;t&&((s=c(this,Jl))!=null&&s.size)||((r=c(this,Di))==null||r.parentNode.parentNode.remove(),x(this,Di,null),(i=c(this,Vd))==null||i.clear(),x(this,Vd,null),(o=c(this,Jl))==null||o.clear(),x(this,Jl,null),x(this,Zl,0))}}Ql=new WeakMap,Vd=new WeakMap,Di=new WeakMap,Ii=new WeakMap,dn=new WeakMap,Jl=new WeakMap,Zl=new WeakMap,Ot=new WeakSet,ln=function(){return c(this,Vd)||x(this,Vd,new Map)},ec=new WeakSet,yp=function(){return c(this,Jl)||x(this,Jl,new Map)},ea=new WeakSet,Nu=function(){if(!c(this,Di)){const t=c(this,dn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=c(this,dn).createElementNS(pi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),x(this,Di,c(this,dn).createElementNS(pi,"defs")),t.append(r),r.append(c(this,Di)),c(this,dn).body.append(t)}return c(this,Di)},zd=new WeakSet,j0=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[s,r,i]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=r[u]/255,l[u]=i[u]/255;return[o.join(","),a.join(","),l.join(",")]},ta=new WeakSet,Mu=function(t){if(c(this,Ql)===void 0){x(this,Ql,"");const s=c(this,dn).URL;s!==c(this,dn).baseURI&&(yv(s)?ae('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Ql,MT(s,"")))}return`url(${c(this,Ql)}#${t})`},Bw=new WeakSet,$j=function(t){const s=c(this,dn).createElementNS(pi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},mg=new WeakSet,G_=function(t){const s=c(this,dn).createElementNS(pi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},na=new WeakSet,Lu=function(t){const s=c(this,dn).createElementNS(pi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),c(this,ea,Nu).append(s),s},tc=new WeakSet,vp=function(t,s,r){const i=c(this,dn).createElementNS(pi,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},nc=new WeakSet,bp=function(t,s,r,i){const o=c(this,dn).createElementNS(pi,"feComponentTransfer");i.append(o),E(this,tc,vp).call(this,o,"feFuncR",t),E(this,tc,vp).call(this,o,"feFuncG",s),E(this,tc,vp).call(this,o,"feFuncB",r)},gg=new WeakSet,W_=function(t,s){const r=c(this,dn).createElementNS(pi,"feComponentTransfer");s.append(r),E(this,tc,vp).call(this,r,"feFuncA",t)},sc=new WeakSet,wp=function(t){return c(this,ea,Nu).style.color=t,Df(getComputedStyle(c(this,ea,Nu)).getPropertyValue("color"))};class Uj{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class a2 extends Uj{async _fetch(e){const t=await Lf(e,"arraybuffer");return new Uint8Array(t)}}class Vj{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Fe("Abstract method `_fetch` called.")}}class l2 extends Vj{async _fetch(e){const t=await Lf(e,"arraybuffer");return new Uint8Array(t)}}kn&&ae("Please use the `legacy` build in Node.js environments.");async function FT(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class pW extends Bj{}class mW extends Oj{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class gW extends Fj{async _fetch(e){return FT(e)}}class yW extends Uj{async _fetch(e){return FT(e)}}class vW extends Vj{async _fetch(e){return FT(e)}}const Tu="__forcedDependency",{floor:c2,ceil:u2}=Math;function s0(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const q_=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Hd,sa;class bW{constructor(e,t){w(this,Hd,void 0);w(this,sa,void 0);x(this,Hd,e),x(this,sa,t)}get length(){return c(this,Hd).length}isEmpty(e){return c(this,Hd)[e]===q_}minX(e){return c(this,sa)[e*4+0]/256}minY(e){return c(this,sa)[e*4+1]/256}maxX(e){return(c(this,sa)[e*4+2]+1)/256}maxY(e){return(c(this,sa)[e*4+3]+1)/256}}Hd=new WeakMap,sa=new WeakMap;const r0=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var $n,Un,rc,lr,ic,ji,Pe,Me,Oi,Vn,yg,Gd,oc,ac,Fi,hn,zr,vg,K_;class wW{constructor(e,t,s=!1){w(this,vg);w(this,$n,{__proto__:null});w(this,Un,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Tu]:[]});w(this,rc,new Map);w(this,lr,[]);w(this,ic,[]);w(this,ji,[[1,0,0,1,0,0]]);w(this,Pe,[-1/0,-1/0,1/0,1/0]);w(this,Me,new Float64Array([1/0,1/0,-1/0,-1/0]));w(this,Oi,-1);w(this,Vn,new Set);w(this,yg,new Map);w(this,Gd,new Map);w(this,oc,void 0);w(this,ac,void 0);w(this,Fi,void 0);w(this,hn,void 0);w(this,zr,void 0);x(this,oc,e.width),x(this,ac,e.height),E(this,vg,K_).call(this,t),s&&x(this,zr,new Map)}growOperationsCount(e){e>=c(this,hn).length&&E(this,vg,K_).call(this,e,c(this,hn))}save(e){return x(this,$n,{__proto__:c(this,$n)}),x(this,Un,{__proto__:c(this,Un),transform:{__proto__:c(this,Un).transform},moveText:{__proto__:c(this,Un).moveText},sameLineText:{__proto__:c(this,Un).sameLineText},[Tu]:{__proto__:c(this,Un)[Tu]}}),x(this,Pe,{__proto__:c(this,Pe)}),c(this,lr).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(c(this,$n));if(t===null)return this;x(this,$n,t),x(this,Un,Object.getPrototypeOf(c(this,Un))),x(this,Pe,Object.getPrototypeOf(c(this,Pe)));const s=c(this,lr).pop();return s!==void 0&&((r=r0(c(this,zr),e))==null||r.dependencies.add(s),c(this,hn)[e]=c(this,hn)[s]),this}recordOpenMarker(e){return c(this,lr).push(e),this}getOpenMarker(){return c(this,lr).length===0?null:c(this,lr).at(-1)}recordCloseMarker(e){var s;const t=c(this,lr).pop();return t!==void 0&&((s=r0(c(this,zr),e))==null||s.dependencies.add(t),c(this,hn)[e]=c(this,hn)[t]),this}beginMarkedContent(e){return c(this,ic).push(e),this}endMarkedContent(e){var s;const t=c(this,ic).pop();return t!==void 0&&((s=r0(c(this,zr),e))==null||s.dependencies.add(t),c(this,hn)[e]=c(this,hn)[t]),this}pushBaseTransform(e){return c(this,ji).push(Q.multiplyByDOMMatrix(c(this,ji).at(-1),e.getTransform())),this}popBaseTransform(){return c(this,ji).length>1&&c(this,ji).pop(),this}recordSimpleData(e,t){return c(this,$n)[e]=t,this}recordIncrementalData(e,t){return c(this,Un)[e].push(t),this}resetIncrementalData(e,t){return c(this,Un)[e].length=0,this}recordNamedData(e,t){return c(this,rc).set(e,t),this}recordSimpleDataFromNamed(e,t,s){c(this,$n)[e]=c(this,rc).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Tu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in c(this,$n)&&this.recordFutureForcedDependency(t,c(this,$n)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of c(this,Vn))this.recordFutureForcedDependency(Tu,e);return this}resetBBox(e){return c(this,Oi)!==e&&(x(this,Oi,e),c(this,Me)[0]=1/0,c(this,Me)[1]=1/0,c(this,Me)[2]=-1/0,c(this,Me)[3]=-1/0),this}recordClipBox(e,t,s,r,i,o){const a=Q.multiplyByDOMMatrix(c(this,ji).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];Q.axialAlignedBoundingBox([s,i,r,o],a,l);const u=Q.intersect(c(this,Pe),l);return u?(c(this,Pe)[0]=u[0],c(this,Pe)[1]=u[1],c(this,Pe)[2]=u[2],c(this,Pe)[3]=u[3]):(c(this,Pe)[0]=c(this,Pe)[1]=1/0,c(this,Pe)[2]=c(this,Pe)[3]=-1/0),this}recordBBox(e,t,s,r,i,o){const a=c(this,Pe);if(a[0]===1/0)return this;const l=Q.multiplyByDOMMatrix(c(this,ji).at(-1),t.getTransform());if(a[0]===-1/0)return Q.axialAlignedBoundingBox([s,i,r,o],l,c(this,Me)),this;const u=[1/0,1/0,-1/0,-1/0];return Q.axialAlignedBoundingBox([s,i,r,o],l,u),c(this,Me)[0]=Math.min(c(this,Me)[0],Math.max(u[0],a[0])),c(this,Me)[1]=Math.min(c(this,Me)[1],Math.max(u[1],a[1])),c(this,Me)[2]=Math.max(c(this,Me)[2],Math.min(u[2],a[2])),c(this,Me)[3]=Math.max(c(this,Me)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,o=0,a){const l=s.bbox;let u,d;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&c(this,Gd).get(s),u!==!1&&(d=[0,0,0,0],Q.axialAlignedBoundingBox(l,s.fontMatrix,d),(r!==1||i!==0||o!==0)&&Q.scaleMinMax([r,0,0,-r,i,o],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return l&&d&&u===void 0&&(u=d[0]<=i-h.actualBoundingBoxLeft&&d[2]>=i+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,c(this,Gd).set(s,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-h.actualBoundingBoxLeft,i+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return c(this,Me)[0]=Math.max(0,c(this,Pe)[0]),c(this,Me)[1]=Math.max(0,c(this,Pe)[1]),c(this,Me)[2]=Math.min(c(this,oc),c(this,Pe)[2]),c(this,Me)[3]=Math.min(c(this,ac),c(this,Pe)[3]),this}getSimpleIndex(e){return c(this,$n)[e]}recordDependencies(e,t){const s=c(this,Vn),r=c(this,$n),i=c(this,Un);for(const o of t)o in c(this,$n)?s.add(r[o]):o in i&&i[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return c(this,rc).has(t)&&c(this,Vn).add(c(this,rc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Tu]),c(this,zr)){const s=r0(c(this,zr),e),{dependencies:r}=s;c(this,Vn).forEach(r.add,r),c(this,lr).forEach(r.add,r),c(this,ic).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(c(this,Oi)===e){const s=c2(c(this,Me)[0]*256/c(this,oc)),r=c2(c(this,Me)[1]*256/c(this,ac)),i=u2(c(this,Me)[2]*256/c(this,oc)),o=u2(c(this,Me)[3]*256/c(this,ac));s0(c(this,Fi),e,s,r,i,o);for(const a of c(this,Vn))a!==e&&s0(c(this,Fi),a,s,r,i,o);for(const a of c(this,lr))a!==e&&s0(c(this,Fi),a,s,r,i,o);for(const a of c(this,ic))a!==e&&s0(c(this,Fi),a,s,r,i,o);t||(c(this,Vn).clear(),x(this,Oi,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(c(this,Vn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return c(this,Oi)===e&&(x(this,Oi,-1),c(this,Pe)[0]=Math.max(c(this,Pe)[0],c(this,Me)[0]),c(this,Pe)[1]=Math.max(c(this,Pe)[1],c(this,Me)[1]),c(this,Pe)[2]=Math.min(c(this,Pe)[2],c(this,Me)[2]),c(this,Pe)[3]=Math.min(c(this,Pe)[3],c(this,Me)[3]),t||c(this,Vn).clear()),this}_takePendingDependencies(){const e=c(this,Vn);return x(this,Vn,new Set),e}_extractOperation(e){const t=c(this,yg).get(e);return c(this,yg).delete(e),t}_pushPendingDependencies(e){for(const t of e)c(this,Vn).add(t)}take(){return c(this,Gd).clear(),new bW(c(this,hn),c(this,Fi))}takeDebugMetadata(){return c(this,zr)}}$n=new WeakMap,Un=new WeakMap,rc=new WeakMap,lr=new WeakMap,ic=new WeakMap,ji=new WeakMap,Pe=new WeakMap,Me=new WeakMap,Oi=new WeakMap,Vn=new WeakMap,yg=new WeakMap,Gd=new WeakMap,oc=new WeakMap,ac=new WeakMap,Fi=new WeakMap,hn=new WeakMap,zr=new WeakMap,vg=new WeakSet,K_=function(e,t){const s=new ArrayBuffer(e*4);x(this,Fi,new Uint8ClampedArray(s)),x(this,hn,new Uint32Array(s)),t&&t.length>0?(c(this,hn).set(t),c(this,hn).fill(q_,t.length)):c(this,hn).fill(q_)};var je,ft,cr,Wd,qd;const nk=class nk{constructor(e,t,s){w(this,je,void 0);w(this,ft,void 0);w(this,cr,void 0);w(this,Wd,0);w(this,qd,0);if(e instanceof nk&&c(e,cr)===!!s)return e;x(this,je,e),x(this,ft,t),x(this,cr,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return kt(this,qd)._++,c(this,je).save(c(this,ft)),this}restore(e){return c(this,qd)>0&&(c(this,je).restore(c(this,ft)),kt(this,qd)._--),this}recordOpenMarker(e){return kt(this,Wd)._++,this}getOpenMarker(){return c(this,Wd)>0?c(this,ft):c(this,je).getOpenMarker()}recordCloseMarker(e){return kt(this,Wd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return c(this,je).pushBaseTransform(e),this}popBaseTransform(){return c(this,je).popBaseTransform(),this}recordSimpleData(e,t){return c(this,je).recordSimpleData(e,c(this,ft)),this}recordIncrementalData(e,t){return c(this,je).recordIncrementalData(e,c(this,ft)),this}resetIncrementalData(e,t){return c(this,je).resetIncrementalData(e,c(this,ft)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return c(this,je).recordSimpleDataFromNamed(e,t,c(this,ft)),this}recordFutureForcedDependency(e,t){return c(this,je).recordFutureForcedDependency(e,c(this,ft)),this}inheritSimpleDataAsFutureForcedDependencies(e){return c(this,je).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return c(this,je).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return c(this,cr)||c(this,je).resetBBox(c(this,ft)),this}recordClipBox(e,t,s,r,i,o){return c(this,cr)||c(this,je).recordClipBox(c(this,ft),t,s,r,i,o),this}recordBBox(e,t,s,r,i,o){return c(this,cr)||c(this,je).recordBBox(c(this,ft),t,s,r,i,o),this}recordCharacterBBox(e,t,s,r,i,o,a){return c(this,cr)||c(this,je).recordCharacterBBox(c(this,ft),t,s,r,i,o,a),this}recordFullPageBBox(e){return c(this,cr)||c(this,je).recordFullPageBBox(c(this,ft)),this}getSimpleIndex(e){return c(this,je).getSimpleIndex(e)}recordDependencies(e,t){return c(this,je).recordDependencies(c(this,ft),t),this}recordNamedDependency(e,t){return c(this,je).recordNamedDependency(c(this,ft),t),this}recordOperation(e){return c(this,je).recordOperation(c(this,ft),!0),this}recordShowTextOperation(e){return c(this,je).recordShowTextOperation(c(this,ft),!0),this}bboxToClipBoxDropOperation(e){return c(this,cr)||c(this,je).bboxToClipBoxDropOperation(c(this,ft),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};je=new WeakMap,ft=new WeakMap,cr=new WeakMap,Wd=new WeakMap,qd=new WeakMap;let Wb=nk;const Ms={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},nn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function X_(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class BT{isModifyingCurrentTransform(){return!1}getPattern(){Fe("Abstract method `getPattern` called.")}}class xW extends BT{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===nn.STROKE||r===nn.FILL){const o=t.current.getClippedPathBoundingBox(r,rt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),s=Q.transform(s,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),X_(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(s);i.setTransform(h)}else X_(e,this._bbox),i=this._createGradient(e);return i}}function BA(n,e,t,s,r,i,o,a){const l=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f),l[s+1]>l[r+1]&&(f=s,s=r,r=f,f=o,o=a,a=f),l[t+1]>l[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f);const p=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[s]+e.offsetX)*e.scaleX,S=(l[s+1]+e.offsetY)*e.scaleY,v=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY;if(y>=b)return;const A=u[i],_=u[i+1],T=u[i+2],k=u[o],P=u[o+1],R=u[o+2],L=u[a],I=u[a+1],O=u[a+2],D=Math.round(y),V=Math.round(b);let j,N,M,B,F,$,U,q;for(let K=D;K<=V;K++){if(K<S){const me=K<y?0:(y-K)/(y-S);j=p-(p-g)*me,N=A-(A-k)*me,M=_-(_-P)*me,B=T-(T-R)*me}else{let me;K>b?me=1:S===b?me=0:me=(S-K)/(S-b),j=g-(g-v)*me,N=k-(k-L)*me,M=P-(P-I)*me,B=R-(R-O)*me}let z;K<y?z=0:K>b?z=1:z=(y-K)/(y-b),F=p-(p-v)*z,$=A-(A-L)*z,U=_-(_-I)*z,q=T-(T-O)*z;const X=Math.round(Math.min(j,F)),pe=Math.round(Math.max(j,F));let Ce=h*K+X*4;for(let me=X;me<=pe;me++)z=(j-me)/(j-F),z<0?z=0:z>1&&(z=1),d[Ce++]=N-(N-$)*z|0,d[Ce++]=M-(M-U)*z|0,d[Ce++]=B-(B-q)*z|0,d[Ce++]=255}}function AW(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(s.length/a)-1,u=a-1;for(i=0;i<l;i++){let d=i*a;for(let h=0;h<u;h++,d++)BA(n,t,s[d],s[d+1],s[d+a],r[d],r[d+1],r[d+a]),BA(n,t,s[d+a+1],s[d+1],s[d+a],r[d+a+1],r[d+1],r[d+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)BA(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class SW extends BT{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),p=u/h,y=d/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/p,scaleY:1/y},S=h+2*2,v=f+2*2,b=s.getCanvas("mesh",S,v),A=b.context,_=A.createImageData(h,f);if(t){const k=_.data;for(let P=0,R=k.length;P<R;P+=4)k[P]=t[0],k[P+1]=t[1],k[P+2]=t[2],k[P+3]=255}for(const k of this._figures)AW(_,k,g);return A.putImageData(_,2,2),{canvas:b.canvas,offsetX:a-2*p,offsetY:l-2*y,scaleX:p,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){X_(e,this._bbox);const i=new Float32Array(2);if(r===nn.SHADING)Q.singularValueDecompose2dScale(rt(e),i);else if(this.matrix){Q.singularValueDecompose2dScale(this.matrix,i);const[a,l]=i;Q.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=l}else Q.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===nn.SHADING?null:this._background,t.cachedCanvases);return r!==nn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class _W extends BT{getPattern(){return"hotpink"}}function EW(n){switch(n[0]){case"RadialAxial":return new xW(n);case"Mesh":return new SW(n);case"Dummy":return new _W}throw new Error(`Unknown IR type: ${n[0]}`)}const d2={COLORED:1,UNCOLORED:2},$w=class $w{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var $,U;const{bbox:s,operatorList:r,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),T1("TilingType: "+o);const h=s[0],f=s[1],p=s[2],y=s[3],g=p-h,S=y-f,v=new Float32Array(2);Q.singularValueDecompose2dScale(this.matrix,v);const[b,A]=v;Q.singularValueDecompose2dScale(this.baseTransform,v);const _=b*v[0],T=A*v[1];let k=g,P=S,R=!1,L=!1;const I=Math.ceil(u*_),O=Math.ceil(d*T),D=Math.ceil(g*_),V=Math.ceil(S*T);I>=D?k=u:R=!0,O>=V?P=d:L=!0;const j=this.getSizeAndScale(k,this.ctx.canvas.width,_),N=this.getSizeAndScale(P,this.ctx.canvas.height,T),M=e.cachedCanvases.getCanvas("pattern",j.size,N.size),B=M.context,F=l.createCanvasGraphics(B,t);if(F.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(F,i,a),B.translate(-j.scale*h,-N.scale*f),F.transform(0,j.scale,0,0,N.scale,0,0),B.save(),($=F.dependencyTracker)==null||$.save(),this.clipBbox(F,h,f,p,y),F.baseTransform=rt(F.ctx),F.executeOperatorList(r),F.endDrawing(),(U=F.dependencyTracker)==null||U.restore(),B.restore(),R||L){const q=M.canvas;R&&(k=u),L&&(P=d);const K=this.getSizeAndScale(k,this.ctx.canvas.width,_),z=this.getSizeAndScale(P,this.ctx.canvas.height,T),X=K.size,pe=z.size,Ce=e.cachedCanvases.getCanvas("pattern-workaround",X,pe),me=Ce.context,Ps=R?Math.floor(g/u):0,yt=L?Math.floor(S/d):0;for(let xe=0;xe<=Ps;xe++)for(let H=0;H<=yt;H++)me.drawImage(q,X*xe,pe*H,X,pe,0,0,X,pe);return{canvas:Ce.canvas,scaleX:K.scale,scaleY:z.scale,offsetX:h,offsetY:f}}return{canvas:M.canvas,scaleX:j.scale,scaleY:N.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max($w.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),Q.axialAlignedBoundingBox([t,s,r,i],rt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case d2.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case d2.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new WG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let o=s;r!==nn.SHADING&&(o=Q.transform(o,t.baseTransform),this.matrix&&(o=Q.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(l),u}};G($w,"MAX_PATTERN_SIZE",3e3);let Y_=$w;function CW({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=qt.isLittleEndian?4278190080:255,[l,u]=o?[i,a]:[a,i],d=s>>3,h=s&7,f=n.length;t=new Uint32Array(t.buffer);let p=0;for(let y=0;y<r;y++){for(const S=e+d;e<S;e++){const v=e<f?n[e]:255;t[p++]=v&128?u:l,t[p++]=v&64?u:l,t[p++]=v&32?u:l,t[p++]=v&16?u:l,t[p++]=v&8?u:l,t[p++]=v&4?u:l,t[p++]=v&2?u:l,t[p++]=v&1?u:l}if(h===0)continue;const g=e<f?n[e++]:255;for(let S=0;S<h;S++)t[p++]=g&1<<7-S?u:l}return{srcPos:e,destPos:p}}const h2=16,f2=100,TW=15,p2=10,Wn=16,$A=new DOMMatrix,xs=new Float32Array(2),Zu=new Float32Array([1/0,1/0,-1/0,-1/0]);function kW(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,a){e.transform(t,s,r,i,o,a),this.__originalTransform(t,s,r,i,o,a)},n.setTransform=function(t,s,r,i,o,a){e.setTransform(t,s,r,i,o,a),this.__originalSetTransform(t,s,r,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class PW{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function i0(n,e,t,s,r,i,o,a,l,u){const[d,h,f,p,y,g]=rt(n);if(h===0&&f===0){const b=o*d+y,A=Math.round(b),_=a*p+g,T=Math.round(_),k=(o+l)*d+y,P=Math.abs(Math.round(k)-A)||1,R=(a+u)*p+g,L=Math.abs(Math.round(R)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(p),A,T),n.drawImage(e,t,s,r,i,0,0,P,L),n.setTransform(d,h,f,p,y,g),[P,L]}if(d===0&&p===0){const b=a*f+y,A=Math.round(b),_=o*h+g,T=Math.round(_),k=(a+u)*f+y,P=Math.abs(Math.round(k)-A)||1,R=(o+l)*h+g,L=Math.abs(Math.round(R)-T)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,A,T),n.drawImage(e,t,s,r,i,0,0,L,P),n.setTransform(d,h,f,p,y,g),[L,P]}n.drawImage(e,t,s,r,i,o,a,l,u);const S=Math.hypot(d,h),v=Math.hypot(f,p);return[S*l,v*u]}class m2{constructor(e,t,s){G(this,"alphaIsShape",!1);G(this,"fontSize",0);G(this,"fontSizeScale",1);G(this,"textMatrix",null);G(this,"textMatrixScale",1);G(this,"fontMatrix",A_);G(this,"leading",0);G(this,"x",0);G(this,"y",0);G(this,"lineX",0);G(this,"lineY",0);G(this,"charSpacing",0);G(this,"wordSpacing",0);G(this,"textHScale",1);G(this,"textRenderingMode",Kt.FILL);G(this,"textRise",0);G(this,"fillColor","#000000");G(this,"strokeColor","#000000");G(this,"patternFill",!1);G(this,"patternStroke",!1);G(this,"fillAlpha",1);G(this,"strokeAlpha",1);G(this,"lineWidth",1);G(this,"activeSMask",null);G(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Zu.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=nn.FILL,t=null){const s=this.minMax.slice();if(e===nn.STROKE){t||Fe("Stroke bounding box must include transform."),Q.singularValueDecompose2dScale(t,xs);const r=xs[0]*this.lineWidth/2,i=xs[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=Q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Zu,0)}getClippedPathBoundingBox(e=nn.FILL,t=null){return Q.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function g2(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Wn,i=(t-r)/Wn,o=r===0?i:i+1,a=n.createImageData(s,Wn);let l=0,u;const d=e.data,h=a.data;let f,p,y,g;if(e.kind===Kp.GRAYSCALE_1BPP){const S=d.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),b=v.length,A=s+7>>3,_=4294967295,T=qt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<i?Wn:r,u=0,p=0;p<y;p++){const k=S-l;let P=0;const R=k>A?s:k*8-7,L=R&-8;let I=0,O=0;for(;P<L;P+=8)O=d[l++],v[u++]=O&128?_:T,v[u++]=O&64?_:T,v[u++]=O&32?_:T,v[u++]=O&16?_:T,v[u++]=O&8?_:T,v[u++]=O&4?_:T,v[u++]=O&2?_:T,v[u++]=O&1?_:T;for(;P<R;P++)I===0&&(O=d[l++],I=128),v[u++]=O&I?_:T,I>>=1}for(;u<b;)v[u++]=0;n.putImageData(a,0,f*Wn)}}else if(e.kind===Kp.RGBA_32BPP){for(p=0,g=s*Wn*4,f=0;f<i;f++)h.set(d.subarray(l,l+g)),l+=g,n.putImageData(a,0,p),p+=Wn;f<o&&(g=s*r*4,h.set(d.subarray(l,l+g)),n.putImageData(a,0,p))}else if(e.kind===Kp.RGB_24BPP)for(y=Wn,g=s*y,f=0;f<o;f++){for(f>=i&&(y=r,g=s*y),u=0,p=g;p--;)h[u++]=d[l++],h[u++]=d[l++],h[u++]=d[l++],h[u++]=255;n.putImageData(a,0,f*Wn)}else throw new Error(`bad image kind: ${e.kind}`)}function y2(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Wn,i=(t-r)/Wn,o=r===0?i:i+1,a=n.createImageData(s,Wn);let l=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<i?Wn:r;({srcPos:l}=CW({src:u,srcPos:l,dest:d,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,h*Wn)}}function Jf(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function o0(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function v2(n,e){if(e)return!0;Q.singularValueDecompose2dScale(n,xs);const t=Math.fround(Er.pixelRatio*wo.PDF_TO_CSS_UNITS);return xs[0]<=t&&xs[1]<=t}const RW=["butt","round","square"],NW=["miter","round","bevel"],MW={},b2={};var bg,Q_,wg,J_,xg,Z_;const sk=class sk{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},l,u,d){w(this,bg);w(this,wg);w(this,xg);this.ctx=e,this.current=new m2(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new PW(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const l=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...rt(this.compositeCtx))}this.ctx.save(),o0(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=rt(this.ctx)}executeOperatorList(e,t,s,r,i){var v;const o=e.argsArray,a=e.fnArray;let l=t||0;const u=o.length;if(u===l)return l;const d=u-l>p2&&typeof s=="function",h=d?Date.now()+TW:0;let f=0;const p=this.commonObjs,y=this.objs;let g,S;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,s),l;if(!i||i(l))if(g=a[l],S=o[l]??null,g!==_f.dependency)S===null?this[g](l):this[g](l,...S);else for(const b of S){(v=this.dependencyTracker)==null||v.recordNamedData(b,l);const A=b.startsWith("g_")?p:y;if(!A.has(b))return A.get(b,s),l}if(l++,l===u)return l;if(d&&++f>p2){if(Date.now()>h)return s(),l;f=0}}}endDrawing(){E(this,bg,Q_).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),E(this,wg,J_).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,l=r,u="prescale1",d,h;for(;i>2&&a>1||o>2&&l>1;){let f=a,p=l;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/p),d=this.cachedCanvases.getCanvas(u,f,p),h=d.context,h.clearRect(0,0,f,p),h.drawImage(e,0,0,a,l,0,0,f,p),e=d.canvas,a=f,l=p,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,t){var I,O;const s=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,l=rt(s);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const D=t.bitmap||t.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),o]),u=this._cachedBitmapsMap.get(D),u||(u=new Map,this._cachedBitmapsMap.set(D,u));const V=u.get(d);if(V&&!a){const j=Math.round(Math.min(l[0],l[2])+l[4]),N=Math.round(Math.min(l[1],l[3])+l[5]);return(I=this.dependencyTracker)==null||I.recordDependencies(e,Ms.transformAndFill),{canvas:V,offsetX:j,offsetY:N}}h=V}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),y2(f.context,t));let p=Q.transform(l,[1/r,0,0,-1/i,0,0]);p=Q.transform(p,[1,0,0,1,0,-i]);const y=Zu.slice();Q.axialAlignedBoundingBox([0,0,r,i],p,y);const[g,S,v,b]=y,A=Math.round(v-g)||1,_=Math.round(b-S)||1,T=this.cachedCanvases.getCanvas("fillCanvas",A,_),k=T.context,P=g,R=S;k.translate(-P,-R),k.transform(...p),h||(h=this._scaleImage(f.canvas,kr(k)),h=h.img,u&&a&&u.set(d,h)),k.imageSmoothingEnabled=v2(rt(k),t.interpolate),i0(k,h,0,0,h.width,h.height,0,0,r,i),k.globalCompositeOperation="source-in";const L=Q.transform(kr(k),[1,0,0,1,-P,-R]);return k.fillStyle=a?o.getPattern(s,this,L,nn.FILL,e):o,k.fillRect(0,0,r,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,T.canvas)),(O=this.dependencyTracker)==null||O.recordDependencies(e,Ms.transformAndFill),{canvas:T.canvas,offsetX:Math.round(P),offsetY:Math.round(R)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=RW[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=NW[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,o,a;for(const[l,u]of t)switch(l){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),Jf(this.suspendedCtx,o),kW(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Jf(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,l=r[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,s,a,l,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,l,u,d,h){let f=e.canvas,p=l-d,y=u-h;if(o)if(p<0||y<0||p+s>f.width||y+r>f.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,r),v=S.context;v.drawImage(f,-p,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,s,r),v.globalCompositeOperation="source-over",f=S.canvas,p=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(p,y,s,r),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(p,y,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,u,s,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,p,y,s,r,l,u,s,r),t.restore()}save(e){var s;this.inSMaskMode&&Jf(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Jf(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o,a){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===_f.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=s[0]=new Path2D;for(let a=0,l=i.length;a<l;)switch(i[a++]){case Zv.moveTo:o.moveTo(i[a++],i[a++]);break;case Zv.lineTo:o.lineTo(i[a++],i[a++]);break;case Zv.curveTo:o.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case Zv.closePath:o.closePath();break;default:ae(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=o}Q.axialAlignedBoundingBox(r,rt(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,kr(r),nn.STROKE,e),a){const l=new Path2D;l.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Ms.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(nn.STROKE,rt(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,d,h;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=i.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),r.save(),r.fillStyle=i.getPattern(r,this,kr(r),nn.FILL,e),f){const p=new Path2D;p.addPath(t,r.getTransform().invertSelf().multiplySelf(f)),t=p}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Ms.fill),a&&(r.restore(),(h=this.dependencyTracker)==null||h.restore(e)),s&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,Ms.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=MW}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=b2}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:u,path:d}of t)d&&r.addPath(d,new DOMMatrix(o).preMultiplySelf(i).translate(a,l).scale(u,-u));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||A_,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ae("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",a=((f=r.systemFontInfo)==null?void 0:f.css)||`"${o}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const u=r.italic?"italic":"normal";let d=s;s<h2?d=h2:s>f2&&(d=f2),this.current.fontSizeScale=s/d,this.ctx.font=`${u} ${l} ${d}px ${a}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,o){var v,b,A,_;const a=this.ctx,l=this.current,u=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&Kt.FILL_STROKE_MASK,p=!!(d&Kt.ADD_TO_PATH_FLAG),y=l.patternFill&&!u.missingFile,g=l.patternStroke&&!u.missingFile;let S;if((u.disableFontFace||p||y||g)&&!u.missingFile&&(S=u.getPathGenerator(this.commonObjs,t)),S&&(u.disableFontFace||y||g)){a.save(),a.translate(s,r),a.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,a,u);let T;if(f===Kt.FILL||f===Kt.FILL_STROKE)if(i){T=a.getTransform(),a.setTransform(...i);const k=E(this,xg,Z_).call(this,S,T,i);a.fill(k)}else a.fill(S);if(f===Kt.STROKE||f===Kt.FILL_STROKE)if(o){T||(T=a.getTransform()),a.setTransform(...o);const{a:k,b:P,c:R,d:L}=T,I=Q.inverseTransform(o),O=Q.transform([k,P,R,L,0,0],I);Q.singularValueDecompose2dScale(O,xs),a.lineWidth*=Math.max(xs[0],xs[1])/h,a.stroke(E(this,xg,Z_).call(this,S,T,o))}else a.lineWidth/=h,a.stroke(S);a.restore()}else(f===Kt.FILL||f===Kt.FILL_STROKE)&&(a.fillText(t,s,r),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,a,u,h,s,r,()=>a.measureText(t))),(f===Kt.STROKE||f===Kt.FILL_STROKE)&&(this.dependencyTracker&&((A=this.dependencyTracker)==null||A.recordCharacterBBox(e,a,u,h,s,r,()=>a.measureText(t)).recordDependencies(e,Ms.stroke)),a.strokeText(t,s,r));p&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:rt(a),x:s,y:r,fontSize:h,path:S}),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,a,u,h,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return de(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var R,L,I,O;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Ms.showText).resetBBox(e),this.current.textRenderingMode&Kt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(L=this.dependencyTracker)==null||L.recordOperation(e);return}const o=this.ctx,a=s.fontSizeScale,l=s.charSpacing,u=s.wordSpacing,d=s.fontDirection,h=s.textHScale*d,f=t.length,p=r.vertical,y=p?1:-1,g=r.defaultVMetrics,S=i*s.fontMatrix[0],v=s.textRenderingMode===Kt.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),d>0?o.scale(h,-1):o.scale(h,1);let b,A;if(s.patternFill){o.save();const D=s.fillColor.getPattern(o,this,kr(o),nn.FILL,e);b=rt(o),o.restore(),o.fillStyle=D}if(s.patternStroke){o.save();const D=s.strokeColor.getPattern(o,this,kr(o),nn.STROKE,e);A=rt(o),o.restore(),o.strokeStyle=D}let _=s.lineWidth;const T=s.textMatrixScale;if(T===0||_===0){const D=s.textRenderingMode&Kt.FILL_STROKE_MASK;(D===Kt.STROKE||D===Kt.FILL_STROKE)&&(_=this.getSinglePixelWidth())}else _/=T;if(a!==1&&(o.scale(a,a),_/=a),o.lineWidth=_,r.isInvalidPDFjsFont){const D=[];let V=0;for(const N of t)D.push(N.unicode),V+=N.width;const j=D.join("");if(o.fillText(j,0,0),this.dependencyTracker!==null){const N=o.measureText(j);this.dependencyTracker.recordBBox(e,this.ctx,-N.actualBoundingBoxLeft,N.actualBoundingBoxRight,-N.actualBoundingBoxAscent,N.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=V*S*h,o.restore(),this.compose();return}let k=0,P;for(P=0;P<f;++P){const D=t[P];if(typeof D=="number"){k+=y*D*i/1e3;continue}let V=!1;const j=(D.isSpace?u:0)+l,N=D.fontChar,M=D.accent;let B,F,$=D.width;if(p){const K=D.vmetric||g,z=-(D.vmetric?K[1]:$*.5)*S,X=K[2]*S;$=K?-K[0]:$,B=z/a,F=(k+X)/a}else B=k/a,F=0;let U;if(r.remeasure&&$>0){U=o.measureText(N);const K=U.width*1e3/i*a;if($<K&&this.isFontSubpixelAAEnabled){const z=$/K;V=!0,o.save(),o.scale(z,1),B/=z}else $!==K&&(B+=($-K)/2e3*i/a)}if(this.contentVisible&&(D.isInFont||r.missingFile)){if(v&&!M)o.fillText(N,B,F),(I=this.dependencyTracker)==null||I.recordCharacterBBox(e,o,U?{bbox:null}:r,i/a,B,F,()=>U??o.measureText(N));else if(this.paintChar(e,N,B,F,b,A),M){const K=B+i*M.offset.x/a,z=F-i*M.offset.y/a;this.paintChar(e,M.fontChar,K,z,b,A)}}const q=p?$*S-j*d:$*S+j*d;k+=q,V&&o.restore()}p?s.y-=k:s.x+=k*h,o.restore(),this.compose(),(O=this.dependencyTracker)==null||O.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,o=r.fontSize,a=r.fontDirection,l=i.vertical?1:-1,u=r.charSpacing,d=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||A_,p=t.length,y=r.textRenderingMode===Kt.INVISIBLE;let g,S,v,b;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(h,a);const A=this.dependencyTracker;for(this.dependencyTracker=A?new Wb(A,e):null,g=0;g<p;++g){if(S=t[g],typeof S=="number"){b=l*S*o/1e3,this.ctx.translate(b,0),r.x+=b*h;continue}const _=(S.isSpace?d:0)+u,T=i.charProcOperatorList[S.operatorListId];T?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(T),this.restore()):ae(`Type3 character "${S.operatorListId}" is not available.`);const k=[S.width,0];Q.applyTransform(k,f),v=k[0]*o+_,s.translate(v,0),r.x+=v*h}s.restore(),A&&(this.dependencyTracker=A)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,o,a){var u;const l=new Path2D;l.rect(r,i,o-r,a-i),this.ctx.clip(l),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,r,o,i,a).recordClipBox(e,this.ctx,r,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||rt(this.ctx),i={createCanvasGraphics:(o,a)=>new sk(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Wb(this.dependencyTracker,a,!0):null)};s=new Y_(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=EW(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,kr(s),nn.SHADING,e);const i=kr(s);if(i){const{width:a,height:l}=s.canvas,u=Zu.slice();Q.axialAlignedBoundingBox([0,0,a,l],i,u);const[d,h,f,p]=u;this.ctx.fillRect(d,h,f-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Ms.transform).recordDependencies(e,Ms.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Fe("Should not call beginInlineImage")}beginImageData(){Fe("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=rt(this.ctx),s)){Q.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,a,l]=s,u=new Path2D;u.rect(i,o,a-i,l-o),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,a,o,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var A;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||T1("TODO: Support non-isolated groups."),t.knockout&&ae("Knockout groups not supported.");const r=rt(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=Zu.slice();Q.axialAlignedBoundingBox(t.bbox,rt(s),i);const o=[0,0,s.canvas.width,s.canvas.height];i=Q.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),l=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),d=Math.max(Math.ceil(i[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),p=f.context;p.translate(-a,-l),p.transform(...r);let y=new Path2D;const[g,S,v,b]=t.bbox;if(y.rect(g,S,v-g,b-S),t.matrix){const _=new Path2D;_.addPath(y,new DOMMatrix(t.matrix)),y=_}p.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:p,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(a,l),s.save()),Jf(s,p),this.ctx=p,(A=this.dependencyTracker)==null||A.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=rt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=Zu.slice();Q.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,a),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,s,r,i,o){if(E(this,bg,Q_).call(this),o0(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const a=s[2]-s[0],l=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=a,s[3]=l,Q.singularValueDecompose2dScale(rt(this.ctx),xs);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(xs[0],0,0,-xs[1],0,l*xs[1]),o0(this.ctx)}else{o0(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],a,l),this.ctx.clip(u)}}this.current=new m2(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),E(this,wg,J_).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,o,a){var h,f,p;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const u=rt(l);l.transform(s,r,i,o,0,0);const d=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let y=0,g=a.length;y<g;y+=2){const S=Q.transform(u,[s,r,i,o,a[y],a[y+1]]);l.drawImage(d.canvas,S[4],S[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,S[4],S[4]+d.canvas.width,S[5],S[5]+d.canvas.height)}l.restore(),this.compose(),(p=this.dependencyTracker)==null||p.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,l;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Ms.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:p}=u,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),g=y.context;g.save();const S=this.getObject(e,d,u);y2(g,S),g.globalCompositeOperation="source-in",g.fillStyle=i?r.getPattern(g,this,kr(s),nn.FILL,e):r,g.fillRect(0,0,h,f),g.restore(),s.save(),s.transform(...p),s.scale(1,-1),i0(s,y.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,h,0,f),s.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){ae("Dependent image isn't ready yet");return}const a=o.width,l=o.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[s,0,0,r,i[d],i[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/s,-1/r);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",s,r).context;g2(h,t),a=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(a,kr(i));i.imageSmoothingEnabled=v2(rt(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,Ms.imageXObject).recordOperation(e),i0(i,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,a,l;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;g2(f,t),i=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)r.save(),r.transform(...u.transform),r.scale(1,-1),i0(r,i,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,1,-1,0),r.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Ms.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,a;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===b2?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=rt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const l=Math.abs(t),u=Math.abs(i);if(l===u)if(e===0)o=a=1/l;else{const d=l*e;o=a=d<1?1/d:1}else if(e===0)o=1/l,a=1/u;else{const d=l*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const l=Math.abs(t*i-s*r),u=Math.hypot(t,s),d=Math.hypot(r,i);if(e===0)o=d/l,a=u/l;else{const h=e*l;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(i,o),$A.a=1/i,$A.d=1/o;const l=new Path2D;if(l.addPath(e,$A),a.length>0){const u=Math.max(i,o);s.setLineDash(a.map(d=>d/u)),s.lineDashOffset/=u}s.lineWidth=r||1,s.stroke(l),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};bg=new WeakSet,Q_=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wg=new WeakSet,J_=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},xg=new WeakSet,Z_=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let dd=sk;for(const n in _f)dd.prototype[n]!==void 0&&(dd.prototype[_f[n]]=dd.prototype[n]);var Kd,Xd,Ag,Yd,O0;const td=class td{constructor(e){w(this,Yd);w(this,Kd,void 0);w(this,Xd,void 0);w(this,Ag,void 0);x(this,Kd,e),x(this,Xd,new DataView(c(this,Kd))),x(this,Ag,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const u of td.strings){const d=t.encode(e[u]);s[u]=d,r+=4+d.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),a=new DataView(i);let l=0;for(const u of td.strings){const d=s[u],h=d.length;a.setUint32(l,h),o.set(d,l+4),l+=4+h}return be(l===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return E(this,Yd,O0).call(this,0)}get fontWeight(){return E(this,Yd,O0).call(this,1)}get italicAngle(){return E(this,Yd,O0).call(this,2)}};Kd=new WeakMap,Xd=new WeakMap,Ag=new WeakMap,Yd=new WeakSet,O0=function(e){be(e<td.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=c(this,Xd).getUint32(t)+4;const s=c(this,Xd).getUint32(t);return c(this,Ag).decode(new Uint8Array(c(this,Kd),t+4,s))},G(td,"strings",["fontFamily","fontWeight","italicAngle"]);let qb=td;var ra,Hr,lc,cc,xp;const nd=class nd{constructor(e){w(this,cc);w(this,ra,void 0);w(this,Hr,void 0);w(this,lc,void 0);x(this,ra,e),x(this,Hr,new DataView(c(this,ra))),x(this,lc,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const f of nd.strings){const p=t.encode(e[f]);s[f]=p,r+=4+p.length}r+=4;let i,o,a=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const l=new ArrayBuffer(a),u=new Uint8Array(l),d=new DataView(l);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,r=0;for(const f of nd.strings){const p=s[f],y=p.length;r+=4+y,d.setUint32(h,y),u.set(p,h+4),h+=4+y}return d.setUint32(h-r-4,r),e.style&&(d.setUint32(h,i.length),u.set(i,h+4),h+=4+i.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),be(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return c(this,Hr).getUint8(0)!==0}get css(){return E(this,cc,xp).call(this,0)}get loadedName(){return E(this,cc,xp).call(this,1)}get baseFontName(){return E(this,cc,xp).call(this,2)}get src(){return E(this,cc,xp).call(this,3)}get style(){let e=1;e+=4+c(this,Hr).getUint32(e);const t=c(this,Hr).getUint32(e),s=c(this,lc).decode(new Uint8Array(c(this,ra),e+4,t));e+=4+t;const r=c(this,Hr).getUint32(e),i=c(this,lc).decode(new Uint8Array(c(this,ra),e+4,r));return{style:s,weight:i}}};ra=new WeakMap,Hr=new WeakMap,lc=new WeakMap,cc=new WeakSet,xp=function(e){be(e<nd.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=c(this,Hr).getUint32(t)+4;const s=c(this,Hr).getUint32(t);return c(this,lc).decode(new Uint8Array(c(this,ra),t+4,s))},G(nd,"strings",["css","loadedName","baseFontName","src"]);let Kb=nd;var Qd,Jd,Zd,eh,rs,Gr,Sg,Le,is,tr,th,F0,uc,Ap;const ue=class ue{constructor({data:e,extra:t}){w(this,is);w(this,th);w(this,uc);w(this,Gr,void 0);w(this,Sg,void 0);w(this,Le,void 0);x(this,Gr,e),x(this,Sg,new TextDecoder),x(this,Le,new DataView(c(this,Gr))),t&&Object.assign(this,t)}get black(){return E(this,is,tr).call(this,0)}get bold(){return E(this,is,tr).call(this,1)}get disableFontFace(){return E(this,is,tr).call(this,2)}get fontExtraProperties(){return E(this,is,tr).call(this,3)}get isInvalidPDFjsFont(){return E(this,is,tr).call(this,4)}get isType3Font(){return E(this,is,tr).call(this,5)}get italic(){return E(this,is,tr).call(this,6)}get missingFile(){return E(this,is,tr).call(this,7)}get remeasure(){return E(this,is,tr).call(this,8)}get vertical(){return E(this,is,tr).call(this,9)}get ascent(){return E(this,th,F0).call(this,0)}get defaultWidth(){return E(this,th,F0).call(this,1)}get descent(){return E(this,th,F0).call(this,2)}get bbox(){let e=c(ue,Jd);if(c(this,Le).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(c(this,Le).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=c(ue,Zd);if(c(this,Le).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(c(this,Le).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=c(ue,eh);if(c(this,Le).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(c(this,Le).getInt16(e,!0)),e+=2;return s}get fallbackName(){return E(this,uc,Ap).call(this,0)}get loadedName(){return E(this,uc,Ap).call(this,1)}get mimetype(){return E(this,uc,Ap).call(this,2)}get name(){return E(this,uc,Ap).call(this,3)}get data(){let e=c(ue,rs);const t=c(this,Le).getUint32(e);e+=4+t;const s=c(this,Le).getUint32(e);e+=4+s;const r=c(this,Le).getUint32(e);e+=4+r;const i=c(this,Le).getUint32(e);if(i!==0)return new Uint8Array(c(this,Gr),e+4,i)}clearData(){let e=c(ue,rs);const t=c(this,Le).getUint32(e);e+=4+t;const s=c(this,Le).getUint32(e);e+=4+s;const r=c(this,Le).getUint32(e);e+=4+r;const i=c(this,Le).getUint32(e);new Uint8Array(c(this,Gr),e+4,i).fill(0),c(this,Le).setUint32(e,0)}get cssFontInfo(){let e=c(ue,rs);const t=c(this,Le).getUint32(e);e+=4+t;const s=c(this,Le).getUint32(e);e+=4+s;const r=c(this,Le).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(c(this,Gr),e+4,r)),new qb(i.buffer)}get systemFontInfo(){let e=c(ue,rs);const t=c(this,Le).getUint32(e);e+=4+t;const s=c(this,Le).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(c(this,Gr),e+4,s)),new Kb(r.buffer)}static write(e){const t=e.systemFontInfo?Kb.write(e.systemFontInfo):null,s=e.cssFontInfo?qb.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const g of ue.strings)i[g]=r.encode(e[g]),o+=4+i[g].length;const a=c(ue,rs)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),u=new Uint8Array(l),d=new DataView(l);let h=0;const f=ue.bools.length;let p=0,y=0;for(let g=0;g<f;g++){const S=e[ue.bools[g]];p|=(S===void 0?0:S?2:1)<<y,y+=2,(y===8||g===f-1)&&(d.setUint8(h++,p),p=0,y=0)}be(h===c(ue,Qd),"FontInfo.write: Boolean properties offset mismatch");for(const g of ue.numbers)d.setFloat64(h,e[g]),h+=8;if(be(h===c(ue,Jd),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(be(h===c(ue,Zd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(be(h===c(ue,eh),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=3*2;be(h===c(ue,rs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(c(ue,rs),0),h+=4;for(const g of ue.strings){const S=i[g],v=S.length;d.setUint32(h,v),u.set(S,h+4),h+=4+v}if(d.setUint32(c(ue,rs),h-c(ue,rs)-4),!t)d.setUint32(h,0),h+=4;else{const g=t.byteLength;d.setUint32(h,g),be(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!s)d.setUint32(h,0),h+=4;else{const g=s.byteLength;d.setUint32(h,g),be(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),be(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};Qd=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,eh=new WeakMap,rs=new WeakMap,Gr=new WeakMap,Sg=new WeakMap,Le=new WeakMap,is=new WeakSet,tr=function(e){be(e<ue.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=c(this,Le).getUint8(t)>>s&3;return r===0?void 0:r===2},th=new WeakSet,F0=function(e){return be(e<ue.numbers.length,"Invalid number index"),c(this,Le).getFloat64(c(ue,Qd)+e*8)},uc=new WeakSet,Ap=function(e){be(e<ue.strings.length,"Invalid string index");let t=c(ue,rs)+4;for(let i=0;i<e;i++)t+=c(this,Le).getUint32(t)+4;const s=c(this,Le).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(c(this,Gr),t+4,s)),c(this,Sg).decode(r)},G(ue,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),G(ue,"numbers",["ascent","defaultWidth","descent"]),G(ue,"strings",["fallbackName","loadedName","mimetype","name"]),w(ue,Qd,Math.ceil(ue.bools.length*2/8)),w(ue,Jd,c(ue,Qd)+ue.numbers.length*8),w(ue,Zd,c(ue,Jd)+1+2*4),w(ue,eh,c(ue,Zd)+1+8*6),w(ue,rs,c(ue,eh)+1+2*3);let eE=ue;var _g,Eg;class Ks{static get workerPort(){return c(this,_g)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,_g,e)}static get workerSrc(){return c(this,Eg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,Eg,e)}}_g=new WeakMap,Eg=new WeakMap,w(Ks,_g,null),w(Ks,Eg,"");var nh,Cg;class LW{constructor({parsedData:e,rawData:t}){w(this,nh,void 0);w(this,Cg,void 0);x(this,nh,e),x(this,Cg,t)}getRaw(){return c(this,Cg)}get(e){return c(this,nh).get(e)??null}[Symbol.iterator](){return c(this,nh).entries()}}nh=new WeakMap,Cg=new WeakMap;const Du=Symbol("INTERNAL");var Tg,kg,Pg,sh;class DW{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){w(this,Tg,!1);w(this,kg,!1);w(this,Pg,!1);w(this,sh,!0);x(this,Tg,!!(e&bs.DISPLAY)),x(this,kg,!!(e&bs.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(c(this,Pg))return c(this,sh);if(!c(this,sh))return!1;const{print:e,view:t}=this.usage;return c(this,Tg)?(t==null?void 0:t.viewState)!=="OFF":c(this,kg)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Du&&Fe("Internal method `_setVisible` called."),x(this,Pg,s),x(this,sh,t)}}Tg=new WeakMap,kg=new WeakMap,Pg=new WeakMap,sh=new WeakMap;var ia,De,rh,ih,Rg,tE;class IW{constructor(e,t=bs.DISPLAY){w(this,Rg);w(this,ia,null);w(this,De,new Map);w(this,rh,null);w(this,ih,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,ih,e.order);for(const s of e.groups)c(this,De).set(s.id,new DW(t,s));if(e.baseState==="OFF")for(const s of c(this,De).values())s._setVisible(Du,!1);for(const s of e.on)c(this,De).get(s)._setVisible(Du,!0);for(const s of e.off)c(this,De).get(s)._setVisible(Du,!1);x(this,rh,this.getHash())}}isVisible(e){if(c(this,De).size===0)return!0;if(!e)return T1("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,De).has(e.id)?c(this,De).get(e.id).visible:(ae(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return E(this,Rg,tE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,De).has(t))return ae(`Optional content group not found: ${t}`),!0;if(c(this,De).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,De).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!c(this,De).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,De).has(t))return ae(`Optional content group not found: ${t}`),!0;if(!c(this,De).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,De).has(t))return ae(`Optional content group not found: ${t}`),!0;if(c(this,De).get(t).visible)return!1}return!0}return ae(`Unknown optional content policy ${e.policy}.`),!0}return ae(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=c(this,De).get(e);if(!r){ae(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=c(this,De).get(a))==null||i._setVisible(Du,!1,!0));r._setVisible(Du,!!t,!0),x(this,ia,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=c(this,De).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}x(this,ia,null)}get hasInitialVisibility(){return c(this,rh)===null||this.getHash()===c(this,rh)}getOrder(){return c(this,De).size?c(this,ih)?c(this,ih).slice():[...c(this,De).keys()]:null}getGroup(e){return c(this,De).get(e)||null}getHash(){if(c(this,ia)!==null)return c(this,ia);const e=new Rj;for(const[t,s]of c(this,De))e.update(`${t}:${s.visible}`);return x(this,ia,e.hexdigest())}[Symbol.iterator](){return c(this,De).entries()}}ia=new WeakMap,De=new WeakMap,rh=new WeakMap,ih=new WeakMap,Rg=new WeakSet,tE=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=E(this,Rg,tE).call(this,i);else if(c(this,De).has(i))o=c(this,De).get(i).visible;else return ae(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class jW{constructor(e,{disableRange:t=!1,disableStream:s=!1}){be(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const l=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});be(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){be(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new OW(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new FW(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class OW{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=P1(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class FW{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function BW(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=l(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),p=mv(h);h=f.decode(p),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function o(d){const h=[];let f;const p=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(d))!==null;){let[,g,S,v]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[S,v]}const y=[];for(let g=0;g<h.length&&g in h;++g){let[S,v]=h[g];v=a(v),S&&(v=unescape(v),g===0&&(v=l(v))),y.push(v)}return y.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const p=h[f].indexOf('"');p!==-1&&(h[f]=h[f].slice(0,p),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),y=d.slice(h+1).replace(/^[^']*'/,"");return r(f,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,p,y){if(p==="q"||p==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,S){return String.fromCharCode(parseInt(S,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function zj(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function R1(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function Hj({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Gj(n){const e=n.get("Content-Disposition");if(e){let t=BW(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(P1(t))return t}return null}function bv(n,e){return new vm(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function Wj(n){return n===200||n===206}function qj(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function Kj(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ae(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class $W{constructor(e){G(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=zj(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return be(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new UW(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new VW(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class UW{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,qj(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=R1(i.url),!Wj(i.status))throw bv(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:l}=Hj({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=Gj(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new bo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:Kj(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class VW{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,qj(i,this._withCredentials,this._abortController)).then(a=>{const l=R1(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!Wj(a.status))throw bv(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:Kj(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const UA=200,VA=206;function zW(n){const e=n.response;return typeof e!="string"?e:mv(e).buffer}class HW{constructor({url:e,httpHeaders:t,withCredentials:s}){G(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=zj(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=VA):r.expectedStatus=UA,t.responseType="arraybuffer",be(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||UA;if(!(i===UA&&s.expectedStatus===VA)&&i!==s.expectedStatus){s.onError(r.status);return}const a=zW(r);if(i===VA){const l=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?s.onDone({begin:parseInt(u[1],10),chunk:a}):(ae('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class GW{constructor(e){this._source=e,this._manager=new HW(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return be(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new WW(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new qW(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class WW{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=R1(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=Hj({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=Gj(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=bv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class qW{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=R1((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=bv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const KW=/^[a-z][a-z0-9\-+.]+:/i;function XW(n){if(KW.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class YW{constructor(e){this.source=e,this.url=XW(e.url),be(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return be(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new QW(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new JW(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class QW{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=bv(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new bo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class JW{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Zf=Symbol("INITIAL_DATA");var os,Ng,nE;class Xj{constructor(){w(this,Ng);w(this,os,Object.create(null))}get(e,t=null){if(t){const r=E(this,Ng,nE).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=c(this,os)[e];if(!s||s.data===Zf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=c(this,os)[e];return!!t&&t.data!==Zf}delete(e){const t=c(this,os)[e];return!t||t.data===Zf?!1:(delete c(this,os)[e],!0)}resolve(e,t=null){const s=E(this,Ng,nE).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in c(this,os)){const{data:s}=c(this,os)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}x(this,os,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,os)){const{data:t}=c(this,os)[e];t!==Zf&&(yield[e,t])}}}os=new WeakMap,Ng=new WeakSet,nE=function(e){var t;return(t=c(this,os))[e]||(t[e]={...Promise.withResolvers(),data:Zf})};const ZW=1e5,w2=30;var F2,oa,zn,Mg,Lg,dc,Bi,Dg,Ig,hc,oh,ah,aa,lh,jg,ch,fc,Og,Fg,et,uh,pc,Bg,la,dh,Uw,Yj,Vw,Qj,$g,sE,hh,B0,Ug,rE,zw,Jj,Hw,Zj;let Am=(et=class{constructor({textContentSource:e,container:t,viewport:s}){w(this,Uw);w(this,Vw);w(this,$g);w(this,oa,Promise.withResolvers());w(this,zn,null);w(this,Mg,!1);w(this,Lg,!!((F2=globalThis.FontInspector)!=null&&F2.enabled));w(this,dc,null);w(this,Bi,null);w(this,Dg,0);w(this,Ig,0);w(this,hc,null);w(this,oh,null);w(this,ah,0);w(this,aa,0);w(this,lh,Object.create(null));w(this,jg,[]);w(this,ch,null);w(this,fc,[]);w(this,Og,new WeakMap);w(this,Fg,null);var l;if(e instanceof ReadableStream)x(this,ch,e);else if(typeof e=="object")x(this,ch,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,zn,x(this,oh,t)),x(this,aa,s.scale*Er.pixelRatio),x(this,ah,s.rotation),x(this,Bi,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;x(this,Fg,[1,0,0,-1,-o,a+i]),x(this,Ig,r),x(this,Dg,i),E(l=et,zw,Jj).call(l),Ja(t,s),c(this,oa).promise.finally(()=>{c(et,dh).delete(this),x(this,Bi,null),x(this,lh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=qt.platform;return de(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,hc).read().then(({value:t,done:s})=>{if(s){c(this,oa).resolve();return}c(this,dc)??x(this,dc,t.lang),Object.assign(c(this,lh),t.styles),E(this,Uw,Yj).call(this,t.items),e()},c(this,oa).reject)};return x(this,hc,c(this,ch).getReader()),c(et,dh).add(this),e(),c(this,oa).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*Er.pixelRatio,r=e.rotation;if(r!==c(this,ah)&&(t==null||t(),x(this,ah,r),Ja(c(this,oh),{rotation:r})),s!==c(this,aa)){t==null||t(),x(this,aa,s);const o={div:null,properties:null,ctx:E(i=et,hh,B0).call(i,c(this,dc))};for(const a of c(this,fc))o.properties=c(this,Og).get(a),o.div=a,E(this,$g,sE).call(this,o)}}cancel(){var t;const e=new bo("TextLayer task cancelled.");(t=c(this,hc))==null||t.cancel(e).catch(()=>{}),x(this,hc,null),c(this,oa).reject(e)}get textDivs(){return c(this,fc)}get textContentItemsStr(){return c(this,jg)}static cleanup(){if(!(c(this,dh).size>0)){c(this,uh).clear();for(const{canvas:e}of c(this,pc).values())e.remove();c(this,pc).clear()}}},oa=new WeakMap,zn=new WeakMap,Mg=new WeakMap,Lg=new WeakMap,dc=new WeakMap,Bi=new WeakMap,Dg=new WeakMap,Ig=new WeakMap,hc=new WeakMap,oh=new WeakMap,ah=new WeakMap,aa=new WeakMap,lh=new WeakMap,jg=new WeakMap,ch=new WeakMap,fc=new WeakMap,Og=new WeakMap,Fg=new WeakMap,uh=new WeakMap,pc=new WeakMap,Bg=new WeakMap,la=new WeakMap,dh=new WeakMap,Uw=new WeakSet,Yj=function(e){var r,i;if(c(this,Mg))return;(i=c(this,Bi)).ctx??(i.ctx=E(r=et,hh,B0).call(r,c(this,dc)));const t=c(this,fc),s=c(this,jg);for(const o of e){if(t.length>ZW){ae("Ignoring additional textDivs for performance reasons."),x(this,Mg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=c(this,zn);x(this,zn,document.createElement("span")),c(this,zn).classList.add("markedContent"),o.id&&c(this,zn).setAttribute("id",`${o.id}`),a.append(c(this,zn))}else o.type==="endMarkedContent"&&x(this,zn,c(this,zn).parentNode);continue}s.push(o.str),E(this,Vw,Qj).call(this,o)}},Vw=new WeakSet,Qj=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,fc).push(t);const r=Q.transform(c(this,Fg),e.transform);let i=Math.atan2(r[1],r[0]);const o=c(this,lh)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=c(this,Lg)&&o.fontSubstitution||o.fontFamily;a=et.fontFamilyMap.get(a)||a;const l=Math.hypot(r[2],r[3]),u=l*E(g=et,Hw,Zj).call(g,a,o,c(this,dc));let d,h;i===0?(d=r[4],h=r[5]-u):(d=r[4]+u*Math.sin(i),h=r[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",p=t.style;c(this,zn)===c(this,oh)?(p.left=`${(100*d/c(this,Ig)).toFixed(2)}%`,p.top=`${(100*h/c(this,Dg)).toFixed(2)}%`):(p.left=`${f}${d.toFixed(2)}px)`,p.top=`${f}${h.toFixed(2)}px)`),p.fontSize=`${f}${(c(et,la)*l).toFixed(2)}px)`,p.fontFamily=a,s.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,Lg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);S!==v&&Math.max(S,v)/Math.min(S,v)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),c(this,Og).set(t,s),c(this,Bi).div=t,c(this,Bi).properties=s,E(this,$g,sE).call(this,c(this,Bi)),s.hasText&&c(this,zn).append(t),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),c(this,zn).append(S)}},$g=new WeakSet,sE=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(c(et,la)>1&&(o=`scale(${1/c(et,la)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:l}=i,{canvasWidth:u,fontSize:d}=s;E(a=et,Ug,rE).call(a,r,d*c(this,aa),l);const{width:h}=r.measureText(t.textContent);h>0&&(o=`scaleX(${u*c(this,aa)/h}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},hh=new WeakSet,B0=function(e=null){let t=c(this,pc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,pc).set(e,t),c(this,Bg).set(t,{size:0,family:""})}return t},Ug=new WeakSet,rE=function(e,t,s){const r=c(this,Bg).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},zw=new WeakSet,Jj=function(){if(c(this,la)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),x(this,la,e.getBoundingClientRect().height),e.remove()},Hw=new WeakSet,Zj=function(e,t,s){const r=c(this,uh).get(e);if(r)return r;const i=E(this,hh,B0).call(this,s);i.canvas.width=i.canvas.height=w2,E(this,Ug,rE).call(this,i,w2,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+l):(qt.platform.isFirefox&&ae("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),c(this,uh).set(e,u),u},w(et,hh),w(et,Ug),w(et,zw),w(et,Hw),w(et,uh,new Map),w(et,pc,new Map),w(et,Bg,new WeakMap),w(et,la,null),w(et,dh,new Set),et);const eq=100;function $T(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new iE,{docId:t}=e,s=n.url?lW(n.url):null,r=n.data?cW(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof UT?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Ef?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!yv(n.docBaseUrl)?n.docBaseUrl:null,p=t0(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(kn?gW:o2),S=t0(n.iccUrl),v=t0(n.standardFontDataUrl),b=n.StandardFontDataFactory||(kn?yW:a2),A=t0(n.wasmUrl),_=n.WasmFactory||(kn?vW:l2),T=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!kn,L=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!kn&&(qt.platform.isFirefox||!globalThis.chrome),I=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,O=typeof n.disableFontFace=="boolean"?n.disableFontFace:kn,D=n.fontExtraProperties===!0,V=n.enableXfa===!0,j=n.ownerDocument||globalThis.document,N=n.disableRange===!0,M=n.disableStream===!0,B=n.disableAutoFetch===!0,F=n.pdfBug===!0,$=n.CanvasFactory||(kn?mW:hW),U=n.FilterFactory||(kn?pW:fW),q=n.enableHWA===!0,K=n.useWasm!==!1,z=l?l.length:n.length??NaN,X=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!kn&&!O,pe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===o2&&b===a2&&_===l2&&p&&v&&A&&up(p,document.baseURI)&&up(v,document.baseURI)&&up(A,document.baseURI)),Ce=null;zG(h);const me={canvasFactory:new $({ownerDocument:j,enableHWA:q}),filterFactory:new U({docId:t,ownerDocument:j}),cMapReaderFactory:pe?null:new g({baseUrl:p,isCompressed:y}),standardFontDataFactory:pe?null:new b({baseUrl:v}),wasmFactory:pe?null:new _({baseUrl:A})};d||(d=Ef.create({verbosity:h,port:Ks.workerPort}),e._worker=d);const Ps={docId:t,apiVersion:"5.4.296",data:r,password:a,disableAutoFetch:B,rangeChunkSize:u,length:z,docBaseUrl:f,enableXfa:V,evaluatorOptions:{maxImageSize:k,disableFontFace:O,ignoreErrors:T,isEvalSupported:P,isOffscreenCanvasSupported:R,isImageDecoderSupported:L,canvasMaxAreaInBytes:I,fontExtraProperties:D,useSystemFonts:X,useWasm:K,useWorkerFetch:pe,cMapUrl:p,iccUrl:S,standardFontDataUrl:v,wasmUrl:A}},yt={ownerDocument:j,pdfBug:F,styleElement:Ce,loadingParams:{disableAutoFetch:B,enableXfa:V}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const xe=d.messageHandler.sendWithPromise("GetDocRequest",Ps,r?[r.buffer]:null);let H;if(l)H=new jW(l,{disableRange:N,disableStream:M});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const te=up(s)?$W:kn?YW:GW;H=new te({url:s,length:z,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:N,disableStream:M})}return xe.then(te=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ne=new gp(t,te,d.port),Y=new sq(ne,e,H,yt,me,q);e._transport=Y,ne.send("Ready",null)})}).catch(e._capability.reject),e}var Gw;const Ww=class Ww{constructor(){G(this,"_capability",Promise.withResolvers());G(this,"_transport",null);G(this,"_worker",null);G(this,"docId",`d${kt(Ww,Gw)._++}`);G(this,"destroyed",!1);G(this,"onPassword",null);G(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Gw=new WeakMap,w(Ww,Gw,0);let iE=Ww;var mc,Vg,zg,Hg,Gg,B2;let UT=(B2=class{constructor(e,t,s=!1,r=null){w(this,mc,Promise.withResolvers());w(this,Vg,[]);w(this,zg,[]);w(this,Hg,[]);w(this,Gg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){c(this,Gg).push(e)}addProgressListener(e){c(this,Hg).push(e)}addProgressiveReadListener(e){c(this,zg).push(e)}addProgressiveDoneListener(e){c(this,Vg).push(e)}onDataRange(e,t){for(const s of c(this,Gg))s(e,t)}onDataProgress(e,t){c(this,mc).promise.then(()=>{for(const s of c(this,Hg))s(e,t)})}onDataProgressiveRead(e){c(this,mc).promise.then(()=>{for(const t of c(this,zg))t(e)})}onDataProgressiveDone(){c(this,mc).promise.then(()=>{for(const e of c(this,Vg))e()})}transportReady(){c(this,mc).resolve()}requestDataRange(e,t){Fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},mc=new WeakMap,Vg=new WeakMap,zg=new WeakMap,Hg=new WeakMap,Gg=new WeakMap,B2);class tq{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return de(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var $i,gc,Sp;class nq{constructor(e,t,s,r=!1){w(this,gc);w(this,$i,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new ZR:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new Xj,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new gv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return de(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=ri.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:p=!1,operationsFilter:y=null}){var L,I,O;(L=this._stats)==null||L.time("Overall");const g=this._transport.getRenderingIntent(r,i,h,f),{renderingIntent:S,cacheKey:v}=g;x(this,$i,!1),l||(l=this._transport.getOptionalContentConfig(S));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const A=!!(S&bs.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(g));const _=!!(this._pdfBug&&((O=globalThis.StepperManager)!=null&&O.enabled)),T=!this.recordedBBoxes&&(p||_),k=D=>{var V,j;if(b.renderTasks.delete(P),T){const N=(V=P.gfx)==null?void 0:V.dependencyTracker.take();N&&(P.stepper&&P.stepper.setOperatorBBoxes(N,P.gfx.dependencyTracker.takeDebugMetadata()),p&&(this.recordedBBoxes=N))}A&&x(this,$i,!0),E(this,gc,Sp).call(this),D?(P.capability.reject(D),this._abortOperatorList({intentState:b,reason:D instanceof Error?D:new Error(D)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(j=globalThis.Stats)!=null&&j.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new oE({callback:k,params:{canvas:t,canvasContext:e,dependencyTracker:T?new wW(t,b.operatorList.length,_):null,viewport:s,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(b.renderTasks||(b.renderTasks=new Set)).add(P);const R=P.task;return Promise.all([b.displayReadyCapability.promise,l]).then(([D,V])=>{var j;if(this.destroyed){k();return}if((j=this._stats)==null||j.time("Rendering"),!(V.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:D,optionalContentConfig:V}),P.operatorListChanged()}).catch(k),R}getOperatorList({intent:e="display",annotationMode:t=ri.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>bm.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:l,done:u}){if(u){s(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),x(this,$i,!1),Promise.all(e)}cleanup(e=!1){x(this,$i,!0);const t=E(this,gc,Sp).call(this);return e&&t&&this._stats&&(this._stats=new ZR),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&E(this,gc,Sp).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=l;const d=()=>{l.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();E(this,gc,Sp).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof k1){let r=eq;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new bo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}$i=new WeakMap,gc=new WeakSet,Sp=function(){if(!c(this,$i)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,$i,!1),!0};var ca,ur,Ui,yc,qw,vc,bc,fh,$0,Kw,eO,Xw,tO,wc,_p,ph,U0;const Ye=class Ye{constructor({name:e=null,port:t=null,verbosity:s=HG()}={}){w(this,fh);w(this,Kw);w(this,Xw);w(this,wc);w(this,ca,Promise.withResolvers());w(this,ur,null);w(this,Ui,null);w(this,yc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(c(Ye,bc).has(t))throw new Error("Cannot use more than one PDFWorker per port.");c(Ye,bc).set(t,this),E(this,Kw,eO).call(this,t)}else E(this,Xw,tO).call(this)}get promise(){return c(this,ca).promise}get port(){return c(this,Ui)}get messageHandler(){return c(this,ur)}destroy(){var e,t;this.destroyed=!0,(e=c(this,yc))==null||e.terminate(),x(this,yc,null),c(Ye,bc).delete(c(this,Ui)),x(this,Ui,null),(t=c(this,ur))==null||t.destroy(),x(this,ur,null)}static create(e){const t=c(this,bc).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ye(e)}static get workerSrc(){if(Ks.workerSrc)return Ks.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return de(this,"_setupFakeWorkerGlobal",(async()=>c(this,ph,U0)?c(this,ph,U0):(await il(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};ca=new WeakMap,ur=new WeakMap,Ui=new WeakMap,yc=new WeakMap,qw=new WeakMap,vc=new WeakMap,bc=new WeakMap,fh=new WeakSet,$0=function(){c(this,ca).resolve(),c(this,ur).send("configure",{verbosity:this.verbosity})},Kw=new WeakSet,eO=function(e){x(this,Ui,e),x(this,ur,new gp("main","worker",e)),c(this,ur).on("ready",()=>{}),E(this,fh,$0).call(this)},Xw=new WeakSet,tO=function(){if(c(Ye,vc)||c(Ye,ph,U0)){E(this,wc,_p).call(this);return}let{workerSrc:e}=Ye;try{Ye._isSameOrigin(window.location,e)||(e=Ye._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new gp("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?c(this,ca).reject(new Error("Worker was destroyed")):E(this,wc,_p).call(this)},i=new AbortController;t.addEventListener("error",()=>{c(this,yc)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}x(this,ur,s),x(this,Ui,t),x(this,yc,t),E(this,fh,$0).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{E(this,wc,_p).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{T1("The worker has been disabled.")}E(this,wc,_p).call(this)},wc=new WeakSet,_p=function(){c(Ye,vc)||(ae("Setting up fake worker."),x(Ye,vc,!0)),Ye._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){c(this,ca).reject(new Error("Worker was destroyed"));return}const t=new dW;x(this,Ui,t);const s=`fake${kt(Ye,qw)._++}`,r=new gp(s+"_worker",s,t);e.setup(r,t),x(this,ur,new gp(s,s+"_worker",t)),E(this,fh,$0).call(this)}).catch(e=>{c(this,ca).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ph=new WeakSet,U0=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},w(Ye,ph),w(Ye,qw,0),w(Ye,vc,!1),w(Ye,bc,new WeakMap),kn&&(x(Ye,vc,!0),Ks.workerSrc||(Ks.workerSrc="./pdf.worker.mjs")),Ye._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},Ye._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Ye.fromPort=e=>{if(ZG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ye.create(e)};let Ef=Ye;var Vi,Wr,mh,gh,zi,xc,Ep;class sq{constructor(e,t,s,r,i,o){w(this,xc);w(this,Vi,new Map);w(this,Wr,new Map);w(this,mh,new Map);w(this,gh,new Map);w(this,zi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Xj,this.fontLoader=new oW({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return de(this,"annotationStorage",new OT)}getRenderingIntent(e,t=ri.ENABLE,s=null,r=!1,i=!1){let o=bs.DISPLAY,a=z_;switch(e){case"any":o=bs.ANY;break;case"display":break;case"print":o=bs.PRINT;break;default:ae(`getRenderingIntent - invalid intent: ${e}`)}const l=o&bs.PRINT&&s instanceof Mj?s:this.annotationStorage;switch(t){case ri.DISABLE:o+=bs.ANNOTATIONS_DISABLE;break;case ri.ENABLE:break;case ri.ENABLE_FORMS:o+=bs.ANNOTATIONS_FORMS;break;case ri.ENABLE_STORAGE:o+=bs.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ae(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=bs.IS_EDITING),i&&(o+=bs.OPLIST);const{ids:u,hash:d}=l.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=c(this,zi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Wr).values())e.push(r._destroy());c(this,Wr).clear(),c(this,mh).clear(),c(this,gh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Vi).clear(),this.filterFactory.destroy(),Am.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new bo("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{be(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}be(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{be(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}be(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new tq(s,this))}),e.on("DocException",s=>{t._capability.reject(On(s))}),e.on("PasswordRequest",s=>{x(this,zi,Promise.withResolvers());try{if(!t.onPassword)throw On(s);const r=i=>{i instanceof Error?c(this,zi).reject(i):c(this,zi).resolve({password:i})};t.onPassword(r,s.code)}catch(r){c(this,zi).reject(r)}return c(this,zi).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;c(this,Wr).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const h=i.error;ae(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const a=new eE(i),l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new aW(a,l,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:d}=i;be(d,"The imageRef must be defined.");for(const h of c(this,Wr).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var l;if(this.destroyed)return;const a=c(this,Wr).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=c(this,mh).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&c(this,gh).set(i.refStr,e);const o=new nq(t,i,this,this._params.pdfBug);return c(this,Wr).set(t,o),o});return c(this,mh).set(t,r),r}getPageIndex(e){return H_(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return E(this,xc,Ep).call(this,"GetFieldObjects")}hasJSActions(){return E(this,xc,Ep).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return E(this,xc,Ep).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return E(this,xc,Ep).call(this,"GetOptionalContentConfig").then(t=>new IW(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Vi).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new LW(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return c(this,Vi).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Wr).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Vi).clear(),this.filterFactory.destroy(!0),Am.cleanup()}}cachedPageNumber(e){if(!H_(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,gh).get(t)??null}}Vi=new WeakMap,Wr=new WeakMap,mh=new WeakMap,gh=new WeakMap,zi=new WeakMap,xc=new WeakSet,Ep=function(e,t=null){const s=c(this,Vi).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Vi).set(e,r),r};var ua;class rq{constructor(e){w(this,ua,null);G(this,"onContinue",null);G(this,"onError",null);x(this,ua,e)}get promise(){return c(this,ua).capability.promise}cancel(e=0){c(this,ua).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,ua).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,ua);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ua=new WeakMap;var da,Ac;const wl=class wl{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:p=!1,operationsFilter:y=null}){w(this,da,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new rq(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=p,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,u;if(this.cancelled)return;if(this._canvas){if(c(wl,Ac).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(wl,Ac).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new dd(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),c(this,da)&&(window.cancelAnimationFrame(c(this,da)),x(this,da,null)),c(wl,Ac).delete(this._canvas),e||(e=new k1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,da,window.requestAnimationFrame(()=>{x(this,da,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(wl,Ac).delete(this._canvas),this.callback())))}};da=new WeakMap,Ac=new WeakMap,w(wl,Ac,new WeakSet);let oE=wl;const VT="5.4.296",nO="f56dc8601";var as,Sc,yh,Mt,Wg,vh,Hi,qg,ha,dr,Kg,Xg,aE,Yg,lE,Qg,cE,Gi,pl,Yw,sO,qr,Po;const Fn=class Fn{constructor({editor:e=null,uiManager:t=null}){w(this,Xg);w(this,Yg);w(this,Qg);w(this,Gi);w(this,Yw);w(this,qr);w(this,as,null);w(this,Sc,null);w(this,yh,void 0);w(this,Mt,null);w(this,Wg,!1);w(this,vh,!1);w(this,Hi,null);w(this,qg,void 0);w(this,ha,null);w(this,dr,null);var s,r;e?(x(this,vh,!1),x(this,Hi,e)):x(this,vh,!0),x(this,dr,(e==null?void 0:e._uiManager)||t),x(this,qg,c(this,dr)._eventBus),x(this,yh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=c(this,dr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),c(Fn,Kg)||x(Fn,Kg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return de(this,"_keyboardManager",new vv([[["Escape","mac+Escape"],Fn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Fn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Fn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Fn.prototype._moveToPrevious],[["Home","mac+Home"],Fn.prototype._moveToBeginning],[["End","mac+End"],Fn.prototype._moveToEnd]]))}renderButton(){const e=x(this,as,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",c(this,Hi)&&(e.ariaControls=`${c(this,Hi).id}_colorpicker_dropdown`);const t=c(this,dr)._signal;e.addEventListener("click",E(this,Gi,pl).bind(this),{signal:t}),e.addEventListener("keydown",E(this,Qg,cE).bind(this),{signal:t});const s=x(this,Sc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=c(this,yh),e.append(s),e}renderMainDropdown(){const e=x(this,Mt,E(this,Xg,aE).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===c(this,as)){E(this,Gi,pl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&E(this,Yg,lE).call(this,t,e)}_moveToNext(e){var t,s;if(!c(this,qr,Po)){E(this,Gi,pl).call(this,e);return}if(e.target===c(this,as)){(t=c(this,Mt).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=c(this,Mt))==null?void 0:t.firstChild)||e.target===c(this,as)){c(this,qr,Po)&&this._hideDropdownFromKeyboard();return}c(this,qr,Po)||E(this,Gi,pl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!c(this,qr,Po)){E(this,Gi,pl).call(this,e);return}(t=c(this,Mt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,qr,Po)){E(this,Gi,pl).call(this,e);return}(t=c(this,Mt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,Mt))==null||e.classList.add("hidden"),c(this,as).ariaExpanded="false",(t=c(this,ha))==null||t.abort(),x(this,ha,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,vh)){if(!c(this,qr,Po)){(e=c(this,Hi))==null||e.unselect();return}this.hideDropdown(),c(this,as).focus({preventScroll:!0,focusVisible:c(this,Wg)})}}updateColor(e){if(c(this,Sc)&&(c(this,Sc).style.backgroundColor=e),!c(this,Mt))return;const t=c(this,dr).highlightColors.values();for(const s of c(this,Mt).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=c(this,as))==null||e.remove(),x(this,as,null),x(this,Sc,null),(t=c(this,Mt))==null||t.remove(),x(this,Mt,null)}};as=new WeakMap,Sc=new WeakMap,yh=new WeakMap,Mt=new WeakMap,Wg=new WeakMap,vh=new WeakMap,Hi=new WeakMap,qg=new WeakMap,ha=new WeakMap,dr=new WeakMap,Kg=new WeakMap,Xg=new WeakSet,aE=function(){const e=document.createElement("div"),t=c(this,dr)._signal;e.addEventListener("contextmenu",Cs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),c(this,Hi)&&(e.id=`${c(this,Hi).id}_colorpicker_dropdown`);for(const[s,r]of c(this,dr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",c(Fn,Kg)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===c(this,yh),i.addEventListener("click",E(this,Yg,lE).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",E(this,Qg,cE).bind(this),{signal:t}),e},Yg=new WeakSet,lE=function(e,t){t.stopPropagation(),c(this,qg).dispatch("switchannotationeditorparams",{source:this,type:ve.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},Qg=new WeakSet,cE=function(e){Fn._keyboardManager.exec(this,e)},Gi=new WeakSet,pl=function(e){if(c(this,qr,Po)){this.hideDropdown();return}if(x(this,Wg,e.detail===0),c(this,ha)||(x(this,ha,new AbortController),window.addEventListener("pointerdown",E(this,Yw,sO).bind(this),{signal:c(this,dr).combinedSignal(c(this,ha))})),c(this,as).ariaExpanded="true",c(this,Mt)){c(this,Mt).classList.remove("hidden");return}const t=x(this,Mt,E(this,Xg,aE).call(this));c(this,as).append(t)},Yw=new WeakSet,sO=function(e){var t;(t=c(this,Mt))!=null&&t.contains(e.target)||this.hideDropdown()},qr=new WeakSet,Po=function(){return c(this,Mt)&&!c(this,Mt).classList.contains("hidden")},w(Fn,Kg,null);let Sm=Fn;var Kr,Jg,bh,Zg;const xl=class xl{constructor(e){w(this,Kr,null);w(this,Jg,null);w(this,bh,null);x(this,Jg,e),x(this,bh,e._uiManager),c(xl,Zg)||x(xl,Zg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(c(this,Kr))return c(this,Kr);const{editorType:e,colorType:t,colorValue:s}=c(this,Jg),r=x(this,Kr,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",c(xl,Zg)[e]),r.addEventListener("input",()=>{c(this,bh).updateParams(t,r.value)},{signal:c(this,bh)._signal}),r}update(e){c(this,Kr)&&(c(this,Kr).value=e)}destroy(){var e;(e=c(this,Kr))==null||e.remove(),x(this,Kr,null)}hideDropdown(){}};Kr=new WeakMap,Jg=new WeakMap,bh=new WeakMap,Zg=new WeakMap,w(xl,Zg,null);let Xb=xl;function x2(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function ep(n){return Math.max(0,Math.min(255,255*n))}class A2{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ep(e),[e,e,e]}static G_HTML([e]){const t=x2(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(ep)}static RGB_HTML(e){return`#${e.map(x2).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[ep(1-Math.min(1,e+r)),ep(1-Math.min(1,s+r)),ep(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class iq{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Fe("Abstract method `_createSVG` called.")}}class _m extends iq{_createSVG(e){return document.createElementNS(pi,e)}}const oq=9,du=new WeakSet,aq=new Date().getTimezoneOffset()*60*1e3;class S2{static create(e){switch(e.data.annotationType){case vt.LINK:return new zT(e);case vt.TEXT:return new cq(e);case vt.WIDGET:switch(e.data.fieldType){case"Tx":return new uq(e);case"Btn":return e.data.radioButton?new oO(e):e.data.checkBox?new hq(e):new fq(e);case"Ch":return new pq(e);case"Sig":return new dq(e)}return new wu(e);case vt.POPUP:return new dE(e);case vt.FREETEXT:return new dO(e);case vt.LINE:return new gq(e);case vt.SQUARE:return new yq(e);case vt.CIRCLE:return new vq(e);case vt.POLYLINE:return new hO(e);case vt.CARET:return new wq(e);case vt.INK:return new HT(e);case vt.POLYGON:return new bq(e);case vt.HIGHLIGHT:return new fO(e);case vt.UNDERLINE:return new xq(e);case vt.SQUIGGLY:return new Aq(e);case vt.STRIKEOUT:return new Sq(e);case vt.STAMP:return new pO(e);case vt.FILEATTACHMENT:return new _q(e);default:return new ct(e)}}}var _c,wh,Vs,ey,uE;const rk=class rk{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){w(this,ey);w(this,_c,null);w(this,wh,!1);w(this,Vs,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rk._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>o?(o=t[l+1],i=t[l+2]):t[l+1]===o&&(i=Math.max(i,t[l+2]));return[i,o]}if((s==null?void 0:s.length)>=1){for(const l of s)for(let u=0,d=l.length;u<d;u+=2)l[u+1]>o?(o=l[u+1],i=l[u]):l[u+1]===o&&(i=Math.max(i,l[u]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${ym}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${ym}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=c(this,Vs))==null?void 0:e.popup)||this.popup)==null||t.remove(),x(this,Vs,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(c(this,_c)||x(this,_c,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&E(this,ey,uE).call(this,t);let r=((i=c(this,Vs))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=c(this,Vs).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),x(this,Vs,null),this.popup=null))}resetEdited(){var e;c(this,_c)&&(E(this,ey,uE).call(this,c(this,_c).rect),(e=c(this,Vs))==null||e.popup.resetEdited(),x(this,_c,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof wu)&&!(this instanceof zT)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof dE){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(g>0||S>0){const b=`calc(${g}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof oO){const b=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case Pu.SOLID:o.borderStyle="solid";break;case Pu.DASHED:o.borderStyle="dashed";break;case Pu.BEVELED:ae("Unimplemented border style: beveled");break;case Pu.INSET:ae("Unimplemented border style: inset");break;case Pu.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(x(this,wh,!0),o.borderColor=Q.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=Q.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:p}=r.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-p)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/d}%`,o.height=`${100*l/h}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=A2[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:A2[`${o}_rgb`](a)})};return de(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,S,v,b]=e.subarray(2,6);if(r===g&&i===S&&t===v&&s===b)return}const{style:o}=this.container;let a;if(c(this,wh)){const{borderColor:g,borderWidth:S}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const l=r-t,u=i-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const p=d.createElement("clipPath"),y=`clippath_${this.data.id}`;p.setAttribute("id",y),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let g=2,S=e.length;g<S;g+=8){const v=e[g],b=e[g+1],A=e[g+2],_=e[g+3],T=d.createElement("rect"),k=(A-t)/l,P=(i-b)/u,R=(v-A)/l,L=(b-_)/u;T.setAttribute("x",k),T.setAttribute("y",P),T.setAttribute("width",R),T.setAttribute("height",L),p.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${P}" width="${R}" height="${L}"/>`)}c(this,wh)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=x(this,Vs,new dE({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(c(this,Vs)||this.popup||this.data.popupRef)}get extraPopupElement(){return c(this,Vs)}render(){Fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!du.has(u)){ae(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:l,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&du.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};_c=new WeakMap,wh=new WeakMap,Vs=new WeakMap,ey=new WeakSet,uE=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+l)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let ct=rk;class lq extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Wi,ml,Qw,rO,Jw,iO;class zT extends ct{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,Wi);w(this,Qw);w(this,Jw);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(E(this,Qw,rO).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(E(this,Jw,iO).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&E(this,Wi,ml).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),E(this,Wi,ml).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),E(this,Wi,ml).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),E(this,Wi,ml).call(this),!this._fieldObjects){ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:i,refs:o,include:a}=s,l=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const p of i){const y=this._fieldObjects[p]||[];for(const{id:g}of y)f.add(g)}for(const p of Object.values(this._fieldObjects))for(const y of p)f.has(y.id)===a&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,d=[];for(const f of l){const{id:p}=f;switch(d.push(p),f.type){case"text":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(p,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(p,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${p}"]`);if(y){if(!du.has(y)){ae(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Wi=new WeakSet,ml=function(){this.container.setAttribute("data-internal-link","")},Qw=new WeakSet,rO=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,i),!1},E(this,Wi,ml).call(this)},Jw=new WeakSet,iO=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),E(this,Wi,ml).call(this)};class cq extends ct{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class wu extends ct{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return qt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[l,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Q.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||oq,i=e.style;let o;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(IA*r))||1,h=u/d;o=Math.min(r,l(h/IA))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,l(u/IA))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=Q.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class uq extends wu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),du.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:p}=this.data,y=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),l&&(s.maxLength=l),s.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(s,"value",S.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",S=>{const v=this.data.defaultFieldValue??"";s.value=d.userValue=v,d.formattedValue=null});let g=S=>{const{formattedValue:v}=d;v!=null&&(S.target.value=v),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var A;if(d.focused)return;const{target:b}=v;if(y&&(b.type=f,p&&(b.step=p)),d.userValue){const _=d.userValue;if(y)if(f==="time"){const T=new Date(_),k=[T.getHours(),T.getMinutes(),T.getSeconds()];b.value=k.map(P=>P.toString().padStart(2,"0")).join(":")}else b.value=new Date(_-aq).toISOString().split(f==="date"?"T":".",1)[0];else b.value=_}d.lastCommittedValue=b.value,d.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(A){d.userValue=A.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),A.target.value=d.userValue},formattedValue(A){const{formattedValue:_}=A.detail;d.formattedValue=_,_!=null&&A.target!==document.activeElement&&(A.target.value=_);const T={formattedValue:_};y&&(T.value=_),e.setValue(t,T)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var P;const{charLimit:_}=A.detail,{target:T}=A;if(_===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",_);let k=d.userValue;!k||k.length<=_||(k=k.slice(0,_),T.value=d.userValue=k,e.setValue(t,{value:k}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),s.addEventListener("keydown",v=>{var _;d.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(d.commitKey=3),b===-1)return;const{value:A}=v.target;d.lastCommittedValue!==A&&(d.lastCommittedValue=A,d.userValue=A,(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const S=g;g=null,s.addEventListener("blur",v=>{var _,T;if(!d.focused||!v.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(d.focused=!1);const{target:b}=v;let{value:A}=b;if(y){if(A&&f==="time"){const k=A.split(":").map(P=>parseInt(P,10));A=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),b.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();b.type="text"}d.userValue=A,d.lastCommittedValue!==A&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),S(v)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",v=>{var L;d.lastCommittedValue=null;const{data:b,target:A}=v,{value:_,selectionStart:T,selectionEnd:k}=A;let P=T,R=k;switch(v.inputType){case"deleteWordBackward":{const I=_.substring(0,T).match(/\w*[^\w]*$/);I&&(P-=I[0].length);break}case"deleteWordForward":{const I=_.substring(T).match(/^[^\w]*\w*/);I&&(R+=I[0].length);break}case"deleteContentBackward":T===k&&(P-=1);break;case"deleteContentForward":T===k&&(R+=1);break}v.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,change:b||"",willCommit:!1,selStart:P,selEnd:R}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class dq extends wu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class hq extends wu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return du.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s)){const d=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(s,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class oO extends wu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(du.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const u of this._getElementsByName(a,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:l})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===s;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class fq extends zT{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class pq extends wu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");du.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),r.append(h)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),o=()=>{d.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:p}=r;return p?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const p=f.detail.value,y=new Set(Array.isArray(p)?p:[p]);for(const g of r.options)g.selected=y.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){r.multiple=!0},remove(f){const p=r.options,y=f.detail.remove;p[y].selected=!1,r.remove(y),p.length>0&&Array.prototype.findIndex.call(p,S=>S.selected)===-1&&(p[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:p,displayValue:y,exportValue:g}=f.detail.insert,S=r.children[p],v=document.createElement("option");v.textContent=y,v.value=g,S?S.before(v):r.append(v),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},items(f){const{items:p}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of p){const{displayValue:g,exportValue:S}=y,v=document.createElement("option");v.textContent=g,v.value=S,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),l=a(!1)},indices(f){const p=new Set(f.detail.indices);for(const y of f.target.options)y.selected=p.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{var p;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var ty,hE;class dE extends ct{constructor(t){const{data:s,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&ct._hasPopupData(s)});w(this,ty);if(this.elements=r,o&&ct._hasPopupData(s)){const a=this.popup=E(this,ty,hE).call(this);for(const l of r)l.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=E(this,ty,hE).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${DT}${i}`).join(",")),this.container}}ty=new WeakSet,hE=function(){return new mq({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var ls,fa,Zw,ex,xh,Ah,pt,Xr,pa,Ec,Sh,_h,Yr,cs,qi,Ki,Ft,Xi,ma,ny,Yi,Eh,Cc,ga,fn,ya,Ch,V0,sy,fE,ry,pE,iy,mE,Th,z0,oy,gE,tx,aO,nx,lO,sx,cO,rx,uO,kh,H0,Ph,G0,ay,yE;class mq{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:l,rect:u,parentRect:d,open:h,commentManager:f=null}){w(this,Ch);w(this,sy);w(this,ry);w(this,iy);w(this,Th);w(this,oy);w(this,tx);w(this,nx);w(this,sx);w(this,rx);w(this,kh);w(this,Ph);w(this,ay);w(this,ls,null);w(this,fa,E(this,sx,cO).bind(this));w(this,Zw,E(this,ay,yE).bind(this));w(this,ex,E(this,Ph,G0).bind(this));w(this,xh,E(this,kh,H0).bind(this));w(this,Ah,null);w(this,pt,null);w(this,Xr,null);w(this,pa,null);w(this,Ec,null);w(this,Sh,null);w(this,_h,null);w(this,Yr,!1);w(this,cs,null);w(this,qi,null);w(this,Ki,null);w(this,Ft,null);w(this,Xi,null);w(this,ma,null);w(this,ny,null);w(this,Yi,null);w(this,Eh,null);w(this,Cc,null);w(this,ga,!1);w(this,fn,null);w(this,ya,null);x(this,pt,e),x(this,Eh,r),x(this,Xr,o),x(this,Yi,a),x(this,Sh,l),x(this,Ah,t),x(this,ny,u),x(this,_h,d),x(this,Ec,s),x(this,ls,f),x(this,fn,s[0]),x(this,pa,wm.toDateObject(i)),this.trigger=s.flatMap(p=>p.getElementsToTriggerPopup()),f?this.renderCommentButton():(E(this,Ch,V0).call(this),c(this,pt).hidden=!0,h&&E(this,kh,H0).call(this))}renderCommentButton(){if(c(this,Ft)||(c(this,Xi)||E(this,sy,fE).call(this),!c(this,Xi)))return;const{signal:e}=x(this,qi,new AbortController),t=!!c(this,fn).extraPopupElement,s=()=>{c(this,ls).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{c(this,ls).toggleCommentPopup(this,!1,!0,!t)},i=()=>{c(this,ls).toggleCommentPopup(this,!1,!1)};if(t){x(this,Ft,c(this,fn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",c(this,fa),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=x(this,Ft,document.createElement("button"));o.className="annotationCommentButton";const a=c(this,fn).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),E(this,iy,mE).call(this),E(this,ry,pE).call(this),o.addEventListener("keydown",c(this,fa),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=c(this,fn).commentData;return e?c(this,Sh)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=c(this,Ft))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=c(this,fn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return c(this,Ft)}get comment(){return c(this,ya)||x(this,ya,c(this,fn).commentText),c(this,ya)}set comment(e){e!==this.comment&&(c(this,fn).commentText=x(this,ya,e))}get parentBoundingClientRect(){return c(this,fn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){c(this,Ft)&&(c(this,Ft).classList.toggle("selected",e),c(this,Ft).ariaExpanded=t)}setSelectedCommentButton(e){c(this,Ft).classList.toggle("selected",e)}get commentPopupPosition(){if(c(this,ma))return c(this,ma);const{x:e,y:t,height:s}=c(this,Ft).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=c(this,fn).layer.getBoundingClientRect();return[(e-r)/o,(t+s-i)/a]}set commentPopupPosition(e){x(this,ma,e)}hasDefaultPopupPosition(){return c(this,ma)===null}get commentButtonPosition(){return c(this,Xi)}get commentButtonWidth(){return c(this,Ft).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=c(this,ma)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:i,y:o,width:a,height:l}=r;c(this,ls).showDialog(null,this,i+t*a,o+s*l,{...e,parentDimensions:r})}render(){var s,r;if(c(this,cs))return;const e=x(this,cs,document.createElement("div"));if(e.className="popup",c(this,Ah)){const i=e.style.outlineColor=Q.makeHexColor(...c(this,Ah));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=c(this,Eh))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=c(this,Eh)}if(e.append(t),c(this,pa)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,pa).valueOf()})),i.dateTime=c(this,pa).toISOString(),t.append(i)}jT({html:c(this,Th,z0)||c(this,Xr).str,dir:(r=c(this,Xr))==null?void 0:r.dir,className:"popupContent"},e),c(this,pt).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(c(this,ls)){s?(this.remove(),x(this,ya,null)):t&&(t.deleted?this.remove():(E(this,iy,mE).call(this),x(this,ya,t.text))),e&&(x(this,Xi,null),E(this,sy,fE).call(this),E(this,ry,pE).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}E(this,Ch,V0).call(this),c(this,Cc)||x(this,Cc,{contentsObj:c(this,Xr),richText:c(this,Yi)}),e&&x(this,Ki,null),t&&t.text&&(x(this,Yi,E(this,nx,lO).call(this,t.text)),x(this,pa,wm.toDateObject(t.date)),x(this,Xr,null)),(r=c(this,cs))==null||r.remove(),x(this,cs,null)}resetEdited(){var e;c(this,Cc)&&({contentsObj:kt(this,Xr)._,richText:kt(this,Yi)._}=c(this,Cc),x(this,Cc,null),(e=c(this,cs))==null||e.remove(),x(this,cs,null),x(this,Ki,null))}remove(){var e,t,s;if((e=c(this,qi))==null||e.abort(),x(this,qi,null),(t=c(this,cs))==null||t.remove(),x(this,cs,null),x(this,ga,!1),x(this,Yr,!1),(s=c(this,Ft))==null||s.remove(),x(this,Ft,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){x(this,ga,this.isVisible),c(this,ga)&&(c(this,pt).hidden=!0)}maybeShow(){c(this,ls)||(E(this,Ch,V0).call(this),c(this,ga)&&(c(this,cs)||E(this,Ph,G0).call(this),x(this,ga,!1),c(this,pt).hidden=!1))}get isVisible(){return c(this,ls)?!1:c(this,pt).hidden===!1}}ls=new WeakMap,fa=new WeakMap,Zw=new WeakMap,ex=new WeakMap,xh=new WeakMap,Ah=new WeakMap,pt=new WeakMap,Xr=new WeakMap,pa=new WeakMap,Ec=new WeakMap,Sh=new WeakMap,_h=new WeakMap,Yr=new WeakMap,cs=new WeakMap,qi=new WeakMap,Ki=new WeakMap,Ft=new WeakMap,Xi=new WeakMap,ma=new WeakMap,ny=new WeakMap,Yi=new WeakMap,Eh=new WeakMap,Cc=new WeakMap,ga=new WeakMap,fn=new WeakMap,ya=new WeakMap,Ch=new WeakSet,V0=function(){var t;if(c(this,qi))return;x(this,qi,new AbortController);const{signal:e}=c(this,qi);for(const s of this.trigger)s.addEventListener("click",c(this,xh),{signal:e}),s.addEventListener("pointerenter",c(this,ex),{signal:e}),s.addEventListener("pointerleave",c(this,Zw),{signal:e}),s.classList.add("popupTriggerArea");for(const s of c(this,Ec))(t=s.container)==null||t.addEventListener("keydown",c(this,fa),{signal:e})},sy=new WeakSet,fE=function(){const e=c(this,Ec).find(t=>t.hasCommentButton);e&&x(this,Xi,e._normalizePoint(e.commentButtonPosition))},ry=new WeakSet,pE=function(){if(c(this,fn).extraPopupElement&&!c(this,fn).editor)return;this.renderCommentButton();const[e,t]=c(this,Xi),{style:s}=c(this,Ft);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},iy=new WeakSet,mE=function(){c(this,fn).extraPopupElement||(this.renderCommentButton(),c(this,Ft).style.backgroundColor=this.commentButtonColor||"")},Th=new WeakSet,z0=function(){const e=c(this,Yi),t=c(this,Xr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Yi).html||null},oy=new WeakSet,gE=function(){var e,t,s;return((s=(t=(e=c(this,Th,z0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},tx=new WeakSet,aO=function(){var e,t,s;return((s=(t=(e=c(this,Th,z0))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},nx=new WeakSet,lO=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,tx,aO),fontSize:c(this,oy,gE)?`calc(${c(this,oy,gE)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},sx=new WeakSet,cO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Yr))&&E(this,kh,H0).call(this)},rx=new WeakSet,uO=function(){if(c(this,Ki)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=c(this,Sh);let o=!!c(this,_h),a=o?c(this,_h):c(this,ny);for(const y of c(this,Ec))if(!a||Q.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=Q.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=5,d=o?a[2]-a[0]+u:0,h=l[0]+d,f=l[1];x(this,Ki,[100*(h-r)/t,100*(f-i)/s]);const{style:p}=c(this,pt);p.left=`${c(this,Ki)[0]}%`,p.top=`${c(this,Ki)[1]}%`},kh=new WeakSet,H0=function(){if(c(this,ls)){c(this,ls).toggleCommentPopup(this,!1);return}x(this,Yr,!c(this,Yr)),c(this,Yr)?(E(this,Ph,G0).call(this),c(this,pt).addEventListener("click",c(this,xh)),c(this,pt).addEventListener("keydown",c(this,fa))):(E(this,ay,yE).call(this),c(this,pt).removeEventListener("click",c(this,xh)),c(this,pt).removeEventListener("keydown",c(this,fa)))},Ph=new WeakSet,G0=function(){c(this,cs)||this.render(),this.isVisible?c(this,Yr)&&c(this,pt).classList.add("focused"):(E(this,rx,uO).call(this),c(this,pt).hidden=!1,c(this,pt).style.zIndex=parseInt(c(this,pt).style.zIndex)+1e3)},ay=new WeakSet,yE=function(){c(this,pt).classList.remove("focused"),!(c(this,Yr)||!this.isVisible)&&(c(this,pt).hidden=!0,c(this,pt).style.zIndex=parseInt(c(this,pt).style.zIndex)-1e3)};class dO extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=oe.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ly;class gq extends ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,ly,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=x(this,ly,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,ly)}addHighlightArea(){this.container.classList.add("highlightArea")}}ly=new WeakMap;var cy;class yq extends ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,cy,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=x(this,cy,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,cy)}addHighlightArea(){this.container.classList.add("highlightArea")}}cy=new WeakMap;var uy;class vq extends ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,uy,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=x(this,uy,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,uy)}addHighlightArea(){this.container.classList.add("highlightArea")}}uy=new WeakMap;var dy;class hO extends ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,dy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const l=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=s.length;h<f;h+=2){const p=s[h]-t[0],y=t[3]-s[h+1];u.push(`${p},${y}`)}u=u.join(" ");const d=x(this,dy,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,dy)}addHighlightArea(){this.container.classList.add("highlightArea")}}dy=new WeakMap;class bq extends hO{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class wq extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var hy,Tc,fy,vE;class HT extends ct{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});w(this,fy);w(this,hy,null);w(this,Tc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?oe.HIGHLIGHT:oe.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:l,height:u}=E(this,fy,vE).call(this,s,t),d=this.svgFactory.create(l,u,!0),h=x(this,hy,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,p=r.length;f<p;f++){const y=this.svgFactory.createElement(this.svgElementName);c(this,Tc).push(y),y.setAttribute("points",r[f].join(",")),h.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=c(this,hy);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,l=c(this,Tc).length;a<l;a++)c(this,Tc)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:l,height:u}=E(this,fy,vE).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return c(this,Tc)}addHighlightArea(){this.container.classList.add("highlightArea")}}hy=new WeakMap,Tc=new WeakMap,fy=new WeakSet,vE=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class fO extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=oe.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class xq extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Aq extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Sq extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class pO extends ct{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=oe.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var py,my,bE;class _q extends ct{constructor(t){var r;super(t,{isRenderable:!0});w(this,my);w(this,py,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",E(this,my,bE).bind(this)),x(this,py,r);const{isMac:i}=qt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&E(this,my,bE).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,py)}addHighlightArea(){this.container.classList.add("highlightArea")}}py=new WeakMap,my=new WeakSet,bE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Rh,kc,Nh,va,gy,Pc,yy,wE,vy,xE,by;let GT=(by=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a,commentManager:l,linkService:u,annotationStorage:d}){w(this,yy);w(this,vy);w(this,Rh,null);w(this,kc,null);w(this,Nh,null);w(this,va,new Map);w(this,gy,null);w(this,Pc,null);this.div=e,x(this,Rh,t),x(this,kc,s),x(this,gy,a||null),x(this,Pc,u||null),x(this,Nh,d||new OT),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return c(this,va).size>0}async render(e){var o,a,l;const{annotations:t}=e,s=this.div;Ja(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:c(this,Pc),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new _m,annotationStorage:c(this,Nh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===vt.POPUP;if(d){const p=r.get(u.id);if(!p)continue;i.elements=p}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;i.data=u;const h=S2.create(i);if(!h.isRenderable)continue;if(!d&&u.popupRef){const p=r.get(u.popupRef);p?p.push(h):r.set(u.popupRef,[h])}const f=h.render();u.hidden&&(f.style.visibility="hidden"),await E(this,yy,wE).call(this,f,u.id,i.elements),(a=(o=h.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),h._isEditable&&(c(this,va).set(h.data.id,h),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(h))}E(this,vy,xE).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:c(this,Pc),svgFactory:new _m,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=by._defaultBorderStyle),t.data=s;const r=S2.create(t);if(!r.isRenderable)continue;const i=r.render();await E(this,yy,wE).call(this,i,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Ja(t,{rotation:e.rotation}),E(this,vy,xE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,va).values())}getEditableAnnotation(e){return c(this,va).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:s,rotation:r}=e,i=new lq({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:c(this,Pc),annotationStorage:c(this,Nh)}),o=i.render();return t.append(o),(a=c(this,Rh))==null||a.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return de(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Pu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Rh=new WeakMap,kc=new WeakMap,Nh=new WeakMap,va=new WeakMap,gy=new WeakMap,Pc=new WeakMap,yy=new WeakSet,wE=async function(e,t,s){var a,l;const r=e.firstChild||e,i=r.id=`${DT}${t}`,o=await((a=c(this,gy))==null?void 0:a.getAriaAttributes(i));if(o)for(const[u,d]of o)r.setAttribute(u,d);s?s.at(-1).container.after(e):(this.div.append(e),(l=c(this,Rh))==null||l.moveElementInDOM(this.div,e,r,!1))},vy=new WeakSet,xE=function(){var t;if(!c(this,kc))return;const e=this.div;for(const[s,r]of c(this,kc)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=c(this,va).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}c(this,kc).clear()},by);const a0=/\r\n?|\n/g;var us,wy,Rc,ds,ix,mO,ox,gO,ax,yO,Mh,W0,Lh,q0,Dh,K0,lx,vO,xy,SE,cx,bO;const $e=class $e extends ze{constructor(t){super({...t,name:"freeTextEditor"});w(this,ix);w(this,ox);w(this,ax);w(this,Mh);w(this,Dh);w(this,lx);w(this,cx);w(this,us,"");w(this,wy,`${this.id}-editor`);w(this,Rc,null);w(this,ds,void 0);G(this,"_colorPicker",null);this.color=t.color||$e._defaultColor||ze._defaultLineColor,x(this,ds,t.fontSize||$e._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=$e.prototype,s=o=>o.isEmpty(),r=Za.TRANSLATE_SMALL,i=Za.TRANSLATE_BIG;return de(this,"_keyboardManager",new vv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){ze.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case ve.FREETEXT_SIZE:$e._defaultFontSize=s;break;case ve.FREETEXT_COLOR:$e._defaultColor=s;break}}updateParams(t,s){switch(t){case ve.FREETEXT_SIZE:E(this,ix,mO).call(this,s);break;case ve.FREETEXT_COLOR:E(this,ox,gO).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ve.FREETEXT_SIZE,$e._defaultFontSize],[ve.FREETEXT_COLOR,$e._defaultColor||ze._defaultLineColor]]}get propertiesToUpdate(){return[[ve.FREETEXT_SIZE,c(this,ds)],[ve.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Xb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ve.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-$e._internalPadding*t,-($e._internalPadding+c(this,ds))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,Rc,new AbortController);const t=this._uiManager.combinedSignal(c(this,Rc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,wy)),this._isDraggable=!0,(t=c(this,Rc))==null||t.abort(),x(this,Rc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,us),s=x(this,us,E(this,ax,yO).call(this).trimEnd());if(t===s)return;const r=i=>{if(x(this,us,i),!i){this.remove();return}E(this,Dh,K0).call(this),this._uiManager.rebuild(this),E(this,Mh,W0).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),E(this,Mh,W0).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){$e._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,wy)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,ds)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,h]=this.pageDimensions,[f,p]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(a[0]-f)/d,g=s+this.height-(a[1]-p)/h;break;case 90:y=t+(a[0]-f)/d,g=s-(a[1]-p)/h,[l,u]=[u,-l];break;case 180:y=t-this.width+(a[0]-f)/d,g=s-(a[1]-p)/h,[l,u]=[-l,-u];break;case 270:y=t+(a[0]-f-this.height*h)/d,g=s+(a[1]-p-this.width*d)/h,[l,u]=[-u,l];break}this.setAt(y*i,g*o,l,u)}else this._moveAfterPaste(t,s);E(this,Dh,K0).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,S;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=E(y=$e,xy,SE).call(y,s.getData("text")||"").replaceAll(a0,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:u}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(a0,"")),v!==this.editorDiv){let b=d;for(const A of this.editorDiv.childNodes){if(A===v){b=h;continue}b.push(E(g=$e,Lh,q0).call(g,A))}}d.push(l.nodeValue.slice(0,u).replaceAll(a0,""))}else if(l===this.editorDiv){let v=d,b=0;for(const A of this.editorDiv.childNodes)b++===u&&(v=h),v.push(E(S=$e,Lh,q0).call(S,A))}x(this,us,`${d.join(`
`)}${i}${h.join(`
`)}`),E(this,Dh,K0).call(this);const f=new Range;let p=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(p<=b){f.setStart(v,p),f.setEnd(v,p);break}p-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=$e._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var a;let i=null;if(t instanceof dO){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:h,id:f,popupRef:p,richText:y,contentsObj:g,creationDate:S,modificationDate:v},textContent:b,textPosition:A,parent:{page:{pageNumber:_}}}=t;if(!b||b.length===0)return null;i=t={annotationType:oe.FREETEXT,color:Array.from(u),fontSize:l,value:b.join(`
`),position:A,pageIndex:_-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:p,comment:(g==null?void 0:g.str)||null,richText:y,creationDate:S,modificationDate:v}}const o=await super.deserialize(t,s,r);return x(o,ds,t.fontSize),o.color=Q.makeHexColor(...t.color),x(o,us,E(a=$e,xy,SE).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:c(this,ds),value:E(this,lx,vO).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!E(this,cx,bO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${c(this,ds)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of c(this,us).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:c(this,us)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};us=new WeakMap,wy=new WeakMap,Rc=new WeakMap,ds=new WeakMap,ix=new WeakSet,mO=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-c(this,ds))*this.parentScale),x(this,ds,i),E(this,Mh,W0).call(this)},r=c(this,ds);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},ox=new WeakSet,gO=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ax=new WeakSet,yO=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(E(r=$e,Lh,q0).call(r,i)),s=i);return t.join(`
`)},Mh=new WeakSet,W0=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},Lh=new WeakSet,q0=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(a0,"")},Dh=new WeakSet,K0=function(){if(this.editorDiv.replaceChildren(),!!c(this,us))for(const t of c(this,us).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},lx=new WeakSet,vO=function(){return c(this,us).replaceAll(""," ")},xy=new WeakSet,SE=function(t){return t.replaceAll(" ","")},cx=new WeakSet,bO=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,l)=>a!==i[l])||t.pageIndex!==o},w($e,Lh),w($e,xy),G($e,"_freeTextDefaultContent",""),G($e,"_internalPadding",0),G($e,"_defaultColor",null),G($e,"_defaultFontSize",10),G($e,"_type","freetext"),G($e,"_editorType",oe.FREETEXT);let AE=$e;class J{toSVGPath(){Fe("Abstract method `toSVGPath` must be implemented.")}get box(){Fe("Abstract getter `box` must be implemented.")}serialize(e,t){Fe("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}G(J,"PRECISION",1e-4);var hs,hr,Ih,jh,Qr,fe,Nc,Mc,Ay,Sy,Oh,Fh,ba,_y,ux,dx,Lc,Cp,hx,wO,fx,xO,px,AO,mx,SO,gx,_O,yx,EO;const wi=class wi{constructor({x:e,y:t},s,r,i,o,a=0){w(this,Lc);w(this,hx);w(this,fx);w(this,px);w(this,mx);w(this,gx);w(this,yx);w(this,hs,void 0);w(this,hr,[]);w(this,Ih,void 0);w(this,jh,void 0);w(this,Qr,[]);w(this,fe,new Float32Array(18));w(this,Nc,void 0);w(this,Mc,void 0);w(this,Ay,void 0);w(this,Sy,void 0);w(this,Oh,void 0);w(this,Fh,void 0);w(this,ba,[]);x(this,hs,s),x(this,Fh,i*r),x(this,jh,o),c(this,fe).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Ih,a),x(this,Sy,c(wi,_y)*r),x(this,Ay,c(wi,dx)*r),x(this,Oh,r),c(this,ba).push(e,t)}isEmpty(){return isNaN(c(this,fe)[8])}add({x:e,y:t}){var L;x(this,Nc,e),x(this,Mc,t);const[s,r,i,o]=c(this,hs);let[a,l,u,d]=c(this,fe).subarray(8,12);const h=e-u,f=t-d,p=Math.hypot(h,f);if(p<c(this,Ay))return!1;const y=p-c(this,Sy),g=y/p,S=g*h,v=g*f;let b=a,A=l;a=u,l=d,u+=S,d+=v,(L=c(this,ba))==null||L.push(e,t);const _=-v/y,T=S/y,k=_*c(this,Fh),P=T*c(this,Fh);return c(this,fe).set(c(this,fe).subarray(2,8),0),c(this,fe).set([u+k,d+P],4),c(this,fe).set(c(this,fe).subarray(14,18),12),c(this,fe).set([u-k,d-P],16),isNaN(c(this,fe)[6])?(c(this,Qr).length===0&&(c(this,fe).set([a+k,l+P],2),c(this,Qr).push(NaN,NaN,NaN,NaN,(a+k-s)/i,(l+P-r)/o),c(this,fe).set([a-k,l-P],14),c(this,hr).push(NaN,NaN,NaN,NaN,(a-k-s)/i,(l-P-r)/o)),c(this,fe).set([b,A,a,l,u,d],6),!this.isEmpty()):(c(this,fe).set([b,A,a,l,u,d],6),Math.abs(Math.atan2(A-l,b-a)-Math.atan2(v,S))<Math.PI/2?([a,l,u,d]=c(this,fe).subarray(2,6),c(this,Qr).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/i,((l+d)/2-r)/o),[a,l,b,A]=c(this,fe).subarray(14,18),c(this,hr).push(NaN,NaN,NaN,NaN,((b+a)/2-s)/i,((A+l)/2-r)/o),!0):([b,A,a,l,u,d]=c(this,fe).subarray(0,6),c(this,Qr).push(((b+5*a)/6-s)/i,((A+5*l)/6-r)/o,((5*a+u)/6-s)/i,((5*l+d)/6-r)/o,((a+u)/2-s)/i,((l+d)/2-r)/o),[u,d,a,l,b,A]=c(this,fe).subarray(12,18),c(this,hr).push(((b+5*a)/6-s)/i,((A+5*l)/6-r)/o,((5*a+u)/6-s)/i,((5*l+d)/6-r)/o,((a+u)/2-s)/i,((l+d)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,Qr),t=c(this,hr);if(isNaN(c(this,fe)[6])&&!this.isEmpty())return E(this,hx,wO).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);E(this,px,AO).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return E(this,fx,xO).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new CO(e,t,s,r,i,o)}getOutlines(){var h;const e=c(this,Qr),t=c(this,hr),s=c(this,fe),[r,i,o,a]=c(this,hs),l=new Float32Array((((h=c(this,ba))==null?void 0:h.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,ba)[f]-r)/o,l[f+1]=(c(this,ba)[f+1]-i)/a;if(l[l.length-2]=(c(this,Nc)-r)/o,l[l.length-1]=(c(this,Mc)-i)/a,isNaN(s[6])&&!this.isEmpty())return E(this,mx,SO).call(this,l);const u=new Float32Array(c(this,Qr).length+24+c(this,hr).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=E(this,yx,EO).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(t[f+p])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+p],u[d+1]=t[f+p+1],d+=2}return E(this,gx,_O).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,hs),c(this,Oh),c(this,Ih),c(this,jh))}};hs=new WeakMap,hr=new WeakMap,Ih=new WeakMap,jh=new WeakMap,Qr=new WeakMap,fe=new WeakMap,Nc=new WeakMap,Mc=new WeakMap,Ay=new WeakMap,Sy=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,ba=new WeakMap,_y=new WeakMap,ux=new WeakMap,dx=new WeakMap,Lc=new WeakSet,Cp=function(){const e=c(this,fe).subarray(4,6),t=c(this,fe).subarray(16,18),[s,r,i,o]=c(this,hs);return[(c(this,Nc)+(e[0]-t[0])/2-s)/i,(c(this,Mc)+(e[1]-t[1])/2-r)/o,(c(this,Nc)+(t[0]-e[0])/2-s)/i,(c(this,Mc)+(t[1]-e[1])/2-r)/o]},hx=new WeakSet,wO=function(){const[e,t,s,r]=c(this,hs),[i,o,a,l]=E(this,Lc,Cp).call(this);return`M${(c(this,fe)[2]-e)/s} ${(c(this,fe)[3]-t)/r} L${(c(this,fe)[4]-e)/s} ${(c(this,fe)[5]-t)/r} L${i} ${o} L${a} ${l} L${(c(this,fe)[16]-e)/s} ${(c(this,fe)[17]-t)/r} L${(c(this,fe)[14]-e)/s} ${(c(this,fe)[15]-t)/r} Z`},fx=new WeakSet,xO=function(e){const t=c(this,hr);e.push(`L${t[4]} ${t[5]} Z`)},px=new WeakSet,AO=function(e){const[t,s,r,i]=c(this,hs),o=c(this,fe).subarray(4,6),a=c(this,fe).subarray(16,18),[l,u,d,h]=E(this,Lc,Cp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${l} ${u} L${d} ${h} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},mx=new WeakSet,SO=function(e){const t=c(this,fe),[s,r,i,o]=c(this,hs),[a,l,u,d]=E(this,Lc,Cp).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(h,e,c(this,hs),c(this,Oh),c(this,Ih),c(this,jh))},gx=new WeakSet,_O=function(e,t){const s=c(this,hr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},yx=new WeakSet,EO=function(e,t){const s=c(this,fe).subarray(4,6),r=c(this,fe).subarray(16,18),[i,o,a,l]=c(this,hs),[u,d,h,f]=E(this,Lc,Cp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/l],t),t+=24},w(wi,_y,8),w(wi,ux,2),w(wi,dx,c(wi,_y)+c(wi,ux));let Yb=wi;var Bh,Dc,Qi,Ey,fs,Cy,wt,vx,TO;class CO extends J{constructor(t,s,r,i,o,a){super();w(this,vx);w(this,Bh,void 0);w(this,Dc,new Float32Array(4));w(this,Qi,void 0);w(this,Ey,void 0);w(this,fs,void 0);w(this,Cy,void 0);w(this,wt,void 0);x(this,wt,t),x(this,fs,s),x(this,Bh,r),x(this,Cy,i),x(this,Qi,o),x(this,Ey,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],E(this,vx,TO).call(this,a);const[l,u,d,h]=c(this,Dc);for(let f=0,p=t.length;f<p;f+=2)t[f]=(t[f]-l)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,p=s.length;f<p;f+=2)s[f]=(s[f]-l)/d,s[f+1]=(s[f+1]-u)/h}toSVGPath(){const t=[`M${c(this,wt)[4]} ${c(this,wt)[5]}`];for(let s=6,r=c(this,wt).length;s<r;s+=6){if(isNaN(c(this,wt)[s])){t.push(`L${c(this,wt)[s+4]} ${c(this,wt)[s+5]}`);continue}t.push(`C${c(this,wt)[s]} ${c(this,wt)[s+1]} ${c(this,wt)[s+2]} ${c(this,wt)[s+3]} ${c(this,wt)[s+4]} ${c(this,wt)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,l=i-s;let u,d;switch(o){case 0:u=J._rescale(c(this,wt),t,i,a,-l),d=J._rescale(c(this,fs),t,i,a,-l);break;case 90:u=J._rescaleAndSwap(c(this,wt),t,s,a,l),d=J._rescaleAndSwap(c(this,fs),t,s,a,l);break;case 180:u=J._rescale(c(this,wt),r,s,-a,l),d=J._rescale(c(this,fs),r,s,-a,l);break;case 270:u=J._rescaleAndSwap(c(this,wt),r,i,-a,-l),d=J._rescaleAndSwap(c(this,fs),r,i,-a,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,Dc)}newOutliner(t,s,r,i,o,a=0){return new Yb(t,s,r,i,o,a)}getNewOutline(t,s){const[r,i,o,a]=c(this,Dc),[l,u,d,h]=c(this,Bh),f=o*d,p=a*h,y=r*d+l,g=i*h+u,S=this.newOutliner({x:c(this,fs)[0]*f+y,y:c(this,fs)[1]*p+g},c(this,Bh),c(this,Cy),t,c(this,Ey),s??c(this,Qi));for(let v=2;v<c(this,fs).length;v+=2)S.add({x:c(this,fs)[v]*f+y,y:c(this,fs)[v+1]*p+g});return S.getOutlines()}}Bh=new WeakMap,Dc=new WeakMap,Qi=new WeakMap,Ey=new WeakMap,fs=new WeakMap,Cy=new WeakMap,wt=new WeakMap,vx=new WeakSet,TO=function(t){const s=c(this,wt);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,l=i,u=r,d=i;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,g=s.length;y<g;y+=6){const S=s[y+4],v=s[y+5];isNaN(s[y])?(Q.pointBoundingBox(S,v,o),l>v?(a=S,l=v):l===v&&(a=h(a,S)),d<v?(u=S,d=v):d===v&&(u=h(u,S))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,Q.bezierBoundingBox(r,i,...s.slice(y,y+6),f),Q.rectBoundingBox(f[0],f[1],f[2],f[3],o),l>f[1]?(a=f[0],l=f[1]):l===f[1]&&(a=h(a,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),r=S,i=v}const p=c(this,Dc);p[0]=o[0]-c(this,Qi),p[1]=o[1]-c(this,Qi),p[2]=o[2]-o[0]+2*c(this,Qi),p[3]=o[3]-o[1]+2*c(this,Qi),this.firstPoint=[a,l],this.lastPoint=[u,d]};var Ty,ky,Py,wa,fr,bx,kO,$h,X0,wx,PO,xx,RO,Ry,EE;class _E{constructor(e,t=0,s=0,r=!0){w(this,bx);w(this,$h);w(this,wx);w(this,xx);w(this,Ry);w(this,Ty,void 0);w(this,ky,void 0);w(this,Py,void 0);w(this,wa,[]);w(this,fr,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:S,y:v,width:b,height:A}of e){const _=Math.floor((S-t)/a)*a,T=Math.ceil((S+b+t)/a)*a,k=Math.floor((v-t)/a)*a,P=Math.ceil((v+A+t)/a)*a,R=[_,k,P,!0],L=[T,k,P,!1];c(this,wa).push(R,L),Q.rectBoundingBox(_,k,T,P,i)}const l=i[2]-i[0]+2*s,u=i[3]-i[1]+2*s,d=i[0]-s,h=i[1]-s;let f=r?-1/0:1/0,p=1/0;const y=c(this,wa).at(r?-1:-2),g=[y[0],y[2]];for(const S of c(this,wa)){const[v,b,A,_]=S;!_&&r?b<p?(p=b,f=v):b===p&&(f=Math.max(f,v)):_&&!r&&(b<p?(p=b,f=v):b===p&&(f=Math.min(f,v))),S[0]=(v-d)/l,S[1]=(b-h)/u,S[2]=(A-h)/u}x(this,Ty,new Float32Array([d,h,l,u])),x(this,ky,[f,p]),x(this,Py,g)}getOutlines(){c(this,wa).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of c(this,wa))t[3]?(e.push(...E(this,Ry,EE).call(this,t)),E(this,wx,PO).call(this,t)):(E(this,xx,RO).call(this,t),e.push(...E(this,Ry,EE).call(this,t)));return E(this,bx,kO).call(this,e)}}Ty=new WeakMap,ky=new WeakMap,Py=new WeakMap,wa=new WeakMap,fr=new WeakMap,bx=new WeakSet,kO=function(e){const t=[],s=new Set;for(const o of e){const[a,l,u]=o;t.push([a,l,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],u=t[o+1][2];l.push(u),u.push(l),s.add(l),s.add(u)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,l,u,d,h]=o;s.delete(o);let f=a,p=l;for(i=[a,u],r.push(i);;){let y;if(s.has(d))y=d;else if(s.has(h))y=h;else break;s.delete(y),[a,l,u,d,h]=y,f!==a&&(i.push(f,p,a,p===l?l:u),f=a),p=p===l?u:l}i.push(f,p)}return new Eq(r,c(this,Ty),c(this,ky),c(this,Py))},$h=new WeakSet,X0=function(e){const t=c(this,fr);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},wx=new WeakSet,PO=function([,e,t]){const s=E(this,$h,X0).call(this,e);c(this,fr).splice(s,0,[e,t])},xx=new WeakSet,RO=function([,e,t]){const s=E(this,$h,X0).call(this,e);for(let r=s;r<c(this,fr).length;r++){const[i,o]=c(this,fr)[r];if(i!==e)break;if(i===e&&o===t){c(this,fr).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=c(this,fr)[r];if(i!==e)break;if(i===e&&o===t){c(this,fr).splice(r,1);return}}},Ry=new WeakSet,EE=function(e){const[t,s,r]=e,i=[[t,s,r]],o=E(this,$h,X0).call(this,r);for(let a=0;a<o;a++){const[l,u]=c(this,fr)[a];for(let d=0,h=i.length;d<h;d++){const[,f,p]=i[d];if(!(u<=f||p<=l)){if(f>=l){if(p>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=l,p>u&&i.push([t,u,p])}}}return i};var Ny,Uh;class Eq extends J{constructor(t,s,r,i){super();w(this,Ny,void 0);w(this,Uh,void 0);x(this,Uh,t),x(this,Ny,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of c(this,Uh)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],l=s[o+1];a===r?(t.push(`V${l}`),i=l):l===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],l=r-t,u=i-s;for(const d of c(this,Uh)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*l,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return c(this,Ny)}get classNamesForOutlining(){return["highlightOutline"]}}Ny=new WeakMap,Uh=new WeakMap;class CE extends Yb{newFreeDrawOutline(e,t,s,r,i,o){return new Cq(e,t,s,r,i,o)}}class Cq extends CO{newOutliner(e,t,s,r,i,o=0){return new CE(e,t,s,r,i,o)}}var Vh,My,Ji,Ic,Ly,Hn,Dy,Iy,jc,ps,ms,Zt,zh,Hh,pn,Gh,zs,jy,Oy,TE,Wh,Y0,Ax,NO,Sx,MO,_x,LO,Fy,kE,Zi,gl,xa,Iu,Ex,DO,qh,Q0,Kh,J0,Cx,IO,Tx,jO,kx,OO,Px,FO,Rx,BO;const Ae=class Ae extends ze{constructor(t){super({...t,name:"highlightEditor"});w(this,Oy);w(this,Wh);w(this,Ax);w(this,Sx);w(this,_x);w(this,Fy);w(this,Zi);w(this,Ex);w(this,qh);w(this,Kh);w(this,Cx);w(this,Tx);w(this,Rx);w(this,Vh,null);w(this,My,0);w(this,Ji,void 0);w(this,Ic,null);w(this,Ly,null);w(this,Hn,null);w(this,Dy,null);w(this,Iy,0);w(this,jc,null);w(this,ps,null);w(this,ms,null);w(this,Zt,!1);w(this,zh,null);w(this,Hh,null);w(this,pn,null);w(this,Gh,"");w(this,zs,void 0);w(this,jy,"");this.color=t.color||Ae._defaultColor,x(this,zs,t.thickness||Ae._defaultThickness),this.opacity=t.opacity||Ae._defaultOpacity,x(this,Ji,t.boxes||null),x(this,jy,t.methodOfCreation||""),x(this,Gh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(x(this,Zt,!0),E(this,Wh,Y0).call(this,t),E(this,Zi,gl).call(this)):c(this,Ji)&&(x(this,Vh,t.anchorNode),x(this,My,t.anchorOffset),x(this,Dy,t.focusNode),x(this,Iy,t.focusOffset),E(this,Oy,TE).call(this),E(this,Zi,gl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ae.prototype;return de(this,"_keyboardManager",new vv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Zt)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:c(this,zs),methodOfCreation:c(this,jy)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;ze.initialize(t,s),Ae._defaultColor||(Ae._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case ve.HIGHLIGHT_COLOR:Ae._defaultColor=s;break;case ve.HIGHLIGHT_THICKNESS:Ae._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return c(this,Hh)}get commentButtonPosition(){return c(this,zh)}updateParams(t,s){switch(t){case ve.HIGHLIGHT_COLOR:E(this,Ax,NO).call(this,s);break;case ve.HIGHLIGHT_THICKNESS:E(this,Sx,MO).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,Ae._defaultColor],[ve.HIGHLIGHT_THICKNESS,Ae._defaultThickness]]}get propertiesToUpdate(){return[[ve.HIGHLIGHT_COLOR,this.color||Ae._defaultColor],[ve.HIGHLIGHT_THICKNESS,c(this,zs)||Ae._defaultThickness],[ve.HIGHLIGHT_FREE,c(this,Zt)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(c(this,ms),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=c(this,Ly))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",x(this,Ly,new Sm({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(E(this,Kh,J0).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,E(this,Kh,J0).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){E(this,Fy,kE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Zi,gl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?E(this,Fy,kE).call(this):t&&(E(this,Zi,gl).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;c(this,Zt)?(t=(t-this.rotation+360)%360,r=E(i=Ae,xa,Iu).call(i,c(this,ps).box,t)):r=E(o=Ae,xa,Iu).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(c(this,ms),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(c(this,pn),{bbox:E(a=Ae,xa,Iu).call(a,c(this,Hn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();c(this,Gh)&&(t.setAttribute("aria-label",c(this,Gh)),t.setAttribute("role","mark")),c(this,Zt)?t.classList.add("free"):this.div.addEventListener("keydown",E(this,Ex,DO).bind(this),{signal:this._uiManager._signal});const s=x(this,jc,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=c(this,Ic),this.setDims(this.width,this.height),oj(this,c(this,jc),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,pn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(c(this,pn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:E(this,qh,Q0).call(this,!0);break;case 1:case 3:E(this,qh,Q0).call(this,!1);break}}select(){var t;super.select(),c(this,pn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,pn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),c(this,pn)&&((t=this.parent)==null||t.drawLayer.updateProperties(c(this,pn),{rootClass:{selected:!1}}),c(this,Zt)||E(this,qh,Q0).call(this,!1))}get _mustFixPosition(){return!c(this,Zt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(c(this,ms),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(c(this,pn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:l,width:u,height:d}=r.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),p=y=>{h.abort(),E(this,Px,FO).call(this,t,y)};window.addEventListener("blur",p,{signal:f}),window.addEventListener("pointerup",p,{signal:f}),window.addEventListener("pointerdown",ot,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Cs,{signal:f}),r.addEventListener("pointermove",E(this,kx,OO).bind(this,t),{signal:f}),this._freeHighlight=new CE({x:i,y:o},[a,l,u,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var g,S,v,b;let i=null;if(t instanceof fO){const{data:{quadPoints:A,rect:_,rotation:T,id:k,color:P,opacity:R,popupRef:L,richText:I,contentsObj:O,creationDate:D,modificationDate:V},parent:{page:{pageNumber:j}}}=t;i=t={annotationType:oe.HIGHLIGHT,color:Array.from(P),opacity:R,quadPoints:A,boxes:null,pageIndex:j-1,rect:_.slice(0),rotation:T,annotationElementId:k,id:k,deleted:!1,popupRef:L,richText:I,comment:(O==null?void 0:O.str)||null,creationDate:D,modificationDate:V}}else if(t instanceof HT){const{data:{inkLists:A,rect:_,rotation:T,id:k,color:P,borderStyle:{rawWidth:R},popupRef:L,richText:I,contentsObj:O,creationDate:D,modificationDate:V},parent:{page:{pageNumber:j}}}=t;i=t={annotationType:oe.HIGHLIGHT,color:Array.from(P),thickness:R,inkLists:A,boxes:null,pageIndex:j-1,rect:_.slice(0),rotation:T,annotationElementId:k,id:k,deleted:!1,popupRef:L,richText:I,comment:(O==null?void 0:O.str)||null,creationDate:D,modificationDate:V}}const{color:o,quadPoints:a,inkLists:l,opacity:u}=t,d=await super.deserialize(t,s,r);d.color=Q.makeHexColor(...o),d.opacity=u||1,l&&x(d,zs,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[p,y]=d.pageTranslation;if(a){const A=x(d,Ji,[]);for(let _=0;_<a.length;_+=8)A.push({x:(a[_]-p)/h,y:1-(a[_+1]-y)/f,width:(a[_+2]-a[_])/h,height:(a[_+1]-a[_+5])/f});E(g=d,Oy,TE).call(g),E(S=d,Zi,gl).call(S),d.rotate(d.rotation)}else if(l){x(d,Zt,!0);const A=l[0],_={x:A[0]-p,y:f-(A[1]-y)},T=new CE(_,[0,0,h,f],1,c(d,zs)/2,!0,.001);for(let R=0,L=A.length;R<L;R+=2)_.x=A[R]-p,_.y=f-(A[R+1]-y),T.add(_);const{id:k,clipPathId:P}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);E(v=d,Wh,Y0).call(v,{highlightOutlines:T.getOutlines(),highlightId:k,clipPathId:P}),E(b=d,Zi,gl).call(b),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:c(this,zs),quadPoints:E(this,Cx,IO).call(this),outlines:E(this,Tx,jO).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!E(this,Rx,BO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Vh=new WeakMap,My=new WeakMap,Ji=new WeakMap,Ic=new WeakMap,Ly=new WeakMap,Hn=new WeakMap,Dy=new WeakMap,Iy=new WeakMap,jc=new WeakMap,ps=new WeakMap,ms=new WeakMap,Zt=new WeakMap,zh=new WeakMap,Hh=new WeakMap,pn=new WeakMap,Gh=new WeakMap,zs=new WeakMap,jy=new WeakMap,Oy=new WeakSet,TE=function(){const t=new _E(c(this,Ji),.001);x(this,ps,t.getOutlines()),[this.x,this.y,this.width,this.height]=c(this,ps).box;const s=new _E(c(this,Ji),.0025,.001,this._uiManager.direction==="ltr");x(this,Hn,s.getOutlines());const{firstPoint:r}=c(this,ps);x(this,zh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=c(this,Hn);x(this,Hh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Wh=new WeakSet,Y0=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,p;x(this,ps,t);const i=1.5;if(x(this,Hn,t.getNewOutline(c(this,zs)/2+i,.0025)),s>=0)x(this,ms,s),x(this,Ic,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),x(this,pn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:c(this,Hn).box,path:{d:c(this,Hn).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(c(this,ms),{bbox:E(f=Ae,xa,Iu).call(f,c(this,ps).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(c(this,pn),{bbox:E(p=Ae,xa,Iu).call(p,c(this,Hn).box,y),path:{d:c(this,Hn).toSVGPath()}})}const[o,a,l,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=u;break;case 90:{const[y,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/y,this.height=u*y/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[y,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/y,this.height=u*y/g;break}}const{firstPoint:d}=t;x(this,zh,[(d[0]-o)/l,(d[1]-a)/u]);const{lastPoint:h}=c(this,Hn);x(this,Hh,[(h[0]-o)/l,(h[1]-a)/u])},Ax=new WeakSet,NO=function(t){const s=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Ae._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},Sx=new WeakSet,MO=function(t){const s=c(this,zs),r=i=>{x(this,zs,i),E(this,_x,LO).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ve.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},_x=new WeakSet,LO=function(t){c(this,Zt)&&(E(this,Wh,Y0).call(this,{highlightOutlines:c(this,ps).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},Fy=new WeakSet,kE=function(){c(this,ms)===null||!this.parent||(this.parent.drawLayer.remove(c(this,ms)),x(this,ms,null),this.parent.drawLayer.remove(c(this,pn)),x(this,pn,null))},Zi=new WeakSet,gl=function(t=this.parent){c(this,ms)===null&&({id:kt(this,ms)._,clipPathId:kt(this,Ic)._}=t.drawLayer.draw({bbox:c(this,ps).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:c(this,Zt)},path:{d:c(this,ps).toSVGPath()}},!1,!0),x(this,pn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:c(this,Zt)},bbox:c(this,Hn).box,path:{d:c(this,Hn).toSVGPath()}},c(this,Zt))),c(this,jc)&&(c(this,jc).style.clipPath=c(this,Ic)))},xa=new WeakSet,Iu=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},Ex=new WeakSet,DO=function(t){Ae._keyboardManager.exec(this,t)},qh=new WeakSet,Q0=function(t){if(!c(this,Vh))return;const s=window.getSelection();t?s.setPosition(c(this,Vh),c(this,My)):s.setPosition(c(this,Dy),c(this,Iy))},Kh=new WeakSet,J0=function(){return c(this,Zt)?this.rotation:0},Cx=new WeakSet,IO=function(){if(c(this,Zt))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=c(this,Ji),a=new Float32Array(o.length*8);let l=0;for(const{x:u,y:d,width:h,height:f}of o){const p=u*t+r,y=(1-d)*s+i;a[l]=a[l+4]=p,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=p+h*t,a[l+5]=a[l+7]=y-f*s,l+=8}return a},Tx=new WeakSet,jO=function(t){return c(this,ps).serialize(t,E(this,Kh,J0).call(this))},kx=new WeakSet,OO=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Px=new WeakSet,FO=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Rx=new WeakSet,BO=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},w(Ae,xa),w(Ae,kx),w(Ae,Px),G(Ae,"_defaultColor",null),G(Ae,"_defaultOpacity",1),G(Ae,"_defaultThickness",12),G(Ae,"_type","highlight"),G(Ae,"_editorType",oe.HIGHLIGHT),G(Ae,"_freeHighlightId",-1),G(Ae,"_freeHighlight",null),G(Ae,"_freeHighlightClipId","");let Qb=Ae;var Oc;class $O{constructor(){w(this,Oc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){c(this,Oc)[e]=t}toSVGProperties(){const e=c(this,Oc);return x(this,Oc,Object.create(null)),{root:e}}reset(){x(this,Oc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Fe("Not implemented")}}Oc=new WeakMap;var gs,Xh,Bt,Fc,Bc,Aa,Sa,_a,$c,By,PE,$y,RE,Uy,NE,Uc,Tp,Nx,UO,Yh,Z0,Vc,kp,Ea,ju;const ee=class ee extends ze{constructor(t){super(t);w(this,By);w(this,$y);w(this,Uy);w(this,Uc);w(this,Nx);w(this,Yh);w(this,Vc);w(this,Ea);w(this,gs,null);w(this,Xh,void 0);G(this,"_colorPicker",null);G(this,"_drawId",null);x(this,Xh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(E(this,By,PE).call(this,t),E(this,Uc,Tp).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){Fe("Not implemented")}static get typesMap(){Fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(c(ee,Bt).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],a=l=>{var d;i.updateProperty(s,l);const u=c(this,gs).updateProperty(s,l);u&&E(this,Vc,kp).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(c(this,gs).getPathResizingSVGProperties(E(this,Yh,Z0).call(this)),{bbox:E(this,Ea,ju).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(c(this,gs).getPathResizedSVGProperties(E(this,Yh,Z0).call(this)),{bbox:E(this,Ea,ju).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:E(this,Ea,ju).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(c(this,gs).getPathTranslatedSVGProperties(E(this,Yh,Z0).call(this),this.parentDimensions),{bbox:E(this,Ea,ju).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,c(this,Xh)&&(x(this,Xh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){E(this,Uy,NE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(E(this,Uc,Tp).call(this),E(this,Vc,kp).call(this,c(this,gs).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),E(this,Uy,NE).call(this)):t&&(this._uiManager.addShouldRescale(this),E(this,Uc,Tp).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties({bbox:E(this,Ea,ju).call(this)},c(this,gs).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&E(this,Vc,kp).call(this,c(this,gs).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){Fe("Not implemented")}static startDrawing(t,s,r,i){var S;const{target:o,offsetX:a,offsetY:l,pointerId:u,pointerType:d}=i;if(c(ee,Sa)&&c(ee,Sa)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:p}=o.getBoundingClientRect(),y=x(ee,Fc,new AbortController),g=t.combinedSignal(y);if(c(ee,Aa)||x(ee,Aa,u),c(ee,Sa)??x(ee,Sa,d),window.addEventListener("pointerup",v=>{var b;c(ee,Aa)===v.pointerId?this._endDraw(v):(b=c(ee,_a))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var b;c(ee,Aa)===v.pointerId?this._currentParent.endDrawingSession():(b=c(ee,_a))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{c(ee,Sa)===v.pointerType&&((c(ee,_a)||x(ee,_a,new Set)).add(v.pointerId),c(ee,Bt).isCancellable()&&(c(ee,Bt).removeLastElement(),c(ee,Bt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Cs,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===c(ee,$c)&&ot(v)},{signal:g}),t.toggleDrawing(),(S=s._editorUndoBar)==null||S.hide(),c(ee,Bt)){t.drawLayer.updateProperties(this._currentDrawId,c(ee,Bt).startNew(a,l,f,p,h));return}s.updateUIForDefaultProperties(this),x(ee,Bt,this.createDrawerInstance(a,l,f,p,h)),x(ee,Bc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(c(ee,Bc).toSVGProperties(),c(ee,Bt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(x(ee,$c,-1),!c(ee,Bt))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(c(ee,Aa)===i){if(((o=c(ee,_a))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,c(ee,Bt).add(s,r)),x(ee,$c,t.timeStamp),ot(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,x(ee,Bt,null),x(ee,Bc,null),x(ee,Sa,null),x(ee,$c,NaN)),c(ee,Fc)&&(c(ee,Fc).abort(),x(ee,Fc,null),x(ee,Aa,NaN),x(ee,_a,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,c(ee,Bt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=c(ee,Bt),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:ve.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(ve.DRAW_STEP),!c(ee,Bt).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c(ee,Bt).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:c(ee,Bc),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,a){Fe("Not implemented")}static async deserialize(t,s,r){var h,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:l}}=s.viewport,u=this.deserializeDraw(a,l,i,o,this._INNER_MARGIN,t),d=await super.deserialize(t,s,r);return d.createDrawingOptions(t),E(h=d,By,PE).call(h,{drawOutlines:u}),E(f=d,Uc,Tp).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return c(this,gs).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};gs=new WeakMap,Xh=new WeakMap,Bt=new WeakMap,Fc=new WeakMap,Bc=new WeakMap,Aa=new WeakMap,Sa=new WeakMap,_a=new WeakMap,$c=new WeakMap,By=new WeakSet,PE=function({drawOutlines:t,drawId:s,drawingOptions:r}){x(this,gs,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=E(this,$y,RE).call(this,t,this.parent),E(this,Vc,kp).call(this,t.box)},$y=new WeakSet,RE=function(t,s){const{id:r}=s.drawLayer.draw(ee._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},Uy=new WeakSet,NE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Uc=new WeakSet,Tp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=E(this,$y,RE).call(this,c(this,gs),t)}},Nx=new WeakSet,UO=function([t,s,r,i]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[s,1-t,r*(a/o),i*(o/a)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(a/o),i*(o/a)];default:return[t,s,r,i]}},Yh=new WeakSet,Z0=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-s,t,r*(o/a),i*(a/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/a),i*(a/o)];default:return[t,s,r,i]}},Vc=new WeakSet,kp=function(t){[this.x,this.y,this.width,this.height]=E(this,Nx,UO).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Ea=new WeakSet,ju=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[l,u]}=this;switch((o*4+a)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(l/u),i*(u/l),r*(l/u)];case 5:return[1-s,t,r*(l/u),i*(u/l)];case 6:return[1-t-i*(u/l),1-s,i*(u/l),r*(l/u)];case 7:return[s-r*(l/u),1-t-i*(u/l),r*(l/u),i*(u/l)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(u/l),s,i*(u/l),r*(l/u)];case 13:return[1-s-r*(l/u),t-i*(u/l),r*(l/u),i*(u/l)];case 14:return[1-t,1-s-r*(l/u),i*(u/l),r*(l/u)];case 15:return[s,1-t,r*(l/u),i*(u/l)];default:return[t,s,r,i]}},G(ee,"_currentDrawId",-1),G(ee,"_currentParent",null),w(ee,Bt,null),w(ee,Fc,null),w(ee,Bc,null),w(ee,Aa,NaN),w(ee,Sa,null),w(ee,_a,null),w(ee,$c,NaN),G(ee,"_INNER_MARGIN",3);let Jb=ee;var Jr,$t,Ut,zc,Qh,_n,en,Hs,Hc,Gc,Wc,Jh,eb;class Tq{constructor(e,t,s,r,i,o){w(this,Jh);w(this,Jr,new Float64Array(6));w(this,$t,void 0);w(this,Ut,void 0);w(this,zc,void 0);w(this,Qh,void 0);w(this,_n,void 0);w(this,en,"");w(this,Hs,0);w(this,Hc,new wv);w(this,Gc,void 0);w(this,Wc,void 0);x(this,Gc,s),x(this,Wc,r),x(this,zc,i),x(this,Qh,o),[e,t]=E(this,Jh,eb).call(this,e,t);const a=x(this,$t,[NaN,NaN,NaN,NaN,e,t]);x(this,_n,[e,t]),x(this,Ut,[{line:a,points:c(this,_n)}]),c(this,Jr).set(a,0)}updateProperty(e,t){e==="stroke-width"&&x(this,Qh,t)}isEmpty(){return!c(this,Ut)||c(this,Ut).length===0}isCancellable(){return c(this,_n).length<=10}add(e,t){[e,t]=E(this,Jh,eb).call(this,e,t);const[s,r,i,o]=c(this,Jr).subarray(2,6),a=e-i,l=t-o;return Math.hypot(c(this,Gc)*a,c(this,Wc)*l)<=2?null:(c(this,_n).push(e,t),isNaN(s)?(c(this,Jr).set([i,o,e,t],2),c(this,$t).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(c(this,Jr)[0])&&c(this,$t).splice(6,6),c(this,Jr).set([s,r,i,o,e,t],0),c(this,$t).push(...J.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(c(this,_n).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){x(this,Gc,s),x(this,Wc,r),x(this,zc,i),[e,t]=E(this,Jh,eb).call(this,e,t);const o=x(this,$t,[NaN,NaN,NaN,NaN,e,t]);x(this,_n,[e,t]);const a=c(this,Ut).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),c(this,Ut).push({line:o,points:c(this,_n)}),c(this,Jr).set(o,0),x(this,Hs,0),this.toSVGPath(),null}getLastElement(){return c(this,Ut).at(-1)}setLastElement(e){return c(this,Ut)?(c(this,Ut).push(e),x(this,$t,e.line),x(this,_n,e.points),x(this,Hs,0),{path:{d:this.toSVGPath()}}):c(this,Hc).setLastElement(e)}removeLastElement(){if(!c(this,Ut))return c(this,Hc).removeLastElement();c(this,Ut).pop(),x(this,en,"");for(let e=0,t=c(this,Ut).length;e<t;e++){const{line:s,points:r}=c(this,Ut)[e];x(this,$t,s),x(this,_n,r),x(this,Hs,0),this.toSVGPath()}return{path:{d:c(this,en)}}}toSVGPath(){const e=J.svgRound(c(this,$t)[4]),t=J.svgRound(c(this,$t)[5]);if(c(this,_n).length===2)return x(this,en,`${c(this,en)} M ${e} ${t} Z`),c(this,en);if(c(this,_n).length<=6){const r=c(this,en).lastIndexOf("M");x(this,en,`${c(this,en).slice(0,r)} M ${e} ${t}`),x(this,Hs,6)}if(c(this,_n).length===4){const r=J.svgRound(c(this,$t)[10]),i=J.svgRound(c(this,$t)[11]);return x(this,en,`${c(this,en)} L ${r} ${i}`),x(this,Hs,12),c(this,en)}const s=[];c(this,Hs)===0&&(s.push(`M ${e} ${t}`),x(this,Hs,6));for(let r=c(this,Hs),i=c(this,$t).length;r<i;r+=6){const[o,a,l,u,d,h]=c(this,$t).slice(r,r+6).map(J.svgRound);s.push(`C${o} ${a} ${l} ${u} ${d} ${h}`)}return x(this,en,c(this,en)+s.join(" ")),x(this,Hs,c(this,$t).length),c(this,en)}getOutlines(e,t,s,r){const i=c(this,Ut).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),c(this,Hc).build(c(this,Ut),e,t,s,c(this,zc),c(this,Qh),r),x(this,Jr,null),x(this,$t,null),x(this,Ut,null),x(this,en,null),c(this,Hc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Jr=new WeakMap,$t=new WeakMap,Ut=new WeakMap,zc=new WeakMap,Qh=new WeakMap,_n=new WeakMap,en=new WeakMap,Hs=new WeakMap,Hc=new WeakMap,Gc=new WeakMap,Wc=new WeakMap,Jh=new WeakSet,eb=function(e,t){return J._normalizePoint(e,t,c(this,Gc),c(this,Wc),c(this,zc))};var En,Vy,zy,ys,Zr,ei,Zh,ef,qc,pr,gi,Mx,VO,Lx,zO,Dx,HO;class wv extends J{constructor(){super(...arguments);w(this,pr);w(this,Mx);w(this,Lx);w(this,Dx);w(this,En,void 0);w(this,Vy,0);w(this,zy,void 0);w(this,ys,void 0);w(this,Zr,void 0);w(this,ei,void 0);w(this,Zh,void 0);w(this,ef,void 0);w(this,qc,void 0)}build(t,s,r,i,o,a,l){x(this,Zr,s),x(this,ei,r),x(this,Zh,i),x(this,ef,o),x(this,qc,a),x(this,zy,l??0),x(this,ys,t),E(this,Lx,zO).call(this)}get thickness(){return c(this,qc)}setLastElement(t){return c(this,ys).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return c(this,ys).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of c(this,ys)){if(t.push(`M${J.svgRound(s[4])} ${J.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${J.svgRound(s[10])} ${J.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,l,u,d,h]=s.subarray(r,r+6).map(J.svgRound);t.push(`C${o} ${a} ${l} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,s,r,i],o){const a=[],l=[],[u,d,h,f]=E(this,Mx,VO).call(this);let p,y,g,S,v,b,A,_,T;switch(c(this,ef)){case 0:T=J._rescale,p=t,y=s+i,g=r,S=-i,v=t+u*r,b=s+(1-d-f)*i,A=t+(u+h)*r,_=s+(1-d)*i;break;case 90:T=J._rescaleAndSwap,p=t,y=s,g=r,S=i,v=t+d*r,b=s+u*i,A=t+(d+f)*r,_=s+(u+h)*i;break;case 180:T=J._rescale,p=t+r,y=s,g=-r,S=i,v=t+(1-u-h)*r,b=s+d*i,A=t+(1-u)*r,_=s+(d+f)*i;break;case 270:T=J._rescaleAndSwap,p=t+r,y=s+i,g=-r,S=-i,v=t+(1-d-f)*r,b=s+(1-u-h)*i,A=t+(1-d)*r,_=s+(1-u)*i;break}for(const{line:k,points:P}of c(this,ys))a.push(T(k,p,y,g,S,o?new Array(k.length):null)),l.push(T(P,p,y,g,S,o?new Array(P.length):null));return{lines:a,points:l,rect:[v,b,A,_]}}static deserialize(t,s,r,i,o,{paths:{lines:a,points:l},rotation:u,thickness:d}){const h=[];let f,p,y,g,S;switch(u){case 0:S=J._rescale,f=-t/r,p=s/i+1,y=1/r,g=-1/i;break;case 90:S=J._rescaleAndSwap,f=-s/i,p=-t/r,y=1/i,g=1/r;break;case 180:S=J._rescale,f=t/r+1,p=-s/i,y=-1/r,g=1/i;break;case 270:S=J._rescaleAndSwap,f=s/i+1,p=t/r+1,y=-1/i,g=-1/r;break}if(!a){a=[];for(const b of l){const A=b.length;if(A===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(A===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const _=new Float32Array(3*(A-2));a.push(_);let[T,k,P,R]=b.subarray(0,4);_.set([NaN,NaN,NaN,NaN,T,k],0);for(let L=4;L<A;L+=2){const I=b[L],O=b[L+1];_.set(J.createBezierPoints(T,k,P,R,I,O),(L-2)*3),[T,k,P,R]=[P,R,I,O]}}}for(let b=0,A=a.length;b<A;b++)h.push({line:S(a[b].map(_=>_??NaN),f,p,y,g),points:S(l[b].map(_=>_??NaN),f,p,y,g)});const v=new this.prototype.constructor;return v.build(h,r,i,1,u,d,o),v}get box(){return c(this,En)}updateProperty(t,s){return t==="stroke-width"?E(this,Dx,HO).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=E(this,pr,gi).call(this);x(this,Zr,t),x(this,ei,s),x(this,Zh,r);const[a,l]=E(this,pr,gi).call(this),u=a-i,d=l-o,h=c(this,En);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return x(this,Vy,t),{path:{transform:this.rotationTransform}}}get viewBox(){return c(this,En).map(J.svgRound).join(" ")}get defaultProperties(){const[t,s]=c(this,En);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=c(this,En);let r=0,i=0,o=0,a=0,l=0,u=0;switch(c(this,Vy)){case 90:i=s/t,o=-t/s,l=t;break;case 180:r=-1,a=-1,l=t,u=s;break;case 270:i=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${J.svgRound(l)} ${J.svgRound(u)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,a]=E(this,pr,gi).call(this),[l,u,d,h]=c(this,En);if(Math.abs(d-o)<=J.PRECISION||Math.abs(h-a)<=J.PRECISION){const S=t+r/2-(l+d/2),v=s+i/2-(u+h/2);return{path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`,transform:`${this.rotationTransform} translate(${S} ${v})`}}}const f=(r-2*o)/(d-2*o),p=(i-2*a)/(h-2*a),y=d/r,g=h/i;return{path:{"transform-origin":`${J.svgRound(l)} ${J.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${J.svgRound(o)} ${J.svgRound(a)}) scale(${f} ${p}) translate(${J.svgRound(-o)} ${J.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,a]=E(this,pr,gi).call(this),l=c(this,En),[u,d,h,f]=l;if(l[0]=t,l[1]=s,l[2]=r,l[3]=i,Math.abs(h-o)<=J.PRECISION||Math.abs(f-a)<=J.PRECISION){const v=t+r/2-(u+h/2),b=s+i/2-(d+f/2);for(const{line:A,points:_}of c(this,ys))J._translate(A,v,b,A),J._translate(_,v,b,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const p=(r-2*o)/(h-2*o),y=(i-2*a)/(f-2*a),g=-p*(u+o)+t+o,S=-y*(d+a)+s+a;if(p!==1||y!==1||g!==0||S!==0)for(const{line:v,points:b}of c(this,ys))J._rescale(v,g,S,p,y,v),J._rescale(b,g,S,p,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,a=c(this,En),l=t-a[0],u=s-a[1];if(c(this,Zr)===i&&c(this,ei)===o)for(const{line:d,points:h}of c(this,ys))J._translate(d,l,u,d),J._translate(h,l,u,h);else{const d=c(this,Zr)/i,h=c(this,ei)/o;x(this,Zr,i),x(this,ei,o);for(const{line:f,points:p}of c(this,ys))J._rescale(f,l,u,d,h,f),J._rescale(p,l,u,d,h,p);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t)} ${J.svgRound(s)}`}}}get defaultSVGProperties(){const t=c(this,En);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${J.svgRound(t[0])} ${J.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}En=new WeakMap,Vy=new WeakMap,zy=new WeakMap,ys=new WeakMap,Zr=new WeakMap,ei=new WeakMap,Zh=new WeakMap,ef=new WeakMap,qc=new WeakMap,pr=new WeakSet,gi=function(t=c(this,qc)){const s=c(this,zy)+t/2*c(this,Zh);return c(this,ef)%180===0?[s/c(this,Zr),s/c(this,ei)]:[s/c(this,ei),s/c(this,Zr)]},Mx=new WeakSet,VO=function(){const[t,s,r,i]=c(this,En),[o,a]=E(this,pr,gi).call(this,0);return[t+o,s+a,r-2*o,i-2*a]},Lx=new WeakSet,zO=function(){const t=x(this,En,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of c(this,ys)){if(i.length<=12){for(let l=4,u=i.length;l<u;l+=6)Q.pointBoundingBox(i[l],i[l+1],t);continue}let o=i[4],a=i[5];for(let l=6,u=i.length;l<u;l+=6){const[d,h,f,p,y,g]=i.subarray(l,l+6);Q.bezierBoundingBox(o,a,d,h,f,p,y,g,t),o=y,a=g}}const[s,r]=E(this,pr,gi).call(this);t[0]=gn(t[0]-s,0,1),t[1]=gn(t[1]-r,0,1),t[2]=gn(t[2]+s,0,1),t[3]=gn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},Dx=new WeakSet,HO=function(t){const[s,r]=E(this,pr,gi).call(this);x(this,qc,t);const[i,o]=E(this,pr,gi).call(this),[a,l]=[i-s,o-r],u=c(this,En);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};class N1 extends $O{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new N1(this._viewParameters);return e.updateAll(this),e}}var Ix,GO;const sd=class sd extends Jb{constructor(t){super({...t,name:"inkEditor"});w(this,Ix);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){ze.initialize(t,s),this._defaultDrawingOptions=new N1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return de(this,"typesMap",new Map([[ve.INK_THICKNESS,"stroke-width"],[ve.INK_COLOR,"stroke"],[ve.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new Tq(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,a){return wv.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){let i=null;if(t instanceof HT){const{data:{inkLists:a,rect:l,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:p},popupRef:y,richText:g,contentsObj:S,creationDate:v,modificationDate:b},parent:{page:{pageNumber:A}}}=t;i=t={annotationType:oe.INK,color:Array.from(h),thickness:p,opacity:f,paths:{points:a},boxes:null,pageIndex:A-1,rect:l.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:g,comment:(S==null?void 0:S.str)||null,creationDate:v,modificationDate:b}}const o=await super.deserialize(t,s,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Xb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return ve.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=sd.getDefaultDrawingOptions({stroke:Q.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{color:ze._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:s,points:r}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!E(this,Ix,GO).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};Ix=new WeakSet,GO=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==s[l])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},G(sd,"_type","ink"),G(sd,"_editorType",oe.INK),G(sd,"_defaultDrawingOptions",null);let ME=sd;class LE extends wv{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const l0=8,tp=3;var Kc,Hy,DE,mr,jx,WO,Ox,qO,Gy,IE,tf,tb,Fx,KO,Bx,XO,$x,YO,Wy,jE,qy,OE,Ux,QO;class Ct{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,a,l){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${s} ${r} ${h}px ${t}`,{actualBoundingBoxLeft:p,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:S,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:A}=d.measureText(e),_=1.5,T=Math.ceil(Math.max(Math.abs(p)+Math.abs(y)||0,A)*_),k=Math.ceil(Math.max(Math.abs(g)+Math.abs(S)||h,Math.abs(v)+Math.abs(b)||h)*_);u=new OffscreenCanvas(T,k),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,k),d.fillStyle="black",d.fillText(e,T*(_-1)/2,k*(3-_)/2);const P=E(this,Wy,jE).call(this,d.getImageData(0,0,T,k).data),R=E(this,$x,YO).call(this,P),L=E(this,qy,OE).call(this,R),I=E(this,Gy,IE).call(this,P,T,k,L);return this.processDrawnLines({lines:{curves:I,width:T,height:k},pageWidth:i,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,a,l]=E(this,Ux,QO).call(this,e),[u,d]=E(this,Bx,XO).call(this,o,a,l,Math.hypot(a,l)*c(this,Kc).sigmaSFactor,c(this,Kc).sigmaR,c(this,Kc).kernelSize),h=E(this,qy,OE).call(this,d),f=E(this,Gy,IE).call(this,u,a,l,h);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([t,s]=[s,t]);const{curves:l,width:u,height:d}=e,h=e.thickness??0,f=[],p=Math.min(t/u,s/d),y=p/t,g=p/s,S=[];for(const{points:b}of l){const A=o?E(this,Fx,KO).call(this,b):b;if(!A)continue;S.push(A);const _=A.length,T=new Float32Array(_),k=new Float32Array(3*(_===2?2:_-2));if(f.push({line:k,points:T}),_===2){T[0]=A[0]*y,T[1]=A[1]*g,k.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[P,R,L,I]=A;P*=y,R*=g,L*=y,I*=g,T.set([P,R,L,I],0),k.set([NaN,NaN,NaN,NaN,P,R],0);for(let O=4;O<_;O+=2){const D=T[O]=A[O]*y,V=T[O+1]=A[O+1]*g;k.set(J.createBezierPoints(P,R,L,I,D,V),(O-2)*3),[P,R,L,I]=[L,I,D,V]}}if(f.length===0)return null;const v=a?new LE:new wv;return v.build(f,t,s,1,r,a?0:h,i),{outline:v,newCurves:S,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,l=0;for(const A of e){l+=A.length;for(let _=2,T=A.length;_<T;_++){const k=A[_]-A[_-2];o=Math.min(o,k),a=Math.max(a,k)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=l0+tp*d,f=new Uint32Array(h);let p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=r,f[p++]=i,f[p++]=t?0:1,f[p++]=Math.max(0,Math.floor(s??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(const A of e)f[p++]=A.length-2,f[p++]=A[0],f[p++]=A[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const S=u.prototype.constructor;for(const A of e){const _=new S(A.length-2);for(let T=2,k=A.length;T<k;T++)_[T-2]=A[T]-A[T-2];g.write(_)}g.close();const v=await new Response(y.readable).arrayBuffer(),b=new Uint8Array(v);return KI(b)}static async decompressSignature(e){try{const t=JG(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const A of s)o||(o=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),o.set(A,a),a+=A.length;const l=new Uint32Array(o.buffer,0,o.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=l[2],h=l[3],f=l[4]===0,p=l[5],y=l[6],g=l[7],S=[],v=(l0+tp*y)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(g){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,v);break}a=0;for(let A=0;A<y;A++){const _=l[tp*A+l0],T=new Float32Array(_+2);S.push(T);for(let k=0;k<tp-1;k++)T[k]=l[tp*A+l0+k+1];for(let k=0;k<_;k++)T[k+2]=T[k]+b[a++]}return{areContours:f,thickness:p,outlines:S,width:d,height:h}}catch(t){return ae(`decompressSignature: ${t}`),null}}}Kc=new WeakMap,Hy=new WeakSet,DE=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},mr=new WeakMap,jx=new WeakSet,WO=function(e,t,s,r,i,o,a){const l=E(this,Hy,DE).call(this,s,r,i,o);for(let u=0;u<8;u++){const d=(-u+l-a+16)%8,h=c(this,mr)[2*d],f=c(this,mr)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},Ox=new WeakSet,qO=function(e,t,s,r,i,o,a){const l=E(this,Hy,DE).call(this,s,r,i,o);for(let u=0;u<8;u++){const d=(u+l+a+16)%8,h=c(this,mr)[2*d],f=c(this,mr)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},Gy=new WeakSet,IE=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=e[d]<=r?1:0;for(let d=1;d<s-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*s-1-d]=0;let a=1,l;const u=[];for(let d=1;d<s-1;d++){l=1;for(let h=1;h<t-1;h++){const f=d*t+h,p=o[f];if(p===0)continue;let y=d,g=h;if(p===1&&o[f-1]===0)a+=1,g-=1;else if(p>=1&&o[f+1]===0)a+=1,g+=1,p>1&&(l=p);else{p!==1&&(l=Math.abs(p));continue}const S=[h,d],v=g===h+1,b={isHole:v,points:S,id:a,parent:0};u.push(b);let A;for(const O of u)if(O.id===l){A=O;break}A?A.isHole?b.parent=v?A.parent:l:b.parent=v?l:A.parent:b.parent=v?l:0;const _=E(this,jx,WO).call(this,o,t,d,h,y,g,0);if(_===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let T=c(this,mr)[2*_],k=c(this,mr)[2*_+1];const P=d+T,R=h+k;y=P,g=R;let L=d,I=h;for(;;){const O=E(this,Ox,qO).call(this,o,t,L,I,y,g,1);T=c(this,mr)[2*O],k=c(this,mr)[2*O+1];const D=L+T,V=I+k;S.push(V,D);const j=L*t+I;if(o[j+1]===0?o[j]=-a:o[j]===1&&(o[j]=a),D===d&&V===h&&L===P&&I===R){o[f]!==1&&(l=Math.abs(o[f]));break}else y=L,g=I,L=D,I=V}}}return u},tf=new WeakSet,tb=function(e,t,s,r){if(s-t<=4){for(let P=t;P<s-2;P+=2)r.push(e[P],e[P+1]);return}const i=e[t],o=e[t+1],a=e[s-4]-i,l=e[s-3]-o,u=Math.hypot(a,l),d=a/u,h=l/u,f=d*o-h*i,p=l/a,y=1/u,g=Math.atan(p),S=Math.cos(g),v=Math.sin(g),b=y*(Math.abs(S)+Math.abs(v)),A=y*(1-b+b**2),_=Math.max(Math.atan(Math.abs(v+S)*A),Math.atan(Math.abs(v-S)*A));let T=0,k=t;for(let P=t+2;P<s-2;P+=2){const R=Math.abs(f-d*e[P+1]+h*e[P]);R>T&&(k=P,T=R)}T>(u*_)**2?(E(this,tf,tb).call(this,e,t,k+2,r),E(this,tf,tb).call(this,e,k,s,r)):r.push(i,o)},Fx=new WeakSet,KO=function(e){const t=[],s=e.length;return E(this,tf,tb).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},Bx=new WeakSet,XO=function(e,t,s,r,i,o){const a=new Float32Array(o**2),l=-2*r**2,u=o>>1;for(let g=0;g<o;g++){const S=(g-u)**2;for(let v=0;v<o;v++)a[g*o+v]=Math.exp((S+(v-u)**2)/l)}const d=new Float32Array(256),h=-2*i**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,p=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<s;g++)for(let S=0;S<t;S++){const v=g*t+S,b=e[v];let A=0,_=0;for(let k=0;k<o;k++){const P=g+k-u;if(!(P<0||P>=s))for(let R=0;R<o;R++){const L=S+R-u;if(L<0||L>=t)continue;const I=e[P*t+L],O=a[k*o+R]*d[Math.abs(I-b)];A+=I*O,_+=O}}const T=p[v]=Math.round(A/_);y[T]++}return[p,y]},$x=new WeakSet,YO=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},Wy=new WeakSet,jE=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,l=s.length;a<l;a++){const u=s[a]=e[a<<2];r=Math.max(r,u),i=Math.min(i,u)}const o=255/(r-i);for(let a=0,l=s.length;a<l;a++)s[a]=(s[a]-i)*o;return s},qy=new WeakSet,OE=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(l=>l!==0);let o=i,a=i;for(t=i;t<256;t++){const l=e[t];l>s&&(t-o>r&&(r=t-o,a=t-1),s=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Ux=new WeakSet,QO=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=c(this,Kc);let o=s,a=r;if(s>i||r>i){let f=s,p=r,y=Math.log2(Math.max(s,r)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){o=Math.ceil(f/2),a=Math.ceil(p/2);const b=new OffscreenCanvas(o,a);b.getContext("2d").drawImage(e,0,0,f,p,0,0,o,a),f=o,p=a,e!==t&&e.close(),e=b.transferToImageBitmap()}const S=Math.min(i/o,i/a);o=Math.round(o*S),a=Math.round(a*S)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[E(this,Wy,jE).call(this,d),o,a]},w(Ct,Hy),w(Ct,jx),w(Ct,Ox),w(Ct,Gy),w(Ct,tf),w(Ct,Fx),w(Ct,Bx),w(Ct,$x),w(Ct,Wy),w(Ct,qy),w(Ct,Ux),w(Ct,Kc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Ct,mr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class WT extends $O{constructor(){super(),super.updateProperties({fill:ze._defaultLineColor,"stroke-width":0})}clone(){const e=new WT;return e.updateAll(this),e}}class qT extends N1{constructor(e){super(e),super.updateProperties({stroke:ze._defaultLineColor,"stroke-width":1})}clone(){const e=new qT(this._viewParameters);return e.updateAll(this),e}}var Ca,ti,Ta,Xc;const es=class es extends Jb{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});w(this,Ca,!1);w(this,ti,null);w(this,Ta,null);w(this,Xc,null);this._willKeepAspectRatio=!0,x(this,Ta,t.signatureData||null),x(this,ti,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){ze.initialize(t,s),this._defaultDrawingOptions=new WT,this._defaultDrawnSignatureOptions=new qT(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return de(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!c(this,ti)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(c(this,Ta)){const{lines:i,mustSmooth:o,areContours:a,description:l,uuid:u,heightInPage:d}=c(this,Ta),{rawDims:{pageWidth:h,pageHeight:f},rotation:p}=this.parent.viewport,y=Ct.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:p,innerMargin:es._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,d,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:c(this,ti)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){x(this,Xc,t),this.addEditToolbar()}getUuid(){return c(this,Xc)}get description(){return c(this,ti)}set description(t){x(this,ti,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=c(this,Ta),a=Math.max(i,o),l=Ct.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:a}=this,{outline:l}=x(this,Ta,t);x(this,Ca,l instanceof LE),this.description=r;let u;c(this,Ca)?u=es.getDefaultDrawingOptions():(u=es._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[,d]=this.pageDimensions;let h=s/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Ct.process(t,s,r,i,es._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Ct.extractContoursFromText(t,s,r,i,o,es._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Ct.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:es._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=es.getDefaultDrawingOptions():(this._drawingOptions=es._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:c(this,Ca),color:[0,0,0],thickness:c(this,Ca)?0:i});return this.addComment(o),t?(o.paths={lines:s,points:r},o.uuid=c(this,Xc),o.isCopy=!0):o.lines=s,c(this,ti)&&(o.accessibilityData={type:"Figure",alt:c(this,ti)}),o}static deserializeDraw(t,s,r,i,o,a){return a.areContours?LE.deserialize(t,s,r,i,o,a):wv.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return x(i,Ca,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",x(i,Xc,t.uuid),i}};Ca=new WeakMap,ti=new WeakMap,Ta=new WeakMap,Xc=new WeakMap,G(es,"_type","signature"),G(es,"_editorType",oe.SIGNATURE),G(es,"_defaultDrawingOptions",null);let FE=es;var Je,Vt,ka,eo,Pa,nf,to,Yc,ni,vs,sf,Qc,Pp,Jc,Rp,rf,nb,of,sb,af,rb,Ky,$E,lf,ib,Vx,JO;class BE extends ze{constructor(t){super({...t,name:"stampEditor"});w(this,Qc);w(this,Jc);w(this,rf);w(this,of);w(this,af);w(this,Ky);w(this,lf);w(this,Vx);w(this,Je,null);w(this,Vt,null);w(this,ka,null);w(this,eo,null);w(this,Pa,null);w(this,nf,"");w(this,to,null);w(this,Yc,!1);w(this,ni,null);w(this,vs,!1);w(this,sf,!1);x(this,eo,t.bitmapUrl),x(this,Pa,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){ze.initialize(t,s)}static isHandlingMimeForPasting(t){return Hb.includes(t)}static paste(t,s){s.pasteEditor({mode:oe.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;c(this,Vt)&&(x(this,Je,null),this._uiManager.imageManager.deleteId(c(this,Vt)),(t=c(this,to))==null||t.remove(),x(this,to,null),c(this,ni)&&(clearTimeout(c(this,ni)),x(this,ni,null))),super.remove()}rebuild(){if(!this.parent){c(this,Vt)&&E(this,rf,nb).call(this);return}super.rebuild(),this.div!==null&&(c(this,Vt)&&c(this,to)===null&&E(this,rf,nb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(c(this,ka)||c(this,Je)||c(this,eo)||c(this,Pa)||c(this,Vt)||c(this,Yc))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),c(this,Yc)||(c(this,Je)?E(this,of,sb).call(this):E(this,rf,nb).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(x(this,Vt,r),i&&x(this,Je,i),x(this,Yc,!1),E(this,of,sb).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;c(this,ni)!==null&&clearTimeout(c(this,ni)),x(this,ni,setTimeout(()=>{x(this,ni,null),E(this,Ky,$E).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:o}=c(this,Je),a=new Er;let l=c(this,Je),u=i,d=o,h=null;if(s){if(i>s||o>s){const P=Math.min(s/i,s/o);u=Math.floor(i*P),d=Math.floor(o*P)}h=document.createElement("canvas");const p=h.width=Math.ceil(u*a.sx),y=h.height=Math.ceil(d*a.sy);c(this,vs)||(l=E(this,af,rb).call(this,p,y));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let S="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":tW.isDarkMode&&(S="#8f8f9d",v="#42414d");const b=15,A=b*a.sx,_=b*a.sy,T=new OffscreenCanvas(A*2,_*2),k=T.getContext("2d");k.fillStyle=S,k.fillRect(0,0,A*2,_*2),k.fillStyle=v,k.fillRect(0,0,A,_),k.fillRect(A,_,A,_),g.fillStyle=g.createPattern(T,"repeat"),g.fillRect(0,0,p,y),g.drawImage(l,0,0,l.width,l.height,0,0,p,y)}let f=null;if(r){let p,y;if(a.symmetric&&l.width<t&&l.height<t)p=l.width,y=l.height;else if(l=c(this,Je),i>t||o>t){const v=Math.min(t/i,t/o);p=Math.floor(i*v),y=Math.floor(o*v),c(this,vs)||(l=E(this,af,rb).call(this,p,y))}const S=new OffscreenCanvas(p,y).getContext("2d",{willReadFrequently:!0});S.drawImage(l,0,0,l.width,l.height,0,0,p,y),f={width:p,height:y,data:S.getImageData(0,0,p,y).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,s,r){var S;let i=null,o=!1;if(t instanceof pO){const{data:{rect:v,rotation:b,id:A,structParent:_,popupRef:T,richText:k,contentsObj:P,creationDate:R,modificationDate:L},container:I,parent:{page:{pageNumber:O}},canvas:D}=t;let V,j;D?(delete t.canvas,{id:V,bitmap:j}=r.imageManager.getFromCanvas(I.id,D),D.remove()):(o=!0,t._hasNoCanvas=!0);const N=((S=await s._structTree.getAriaAttributes(`${DT}${A}`))==null?void 0:S.get("aria-label"))||"";i=t={annotationType:oe.STAMP,bitmapId:V,bitmap:j,pageIndex:O-1,rect:v.slice(0),rotation:b,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:N},isSvg:!1,structParent:_,popupRef:T,richText:k,comment:(P==null?void 0:P.str)||null,creationDate:R,modificationDate:L}}const a=await super.deserialize(t,s,r),{rect:l,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:p}=t;o?(r.addMissingCanvas(t.id,a),x(a,Yc,!0)):h&&r.imageManager.isValidId(h)?(x(a,Vt,h),u&&x(a,Je,u)):x(a,eo,d),x(a,vs,f);const[y,g]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/g,p&&(a.altTextData=p),a._initialData=i,t.comment&&a.setCommentData(t),x(a,sf,!!i),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:c(this,Vt),isSvg:c(this,vs)});if(this.addComment(r),t)return r.bitmapUrl=E(this,lf,ib).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=E(this,Vx,JO).call(this,r);return l.isSame?null:(l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const a=c(this,vs)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(c(this,Vt)))s.stamps.set(c(this,Vt),{area:a,serialized:r}),r.bitmap=E(this,lf,ib).call(this,!1);else if(c(this,vs)){const l=s.stamps.get(c(this,Vt));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=E(this,lf,ib).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Je=new WeakMap,Vt=new WeakMap,ka=new WeakMap,eo=new WeakMap,Pa=new WeakMap,nf=new WeakMap,to=new WeakMap,Yc=new WeakMap,ni=new WeakMap,vs=new WeakMap,sf=new WeakMap,Qc=new WeakSet,Pp=function(t,s=!1){if(!t){this.remove();return}x(this,Je,t.bitmap),s||(x(this,Vt,t.id),x(this,vs,t.isSvg)),t.file&&x(this,nf,t.file.name),E(this,of,sb).call(this)},Jc=new WeakSet,Rp=function(){if(x(this,ka,null),this._uiManager.enableWaiting(!1),!!c(this,to)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Je)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Je)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},rf=new WeakSet,nb=function(){if(c(this,Vt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Vt)).then(r=>E(this,Qc,Pp).call(this,r,!0)).finally(()=>E(this,Jc,Rp).call(this));return}if(c(this,eo)){const r=c(this,eo);x(this,eo,null),this._uiManager.enableWaiting(!0),x(this,ka,this._uiManager.imageManager.getFromUrl(r).then(i=>E(this,Qc,Pp).call(this,i)).finally(()=>E(this,Jc,Rp).call(this)));return}if(c(this,Pa)){const r=c(this,Pa);x(this,Pa,null),this._uiManager.enableWaiting(!0),x(this,ka,this._uiManager.imageManager.getFromFile(r).then(i=>E(this,Qc,Pp).call(this,i)).finally(()=>E(this,Jc,Rp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Hb.join(",");const s=this._uiManager._signal;x(this,ka,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),E(this,Qc,Pp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>E(this,Jc,Rp).call(this))),t.click()},of=new WeakSet,sb=function(){var u;const{div:t}=this;let{width:s,height:r}=c(this,Je);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const d=Math.min(a*i/s,a*o/r);s*=d,r*=d}this._uiManager.enableWaiting(!1);const l=x(this,to,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=s/i,this.height=r/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),E(this,Ky,$E).call(this),c(this,sf)||(this.parent.addUndoableEditor(this),x(this,sf,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,nf)&&this.div.setAttribute("aria-description",c(this,nf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},af=new WeakSet,rb=function(t,s){const{width:r,height:i}=c(this,Je);let o=r,a=i,l=c(this,Je);for(;o>2*t||a>2*s;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(l,0,0,u,d,0,0,o,a),l=h.transferToImageBitmap()}return l},Ky=new WeakSet,$E=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new Er,a=Math.ceil(r*t*o.sx),l=Math.ceil(i*s*o.sy),u=c(this,to);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const d=c(this,vs)?c(this,Je):E(this,af,rb).call(this,a,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,l)},lf=new WeakSet,ib=function(t){if(t){if(c(this,vs)){const i=this._uiManager.imageManager.getSvgUrl(c(this,Vt));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=c(this,Je),s.getContext("2d").drawImage(c(this,Je),0,0),s.toDataURL()}if(c(this,vs)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*wo.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*wo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(c(this,Je),0,0,c(this,Je).width,c(this,Je).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(c(this,Je))},Vx=new WeakSet,JO=function(t){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},G(BE,"_type","stamp"),G(BE,"_editorType",oe.STAMP);var Zc,cf,Ra,Na,no,Gn,Ma,uf,df,gr,so,zt,ro,La,hf,se,Da,Xy,UE,zx,ZO,Gs,Rr,Yy,VE,Qy,zE,ff,ob;const nr=class nr{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:l,viewport:u,l10n:d}){w(this,Xy);w(this,zx);w(this,Gs);w(this,Yy);w(this,Qy);w(this,ff);w(this,Zc,void 0);w(this,cf,!1);w(this,Ra,null);w(this,Na,null);w(this,no,null);w(this,Gn,new Map);w(this,Ma,!1);w(this,uf,!1);w(this,df,!1);w(this,gr,null);w(this,so,null);w(this,zt,null);w(this,ro,null);w(this,La,null);w(this,hf,-1);w(this,se,void 0);const h=[...c(nr,Da).values()];if(!nr._initialized){nr._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),x(this,se,e),this.pageIndex=t,this.div=s,x(this,Zc,i),x(this,Ra,o),this.viewport=u,x(this,zt,l),this.drawLayer=a,this._structTree=r,c(this,se).addLayer(this)}get isEmpty(){return c(this,Gn).size===0}get isInvisible(){return this.isEmpty&&c(this,se).getMode()===oe.NONE}updateToolbar(e){c(this,se).updateToolbar(e)}updateMode(e=c(this,se).getMode()){switch(E(this,ff,ob).call(this),e){case oe.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case oe.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case oe.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===oe.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of c(nr,Da).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,zt))==null?void 0:t.div)}setEditingState(e){c(this,se).setEditingState(e)}addCommands(e){c(this,se).addCommands(e)}cleanUndoStack(e){c(this,se).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,Ra))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;x(this,df,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=c(this,La))==null||s.abort(),x(this,La,null);const e=new Set;for(const r of c(this,Xy,UE))r.enableEditing(),r.show(!0),r.annotationElementId&&(c(this,se).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=c(this,Ra);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),c(this,se).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}x(this,df,!1),c(this,se)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(x(this,uf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),c(this,zt)&&!c(this,La)){x(this,La,new AbortController);const r=c(this,se).combinedSignal(c(this,La));c(this,zt).div.addEventListener("pointerdown",i=>{const{clientX:a,clientY:l,timeStamp:u}=i,d=c(this,hf);if(u-d>500){x(this,hf,u);return}x(this,hf,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(a,l);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let p;const y=new RegExp(`^${ym}[0-9]+$`);for(const S of f)if(y.test(S.id)){p=S.id;break}if(!p)return;const g=c(this,Gn).get(p);(g==null?void 0:g.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),g.dblclick(i))},{signal:r,capture:!0})}const e=c(this,Ra);if(e){const r=new Map,i=new Map;for(const a of c(this,Xy,UE)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){r.set(a.annotationElementId,a);continue}else i.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:l}=a.data;if(c(this,se).isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let u=i.get(l);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=r.get(l),u&&(c(this,se).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}E(this,ff,ob).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of c(nr,Da).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,uf,!1)}getEditableAnnotation(e){var t;return((t=c(this,Ra))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,se).getActive()!==e&&c(this,se).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,zt))!=null&&e.div&&!c(this,ro)){x(this,ro,new AbortController);const t=c(this,se).combinedSignal(c(this,ro));c(this,zt).div.addEventListener("pointerdown",E(this,zx,ZO).bind(this),{signal:t}),c(this,zt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,zt))!=null&&e.div&&c(this,ro)&&(c(this,ro).abort(),x(this,ro,null),c(this,zt).div.classList.remove("highlighting"))}enableClick(){if(c(this,Na))return;x(this,Na,new AbortController);const e=c(this,se).combinedSignal(c(this,Na));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=c(this,Na))==null||e.abort(),x(this,Na,null)}attach(e){c(this,Gn).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,se).isDeletedAnnotationElement(t)&&c(this,se).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Gn).delete(e.id),(t=c(this,Zc))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,uf)&&e.annotationElementId&&c(this,se).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,se).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,se).addDeletedAnnotationElement(e.annotationElementId),ze.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,se).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!c(this,df)),c(this,se).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,no)&&(e._focusEventsAllowed=!1,x(this,no,setTimeout(()=>{x(this,no,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,se)._signal}),t.focus())},0))),e._structTreeParentId=(s=c(this,Zc))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of c(this,Gn).values())if(t.uid===e)return t;return null}getNextId(){return c(this,se).getId()}combinedSignal(e){return c(this,se).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Gs,Rr))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await c(this,se).updateMode(e.mode);const{offsetX:s,offsetY:r}=E(this,Qy,zE).call(this),i=this.getNextId(),o=E(this,Yy,VE).call(this,{parent:this,id:i,x:s,y:r,uiManager:c(this,se),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=c(nr,Da).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,se)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=E(this,Yy,VE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,se),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(E(this,Qy,zE).call(this),!0,e)}setSelected(e){c(this,se).setSelected(e)}toggleSelected(e){c(this,se).toggleSelected(e)}unselect(e){c(this,se).unselect(e)}pointerup(e){var r;const{isMac:t}=qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!c(this,Ma)||(x(this,Ma,!1),(r=c(this,Gs,Rr))!=null&&r.isDrawer&&c(this,Gs,Rr).supportMultipleDrawings))return;if(!c(this,cf)){x(this,cf,!0);return}const s=c(this,se).getMode();if(s===oe.STAMP||s===oe.SIGNATURE){c(this,se).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(c(this,se).getMode()===oe.HIGHLIGHT&&this.enableTextSelection(),c(this,Ma)){x(this,Ma,!1);return}const{isMac:t}=qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(x(this,Ma,!0),(r=c(this,Gs,Rr))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=c(this,se).getActive();x(this,cf,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),c(this,gr)){c(this,Gs,Rr).startDrawing(this,c(this,se),!1,e);return}c(this,se).setCurrentDrawingSession(this),x(this,gr,new AbortController);const t=c(this,se).combinedSignal(c(this,gr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(x(this,so,null),this.commitOrRemove())},{signal:t}),c(this,Gs,Rr).startDrawing(this,c(this,se),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&x(this,so,t);return}c(this,so)&&setTimeout(()=>{var t;(t=c(this,so))==null||t.focus(),x(this,so,null)},0)}endDrawingSession(e=!1){return c(this,gr)?(c(this,se).setCurrentDrawingSession(null),c(this,gr).abort(),x(this,gr,null),x(this,so,null),c(this,Gs,Rr).endDrawing(e)):null}findNewParent(e,t,s){const r=c(this,se).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return c(this,gr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){c(this,gr)&&c(this,Gs,Rr).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=c(this,se).getActive())==null?void 0:e.parent)===this&&(c(this,se).commitOrRemove(),c(this,se).setActiveEditor(null)),c(this,no)&&(clearTimeout(c(this,no)),x(this,no,null));for(const s of c(this,Gn).values())(t=c(this,Zc))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,c(this,Gn).clear(),c(this,se).removeLayer(this)}render({viewport:e}){this.viewport=e,Ja(this.div,e);for(const t of c(this,se).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,se).commitOrRemove(),E(this,ff,ob).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Ja(this.div,{rotation:s}),t!==s)for(const r of c(this,Gn).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,se).viewParameters.realScale}};Zc=new WeakMap,cf=new WeakMap,Ra=new WeakMap,Na=new WeakMap,no=new WeakMap,Gn=new WeakMap,Ma=new WeakMap,uf=new WeakMap,df=new WeakMap,gr=new WeakMap,so=new WeakMap,zt=new WeakMap,ro=new WeakMap,La=new WeakMap,hf=new WeakMap,se=new WeakMap,Da=new WeakMap,Xy=new WeakSet,UE=function(){return c(this,Gn).size!==0?c(this,Gn).values():c(this,se).getEditors(this.pageIndex)},zx=new WeakSet,ZO=function(e){c(this,se).unselectAll();const{target:t}=e;if(t===c(this,zt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,zt).div.contains(t)){const{isMac:s}=qt.platform;if(e.button!==0||e.ctrlKey&&s)return;c(this,se).showAllEditors("highlight",!0,!0),c(this,zt).div.classList.add("free"),this.toggleDrawing(),Qb.startHighlighting(this,c(this,se).direction==="ltr",{target:c(this,zt).div,x:e.x,y:e.y}),c(this,zt).div.addEventListener("pointerup",()=>{c(this,zt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,se)._signal}),e.preventDefault()}},Gs=new WeakSet,Rr=function(){return c(nr,Da).get(c(this,se).getMode())},Yy=new WeakSet,VE=function(e){const t=c(this,Gs,Rr);return t?new t.prototype.constructor(e):null},Qy=new WeakSet,zE=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),l=Math.min(window.innerHeight,t+r),u=(i+a)/2-e,d=(o+l)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},ff=new WeakSet,ob=function(){for(const e of c(this,Gn).values())e.isEmpty()&&e.remove()},G(nr,"_initialized",!1),w(nr,Da,new Map([AE,ME,BE,Qb,FE].map(e=>[e._editorType,e])));let Zb=nr;var yr,Cn,eu,Jy,Hx,eF,Zy,HE,Gx,tF,ev,GE;const Rt=class Rt{constructor({pageIndex:e}){w(this,Zy);w(this,Gx);w(this,ev);w(this,yr,null);w(this,Cn,new Map);w(this,eu,new Map);this.pageIndex=e}setParent(e){if(!c(this,yr)){x(this,yr,e);return}if(c(this,yr)!==e){if(c(this,Cn).size>0)for(const t of c(this,Cn).values())t.remove(),e.append(t);x(this,yr,e)}}static get _svgFactory(){return de(this,"_svgFactory",new _m)}draw(e,t=!1,s=!1){const r=kt(Rt,Jy)._++,i=E(this,Zy,HE).call(this),o=Rt._svgFactory.createElement("defs");i.append(o);const a=Rt._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&c(this,eu).set(r,a);const u=s?E(this,Gx,tF).call(this,o,l):null,d=Rt._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(i,e),c(this,Cn).set(r,i),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=kt(Rt,Jy)._++,r=E(this,Zy,HE).call(this),i=Rt._svgFactory.createElement("defs");r.append(i);const o=Rt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Rt._svgFactory.createElement("mask");i.append(h),l=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=Rt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const p=Rt._svgFactory.createElement("use");h.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const u=Rt._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const d=u.cloneNode();return r.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),c(this,Cn).set(s,r),s}finalizeDraw(e,t){c(this,eu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,a=typeof e=="number"?c(this,Cn).get(e):e;if(a){if(s&&E(this,ev,GE).call(this,a,s),r&&E(l=Rt,Hx,eF).call(l,a,r),i){const{classList:u}=a;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;E(this,ev,GE).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const s=c(this,Cn).get(e);s&&(c(t,yr).append(s),c(this,Cn).delete(e),c(t,Cn).set(e,s))}remove(e){c(this,eu).delete(e),c(this,yr)!==null&&(c(this,Cn).get(e).remove(),c(this,Cn).delete(e))}destroy(){x(this,yr,null);for(const e of c(this,Cn).values())e.remove();c(this,Cn).clear(),c(this,eu).clear()}};yr=new WeakMap,Cn=new WeakMap,eu=new WeakMap,Jy=new WeakMap,Hx=new WeakSet,eF=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},Zy=new WeakSet,HE=function(){const e=Rt._svgFactory.create(1,1,!0);return c(this,yr).append(e),e.setAttribute("aria-hidden",!0),e},Gx=new WeakSet,tF=function(e,t){const s=Rt._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Rt._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},ev=new WeakSet,GE=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},w(Rt,Hx),w(Rt,Jy,0);let ew=Rt;globalThis._pdfjsTestingUtils={HighlightOutliner:_E};globalThis.pdfjsLib={AbortException:bo,AnnotationEditorLayer:Zb,AnnotationEditorParamsType:ve,AnnotationEditorType:oe,AnnotationEditorUIManager:Za,AnnotationLayer:GT,AnnotationMode:ri,AnnotationType:vt,applyOpacity:ZI,build:nO,ColorPicker:Sm,createValidAbsoluteUrl:NT,CSSConstants:JI,DOMSVGFactory:_m,DrawLayer:ew,FeatureTest:qt,fetchData:Lf,findContrastColor:ej,getDocument:$T,getFilenameFromUrl:XI,getPdfFilenameFromUrl:YI,getRGB:Df,getUuid:LT,getXfaPageViewport:QI,GlobalWorkerOptions:Ks,ImageKind:Kp,InvalidPDFException:zb,isDataScheme:yv,isPdfFile:P1,isValidExplicitDest:Lj,MathClamp:gn,noContextMenu:Cs,normalizeUnicode:qI,OPS:_f,OutputScale:Er,PasswordResponses:GI,PDFDataRangeTransport:UT,PDFDateString:wm,PDFWorker:Ef,PermissionFlag:HI,PixelsPerInch:wo,RenderingCancelledException:k1,renderRichText:jT,ResponseException:vm,setLayerDimensions:Ja,shadow:de,SignatureExtractor:Ct,stopEvent:ot,SupportedImageMimeTypes:Hb,TextLayer:Am,TouchManager:xm,updateUrlHash:MT,Util:Q,VerbosityLevel:pv,version:VT,XfaLayer:IT};const kq=Object.freeze(Object.defineProperty({__proto__:null,AbortException:bo,AnnotationEditorLayer:Zb,AnnotationEditorParamsType:ve,AnnotationEditorType:oe,AnnotationEditorUIManager:Za,AnnotationLayer:GT,AnnotationMode:ri,AnnotationType:vt,CSSConstants:JI,ColorPicker:Sm,DOMSVGFactory:_m,DrawLayer:ew,FeatureTest:qt,GlobalWorkerOptions:Ks,ImageKind:Kp,InvalidPDFException:zb,MathClamp:gn,OPS:_f,OutputScale:Er,PDFDataRangeTransport:UT,PDFDateString:wm,PDFWorker:Ef,PasswordResponses:GI,PermissionFlag:HI,PixelsPerInch:wo,RenderingCancelledException:k1,ResponseException:vm,SignatureExtractor:Ct,SupportedImageMimeTypes:Hb,TextLayer:Am,TouchManager:xm,Util:Q,VerbosityLevel:pv,XfaLayer:IT,applyOpacity:ZI,build:nO,createValidAbsoluteUrl:NT,fetchData:Lf,findContrastColor:ej,getDocument:$T,getFilenameFromUrl:XI,getPdfFilenameFromUrl:YI,getRGB:Df,getUuid:LT,getXfaPageViewport:QI,isDataScheme:yv,isPdfFile:P1,isValidExplicitDest:Lj,noContextMenu:Cs,normalizeUnicode:qI,renderRichText:jT,setLayerDimensions:Ja,shadow:de,stopEvent:ot,updateUrlHash:MT,version:VT},Symbol.toStringTag,{value:"Module"}));var _2=Object.prototype.hasOwnProperty;function E2(n,e,t){for(t of n.keys())if(hd(t,e))return t}function hd(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&hd(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=E2(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=E2(e,r),!r)||!hd(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(_2.call(n,t)&&++s&&!_2.call(e,t)||!(t in e)||!hd(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function xv(n){let e=!1;return{promise:new Promise((s,r)=>{n.then(i=>!e&&s(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const Pq=["onCopy","onCut","onPaste"],Rq=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],Nq=["onFocus","onBlur"],Mq=["onInput","onInvalid","onReset","onSubmit"],Lq=["onLoad","onError"],Dq=["onKeyDown","onKeyPress","onKeyUp"],Iq=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],jq=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],Oq=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],Fq=["onSelect"],Bq=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],$q=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],Uq=["onScroll"],Vq=["onWheel"],zq=["onAnimationStart","onAnimationEnd","onAnimationIteration"],Hq=["onTransitionEnd"],Gq=["onToggle"],Wq=["onChange"],qq=[...Pq,...Rq,...Nq,...Mq,...Lq,...Dq,...Iq,...jq,...Oq,...Fq,...Bq,...$q,...Uq,...Vq,...zq,...Hq,...Wq,...Gq];function nF(n,e){const t={};for(const s of qq){const r=n[s];r&&(e?t[s]=i=>r(i,e(s)):t[s]=r)}return t}var Kq=!0,zA="Invariant failed";function Oe(n,e){if(!n){if(Kq)throw new Error(zA);var t=typeof e=="function"?e():e,s=t?"".concat(zA,": ").concat(t):zA;throw new Error(s)}}var Xq=function(){},Yq=Xq;const vn=el(Yq),Qq=C.createContext(null),sF=Qq,Jq="noopener noreferrer nofollow";class Zq{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Oe(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){Oe(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||Jq,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Oe(this.pdfDocument,"PDF document not loaded."),Oe(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Oe(Array.isArray(t),`"${t}" is not a valid destination array.`);const s=t[0];new Promise(r=>{Oe(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{Oe(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?r(s):Oe(!1,`"${s}" is not a valid destination reference.`)}).then(r=>{const i=r+1;Oe(this.pdfViewer,"PDF viewer is not initialized."),Oe(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;Oe(this.pdfViewer,"PDF viewer is not initialized."),Oe(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function fd({children:n,type:e}){return m.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const e9={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},C2=e9;function t9(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Cf(){return C.useReducer(t9,{value:void 0,error:void 0})}const M1=typeof window<"u",rF=M1&&window.location.protocol==="file:";function n9(n){return typeof n<"u"}function ll(n){return n9(n)&&n!==null}function s9(n){return typeof n=="string"}function r9(n){return n instanceof ArrayBuffer}function i9(n){return Oe(M1,"isBlob can only be used in a browser environment"),n instanceof Blob}function WE(n){return s9(n)&&/^data:/.test(n)}function T2(n){Oe(WE(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function o9(){return M1&&window.devicePixelRatio||1}const iF="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function k2(){vn(!rF,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${iF}`)}function a9(){vn(!rF,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${iF}`)}function hu(n){n!=null&&n.cancel&&n.cancel()}function qE(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function l9(n){return n.name==="RenderingCancelledException"}function c9(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:u9}=kq,d9=(n,e)=>{switch(e){case C2.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case C2.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function P2(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const h9=C.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:o,inputRef:a,imageResourcesPath:l,loading:u="Loading PDF",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:p,onLoadSuccess:y,onPassword:g=d9,onSourceError:S,onSourceSuccess:v,options:b,renderMode:A,rotate:_,scale:T,...k},P){const[R,L]=Cf(),{value:I,error:O}=R,[D,V]=Cf(),{value:j,error:N}=D,M=C.useRef(new Zq),B=C.useRef([]),F=C.useRef(void 0),$=C.useRef(void 0);o&&o!==F.current&&P2(o)&&(vn(!hd(o,F.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),F.current=o),b&&b!==$.current&&(vn(!hd(b,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=b);const U=C.useRef({scrollPageIntoView:ne=>{const{dest:Y,pageNumber:dt,pageIndex:At=dt-1}=ne;if(h){h({dest:Y,pageIndex:At,pageNumber:dt});return}const ci=B.current[At];if(ci){ci.scrollIntoView();return}vn(!1,`An internal link leading to page ${dt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});C.useImperativeHandle(P,()=>({linkService:M,pages:B,viewer:U}),[]);function q(){v&&v()}function K(){O&&(vn(!1,O.toString()),S&&S(O))}function z(){L({type:"RESET"})}C.useEffect(z,[o,L]);const X=C.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return WE(o)?{data:T2(o)}:(k2(),{url:o});if(o instanceof u9)return{range:o};if(r9(o))return{data:o};if(M1&&i9(o))return{data:await c9(o)};if(Oe(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),Oe(P2(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(WE(o.url)){const{url:ne,...Y}=o;return{data:T2(ne),...Y}}k2()}return o},[o]);C.useEffect(()=>{const ne=xv(X());return ne.promise.then(Y=>{L({type:"RESOLVE",value:Y})}).catch(Y=>{L({type:"REJECT",error:Y})}),()=>{hu(ne)}},[X,L]),C.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){K();return}q()}},[I]);function pe(){j&&(y&&y(j),B.current=new Array(j.numPages),M.current.setDocument(j))}function Ce(){N&&(vn(!1,N.toString()),f&&f(N))}C.useEffect(function(){V({type:"RESET"})},[V,I]),C.useEffect(function(){if(!I)return;const Y=b?{...I,...b}:I,dt=$T(Y);p&&(dt.onProgress=p),g&&(dt.onPassword=g);const At=dt,ci=At.promise.then(Ao=>{V({type:"RESOLVE",value:Ao})}).catch(Ao=>{At.destroyed||V({type:"REJECT",error:Ao})});return()=>{ci.finally(()=>At.destroy())}},[b,V,I]),C.useEffect(()=>{if(!(typeof j>"u")){if(j===!1){Ce();return}pe()}},[j]),C.useEffect(function(){M.current.setViewer(U.current),M.current.setExternalLinkRel(r),M.current.setExternalLinkTarget(i)},[r,i]);const me=C.useCallback((ne,Y)=>{B.current[ne]=Y},[]),Ps=C.useCallback(ne=>{delete B.current[ne]},[]),yt=C.useMemo(()=>({imageResourcesPath:l,linkService:M.current,onItemClick:h,pdf:j,registerPage:me,renderMode:A,rotate:_,scale:T,unregisterPage:Ps}),[l,h,j,me,A,_,T,Ps]),xe=C.useMemo(()=>nF(k,()=>j),[k,j]);function H(){function ne(dt){return!!(dt!=null&&dt.pdf)}if(!ne(yt))throw new Error("pdf is undefined");const Y=typeof e=="function"?e(yt):e;return m.jsx(sF.Provider,{value:yt,children:Y})}function te(){return o?j==null?m.jsx(fd,{type:"loading",children:typeof u=="function"?u():u}):j===!1?m.jsx(fd,{type:"error",children:typeof s=="function"?s():s}):H():m.jsx(fd,{type:"no-data",children:typeof d=="function"?d():d})}return m.jsx("div",{className:Rf("react-pdf__Document",t),ref:a,...xe,children:te()})}),f9=h9;function oF(){return C.useContext(sF)}function aF(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var o=0,a=t;o<a.length;o++){var l=a[o];typeof l=="function"?l(i):l&&(l.current=i)}}}const p9=C.createContext(null),lF=p9;function L1(){return C.useContext(lF)}function m9(){const n=oF(),e=L1();Oe(e,"Unable to find Page context.");const t={...n,...e},{imageResourcesPath:s,linkService:r,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:u,pdf:d,renderForms:h,rotate:f,scale:p=1}=t;Oe(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Oe(u,"Attempted to load page annotations, but no page was specified."),Oe(r,"Attempted to load page annotations, but no linkService was specified.");const[y,g]=Cf(),{value:S,error:v}=y,b=C.useRef(null);vn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function A(){S&&o&&o(S)}function _(){v&&(vn(!1,v.toString()),i&&i(v))}C.useEffect(function(){g({type:"RESET"})},[g,u]),C.useEffect(function(){if(!u)return;const L=xv(u.getAnnotations()),I=L;return L.promise.then(O=>{g({type:"RESOLVE",value:O})}).catch(O=>{g({type:"REJECT",error:O})}),()=>{hu(I)}},[g,u]),C.useEffect(()=>{if(S!==void 0){if(S===!1){_();return}A()}},[S]);function T(){l&&l()}function k(R){vn(!1,`${R}`),a&&a(R)}const P=C.useMemo(()=>u.getViewport({scale:p,rotation:f}),[u,f,p]);return C.useEffect(function(){if(!d||!u||!r||!S)return;const{current:L}=b;if(!L)return;const I=P.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:L,l10n:null,linkService:r,page:u,structTreeLayer:null,viewport:I},D={annotations:S,annotationStorage:d.annotationStorage,div:L,imageResourcesPath:s,linkService:r,page:u,renderForms:h,viewport:I};L.innerHTML="";try{new GT(O).render(D),T()}catch(V){k(V)}return()=>{}},[S,s,r,u,d,h,P]),m.jsx("div",{className:Rf("react-pdf__Page__annotations","annotationLayer"),ref:b})}const cF={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},g9=/^H(\d+)$/;function y9(n){return n in cF}function D1(n){return"children"in n}function uF(n){return D1(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function v9(n){const e={};if(D1(n)){const{role:t}=n,s=t.match(g9);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(y9(t)){const r=cF[t];r&&(e.role=r)}}return e}function dF(n){const e={};if(D1(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),uF(n)){const[t]=n.children;if(t){const s=dF(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function b9(n){return n?{...v9(n),...dF(n)}:null}function hF({className:n,node:e}){const t=C.useMemo(()=>b9(e),[e]),s=C.useMemo(()=>!D1(e)||uF(e)?null:e.children.map((r,i)=>m.jsx(hF,{node:r},i)),[e]);return m.jsx("span",{className:n,...t,children:s})}function w9(){const n=L1();Oe(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=Cf(),{value:i,error:o}=s,{customTextRenderer:a,page:l}=n;function u(){i&&t&&t(i)}function d(){o&&(vn(!1,o.toString()),e&&e(o))}return C.useEffect(function(){r({type:"RESET"})},[r,l]),C.useEffect(function(){if(a||!l)return;const f=xv(l.getStructTree()),p=f;return f.promise.then(y=>{r({type:"RESOLVE",value:y})}).catch(y=>{r({type:"REJECT",error:y})}),()=>hu(p)},[a,l,r]),C.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}u()}},[i]),i?m.jsx(hF,{className:"react-pdf__Page__structTree structTree",node:i}):null}const R2=ri;function x9(n){const e=L1();Oe(e,"Unable to find Page context.");const t={...e,...n},{_className:s,canvasBackground:r,devicePixelRatio:i=o9(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:u,renderTextLayer:d,rotate:h,scale:f}=t,{canvasRef:p}=n;Oe(l,"Attempted to render page canvas, but no page was specified.");const y=C.useRef(null);function g(){l&&a&&a(qE(l,f))}function S(_){l9(_)||(vn(!1,_.toString()),o&&o(_))}const v=C.useMemo(()=>l.getViewport({scale:f*i,rotation:h}),[i,l,h,f]),b=C.useMemo(()=>l.getViewport({scale:f,rotation:h}),[l,h,f]);C.useEffect(function(){if(!l)return;l.cleanup();const{current:T}=y;if(!T)return;T.width=v.width,T.height=v.height,T.style.width=`${Math.floor(b.width)}px`,T.style.height=`${Math.floor(b.height)}px`,T.style.visibility="hidden";const k={annotationMode:u?R2.ENABLE_FORMS:R2.ENABLE,canvas:T,canvasContext:T.getContext("2d",{alpha:!1}),viewport:v};r&&(k.background=r);const P=l.render(k),R=P;return P.promise.then(()=>{T.style.visibility="",g()}).catch(S),()=>hu(R)},[r,l,u,v,b]);const A=C.useCallback(()=>{const{current:_}=y;_&&(_.width=0,_.height=0)},[]);return C.useEffect(()=>A,[A]),m.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:aF(p,y),style:{display:"block",userSelect:"none"},children:d?m.jsx(w9,{}):null})}function A9(n){return"str"in n}function S9(){const n=L1();Oe(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:l,rotate:u,scale:d}=n;Oe(o,"Attempted to load page text content, but no page was specified.");const[h,f]=Cf(),{value:p,error:y}=h,g=C.useRef(null);vn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){p&&s&&s(p)}function v(){y&&(vn(!1,y.toString()),t&&t(y))}C.useEffect(function(){f({type:"RESET"})},[o,f]),C.useEffect(function(){if(!o)return;const R=xv(o.getTextContent()),L=R;return R.promise.then(I=>{f({type:"RESOLVE",value:I})}).catch(I=>{f({type:"REJECT",error:I})}),()=>hu(L)},[o,f]),C.useEffect(()=>{if(p!==void 0){if(p===!1){v();return}S()}},[p]);const b=C.useCallback(()=>{i&&i()},[i]),A=C.useCallback(P=>{vn(!1,P.toString()),r&&r(P)},[r]);function _(){const P=g.current;P&&P.classList.add("selecting")}function T(){const P=g.current;P&&P.classList.remove("selecting")}const k=C.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return C.useLayoutEffect(function(){if(!o||!p)return;const{current:R}=g;if(!R)return;R.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),I={container:R,textContentSource:L,viewport:k},O=new Am(I),D=O;return O.render().then(()=>{const V=document.createElement("div");V.className="endOfContent",R.append(V);const j=R.querySelectorAll('[role="presentation"]');if(e){let N=0;p.items.forEach((M,B)=>{if(!A9(M))return;const F=j[N];if(!F)return;const $=e({pageIndex:a,pageNumber:l,itemIndex:B,...M});F.innerHTML=$,N+=M.str&&M.hasEOL?2:1})}b()}).catch(A),()=>hu(D)},[e,A,b,o,a,l,p,k]),m.jsx("div",{className:Rf("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:_,ref:g})}const N2=1;function _9(n){const t={...oF(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:a,className:l,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",height:p,inputRef:y,loading:g="Loading page",noData:S="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:b,onGetStructTreeError:A,onGetStructTreeSuccess:_,onGetTextError:T,onGetTextSuccess:k,onLoadError:P,onLoadSuccess:R,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:I,onRenderError:O,onRenderSuccess:D,onRenderTextLayerError:V,onRenderTextLayerSuccess:j,pageIndex:N,pageNumber:M,pdf:B,registerPage:F,renderAnnotationLayer:$=!0,renderForms:U=!1,renderMode:q="canvas",renderTextLayer:K=!0,rotate:z,scale:X=N2,unregisterPage:pe,width:Ce,...me}=t,[Ps,yt]=Cf(),{value:xe,error:H}=Ps,te=C.useRef(null);Oe(B,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const ne=ll(M)?M-1:N??null,Y=M??(ll(N)?N+1:null),dt=z??(xe?xe.rotate:null),At=C.useMemo(()=>{if(!xe)return null;let So=1;const Au=X??N2;if(Ce||p){const _o=xe.getViewport({scale:1,rotation:dt});Ce?So=Ce/_o.width:p&&(So=p/_o.height)}return Au*So},[p,xe,dt,X,Ce]);C.useEffect(function(){return()=>{ll(ne)&&r&&pe&&pe(ne)}},[r,B,ne,pe]);function ci(){if(R){if(!xe||!At)return;R(qE(xe,At))}if(r&&F){if(!ll(ne)||!te.current)return;F(ne,te.current)}}function Ao(){H&&(vn(!1,H.toString()),P&&P(H))}C.useEffect(function(){yt({type:"RESET"})},[yt,B,ne]),C.useEffect(function(){if(!B||!Y)return;const Au=xv(B.getPage(Y)),_o=Au;return Au.promise.then(F1=>{yt({type:"RESOLVE",value:F1})}).catch(F1=>{yt({type:"REJECT",error:F1})}),()=>hu(_o)},[yt,B,Y]),C.useEffect(()=>{if(xe!==void 0){if(xe===!1){Ao();return}ci()}},[xe,At]);const xu=C.useMemo(()=>ll(ne)&&Y&&ll(dt)&&ll(At)?{_className:s,canvasBackground:i,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:v,onGetAnnotationsSuccess:b,onGetStructTreeError:A,onGetStructTreeSuccess:_,onGetTextError:T,onGetTextSuccess:k,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:I,onRenderError:O,onRenderSuccess:D,onRenderTextLayerError:V,onRenderTextLayerSuccess:j,page:xe,pageIndex:ne,pageNumber:Y,renderForms:U,renderTextLayer:K,rotate:dt,scale:At}:null,[s,i,d,h,v,b,A,_,T,k,L,I,O,D,V,j,xe,ne,Y,U,K,dt,At]),Ke=C.useMemo(()=>nF(me,()=>xe&&(At?qE(xe,At):void 0)),[me,xe,At]),ui=`${ne}@${At}/${dt}`;function jF(){switch(q){case"custom":return Oe(u,'renderMode was set to "custom", but no customRenderer was passed.'),m.jsx(u,{},`${ui}_custom`);case"none":return null;case"canvas":default:return m.jsx(x9,{canvasRef:o},`${ui}_canvas`)}}function OF(){return K?m.jsx(S9,{},`${ui}_text`):null}function FF(){return $?m.jsx(m9,{},`${ui}_annotations`):null}function BF(){function So(_o){return!!(_o!=null&&_o.page)}if(!So(xu))throw new Error("page is undefined");const Au=typeof a=="function"?a(xu):a;return m.jsxs(lF.Provider,{value:xu,children:[jF(),OF(),FF(),Au]})}function $F(){return Y?B===null||xe===void 0||xe===null?m.jsx(fd,{type:"loading",children:typeof g=="function"?g():g}):B===!1||xe===!1?m.jsx(fd,{type:"error",children:typeof f=="function"?f():f}):BF():m.jsx(fd,{type:"no-data",children:typeof S=="function"?S():S})}return m.jsx("div",{className:Rf(s,l),"data-page-number":Y,ref:aF(y,te),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${At}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ke,children:$F()})}a9();Ks.workerSrc="pdf.worker.mjs";const E9={idle:"Para activar la experiencia WebAR necesitamos permiso para usar tu cmara.",requesting:"Solicitando acceso a la cmara",granted:"Cmara lista. Si no ves la previsualizacin, asegrate de apuntar a la taza.",error:"No pudimos usar la cmara de tu dispositivo."},C9=({onGranted:n,className:e="",copy:t={},variant:s="card"})=>{const[r,i]=C.useState("idle"),o=C.useMemo(()=>({...E9,...t}),[t]),a=async()=>{var u;if(!((u=navigator.mediaDevices)!=null&&u.getUserMedia)){i("error");return}i("requesting");try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(h=>h.stop()),i("granted"),n==null||n()}catch(d){console.error("[CameraPermissionPrompt] Error al iniciar cmara:",d),i("error")}},l=s==="overlay"?"w-full max-w-xs rounded-3xl border border-white/20 bg-black/70 p-6 text-center space-y-4 text-slate-200 backdrop-blur":"rounded-2xl border border-white/10 bg-black/40 p-4 space-y-3 text-slate-300/90";return m.jsxs("div",{className:`${l} ${e}`,children:[m.jsx("p",{className:"text-sm leading-relaxed",children:o[r]}),r!=="granted"?m.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold bg-purple-500/80 hover:bg-purple-500 transition text-white disabled:opacity-50",disabled:r==="requesting",children:r==="requesting"?"Abriendo cmara":"Activar cmara"}):null]})},T9="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js";let HA=null;function k9(){var n,e;return typeof window>"u"?Promise.reject(new Error("MindAR solo est disponible en el navegador.")):(e=(n=window.MINDAR)==null?void 0:n.IMAGE)!=null&&e.MindARThree?Promise.resolve(window.MINDAR.IMAGE):(HA||(HA=il(()=>import(T9),[]).then(t=>{var s,r;if(t!=null&&t.MindARThree)return t;if((r=(s=window.MINDAR)==null?void 0:s.IMAGE)!=null&&r.MindARThree)return window.MINDAR.IMAGE;throw new Error("MindAR no se inicializ correctamente.")}).catch(t=>{throw console.error("[loadMindAR] Error al importar MindAR:",t),t})),HA)}const P9="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js";let GA=null;function R9(){return typeof window>"u"?Promise.reject(new Error("Three.js solo est disponible en el navegador.")):window.__THREE_INSTANCE__?Promise.resolve(window.__THREE_INSTANCE__):(GA||(GA=il(()=>import(P9),[]).then(n=>(window.__THREE_INSTANCE__=n,n))),GA)}const N9=(n,e)=>{const t=document.createElement("canvas"),s=512;t.width=s,t.height=s;const r=t.getContext("2d"),i=new n.CanvasTexture(t),o=new n.MeshBasicMaterial({map:i,transparent:!0,opacity:.95,depthWrite:!1}),a=new n.PlaneGeometry(1.9,.72),l=new n.Mesh(a,o);l.position.set(0,1.05,.02);const u=new n.PlaneGeometry(2.1,.9),d=new n.MeshBasicMaterial({color:"#6b46c1",transparent:!0,opacity:.2,depthWrite:!1}),h=new n.Mesh(u,d);h.position.set(0,1.05,-.01);const f=new n.PlaneGeometry(1.7,.09),p=new n.MeshBasicMaterial({color:"#f5d657",transparent:!0,opacity:.35,depthWrite:!1}),y=new n.Mesh(f,p);y.position.set(0,1.15,.04);const g=new n.TorusGeometry(.5,.012,32,140),S=new n.MeshBasicMaterial({color:"#f5d657",transparent:!0,opacity:.5}),v=new n.Mesh(g,S);v.rotation.x=Math.PI/2,v.position.set(0,.35,0);const b=document.createElement("canvas");b.width=64,b.height=256;const A=b.getContext("2d"),_=A.createLinearGradient(0,0,0,256);_.addColorStop(0,"rgba(255,255,255,0)"),_.addColorStop(.2,"rgba(255,255,255,0.3)"),_.addColorStop(1,"rgba(255,255,255,0)"),A.fillStyle=_,A.fillRect(0,0,64,256);const T=new n.CanvasTexture(b),k=new n.MeshBasicMaterial({map:T,transparent:!0,opacity:.4,depthWrite:!1,blending:n.AdditiveBlending}),P=Array.from({length:4}).map(()=>{const O=new n.Mesh(new n.PlaneGeometry(.35,1.2),k.clone());return O.position.set((Math.random()-.5)*.4,.25,(Math.random()-.5)*.1),O.material.opacity=.25+Math.random()*.2,O}),R=new n.Group;R.add(h),R.add(l),R.add(y),R.add(v),P.forEach(O=>R.add(O)),R.position.set(0,.25,-.08);const L=O=>{r.clearRect(0,0,s,s),r.fillStyle="rgba(3, 3, 9, 0.85)",r.fillRect(0,s*.27,s,s*.46),r.font='bold 48px "Space Grotesk", sans-serif',r.fillStyle="#f5d657",r.textAlign="center",r.fillText(O,s/2,s/2+16),i.needsUpdate=!0};return L(e),{group:R,update:L,animate:O=>{R.rotation.z=Math.sin(O*.4)*.04,v.rotation.z+=.01,P.forEach((D,V)=>{const j=.15+V*.05;D.position.y=.2+(O*j+V*.2)%1.2,D.material.opacity=.2+.15*Math.sin(O*.8+V)})}}},M9=C.forwardRef(({targetSrc:n="/assets/targets.mind",isCameraReady:e=!1,className:t="",message:s="La taza te escucha.",overlay:r=null},i)=>{const o=C.useRef(null),a=C.useRef(null),l=C.useRef(null),[u,d]=C.useState("idle"),[h,f]=C.useState("");return C.useEffect(()=>{if(!e||!o.current)return;let p=null,y=null,g=null,S=null;return(async()=>{d("loading"),f("");try{const b=await R9(),A=await k9();p=new A.MindARThree({container:o.current,imageTargetSrc:n,uiLoading:"no",uiError:"no",uiScanning:"no"});const{scene:_,camera:T}=p;y=p.renderer,_.add(new b.HemisphereLight("#ffffff","#444444",1));const k=new b.PointLight("#f5d657",1.2);k.position.set(0,1,.5),_.add(k);const P=p.addAnchor(0),{group:R,update:L,animate:I}=N9(b,s);a.current={update:L,animate:I},P.group.add(R),await p.start();const O=p.video;O&&!o.current.contains(O)&&(O.setAttribute("playsinline","true"),O.muted=!0,O.style.position="absolute",O.style.top="0",O.style.left="0",O.style.width="100%",O.style.height="100%",O.style.objectFit="cover",O.style.zIndex="0",O.style.display="block",o.current.appendChild(O),S=O,l.current=O),d("running");const D=new b.Clock;g=()=>{var j,N;const V=D.getElapsedTime();(N=(j=a.current)==null?void 0:j.animate)==null||N.call(j,V),y.render(_,T)},y.setAnimationLoop(g)}catch(b){console.error("[MindARScene] Error al iniciar AR:",b),f((b==null?void 0:b.message)??"No pudimos iniciar la experiencia AR."),d("error")}})(),()=>{var b;y&&g&&y.setAnimationLoop(null),p&&(p.stop(),(b=p.renderer)==null||b.dispose()),a.current=null,l.current=null,S&&S.parentElement===o.current&&o.current.removeChild(S)}},[e,n]),C.useEffect(()=>{var p;(p=a.current)!=null&&p.update&&a.current.update(s)},[s]),C.useImperativeHandle(i,()=>({async captureFrame(){const p=l.current;if(!p||p.videoWidth===0||p.videoHeight===0)return null;const y=document.createElement("canvas");return y.width=p.videoWidth,y.height=p.videoHeight,y.getContext("2d").drawImage(p,0,0,y.width,y.height),await new Promise(S=>{y.toBlob(v=>S(v),"image/jpeg",.95)})}}),[]),m.jsxs("div",{className:`relative w-full bg-transparent rounded-3xl overflow-hidden ${t}`,"data-ar-container":"true",children:[m.jsx("div",{ref:o,className:"absolute inset-0"}),u==="idle"?m.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 text-sm pointer-events-none",children:"Esperando a que actives la cmara"}):null,u==="loading"?m.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-200 text-sm bg-black/40 pointer-events-none",children:[m.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-purple-300 border-t-transparent mb-3"}),"Preparando constelacin"]}):null,u==="error"?m.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center px-6 text-sm text-red-300 bg-black/70 pointer-events-none",children:h}):null,r?m.jsx("div",{className:"absolute inset-0",children:typeof r=="function"?r():r}):null]})}),M2=["La taza te escucha."],L2=({targetSrc:n="/assets/targets.mind",phrases:e=M2,onExit:t})=>{const[s,r]=C.useState(!1),[i,o]=C.useState(0),a=C.useRef(null),l=C.useMemo(()=>Array.isArray(e)&&e.length>0?e:M2,[e]);C.useEffect(()=>{o(0)},[n]);const u=()=>{o(y=>(y+1)%l.length)},d=()=>{t==null||t()},h=C.useCallback(async()=>{var y,g;if(!((y=a.current)!=null&&y.captureFrame)){nt({description:"La cmara an no est lista para capturar."});return}try{const S=await a.current.captureFrame();if(!S){nt({description:"No pudimos obtener la captura. Intenta de nuevo."});return}const v=new File([S],"miniverso-taza.jpg",{type:"image/jpeg"}),b="#EstoNoEsUnaTaza  Comparte tu constelacin y etiqueta a @gatoencerradoai para aparecer en la galera.";if(navigator.share&&((g=navigator.canShare)!=null&&g.call(navigator,{files:[v]})))await navigator.share({files:[v],title:"Miniverso Taza",text:b});else{const A=URL.createObjectURL(S),_=document.createElement("a");_.href=A,_.download="miniverso-taza.jpg",document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(A),nt({description:"Guardamos la captura. Comprtela desde tu galera con #EstoNoEsUnaTaza."})}}catch(S){console.error("[ARExperience] Error al compartir captura:",S),nt({description:"No pudimos compartir la captura. Intenta ms tarde."})}},[]),f="rounded-full bg-black/55 text-white p-3 shadow-lg border border-white/15 hover:bg-black/70 transition backdrop-blur",p=s?m.jsx("div",{className:"absolute inset-x-0 bottom-5 flex justify-center pointer-events-none",children:m.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[m.jsx("button",{type:"button",onClick:u,className:f,"aria-label":"Nueva frase",children:m.jsx(v$,{size:18})}),m.jsx("button",{type:"button",onClick:h,className:f,"aria-label":"Compartir captura",children:m.jsx(x$,{size:18})}),m.jsx("button",{type:"button",onClick:d,className:f,"aria-label":"Salir de AR",children:m.jsx(h1,{size:18})})]})}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-6",children:m.jsx(C9,{onGranted:()=>r(!0),variant:"overlay",copy:{idle:"Activa tu cmara para revelar la frase de tu taza."}})});return m.jsxs("section",{className:"space-y-4 -mx-4 sm:mx-0",children:[m.jsx(M9,{ref:a,targetSrc:n,isCameraReady:s,message:l[i],className:"w-full min-h-[75vh] sm:min-h-[80vh]",overlay:p}),m.jsx("p",{className:"text-sm text-slate-400/80 px-4 sm:px-0",children:"Si el marcador no se detecta de inmediato, ajusta la iluminacin y mantn la taza completa dentro del encuadre."})]})};Ks.workerSrc=`https://unpkg.com/pdfjs-dist@${VT}/build/pdf.worker.min.mjs`;const np={copycats:{label:"#CopyCats",type:"post-videos",slug:"carta-a-copycats",intro:"En el Miniverso Cine conviven dos pulsos del mismo universo: la mirada crtica y desbordada de CopyCats y la herida luminosa de Quirn. Aqu puedes asomarte a cartas creativas, ensayos abiertos y al proceso ntimo detrs del cortometraje que naci de nombrar tres tabes: el suicidio, el tarot y el arte como puente hacia lo que no sabemos decir.",videos:[{id:"copycats-v2",title:"Ensayo abierto  Variacin 2",author:"Detrs de cmaras",duration:"5:46",url:"https://player.vimeo.com/video/959781265?h=9b3b018f3e"},{id:"copycats-v3",title:"Teaser de Quirn",author:"Voces de la Comunidad",duration:"0:58",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/Quiron.mp4"}]},lataza:{label:"EstoNoEsUnaTaza",type:"object-webar",slug:"taza-que-habla",subtitle:"Esta no es una taza. Es un boleto.",intro:"Un objeto cotidiano convertido en smbolo de comunin. Cada taza est vinculada a un sentimiento. Cada sentimiento, a una historia personal.",note:"Apunta tu cmara a la taza. La pista aparecer.",ctaLabel:"Probar activacin WebAR",ctaLink:"/webar/taza/index.html",ctaMessage:"Cuando liberes la activacin WebAR, descubrirs la pista que le corresponde a tu taza.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/tazas.mp4",sentiments:["Sentir rabia tambin es un acto de cuidado."],phrases:["La taza te habla."],instructions:["Permite el acceso a tu cmara para iniciar.","Coloca la taza completa en cuadro, con buena iluminacin.","Mantn el marcador visible hasta que aparezca la constelacin."],comments:[{id:"la-taza-comment-1",quote:"La taza me mostr una frase que me persigui toda la semana.",author:"Usuario annimo"},{id:"la-taza-comment-2",quote:"No entend nada hasta que la le al revs.",author:"Sofa B."}]},miniversoNovela:{label:"Miniverso Novela",type:"blog-series",slug:null,intro:"Aqu se cruzan la autoficcin, la novela grfica y las vidas que an no caben en escena. Fragmentos, procesos y pistas que solo existen cuando alguien las lee.",entries:[{id:"primer-fragmento",title:"Fragmentos iniciales",description:"Lee las primeras pginas de la novela.",previewImage:"/assets/primerfragmento.png",contentSlug:"fragmento-novela",type:"internal-reading",previewMode:"pdf",previewPdfUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/PDFs/10pages.pdf"},{id:"compra-libro",title:"Edicin fsica",description:"La novela completa en su versin impresa. Incluye QR secreto.",image:"/assets/edicion-fisica.png",type:"purchase-link",url:"/comprar-novela"},{id:"tres-pies-galeria",title:"Tres Pies al Gato  proceso visual",description:"Exploraciones de la novela grfica.",previewImage:"/assets/silvestre-comic.jpeg",type:"internal-reading",previewMode:"pdf",previewPdfUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/PDFs/Caps%201%20a%2024.pdf"},{id:"novel-apps",title:"Activa tus novelas",description:"Cada formato tiene su propia app interactiva. La novela de autoficcin ya se puede activar; el cmic transmedia abre pronto su lector con pistas y capas expandidas.",type:"novel-apps",apps:[{id:"autoficcion-app",name:"Novela de autoficcin",status:"Disponible",description:"Escanea el QR de la contraportada de tu ejemplar para redimirlo y activar la app. All, cada segmento narrativo se convierte en una experiencia guiada con preguntas acadmicas, psicolgicas, narrativas y teatrales para vivir la escena como si estuvieras en un ensayo.",snippet:{tagline:"Contraportada interactiva",text:"Abre la cmara, apunta al QR y desbloquea prompts y lecturas personalizadas para conversar con Silvestre."},ctaLabel:"Abrir cmara",ctaAction:"openCamera"},{id:"comic-app",name:"Novela grfica / Cmic transmedia",status:"En desarrollo",description:"El lector digital del cmic desbloquea pistas visuales, pistas sonoras y activaciones AR que conectan con los miniversos.",snippet:{tagline:"App del cmic",text:"Beta privada en curso. La experiencia combinar lectura, audio-ensayos y anlisis visual.",image:"/assets/imagen-comic.png"},ctaLabel:"Recibir aviso",ctaMessage:"Djanos tu correo en Apoya el proyecto para recibir el acceso prioritario cuando la app del cmic se libere."}]},{id:"comentarios-lectores",title:"Conversaciones con lectores",type:"quotes",quotes:[{quote:"No saba que un libro poda hablarme a mitad de la pgina.",author:"Lectora annima"}]}],ctaLabel:"Leer los primeros fragmentos"}},L9=[{id:"miniversos",title:"Miniverso Escnico",description:"La funcin que deton este universo. Voces, cuerpos y gatos en escena.",icon:BL,iconClass:"text-purple-300"},{id:"miniversoNovela",title:"Miniverso Novela",description:"Desde la autoficcin hasta las vietas de la novela grfica.",icon:OL,iconClass:"text-emerald-300"},{id:"lataza",title:"Miniverso Taza",description:"Objeto ritual con WebAR. Una excusa para seguir la historia desde lo cotidiano.",icon:l$,iconClass:"text-amber-300"},{id:"copycats",title:"Miniverso Cine",description:"Quirn y otros filmes que piensan el cuerpo del Gato en clave cinematogrfica.",icon:YC,iconClass:"text-rose-300"},{id:"detodxs",title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice del universo.",icon:JC,iconClass:"text-lime-300"},{id:"clubdegato",title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre el universo.",icon:zL,iconClass:"text-indigo-300"}],D2=[{id:"tratamientos",title:"Tratamientos emocionales",description:"Financia terapias para jvenes que no pueden costearlas. Isabel Ayuda para la Vida, A.C. cubre sesiones cuando detectamos riesgo emocional.",icon:UL,metric:"6 sesiones promedio por suscriptor"},{id:"residencias",title:"Residencias creativas",description:"Laboratorios donde arte y acompaamiento se combinan para reparar memoria y cuerpo. Becas completas para procesos de creacin y contencin.",icon:m$,metric:"3 residencias activas por temporada"},{id:"app-escolar",title:"App Causa Social en escuelas",description:"Aplicacin que detecta seales tempranas en estudiantes. Tu cuota permite capacitar psiclogos, visitar escuelas y dar seguimiento ante crisis.",icon:JC,metric:"15 escuelas atendidas cada semestre"}],D9=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState(null),[r,i]=C.useState({}),o=C.useRef(null),[a,l]=C.useState(D2[0].id),[u,d]=C.useState(null),[h,f]=C.useState(null),[p,y]=C.useState(null),[g,S]=C.useState(null),v=C.useRef(null),b=C.useRef(null),[A,_]=C.useState(0),T=Math.max(A-48,320),[k,P]=C.useState(!1),[R,L]=C.useState(!1),I=C.useCallback(()=>{e(!0)},[]),O=C.useCallback(()=>{e(!1)},[]),D=C.useCallback(async H=>{const te=np[H];if(!(!te||te.type==="blog-series"||!te.slug)){i(ne=>({...ne,[H]:{...ne[H]??{},status:"loading",error:null}}));try{const ne=await VG(te.slug);if(!ne)throw new Error("No encontramos el texto asociado a este miniverso.");i(Y=>({...Y,[H]:{status:"success",post:ne,error:null}}))}catch(ne){i(Y=>({...Y,[H]:{status:"error",post:null,error:(ne==null?void 0:ne.message)??"Ocurri un error al cargar este showcase."}}))}}},[]),V=C.useCallback(H=>{if(np[H]){s(ne=>ne===H?null:H);const te=np[H];if(te.slug&&te.type!=="blog-series"){const ne=r[H];(!ne||ne.status==="error")&&D(H)}return}I()},[I,D,r]),j=C.useCallback(H=>{var te;H&&(window.dispatchEvent(new CustomEvent("gatoencerrado:open-blog",{detail:{slug:H}})),(te=document.getElementById("dialogo-critico"))==null||te.scrollIntoView({behavior:"smooth",block:"start"}))},[]),N=C.useCallback(H=>{H!=null&&H.src&&d({src:H.src,title:H.title??"",description:H.description??""})},[]),M=C.useCallback(()=>{d(null)},[]),B=C.useCallback(()=>{var H;(H=b.current)==null||H.scrollIntoView({behavior:"smooth",block:"start"})},[]),F=C.useCallback(H=>{H!=null&&H.src&&(f({src:H.src,title:H.title??"",description:H.description??""}),y(null),S(null))},[]),$=C.useCallback(()=>{f(null),y(null),S(null)},[]),U=C.useCallback(()=>{P(!0),typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches?(L(!0),document.body.classList.add("overflow-hidden")):L(!1)},[]),q=C.useCallback(()=>{P(!1),L(!1),document.body.classList.remove("overflow-hidden")},[]),K=C.useCallback(({numPages:H})=>{y(H)},[]),z=t?np[t]:null,X=t?r[t]:null,pe=C.useMemo(()=>{var H;return(H=X==null?void 0:X.post)!=null&&H.content?X.post.content.split(/\n{2,}/).map(te=>te.trim()).filter(Boolean):[]},[X]);C.useEffect(()=>{t&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"start"})},[t]),C.useEffect(()=>{t!=="lataza"&&(P(!1),L(!1),document.body.classList.remove("overflow-hidden"))},[t]),C.useEffect(()=>{if(!u&&!h)return;const H=te=>{te.key==="Escape"&&(u&&M(),h&&$())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[u,h,M,$]),C.useEffect(()=>{if(!h)return;const H=()=>{v.current&&_(v.current.offsetWidth)};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[h]),C.useEffect(()=>()=>{document.body.classList.remove("overflow-hidden")},[]);const Ce=H=>{nt({description:H||"Muy pronto liberaremos la activacin WebAR de este objeto."})},me=C.useCallback(async()=>{var H;if(typeof navigator>"u"||!((H=navigator.mediaDevices)!=null&&H.getUserMedia)){nt({description:"Tu dispositivo no permite abrir la cmara desde el navegador."});return}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})).getTracks().forEach(ne=>ne.stop()),nt({description:"Listo. En la versin final validaremos el QR con geolocalizacin para redimir tu ejemplar."})}catch(te){console.error("Error al acceder a la cmara:",te),nt({description:"No pudimos acceder a la cmara. Revisa los permisos e intntalo de nuevo."})}},[]),Ps=C.useCallback(H=>{if(H){if(H.ctaUrl){window.open(H.ctaUrl,"_blank","noopener,noreferrer");return}if(H.ctaAction==="openCamera"){me();return}nt({description:H.ctaMessage||"Muy pronto liberaremos esta app interactiva."})}},[me]),yt=(H="Pronto liberaremos la carta completa de este miniverso.")=>(z==null?void 0:z.type)==="blog-series"?m.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 text-slate-300/80 text-sm leading-relaxed",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500 mb-2",children:"Carta abierta"}),m.jsx("p",{children:z==null?void 0:z.intro})]}):z!=null&&z.slug?(X==null?void 0:X.status)==="loading"?m.jsx("p",{className:"text-slate-400 text-sm",children:"Cargando la carta que acompaa a este miniverso"}):(X==null?void 0:X.status)==="error"?m.jsx("p",{className:"text-red-300 text-sm",children:X.error}):(X==null?void 0:X.status)==="success"&&X.post?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400 mb-4",children:[X.post.author?m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(XC,{size:16}),X.post.author,X.post.author_role?m.jsxs("span",{className:"text-slate-500",children:["/ ",X.post.author_role]}):null]}):null,X.post.published_at?m.jsx("span",{children:new Date(X.post.published_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}):null]}),m.jsx("h4",{className:"font-display text-2xl text-slate-100 mb-6",children:X.post.title}),m.jsx("div",{className:"space-y-5 text-slate-200 leading-relaxed font-light",children:pe.length===0?m.jsx("p",{children:"Muy pronto abriremos el expediente completo de este miniverso. Gracias por tu curiosidad."}):pe.map((te,ne)=>m.jsx("p",{children:te},ne))})]}):m.jsx("p",{className:"text-slate-400 text-sm",children:H}):null,xe=()=>{if(!z)return m.jsx("p",{className:"text-slate-400 text-sm",children:"Selecciona un miniverso para explorar su carta y materiales."});if(z.type==="object-webar")return m.jsxs("div",{className:"grid gap-10 lg:grid-cols-[2fr_1fr]",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsx("div",{children:yt("Pronto liberaremos la carta completa de este miniverso.")}),m.jsx("p",{className:"text-slate-300/85 leading-relaxed font-light",children:z.intro}),m.jsx("div",{className:"rounded-3xl border border-white/10 overflow-hidden bg-black/30",children:t==="lataza"&&k&&!R?m.jsx("div",{className:"p-0 sm:p-4",children:m.jsx(L2,{targetSrc:"/webar/taza/taza.mind",phrases:z.phrases,onExit:q})}):m.jsxs(m.Fragment,{children:[/\.mp4($|\?)/i.test(z.image)?m.jsx("video",{src:z.image,className:"w-full h-64 object-cover bg-black/50",autoPlay:!0,playsInline:!0,muted:!0,loop:!0,controls:!0,poster:z.imagePoster}):m.jsx("img",{src:z.image,alt:"Ilustracin de La Taza",className:"w-full h-64 object-cover bg-black/50"}),m.jsxs("div",{className:"p-6 space-y-3",children:[m.jsx("p",{className:"text-sm text-slate-400 uppercase tracking-[0.3em]",children:z.note}),z.instructions?m.jsx("ul",{className:"text-sm text-slate-300/90 space-y-2",children:z.instructions.map((te,ne)=>m.jsxs("li",{className:"flex items-start gap-2",children:[m.jsx("span",{className:"text-purple-300 mt-1",children:""}),m.jsx("span",{children:te})]},ne))}):null,t==="lataza"?m.jsx(_e,{className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",variant:"outline",onClick:U,children:z.ctaLabel}):z.ctaLink?m.jsx("a",{href:z.ctaLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold",children:z.ctaLabel}):m.jsx(_e,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>Ce(z.ctaMessage),children:z.ctaLabel})]})]})}),z.sentiments?m.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Sentimientos vinculados"}),m.jsx("ul",{className:"space-y-3 text-slate-300/80 text-sm leading-relaxed",children:z.sentiments.map((te,ne)=>m.jsxs("li",{children:[" ",te]},ne))})]}):null]}),m.jsx("div",{className:"space-y-6",children:z.comments?m.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Comentarios de la comunidad"}),m.jsx("div",{className:"space-y-4",children:z.comments.map(te=>m.jsxs("div",{className:"rounded-xl border border-white/5 p-4 bg-black/20",children:[m.jsx("p",{className:"text-slate-100 font-light mb-2",children:te.quote}),m.jsx("p",{className:"text-xs text-slate-500",children:te.author})]},te.id))})]}):null})]});if(z.type==="blog-series"){const te=z.entries??[],ne=Y=>{switch(Y.type){case"internal-reading":return Y.previewMode==="pdf"&&Y.previewPdfUrl?m.jsx(_e,{onClick:()=>F({src:Y.previewPdfUrl,title:Y.title,description:Y.description}),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):Y.previewMode==="image"&&Y.previewImage?m.jsx(_e,{onClick:()=>N({src:Y.previewImage,title:Y.title,description:Y.description}),className:"w-full sm:w-auto justify-center",children:"Ver fragmento"}):Y.contentSlug?m.jsx(_e,{onClick:()=>j(Y.contentSlug),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):null;case"purchase-link":return Y.url?m.jsx("a",{href:Y.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold transition",children:"Comprar edicin"}):null;case"qr-scan":return m.jsx(_e,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10 w-full sm:w-auto justify-center",onClick:()=>nt({title:"Escanea el QR",description:"Abre la cmara de tu dispositivo y apunta al cdigo para activar la experiencia."}),children:"Escanear QR"});default:return null}};return m.jsxs("div",{className:"space-y-10",children:[m.jsx("div",{children:yt()}),te.length>0?m.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:te.map(Y=>{var ci,Ao,xu;if(Y.type==="horizontal-gallery")return m.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h5",{className:"font-display text-xl text-slate-100",children:Y.title}),Y.description?m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Y.description}):null]}),m.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:(ci=Y.images)==null?void 0:ci.map((Ke,ui)=>m.jsx("div",{className:"w-48 h-32 flex-shrink-0 rounded-xl overflow-hidden border border-white/5 bg-black/40",children:m.jsx("img",{src:Ke,alt:`${Y.title} ${ui+1}`,className:"w-full h-full object-cover"})},`${Y.id}-${ui}`))})]},Y.id);if(Y.type==="quotes")return m.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[m.jsx("h5",{className:"font-display text-xl text-slate-100",children:Y.title}),m.jsx("div",{className:"space-y-4",children:(Ao=Y.quotes)==null?void 0:Ao.map((Ke,ui)=>m.jsxs("blockquote",{className:"text-slate-100 font-light leading-relaxed",children:[m.jsx("p",{children:Ke.quote}),Ke.author?m.jsx("p",{className:"text-xs text-slate-500 mt-2",children:Ke.author}):null]},`${Y.id}-quote-${ui}`))})]},Y.id);if(Y.type==="novel-apps")return m.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h5",{className:"font-display text-xl text-slate-100",children:Y.title}),Y.description?m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Y.description}):null]}),m.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:(xu=Y.apps)==null?void 0:xu.map(Ke=>m.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 flex flex-col gap-4",children:[m.jsxs("div",{className:"flex items-center justify-between gap-4",children:[m.jsx("p",{className:"font-semibold text-slate-100",children:Ke.name}),m.jsx("span",{className:`text-xs uppercase tracking-[0.3em] ${Ke.status==="Disponible"?"text-emerald-300":"text-slate-500"}`,children:Ke.status})]}),m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Ke.description}),Ke.snippet?m.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/60 p-4 space-y-2",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:Ke.snippet.tagline}),Ke.snippet.image?m.jsx("img",{src:Ke.snippet.image,alt:Ke.name,className:"w-full h-32 object-cover rounded-lg border border-white/5"}):null,Ke.snippet.text?m.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:Ke.snippet.text}):null]}):null,m.jsx(_e,{onClick:()=>Ps(Ke),variant:Ke.status==="Disponible"?"default":"outline",className:`w-full justify-center ${Ke.status==="Disponible"?"bg-purple-600/80 hover:bg-purple-600 text-white":"border-purple-400/40 text-purple-200 hover:bg-purple-500/10"}`,children:Ke.ctaLabel})]},Ke.id))})]},Y.id);const dt=Y.previewImage||Y.image,At=ne(Y);return m.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[dt?m.jsx("div",{className:"rounded-xl overflow-hidden border border-white/5 bg-black/40 h-52 sm:h-64",children:m.jsx("img",{src:dt,alt:Y.title,className:"w-full h-full object-cover",loading:"lazy"})}):null,m.jsxs("div",{className:"space-y-2",children:[m.jsx("h5",{className:"font-display text-xl text-slate-100",children:Y.title}),Y.description?m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Y.description}):null]}),At]},Y.id)})}):m.jsx("p",{className:"text-sm text-slate-400",children:"Muy pronto liberaremos el resto de la serie."})]})}const H=z.videos??[];return m.jsxs("div",{className:"space-y-10",children:[m.jsx("div",{children:yt("Pronto liberaremos la carta completa de este miniverso. Mientras tanto puedes explorar la galera audiovisual.")}),H.length>0?m.jsxs("div",{children:[m.jsx("h5",{className:"font-display text-xl text-slate-100 mb-4",children:"Galera audiovisual"}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:H.map(te=>m.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40 flex flex-col",children:[m.jsx("div",{className:"aspect-video w-full",children:/\.mp4($|\?)/i.test(te.url)?m.jsx("video",{src:te.url,title:te.title,className:"w-full h-full object-cover bg-black",controls:!0,playsInline:!0,preload:"metadata",poster:te.poster}):m.jsx("iframe",{src:te.url,title:te.title,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}),m.jsxs("div",{className:"p-4 space-y-1 text-sm text-slate-300",children:[m.jsx("p",{className:"font-semibold text-slate-100",children:te.title}),te.author?m.jsx("p",{children:te.author}):null,te.duration?m.jsxs("p",{className:"text-slate-500",children:["Duracin: ",te.duration]}):null]})]},te.id))})]}):null]})};return m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"transmedia",className:"py-24 relative",children:[m.jsx("div",{className:"section-divider mb-24"}),m.jsxs("div",{className:"container mx-auto px-6",children:[m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16 space-y-6",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Universo Transmedia"}),m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium text-gradient italic",children:"Miniversos que sostienen la causa"}),m.jsxs("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:["#GatoEncerrado es un universo transmedial compuesto por miniversos narrativos. Cada experiencia digital, objeto o narrativa expandida financia el acompaamiento psicoemocional de"," ",m.jsx("button",{type:"button",onClick:B,className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Isabel Ayuda para la Vida, A.C."})]})]}),m.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:L9.map((H,te)=>{const ne=H.icon,Y=H.iconClass??"text-purple-200";return m.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:te*.1,ease:"easeOut"},viewport:{once:!0},className:"group glass-effect rounded-xl p-8 hover-glow cursor-pointer flex flex-col transition-all duration-300 hover:border-purple-400/50",onClick:()=>V(H.id),children:[m.jsx("div",{className:"flex items-center justify-start mb-6 transition-all duration-300 group-hover:scale-110",children:m.jsx(ne,{size:32,className:`${Y} drop-shadow-[0_0_12px_rgba(168,85,247,0.4)]`})}),m.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-3",children:H.title}),m.jsx("p",{className:"text-slate-300/70 text-base leading-relaxed mb-4 flex-grow font-light",children:H.description}),m.jsxs("div",{className:"text-purple-300 flex items-center gap-2 font-semibold transition-all duration-300 group-hover:gap-3",children:["Explorar",m.jsx(r$,{size:18})]})]},H.id)})}),z?m.jsxs(re.div,{ref:o,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mt-12 glass-effect rounded-2xl p-8 md:p-12 border border-white/10",children:[m.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-2",children:"Showcase"}),m.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-3",children:z.label}),m.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light max-w-3xl",children:z.intro})]}),m.jsx("button",{onClick:()=>s(null),className:"text-sm text-slate-400 hover:text-white transition self-start md:self-auto",children:"Cerrar showcase "})]}),m.jsx("div",{className:"mt-8",children:xe()})]}):null,m.jsxs("div",{className:"mt-16 grid lg:grid-cols-[3fr_2fr] gap-10",children:[m.jsxs(re.div,{ref:b,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col justify-between",children:[m.jsxs("div",{className:"space-y-5",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/80",children:"Apoya el proyecto"}),m.jsx("h3",{className:"font-display text-3xl text-slate-100",children:"Tu suscripcin sostiene la causa social de #GatoEncerrado"}),m.jsxs("p",{className:"text-slate-300/80 leading-relaxed font-light",children:["La taquilla mantiene la obra en escena; el universo transmedia financia acompaamiento emocional real. Cada cuota se distribuye en tres frentes que opera Isabel Ayuda para la Vida, A.C."," ",m.jsx("a",{href:"https://www.ayudaparalavida.com/index.html",target:"_blank",rel:"noreferrer",className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Visita su sitio"})]}),m.jsx("div",{className:"mt-4 space-y-3",children:D2.map(H=>{const te=H.icon,ne=a===H.id;return m.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20 overflow-hidden transition",children:[m.jsxs("button",{type:"button",onClick:()=>l(Y=>Y===H.id?null:H.id),className:"w-full flex items-center justify-between gap-4 px-4 py-3 text-left hover:bg-white/5 transition",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"p-2 rounded-full bg-purple-500/15 text-purple-200",children:m.jsx(te,{size:18})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium text-slate-100",children:H.title}),m.jsx("p",{className:"text-xs text-slate-400",children:H.metric})]})]}),m.jsx("span",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:ne?"Ocultar":"Ver impacto"})]}),ne?m.jsx("div",{className:"px-4 pb-4 text-sm text-slate-300/90",children:H.description}):null]},H.id)})})]}),m.jsxs("div",{className:"mt-8 flex flex-col gap-4 md:flex-row md:items-center",children:[m.jsx(_e,{onClick:I,variant:"ghost",className:"text-purple-200 hover:text-white hover:bg-white/10 justify-start md:justify-center",children:" Ver miniversos activos"}),m.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:[m.jsx(UL,{size:20,className:"text-purple-300"}),m.jsx("span",{children:"Tu suscripcin = Apoyo directo"})]})]})]}),m.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-6 border border-white/10 bg-slate-950/50 shadow-2xl",children:m.jsx($G,{})})]})]})]}),m.jsx(BG,{open:n,onClose:O}),h?m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[m.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:$}),m.jsxs("div",{className:"relative z-10 w-full max-w-5xl space-y-4",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Lectura en progreso"}),m.jsx("h4",{className:"font-display text-2xl text-slate-100",children:h.title||"Fragmento en PDF"}),h.description?m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed max-w-2xl",children:h.description}):null]}),m.jsx("button",{type:"button",onClick:$,className:"self-start rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})]}),m.jsx("div",{ref:v,className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl p-4 max-h-[75vh] overflow-auto",children:g?m.jsx("p",{className:"text-sm text-red-300 text-center py-8",children:g}):m.jsx(f9,{file:h.src,onLoadSuccess:K,onLoadError:H=>{console.error("Error al cargar PDF del miniverso:",H),S("No pudimos cargar el fragmento en PDF. Intenta de nuevo ms tarde.")},loading:m.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Preparando pginas"}),children:p?Array.from(new Array(p),(H,te)=>m.jsx("div",{className:"mb-6 last:mb-0",children:m.jsx(_9,{pageNumber:te+1,width:T,renderTextLayer:!1,renderAnnotationLayer:!1})},`pdf-page-${te+1}`)):null})})]})]}):null,u?m.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[m.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:M}),m.jsxs("div",{className:"relative z-10 w-full max-w-3xl",children:[m.jsx("div",{className:"flex justify-end mb-4",children:m.jsx("button",{type:"button",onClick:M,className:"rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})}),m.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl overflow-hidden",children:[m.jsx("div",{className:"bg-black/60",children:m.jsx("img",{src:u.src,alt:u.title||"Vista previa",className:"w-full h-auto"})}),u.title||u.description?m.jsxs("div",{className:"p-6 space-y-2",children:[u.title?m.jsx("h4",{className:"font-display text-2xl text-slate-100",children:u.title}):null,u.description?m.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:u.description}):null,m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:"Ilustracin de la novela"})]}):null]})]})]}):null,k&&R?m.jsx("div",{className:"fixed inset-0 z-40 bg-black",children:m.jsx(L2,{targetSrc:"/webar/taza/taza.mind",phrases:np.lataza.phrases,onExit:q})}):null]})},fF=C.createContext(void 0),I9=({children:n})=>{const{toast:e}=eD(),[t,s]=C.useState(null),[r,i]=C.useState(null),[o,a]=C.useState(!0),l=C.useCallback(async p=>{i(p),s((p==null?void 0:p.user)??null),a(!1)},[]);C.useEffect(()=>{(async()=>{const{data:{session:g}}=await Gt.auth.getSession();l(g)})();const{data:{subscription:y}}=Gt.auth.onAuthStateChange(async(g,S)=>{l(S)});return()=>y.unsubscribe()},[l]);const u=C.useCallback(async(p,y,g)=>{const{error:S}=await Gt.auth.signUp({email:p,password:y,options:g});return S&&e({variant:"destructive",title:"Sign up Failed",description:S.message||"Something went wrong"}),{error:S}},[e]),d=C.useCallback(async(p,y)=>{const{error:g}=await Gt.auth.signInWithPassword({email:p,password:y});return g&&e({variant:"destructive",title:"Sign in Failed",description:g.message||"Something went wrong"}),{error:g}},[e]),h=C.useCallback(async()=>{const{error:p}=await Gt.auth.signOut();return p&&e({variant:"destructive",title:"Sign out Failed",description:p.message||"Something went wrong"}),{error:p}},[e]),f=C.useMemo(()=>({user:t,session:r,loading:o,signUp:u,signIn:d,signOut:h}),[t,r,o,u,d,h]);return m.jsx(fF.Provider,{value:f,children:n})},j9=()=>{const n=C.useContext(fF);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},c0={success:"success",error:"error"},O9=({onLoginSuccess:n})=>{const[e,t]=C.useState(!1),[s,r]=C.useState(""),[i,o]=C.useState(!1),[a,l]=C.useState(null),u=()=>{t(f=>!f),l(null)},d=async f=>{if(f.preventDefault(),i)return;o(!0),l(null);const{error:p}=await Gt.auth.signInWithOtp({email:s.trim(),options:{emailRedirectTo:typeof window<"u"?window.location.origin:void 0}});p?l({type:c0.error,text:p.message||"No pudimos enviar el correo."}):(l({type:c0.success,text:"Te enviamos un enlace mgico para que continues."}),r(""),n==null||n("magic_link")),o(!1)},h=async()=>{l(null);const{error:f}=await Gt.auth.signInWithOAuth({provider:"google",options:{redirectTo:typeof window<"u"?window.location.origin:void 0}});f&&l({type:c0.error,text:f.message})};return m.jsxs("div",{className:"mt-2",children:[m.jsx("button",{type:"button",onClick:u,className:"text-sm text-purple-300 underline-offset-2 hover:text-purple-100 underline",children:"Inicia sesin para activar esta opcin"}),e?m.jsxs("div",{className:"mt-4 rounded-lg border border-white/5 bg-black/30 p-4 text-sm space-y-4",children:[m.jsx("button",{type:"button",onClick:h,className:"w-full rounded-md bg-white py-2 font-semibold text-black transition hover:bg-slate-100",children:"Iniciar sesin con Google"}),m.jsxs("form",{onSubmit:d,className:"space-y-2",children:[m.jsx("input",{type:"email",placeholder:"Tu correo electrnico",value:s,onChange:f=>r(f.target.value),className:"w-full rounded-md border border-white/10 bg-black/40 px-3 py-2 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",required:!0}),m.jsx("button",{type:"submit",disabled:i,className:"w-full rounded-md bg-purple-600 py-2 font-semibold text-white transition hover:bg-purple-500 disabled:cursor-not-allowed disabled:opacity-70",children:i?"Enviando...":"Recibir Magic Link"})]}),a?m.jsx("p",{className:`text-xs ${a.type===c0.error?"text-rose-300":"text-purple-200"}`,children:a.text}):null]}):null]})},WA=[{id:"obra_escenica",icon:m.jsx(BL,{size:20,className:"text-purple-300"}),title:"Miniverso Escnico",description:"La funcin que deton este universo literario. Voces, cuerpos y gatos en escena."},{id:"miniverso_novela",icon:m.jsx(OL,{size:20,className:"text-emerald-300"}),title:"Miniverso Novela",description:"Desde la autoficcin de *Mi Gato Encerrado* hasta las vietas de *Tres pies al gato*."},{id:"taza",icon:m.jsx(c$,{size:20,className:"text-amber-300"}),title:"Miniverso Taza",description:"Objeto ritual y marcador AR. Una excusa para seguir la historia desde lo cotidiano."},{id:"cine",icon:m.jsx(YC,{size:20,className:"text-rose-300"}),title:"Miniverso Cine",description:"Quirn y otros filmes que piensan el cuerpo del Gato en clave cinematogrfica."},{id:"apps",icon:m.jsx(JC,{size:20,className:"text-lime-300"}),title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice y guardin del universo."},{id:"bitacora",icon:m.jsx(zL,{size:20,className:"text-indigo-300"}),title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre el universo GatoEncerrado."},{id:"otro",icon:m.jsx(A$,{size:20,className:"text-fuchsia-300"}),title:"Otra contribucin",description:"Performance, glitch sonoro o investigacin hbrida. Tambin cabe aqu."}],F9={hidden:{opacity:0},visible:{opacity:.85}},B9={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},I2={name:"",email:"",role:"",proposal:"",attachmentUrl:""},$9=({open:n,onClose:e})=>{const{user:t}=j9(),s=!!(t!=null&&t.email),r=C.useMemo(()=>{var k,P;return((k=t==null?void 0:t.user_metadata)==null?void 0:k.alias)||((P=t==null?void 0:t.user_metadata)==null?void 0:P.full_name)||""},[t]),[i,o]=C.useState(I2),[a,l]=C.useState("idle"),[u,d]=C.useState(""),[h,f]=C.useState(WA[0]),[p,y]=C.useState(!1),[g,S]=C.useState(!1);C.useEffect(()=>{n&&(o({...I2,name:r||"",email:(t==null?void 0:t.email)??""}),y(!1),l("idle"),d(""),f(WA[0]),S(!1))},[n,r,t==null?void 0:t.email]),C.useEffect(()=>{if(!n)return;const k=P=>{P.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[n,e]);const v=C.useCallback(k=>{const{name:P,value:R}=k.target;o(L=>({...L,[P]:R}))},[]),b=C.useCallback(async k=>{var P;if(k.preventDefault(),a!=="loading"){if(!i.name.trim()||!i.email.trim()||!i.proposal.trim()){nt({description:"Completa tu nombre, correo y una breve propuesta."});return}if(p&&!s){nt({description:"Inicia sesin para recibir la notificacin personalizada."});return}l("loading"),d("");try{const R={name:i.name.trim(),email:i.email.trim().toLowerCase(),role:i.role.trim()||null,topic:h.id,proposal:i.proposal.trim(),attachment_url:i.attachmentUrl.trim()||null,notify_on_publish:p},{error:L}=await Gt.from("blog_contributions").insert(R);if(L){console.error("[ContributionModal] Error al registrar propuesta:",L),l("error"),d((P=L.message)!=null&&P.includes("blog_contributions")?"Asegrate de crear la tabla blog_contributions en Supabase.":"No pudimos registrar tu propuesta. Intenta nuevamente.");return}i.email.trim()&&await U9({email:i.email.trim().toLowerCase(),name:i.name.trim(),proposal:i.proposal.trim()}),l("success"),nt({description:"Gracias! Revisaremos tu propuesta y te contactaremos pronto."})}catch(R){console.error("[ContributionModal] Excepcin al guardar:",R),l("error"),d("Ocurri un error inesperado. Intenta ms tarde.")}}},[i,a,h,p,s]),A=C.useCallback(()=>{a!=="loading"&&(e==null||e())},[e,a]),_=C.useCallback(k=>{f(k),S(!0)},[]),T=C.useCallback(()=>{a!=="loading"&&S(!1)},[a]);return m.jsx(Qa,{children:n?m.jsxs(re.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6 sm:py-12",initial:"hidden",animate:"visible",exit:"hidden",children:[m.jsx(re.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:F9,onClick:A,"aria-hidden":"true"}),m.jsxs(re.div,{role:"dialog","aria-modal":"true","aria-labelledby":"contribution-modal-title",variants:B9,className:"relative z-10 w-full max-w-5xl h-full max-h-[90vh] rounded-3xl border border-white/10 bg-slate-950 p-4 sm:p-8 shadow-2xl overflow-hidden flex flex-col",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Blog / Dilogo vivo"}),m.jsx("h2",{className:"font-display text-2xl sm:text-3xl text-slate-50",children:"Explora el universo #GatoEncerrado"})]}),m.jsx("button",{onClick:A,className:"text-slate-400 hover:text-white transition text-xl leading-none","aria-label":"Cerrar formulario de propuestas",children:""})]}),m.jsx("div",{className:"mt-6 overflow-y-auto pr-3 flex-1 space-y-3",children:WA.map(k=>m.jsxs("button",{type:"button",onClick:()=>_(k),className:`w-full rounded-2xl border px-4 py-4 text-left transition ${h.id===k.id?"bg-purple-500/15 border-purple-300/40":"bg-black/20 border-white/10 hover:border-purple-300/30"}`,children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[k.icon,m.jsx("h4",{className:"text-slate-100 font-medium",children:k.title})]}),m.jsx("p",{className:"text-sm text-slate-400/80 leading-relaxed",children:k.description})]},k.id))}),m.jsx(Qa,{children:g?m.jsxs(m.Fragment,{children:[m.jsx(re.button,{type:"button",className:"absolute inset-0 bg-black/40","aria-label":"Cerrar formulario",onClick:T,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),m.jsxs(re.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:24,stiffness:240},className:"absolute inset-y-0 right-0 w-full md:w-[520px] bg-slate-950 border-l border-white/15 shadow-2xl p-6 overflow-y-auto",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3 mb-4",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Formulario"}),m.jsx("h3",{id:"contribution-modal-title",className:"font-display text-2xl text-slate-50",children:"Contribuye al dilogo crtico"}),m.jsxs("p",{className:"text-sm text-slate-400/80",children:["Ests escribiendo sobre"," ",m.jsx("span",{className:"text-purple-200 font-semibold",children:h.title})]})]}),m.jsx("button",{onClick:T,className:"text-slate-400 hover:text-white transition text-xl leading-none","aria-label":"Cerrar formulario",children:""})]}),m.jsxs("form",{className:"space-y-4",onSubmit:b,children:[m.jsx("input",{name:"name",type:"text",required:!0,value:i.name,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo quieres que te nombremos?"}),m.jsx("input",{name:"email",type:"email",required:!0,value:i.email,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"}),m.jsx("input",{name:"role",type:"text",value:i.role,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Crtica teatral, artista, investigador, espectador..."}),m.jsx("textarea",{name:"proposal",rows:5,required:!0,value:i.proposal,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Resume tu texto, crnica o propuesta curatorial..."}),m.jsx("input",{name:"attachmentUrl",type:"url",value:i.attachmentUrl,onChange:v,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Enlace a material adicional (Drive, portfolio, video...)"}),m.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-white/5 bg-black/20 px-4 py-3",children:[m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("input",{id:"notify-on-publish",type:"checkbox",checked:p,onChange:k=>y(k.target.checked),disabled:!s,className:`mt-1 h-4 w-4 rounded border-white/20 bg-black/40 text-purple-500 focus:ring-purple-400 ${s?"":"opacity-40 cursor-not-allowed"}`}),m.jsxs("label",{htmlFor:"notify-on-publish",className:"text-sm text-slate-300/80 leading-relaxed",children:["Quiero recibir notificacin cuando se publique mi propuesta",s?null:m.jsx("span",{className:"block text-xs text-slate-500",children:"Inicia sesin para activar esta opcin."})]})]}),s?null:m.jsx(O9,{})]}),a==="error"?m.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:u}):null,a==="success"?m.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Recibimos tu propuesta. Te contactaremos si necesitamos ms detalles."}):null,m.jsx(_e,{type:"submit",disabled:a==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:a==="loading"?"Enviando":"Enviar propuesta"})]})]})]}):null})]})]}):null})};async function U9({email:n,name:e,proposal:t}){if(n)try{const{error:s}=await Gt.functions.invoke("send-proposal-confirmation",{body:{email:n,name:e,proposal:t}});s&&console.error("[ContributionModal] Error en sendConfirmationEmail:",s)}catch(s){console.error("[ContributionModal] Excepcin en sendConfirmationEmail:",s)}}const qA=n=>(n||"").toString().trim().toLowerCase(),Em=["curaduria","expansiones","backstage"],ab={curaduria:{id:"curaduria",label:"Curadura Reflexiva",summary:"Textos crticos y anlisis profundos sobre la obra y su universo, escritos por investigadores, curadoras y voces especializadas.",keywords:["curaduria","curatorial","critica","ensayo","analisis","reflexiva"]},expansiones:{id:"expansiones",label:"Expansiones Narrativas",summary:"Microficciones, comunidad y relatos que acompaan los miniversos transmedia: cartas, diarios, audios y relatos colectivos.",keywords:["miniverso","transmedia","ficcion","comunidad","microficcion","expansion"]},backstage:{id:"backstage",label:"Detrs de Cmaras",summary:"Noticias, avances y bitcoras del proceso creativo: apps, novela, ensayo tcnico, produccin y archivos del montaje.",keywords:["backstage","proceso","produccion","apps","novela","noticias","detras"]}},V9=["carta-a-copycats","taza-que-habla"],j2=Em[0],z9=n=>{if(!n)return j2;const e=qA(n.category);if(e&&Em.includes(e))return e;const t=qA(n.slug);if(t&&V9.includes(t))return"expansiones";const s=Array.isArray(n.tags)?n.tags.map(r=>qA(r)).filter(Boolean):[];for(const r of Em){const i=ab[r].keywords;if(s.some(o=>i.includes(o)))return r}return j2},O2={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},H9=({post:n,onSelect:e})=>{const t=n.published_at?new Date(n.published_at):null;return m.jsxs(re.article,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,ease:"easeOut"},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col hover-glow transition-shadow",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm text-slate-400",children:[t&&m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(KC,{size:16}),t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}),n.read_time_minutes?m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(FL,{size:16}),n.read_time_minutes," min lectura"]}):null,m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(XC,{size:16}),n.author,n.author_role?m.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]})]}),m.jsx("h3",{className:"font-display text-2xl md:text-3xl font-medium text-slate-100 mb-4",children:n.title}),m.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-6",children:n.excerpt}),Array.isArray(n.tags)&&n.tags.length>0?m.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:n.tags.map(s=>m.jsx("span",{className:"text-xs uppercase tracking-wider text-purple-200/80 bg-purple-500/10 border border-purple-400/20 px-3 py-1 rounded-full",children:s},s))}):null,m.jsx(_e,{onClick:()=>e(n),variant:"outline",className:"self-start border-purple-400/40 text-purple-200 hover:bg-purple-500/20",children:"Leer artculo completo"})]})},G9=({post:n,onClose:e})=>{const t=C.useMemo(()=>n!=null&&n.content?n.content.split(/\n{2,}/).map(r=>r.trim()).filter(Boolean):[],[n]),s=n.published_at?new Date(n.published_at):null;return m.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.4,ease:"easeOut"},className:"glass-effect rounded-3xl p-8 md:p-12 border border-white/10 shadow-2xl backdrop-blur-xl",children:[m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[m.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-400",children:[s?m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(KC,{size:16}),s.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}):null,m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(XC,{size:16}),n.author,n.author_role?m.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]}),n.read_time_minutes?m.jsxs("span",{className:"inline-flex items-center gap-2",children:[m.jsx(FL,{size:16}),n.read_time_minutes," min lectura"]}):null]}),m.jsx(_e,{onClick:e,variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/10",children:"Cerrar artculo"})]}),m.jsx("h3",{className:"font-display text-3xl md:text-4xl font-semibold text-slate-50 mb-8",children:n.title}),m.jsx("div",{className:"space-y-6 text-slate-200 leading-relaxed font-light",children:t.length===0?m.jsx("p",{children:"Este artculo estar disponible muy pronto. Gracias por tu inters en la comunidad crtica de #GatoEncerrado."}):t.map((r,i)=>m.jsx("p",{children:r},i))})]})},W9=({posts:n=[],isLoading:e=!1,error:t=null})=>{const[s,r]=C.useState(null),[i,o]=C.useState(null),[a,l]=C.useState(!1),[u,d]=C.useState("all"),[h,f]=C.useState(""),p=C.useRef(null),y=C.useMemo(()=>n.map(A=>({...A,category:z9(A)})),[n]),g=C.useMemo(()=>[...y].sort((A,_)=>{const T=A.published_at?new Date(A.published_at).getTime():0;return(_.published_at?new Date(_.published_at).getTime():0)-T}),[y]),S=C.useMemo(()=>{const A=h.trim().toLowerCase();return g.filter(_=>(u==="all"?!0:_.category===u)?A?[_.title,_.author,_.excerpt,...Array.isArray(_.tags)?_.tags:[]].filter(Boolean).join(" ").toLowerCase().includes(A):!0:!1)},[g,u,h]),v=C.useCallback(A=>{r(A),requestAnimationFrame(()=>{const _=document.getElementById("blog-article");_==null||_.scrollIntoView({behavior:"smooth",block:"start"})})},[]),b=C.useCallback(A=>{d(A),requestAnimationFrame(()=>{var _;(_=p.current)==null||_.scrollIntoView({behavior:"smooth",block:"start"})})},[]);return C.useEffect(()=>{if(i&&y.length>0){const A=y.find(_=>_.slug===i);A&&(v(A),o(null))}},[v,i,y]),C.useEffect(()=>{t&&nt({description:"No se pudieron cargar los artculos del blog."})},[t]),C.useEffect(()=>{const A=_=>{var P;const{slug:T}=_.detail||{};if(!T)return;const k=y.find(R=>R.slug===T);k?v(k):o(T),(P=document.getElementById("dialogo-critico"))==null||P.scrollIntoView({behavior:"smooth"})};return window.addEventListener("gatoencerrado:open-blog",A),()=>window.removeEventListener("gatoencerrado:open-blog",A)},[v,y]),m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"dialogo-critico",className:"py-24 relative",children:[m.jsx("div",{className:"section-divider mb-24"}),m.jsxs("div",{className:"container mx-auto px-6",children:[m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Dilogo Crtico"}),m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Pensamiento crtico, comunidad y resonancia"}),m.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Un espacio de pensamiento crtico, creatividad y potica donde convergen curadura, ficcin expandida y noticias detrs de escena. Filtra por inters, busca autoras especficas o explora las lneas editoriales."})]}),m.jsxs("div",{className:"space-y-16",children:[m.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1,ease:"easeOut"},viewport:{once:!0},className:"grid md:grid-cols-3 gap-6",children:Em.map(A=>m.jsxs("div",{className:"glass-effect rounded-2xl p-6 border border-white/10 flex flex-col gap-3",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:ab[A].label}),m.jsx("p",{className:"text-slate-300/80 text-sm leading-relaxed flex-1",children:ab[A].summary}),m.jsx(_e,{variant:"link",onClick:()=>b(A),className:"text-purple-300 hover:text-white self-start px-0",children:"Leer esta lnea editorial"})]},A))}),m.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{type:"button",onClick:()=>d("all"),className:`rounded-full border px-4 py-2 text-sm transition ${u==="all"?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:"Todas"}),Em.map(A=>m.jsx("button",{type:"button",onClick:()=>d(A),className:`rounded-full border px-4 py-2 text-sm transition ${u===A?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:ab[A].label},A))]}),m.jsxs("div",{className:"relative w-full md:w-72",children:[m.jsx(b$,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),m.jsx("input",{type:"search",value:h,onChange:A=>f(A.target.value),placeholder:"Buscar por ttulo o autor",className:"w-full rounded-full border border-white/10 bg-black/30 pl-10 pr-4 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400"})]})]}),m.jsx(re.div,{ref:p,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.12}}},className:"grid md:grid-cols-2 gap-8",children:e?m.jsx(re.div,{variants:O2,className:"md:col-span-2 text-center text-slate-400 py-12",children:"Cargando artculos"}):S.length===0?m.jsx(re.div,{variants:O2,className:"md:col-span-2 text-center text-slate-400 py-12",children:"No encontramos textos con ese criterio. Ajusta el filtro o comparte un nuevo testimonio."}):S.map(A=>m.jsx(H9,{post:A,onSelect:v},A.id))}),m.jsx("div",{id:"blog-article",children:m.jsx(Qa,{mode:"wait",children:s?m.jsx(G9,{post:s,onClose:()=>r(null)},s.id):null})})]}),m.jsxs(re.div,{id:"blog-contribuye",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-20 glass-effect rounded-2xl p-8 md:p-12 text-center",children:[m.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"Quieres publicar en el blog?"}),m.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-8 max-w-2xl mx-auto font-light",children:"Ensayos, bitcoras, crtica y testimonios son bienvenidos. Recibimos propuestas curatoriales y comunitarias, y damos seguimiento personal."}),m.jsxs(_e,{id:"blog-contribuye",onClick:()=>l(!0),className:"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white px-8 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow mx-auto",children:[m.jsx(g$,{size:18})," Enviar propuesta"]})]})]})]}),m.jsx($9,{open:a,onClose:()=>l(!1)})]})};var q9=Q2[" useId ".trim().toString()]||(()=>{}),K9=0;function pF(n){const[e,t]=C.useState(q9());return uu(()=>{n||t(s=>s??String(K9++))},[n]),n||(e?`radix-${e}`:"")}var I1="Collapsible",[X9,mF]=c1(I1),[Y9,KT]=X9(I1),gF=C.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...a}=n,[l,u]=u1({prop:s,defaultProp:r??!1,onChange:o,caller:I1});return m.jsx(Y9,{scope:t,disabled:i,contentId:pF(),open:l,onOpenToggle:C.useCallback(()=>u(d=>!d),[u]),children:m.jsx(Dn.div,{"data-state":YT(l),"data-disabled":i?"":void 0,...a,ref:e})})});gF.displayName=I1;var yF="CollapsibleTrigger",vF=C.forwardRef((n,e)=>{const{__scopeCollapsible:t,...s}=n,r=KT(yF,t);return m.jsx(Dn.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":YT(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:Rn(n.onClick,r.onOpenToggle)})});vF.displayName=yF;var XT="CollapsibleContent",bF=C.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=KT(XT,n.__scopeCollapsible);return m.jsx(zC,{present:t||r.open,children:({present:i})=>m.jsx(Q9,{...s,ref:e,present:i})})});bF.displayName=XT;var Q9=C.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:s,children:r,...i}=n,o=KT(XT,t),[a,l]=C.useState(s),u=C.useRef(null),d=yo(e,u),h=C.useRef(0),f=h.current,p=C.useRef(0),y=p.current,g=o.open||a,S=C.useRef(g),v=C.useRef(void 0);return C.useEffect(()=>{const b=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(b)},[]),uu(()=>{const b=u.current;if(b){v.current=v.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const A=b.getBoundingClientRect();h.current=A.height,p.current=A.width,S.current||(b.style.transitionDuration=v.current.transitionDuration,b.style.animationName=v.current.animationName),l(s)}},[o.open,s]),m.jsx(Dn.div,{"data-state":YT(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:g&&r})});function YT(n){return n?"open":"closed"}var J9=gF,Z9=vF,e7=bF,t7=C.createContext(void 0);function n7(n){const e=C.useContext(t7);return n||e||"ltr"}var Cr="Accordion",s7=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[QT,r7,i7]=cL(Cr),[j1,$7]=c1(Cr,[i7,mF]),JT=mF(),wF=he.forwardRef((n,e)=>{const{type:t,...s}=n,r=s,i=s;return m.jsx(QT.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?m.jsx(c7,{...i,ref:e}):m.jsx(l7,{...r,ref:e})})});wF.displayName=Cr;var[xF,o7]=j1(Cr),[AF,a7]=j1(Cr,{collapsible:!1}),l7=he.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...o}=n,[a,l]=u1({prop:t,defaultProp:s??"",onChange:r,caller:Cr});return m.jsx(xF,{scope:n.__scopeAccordion,value:he.useMemo(()=>a?[a]:[],[a]),onItemOpen:l,onItemClose:he.useCallback(()=>i&&l(""),[i,l]),children:m.jsx(AF,{scope:n.__scopeAccordion,collapsible:i,children:m.jsx(SF,{...o,ref:e})})})}),c7=he.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},...i}=n,[o,a]=u1({prop:t,defaultProp:s??[],onChange:r,caller:Cr}),l=he.useCallback(d=>a((h=[])=>[...h,d]),[a]),u=he.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return m.jsx(xF,{scope:n.__scopeAccordion,value:o,onItemOpen:l,onItemClose:u,children:m.jsx(AF,{scope:n.__scopeAccordion,collapsible:!0,children:m.jsx(SF,{...i,ref:e})})})}),[u7,O1]=j1(Cr),SF=he.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:s,dir:r,orientation:i="vertical",...o}=n,a=he.useRef(null),l=yo(a,e),u=r7(t),h=n7(r)==="ltr",f=Rn(n.onKeyDown,p=>{var R;if(!s7.includes(p.key))return;const y=p.target,g=u().filter(L=>{var I;return!((I=L.ref.current)!=null&&I.disabled)}),S=g.findIndex(L=>L.ref.current===y),v=g.length;if(S===-1)return;p.preventDefault();let b=S;const A=0,_=v-1,T=()=>{b=S+1,b>_&&(b=A)},k=()=>{b=S-1,b<A&&(b=_)};switch(p.key){case"Home":b=A;break;case"End":b=_;break;case"ArrowRight":i==="horizontal"&&(h?T():k());break;case"ArrowDown":i==="vertical"&&T();break;case"ArrowLeft":i==="horizontal"&&(h?k():T());break;case"ArrowUp":i==="vertical"&&k();break}const P=b%v;(R=g[P].ref.current)==null||R.focus()});return m.jsx(u7,{scope:t,disabled:s,direction:r,orientation:i,children:m.jsx(QT.Slot,{scope:t,children:m.jsx(Dn.div,{...o,"data-orientation":i,ref:l,onKeyDown:s?void 0:f})})})}),tw="AccordionItem",[d7,ZT]=j1(tw),_F=he.forwardRef((n,e)=>{const{__scopeAccordion:t,value:s,...r}=n,i=O1(tw,t),o=o7(tw,t),a=JT(t),l=pF(),u=s&&o.value.includes(s)||!1,d=i.disabled||n.disabled;return m.jsx(d7,{scope:t,open:u,disabled:d,triggerId:l,children:m.jsx(J9,{"data-orientation":i.orientation,"data-state":RF(u),...a,...r,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});_F.displayName=tw;var EF="AccordionHeader",CF=he.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=O1(Cr,t),i=ZT(EF,t);return m.jsx(Dn.h3,{"data-orientation":r.orientation,"data-state":RF(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:e})});CF.displayName=EF;var KE="AccordionTrigger",TF=he.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=O1(Cr,t),i=ZT(KE,t),o=a7(KE,t),a=JT(t);return m.jsx(QT.ItemSlot,{scope:t,children:m.jsx(Z9,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...a,...s,ref:e})})});TF.displayName=KE;var kF="AccordionContent",PF=he.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=O1(Cr,t),i=ZT(kF,t),o=JT(t);return m.jsx(e7,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...o,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});PF.displayName=kF;function RF(n){return n?"open":"closed"}var h7=wF,f7=_F,p7=CF,NF=TF,MF=PF;const m7=h7,LF=he.forwardRef(({className:n,...e},t)=>m.jsx(f7,{ref:t,className:li("border-b",n),...e}));LF.displayName="AccordionItem";const DF=he.forwardRef(({className:n,children:e,...t},s)=>m.jsx(p7,{className:"flex",children:m.jsxs(NF,{ref:s,className:li("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,m.jsx(i$,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));DF.displayName=NF.displayName;const IF=he.forwardRef(({className:n,children:e,...t},s)=>m.jsx(MF,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:m.jsx("div",{className:li("pb-4 pt-0",n),children:e})}));IF.displayName=MF.displayName;const g7={Direccin:{name:"Gilberto Corrales",bio:"Director, dramaturgo y actor. Licenciado en Teatro por la Facultad de Artes de la UABC, ha dirigido ms de cuarenta obras, la mayora de su autora. Su trabajo explora la transdisciplina y la investigacin del lenguaje escnico. Fundador de Incendio Producciones, sus obras han estado presentes en la Muestra Nacional de Teatro y en festivales de Colombia, Argentina y EE.UU. Ganador del Premio Juventud 2016 y del FITU UNAM. Dirige el Contagio Tijuana y colabora con artistas como Jorge Ballina y Daniel Primo.",image:"/images/placeholder-direccion.jpg"},Dramaturgia:{name:"Carlos A. Prez H.",bio:"Artista transmedial, autor y dramaturgo. Su obra habita entre teatro, escritura y tecnologa, proponiendo una potica crtica y humana. Formado en el ITESO, la Universidad de Salamanca y LABASAD Barcelona, integra astrologa psicolgica, cuerpo y arte digital en una mirada simblica. Creador del universo transmedia #GatoEncerrado, concibe el acto creativo como una forma de acompaamiento y transformacin.",image:"/images/placeholder-dramaturgia.jpg"},Elenco:{description:"Actores y actrices que encarnan el pulso emocional de la obra desde la fisicalidad, la voz y la presencia simblica.",members:[{name:"Ricardo Mrquez Salgado",role:"Intrprete",bio:"Comuniclogo, modelo y actor. Ha participado en teatro, cine y publicidad. Destacan sus coprotagnicos en 'Ideas para no morir en el anonimato' y 'Entre Dos'. Su presencia combina energa escnica y precisin esttica.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/ricardo.jpg"},{name:"Cynthia Teresa Rodrguez Aguirre",role:"Intrprete",bio:"Artista interdisciplinaria egresada de la UABC. Su prctica integra fotografa, escritura y teatro. Ha participado en el San Diego Fringe Festival y en montajes de Incendio Producciones. Actualmente se enfoca en la direccin escnica y la exploracin visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/cyndi.jpg"},{name:"Mariana de los Santos",role:"Intrprete",bio:"Actriz tijuanense formada en CEART y con experiencia en cine y teatro contemporneo. Su trabajo corporal revela una sensibilidad potica que dialoga entre lo ntimo y lo colectivo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariana.jpg"},{name:"Carlos Valdez Rosas",role:"Intrprete",bio:"Actor y productor de Incendio Producciones. Su trabajo combina performance, posdrama e interdisciplina. Ha participado en la Muestra Nacional de Teatro y festivales internacionales en Argentina y Estados Unidos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlitos.jpg"}]},"Diseo y Tcnica Escnica":{description:"Un equipo de diseadores y tcnicos escnicos que entrelazan arquitectura, multimedia, sonido y luz para expandir la atmsfera de la obra.",members:[{name:"Jorge Ballina",role:"Escenografa",bio:"Arquitecto y escengrafo con ms de 120 obras en teatro, danza y pera. Miembro del Sistema Nacional de Creadores de Arte, ha sido galardonado con premios internacionales como el World Stage Design Toronto y Calgary. Su trabajo combina estructura y poesa visual.",image:"/images/placeholder-diseno.jpg"},{name:"Daniel Primo",role:"Video Escenogrfico e Iluminacin",bio:"Artista visual y diseador escnico. Explora la relacin entre multimedia y espacio escnico. Integrante del Sistema Nacional de Creadores, su trabajo ha sido presentado en Europa, Asia y Amrica. Cofundador de Engranaje Invertebrado.",image:"/images/placeholder-diseno.jpg"},{name:"La Prez",role:"Diseo Sonoro",bio:"Artista sonora con ms de doce aos de experiencia. Fundadora de Concrete Sounds, ha colaborado en filmes como 'Ya no estoy aqu' y 'Monos'. Su especialidad es la creacin de paisajes inmersivos que amplan la dimensin sensorial del teatro.",image:"/images/placeholder-diseno.jpg"},{name:"Harold Garca",role:"Direccin Tcnica",bio:"Arquitecto y diseador lumnico. Ha colaborado en producciones como 'Matilda', 'Mamma Mia!' y 'Madame Butterfly'. Su trabajo abarca teatro, pera y danza contempornea, con presentaciones en Mxico, Los ngeles y festivales nacionales.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/harold.jpg"},{name:"Rebeca Hernndez",role:"Realizacin Escenogrfica",bio:"Diseadora industrial egresada del CIDI-UNAM y fundadora de Atelier RHC en Tijuana. Su taller produce escenografas, mobiliario y piezas funcionales para teatro y espacios pblicos, uniendo tcnica artesanal con visin contempornea.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rebeca.jpg"},{name:"Ximena Inurreta",role:"Asistente de Diseo de Escenografa",bio:"Diseadora escnica emergente que apoya el desarrollo de atmsferas visuales y transiciones espaciales en el montaje de #GatoEncerrado.",image:"/images/placeholder-diseno.jpg"},{name:"Diego Madera",role:"Tema Musical",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio. Su pieza original acompaa los pasajes emocionales de la obra.",image:"/images/placeholder-diseno.jpg"},{name:"Karla Flores",role:"Realizacin de Vestuario",bio:"Diseadora de vestuario que traduce emociones en textura, movimiento y color. Su trabajo aporta profundidad simblica a la corporalidad de los intrpretes.",image:"/images/placeholder-diseno.jpg"},{name:"Jonathan Lazcano",role:"Pelucas",bio:"Artista de caracterizacin. Su trabajo artesanal da vida y coherencia visual a los personajes a travs del detalle y la textura.",image:"/images/placeholder-diseno.jpg"}]},"Produccin y Asistencia":{description:"Un equipo que coordina, articula y acompaa cada engranaje de la produccin escnica con mirada sensible, tcnica y humana.",members:[{name:"Miroslava Wilson",role:"Produccin Ejecutiva",bio:"Productora ejecutiva, directora y asesora de movimiento. Originaria de Hermosillo y radicada en Tijuana, es fundadora de Pndulo Cero A.C. y educadora de movimiento somtico certificada por Body Mind Movement. Su trabajo interdisciplinario vincula arte, medio ambiente y humanismo. Ha presentado su obra en Asia, Amrica y Europa, y actualmente impulsa proyectos como Casa Viva y SomasSomos.",image:"/images/placeholder-produccion.jpg"},{name:"Marcela Durn Mulia",role:"Produccin Administrativa",bio:"Actriz, gestora y representante legal de Incendio Producciones. Licenciada en Comunicacin (UABC) y Maestra en Alta Direccin Corporativa (Humanitas). Ha participado en la Muestra Nacional de Teatro, ENARTES y otros festivales internacionales. Su mirada estratgica une la gestin cultural con la sensibilidad artstica.",image:"/images/placeholder-colaboradores.jpg"},{name:"Rosala Hernndez Milln",role:"Produccin General y Vinculacin Social",bio:"Presidenta de Isabel A.C. Ayuda para la Vida, Maestra en Psicobiologa y Neurociencia Cognitiva (UAB). Su labor impulsa la integracin entre arte y bienestar emocional, fortaleciendo el puente entre el proyecto escnico y la comunidad.",image:"/images/placeholder-colaboradores.jpg"},{name:"Gabriel Monroy",role:"Asistencia de Direccin y Gestin",bio:"Actor, fotgrafo escnico y gestor. Licenciado en Artes Escnicas por la Universidad de Sonora. Creador de la serie fotogrfica 'Reflejos de la escena', exhibida internacionalmente. Su mirada visual y su acompaamiento escnico fortalecen el proceso de direccin.",image:"/images/placeholder-colaboradores.jpg"},{name:"Roco Morgn",role:"Asistencia Ejecutiva",bio:"Gestora cultural y apoyo logstico de produccin. Su labor sostiene los procesos administrativos y humanos que hacen posible la operacin cotidiana de la obra.",image:"/images/placeholder-colaboradores.jpg"}]},"Colaboradores y Agradecimientos":{description:"Detrs de cada funcin existe una constelacin de manos, miradas y corazones que hacen posible el universo escnico de #GatoEncerrado. Este bloque celebra su labor silenciosa y luminosa.",members:[{name:"Isabel Ayuda para la Vida A.C.",role:"",bio:"Asociacin civil sin fines de lucro fundada en 2018 y dirigida por Rosala Hernndez Milln. Su misin es prevenir la violencia autoinfligida mediante el programa DySVAE, promoviendo el pedir ayuda como estrategia de vida. Colabora con #GatoEncerrado para visibilizar la salud emocional y la empata en contextos artsticos y educativos.",image:"/images/placeholder-institucional.jpg"}],details:{tecnicos:"Asistencia tcnica y tramoya: Renee Camacho  asistencia tcnica y tramoya. Luis Fernando Lpez Snchez, Alex Nava, Christian Camacho  equipo de realizacin de escenografa. Marco Antonio Corral Gastelm, Manuel Axxel Aquino, Santiago Augusto Rodrguez, Alejandro Saldaa  realizadores y tramoya.",registro:"Registro, foto y medios: Viviana Gonzlez  registro creativo videogrfico. Sergio Brown  registro audiovisual. Enigma Creative  publicidad y diseo grfico. Eclipse Comunicacin Estratgica  difusin y medios.",institucionales:"Apoyos institucionales: Agradecimiento a Teatro CAMAFEO y sus productoras Margarita Martnez de Camarena y Elsa Prez de Vargas; CEART Tijuana, IMAC, Casa Viva y Adagio Studio por su apoyo en ensayos y espacios."}}},y7=()=>{const n=e=>Array.isArray(e==null?void 0:e.members)?m.jsxs("div",{className:"space-y-6",children:[e.description&&m.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-2 md:text-base sm:text-sm",children:e.description}),m.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.members.map((t,s)=>m.jsxs("div",{className:"glass-effect rounded-xl p-5 flex gap-4 items-start border border-white/5",children:[m.jsx("img",{className:"h-20 w-20 flex-shrink-0 rounded-full object-cover shadow-lg shadow-black/30",src:t.image,alt:`Retrato de ${t.name}`}),m.jsxs("div",{className:"space-y-1",children:[m.jsx("h4",{className:"font-display text-lg text-purple-200",children:t.name}),t.role&&m.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:t.role}),t.bio&&m.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:t.bio})]})]},t.name+s))}),e.details&&m.jsxs("div",{className:"text-slate-400 text-sm leading-relaxed space-y-4",children:[m.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.tecnicos}),m.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.registro}),m.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.institucionales})]})]}):m.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[m.jsx("div",{className:"md:col-span-1",children:m.jsx("img",{className:"w-full h-48 object-cover rounded-lg shadow-lg shadow-black/30",alt:`Retrato de ${e.name}`,src:e.image})}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("h3",{className:"font-display text-xl font-bold text-purple-300 mb-2",children:e.name}),m.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light md:text-base sm:text-sm",children:e.bio})]})]});return m.jsxs("section",{id:"team",className:"py-24 relative",children:[m.jsx("div",{className:"section-divider mb-24"}),m.jsxs("div",{className:"container mx-auto px-6",children:[m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Equipo Creativo"}),m.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light md:text-base sm:text-sm",children:"Un colectivo de artistas multidisciplinarios unidos por la pasin de crear experiencias teatrales que desafan los lmites del arte escnico y la empata."})]}),m.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"max-w-4xl mx-auto",children:m.jsx(m7,{type:"single",collapsible:!0,className:"w-full space-y-4",children:Object.entries(g7).map(([e,t],s)=>m.jsxs(LF,{value:`item-${s}`,className:"glass-effect rounded-lg border-none overflow-hidden",children:[m.jsx(DF,{className:"font-display text-xl md:text-2xl text-slate-100 p-6 hover:no-underline hover:bg-white/5 transition-colors duration-300",children:e}),m.jsx(IF,{className:"p-6 pt-0 bg-black/20",children:n(t)})]},e))})})]})]})};async function v7(){const n="galeria de gatoencerrado";try{const{data:e,error:t}=await Gt.storage.from(n).list("",{limit:100,offset:0,sortBy:{column:"name",order:"desc"}});return t?(console.error("Error al listar imgenes:",t.message),[]):e.filter(r=>r.name.match(/\.(jpg|jpeg|png|webp)$/i)).map(r=>{const i=Gt.storage.from(n).getPublicUrl(r.name).data.publicUrl;return{id:r.id||r.name,imgSrc:i,alt:r.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," "),postUrl:i}})}catch(e){return console.error("Excepcin al obtener imgenes del bucket:",e),[]}}const u0=[{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.8deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-2 lg:rotate-[0.3deg]",frame:"shadow-[14px_14px_0_rgba(167,139,250,0.14)]",tint:"from-purple-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:translate-y-3 lg:rotate-[0.9deg]",frame:"shadow-[12px_12px_0_rgba(129,140,248,0.14)]",tint:"from-indigo-400/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-2",frame:"shadow-[11px_11px_0_rgba(248,113,113,0.15)]",tint:"from-rose-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-2 sm:row-span-3 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-4",offset:"lg:translate-y-2 lg:-rotate-[1.6deg]",frame:"shadow-[16px_16px_0_rgba(251,191,36,0.14)]",tint:"from-amber-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-2",offset:"lg:-translate-y-4 lg:rotate-[-0.7deg]",frame:"shadow-[13px_13px_0_rgba(45,212,191,0.15)]",tint:"from-teal-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-3 lg:rotate-[0.6deg]",frame:"shadow-[12px_12px_0_rgba(148,163,184,0.16)]",tint:"from-slate-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-4 lg:row-span-4",offset:"lg:-translate-y-2 lg:rotate-[0.4deg]",frame:"shadow-[16px_16px_0_rgba(110,231,183,0.12)]",tint:"from-emerald-300/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-3",offset:"lg:translate-y-2 lg:-rotate-[0.9deg]",frame:"shadow-[13px_13px_0_rgba(244,162,97,0.13)]",tint:"from-orange-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.7deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-3",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-yellow-300/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-1 lg:rotate-[1deg]",frame:"shadow-[15px_15px_0_rgba(153,246,228,0.12)]",tint:"from-teal-200/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-2 md:row-span-4 lg:col-span-2 lg:row-span-4",offset:"lg:-translate-y-4 lg:-rotate-[1.1deg]",frame:"shadow-[20px_20px_0_rgba(203,213,225,0.13)]",tint:"from-slate-200/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[31px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.33deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"}],b7=[{match:"Copia de Foto 1 (1)",patternIndex:0,story:"Corte al vaco"},{match:"PoloyEstela",patternIndex:1,story:"Microclimas invisibles"},{match:"Copia de Foto 4",patternIndex:2,story:"Un nmero interminable"},{match:"Copia de Foto 3 (1)",patternIndex:3,story:"Memoria desdoblada"},{match:"Pausa entre actos",patternIndex:4,story:"Coreografa de luces"},{match:"Copia de Foto 4 (1)",patternIndex:5,story:"Confesin en penumbra"},{match:"_V7M6314",patternIndex:6,story:"Ritual previo al acto"},{match:"_V7M6296",patternIndex:7,story:"Risa entre grietas"},{match:"_V7M6348",patternIndex:8,story:"La jaula bajo la mesa"},{match:"Xanadu",patternIndex:9,story:"Voz que no se nombra"},{match:"_V7M6281",patternIndex:10,story:"El pliegue del vestido"},{match:"_V7M6324",patternIndex:11,story:"La cuerda floja"},{match:"_V7M6329",patternIndex:12,story:"Luz que acusa"},{match:"Copia de Foto 5 (1)",patternIndex:13,story:"Un eco sin dueo"},{match:"DSC02497",patternIndex:14,story:"Vestigio de sombras"}],ku=["Vestigio de sombras"],w7=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(null),r="https://www.instagram.com/esungatoencerrado/?hl=en",i=15,[o,a]=C.useState(null),l=C.useRef(null),u=C.useRef(null),[d,h]=C.useState([]),f=C.useRef(0),p=C.useRef([]),y=C.useCallback((D,V)=>{if(!V)return!1;const j=`${D.alt||""} ${D.imgSrc||""}`.toLowerCase();return Array.isArray(V)?V.some(N=>j.includes(String(N).toLowerCase())):j.includes(String(V).toLowerCase())},[]),g=C.useCallback(D=>["susurro de vestuario","foto 2"].some(j=>y(D,j)),[y]);C.useEffect(()=>{(async()=>{try{const V=await v7();e(V)}catch(V){console.error("Error al traer imgenes del bucket:",V),s("No se pudieron cargar las imgenes del bucket.")}})()},[]),C.useEffect(()=>{if(n.length===0){h([]),f.current=0,p.current=[];return}const D=n.map(($,U)=>({post:$,originalIndex:U})).filter(({post:$})=>!g($));if(D.length===0){h([]),f.current=0,p.current=[];return}const V=new Set,j=[];b7.forEach($=>{const U=D.findIndex((q,K)=>!V.has(K)&&y(q.post,$.match));if(U!==-1){const q=D[U];V.add(U),j.push({postIndex:q.originalIndex,patternIndex:$.patternIndex??j.length%u0.length,story:$.story??ku[j.length%ku.length]})}});const N=D.map(($,U)=>({...$,idx:U})).filter(({idx:$})=>!V.has($)).map(($,U)=>({postIndex:$.originalIndex,patternIndex:(j.length+U)%u0.length,story:ku[(j.length+U)%ku.length]})),M=[...j,...N];if(p.current=M,M.length===0){h([]),f.current=0;return}const B=Math.min(i,M.length),F=M.slice(0,B).map(($,U)=>({slotId:`${Date.now()}-${U}-${$.postIndex}-${Math.random()}`,postIndex:$.postIndex,patternIndex:$.patternIndex,story:$.story}));h(F),f.current=M.length>0?B%M.length:0},[n,i,y,g]);const S=D=>{window.open(D,"_blank","noopener,noreferrer")},v=C.useCallback(D=>{l.current=document.activeElement,a(D)},[]),b=C.useCallback(()=>{a(null),l.current&&typeof l.current.focus=="function"&&l.current.focus()},[]),A=C.useCallback(()=>{a(D=>D===null?D:(D-1+n.length)%n.length)},[n.length]),_=C.useCallback(()=>{a(D=>D===null?D:(D+1)%n.length)},[n.length]);C.useEffect(()=>{if(o===null)return;const D=V=>{V.key==="Escape"&&b(),V.key==="ArrowLeft"&&A(),V.key==="ArrowRight"&&_()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[o,b,A,_]);const T=o!==null,k=T&&n[o]?n[o]:null,P=n.length,R=o!==null?o:0,L=P>0?(R+1)/P*100:0;C.useEffect(()=>{T&&u.current&&u.current.focus()},[T]);const I={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.55,ease:"easeOut"}},exit:{opacity:0,y:-30,scale:.94,transition:{duration:.4,ease:"easeInOut"}}},O=C.useCallback((D,V)=>{if(!V||n.length<=i)return;const j=typeof window<"u"?window.innerHeight:0,N=V.boundingClientRect.bottom<=0,M=j?V.boundingClientRect.top>=j:!1;!N&&!M||h(B=>{if(!Array.isArray(B)||B.length===0)return B;const F=[...B],$=new Set(F.filter((X,pe)=>pe!==D).map(X=>X.postIndex)),U=p.current;if(!U||U.length===0)return B;let q=f.current??0,K=0;for(;K<U.length&&$.has(U[q].postIndex);)q=(q+1)%U.length,K+=1;if(K>=U.length)return B;const z=U[q];return f.current=(q+1)%U.length,F[D]={slotId:`${Date.now()}-${D}-${z.postIndex}-${Math.random()}`,postIndex:z.postIndex,patternIndex:z.patternIndex,story:z.story},F})},[n.length,i]);return m.jsxs("section",{id:"instagram",className:"py-20 relative",children:[m.jsx("div",{className:"section-divider mb-20"}),m.jsxs("div",{className:"container mx-auto px-5 sm:px-6",children:[m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.75,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-14",children:[m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-5 text-gradient italic",children:"Memoria Escnica"}),m.jsx("p",{className:"text-base md:text-lg text-slate-300/75 max-w-3xl mx-auto leading-relaxed mb-7 font-light",children:"Fragmentos de lo que solo sucede en escena Un homenaje visual al trabajo colectivo detrs de #GatoEncerrado: las funciones, los cuerpos, los silencios, las luces lo que solo existe cuando alguien lo mira."}),m.jsxs(_e,{onClick:()=>S(r),className:"bg-gradient-to-r from-pink-600/80 via-purple-600/80 to-indigo-600/80 hover:from-pink-600 hover:to-purple-600 text-white px-7 py-3 rounded-full font-semibold flex items-center gap-2 mx-auto hover-glow",children:[m.jsx(QC,{size:20}),"Seguir @esungatonecerrado",m.jsx(d$,{size:16})]})]}),t&&m.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 mb-6 text-center text-red-400 bg-red-900/20 rounded-lg",children:[m.jsx(n$,{size:22}),m.jsx("p",{children:t})]}),d.length>0?m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 lg:grid-cols-8 auto-rows-[95px] sm:auto-rows-[110px] md:auto-rows-[130px] lg:auto-rows-[150px] gap-2 md:gap-3 lg:gap-3.5",children:m.jsx(Qa,{mode:"popLayout",children:d.map((D,V)=>{const j=n[D.postIndex];if(!j)return null;const N=u0[D.patternIndex%u0.length],M=D.story??ku[(V+D.postIndex)%ku.length];return m.jsx(re.button,{type:"button",layout:!0,variants:I,initial:"hidden",animate:"visible",exit:"exit",viewport:{amount:.5,once:!1},onViewportLeave:B=>O(V,B),onClick:()=>v(D.postIndex),onKeyDown:B=>{B.key==="Enter"&&v(D.postIndex)},className:`group relative isolate flex h-full w-full cursor-pointer items-stretch focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-400/60 ${N.grid}`,children:m.jsx("div",{className:`relative h-full w-full transition-transform duration-300 ease-out ${N.offset}`,children:m.jsxs(re.div,{layout:!0,variants:I,initial:"hidden",whileInView:"visible",viewport:{amount:.6,once:!1},whileHover:{translateY:-6},transition:{duration:.35,ease:"easeOut"},className:`relative flex h-full w-full overflow-hidden rounded-[20px] bg-slate-950/70 backdrop-blur-sm ${N.frame}`,children:[m.jsx("span",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${N.tint}`,"aria-hidden":"true"}),m.jsx(re.img,{src:j.imgSrc,alt:j.alt||"Recuerdo #GatoEncerrado",className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",initial:{scale:1.02,y:0,opacity:1},whileHover:{scale:1.06},transition:{duration:.35,ease:"easeOut"}}),m.jsxs("div",{className:"relative flex h-full flex-col justify-between p-3 md:p-4",children:[m.jsx("div",{className:"text-[0.58rem] uppercase tracking-[0.3em] text-slate-200/75 mix-blend-screen",children:"#GatoEncerrado"}),m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsx("div",{className:"w-8 md:w-10 border-t border-slate-200/30"}),m.jsx("p",{className:"text-[0.8rem] md:text-sm font-light text-slate-50/90 max-w-[10rem] md:max-w-[10.5rem] leading-relaxed drop-shadow-[0_10px_22px_rgba(15,23,42,0.6)]",children:M})]})]})]})})},D.slotId)})})}):!t&&m.jsx("div",{className:"text-center text-slate-400 animate-pulse italic",children:m.jsx("p",{children:"Cargando recuerdos..."})}),m.jsx(Qa,{children:T&&k&&m.jsxs(re.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[m.jsx(re.div,{className:"absolute inset-0 bg-slate-950/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b}),m.jsxs(re.div,{className:"relative z-10 w-full max-w-5xl overflow-hidden rounded-[28px] bg-slate-900/90 backdrop-blur-xl shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Recuerdo ampliado",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:26},children:[m.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:items-center md:gap-6",children:[m.jsxs("div",{className:"flex-1",children:[m.jsxs("div",{className:"flex items-center justify-between text-slate-300/90",children:[m.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300/70",children:"#GatoEncerrado"}),m.jsxs("span",{className:"text-xs font-medium tracking-wide",children:[P>0?`${R+1}`:"0",m.jsxs("span",{className:"text-slate-400/80",children:["/",P]})]})]}),m.jsx("div",{className:"mt-3 h-2 rounded-full bg-white/10 overflow-hidden",children:m.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 transition-all duration-500",style:{width:`${L}%`},"aria-hidden":"true"})})]}),m.jsxs("div",{className:"flex items-center gap-3 self-start md:self-center",children:[m.jsx("button",{"aria-label":"Anterior",onClick:A,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:m.jsx(o$,{size:20})}),m.jsx("button",{"aria-label":"Siguiente",onClick:_,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:m.jsx(a$,{size:20})}),m.jsx("button",{ref:u,"aria-label":"Cerrar",onClick:b,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:m.jsx(h1,{size:18})})]})]}),m.jsx("div",{className:"relative aspect-[3/2] w-full bg-black",children:m.jsx("img",{src:k.imgSrc,alt:k.alt||"Recuerdo #GatoEncerrado",className:"h-full w-full object-contain"})})]})]},"gallery-modal")})]})]})},x7=()=>{const[n,e]=C.useState(!1),[t,s]=C.useState("preventa"),r=C.useCallback(o=>{s(o),e(!0)},[]),i=C.useCallback(()=>{e(!1)},[]);return m.jsxs(m.Fragment,{children:[m.jsxs("section",{id:"next-show",className:"py-24 relative",children:[m.jsx("div",{className:"section-divider mb-24"}),m.jsx("div",{className:"container mx-auto px-6",children:m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12 text-center overflow-hidden",children:[m.jsxs("div",{className:"relative z-10",children:[m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-4 text-gradient italic",children:"Prxima Funcin"}),m.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[m.jsx(KC,{size:24,className:"text-purple-300"}),m.jsx("span",{className:"font-display text-2xl md:text-3xl text-slate-100 font-semibold",children:"28 de Diciembre"})]}),m.jsx("p",{className:"text-lg text-slate-300/80 max-w-2xl mx-auto leading-relaxed mb-8 italic font-light",children:'"En el Da de los Santos Inocentes, te invitamos a dudar de todo, incluso de lo que crees ver en escena. Quizs la mayor inocentada es pensar que algo es real."'}),m.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:m.jsxs(_e,{onClick:()=>r("preventa"),className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[m.jsx(ZC,{size:20}),"Reserva tu acceso"]})})]}),m.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-purple-900/20 rounded-full blur-3xl animate-pulse"}),m.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl animate-pulse animation-delay-2000"})]})})]}),m.jsx(RT,{open:n,onClose:i,initialInterest:t})]})},A7=()=>{const n=t=>{t.preventDefault(),nt({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},e=()=>{nt({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})};return m.jsxs("section",{id:"contact",className:"py-24 relative",children:[m.jsx("div",{className:"section-divider mb-24"}),m.jsxs("div",{className:"container mx-auto px-6",children:[m.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[m.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Contacto, Prensa & Crditos"}),m.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Para colaboraciones, entrevistas o simplemente para compartir tus teoras. Aqu cae el teln, pero la conversacin contina."})]}),m.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[m.jsxs(re.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8",children:[m.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-8",children:"Envanos un Mensaje"}),m.jsxs("form",{onSubmit:n,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Nombre"}),m.jsx("input",{type:"text",className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Email"}),m.jsx("input",{type:"email",className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"tu@email.com"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Mensaje"}),m.jsx("textarea",{rows:5,className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Cuntanos ms..."})]}),m.jsxs(_e,{type:"submit",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:[m.jsx(w$,{size:20}),"Enviar"]})]})]}),m.jsxs(re.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"space-y-8",children:[m.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[m.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Redes Sociales"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(_e,{onClick:e,variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:m.jsx(QC,{size:24})}),m.jsx(_e,{onClick:e,variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:m.jsx(VL,{size:24})}),m.jsx(_e,{onClick:e,variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:m.jsx($L,{size:24})})]})]}),m.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[m.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Kit de Prensa"}),m.jsx("p",{className:"text-slate-300/70 mb-4 font-light",children:"Descarga nuestro kit de prensa con imgenes en alta resolucin, dossier y ms."}),m.jsxs(_e,{onClick:e,variant:"outline",className:"border-purple-400/50 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400",children:[m.jsx(u$,{size:18,className:"mr-2"}),"Descargar Kit"]})]}),m.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[m.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Crditos Finales"}),m.jsxs("p",{className:"text-slate-300/70 text-sm leading-relaxed font-light",children:["Una produccin de ",m.jsx("span",{className:"text-slate-200",children:"#GatoEncerrado"}),".",m.jsx("br",{}),"Con el apoyo de ",m.jsx("span",{className:"text-slate-200",children:"Isabel Ayuda para la Vida, A.C."}),".",m.jsx("br",{}),"Agradecimientos especiales a todos los que creyeron en esta locura."]})]})]})]})]})]})},S7=()=>{const n="https://www.instagram.com/your_instagram_handle",e="https://twitter.com/your_twitter_handle",t="https://facebook.com/your_facebook_page",s=i=>{i?window.open(i,"_blank","noopener,noreferrer"):nt({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},r=i=>{const o=document.querySelector(i);o&&o.scrollIntoView({behavior:"smooth"})};return m.jsxs("footer",{className:"relative py-16 mt-24",children:[m.jsx("div",{className:"section-divider mb-16"}),m.jsxs("div",{className:"container mx-auto px-6",children:[m.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[m.jsx("div",{className:"md:col-span-2",children:m.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},children:[m.jsx("span",{className:"font-display text-3xl font-medium italic text-gradient mb-4 block",children:"#GatoEncerrado"}),m.jsx("p",{className:"text-slate-400 leading-relaxed mb-6 max-w-md font-light",children:"Una experiencia teatral transmedia que explora los lmites entre la realidad y la ficcin, creando nuevas formas de narrativa artstica."}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(_e,{variant:"ghost",size:"icon",onClick:()=>s(n),className:"text-slate-400 hover:text-white hover:bg-white/10",children:m.jsx(QC,{size:20})}),m.jsx(_e,{variant:"ghost",size:"icon",onClick:()=>s(e),className:"text-slate-400 hover:text-white hover:bg-white/10",children:m.jsx(VL,{size:20})}),m.jsx(_e,{variant:"ghost",size:"icon",onClick:()=>s(t),className:"text-slate-400 hover:text-white hover:bg-white/10",children:m.jsx($L,{size:20})}),m.jsx(_e,{variant:"ghost",size:"icon",onClick:()=>r("#contact"),className:"text-slate-400 hover:text-white hover:bg-white/10",children:m.jsx(f$,{size:20})})]})]})}),m.jsx("div",{children:m.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1,ease:"easeOut"},viewport:{once:!0},children:[m.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Navegacin"}),m.jsx("ul",{className:"space-y-3",children:[{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Universo",href:"#transmedia"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}].map(i=>m.jsx("li",{children:m.jsx("button",{onClick:()=>r(i.href),className:"text-slate-400 hover:text-white transition-colors text-sm font-light",children:i.name})},i.name))})]})}),m.jsx("div",{children:m.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:"easeOut"},viewport:{once:!0},children:[m.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Contacto"}),m.jsxs("ul",{className:"space-y-3 text-sm font-light",children:[m.jsx("li",{className:"text-slate-400",children:"info@gatoencerrado.ai"}),m.jsx("li",{className:"text-slate-400",children:"+34 123 456 789"}),m.jsxs("li",{className:"text-slate-400",children:["#UniversoTransmedia",m.jsx("br",{}),"Tijuana, Mxico"]})]})]})})]}),m.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[m.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," #GatoEncerrado. Todos los derechos reservados."]}),m.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[m.jsx("span",{children:"Hecho con"}),m.jsx(h$,{size:16,className:"text-red-500/70"}),m.jsx("span",{children:"para el arte teatral"})]})]})]})]})},_7=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(!0),[r,i]=C.useState(null),o=C.useCallback(async()=>{s(!0),i(null);try{const a=await UG();e(Array.isArray(a)?a:[])}catch(a){console.error("[useBlogPosts] Error al cargar posts:",a),i(a),e([])}finally{s(!1)}},[]);return C.useEffect(()=>{o()},[o]),{posts:n,isLoading:t,error:r,refreshPosts:o}};function E7(){const n=_7();return m.jsxs(m.Fragment,{children:[m.jsxs(HS,{children:[m.jsx("title",{children:"#GatoEncerrado - Obra de Teatro Transmedia"}),m.jsx("meta",{name:"description",content:"La historia de alguien que desaparece y deja una huella emocional. Una experiencia teatral nica que explora mltiples formatos transmedia."})]}),m.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[m.jsx(AH,{}),m.jsxs("main",{className:"pt-24 lg:pt-28",children:[m.jsx(kG,{}),m.jsx(IG,{}),m.jsx(y7,{}),m.jsx(W9,{posts:n.posts,isLoading:n.isLoading,error:n.error}),m.jsx(D9,{}),m.jsx(w7,{}),m.jsx(x7,{}),m.jsx(A7,{})]}),m.jsx(S7,{}),m.jsx(rU,{})]})]})}KA.createRoot(document.getElementById("root")).render(m.jsx(he.StrictMode,{children:m.jsx(I9,{children:m.jsx(E7,{})})}));

var J5=Object.defineProperty;var Z5=(n,e,t)=>e in n?J5(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var X=(n,e,t)=>(Z5(n,typeof e!="symbol"?e+"":e,t),t),lA=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var u=(n,e,t)=>(lA(n,e,"read from private field"),t?t.call(n):e.get(n)),S=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},A=(n,e,t,r)=>(lA(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t);var en=(n,e,t,r)=>({set _(i){A(n,e,i,t)},get _(){return u(n,e,r)}}),C=(n,e,t)=>(lA(n,e,"access private method"),t);function fL(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var Gn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function la(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function ez(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var pL={exports:{}},rS={},mL={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nv=Symbol.for("react.element"),tz=Symbol.for("react.portal"),nz=Symbol.for("react.fragment"),rz=Symbol.for("react.strict_mode"),iz=Symbol.for("react.profiler"),sz=Symbol.for("react.provider"),oz=Symbol.for("react.context"),az=Symbol.for("react.forward_ref"),lz=Symbol.for("react.suspense"),cz=Symbol.for("react.memo"),uz=Symbol.for("react.lazy"),O2=Symbol.iterator;function dz(n){return n===null||typeof n!="object"?null:(n=O2&&n[O2]||n["@@iterator"],typeof n=="function"?n:null)}var gL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yL=Object.assign,vL={};function bp(n,e,t){this.props=n,this.context=e,this.refs=vL,this.updater=t||gL}bp.prototype.isReactComponent={};bp.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};bp.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function xL(){}xL.prototype=bp.prototype;function $C(n,e,t){this.props=n,this.context=e,this.refs=vL,this.updater=t||gL}var UC=$C.prototype=new xL;UC.constructor=$C;yL(UC,bp.prototype);UC.isPureReactComponent=!0;var F2=Array.isArray,bL=Object.prototype.hasOwnProperty,VC={current:null},wL={key:!0,ref:!0,__self:!0,__source:!0};function SL(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bL.call(e,r)&&!wL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:nv,type:n,key:s,ref:o,props:i,_owner:VC.current}}function hz(n,e){return{$$typeof:nv,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function HC(n){return typeof n=="object"&&n!==null&&n.$$typeof===nv}function fz(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var B2=/\/+/g;function cA(n,e){return typeof n=="object"&&n!==null&&n.key!=null?fz(""+n.key):e.toString(36)}function bx(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case nv:case tz:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+cA(o,0):r,F2(i)?(t="",n!=null&&(t=n.replace(B2,"$&/")+"/"),bx(i,e,t,"",function(c){return c})):i!=null&&(HC(i)&&(i=hz(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(B2,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",F2(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+cA(s,a);o+=bx(s,e,t,l,i)}else if(l=dz(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+cA(s,a++),o+=bx(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pv(n,e,t){if(n==null)return n;var r=[],i=0;return bx(n,r,"","",function(s){return e.call(t,s,i++)}),r}function pz(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var or={current:null},wx={transition:null},mz={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:wx,ReactCurrentOwner:VC};function AL(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Pv,forEach:function(n,e,t){Pv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Pv(n,function(){e++}),e},toArray:function(n){return Pv(n,function(e){return e})||[]},only:function(n){if(!HC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Ie.Component=bp;Ie.Fragment=nz;Ie.Profiler=iz;Ie.PureComponent=$C;Ie.StrictMode=rz;Ie.Suspense=lz;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mz;Ie.act=AL;Ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=yL({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=VC.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bL.call(e,l)&&!wL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nv,type:n.type,key:i,ref:s,props:r,_owner:o}};Ie.createContext=function(n){return n={$$typeof:oz,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sz,_context:n},n.Consumer=n};Ie.createElement=SL;Ie.createFactory=function(n){var e=SL.bind(null,n);return e.type=n,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(n){return{$$typeof:az,render:n}};Ie.isValidElement=HC;Ie.lazy=function(n){return{$$typeof:uz,_payload:{_status:-1,_result:n},_init:pz}};Ie.memo=function(n,e){return{$$typeof:cz,type:n,compare:e===void 0?null:e}};Ie.startTransition=function(n){var e=wx.transition;wx.transition={};try{n()}finally{wx.transition=e}};Ie.unstable_act=AL;Ie.useCallback=function(n,e){return or.current.useCallback(n,e)};Ie.useContext=function(n){return or.current.useContext(n)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(n){return or.current.useDeferredValue(n)};Ie.useEffect=function(n,e){return or.current.useEffect(n,e)};Ie.useId=function(){return or.current.useId()};Ie.useImperativeHandle=function(n,e,t){return or.current.useImperativeHandle(n,e,t)};Ie.useInsertionEffect=function(n,e){return or.current.useInsertionEffect(n,e)};Ie.useLayoutEffect=function(n,e){return or.current.useLayoutEffect(n,e)};Ie.useMemo=function(n,e){return or.current.useMemo(n,e)};Ie.useReducer=function(n,e,t){return or.current.useReducer(n,e,t)};Ie.useRef=function(n){return or.current.useRef(n)};Ie.useState=function(n){return or.current.useState(n)};Ie.useSyncExternalStore=function(n,e,t){return or.current.useSyncExternalStore(n,e,t)};Ie.useTransition=function(){return or.current.useTransition()};Ie.version="18.3.1";mL.exports=Ie;var _=mL.exports;const Pe=la(_),_L=fL({__proto__:null,default:Pe},[_]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gz=_,yz=Symbol.for("react.element"),vz=Symbol.for("react.fragment"),xz=Object.prototype.hasOwnProperty,bz=gz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wz={key:!0,ref:!0,__self:!0,__source:!0};function EL(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)xz.call(e,r)&&!wz.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:yz,type:n,key:s,ref:o,props:i,_owner:bz.current}}rS.Fragment=vz;rS.jsx=EL;rS.jsxs=EL;pL.exports=rS;var p=pL.exports,M_={},kL={exports:{}},oi={},CL={exports:{}},TL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e($,V){var N=$.length;$.push(V);e:for(;0<N;){var W=N-1>>>1,G=$[W];if(0<i(G,V))$[W]=V,$[N]=G,N=W;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var V=$[0],N=$.pop();if(N!==V){$[0]=N;e:for(var W=0,G=$.length,j=G>>>1;W<j;){var ee=2*(W+1)-1,ye=$[ee],de=ee+1,se=$[de];if(0>i(ye,N))de<G&&0>i(se,ye)?($[W]=se,$[de]=N,W=de):($[W]=ye,$[ee]=N,W=ee);else if(de<G&&0>i(se,N))$[W]=se,$[de]=N,W=de;else break e}}return V}function i($,V){var N=$.sortIndex-V.sortIndex;return N!==0?N:$.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,h=null,f=3,m=!1,y=!1,g=!1,b=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var V=t(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=$)r(c),V.sortIndex=V.expirationTime,e(l,V);else break;V=t(c)}}function E($){if(g=!1,w($),!y)if(t(l)!==null)y=!0,D(T);else{var V=t(c);V!==null&&z(E,V.startTime-$)}}function T($,V){y=!1,g&&(g=!1,v(R),R=-1),m=!0;var N=f;try{for(w(V),h=t(l);h!==null&&(!(h.expirationTime>V)||$&&!F());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var G=W(h.expirationTime<=V);V=n.unstable_now(),typeof G=="function"?h.callback=G:h===t(l)&&r(l),w(V)}else r(l);h=t(l)}if(h!==null)var j=!0;else{var ee=t(c);ee!==null&&z(E,ee.startTime-V),j=!1}return j}finally{h=null,f=N,m=!1}}var k=!1,P=null,R=-1,L=5,O=-1;function F(){return!(n.unstable_now()-O<L)}function I(){if(P!==null){var $=n.unstable_now();O=$;var V=!0;try{V=P(!0,$)}finally{V?U():(k=!1,P=null)}}else k=!1}var U;if(typeof x=="function")U=function(){x(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,M=B.port2;B.port1.onmessage=I,U=function(){M.postMessage(null)}}else U=function(){b(I,0)};function D($){P=$,k||(k=!0,U())}function z($,V){R=b(function(){$(n.unstable_now())},V)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,D(T))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function($){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var N=f;f=V;try{return $()}finally{f=N}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,V){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var N=f;f=$;try{return V()}finally{f=N}},n.unstable_scheduleCallback=function($,V,N){var W=n.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?W+N:W):N=W,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=N+G,$={id:d++,callback:V,priorityLevel:$,startTime:N,expirationTime:G,sortIndex:-1},N>W?($.sortIndex=N,e(c,$),t(l)===null&&$===t(c)&&(g?(v(R),R=-1):g=!0,z(E,N-W))):($.sortIndex=G,e(l,$),y||m||(y=!0,D(T))),$},n.unstable_shouldYield=F,n.unstable_wrapCallback=function($){var V=f;return function(){var N=f;f=V;try{return $.apply(this,arguments)}finally{f=N}}}})(TL);CL.exports=TL;var Sz=CL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Az=_,ri=Sz;function Q(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PL=new Set,Ym={};function od(n,e){ap(n,e),ap(n+"Capture",e)}function ap(n,e){for(Ym[n]=e,n=0;n<e.length;n++)PL.add(e[n])}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L_=Object.prototype.hasOwnProperty,_z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z2={},$2={};function Ez(n){return L_.call($2,n)?!0:L_.call(z2,n)?!1:_z.test(n)?$2[n]=!0:(z2[n]=!0,!1)}function kz(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Cz(n,e,t,r){if(e===null||typeof e>"u"||kz(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ar(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Rn[n]=new ar(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Rn[e]=new ar(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Rn[n]=new ar(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Rn[n]=new ar(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Rn[n]=new ar(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Rn[n]=new ar(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Rn[n]=new ar(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Rn[n]=new ar(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Rn[n]=new ar(n,5,!1,n.toLowerCase(),null,!1,!1)});var qC=/[\-:]([a-z])/g;function GC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qC,GC);Rn[e]=new ar(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qC,GC);Rn[e]=new ar(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qC,GC);Rn[e]=new ar(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Rn[n]=new ar(n,1,!1,n.toLowerCase(),null,!1,!1)});Rn.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Rn[n]=new ar(n,1,!1,n.toLowerCase(),null,!0,!0)});function WC(n,e,t,r){var i=Rn.hasOwnProperty(e)?Rn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Cz(e,t,i,r)&&(t=null),r||i===null?Ez(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var ca=Az.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nv=Symbol.for("react.element"),Pd=Symbol.for("react.portal"),Nd=Symbol.for("react.fragment"),KC=Symbol.for("react.strict_mode"),I_=Symbol.for("react.profiler"),NL=Symbol.for("react.provider"),RL=Symbol.for("react.context"),XC=Symbol.for("react.forward_ref"),D_=Symbol.for("react.suspense"),O_=Symbol.for("react.suspense_list"),YC=Symbol.for("react.memo"),ba=Symbol.for("react.lazy"),jL=Symbol.for("react.offscreen"),U2=Symbol.iterator;function Mp(n){return n===null||typeof n!="object"?null:(n=U2&&n[U2]||n["@@iterator"],typeof n=="function"?n:null)}var It=Object.assign,uA;function nm(n){if(uA===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);uA=e&&e[1]||""}return`
`+uA+n}var dA=!1;function hA(n,e){if(!n||dA)return"";dA=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{dA=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?nm(n):""}function Tz(n){switch(n.tag){case 5:return nm(n.type);case 16:return nm("Lazy");case 13:return nm("Suspense");case 19:return nm("SuspenseList");case 0:case 2:case 15:return n=hA(n.type,!1),n;case 11:return n=hA(n.type.render,!1),n;case 1:return n=hA(n.type,!0),n;default:return""}}function F_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Nd:return"Fragment";case Pd:return"Portal";case I_:return"Profiler";case KC:return"StrictMode";case D_:return"Suspense";case O_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case RL:return(n.displayName||"Context")+".Consumer";case NL:return(n._context.displayName||"Context")+".Provider";case XC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case YC:return e=n.displayName||null,e!==null?e:F_(n.type)||"Memo";case ba:e=n._payload,n=n._init;try{return F_(n(e))}catch{}}return null}function Pz(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F_(e);case 8:return e===KC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ol(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function ML(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Nz(n){var e=ML(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Rv(n){n._valueTracker||(n._valueTracker=Nz(n))}function LL(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=ML(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function vb(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function B_(n,e){var t=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function V2(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Ol(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IL(n,e){e=e.checked,e!=null&&WC(n,"checked",e,!1)}function z_(n,e){IL(n,e);var t=Ol(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?$_(n,e.type,t):e.hasOwnProperty("defaultValue")&&$_(n,e.type,Ol(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function H2(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function $_(n,e,t){(e!=="number"||vb(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var rm=Array.isArray;function Yd(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Ol(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function U_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function q2(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Q(92));if(rm(t)){if(1<t.length)throw Error(Q(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ol(t)}}function DL(n,e){var t=Ol(e.value),r=Ol(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function G2(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function OL(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function V_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?OL(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var jv,FL=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(jv=jv||document.createElement("div"),jv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jv.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Qm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Pm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rz=["Webkit","ms","Moz","O"];Object.keys(Pm).forEach(function(n){Rz.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Pm[e]=Pm[n]})});function BL(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Pm.hasOwnProperty(n)&&Pm[n]?(""+e).trim():e+"px"}function zL(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=BL(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var jz=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function H_(n,e){if(e){if(jz[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function q_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G_=null;function QC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var W_=null,Qd=null,Jd=null;function W2(n){if(n=sv(n)){if(typeof W_!="function")throw Error(Q(280));var e=n.stateNode;e&&(e=lS(e),W_(n.stateNode,n.type,e))}}function $L(n){Qd?Jd?Jd.push(n):Jd=[n]:Qd=n}function UL(){if(Qd){var n=Qd,e=Jd;if(Jd=Qd=null,W2(n),e)for(n=0;n<e.length;n++)W2(e[n])}}function VL(n,e){return n(e)}function HL(){}var fA=!1;function qL(n,e,t){if(fA)return n(e,t);fA=!0;try{return VL(n,e,t)}finally{fA=!1,(Qd!==null||Jd!==null)&&(HL(),UL())}}function Jm(n,e){var t=n.stateNode;if(t===null)return null;var r=lS(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Q(231,e,typeof t));return t}var K_=!1;if(ea)try{var Lp={};Object.defineProperty(Lp,"passive",{get:function(){K_=!0}}),window.addEventListener("test",Lp,Lp),window.removeEventListener("test",Lp,Lp)}catch{K_=!1}function Mz(n,e,t,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Nm=!1,xb=null,bb=!1,X_=null,Lz={onError:function(n){Nm=!0,xb=n}};function Iz(n,e,t,r,i,s,o,a,l){Nm=!1,xb=null,Mz.apply(Lz,arguments)}function Dz(n,e,t,r,i,s,o,a,l){if(Iz.apply(this,arguments),Nm){if(Nm){var c=xb;Nm=!1,xb=null}else throw Error(Q(198));bb||(bb=!0,X_=c)}}function ad(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function GL(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function K2(n){if(ad(n)!==n)throw Error(Q(188))}function Oz(n){var e=n.alternate;if(!e){if(e=ad(n),e===null)throw Error(Q(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return K2(i),n;if(s===r)return K2(i),e;s=s.sibling}throw Error(Q(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(t.alternate!==r)throw Error(Q(190))}if(t.tag!==3)throw Error(Q(188));return t.stateNode.current===t?n:e}function WL(n){return n=Oz(n),n!==null?KL(n):null}function KL(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=KL(n);if(e!==null)return e;n=n.sibling}return null}var XL=ri.unstable_scheduleCallback,X2=ri.unstable_cancelCallback,Fz=ri.unstable_shouldYield,Bz=ri.unstable_requestPaint,Wt=ri.unstable_now,zz=ri.unstable_getCurrentPriorityLevel,JC=ri.unstable_ImmediatePriority,YL=ri.unstable_UserBlockingPriority,wb=ri.unstable_NormalPriority,$z=ri.unstable_LowPriority,QL=ri.unstable_IdlePriority,iS=null,Ks=null;function Uz(n){if(Ks&&typeof Ks.onCommitFiberRoot=="function")try{Ks.onCommitFiberRoot(iS,n,void 0,(n.current.flags&128)===128)}catch{}}var ls=Math.clz32?Math.clz32:qz,Vz=Math.log,Hz=Math.LN2;function qz(n){return n>>>=0,n===0?32:31-(Vz(n)/Hz|0)|0}var Mv=64,Lv=4194304;function im(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Sb(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=im(a):(s&=o,s!==0&&(r=im(s)))}else o=t&~i,o!==0?r=im(o):s!==0&&(r=im(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-ls(e),i=1<<t,r|=n[t],e&=~i;return r}function Gz(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wz(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-ls(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=Gz(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function Y_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function JL(){var n=Mv;return Mv<<=1,!(Mv&4194240)&&(Mv=64),n}function pA(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rv(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ls(e),n[e]=t}function Kz(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-ls(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function ZC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-ls(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ze=0;function ZL(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var eI,eT,tI,nI,rI,Q_=!1,Iv=[],Cl=null,Tl=null,Pl=null,Zm=new Map,eg=new Map,Aa=[],Xz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y2(n,e){switch(n){case"focusin":case"focusout":Cl=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":Pl=null;break;case"pointerover":case"pointerout":Zm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":eg.delete(e.pointerId)}}function Ip(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=sv(e),e!==null&&eT(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function Yz(n,e,t,r,i){switch(e){case"focusin":return Cl=Ip(Cl,n,e,t,r,i),!0;case"dragenter":return Tl=Ip(Tl,n,e,t,r,i),!0;case"mouseover":return Pl=Ip(Pl,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return Zm.set(s,Ip(Zm.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,eg.set(s,Ip(eg.get(s)||null,n,e,t,r,i)),!0}return!1}function iI(n){var e=gc(n.target);if(e!==null){var t=ad(e);if(t!==null){if(e=t.tag,e===13){if(e=GL(t),e!==null){n.blockedOn=e,rI(n.priority,function(){tI(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sx(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=J_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);G_=r,t.target.dispatchEvent(r),G_=null}else return e=sv(t),e!==null&&eT(e),n.blockedOn=t,!1;e.shift()}return!0}function Q2(n,e,t){Sx(n)&&t.delete(e)}function Qz(){Q_=!1,Cl!==null&&Sx(Cl)&&(Cl=null),Tl!==null&&Sx(Tl)&&(Tl=null),Pl!==null&&Sx(Pl)&&(Pl=null),Zm.forEach(Q2),eg.forEach(Q2)}function Dp(n,e){n.blockedOn===e&&(n.blockedOn=null,Q_||(Q_=!0,ri.unstable_scheduleCallback(ri.unstable_NormalPriority,Qz)))}function tg(n){function e(i){return Dp(i,n)}if(0<Iv.length){Dp(Iv[0],n);for(var t=1;t<Iv.length;t++){var r=Iv[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Cl!==null&&Dp(Cl,n),Tl!==null&&Dp(Tl,n),Pl!==null&&Dp(Pl,n),Zm.forEach(e),eg.forEach(e),t=0;t<Aa.length;t++)r=Aa[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Aa.length&&(t=Aa[0],t.blockedOn===null);)iI(t),t.blockedOn===null&&Aa.shift()}var Zd=ca.ReactCurrentBatchConfig,Ab=!0;function Jz(n,e,t,r){var i=Ze,s=Zd.transition;Zd.transition=null;try{Ze=1,tT(n,e,t,r)}finally{Ze=i,Zd.transition=s}}function Zz(n,e,t,r){var i=Ze,s=Zd.transition;Zd.transition=null;try{Ze=4,tT(n,e,t,r)}finally{Ze=i,Zd.transition=s}}function tT(n,e,t,r){if(Ab){var i=J_(n,e,t,r);if(i===null)_A(n,e,r,_b,t),Y2(n,r);else if(Yz(i,n,e,t,r))r.stopPropagation();else if(Y2(n,r),e&4&&-1<Xz.indexOf(n)){for(;i!==null;){var s=sv(i);if(s!==null&&eI(s),s=J_(n,e,t,r),s===null&&_A(n,e,r,_b,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else _A(n,e,r,null,t)}}var _b=null;function J_(n,e,t,r){if(_b=null,n=QC(r),n=gc(n),n!==null)if(e=ad(n),e===null)n=null;else if(t=e.tag,t===13){if(n=GL(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return _b=n,null}function sI(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zz()){case JC:return 1;case YL:return 4;case wb:case $z:return 16;case QL:return 536870912;default:return 16}default:return 16}}var El=null,nT=null,Ax=null;function oI(){if(Ax)return Ax;var n,e=nT,t=e.length,r,i="value"in El?El.value:El.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Ax=i.slice(n,1<r?1-r:void 0)}function _x(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Dv(){return!0}function J2(){return!1}function ai(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Dv:J2,this.isPropagationStopped=J2,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dv)},persist:function(){},isPersistent:Dv}),e}var wp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rT=ai(wp),iv=It({},wp,{view:0,detail:0}),e$=ai(iv),mA,gA,Op,sS=It({},iv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iT,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Op&&(Op&&n.type==="mousemove"?(mA=n.screenX-Op.screenX,gA=n.screenY-Op.screenY):gA=mA=0,Op=n),mA)},movementY:function(n){return"movementY"in n?n.movementY:gA}}),Z2=ai(sS),t$=It({},sS,{dataTransfer:0}),n$=ai(t$),r$=It({},iv,{relatedTarget:0}),yA=ai(r$),i$=It({},wp,{animationName:0,elapsedTime:0,pseudoElement:0}),s$=ai(i$),o$=It({},wp,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),a$=ai(o$),l$=It({},wp,{data:0}),eN=ai(l$),c$={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d$={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h$(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=d$[n])?!!e[n]:!1}function iT(){return h$}var f$=It({},iv,{key:function(n){if(n.key){var e=c$[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=_x(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?u$[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iT,charCode:function(n){return n.type==="keypress"?_x(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_x(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),p$=ai(f$),m$=It({},sS,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tN=ai(m$),g$=It({},iv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iT}),y$=ai(g$),v$=It({},wp,{propertyName:0,elapsedTime:0,pseudoElement:0}),x$=ai(v$),b$=It({},sS,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),w$=ai(b$),S$=[9,13,27,32],sT=ea&&"CompositionEvent"in window,Rm=null;ea&&"documentMode"in document&&(Rm=document.documentMode);var A$=ea&&"TextEvent"in window&&!Rm,aI=ea&&(!sT||Rm&&8<Rm&&11>=Rm),nN=String.fromCharCode(32),rN=!1;function lI(n,e){switch(n){case"keyup":return S$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cI(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rd=!1;function _$(n,e){switch(n){case"compositionend":return cI(e);case"keypress":return e.which!==32?null:(rN=!0,nN);case"textInput":return n=e.data,n===nN&&rN?null:n;default:return null}}function E$(n,e){if(Rd)return n==="compositionend"||!sT&&lI(n,e)?(n=oI(),Ax=nT=El=null,Rd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aI&&e.locale!=="ko"?null:e.data;default:return null}}var k$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function iN(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!k$[n.type]:e==="textarea"}function uI(n,e,t,r){$L(r),e=Eb(e,"onChange"),0<e.length&&(t=new rT("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var jm=null,ng=null;function C$(n){wI(n,0)}function oS(n){var e=Ld(n);if(LL(e))return n}function T$(n,e){if(n==="change")return e}var dI=!1;if(ea){var vA;if(ea){var xA="oninput"in document;if(!xA){var sN=document.createElement("div");sN.setAttribute("oninput","return;"),xA=typeof sN.oninput=="function"}vA=xA}else vA=!1;dI=vA&&(!document.documentMode||9<document.documentMode)}function oN(){jm&&(jm.detachEvent("onpropertychange",hI),ng=jm=null)}function hI(n){if(n.propertyName==="value"&&oS(ng)){var e=[];uI(e,ng,n,QC(n)),qL(C$,e)}}function P$(n,e,t){n==="focusin"?(oN(),jm=e,ng=t,jm.attachEvent("onpropertychange",hI)):n==="focusout"&&oN()}function N$(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return oS(ng)}function R$(n,e){if(n==="click")return oS(e)}function j$(n,e){if(n==="input"||n==="change")return oS(e)}function M$(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var us=typeof Object.is=="function"?Object.is:M$;function rg(n,e){if(us(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!L_.call(e,i)||!us(n[i],e[i]))return!1}return!0}function aN(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function lN(n,e){var t=aN(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=aN(t)}}function fI(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?fI(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function pI(){for(var n=window,e=vb();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=vb(n.document)}return e}function oT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function L$(n){var e=pI(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&fI(t.ownerDocument.documentElement,t)){if(r!==null&&oT(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=lN(t,s);var o=lN(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var I$=ea&&"documentMode"in document&&11>=document.documentMode,jd=null,Z_=null,Mm=null,eE=!1;function cN(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;eE||jd==null||jd!==vb(r)||(r=jd,"selectionStart"in r&&oT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Mm&&rg(Mm,r)||(Mm=r,r=Eb(Z_,"onSelect"),0<r.length&&(e=new rT("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=jd)))}function Ov(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Md={animationend:Ov("Animation","AnimationEnd"),animationiteration:Ov("Animation","AnimationIteration"),animationstart:Ov("Animation","AnimationStart"),transitionend:Ov("Transition","TransitionEnd")},bA={},mI={};ea&&(mI=document.createElement("div").style,"AnimationEvent"in window||(delete Md.animationend.animation,delete Md.animationiteration.animation,delete Md.animationstart.animation),"TransitionEvent"in window||delete Md.transitionend.transition);function aS(n){if(bA[n])return bA[n];if(!Md[n])return n;var e=Md[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in mI)return bA[n]=e[t];return n}var gI=aS("animationend"),yI=aS("animationiteration"),vI=aS("animationstart"),xI=aS("transitionend"),bI=new Map,uN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vl(n,e){bI.set(n,e),od(e,[n])}for(var wA=0;wA<uN.length;wA++){var SA=uN[wA],D$=SA.toLowerCase(),O$=SA[0].toUpperCase()+SA.slice(1);Vl(D$,"on"+O$)}Vl(gI,"onAnimationEnd");Vl(yI,"onAnimationIteration");Vl(vI,"onAnimationStart");Vl("dblclick","onDoubleClick");Vl("focusin","onFocus");Vl("focusout","onBlur");Vl(xI,"onTransitionEnd");ap("onMouseEnter",["mouseout","mouseover"]);ap("onMouseLeave",["mouseout","mouseover"]);ap("onPointerEnter",["pointerout","pointerover"]);ap("onPointerLeave",["pointerout","pointerover"]);od("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));od("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));od("onBeforeInput",["compositionend","keypress","textInput","paste"]);od("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));od("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));od("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F$=new Set("cancel close invalid load scroll toggle".split(" ").concat(sm));function dN(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,Dz(r,e,void 0,n),n.currentTarget=null}function wI(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;dN(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;dN(i,a,c),s=l}}}if(bb)throw n=X_,bb=!1,X_=null,n}function bt(n,e){var t=e[sE];t===void 0&&(t=e[sE]=new Set);var r=n+"__bubble";t.has(r)||(SI(e,n,2,!1),t.add(r))}function AA(n,e,t){var r=0;e&&(r|=4),SI(t,n,r,e)}var Fv="_reactListening"+Math.random().toString(36).slice(2);function ig(n){if(!n[Fv]){n[Fv]=!0,PL.forEach(function(t){t!=="selectionchange"&&(F$.has(t)||AA(t,!1,n),AA(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Fv]||(e[Fv]=!0,AA("selectionchange",!1,e))}}function SI(n,e,t,r){switch(sI(e)){case 1:var i=Jz;break;case 4:i=Zz;break;default:i=tT}t=i.bind(null,e,t,n),i=void 0,!K_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function _A(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=gc(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}qL(function(){var c=s,d=QC(t),h=[];e:{var f=bI.get(n);if(f!==void 0){var m=rT,y=n;switch(n){case"keypress":if(_x(t)===0)break e;case"keydown":case"keyup":m=p$;break;case"focusin":y="focus",m=yA;break;case"focusout":y="blur",m=yA;break;case"beforeblur":case"afterblur":m=yA;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Z2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=n$;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=y$;break;case gI:case yI:case vI:m=s$;break;case xI:m=x$;break;case"scroll":m=e$;break;case"wheel":m=w$;break;case"copy":case"cut":case"paste":m=a$;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=tN}var g=(e&4)!==0,b=!g&&n==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var x=c,w;x!==null;){w=x;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,v!==null&&(E=Jm(x,v),E!=null&&g.push(sg(x,E,w)))),b)break;x=x.return}0<g.length&&(f=new m(f,y,null,t,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==G_&&(y=t.relatedTarget||t.fromElement)&&(gc(y)||y[ta]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?gc(y):null,y!==null&&(b=ad(y),y!==b||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(g=Z2,E="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(g=tN,E="onPointerLeave",v="onPointerEnter",x="pointer"),b=m==null?f:Ld(m),w=y==null?f:Ld(y),f=new g(E,x+"leave",m,t,d),f.target=b,f.relatedTarget=w,E=null,gc(d)===c&&(g=new g(v,x+"enter",y,t,d),g.target=w,g.relatedTarget=b,E=g),b=E,m&&y)t:{for(g=m,v=y,x=0,w=g;w;w=gd(w))x++;for(w=0,E=v;E;E=gd(E))w++;for(;0<x-w;)g=gd(g),x--;for(;0<w-x;)v=gd(v),w--;for(;x--;){if(g===v||v!==null&&g===v.alternate)break t;g=gd(g),v=gd(v)}g=null}else g=null;m!==null&&hN(h,f,m,g,!1),y!==null&&b!==null&&hN(h,b,y,g,!0)}}e:{if(f=c?Ld(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var T=T$;else if(iN(f))if(dI)T=j$;else{T=N$;var k=P$}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=R$);if(T&&(T=T(n,c))){uI(h,T,t,d);break e}k&&k(n,f,c),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&$_(f,"number",f.value)}switch(k=c?Ld(c):window,n){case"focusin":(iN(k)||k.contentEditable==="true")&&(jd=k,Z_=c,Mm=null);break;case"focusout":Mm=Z_=jd=null;break;case"mousedown":eE=!0;break;case"contextmenu":case"mouseup":case"dragend":eE=!1,cN(h,t,d);break;case"selectionchange":if(I$)break;case"keydown":case"keyup":cN(h,t,d)}var P;if(sT)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Rd?lI(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(aI&&t.locale!=="ko"&&(Rd||R!=="onCompositionStart"?R==="onCompositionEnd"&&Rd&&(P=oI()):(El=d,nT="value"in El?El.value:El.textContent,Rd=!0)),k=Eb(c,R),0<k.length&&(R=new eN(R,n,null,t,d),h.push({event:R,listeners:k}),P?R.data=P:(P=cI(t),P!==null&&(R.data=P)))),(P=A$?_$(n,t):E$(n,t))&&(c=Eb(c,"onBeforeInput"),0<c.length&&(d=new eN("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:c}),d.data=P))}wI(h,e)})}function sg(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Eb(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jm(n,t),s!=null&&r.unshift(sg(n,s,i)),s=Jm(n,e),s!=null&&r.push(sg(n,s,i))),n=n.return}return r}function gd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function hN(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Jm(t,s),l!=null&&o.unshift(sg(t,l,a))):i||(l=Jm(t,s),l!=null&&o.push(sg(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var B$=/\r\n?/g,z$=/\u0000|\uFFFD/g;function fN(n){return(typeof n=="string"?n:""+n).replace(B$,`
`).replace(z$,"")}function Bv(n,e,t){if(e=fN(e),fN(n)!==e&&t)throw Error(Q(425))}function kb(){}var tE=null,nE=null;function rE(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var iE=typeof setTimeout=="function"?setTimeout:void 0,$$=typeof clearTimeout=="function"?clearTimeout:void 0,pN=typeof Promise=="function"?Promise:void 0,U$=typeof queueMicrotask=="function"?queueMicrotask:typeof pN<"u"?function(n){return pN.resolve(null).then(n).catch(V$)}:iE;function V$(n){setTimeout(function(){throw n})}function EA(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),tg(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);tg(e)}function Nl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function mN(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Sp=Math.random().toString(36).slice(2),qs="__reactFiber$"+Sp,og="__reactProps$"+Sp,ta="__reactContainer$"+Sp,sE="__reactEvents$"+Sp,H$="__reactListeners$"+Sp,q$="__reactHandles$"+Sp;function gc(n){var e=n[qs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[ta]||t[qs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=mN(n);n!==null;){if(t=n[qs])return t;n=mN(n)}return e}n=t,t=n.parentNode}return null}function sv(n){return n=n[qs]||n[ta],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ld(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Q(33))}function lS(n){return n[og]||null}var oE=[],Id=-1;function Hl(n){return{current:n}}function wt(n){0>Id||(n.current=oE[Id],oE[Id]=null,Id--)}function mt(n,e){Id++,oE[Id]=n.current,n.current=e}var Fl={},Wn=Hl(Fl),Er=Hl(!1),Qu=Fl;function lp(n,e){var t=n.type.contextTypes;if(!t)return Fl;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function kr(n){return n=n.childContextTypes,n!=null}function Cb(){wt(Er),wt(Wn)}function gN(n,e,t){if(Wn.current!==Fl)throw Error(Q(168));mt(Wn,e),mt(Er,t)}function AI(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Q(108,Pz(n)||"Unknown",i));return It({},t,r)}function Tb(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Fl,Qu=Wn.current,mt(Wn,n),mt(Er,Er.current),!0}function yN(n,e,t){var r=n.stateNode;if(!r)throw Error(Q(169));t?(n=AI(n,e,Qu),r.__reactInternalMemoizedMergedChildContext=n,wt(Er),wt(Wn),mt(Wn,n)):wt(Er),mt(Er,t)}var lo=null,cS=!1,kA=!1;function _I(n){lo===null?lo=[n]:lo.push(n)}function G$(n){cS=!0,_I(n)}function ql(){if(!kA&&lo!==null){kA=!0;var n=0,e=Ze;try{var t=lo;for(Ze=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}lo=null,cS=!1}catch(i){throw lo!==null&&(lo=lo.slice(n+1)),XL(JC,ql),i}finally{Ze=e,kA=!1}}return null}var Dd=[],Od=0,Pb=null,Nb=0,_i=[],Ei=0,Ju=null,Wo=1,Ko="";function nc(n,e){Dd[Od++]=Nb,Dd[Od++]=Pb,Pb=n,Nb=e}function EI(n,e,t){_i[Ei++]=Wo,_i[Ei++]=Ko,_i[Ei++]=Ju,Ju=n;var r=Wo;n=Ko;var i=32-ls(r)-1;r&=~(1<<i),t+=1;var s=32-ls(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Wo=1<<32-ls(e)+i|t<<i|r,Ko=s+n}else Wo=1<<s|t<<i|r,Ko=n}function aT(n){n.return!==null&&(nc(n,1),EI(n,1,0))}function lT(n){for(;n===Pb;)Pb=Dd[--Od],Dd[Od]=null,Nb=Dd[--Od],Dd[Od]=null;for(;n===Ju;)Ju=_i[--Ei],_i[Ei]=null,Ko=_i[--Ei],_i[Ei]=null,Wo=_i[--Ei],_i[Ei]=null}var ni=null,ei=null,Ct=!1,as=null;function kI(n,e){var t=Ti(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function vN(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ni=n,ei=Nl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ni=n,ei=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Ju!==null?{id:Wo,overflow:Ko}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ti(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ni=n,ei=null,!0):!1;default:return!1}}function aE(n){return(n.mode&1)!==0&&(n.flags&128)===0}function lE(n){if(Ct){var e=ei;if(e){var t=e;if(!vN(n,e)){if(aE(n))throw Error(Q(418));e=Nl(t.nextSibling);var r=ni;e&&vN(n,e)?kI(r,t):(n.flags=n.flags&-4097|2,Ct=!1,ni=n)}}else{if(aE(n))throw Error(Q(418));n.flags=n.flags&-4097|2,Ct=!1,ni=n}}}function xN(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ni=n}function zv(n){if(n!==ni)return!1;if(!Ct)return xN(n),Ct=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!rE(n.type,n.memoizedProps)),e&&(e=ei)){if(aE(n))throw CI(),Error(Q(418));for(;e;)kI(n,e),e=Nl(e.nextSibling)}if(xN(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Q(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ei=Nl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ei=null}}else ei=ni?Nl(n.stateNode.nextSibling):null;return!0}function CI(){for(var n=ei;n;)n=Nl(n.nextSibling)}function cp(){ei=ni=null,Ct=!1}function cT(n){as===null?as=[n]:as.push(n)}var W$=ca.ReactCurrentBatchConfig;function Fp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Q(309));var r=t.stateNode}if(!r)throw Error(Q(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Q(284));if(!t._owner)throw Error(Q(290,n))}return n}function $v(n,e){throw n=Object.prototype.toString.call(e),Error(Q(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function bN(n){var e=n._init;return e(n._payload)}function TI(n){function e(v,x){if(n){var w=v.deletions;w===null?(v.deletions=[x],v.flags|=16):w.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function i(v,x){return v=Ll(v,x),v.index=0,v.sibling=null,v}function s(v,x,w){return v.index=w,n?(w=v.alternate,w!==null?(w=w.index,w<x?(v.flags|=2,x):w):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,x,w,E){return x===null||x.tag!==6?(x=MA(w,v.mode,E),x.return=v,x):(x=i(x,w),x.return=v,x)}function l(v,x,w,E){var T=w.type;return T===Nd?d(v,x,w.props.children,E,w.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ba&&bN(T)===x.type)?(E=i(x,w.props),E.ref=Fp(v,x,w),E.return=v,E):(E=Rx(w.type,w.key,w.props,null,v.mode,E),E.ref=Fp(v,x,w),E.return=v,E)}function c(v,x,w,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=LA(w,v.mode,E),x.return=v,x):(x=i(x,w.children||[]),x.return=v,x)}function d(v,x,w,E,T){return x===null||x.tag!==7?(x=Yu(w,v.mode,E,T),x.return=v,x):(x=i(x,w),x.return=v,x)}function h(v,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=MA(""+x,v.mode,w),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nv:return w=Rx(x.type,x.key,x.props,null,v.mode,w),w.ref=Fp(v,null,x),w.return=v,w;case Pd:return x=LA(x,v.mode,w),x.return=v,x;case ba:var E=x._init;return h(v,E(x._payload),w)}if(rm(x)||Mp(x))return x=Yu(x,v.mode,w,null),x.return=v,x;$v(v,x)}return null}function f(v,x,w,E){var T=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return T!==null?null:a(v,x,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Nv:return w.key===T?l(v,x,w,E):null;case Pd:return w.key===T?c(v,x,w,E):null;case ba:return T=w._init,f(v,x,T(w._payload),E)}if(rm(w)||Mp(w))return T!==null?null:d(v,x,w,E,null);$v(v,w)}return null}function m(v,x,w,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(w)||null,a(x,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Nv:return v=v.get(E.key===null?w:E.key)||null,l(x,v,E,T);case Pd:return v=v.get(E.key===null?w:E.key)||null,c(x,v,E,T);case ba:var k=E._init;return m(v,x,w,k(E._payload),T)}if(rm(E)||Mp(E))return v=v.get(w)||null,d(x,v,E,T,null);$v(x,E)}return null}function y(v,x,w,E){for(var T=null,k=null,P=x,R=x=0,L=null;P!==null&&R<w.length;R++){P.index>R?(L=P,P=null):L=P.sibling;var O=f(v,P,w[R],E);if(O===null){P===null&&(P=L);break}n&&P&&O.alternate===null&&e(v,P),x=s(O,x,R),k===null?T=O:k.sibling=O,k=O,P=L}if(R===w.length)return t(v,P),Ct&&nc(v,R),T;if(P===null){for(;R<w.length;R++)P=h(v,w[R],E),P!==null&&(x=s(P,x,R),k===null?T=P:k.sibling=P,k=P);return Ct&&nc(v,R),T}for(P=r(v,P);R<w.length;R++)L=m(P,v,R,w[R],E),L!==null&&(n&&L.alternate!==null&&P.delete(L.key===null?R:L.key),x=s(L,x,R),k===null?T=L:k.sibling=L,k=L);return n&&P.forEach(function(F){return e(v,F)}),Ct&&nc(v,R),T}function g(v,x,w,E){var T=Mp(w);if(typeof T!="function")throw Error(Q(150));if(w=T.call(w),w==null)throw Error(Q(151));for(var k=T=null,P=x,R=x=0,L=null,O=w.next();P!==null&&!O.done;R++,O=w.next()){P.index>R?(L=P,P=null):L=P.sibling;var F=f(v,P,O.value,E);if(F===null){P===null&&(P=L);break}n&&P&&F.alternate===null&&e(v,P),x=s(F,x,R),k===null?T=F:k.sibling=F,k=F,P=L}if(O.done)return t(v,P),Ct&&nc(v,R),T;if(P===null){for(;!O.done;R++,O=w.next())O=h(v,O.value,E),O!==null&&(x=s(O,x,R),k===null?T=O:k.sibling=O,k=O);return Ct&&nc(v,R),T}for(P=r(v,P);!O.done;R++,O=w.next())O=m(P,v,R,O.value,E),O!==null&&(n&&O.alternate!==null&&P.delete(O.key===null?R:O.key),x=s(O,x,R),k===null?T=O:k.sibling=O,k=O);return n&&P.forEach(function(I){return e(v,I)}),Ct&&nc(v,R),T}function b(v,x,w,E){if(typeof w=="object"&&w!==null&&w.type===Nd&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Nv:e:{for(var T=w.key,k=x;k!==null;){if(k.key===T){if(T=w.type,T===Nd){if(k.tag===7){t(v,k.sibling),x=i(k,w.props.children),x.return=v,v=x;break e}}else if(k.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===ba&&bN(T)===k.type){t(v,k.sibling),x=i(k,w.props),x.ref=Fp(v,k,w),x.return=v,v=x;break e}t(v,k);break}else e(v,k);k=k.sibling}w.type===Nd?(x=Yu(w.props.children,v.mode,E,w.key),x.return=v,v=x):(E=Rx(w.type,w.key,w.props,null,v.mode,E),E.ref=Fp(v,x,w),E.return=v,v=E)}return o(v);case Pd:e:{for(k=w.key;x!==null;){if(x.key===k)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){t(v,x.sibling),x=i(x,w.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=LA(w,v.mode,E),x.return=v,v=x}return o(v);case ba:return k=w._init,b(v,x,k(w._payload),E)}if(rm(w))return y(v,x,w,E);if(Mp(w))return g(v,x,w,E);$v(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(t(v,x.sibling),x=i(x,w),x.return=v,v=x):(t(v,x),x=MA(w,v.mode,E),x.return=v,v=x),o(v)):t(v,x)}return b}var up=TI(!0),PI=TI(!1),Rb=Hl(null),jb=null,Fd=null,uT=null;function dT(){uT=Fd=jb=null}function hT(n){var e=Rb.current;wt(Rb),n._currentValue=e}function cE(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function eh(n,e){jb=n,uT=Fd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(_r=!0),n.firstContext=null)}function Ni(n){var e=n._currentValue;if(uT!==n)if(n={context:n,memoizedValue:e,next:null},Fd===null){if(jb===null)throw Error(Q(308));Fd=n,jb.dependencies={lanes:0,firstContext:n}}else Fd=Fd.next=n;return e}var yc=null;function fT(n){yc===null?yc=[n]:yc.push(n)}function NI(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,fT(e)):(t.next=i.next,i.next=t),e.interleaved=t,na(n,r)}function na(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var wa=!1;function pT(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RI(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Qo(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Rl(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,Ge&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,na(n,t)}return i=r.interleaved,i===null?(e.next=e,fT(r)):(e.next=i.next,i.next=e),r.interleaved=e,na(n,t)}function Ex(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZC(n,t)}}function wN(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Mb(n,e,t,r){var i=n.updateQueue;wa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=c=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((r&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(f=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=It({},h,f);break e;case 2:wa=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ed|=o,n.lanes=o,n.memoizedState=h}}function SN(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var ov={},Xs=Hl(ov),ag=Hl(ov),lg=Hl(ov);function vc(n){if(n===ov)throw Error(Q(174));return n}function mT(n,e){switch(mt(lg,e),mt(ag,n),mt(Xs,ov),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:V_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=V_(e,n)}wt(Xs),mt(Xs,e)}function dp(){wt(Xs),wt(ag),wt(lg)}function jI(n){vc(lg.current);var e=vc(Xs.current),t=V_(e,n.type);e!==t&&(mt(ag,n),mt(Xs,t))}function gT(n){ag.current===n&&(wt(Xs),wt(ag))}var Nt=Hl(0);function Lb(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var CA=[];function yT(){for(var n=0;n<CA.length;n++)CA[n]._workInProgressVersionPrimary=null;CA.length=0}var kx=ca.ReactCurrentDispatcher,TA=ca.ReactCurrentBatchConfig,Zu=0,Mt=null,an=null,yn=null,Ib=!1,Lm=!1,cg=0,K$=0;function Mn(){throw Error(Q(321))}function vT(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!us(n[t],e[t]))return!1;return!0}function xT(n,e,t,r,i,s){if(Zu=s,Mt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,kx.current=n===null||n.memoizedState===null?J$:Z$,n=t(r,i),Lm){s=0;do{if(Lm=!1,cg=0,25<=s)throw Error(Q(301));s+=1,yn=an=null,e.updateQueue=null,kx.current=eU,n=t(r,i)}while(Lm)}if(kx.current=Db,e=an!==null&&an.next!==null,Zu=0,yn=an=Mt=null,Ib=!1,e)throw Error(Q(300));return n}function bT(){var n=cg!==0;return cg=0,n}function vs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Mt.memoizedState=yn=n:yn=yn.next=n,yn}function Ri(){if(an===null){var n=Mt.alternate;n=n!==null?n.memoizedState:null}else n=an.next;var e=yn===null?Mt.memoizedState:yn.next;if(e!==null)yn=e,an=n;else{if(n===null)throw Error(Q(310));an=n,n={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},yn===null?Mt.memoizedState=yn=n:yn=yn.next=n}return yn}function ug(n,e){return typeof e=="function"?e(n):e}function PA(n){var e=Ri(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var r=an,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((Zu&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Mt.lanes|=d,ed|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,us(r,e.memoizedState)||(_r=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,Mt.lanes|=s,ed|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function NA(n){var e=Ri(),t=e.queue;if(t===null)throw Error(Q(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);us(s,e.memoizedState)||(_r=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function MI(){}function LI(n,e){var t=Mt,r=Ri(),i=e(),s=!us(r.memoizedState,i);if(s&&(r.memoizedState=i,_r=!0),r=r.queue,wT(OI.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||yn!==null&&yn.memoizedState.tag&1){if(t.flags|=2048,dg(9,DI.bind(null,t,r,i,e),void 0,null),vn===null)throw Error(Q(349));Zu&30||II(t,e,i)}return i}function II(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function DI(n,e,t,r){e.value=t,e.getSnapshot=r,FI(e)&&BI(n)}function OI(n,e,t){return t(function(){FI(e)&&BI(n)})}function FI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!us(n,t)}catch{return!0}}function BI(n){var e=na(n,1);e!==null&&cs(e,n,1,-1)}function AN(n){var e=vs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ug,lastRenderedState:n},e.queue=n,n=n.dispatch=Q$.bind(null,Mt,n),[e.memoizedState,n]}function dg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Mt.updateQueue,e===null?(e={lastEffect:null,stores:null},Mt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function zI(){return Ri().memoizedState}function Cx(n,e,t,r){var i=vs();Mt.flags|=n,i.memoizedState=dg(1|e,t,void 0,r===void 0?null:r)}function uS(n,e,t,r){var i=Ri();r=r===void 0?null:r;var s=void 0;if(an!==null){var o=an.memoizedState;if(s=o.destroy,r!==null&&vT(r,o.deps)){i.memoizedState=dg(e,t,s,r);return}}Mt.flags|=n,i.memoizedState=dg(1|e,t,s,r)}function _N(n,e){return Cx(8390656,8,n,e)}function wT(n,e){return uS(2048,8,n,e)}function $I(n,e){return uS(4,2,n,e)}function UI(n,e){return uS(4,4,n,e)}function VI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function HI(n,e,t){return t=t!=null?t.concat([n]):null,uS(4,4,VI.bind(null,e,n),t)}function ST(){}function qI(n,e){var t=Ri();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vT(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function GI(n,e){var t=Ri();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&vT(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function WI(n,e,t){return Zu&21?(us(t,e)||(t=JL(),Mt.lanes|=t,ed|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,_r=!0),n.memoizedState=t)}function X$(n,e){var t=Ze;Ze=t!==0&&4>t?t:4,n(!0);var r=TA.transition;TA.transition={};try{n(!1),e()}finally{Ze=t,TA.transition=r}}function KI(){return Ri().memoizedState}function Y$(n,e,t){var r=Ml(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},XI(n))YI(e,t);else if(t=NI(n,e,t,r),t!==null){var i=sr();cs(t,n,r,i),QI(t,e,r)}}function Q$(n,e,t){var r=Ml(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(XI(n))YI(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,us(a,o)){var l=e.interleaved;l===null?(i.next=i,fT(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=NI(n,e,i,r),t!==null&&(i=sr(),cs(t,n,r,i),QI(t,e,r))}}function XI(n){var e=n.alternate;return n===Mt||e!==null&&e===Mt}function YI(n,e){Lm=Ib=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function QI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,ZC(n,t)}}var Db={readContext:Ni,useCallback:Mn,useContext:Mn,useEffect:Mn,useImperativeHandle:Mn,useInsertionEffect:Mn,useLayoutEffect:Mn,useMemo:Mn,useReducer:Mn,useRef:Mn,useState:Mn,useDebugValue:Mn,useDeferredValue:Mn,useTransition:Mn,useMutableSource:Mn,useSyncExternalStore:Mn,useId:Mn,unstable_isNewReconciler:!1},J$={readContext:Ni,useCallback:function(n,e){return vs().memoizedState=[n,e===void 0?null:e],n},useContext:Ni,useEffect:_N,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Cx(4194308,4,VI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Cx(4194308,4,n,e)},useInsertionEffect:function(n,e){return Cx(4,2,n,e)},useMemo:function(n,e){var t=vs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=vs();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Y$.bind(null,Mt,n),[r.memoizedState,n]},useRef:function(n){var e=vs();return n={current:n},e.memoizedState=n},useState:AN,useDebugValue:ST,useDeferredValue:function(n){return vs().memoizedState=n},useTransition:function(){var n=AN(!1),e=n[0];return n=X$.bind(null,n[1]),vs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Mt,i=vs();if(Ct){if(t===void 0)throw Error(Q(407));t=t()}else{if(t=e(),vn===null)throw Error(Q(349));Zu&30||II(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,_N(OI.bind(null,r,s,n),[n]),r.flags|=2048,dg(9,DI.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=vs(),e=vn.identifierPrefix;if(Ct){var t=Ko,r=Wo;t=(r&~(1<<32-ls(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=cg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=K$++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Z$={readContext:Ni,useCallback:qI,useContext:Ni,useEffect:wT,useImperativeHandle:HI,useInsertionEffect:$I,useLayoutEffect:UI,useMemo:GI,useReducer:PA,useRef:zI,useState:function(){return PA(ug)},useDebugValue:ST,useDeferredValue:function(n){var e=Ri();return WI(e,an.memoizedState,n)},useTransition:function(){var n=PA(ug)[0],e=Ri().memoizedState;return[n,e]},useMutableSource:MI,useSyncExternalStore:LI,useId:KI,unstable_isNewReconciler:!1},eU={readContext:Ni,useCallback:qI,useContext:Ni,useEffect:wT,useImperativeHandle:HI,useInsertionEffect:$I,useLayoutEffect:UI,useMemo:GI,useReducer:NA,useRef:zI,useState:function(){return NA(ug)},useDebugValue:ST,useDeferredValue:function(n){var e=Ri();return an===null?e.memoizedState=n:WI(e,an.memoizedState,n)},useTransition:function(){var n=NA(ug)[0],e=Ri().memoizedState;return[n,e]},useMutableSource:MI,useSyncExternalStore:LI,useId:KI,unstable_isNewReconciler:!1};function Hi(n,e){if(n&&n.defaultProps){e=It({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function uE(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:It({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var dS={isMounted:function(n){return(n=n._reactInternals)?ad(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=sr(),i=Ml(n),s=Qo(r,i);s.payload=e,t!=null&&(s.callback=t),e=Rl(n,s,i),e!==null&&(cs(e,n,i,r),Ex(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=sr(),i=Ml(n),s=Qo(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Rl(n,s,i),e!==null&&(cs(e,n,i,r),Ex(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=sr(),r=Ml(n),i=Qo(t,r);i.tag=2,e!=null&&(i.callback=e),e=Rl(n,i,r),e!==null&&(cs(e,n,r,t),Ex(e,n,r))}};function EN(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!rg(t,r)||!rg(i,s):!0}function JI(n,e,t){var r=!1,i=Fl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ni(s):(i=kr(e)?Qu:Wn.current,r=e.contextTypes,s=(r=r!=null)?lp(n,i):Fl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dS,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function kN(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&dS.enqueueReplaceState(e,e.state,null)}function dE(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs={},pT(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ni(s):(s=kr(e)?Qu:Wn.current,i.context=lp(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(uE(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&dS.enqueueReplaceState(i,i.state,null),Mb(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function hp(n,e){try{var t="",r=e;do t+=Tz(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function RA(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function hE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var tU=typeof WeakMap=="function"?WeakMap:Map;function ZI(n,e,t){t=Qo(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Fb||(Fb=!0,SE=r),hE(n,e)},t}function eD(n,e,t){t=Qo(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){hE(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){hE(n,e),typeof r!="function"&&(jl===null?jl=new Set([this]):jl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function CN(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new tU;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=mU.bind(null,n,e,t),e.then(n,n))}function TN(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function PN(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Qo(-1,1),e.tag=2,Rl(t,e,1))),t.lanes|=1),n)}var nU=ca.ReactCurrentOwner,_r=!1;function rr(n,e,t,r){e.child=n===null?PI(e,null,t,r):up(e,n.child,t,r)}function NN(n,e,t,r,i){t=t.render;var s=e.ref;return eh(e,i),r=xT(n,e,t,r,s,i),t=bT(),n!==null&&!_r?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ra(n,e,i)):(Ct&&t&&aT(e),e.flags|=1,rr(n,e,r,i),e.child)}function RN(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!NT(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,tD(n,e,s,r,i)):(n=Rx(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:rg,t(o,r)&&n.ref===e.ref)return ra(n,e,i)}return e.flags|=1,n=Ll(s,r),n.ref=e.ref,n.return=e,e.child=n}function tD(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(rg(s,r)&&n.ref===e.ref)if(_r=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(_r=!0);else return e.lanes=n.lanes,ra(n,e,i)}return fE(n,e,t,r,i)}function nD(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(zd,Jr),Jr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,mt(zd,Jr),Jr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,mt(zd,Jr),Jr|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,mt(zd,Jr),Jr|=r;return rr(n,e,i,t),e.child}function rD(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function fE(n,e,t,r,i){var s=kr(t)?Qu:Wn.current;return s=lp(e,s),eh(e,i),t=xT(n,e,t,r,s,i),r=bT(),n!==null&&!_r?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,ra(n,e,i)):(Ct&&r&&aT(e),e.flags|=1,rr(n,e,t,i),e.child)}function jN(n,e,t,r,i){if(kr(t)){var s=!0;Tb(e)}else s=!1;if(eh(e,i),e.stateNode===null)Tx(n,e),JI(e,t,r),dE(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Ni(c):(c=kr(t)?Qu:Wn.current,c=lp(e,c));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&kN(e,o,r,c),wa=!1;var f=e.memoizedState;o.state=f,Mb(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Er.current||wa?(typeof d=="function"&&(uE(e,t,d,r),l=e.memoizedState),(a=wa||EN(e,t,a,r,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,RI(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hi(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ni(l):(l=kr(t)?Qu:Wn.current,l=lp(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&kN(e,o,r,l),wa=!1,f=e.memoizedState,o.state=f,Mb(e,r,o,i);var y=e.memoizedState;a!==h||f!==y||Er.current||wa?(typeof m=="function"&&(uE(e,t,m,r),y=e.memoizedState),(c=wa||EN(e,t,c,r,f,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return pE(n,e,t,r,s,i)}function pE(n,e,t,r,i,s){rD(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&yN(e,t,!1),ra(n,e,s);r=e.stateNode,nU.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=up(e,n.child,null,s),e.child=up(e,null,a,s)):rr(n,e,a,s),e.memoizedState=r.state,i&&yN(e,t,!0),e.child}function iD(n){var e=n.stateNode;e.pendingContext?gN(n,e.pendingContext,e.pendingContext!==e.context):e.context&&gN(n,e.context,!1),mT(n,e.containerInfo)}function MN(n,e,t,r,i){return cp(),cT(i),e.flags|=256,rr(n,e,t,r),e.child}var mE={dehydrated:null,treeContext:null,retryLane:0};function gE(n){return{baseLanes:n,cachePool:null,transitions:null}}function sD(n,e,t){var r=e.pendingProps,i=Nt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),mt(Nt,i&1),n===null)return lE(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=pS(o,r,0,null),n=Yu(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=gE(t),e.memoizedState=mE,n):AT(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return rU(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ll(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ll(a,s):(s=Yu(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?gE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=mE,r}return s=n.child,n=s.sibling,r=Ll(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function AT(n,e){return e=pS({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Uv(n,e,t,r){return r!==null&&cT(r),up(e,n.child,null,t),n=AT(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function rU(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=RA(Error(Q(422))),Uv(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=pS({mode:"visible",children:r.children},i,0,null),s=Yu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&up(e,n.child,null,o),e.child.memoizedState=gE(o),e.memoizedState=mE,s);if(!(e.mode&1))return Uv(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Q(419)),r=RA(s,r,void 0),Uv(n,e,o,r)}if(a=(o&n.childLanes)!==0,_r||a){if(r=vn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,na(n,i),cs(r,n,i,-1))}return PT(),r=RA(Error(Q(421))),Uv(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=gU.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,ei=Nl(i.nextSibling),ni=e,Ct=!0,as=null,n!==null&&(_i[Ei++]=Wo,_i[Ei++]=Ko,_i[Ei++]=Ju,Wo=n.id,Ko=n.overflow,Ju=e),e=AT(e,r.children),e.flags|=4096,e)}function LN(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),cE(n.return,e,t)}function jA(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function oD(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rr(n,e,r.children,t),r=Nt.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&LN(n,t,e);else if(n.tag===19)LN(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(mt(Nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Lb(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),jA(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Lb(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}jA(e,!0,t,null,s);break;case"together":jA(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ra(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ed|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Q(153));if(e.child!==null){for(n=e.child,t=Ll(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ll(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function iU(n,e,t){switch(e.tag){case 3:iD(e),cp();break;case 5:jI(e);break;case 1:kr(e.type)&&Tb(e);break;case 4:mT(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;mt(Rb,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(mt(Nt,Nt.current&1),e.flags|=128,null):t&e.child.childLanes?sD(n,e,t):(mt(Nt,Nt.current&1),n=ra(n,e,t),n!==null?n.sibling:null);mt(Nt,Nt.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return oD(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),mt(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,nD(n,e,t)}return ra(n,e,t)}var aD,yE,lD,cD;aD=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};yE=function(){};lD=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,vc(Xs.current);var s=null;switch(t){case"input":i=B_(n,i),r=B_(n,r),s=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),s=[];break;case"textarea":i=U_(n,i),r=U_(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=kb)}H_(t,r);var o;t=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ym.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ym.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};cD=function(n,e,t,r){t!==r&&(e.flags|=4)};function Bp(n,e){if(!Ct)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function Ln(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function sU(n,e,t){var r=e.pendingProps;switch(lT(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return kr(e.type)&&Cb(),Ln(e),null;case 3:return r=e.stateNode,dp(),wt(Er),wt(Wn),yT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(zv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,as!==null&&(EE(as),as=null))),yE(n,e),Ln(e),null;case 5:gT(e);var i=vc(lg.current);if(t=e.type,n!==null&&e.stateNode!=null)lD(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Q(166));return Ln(e),null}if(n=vc(Xs.current),zv(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[qs]=e,r[og]=s,n=(e.mode&1)!==0,t){case"dialog":bt("cancel",r),bt("close",r);break;case"iframe":case"object":case"embed":bt("load",r);break;case"video":case"audio":for(i=0;i<sm.length;i++)bt(sm[i],r);break;case"source":bt("error",r);break;case"img":case"image":case"link":bt("error",r),bt("load",r);break;case"details":bt("toggle",r);break;case"input":V2(r,s),bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bt("invalid",r);break;case"textarea":q2(r,s),bt("invalid",r)}H_(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bv(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bv(r.textContent,a,n),i=["children",""+a]):Ym.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bt("scroll",r)}switch(t){case"input":Rv(r),H2(r,s,!0);break;case"textarea":Rv(r),G2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=kb)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=OL(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[qs]=e,n[og]=r,aD(n,e,!1,!1),e.stateNode=n;e:{switch(o=q_(t,r),t){case"dialog":bt("cancel",n),bt("close",n),i=r;break;case"iframe":case"object":case"embed":bt("load",n),i=r;break;case"video":case"audio":for(i=0;i<sm.length;i++)bt(sm[i],n);i=r;break;case"source":bt("error",n),i=r;break;case"img":case"image":case"link":bt("error",n),bt("load",n),i=r;break;case"details":bt("toggle",n),i=r;break;case"input":V2(n,r),i=B_(n,r),bt("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),bt("invalid",n);break;case"textarea":q2(n,r),i=U_(n,r),bt("invalid",n);break;default:i=r}H_(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?zL(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&FL(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Qm(n,l):typeof l=="number"&&Qm(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ym.hasOwnProperty(s)?l!=null&&s==="onScroll"&&bt("scroll",n):l!=null&&WC(n,s,l,o))}switch(t){case"input":Rv(n),H2(n,r,!1);break;case"textarea":Rv(n),G2(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Ol(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Yd(n,!!r.multiple,s,!1):r.defaultValue!=null&&Yd(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=kb)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(n&&e.stateNode!=null)cD(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Q(166));if(t=vc(lg.current),vc(Xs.current),zv(e)){if(r=e.stateNode,t=e.memoizedProps,r[qs]=e,(s=r.nodeValue!==t)&&(n=ni,n!==null))switch(n.tag){case 3:Bv(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Bv(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[qs]=e,e.stateNode=r}return Ln(e),null;case 13:if(wt(Nt),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ct&&ei!==null&&e.mode&1&&!(e.flags&128))CI(),cp(),e.flags|=98560,s=!1;else if(s=zv(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[qs]=e}else cp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),s=!1}else as!==null&&(EE(as),as=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Nt.current&1?ln===0&&(ln=3):PT())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return dp(),yE(n,e),n===null&&ig(e.stateNode.containerInfo),Ln(e),null;case 10:return hT(e.type._context),Ln(e),null;case 17:return kr(e.type)&&Cb(),Ln(e),null;case 19:if(wt(Nt),s=e.memoizedState,s===null)return Ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Bp(s,!1);else{if(ln!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Lb(n),o!==null){for(e.flags|=128,Bp(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return mt(Nt,Nt.current&1|2),e.child}n=n.sibling}s.tail!==null&&Wt()>fp&&(e.flags|=128,r=!0,Bp(s,!1),e.lanes=4194304)}else{if(!r)if(n=Lb(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Bp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ct)return Ln(e),null}else 2*Wt()-s.renderingStartTime>fp&&t!==1073741824&&(e.flags|=128,r=!0,Bp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Wt(),e.sibling=null,t=Nt.current,mt(Nt,r?t&1|2:t&1),e):(Ln(e),null);case 22:case 23:return TT(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jr&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function oU(n,e){switch(lT(e),e.tag){case 1:return kr(e.type)&&Cb(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return dp(),wt(Er),wt(Wn),yT(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return gT(e),null;case 13:if(wt(Nt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));cp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return wt(Nt),null;case 4:return dp(),null;case 10:return hT(e.type._context),null;case 22:case 23:return TT(),null;case 24:return null;default:return null}}var Vv=!1,Hn=!1,aU=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Bd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ut(n,e,r)}else t.current=null}function vE(n,e,t){try{t()}catch(r){Ut(n,e,r)}}var IN=!1;function lU(n,e){if(tE=Ab,n=pI(),oT(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,h=n,f=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===n)break t;if(f===t&&++c===i&&(a=o),f===s&&++d===r&&(l=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(nE={focusedElem:n,selectionRange:t},Ab=!1,ae=e;ae!==null;)if(e=ae,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ae=n;else for(;ae!==null;){e=ae;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,b=y.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:Hi(e.type,g),b);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(E){Ut(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}return y=IN,IN=!1,y}function Im(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&vE(e,t,s)}i=i.next}while(i!==r)}}function hS(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function xE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function uD(n){var e=n.alternate;e!==null&&(n.alternate=null,uD(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[qs],delete e[og],delete e[sE],delete e[H$],delete e[q$])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function dD(n){return n.tag===5||n.tag===3||n.tag===4}function DN(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||dD(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=kb));else if(r!==4&&(n=n.child,n!==null))for(bE(n,e,t),n=n.sibling;n!==null;)bE(n,e,t),n=n.sibling}function wE(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(wE(n,e,t),n=n.sibling;n!==null;)wE(n,e,t),n=n.sibling}var Tn=null,ss=!1;function pa(n,e,t){for(t=t.child;t!==null;)hD(n,e,t),t=t.sibling}function hD(n,e,t){if(Ks&&typeof Ks.onCommitFiberUnmount=="function")try{Ks.onCommitFiberUnmount(iS,t)}catch{}switch(t.tag){case 5:Hn||Bd(t,e);case 6:var r=Tn,i=ss;Tn=null,pa(n,e,t),Tn=r,ss=i,Tn!==null&&(ss?(n=Tn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Tn.removeChild(t.stateNode));break;case 18:Tn!==null&&(ss?(n=Tn,t=t.stateNode,n.nodeType===8?EA(n.parentNode,t):n.nodeType===1&&EA(n,t),tg(n)):EA(Tn,t.stateNode));break;case 4:r=Tn,i=ss,Tn=t.stateNode.containerInfo,ss=!0,pa(n,e,t),Tn=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Hn&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&vE(t,e,o),i=i.next}while(i!==r)}pa(n,e,t);break;case 1:if(!Hn&&(Bd(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ut(t,e,a)}pa(n,e,t);break;case 21:pa(n,e,t);break;case 22:t.mode&1?(Hn=(r=Hn)||t.memoizedState!==null,pa(n,e,t),Hn=r):pa(n,e,t);break;default:pa(n,e,t)}}function ON(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new aU),e.forEach(function(r){var i=yU.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function zi(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Tn=a.stateNode,ss=!1;break e;case 3:Tn=a.stateNode.containerInfo,ss=!0;break e;case 4:Tn=a.stateNode.containerInfo,ss=!0;break e}a=a.return}if(Tn===null)throw Error(Q(160));hD(s,o,i),Tn=null,ss=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ut(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fD(e,n),e=e.sibling}function fD(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(zi(e,n),ps(n),r&4){try{Im(3,n,n.return),hS(3,n)}catch(g){Ut(n,n.return,g)}try{Im(5,n,n.return)}catch(g){Ut(n,n.return,g)}}break;case 1:zi(e,n),ps(n),r&512&&t!==null&&Bd(t,t.return);break;case 5:if(zi(e,n),ps(n),r&512&&t!==null&&Bd(t,t.return),n.flags&32){var i=n.stateNode;try{Qm(i,"")}catch(g){Ut(n,n.return,g)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&IL(i,s),q_(a,o);var c=q_(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?zL(i,h):d==="dangerouslySetInnerHTML"?FL(i,h):d==="children"?Qm(i,h):WC(i,d,h,c)}switch(a){case"input":z_(i,s);break;case"textarea":DL(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Yd(i,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Yd(i,!!s.multiple,s.defaultValue,!0):Yd(i,!!s.multiple,s.multiple?[]:"",!1))}i[og]=s}catch(g){Ut(n,n.return,g)}}break;case 6:if(zi(e,n),ps(n),r&4){if(n.stateNode===null)throw Error(Q(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(g){Ut(n,n.return,g)}}break;case 3:if(zi(e,n),ps(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{tg(e.containerInfo)}catch(g){Ut(n,n.return,g)}break;case 4:zi(e,n),ps(n);break;case 13:zi(e,n),ps(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(kT=Wt())),r&4&&ON(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Hn=(c=Hn)||d,zi(e,n),Hn=c):zi(e,n),ps(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(ae=n,d=n.child;d!==null;){for(h=ae=d;ae!==null;){switch(f=ae,m=f.child,f.tag){case 0:case 11:case 14:case 15:Im(4,f,f.return);break;case 1:Bd(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Ut(r,t,g)}}break;case 5:Bd(f,f.return);break;case 22:if(f.memoizedState!==null){BN(h);continue}}m!==null?(m.return=f,ae=m):BN(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=BL("display",o))}catch(g){Ut(n,n.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Ut(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:zi(e,n),ps(n),r&4&&ON(n);break;case 21:break;default:zi(e,n),ps(n)}}function ps(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(dD(t)){var r=t;break e}t=t.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Qm(i,""),r.flags&=-33);var s=DN(n);wE(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=DN(n);bE(n,a,o);break;default:throw Error(Q(161))}}catch(l){Ut(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function cU(n,e,t){ae=n,pD(n)}function pD(n,e,t){for(var r=(n.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vv;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Hn;a=Vv;var c=Hn;if(Vv=o,(Hn=l)&&!c)for(ae=i;ae!==null;)o=ae,l=o.child,o.tag===22&&o.memoizedState!==null?zN(i):l!==null?(l.return=o,ae=l):zN(i);for(;s!==null;)ae=s,pD(s),s=s.sibling;ae=i,Vv=a,Hn=c}FN(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):FN(n)}}function FN(n){for(;ae!==null;){var e=ae;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Hn||hS(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Hn)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Hi(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&SN(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}SN(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&tg(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Hn||e.flags&512&&xE(e)}catch(f){Ut(e,e.return,f)}}if(e===n){ae=null;break}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}}function BN(n){for(;ae!==null;){var e=ae;if(e===n){ae=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ae=t;break}ae=e.return}}function zN(n){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{hS(4,e)}catch(l){Ut(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ut(e,i,l)}}var s=e.return;try{xE(e)}catch(l){Ut(e,s,l)}break;case 5:var o=e.return;try{xE(e)}catch(l){Ut(e,o,l)}}}catch(l){Ut(e,e.return,l)}if(e===n){ae=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ae=a;break}ae=e.return}}var uU=Math.ceil,Ob=ca.ReactCurrentDispatcher,_T=ca.ReactCurrentOwner,Pi=ca.ReactCurrentBatchConfig,Ge=0,vn=null,Zt=null,Nn=0,Jr=0,zd=Hl(0),ln=0,hg=null,ed=0,fS=0,ET=0,Dm=null,Sr=null,kT=0,fp=1/0,io=null,Fb=!1,SE=null,jl=null,Hv=!1,kl=null,Bb=0,Om=0,AE=null,Px=-1,Nx=0;function sr(){return Ge&6?Wt():Px!==-1?Px:Px=Wt()}function Ml(n){return n.mode&1?Ge&2&&Nn!==0?Nn&-Nn:W$.transition!==null?(Nx===0&&(Nx=JL()),Nx):(n=Ze,n!==0||(n=window.event,n=n===void 0?16:sI(n.type)),n):1}function cs(n,e,t,r){if(50<Om)throw Om=0,AE=null,Error(Q(185));rv(n,t,r),(!(Ge&2)||n!==vn)&&(n===vn&&(!(Ge&2)&&(fS|=t),ln===4&&_a(n,Nn)),Cr(n,r),t===1&&Ge===0&&!(e.mode&1)&&(fp=Wt()+500,cS&&ql()))}function Cr(n,e){var t=n.callbackNode;Wz(n,e);var r=Sb(n,n===vn?Nn:0);if(r===0)t!==null&&X2(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&X2(t),e===1)n.tag===0?G$($N.bind(null,n)):_I($N.bind(null,n)),U$(function(){!(Ge&6)&&ql()}),t=null;else{switch(ZL(r)){case 1:t=JC;break;case 4:t=YL;break;case 16:t=wb;break;case 536870912:t=QL;break;default:t=wb}t=SD(t,mD.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function mD(n,e){if(Px=-1,Nx=0,Ge&6)throw Error(Q(327));var t=n.callbackNode;if(th()&&n.callbackNode!==t)return null;var r=Sb(n,n===vn?Nn:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=zb(n,r);else{e=r;var i=Ge;Ge|=2;var s=yD();(vn!==n||Nn!==e)&&(io=null,fp=Wt()+500,Xu(n,e));do try{fU();break}catch(a){gD(n,a)}while(1);dT(),Ob.current=s,Ge=i,Zt!==null?e=0:(vn=null,Nn=0,e=ln)}if(e!==0){if(e===2&&(i=Y_(n),i!==0&&(r=i,e=_E(n,i))),e===1)throw t=hg,Xu(n,0),_a(n,r),Cr(n,Wt()),t;if(e===6)_a(n,r);else{if(i=n.current.alternate,!(r&30)&&!dU(i)&&(e=zb(n,r),e===2&&(s=Y_(n),s!==0&&(r=s,e=_E(n,s))),e===1))throw t=hg,Xu(n,0),_a(n,r),Cr(n,Wt()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Q(345));case 2:rc(n,Sr,io);break;case 3:if(_a(n,r),(r&130023424)===r&&(e=kT+500-Wt(),10<e)){if(Sb(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){sr(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=iE(rc.bind(null,n,Sr,io),e);break}rc(n,Sr,io);break;case 4:if(_a(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-ls(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uU(r/1960))-r,10<r){n.timeoutHandle=iE(rc.bind(null,n,Sr,io),r);break}rc(n,Sr,io);break;case 5:rc(n,Sr,io);break;default:throw Error(Q(329))}}}return Cr(n,Wt()),n.callbackNode===t?mD.bind(null,n):null}function _E(n,e){var t=Dm;return n.current.memoizedState.isDehydrated&&(Xu(n,e).flags|=256),n=zb(n,e),n!==2&&(e=Sr,Sr=t,e!==null&&EE(e)),n}function EE(n){Sr===null?Sr=n:Sr.push.apply(Sr,n)}function dU(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!us(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _a(n,e){for(e&=~ET,e&=~fS,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ls(e),r=1<<t;n[t]=-1,e&=~r}}function $N(n){if(Ge&6)throw Error(Q(327));th();var e=Sb(n,0);if(!(e&1))return Cr(n,Wt()),null;var t=zb(n,e);if(n.tag!==0&&t===2){var r=Y_(n);r!==0&&(e=r,t=_E(n,r))}if(t===1)throw t=hg,Xu(n,0),_a(n,e),Cr(n,Wt()),t;if(t===6)throw Error(Q(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,rc(n,Sr,io),Cr(n,Wt()),null}function CT(n,e){var t=Ge;Ge|=1;try{return n(e)}finally{Ge=t,Ge===0&&(fp=Wt()+500,cS&&ql())}}function td(n){kl!==null&&kl.tag===0&&!(Ge&6)&&th();var e=Ge;Ge|=1;var t=Pi.transition,r=Ze;try{if(Pi.transition=null,Ze=1,n)return n()}finally{Ze=r,Pi.transition=t,Ge=e,!(Ge&6)&&ql()}}function TT(){Jr=zd.current,wt(zd)}function Xu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,$$(t)),Zt!==null)for(t=Zt.return;t!==null;){var r=t;switch(lT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cb();break;case 3:dp(),wt(Er),wt(Wn),yT();break;case 5:gT(r);break;case 4:dp();break;case 13:wt(Nt);break;case 19:wt(Nt);break;case 10:hT(r.type._context);break;case 22:case 23:TT()}t=t.return}if(vn=n,Zt=n=Ll(n.current,null),Nn=Jr=e,ln=0,hg=null,ET=fS=ed=0,Sr=Dm=null,yc!==null){for(e=0;e<yc.length;e++)if(t=yc[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}yc=null}return n}function gD(n,e){do{var t=Zt;try{if(dT(),kx.current=Db,Ib){for(var r=Mt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ib=!1}if(Zu=0,yn=an=Mt=null,Lm=!1,cg=0,_T.current=null,t===null||t.return===null){ln=1,hg=e,Zt=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Nn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=TN(o);if(m!==null){m.flags&=-257,PN(m,o,a,s,e),m.mode&1&&CN(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var g=new Set;g.add(l),e.updateQueue=g}else y.add(l);break e}else{if(!(e&1)){CN(s,c,e),PT();break e}l=Error(Q(426))}}else if(Ct&&a.mode&1){var b=TN(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),PN(b,o,a,s,e),cT(hp(l,a));break e}}s=l=hp(l,a),ln!==4&&(ln=2),Dm===null?Dm=[s]:Dm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=ZI(s,l,e);wN(s,v);break e;case 1:a=l;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(jl===null||!jl.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=eD(s,a,e);wN(s,E);break e}}s=s.return}while(s!==null)}xD(t)}catch(T){e=T,Zt===t&&t!==null&&(Zt=t=t.return);continue}break}while(1)}function yD(){var n=Ob.current;return Ob.current=Db,n===null?Db:n}function PT(){(ln===0||ln===3||ln===2)&&(ln=4),vn===null||!(ed&268435455)&&!(fS&268435455)||_a(vn,Nn)}function zb(n,e){var t=Ge;Ge|=2;var r=yD();(vn!==n||Nn!==e)&&(io=null,Xu(n,e));do try{hU();break}catch(i){gD(n,i)}while(1);if(dT(),Ge=t,Ob.current=r,Zt!==null)throw Error(Q(261));return vn=null,Nn=0,ln}function hU(){for(;Zt!==null;)vD(Zt)}function fU(){for(;Zt!==null&&!Fz();)vD(Zt)}function vD(n){var e=wD(n.alternate,n,Jr);n.memoizedProps=n.pendingProps,e===null?xD(n):Zt=e,_T.current=null}function xD(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=oU(t,e),t!==null){t.flags&=32767,Zt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ln=6,Zt=null;return}}else if(t=sU(t,e,Jr),t!==null){Zt=t;return}if(e=e.sibling,e!==null){Zt=e;return}Zt=e=n}while(e!==null);ln===0&&(ln=5)}function rc(n,e,t){var r=Ze,i=Pi.transition;try{Pi.transition=null,Ze=1,pU(n,e,t,r)}finally{Pi.transition=i,Ze=r}return null}function pU(n,e,t,r){do th();while(kl!==null);if(Ge&6)throw Error(Q(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Q(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(Kz(n,s),n===vn&&(Zt=vn=null,Nn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Hv||(Hv=!0,SD(wb,function(){return th(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Pi.transition,Pi.transition=null;var o=Ze;Ze=1;var a=Ge;Ge|=4,_T.current=null,lU(n,t),fD(t,n),L$(nE),Ab=!!tE,nE=tE=null,n.current=t,cU(t),Bz(),Ge=a,Ze=o,Pi.transition=s}else n.current=t;if(Hv&&(Hv=!1,kl=n,Bb=i),s=n.pendingLanes,s===0&&(jl=null),Uz(t.stateNode),Cr(n,Wt()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fb)throw Fb=!1,n=SE,SE=null,n;return Bb&1&&n.tag!==0&&th(),s=n.pendingLanes,s&1?n===AE?Om++:(Om=0,AE=n):Om=0,ql(),null}function th(){if(kl!==null){var n=ZL(Bb),e=Pi.transition,t=Ze;try{if(Pi.transition=null,Ze=16>n?16:n,kl===null)var r=!1;else{if(n=kl,kl=null,Bb=0,Ge&6)throw Error(Q(331));var i=Ge;for(Ge|=4,ae=n.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ae=c;ae!==null;){var d=ae;switch(d.tag){case 0:case 11:case 15:Im(8,d,s)}var h=d.child;if(h!==null)h.return=d,ae=h;else for(;ae!==null;){d=ae;var f=d.sibling,m=d.return;if(uD(d),d===c){ae=null;break}if(f!==null){f.return=m,ae=f;break}ae=m}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var b=g.sibling;g.sibling=null,g=b}while(g!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Im(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ae=v;break e}ae=s.return}}var x=n.current;for(ae=x;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=x;ae!==null;){if(a=ae,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:hS(9,a)}}catch(T){Ut(a,a.return,T)}if(a===o){ae=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ae=E;break e}ae=a.return}}if(Ge=i,ql(),Ks&&typeof Ks.onPostCommitFiberRoot=="function")try{Ks.onPostCommitFiberRoot(iS,n)}catch{}r=!0}return r}finally{Ze=t,Pi.transition=e}}return!1}function UN(n,e,t){e=hp(t,e),e=ZI(n,e,1),n=Rl(n,e,1),e=sr(),n!==null&&(rv(n,1,e),Cr(n,e))}function Ut(n,e,t){if(n.tag===3)UN(n,n,t);else for(;e!==null;){if(e.tag===3){UN(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jl===null||!jl.has(r))){n=hp(t,n),n=eD(e,n,1),e=Rl(e,n,1),n=sr(),e!==null&&(rv(e,1,n),Cr(e,n));break}}e=e.return}}function mU(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=sr(),n.pingedLanes|=n.suspendedLanes&t,vn===n&&(Nn&t)===t&&(ln===4||ln===3&&(Nn&130023424)===Nn&&500>Wt()-kT?Xu(n,0):ET|=t),Cr(n,e)}function bD(n,e){e===0&&(n.mode&1?(e=Lv,Lv<<=1,!(Lv&130023424)&&(Lv=4194304)):e=1);var t=sr();n=na(n,e),n!==null&&(rv(n,e,t),Cr(n,t))}function gU(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),bD(n,t)}function yU(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(e),bD(n,t)}var wD;wD=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Er.current)_r=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return _r=!1,iU(n,e,t);_r=!!(n.flags&131072)}else _r=!1,Ct&&e.flags&1048576&&EI(e,Nb,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Tx(n,e),n=e.pendingProps;var i=lp(e,Wn.current);eh(e,t),i=xT(null,e,r,n,i,t);var s=bT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(s=!0,Tb(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pT(e),i.updater=dS,e.stateNode=i,i._reactInternals=e,dE(e,r,n,t),e=pE(null,e,r,!0,s,t)):(e.tag=0,Ct&&s&&aT(e),rr(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(Tx(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=xU(r),n=Hi(r,n),i){case 0:e=fE(null,e,r,n,t);break e;case 1:e=jN(null,e,r,n,t);break e;case 11:e=NN(null,e,r,n,t);break e;case 14:e=RN(null,e,r,Hi(r.type,n),t);break e}throw Error(Q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hi(r,i),fE(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hi(r,i),jN(n,e,r,i,t);case 3:e:{if(iD(e),n===null)throw Error(Q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,RI(n,e),Mb(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=hp(Error(Q(423)),e),e=MN(n,e,r,t,i);break e}else if(r!==i){i=hp(Error(Q(424)),e),e=MN(n,e,r,t,i);break e}else for(ei=Nl(e.stateNode.containerInfo.firstChild),ni=e,Ct=!0,as=null,t=PI(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cp(),r===i){e=ra(n,e,t);break e}rr(n,e,r,t)}e=e.child}return e;case 5:return jI(e),n===null&&lE(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,rE(r,i)?o=null:s!==null&&rE(r,s)&&(e.flags|=32),rD(n,e),rr(n,e,o,t),e.child;case 6:return n===null&&lE(e),null;case 13:return sD(n,e,t);case 4:return mT(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=up(e,null,r,t):rr(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hi(r,i),NN(n,e,r,i,t);case 7:return rr(n,e,e.pendingProps,t),e.child;case 8:return rr(n,e,e.pendingProps.children,t),e.child;case 12:return rr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,mt(Rb,r._currentValue),r._currentValue=o,s!==null)if(us(s.value,o)){if(s.children===i.children&&!Er.current){e=ra(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qo(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),cE(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),cE(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rr(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eh(e,t),i=Ni(i),r=r(i),e.flags|=1,rr(n,e,r,t),e.child;case 14:return r=e.type,i=Hi(r,e.pendingProps),i=Hi(r.type,i),RN(n,e,r,i,t);case 15:return tD(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hi(r,i),Tx(n,e),e.tag=1,kr(r)?(n=!0,Tb(e)):n=!1,eh(e,t),JI(e,r,i),dE(e,r,i,t),pE(null,e,r,!0,n,t);case 19:return oD(n,e,t);case 22:return nD(n,e,t)}throw Error(Q(156,e.tag))};function SD(n,e){return XL(n,e)}function vU(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(n,e,t,r){return new vU(n,e,t,r)}function NT(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xU(n){if(typeof n=="function")return NT(n)?1:0;if(n!=null){if(n=n.$$typeof,n===XC)return 11;if(n===YC)return 14}return 2}function Ll(n,e){var t=n.alternate;return t===null?(t=Ti(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Rx(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")NT(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Nd:return Yu(t.children,i,s,e);case KC:o=8,i|=8;break;case I_:return n=Ti(12,t,e,i|2),n.elementType=I_,n.lanes=s,n;case D_:return n=Ti(13,t,e,i),n.elementType=D_,n.lanes=s,n;case O_:return n=Ti(19,t,e,i),n.elementType=O_,n.lanes=s,n;case jL:return pS(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case NL:o=10;break e;case RL:o=9;break e;case XC:o=11;break e;case YC:o=14;break e;case ba:o=16,r=null;break e}throw Error(Q(130,n==null?n:typeof n,""))}return e=Ti(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Yu(n,e,t,r){return n=Ti(7,n,r,e),n.lanes=t,n}function pS(n,e,t,r){return n=Ti(22,n,r,e),n.elementType=jL,n.lanes=t,n.stateNode={isHidden:!1},n}function MA(n,e,t){return n=Ti(6,n,null,e),n.lanes=t,n}function LA(n,e,t){return e=Ti(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function bU(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pA(0),this.expirationTimes=pA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function RT(n,e,t,r,i,s,o,a,l){return n=new bU(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ti(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},pT(s),n}function wU(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pd,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function AD(n){if(!n)return Fl;n=n._reactInternals;e:{if(ad(n)!==n||n.tag!==1)throw Error(Q(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(n.tag===1){var t=n.type;if(kr(t))return AI(n,t,e)}return e}function _D(n,e,t,r,i,s,o,a,l){return n=RT(t,r,!0,n,i,s,o,a,l),n.context=AD(null),t=n.current,r=sr(),i=Ml(t),s=Qo(r,i),s.callback=e??null,Rl(t,s,i),n.current.lanes=i,rv(n,i,r),Cr(n,r),n}function mS(n,e,t,r){var i=e.current,s=sr(),o=Ml(i);return t=AD(t),e.context===null?e.context=t:e.pendingContext=t,e=Qo(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Rl(i,e,o),n!==null&&(cs(n,i,o,s),Ex(n,i,o)),o}function $b(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function VN(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function jT(n,e){VN(n,e),(n=n.alternate)&&VN(n,e)}function SU(){return null}var ED=typeof reportError=="function"?reportError:function(n){console.error(n)};function MT(n){this._internalRoot=n}gS.prototype.render=MT.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Q(409));mS(n,e,null,null)};gS.prototype.unmount=MT.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;td(function(){mS(null,n,null,null)}),e[ta]=null}};function gS(n){this._internalRoot=n}gS.prototype.unstable_scheduleHydration=function(n){if(n){var e=nI();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Aa.length&&e!==0&&e<Aa[t].priority;t++);Aa.splice(t,0,n),t===0&&iI(n)}};function LT(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function yS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function HN(){}function AU(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=$b(o);s.call(c)}}var o=_D(e,r,n,0,null,!1,!1,"",HN);return n._reactRootContainer=o,n[ta]=o.current,ig(n.nodeType===8?n.parentNode:n),td(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=$b(l);a.call(c)}}var l=RT(n,0,!1,null,null,!1,!1,"",HN);return n._reactRootContainer=l,n[ta]=l.current,ig(n.nodeType===8?n.parentNode:n),td(function(){mS(e,l,t,r)}),l}function vS(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$b(o);a.call(l)}}mS(e,o,n,i)}else o=AU(t,e,n,i,r);return $b(o)}eI=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=im(e.pendingLanes);t!==0&&(ZC(e,t|1),Cr(e,Wt()),!(Ge&6)&&(fp=Wt()+500,ql()))}break;case 13:td(function(){var r=na(n,1);if(r!==null){var i=sr();cs(r,n,1,i)}}),jT(n,1)}};eT=function(n){if(n.tag===13){var e=na(n,134217728);if(e!==null){var t=sr();cs(e,n,134217728,t)}jT(n,134217728)}};tI=function(n){if(n.tag===13){var e=Ml(n),t=na(n,e);if(t!==null){var r=sr();cs(t,n,e,r)}jT(n,e)}};nI=function(){return Ze};rI=function(n,e){var t=Ze;try{return Ze=n,e()}finally{Ze=t}};W_=function(n,e,t){switch(e){case"input":if(z_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=lS(r);if(!i)throw Error(Q(90));LL(r),z_(r,i)}}}break;case"textarea":DL(n,t);break;case"select":e=t.value,e!=null&&Yd(n,!!t.multiple,e,!1)}};VL=CT;HL=td;var _U={usingClientEntryPoint:!1,Events:[sv,Ld,lS,$L,UL,CT]},zp={findFiberByHostInstance:gc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EU={bundleType:zp.bundleType,version:zp.version,rendererPackageName:zp.rendererPackageName,rendererConfig:zp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ca.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WL(n),n===null?null:n.stateNode},findFiberByHostInstance:zp.findFiberByHostInstance||SU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qv.isDisabled&&qv.supportsFiber)try{iS=qv.inject(EU),Ks=qv}catch{}}oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_U;oi.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!LT(e))throw Error(Q(200));return wU(n,e,null,t)};oi.createRoot=function(n,e){if(!LT(n))throw Error(Q(299));var t=!1,r="",i=ED;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=RT(n,1,!1,null,null,t,!1,r,i),n[ta]=e.current,ig(n.nodeType===8?n.parentNode:n),new MT(e)};oi.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Q(188)):(n=Object.keys(n).join(","),Error(Q(268,n)));return n=WL(e),n=n===null?null:n.stateNode,n};oi.flushSync=function(n){return td(n)};oi.hydrate=function(n,e,t){if(!yS(e))throw Error(Q(200));return vS(null,n,e,!0,t)};oi.hydrateRoot=function(n,e,t){if(!LT(n))throw Error(Q(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=ED;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=_D(e,null,n,1,t??null,i,!1,s,o),n[ta]=e.current,ig(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new gS(e)};oi.render=function(n,e,t){if(!yS(e))throw Error(Q(200));return vS(null,n,e,!1,t)};oi.unmountComponentAtNode=function(n){if(!yS(n))throw Error(Q(40));return n._reactRootContainer?(td(function(){vS(null,null,n,!1,function(){n._reactRootContainer=null,n[ta]=null})}),!0):!1};oi.unstable_batchedUpdates=CT;oi.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!yS(t))throw Error(Q(200));if(n==null||n._reactInternals===void 0)throw Error(Q(38));return vS(n,e,t,!1,r)};oi.version="18.3.1-next-f1338f8080-20240426";function kD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kD)}catch(n){console.error(n)}}kD(),kL.exports=oi;var av=kL.exports;const kU=la(av);var qN=av;M_.createRoot=qN.createRoot,M_.hydrateRoot=qN.hydrateRoot;function ir(n,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(n==null||n(i),t===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function GN(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function CD(...n){return e=>{let t=!1;const r=n.map(i=>{const s=GN(i,e);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():GN(n[i],null)}}}}function ia(...n){return _.useCallback(CD(...n),n)}function xS(n,e=[]){let t=[];function r(s,o){const a=_.createContext(o),l=t.length;t=[...t,o];const c=h=>{var v;const{scope:f,children:m,...y}=h,g=((v=f==null?void 0:f[n])==null?void 0:v[l])||a,b=_.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:b,children:m})};c.displayName=s+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[n])==null?void 0:g[l])||a,y=_.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${s}\``)}return[c,d]}const i=()=>{const s=t.map(o=>_.createContext(o));return function(a){const l=(a==null?void 0:a[n])||s;return _.useMemo(()=>({[`__scope${n}`]:{...a,[n]:l}}),[a,l])}};return i.scopeName=n,[r,CU(i,...e)]}function CU(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const o=r.reduce((a,{useScope:l,scopeName:c})=>{const h=l(s)[`__scope${c}`];return{...a,...h}},{});return _.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Ub(n){const e=PU(n),t=_.forwardRef((r,i)=>{const{children:s,...o}=r,a=_.Children.toArray(s),l=a.find(RU);if(l){const c=l.props.children,d=a.map(h=>h===l?_.Children.count(c)>1?_.Children.only(null):_.isValidElement(c)?c.props.children:null:h);return p.jsx(e,{...o,ref:i,children:_.isValidElement(c)?_.cloneElement(c,void 0,d):null})}return p.jsx(e,{...o,ref:i,children:s})});return t.displayName=`${n}.Slot`,t}var TU=Ub("Slot");function PU(n){const e=_.forwardRef((t,r)=>{const{children:i,...s}=t;if(_.isValidElement(i)){const o=MU(i),a=jU(s,i.props);return i.type!==_.Fragment&&(a.ref=r?CD(r,o):o),_.cloneElement(i,a)}return _.Children.count(i)>1?_.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var NU=Symbol("radix.slottable");function RU(n){return _.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===NU}function jU(n,e){const t={...e};for(const r in e){const i=n[r],s=e[r];/^on[A-Z]/.test(r)?i&&s?t[r]=(...a)=>{const l=s(...a);return i(...a),l}:i&&(t[r]=i):r==="style"?t[r]={...i,...s}:r==="className"&&(t[r]=[i,s].filter(Boolean).join(" "))}return{...n,...t}}function MU(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function TD(n){const e=n+"CollectionProvider",[t,r]=xS(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:b,children:v}=g,x=Pe.useRef(null),w=Pe.useRef(new Map).current;return p.jsx(i,{scope:b,itemMap:w,collectionRef:x,children:v})};o.displayName=e;const a=n+"CollectionSlot",l=Ub(a),c=Pe.forwardRef((g,b)=>{const{scope:v,children:x}=g,w=s(a,v),E=ia(b,w.collectionRef);return p.jsx(l,{ref:E,children:x})});c.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Ub(d),m=Pe.forwardRef((g,b)=>{const{scope:v,children:x,...w}=g,E=Pe.useRef(null),T=ia(b,E),k=s(d,v);return Pe.useEffect(()=>(k.itemMap.set(E,{ref:E,...w}),()=>void k.itemMap.delete(E))),p.jsx(f,{[h]:"",ref:T,children:x})});m.displayName=d;function y(g){const b=s(n+"CollectionConsumer",g);return Pe.useCallback(()=>{const x=b.collectionRef.current;if(!x)return[];const w=Array.from(x.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((k,P)=>w.indexOf(k.ref.current)-w.indexOf(P.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:c,ItemSlot:m},y,r]}var LU=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],lr=LU.reduce((n,e)=>{const t=Ub(`Primitive.${e}`),r=_.forwardRef((i,s)=>{const{asChild:o,...a}=i,l=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...a,ref:s})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function PD(n,e){n&&av.flushSync(()=>n.dispatchEvent(e))}function nd(n){const e=_.useRef(n);return _.useEffect(()=>{e.current=n}),_.useMemo(()=>(...t)=>{var r;return(r=e.current)==null?void 0:r.call(e,...t)},[])}function IU(n,e=globalThis==null?void 0:globalThis.document){const t=nd(n);_.useEffect(()=>{const r=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var DU="DismissableLayer",kE="dismissableLayer.update",OU="dismissableLayer.pointerDownOutside",FU="dismissableLayer.focusOutside",WN,ND=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),RD=_.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:s,onInteractOutside:o,onDismiss:a,...l}=n,c=_.useContext(ND),[d,h]=_.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=_.useState({}),y=ia(e,P=>h(P)),g=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(b),x=d?g.indexOf(d):-1,w=c.layersWithOutsidePointerEventsDisabled.size>0,E=x>=v,T=zU(P=>{const R=P.target,L=[...c.branches].some(O=>O.contains(R));!E||L||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),k=$U(P=>{const R=P.target;[...c.branches].some(O=>O.contains(R))||(s==null||s(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return IU(P=>{x===c.layers.size-1&&(r==null||r(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),_.useEffect(()=>{if(d)return t&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(WN=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(d)),c.layers.add(d),KN(),()=>{t&&c.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=WN)}},[d,f,t,c]),_.useEffect(()=>()=>{d&&(c.layers.delete(d),c.layersWithOutsidePointerEventsDisabled.delete(d),KN())},[d,c]),_.useEffect(()=>{const P=()=>m({});return document.addEventListener(kE,P),()=>document.removeEventListener(kE,P)},[]),p.jsx(lr.div,{...l,ref:y,style:{pointerEvents:w?E?"auto":"none":void 0,...n.style},onFocusCapture:ir(n.onFocusCapture,k.onFocusCapture),onBlurCapture:ir(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ir(n.onPointerDownCapture,T.onPointerDownCapture)})});RD.displayName=DU;var BU="DismissableLayerBranch",jD=_.forwardRef((n,e)=>{const t=_.useContext(ND),r=_.useRef(null),i=ia(e,r);return _.useEffect(()=>{const s=r.current;if(s)return t.branches.add(s),()=>{t.branches.delete(s)}},[t.branches]),p.jsx(lr.div,{...n,ref:i})});jD.displayName=BU;function zU(n,e=globalThis==null?void 0:globalThis.document){const t=nd(n),r=_.useRef(!1),i=_.useRef(()=>{});return _.useEffect(()=>{const s=a=>{if(a.target&&!r.current){let l=function(){MD(OU,t,c,{discrete:!0})};const c={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function $U(n,e=globalThis==null?void 0:globalThis.document){const t=nd(n),r=_.useRef(!1);return _.useEffect(()=>{const i=s=>{s.target&&!r.current&&MD(FU,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function KN(){const n=new CustomEvent(kE);document.dispatchEvent(n)}function MD(n,e,t,{discrete:r}){const i=t.originalEvent.target,s=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?PD(i,s):i.dispatchEvent(s)}var UU=RD,VU=jD,rd=globalThis!=null&&globalThis.document?_.useLayoutEffect:()=>{},HU="Portal",LD=_.forwardRef((n,e)=>{var a;const{container:t,...r}=n,[i,s]=_.useState(!1);rd(()=>s(!0),[]);const o=t||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?kU.createPortal(p.jsx(lr.div,{...r,ref:e}),o):null});LD.displayName=HU;function qU(n,e){return _.useReducer((t,r)=>e[t][r]??t,n)}var IT=n=>{const{present:e,children:t}=n,r=GU(e),i=typeof t=="function"?t({present:r.isPresent}):_.Children.only(t),s=ia(r.ref,WU(i));return typeof t=="function"||r.isPresent?_.cloneElement(i,{ref:s}):null};IT.displayName="Presence";function GU(n){const[e,t]=_.useState(),r=_.useRef(null),i=_.useRef(n),s=_.useRef("none"),o=n?"mounted":"unmounted",[a,l]=qU(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const c=Gv(r.current);s.current=a==="mounted"?c:"none"},[a]),rd(()=>{const c=r.current,d=i.current;if(d!==n){const f=s.current,m=Gv(c);n?l("MOUNT"):m==="none"||(c==null?void 0:c.display)==="none"?l("UNMOUNT"):l(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=n}},[n,l]),rd(()=>{if(e){let c;const d=e.ownerDocument.defaultView??window,h=m=>{const g=Gv(r.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(l("ANIMATION_END"),!i.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",c=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},f=m=>{m.target===e&&(s.current=Gv(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(c),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:_.useCallback(c=>{r.current=c?getComputedStyle(c):null,t(c)},[])}}function Gv(n){return(n==null?void 0:n.animationName)||"none"}function WU(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var KU=_L[" useInsertionEffect ".trim().toString()]||rd;function bS({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[i,s,o]=XU({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:i;{const d=_.useRef(n!==void 0);_.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,r])}const c=_.useCallback(d=>{var h;if(a){const f=YU(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else s(d)},[a,n,s,o]);return[l,c]}function XU({defaultProp:n,onChange:e}){const[t,r]=_.useState(n),i=_.useRef(t),s=_.useRef(e);return KU(()=>{s.current=e},[e]),_.useEffect(()=>{var o;i.current!==t&&((o=s.current)==null||o.call(s,t),i.current=t)},[t,i]),[t,r,s]}function YU(n){return typeof n=="function"}var QU=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),JU="VisuallyHidden",DT=_.forwardRef((n,e)=>p.jsx(lr.span,{...n,ref:e,style:{...QU,...n.style}}));DT.displayName=JU;var OT="ToastProvider",[FT,ZU,eV]=TD("Toast"),[ID,Cte]=xS("Toast",[eV]),[tV,wS]=ID(OT),DD=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:s=50,children:o}=n,[a,l]=_.useState(null),[c,d]=_.useState(0),h=_.useRef(!1),f=_.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${OT}\`. Expected non-empty \`string\`.`),p.jsx(FT.Provider,{scope:e,children:p.jsx(tV,{scope:e,label:t,duration:r,swipeDirection:i,swipeThreshold:s,toastCount:c,viewport:a,onViewportChange:l,onToastAdd:_.useCallback(()=>d(m=>m+1),[]),onToastRemove:_.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};DD.displayName=OT;var OD="ToastViewport",nV=["F8"],CE="toast.viewportPause",TE="toast.viewportResume",FD=_.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=nV,label:i="Notifications ({hotkey})",...s}=n,o=wS(OD,t),a=ZU(t),l=_.useRef(null),c=_.useRef(null),d=_.useRef(null),h=_.useRef(null),f=ia(e,h,o.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;_.useEffect(()=>{const b=v=>{var w;r.length!==0&&r.every(E=>v[E]||v.code===E)&&((w=h.current)==null||w.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),_.useEffect(()=>{const b=l.current,v=h.current;if(y&&b&&v){const x=()=>{if(!o.isClosePausedRef.current){const k=new CustomEvent(CE);v.dispatchEvent(k),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const k=new CustomEvent(TE);v.dispatchEvent(k),o.isClosePausedRef.current=!1}},E=k=>{!b.contains(k.relatedTarget)&&w()},T=()=>{b.contains(document.activeElement)||w()};return b.addEventListener("focusin",x),b.addEventListener("focusout",E),b.addEventListener("pointermove",x),b.addEventListener("pointerleave",T),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{b.removeEventListener("focusin",x),b.removeEventListener("focusout",E),b.removeEventListener("pointermove",x),b.removeEventListener("pointerleave",T),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[y,o.isClosePausedRef]);const g=_.useCallback(({tabbingDirection:b})=>{const x=a().map(w=>{const E=w.ref.current,T=[E,...mV(E)];return b==="forwards"?T:T.reverse()});return(b==="forwards"?x.reverse():x).flat()},[a]);return _.useEffect(()=>{const b=h.current;if(b){const v=x=>{var T,k,P;const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const R=document.activeElement,L=x.shiftKey;if(x.target===b&&L){(T=c.current)==null||T.focus();return}const I=g({tabbingDirection:L?"backwards":"forwards"}),U=I.findIndex(B=>B===R);IA(I.slice(U+1))?x.preventDefault():L?(k=c.current)==null||k.focus():(P=d.current)==null||P.focus()}};return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)}},[a,g]),p.jsxs(VU,{ref:l,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&p.jsx(PE,{ref:c,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"forwards"});IA(b)}}),p.jsx(FT.Slot,{scope:t,children:p.jsx(lr.ol,{tabIndex:-1,...s,ref:f})}),y&&p.jsx(PE,{ref:d,onFocusFromOutsideViewport:()=>{const b=g({tabbingDirection:"backwards"});IA(b)}})]})});FD.displayName=OD;var BD="ToastFocusProxy",PE=_.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...i}=n,s=wS(BD,t);return p.jsx(DT,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:o=>{var c;const a=o.relatedTarget;!((c=s.viewport)!=null&&c.contains(a))&&r()}})});PE.displayName=BD;var lv="Toast",rV="toast.swipeStart",iV="toast.swipeMove",sV="toast.swipeCancel",oV="toast.swipeEnd",zD=_.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:i,onOpenChange:s,...o}=n,[a,l]=bS({prop:r,defaultProp:i??!0,onChange:s,caller:lv});return p.jsx(IT,{present:t||a,children:p.jsx(cV,{open:a,...o,ref:e,onClose:()=>l(!1),onPause:nd(n.onPause),onResume:nd(n.onResume),onSwipeStart:ir(n.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ir(n.onSwipeMove,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:ir(n.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ir(n.onSwipeEnd,c=>{const{x:d,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),l(!1)})})})});zD.displayName=lv;var[aV,lV]=ID(lv,{onClose(){}}),cV=_.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:i,open:s,onClose:o,onEscapeKeyDown:a,onPause:l,onResume:c,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...y}=n,g=wS(lv,t),[b,v]=_.useState(null),x=ia(e,B=>v(B)),w=_.useRef(null),E=_.useRef(null),T=i||g.duration,k=_.useRef(0),P=_.useRef(T),R=_.useRef(0),{onToastAdd:L,onToastRemove:O}=g,F=nd(()=>{var M;(b==null?void 0:b.contains(document.activeElement))&&((M=g.viewport)==null||M.focus()),o()}),I=_.useCallback(B=>{!B||B===1/0||(window.clearTimeout(R.current),k.current=new Date().getTime(),R.current=window.setTimeout(F,B))},[F]);_.useEffect(()=>{const B=g.viewport;if(B){const M=()=>{I(P.current),c==null||c()},D=()=>{const z=new Date().getTime()-k.current;P.current=P.current-z,window.clearTimeout(R.current),l==null||l()};return B.addEventListener(CE,D),B.addEventListener(TE,M),()=>{B.removeEventListener(CE,D),B.removeEventListener(TE,M)}}},[g.viewport,T,l,c,I]),_.useEffect(()=>{s&&!g.isClosePausedRef.current&&I(T)},[s,T,g.isClosePausedRef,I]),_.useEffect(()=>(L(),()=>O()),[L,O]);const U=_.useMemo(()=>b?WD(b):null,[b]);return g.viewport?p.jsxs(p.Fragment,{children:[U&&p.jsx(uV,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:U}),p.jsx(aV,{scope:t,onClose:F,children:av.createPortal(p.jsx(FT.ItemSlot,{scope:t,children:p.jsx(UU,{asChild:!0,onEscapeKeyDown:ir(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(lr.li,{tabIndex:0,"data-state":s?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:x,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:ir(n.onKeyDown,B=>{B.key==="Escape"&&(a==null||a(B.nativeEvent),B.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:ir(n.onPointerDown,B=>{B.button===0&&(w.current={x:B.clientX,y:B.clientY})}),onPointerMove:ir(n.onPointerMove,B=>{if(!w.current)return;const M=B.clientX-w.current.x,D=B.clientY-w.current.y,z=!!E.current,$=["left","right"].includes(g.swipeDirection),V=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,N=$?V(0,M):0,W=$?0:V(0,D),G=B.pointerType==="touch"?10:2,j={x:N,y:W},ee={originalEvent:B,delta:j};z?(E.current=j,Wv(iV,h,ee,{discrete:!1})):XN(j,g.swipeDirection,G)?(E.current=j,Wv(rV,d,ee,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(M)>G||Math.abs(D)>G)&&(w.current=null)}),onPointerUp:ir(n.onPointerUp,B=>{const M=E.current,D=B.target;if(D.hasPointerCapture(B.pointerId)&&D.releasePointerCapture(B.pointerId),E.current=null,w.current=null,M){const z=B.currentTarget,$={originalEvent:B,delta:M};XN(M,g.swipeDirection,g.swipeThreshold)?Wv(oV,m,$,{discrete:!0}):Wv(sV,f,$,{discrete:!0}),z.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),uV=n=>{const{__scopeToast:e,children:t,...r}=n,i=wS(lv,e),[s,o]=_.useState(!1),[a,l]=_.useState(!1);return fV(()=>o(!0)),_.useEffect(()=>{const c=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(c)},[]),a?null:p.jsx(LD,{asChild:!0,children:p.jsx(DT,{...r,children:s&&p.jsxs(p.Fragment,{children:[i.label," ",t]})})})},dV="ToastTitle",$D=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(lr.div,{...r,ref:e})});$D.displayName=dV;var hV="ToastDescription",UD=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return p.jsx(lr.div,{...r,ref:e})});UD.displayName=hV;var VD="ToastAction",HD=_.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?p.jsx(GD,{altText:t,asChild:!0,children:p.jsx(BT,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${VD}\`. Expected non-empty \`string\`.`),null)});HD.displayName=VD;var qD="ToastClose",BT=_.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,i=lV(qD,t);return p.jsx(GD,{asChild:!0,children:p.jsx(lr.button,{type:"button",...r,ref:e,onClick:ir(n.onClick,i.onClose)})})});BT.displayName=qD;var GD=_.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...i}=n;return p.jsx(lr.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:e})});function WD(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),pV(r)){const i=r.ariaHidden||r.hidden||r.style.display==="none",s=r.dataset.radixToastAnnounceExclude==="";if(!i)if(s){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...WD(r))}}),e}function Wv(n,e,t,{discrete:r}){const i=t.originalEvent.currentTarget,s=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&i.addEventListener(n,e,{once:!0}),r?PD(i,s):i.dispatchEvent(s)}var XN=(n,e,t=0)=>{const r=Math.abs(n.x),i=Math.abs(n.y),s=r>i;return e==="left"||e==="right"?s&&r>t:!s&&i>t};function fV(n=()=>{}){const e=nd(n);rd(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function pV(n){return n.nodeType===n.ELEMENT_NODE}function mV(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function IA(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var gV=DD,KD=FD,XD=zD,YD=$D,QD=UD,JD=HD,ZD=BT;function eO(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=eO(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function Ap(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=eO(n))&&(r&&(r+=" "),r+=e);return r}const YN=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,QN=Ap,tO=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return QN(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:s}=e,o=Object.keys(i).map(c=>{const d=t==null?void 0:t[c],h=s==null?void 0:s[c];if(d===null)return null;const f=YN(d)||YN(h);return i[c][f]}),a=t&&Object.entries(t).reduce((c,d)=>{let[h,f]=d;return f===void 0||(c[h]=f),c},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((c,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(y=>{let[g,b]=y;return Array.isArray(b)?b.includes({...s,...a}[g]):{...s,...a}[g]===b})?[...c,h,f]:c},[]);return QN(n,o,l,t==null?void 0:t.class,t==null?void 0:t.className)};var yV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const vV=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Le=(n,e)=>{const t=_.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:a,...l},c)=>_.createElement("svg",{ref:c,...yV,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:`lucide lucide-${vV(n)}`,...l},[...e.map(([d,h])=>_.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},xV=Le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),bV=Le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),zT=Le("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),wV=Le("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),$T=Le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),SV=Le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),AV=Le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),_V=Le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),nO=Le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),rO=Le("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),EV=Le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),iO=Le("Drama",[["path",{d:"M 10 11h.01",key:"1lksi6"}],["path",{d:"M 14 6h.01",key:"1kxpxo"}],["path",{d:"M 18 6h.01",key:"1goweo"}],["path",{d:"M 6.5 13.1h.01",key:"1i19cj"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]]),kV=Le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),sO=Le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),SS=Le("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),oO=Le("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),CV=Le("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]),aO=Le("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),lO=Le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),UT=Le("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),TV=Le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),PV=Le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),cO=Le("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),uO=Le("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),dO=Le("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),NV=Le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),RV=Le("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),jV=Le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),MV=Le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),hO=Le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),LV=Le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),VT=Le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),IV=Le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),DV=Le("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]),fO=Le("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),pO=Le("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),HT=Le("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),AS=Le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function OV(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=mO(e))&&(r&&(r+=" "),r+=t);return r}function mO(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=mO(n[r]))&&(t&&(t+=" "),t+=e);return t}var qT="-";function FV(n){var e=zV(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,i=r===void 0?{}:r;function s(a){var l=a.split(qT);return l[0]===""&&l.length!==1&&l.shift(),gO(l,e)||BV(a)}function o(a,l){var c=t[a]||[];return l&&i[a]?[].concat(c,i[a]):c}return{getClassGroupId:s,getConflictingClassGroupIds:o}}function gO(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),i=r?gO(n.slice(1),r):void 0;if(i)return i;if(e.validators.length!==0){var s=n.join(qT);return(o=e.validators.find(function(a){var l=a.validator;return l(s)}))==null?void 0:o.classGroupId}}var JN=/^\[(.+)\]$/;function BV(n){if(JN.test(n)){var e=JN.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function zV(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},i=UV(Object.entries(n.classGroups),t);return i.forEach(function(s){var o=s[0],a=s[1];NE(a,r,o,e)}),r}function NE(n,e,t,r){n.forEach(function(i){if(typeof i=="string"){var s=i===""?e:ZN(e,i);s.classGroupId=t;return}if(typeof i=="function"){if($V(i)){NE(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(function(o){var a=o[0],l=o[1];NE(l,ZN(e,a),t,r)})})}function ZN(n,e){var t=n;return e.split(qT).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function $V(n){return n.isThemeGetter}function UV(n,e){return e?n.map(function(t){var r=t[0],i=t[1],s=i.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var l=a[0],c=a[1];return[e+l,c]})):o});return[r,s]}):n}function VV(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function i(s,o){t.set(s,o),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return i(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):i(o,a)}}}var yO="!";function HV(n){var e=n.separator||":",t=e.length===1,r=e[0],i=e.length;return function(o){for(var a=[],l=0,c=0,d,h=0;h<o.length;h++){var f=o[h];if(l===0){if(f===r&&(t||o.slice(h,h+i)===e)){a.push(o.slice(c,h)),c=h+i;continue}if(f==="/"){d=h;continue}}f==="["?l++:f==="]"&&l--}var m=a.length===0?o:o.substring(c),y=m.startsWith(yO),g=y?m.substring(1):m,b=d&&d>c?d-c:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:b}}}function qV(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var i=r[0]==="[";i?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function GV(n){return{cache:VV(n.cacheSize),splitModifiers:HV(n),...FV(n)}}var WV=/\s+/;function KV(n,e){var t=e.splitModifiers,r=e.getClassGroupId,i=e.getConflictingClassGroupIds,s=new Set;return n.trim().split(WV).map(function(o){var a=t(o),l=a.modifiers,c=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,f=r(h?d.substring(0,h):d),m=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=r(d),!f)return{isTailwindClass:!1,originalClassName:o};m=!1}var y=qV(l).join(":"),g=c?y+yO:y;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,l=o.classGroupId,c=o.hasPostfixModifier,d=a+l;return s.has(d)?!1:(s.add(d),i(l,c).forEach(function(h){return s.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function XV(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,i,s,o=a;function a(c){var d=e[0],h=e.slice(1),f=h.reduce(function(m,y){return y(m)},d());return r=GV(f),i=r.cache.get,s=r.cache.set,o=l,l(c)}function l(c){var d=i(c);if(d)return d;var h=KV(c,r);return s(c,h),h}return function(){return o(OV.apply(null,arguments))}}function xt(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var vO=/^\[(?:([a-z-]+):)?(.+)\]$/i,YV=/^\d+\/\d+$/,QV=new Set(["px","full","screen"]),JV=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,ZV=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,e6=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function $i(n){return xc(n)||QV.has(n)||YV.test(n)||RE(n)}function RE(n){return ld(n,"length",o6)}function t6(n){return ld(n,"size",xO)}function n6(n){return ld(n,"position",xO)}function r6(n){return ld(n,"url",a6)}function Kv(n){return ld(n,"number",xc)}function xc(n){return!Number.isNaN(Number(n))}function i6(n){return n.endsWith("%")&&xc(n.slice(0,-1))}function $p(n){return eR(n)||ld(n,"number",eR)}function De(n){return vO.test(n)}function Up(){return!0}function ma(n){return JV.test(n)}function s6(n){return ld(n,"",l6)}function ld(n,e,t){var r=vO.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function o6(n){return ZV.test(n)}function xO(){return!1}function a6(n){return n.startsWith("url(")}function eR(n){return Number.isInteger(Number(n))}function l6(n){return e6.test(n)}function c6(){var n=xt("colors"),e=xt("spacing"),t=xt("blur"),r=xt("brightness"),i=xt("borderColor"),s=xt("borderRadius"),o=xt("borderSpacing"),a=xt("borderWidth"),l=xt("contrast"),c=xt("grayscale"),d=xt("hueRotate"),h=xt("invert"),f=xt("gap"),m=xt("gradientColorStops"),y=xt("gradientColorStopPositions"),g=xt("inset"),b=xt("margin"),v=xt("opacity"),x=xt("padding"),w=xt("saturate"),E=xt("scale"),T=xt("sepia"),k=xt("skew"),P=xt("space"),R=xt("translate"),L=function(){return["auto","contain","none"]},O=function(){return["auto","hidden","clip","visible","scroll"]},F=function(){return["auto",De,e]},I=function(){return[De,e]},U=function(){return["",$i]},B=function(){return["auto",xc,De]},M=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},D=function(){return["solid","dashed","dotted","double","none"]},z=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},$=function(){return["start","end","center","between","around","evenly","stretch"]},V=function(){return["","0",De]},N=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},W=function(){return[xc,Kv]},G=function(){return[xc,De]};return{cacheSize:500,theme:{colors:[Up],spacing:[$i],blur:["none","",ma,De],brightness:W(),borderColor:[n],borderRadius:["none","","full",ma,De],borderSpacing:I(),borderWidth:U(),contrast:W(),grayscale:V(),hueRotate:G(),invert:V(),gap:I(),gradientColorStops:[n],gradientColorStopPositions:[i6,RE],inset:F(),margin:F(),opacity:W(),padding:I(),saturate:W(),scale:W(),sepia:V(),skew:G(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[ma]}],"break-after":[{"break-after":N()}],"break-before":[{"break-before":N()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(M(),[De])}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$p]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",$p]}],"grid-cols":[{"grid-cols":[Up]}],"col-start-end":[{col:["auto",{span:["full",$p]},De]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Up]}],"row-start-end":[{row:["auto",{span:[$p]},De]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat($())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat($(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat($(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",De,e]}],"min-w":[{"min-w":["min","max","fit",De,$i]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[ma]},ma,De]}],h:[{h:[De,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",De,$i]}],"max-h":[{"max-h":[De,e,"min","max","fit"]}],"font-size":[{text:["base",ma,RE]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Kv]}],"font-family":[{font:[Up]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",xc,Kv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",De,$i]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(D(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",$i]}],"underline-offset":[{"underline-offset":["auto",De,$i]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(M(),[n6])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",t6]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},r6]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(D(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:D()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:[""].concat(D())}],"outline-offset":[{"outline-offset":[De,$i]}],"outline-w":[{outline:[$i]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[$i]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",ma,s6]}],"shadow-color":[{shadow:[Up]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":z()}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",ma,De]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[w]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:G()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:G()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[$p,De]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[$i,Kv]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var u6=XV(c6);function hs(...n){return u6(Ap(n))}const d6=gV,bO=Pe.forwardRef(({className:n,...e},t)=>p.jsx(KD,{ref:t,className:hs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));bO.displayName=KD.displayName;const h6=tO("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),wO=Pe.forwardRef(({className:n,variant:e,...t},r)=>p.jsx(XD,{ref:r,className:hs(h6({variant:e}),n),...t}));wO.displayName=XD.displayName;const f6=Pe.forwardRef(({className:n,...e},t)=>p.jsx(JD,{ref:t,className:hs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));f6.displayName=JD.displayName;const SO=Pe.forwardRef(({className:n,...e},t)=>p.jsx(ZD,{ref:t,className:hs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:p.jsx(AS,{className:"h-4 w-4"})}));SO.displayName=ZD.displayName;const AO=Pe.forwardRef(({className:n,...e},t)=>p.jsx(YD,{ref:t,className:hs("text-sm font-semibold",n),...e}));AO.displayName=YD.displayName;const _O=Pe.forwardRef(({className:n,...e},t)=>p.jsx(QD,{ref:t,className:hs("text-sm opacity-90",n),...e}));_O.displayName=QD.displayName;const p6=1,m6=6e3,Xo={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let DA=0;function g6(){return DA=(DA+1)%Number.MAX_SAFE_INTEGER,DA.toString()}const OA=new Map,tR=n=>{if(OA.has(n))return;const e=setTimeout(()=>{OA.delete(n),Fm({type:Xo.REMOVE_TOAST,toastId:n})},m6);OA.set(n,e)},y6=(n,e)=>{switch(e.type){case Xo.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,p6)};case Xo.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case Xo.DISMISS_TOAST:{const{toastId:t}=e;return t?tR(t):n.toasts.forEach(r=>{tR(r.id)}),{...n,toasts:n.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case Xo.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},jx=[];let Mx={toasts:[]};function Fm(n){Mx=y6(Mx,n),jx.forEach(e=>{e(Mx)})}function Me({...n}){const e=g6(),t=i=>Fm({type:Xo.UPDATE_TOAST,toast:{...i,id:e}}),r=()=>Fm({type:Xo.DISMISS_TOAST,toastId:e});return Fm({type:Xo.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:t}}function GT(){const[n,e]=Pe.useState(Mx);return Pe.useEffect(()=>(jx.push(e),()=>{const t=jx.indexOf(e);t>-1&&jx.splice(t,1)}),[n]),{...n,toast:Me,dismiss:t=>Fm({type:Xo.DISMISS_TOAST,toastId:t})}}function v6(){const{toasts:n}=GT();return p.jsxs(d6,{children:[n.map(({id:e,title:t,description:r,action:i,...s})=>p.jsxs(wO,{...s,children:[p.jsxs("div",{className:"grid gap-1",children:[t&&p.jsx(AO,{children:t}),r&&p.jsx(_O,{children:r})]}),i,p.jsx(SO,{})]},e)),p.jsx(bO,{})]})}const EO=_.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),_S=_.createContext({}),ES=_.createContext(null),kS=typeof document<"u",WT=kS?_.useLayoutEffect:_.useEffect,kO=_.createContext({strict:!1}),KT=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),x6="framerAppearId",CO="data-"+KT(x6);function b6(n,e,t,r){const{visualElement:i}=_.useContext(_S),s=_.useContext(kO),o=_.useContext(ES),a=_.useContext(EO).reducedMotion,l=_.useRef();r=r||s.renderer,!l.current&&r&&(l.current=r(n,{visualState:e,parent:i,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=l.current;_.useInsertionEffect(()=>{c&&c.update(t,o)});const d=_.useRef(!!(t[CO]&&!window.HandoffComplete));return WT(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),_.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function $d(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function w6(n,e,t){return _.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):$d(t)&&(t.current=r))},[e])}function fg(n){return typeof n=="string"||Array.isArray(n)}function CS(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const XT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],YT=["initial",...XT];function TS(n){return CS(n.animate)||YT.some(e=>fg(n[e]))}function TO(n){return!!(TS(n)||n.variants)}function S6(n,e){if(TS(n)){const{initial:t,animate:r}=n;return{initial:t===!1||fg(t)?t:void 0,animate:fg(r)?r:void 0}}return n.inherit!==!1?e:{}}function A6(n){const{initial:e,animate:t}=S6(n,_.useContext(_S));return _.useMemo(()=>({initial:e,animate:t}),[nR(e),nR(t)])}function nR(n){return Array.isArray(n)?n.join(" "):n}const rR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pg={};for(const n in rR)pg[n]={isEnabled:e=>rR[n].some(t=>!!e[t])};function _6(n){for(const e in n)pg[e]={...pg[e],...n[e]}}const QT=_.createContext({}),PO=_.createContext({}),E6=Symbol.for("motionComponentSymbol");function k6({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:i}){n&&_6(n);function s(a,l){let c;const d={..._.useContext(EO),...a,layoutId:C6(a)},{isStatic:h}=d,f=A6(a),m=r(a,h);if(!h&&kS){f.visualElement=b6(i,m,d,e);const y=_.useContext(PO),g=_.useContext(kO).strict;f.visualElement&&(c=f.visualElement.loadFeatures(d,g,n,y))}return _.createElement(_S.Provider,{value:f},c&&f.visualElement?_.createElement(c,{visualElement:f.visualElement,...d}):null,t(i,a,w6(m,f.visualElement,l),m,h,f.visualElement))}const o=_.forwardRef(s);return o[E6]=i,o}function C6({layoutId:n}){const e=_.useContext(QT).id;return e&&n!==void 0?e+"-"+n:n}function T6(n){function e(r,i={}){return k6(n(r,i))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,i)=>(t.has(i)||t.set(i,e(i)),t.get(i))})}const P6=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function JT(n){return typeof n!="string"||n.includes("-")?!1:!!(P6.indexOf(n)>-1||/[A-Z]/.test(n))}const Vb={};function N6(n){Object.assign(Vb,n)}const cv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cd=new Set(cv);function NO(n,{layout:e,layoutId:t}){return cd.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Vb[n]||n==="opacity")}const Pr=n=>!!(n&&n.getVelocity),R6={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},j6=cv.length;function M6(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,i){let s="";for(let o=0;o<j6;o++){const a=cv[o];if(n[a]!==void 0){const l=R6[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(n,r?"":s):t&&r&&(s="none"),s}const RO=n=>e=>typeof e=="string"&&e.startsWith(n),jO=RO("--"),jE=RO("var(--"),L6=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,I6=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Bl=(n,e,t)=>Math.min(Math.max(t,n),e),ud={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Bm={...ud,transform:n=>Bl(0,1,n)},Xv={...ud,default:1},zm=n=>Math.round(n*1e5)/1e5,PS=/(-)?([\d]*\.?[\d])+/g,MO=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,D6=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function uv(n){return typeof n=="string"}const dv=n=>({test:e=>uv(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),va=dv("deg"),Ys=dv("%"),xe=dv("px"),O6=dv("vh"),F6=dv("vw"),iR={...Ys,parse:n=>Ys.parse(n)/100,transform:n=>Ys.transform(n*100)},sR={...ud,transform:Math.round},LO={borderWidth:xe,borderTopWidth:xe,borderRightWidth:xe,borderBottomWidth:xe,borderLeftWidth:xe,borderRadius:xe,radius:xe,borderTopLeftRadius:xe,borderTopRightRadius:xe,borderBottomRightRadius:xe,borderBottomLeftRadius:xe,width:xe,maxWidth:xe,height:xe,maxHeight:xe,size:xe,top:xe,right:xe,bottom:xe,left:xe,padding:xe,paddingTop:xe,paddingRight:xe,paddingBottom:xe,paddingLeft:xe,margin:xe,marginTop:xe,marginRight:xe,marginBottom:xe,marginLeft:xe,rotate:va,rotateX:va,rotateY:va,rotateZ:va,scale:Xv,scaleX:Xv,scaleY:Xv,scaleZ:Xv,skew:va,skewX:va,skewY:va,distance:xe,translateX:xe,translateY:xe,translateZ:xe,x:xe,y:xe,z:xe,perspective:xe,transformPerspective:xe,opacity:Bm,originX:iR,originY:iR,originZ:xe,zIndex:sR,fillOpacity:Bm,strokeOpacity:Bm,numOctaves:sR};function ZT(n,e,t,r){const{style:i,vars:s,transform:o,transformOrigin:a}=n;let l=!1,c=!1,d=!0;for(const h in e){const f=e[h];if(jO(h)){s[h]=f;continue}const m=LO[h],y=I6(f,m);if(cd.has(h)){if(l=!0,o[h]=y,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(c=!0,a[h]=y):i[h]=y}if(e.transform||(l||r?i.transform=M6(n.transform,t,d,r):i.transform&&(i.transform="none")),c){const{originX:h="50%",originY:f="50%",originZ:m=0}=a;i.transformOrigin=`${h} ${f} ${m}`}}const eP=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IO(n,e,t){for(const r in e)!Pr(e[r])&&!NO(r,t)&&(n[r]=e[r])}function B6({transformTemplate:n},e,t){return _.useMemo(()=>{const r=eP();return ZT(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function z6(n,e,t){const r=n.style||{},i={};return IO(i,r,n),Object.assign(i,B6(n,e,t)),n.transformValues?n.transformValues(i):i}function $6(n,e,t){const r={},i=z6(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=i,r}const U6=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hb(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||U6.has(n)}let DO=n=>!Hb(n);function V6(n){n&&(DO=e=>e.startsWith("on")?!Hb(e):n(e))}try{V6(require("@emotion/is-prop-valid").default)}catch{}function H6(n,e,t){const r={};for(const i in n)i==="values"&&typeof n.values=="object"||(DO(i)||t===!0&&Hb(i)||!e&&!Hb(i)||n.draggable&&i.startsWith("onDrag"))&&(r[i]=n[i]);return r}function oR(n,e,t){return typeof n=="string"?n:xe.transform(e+t*n)}function q6(n,e,t){const r=oR(e,n.x,n.width),i=oR(t,n.y,n.height);return`${r} ${i}`}const G6={offset:"stroke-dashoffset",array:"stroke-dasharray"},W6={offset:"strokeDashoffset",array:"strokeDasharray"};function K6(n,e,t=1,r=0,i=!0){n.pathLength=1;const s=i?G6:W6;n[s.offset]=xe.transform(-r);const o=xe.transform(e),a=xe.transform(t);n[s.array]=`${o} ${a}`}function tP(n,{attrX:e,attrY:t,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,h,f){if(ZT(n,c,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:g}=n;m.transform&&(g&&(y.transform=m.transform),delete m.transform),g&&(i!==void 0||s!==void 0||y.transform)&&(y.transformOrigin=q6(g,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),r!==void 0&&(m.scale=r),o!==void 0&&K6(m,o,a,l,!1)}const OO=()=>({...eP(),attrs:{}}),nP=n=>typeof n=="string"&&n.toLowerCase()==="svg";function X6(n,e,t,r){const i=_.useMemo(()=>{const s=OO();return tP(s,e,{enableHardwareAcceleration:!1},nP(r),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};IO(s,n.style,n),i.style={...s,...i.style}}return i}function Y6(n=!1){return(t,r,i,{latestValues:s},o)=>{const l=(JT(t)?X6:$6)(r,s,o,t),d={...H6(r,typeof t=="string",n),...l,ref:i},{children:h}=r,f=_.useMemo(()=>Pr(h)?h.get():h,[h]);return _.createElement(t,{...d,children:f})}}function FO(n,{style:e,vars:t},r,i){Object.assign(n.style,e,i&&i.getProjectionStyles(r));for(const s in t)n.style.setProperty(s,t[s])}const BO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zO(n,e,t,r){FO(n,e,void 0,r);for(const i in e.attrs)n.setAttribute(BO.has(i)?i:KT(i),e.attrs[i])}function rP(n,e){const{style:t}=n,r={};for(const i in t)(Pr(t[i])||e.style&&Pr(e.style[i])||NO(i,n))&&(r[i]=t[i]);return r}function $O(n,e){const t=rP(n,e);for(const r in n)if(Pr(n[r])||Pr(e[r])){const i=cv.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[i]=n[r]}return t}function iP(n,e,t,r={},i={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,i)),e}function UO(n){const e=_.useRef(null);return e.current===null&&(e.current=n()),e.current}const qb=n=>Array.isArray(n),Q6=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),J6=n=>qb(n)?n[n.length-1]||0:n;function Lx(n){const e=Pr(n)?n.get():n;return Q6(e)?e.toValue():e}function Z6({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,i,s){const o={latestValues:e8(r,i,s,n),renderState:e()};return t&&(o.mount=a=>t(r,a,o)),o}const VO=n=>(e,t)=>{const r=_.useContext(_S),i=_.useContext(ES),s=()=>Z6(n,e,r,i);return t?s():UO(s)};function e8(n,e,t,r){const i={},s=r(n,{});for(const f in s)i[f]=Lx(s[f]);let{initial:o,animate:a}=n;const l=TS(n),c=TO(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!CS(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const y=iP(n,m);if(!y)return;const{transitionEnd:g,transition:b,...v}=y;for(const x in v){let w=v[x];if(Array.isArray(w)){const E=d?w.length-1:0;w=w[E]}w!==null&&(i[x]=w)}for(const x in g)i[x]=g[x]}),i}const Vt=n=>n;class aR{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function t8(n){let e=new aR,t=new aR,r=0,i=!1,s=!1;const o=new WeakSet,a={schedule:(l,c=!1,d=!1)=>{const h=d&&i,f=h?e:t;return c&&o.add(l),f.add(l)&&h&&i&&(r=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(i){s=!0;return}if(i=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(l),o.has(d)&&(a.schedule(d),n())}i=!1,s&&(s=!1,a.process(l))}};return a}const Yv=["prepare","read","update","preRender","render","postRender"],n8=40;function r8(n,e){let t=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=Yv.reduce((h,f)=>(h[f]=t8(()=>t=!0),h),{}),o=h=>s[h].process(i),a=()=>{const h=performance.now();t=!1,i.delta=r?1e3/60:Math.max(Math.min(h-i.timestamp,n8),1),i.timestamp=h,i.isProcessing=!0,Yv.forEach(o),i.isProcessing=!1,t&&e&&(r=!1,n(a))},l=()=>{t=!0,r=!0,i.isProcessing||n(a)};return{schedule:Yv.reduce((h,f)=>{const m=s[f];return h[f]=(y,g=!1,b=!1)=>(t||l(),m.schedule(y,g,b)),h},{}),cancel:h=>Yv.forEach(f=>s[f].cancel(h)),state:i,steps:s}}const{schedule:vt,cancel:sa,state:Un,steps:FA}=r8(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vt,!0),i8={useVisualState:VO({scrapeMotionValuesFromProps:$O,createRenderState:OO,onMount:(n,e,{renderState:t,latestValues:r})=>{vt.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),vt.render(()=>{tP(t,r,{enableHardwareAcceleration:!1},nP(e.tagName),n.transformTemplate),zO(e,t)})}})},s8={useVisualState:VO({scrapeMotionValuesFromProps:rP,createRenderState:eP})};function o8(n,{forwardMotionProps:e=!1},t,r){return{...JT(n)?i8:s8,preloadedFeatures:t,useRender:Y6(e),createVisualElement:r,Component:n}}function Yo(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const HO=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function NS(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const a8=n=>e=>HO(e)&&n(e,NS(e));function Jo(n,e,t,r){return Yo(n,e,a8(t),r)}const l8=(n,e)=>t=>e(n(t)),Il=(...n)=>n.reduce(l8);function qO(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const lR=qO("dragHorizontal"),cR=qO("dragVertical");function GO(n){let e=!1;if(n==="y")e=cR();else if(n==="x")e=lR();else{const t=lR(),r=cR();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function WO(){const n=GO(!0);return n?(n(),!1):!0}class Gl{constructor(e){this.isMounted=!1,this.node=e}update(){}}function uR(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(s,o)=>{if(s.pointerType==="touch"||WO())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[r]&&vt.update(()=>a[r](s,o))};return Jo(n.current,t,i,{passive:!n.getProps()[r]})}class c8 extends Gl{mount(){this.unmount=Il(uR(this.node,!0),uR(this.node,!1))}unmount(){}}class u8 extends Gl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Il(Yo(this.node.current,"focus",()=>this.onFocus()),Yo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const KO=(n,e)=>e?n===e?!0:KO(n,e.parentElement):!1;function BA(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,NS(t))}class d8 extends Gl{constructor(){super(...arguments),this.removeStartListeners=Vt,this.removeEndListeners=Vt,this.removeAccessibleListeners=Vt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),s=Jo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:h}=this.node.getProps();vt.update(()=>{!h&&!KO(this.node.current,a.target)?d&&d(a,l):c&&c(a,l)})},{passive:!(r.onTap||r.onPointerUp)}),o=Jo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Il(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||BA("up",(l,c)=>{const{onTap:d}=this.node.getProps();d&&vt.update(()=>d(l,c))})};this.removeEndListeners(),this.removeEndListeners=Yo(this.node.current,"keyup",o),BA("down",(a,l)=>{this.startPress(a,l)})},t=Yo(this.node.current,"keydown",e),r=()=>{this.isPressing&&BA("cancel",(s,o)=>this.cancelPress(s,o))},i=Yo(this.node.current,"blur",r);this.removeAccessibleListeners=Il(t,i)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&vt.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!WO()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&vt.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Jo(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Yo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Il(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ME=new WeakMap,zA=new WeakMap,h8=n=>{const e=ME.get(n.target);e&&e(n)},f8=n=>{n.forEach(h8)};function p8({root:n,...e}){const t=n||document;zA.has(t)||zA.set(t,{});const r=zA.get(t),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(f8,{root:n,...e})),r[i]}function m8(n,e,t){const r=p8(e);return ME.set(n,t),r.observe(n),()=>{ME.delete(n),r.unobserve(n)}}const g8={some:0,all:1};class y8 extends Gl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:i="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:g8[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=c?d:h;f&&f(l)};return m8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(v8(e,t))&&this.startObserver()}unmount(){}}function v8({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const x8={inView:{Feature:y8},tap:{Feature:d8},focus:{Feature:u8},hover:{Feature:c8}};function XO(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function b8(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function w8(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function RS(n,e,t){const r=n.getProps();return iP(r,e,t!==void 0?t:r.custom,b8(n),w8(n))}let S8=Vt,sP=Vt;const Dl=n=>n*1e3,Zo=n=>n/1e3,A8={current:!1},YO=n=>Array.isArray(n)&&typeof n[0]=="number";function QO(n){return!!(!n||typeof n=="string"&&JO[n]||YO(n)||Array.isArray(n)&&n.every(QO))}const om=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,JO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:om([0,.65,.55,1]),circOut:om([.55,0,1,.45]),backIn:om([.31,.01,.66,-.59]),backOut:om([.33,1.53,.69,.99])};function ZO(n){if(n)return YO(n)?om(n):Array.isArray(n)?n.map(ZO):JO[n]}function _8(n,e,t,{delay:r=0,duration:i,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const c={[e]:t};l&&(c.offset=l);const d=ZO(a);return Array.isArray(d)&&(c.easing=d),n.animate(c,{delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function E8(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const eF=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,k8=1e-7,C8=12;function T8(n,e,t,r,i){let s,o,a=0;do o=e+(t-e)/2,s=eF(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>k8&&++a<C8);return o}function hv(n,e,t,r){if(n===e&&t===r)return Vt;const i=s=>T8(s,0,1,n,t);return s=>s===0||s===1?s:eF(i(s),e,r)}const P8=hv(.42,0,1,1),N8=hv(0,0,.58,1),tF=hv(.42,0,.58,1),R8=n=>Array.isArray(n)&&typeof n[0]!="number",nF=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,rF=n=>e=>1-n(1-e),oP=n=>1-Math.sin(Math.acos(n)),iF=rF(oP),j8=nF(oP),sF=hv(.33,1.53,.69,.99),aP=rF(sF),M8=nF(aP),L8=n=>(n*=2)<1?.5*aP(n):.5*(2-Math.pow(2,-10*(n-1))),I8={linear:Vt,easeIn:P8,easeInOut:tF,easeOut:N8,circIn:oP,circInOut:j8,circOut:iF,backIn:aP,backInOut:M8,backOut:sF,anticipate:L8},dR=n=>{if(Array.isArray(n)){sP(n.length===4);const[e,t,r,i]=n;return hv(e,t,r,i)}else if(typeof n=="string")return I8[n];return n},lP=(n,e)=>t=>!!(uv(t)&&D6.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),oF=(n,e,t)=>r=>{if(!uv(r))return r;const[i,s,o,a]=r.match(PS);return{[n]:parseFloat(i),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},D8=n=>Bl(0,255,n),$A={...ud,transform:n=>Math.round(D8(n))},bc={test:lP("rgb","red"),parse:oF("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+$A.transform(n)+", "+$A.transform(e)+", "+$A.transform(t)+", "+zm(Bm.transform(r))+")"};function O8(n){let e="",t="",r="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const LE={test:lP("#"),parse:O8,transform:bc.transform},Ud={test:lP("hsl","hue"),parse:oF("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Ys.transform(zm(e))+", "+Ys.transform(zm(t))+", "+zm(Bm.transform(r))+")"},tr={test:n=>bc.test(n)||LE.test(n)||Ud.test(n),parse:n=>bc.test(n)?bc.parse(n):Ud.test(n)?Ud.parse(n):LE.parse(n),transform:n=>uv(n)?n:n.hasOwnProperty("red")?bc.transform(n):Ud.transform(n)},jt=(n,e,t)=>-t*n+t*e+n;function UA(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function F8({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let i=0,s=0,o=0;if(!e)i=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;i=UA(l,a,n+1/3),s=UA(l,a,n),o=UA(l,a,n-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}const VA=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},B8=[LE,bc,Ud],z8=n=>B8.find(e=>e.test(n));function hR(n){const e=z8(n);let t=e.parse(n);return e===Ud&&(t=F8(t)),t}const aF=(n,e)=>{const t=hR(n),r=hR(e),i={...t};return s=>(i.red=VA(t.red,r.red,s),i.green=VA(t.green,r.green,s),i.blue=VA(t.blue,r.blue,s),i.alpha=jt(t.alpha,r.alpha,s),bc.transform(i))};function $8(n){var e,t;return isNaN(n)&&uv(n)&&(((e=n.match(PS))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(MO))===null||t===void 0?void 0:t.length)||0)>0}const lF={regex:L6,countKey:"Vars",token:"${v}",parse:Vt},cF={regex:MO,countKey:"Colors",token:"${c}",parse:tr.parse},uF={regex:PS,countKey:"Numbers",token:"${n}",parse:ud.parse};function HA(n,{regex:e,countKey:t,token:r,parse:i}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...s.map(i)))}function Gb(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&HA(t,lF),HA(t,cF),HA(t,uF),t}function dF(n){return Gb(n).values}function hF(n){const{values:e,numColors:t,numVars:r,tokenised:i}=Gb(n),s=e.length;return o=>{let a=i;for(let l=0;l<s;l++)l<r?a=a.replace(lF.token,o[l]):l<r+t?a=a.replace(cF.token,tr.transform(o[l])):a=a.replace(uF.token,zm(o[l]));return a}}const U8=n=>typeof n=="number"?0:n;function V8(n){const e=dF(n);return hF(n)(e.map(U8))}const zl={test:$8,parse:dF,createTransformer:hF,getAnimatableNone:V8},fF=(n,e)=>t=>`${t>0?e:n}`;function pF(n,e){return typeof n=="number"?t=>jt(n,e,t):tr.test(n)?aF(n,e):n.startsWith("var(")?fF(n,e):gF(n,e)}const mF=(n,e)=>{const t=[...n],r=t.length,i=n.map((s,o)=>pF(s,e[o]));return s=>{for(let o=0;o<r;o++)t[o]=i[o](s);return t}},H8=(n,e)=>{const t={...n,...e},r={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(r[i]=pF(n[i],e[i]));return i=>{for(const s in r)t[s]=r[s](i);return t}},gF=(n,e)=>{const t=zl.createTransformer(e),r=Gb(n),i=Gb(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Il(mF(r.values,i.values),t):fF(n,e)},mg=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},fR=(n,e)=>t=>jt(n,e,t);function q8(n){return typeof n=="number"?fR:typeof n=="string"?tr.test(n)?aF:gF:Array.isArray(n)?mF:typeof n=="object"?H8:fR}function G8(n,e,t){const r=[],i=t||q8(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=i(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Vt:e;a=Il(l,a)}r.push(a)}return r}function yF(n,e,{clamp:t=!0,ease:r,mixer:i}={}){const s=n.length;if(sP(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=G8(e,r,i),a=o.length,l=c=>{let d=0;if(a>1)for(;d<n.length-2&&!(c<n[d+1]);d++);const h=mg(n[d],n[d+1],c);return o[d](h)};return t?c=>l(Bl(n[0],n[s-1],c)):l}function W8(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=mg(0,e,r);n.push(jt(t,1,i))}}function K8(n){const e=[0];return W8(e,n.length-1),e}function X8(n,e){return n.map(t=>t*e)}function Y8(n,e){return n.map(()=>e||tF).splice(0,n.length-1)}function Wb({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const i=R8(r)?r.map(dR):dR(r),s={done:!1,value:e[0]},o=X8(t&&t.length===e.length?t:K8(e),n),a=yF(o,e,{ease:Array.isArray(i)?i:Y8(e,i)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function vF(n,e){return e?n*(1e3/e):0}const Q8=5;function xF(n,e,t){const r=Math.max(e-Q8,0);return vF(t-n(r),e-r)}const qA=.001,J8=.01,pR=10,Z8=.05,eH=1;function tH({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let i,s;S8(n<=Dl(pR));let o=1-e;o=Bl(Z8,eH,o),n=Bl(J8,pR,Zo(n)),o<1?(i=c=>{const d=c*o,h=d*n,f=d-t,m=IE(c,o),y=Math.exp(-h);return qA-f/m*y},s=c=>{const h=c*o*n,f=h*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-h),g=IE(Math.pow(c,2),o);return(-i(c)+qA>0?-1:1)*((f-m)*y)/g}):(i=c=>{const d=Math.exp(-c*n),h=(c-t)*n+1;return-qA+d*h},s=c=>{const d=Math.exp(-c*n),h=(t-c)*(n*n);return d*h});const a=5/n,l=rH(i,s,a);if(n=Dl(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:n}}}const nH=12;function rH(n,e,t){let r=t;for(let i=1;i<nH;i++)r=r-n(r)/e(r);return r}function IE(n,e){return n*Math.sqrt(1-e*e)}const iH=["duration","bounce"],sH=["stiffness","damping","mass"];function mR(n,e){return e.some(t=>n[t]!==void 0)}function oH(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!mR(n,sH)&&mR(n,iH)){const t=tH(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function bF({keyframes:n,restDelta:e,restSpeed:t,...r}){const i=n[0],s=n[n.length-1],o={done:!1,value:i},{stiffness:a,damping:l,mass:c,duration:d,velocity:h,isResolvedFromDuration:f}=oH({...r,velocity:-Zo(r.velocity||0)}),m=h||0,y=l/(2*Math.sqrt(a*c)),g=s-i,b=Zo(Math.sqrt(a/c)),v=Math.abs(g)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let x;if(y<1){const w=IE(b,y);x=E=>{const T=Math.exp(-y*b*E);return s-T*((m+y*b*g)/w*Math.sin(w*E)+g*Math.cos(w*E))}}else if(y===1)x=w=>s-Math.exp(-b*w)*(g+(m+b*g)*w);else{const w=b*Math.sqrt(y*y-1);x=E=>{const T=Math.exp(-y*b*E),k=Math.min(w*E,300);return s-T*((m+y*b*g)*Math.sinh(k)+w*g*Math.cosh(k))/w}}return{calculatedDuration:f&&d||null,next:w=>{const E=x(w);if(f)o.done=w>=d;else{let T=m;w!==0&&(y<1?T=xF(x,w,E):T=0);const k=Math.abs(T)<=t,P=Math.abs(s-E)<=e;o.done=k&&P}return o.value=o.done?s:E,o}}}function gR({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const h=n[0],f={done:!1,value:h},m=R=>a!==void 0&&R<a||l!==void 0&&R>l,y=R=>a===void 0?l:l===void 0||Math.abs(a-R)<Math.abs(l-R)?a:l;let g=t*e;const b=h+g,v=o===void 0?b:o(b);v!==b&&(g=v-h);const x=R=>-g*Math.exp(-R/r),w=R=>v+x(R),E=R=>{const L=x(R),O=w(R);f.done=Math.abs(L)<=c,f.value=f.done?v:O};let T,k;const P=R=>{m(f.value)&&(T=R,k=bF({keyframes:[f.value,y(f.value)],velocity:xF(w,R,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:d}))};return P(0),{calculatedDuration:null,next:R=>{let L=!1;return!k&&T===void 0&&(L=!0,E(R),P(R)),T!==void 0&&R>T?k.next(R-T):(!L&&E(R),f)}}}const aH=n=>{const e=({timestamp:t})=>n(t);return{start:()=>vt.update(e,!0),stop:()=>sa(e),now:()=>Un.isProcessing?Un.timestamp:performance.now()}},yR=2e4;function vR(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<yR;)e+=t,r=n.next(e);return e>=yR?1/0:e}const lH={decay:gR,inertia:gR,tween:Wb,keyframes:Wb,spring:bF};function Kb({autoplay:n=!0,delay:e=0,driver:t=aH,keyframes:r,type:i="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:c,onComplete:d,onUpdate:h,...f}){let m=1,y=!1,g,b;const v=()=>{b=new Promise(W=>{g=W})};v();let x;const w=lH[i]||Wb;let E;w!==Wb&&typeof r[0]!="number"&&(E=yF([0,100],r,{clamp:!1}),r=[0,100]);const T=w({...f,keyframes:r});let k;a==="mirror"&&(k=w({...f,keyframes:[...r].reverse(),velocity:-(f.velocity||0)}));let P="idle",R=null,L=null,O=null;T.calculatedDuration===null&&s&&(T.calculatedDuration=vR(T));const{calculatedDuration:F}=T;let I=1/0,U=1/0;F!==null&&(I=F+o,U=I*(s+1)-o);let B=0;const M=W=>{if(L===null)return;m>0&&(L=Math.min(L,W)),m<0&&(L=Math.min(W-U/m,L)),R!==null?B=R:B=Math.round(W-L)*m;const G=B-e*(m>=0?1:-1),j=m>=0?G<0:G>U;B=Math.max(G,0),P==="finished"&&R===null&&(B=U);let ee=B,ye=T;if(s){const Fe=Math.min(B,U)/I;let ve=Math.floor(Fe),Ue=Fe%1;!Ue&&Fe>=1&&(Ue=1),Ue===1&&ve--,ve=Math.min(ve,s+1),!!(ve%2)&&(a==="reverse"?(Ue=1-Ue,o&&(Ue-=o/I)):a==="mirror"&&(ye=k)),ee=Bl(0,1,Ue)*I}const de=j?{done:!1,value:r[0]}:ye.next(ee);E&&(de.value=E(de.value));let{done:se}=de;!j&&F!==null&&(se=m>=0?B>=U:B<=0);const Ee=R===null&&(P==="finished"||P==="running"&&se);return h&&h(de.value),Ee&&$(),de},D=()=>{x&&x.stop(),x=void 0},z=()=>{P="idle",D(),g(),v(),L=O=null},$=()=>{P="finished",d&&d(),D(),g()},V=()=>{if(y)return;x||(x=t(M));const W=x.now();l&&l(),R!==null?L=W-R:(!L||P==="finished")&&(L=W),P==="finished"&&v(),O=L,R=null,P="running",x.start()};n&&V();const N={then(W,G){return b.then(W,G)},get time(){return Zo(B)},set time(W){W=Dl(W),B=W,R!==null||!x||m===0?R=W:L=x.now()-W/m},get duration(){const W=T.calculatedDuration===null?vR(T):T.calculatedDuration;return Zo(W)},get speed(){return m},set speed(W){W===m||!x||(m=W,N.time=Zo(B))},get state(){return P},play:V,pause:()=>{P="paused",R=B},stop:()=>{y=!0,P!=="idle"&&(P="idle",c&&c(),z())},cancel:()=>{O!==null&&M(O),z()},complete:()=>{P="finished"},sample:W=>(L=0,M(W))};return N}function cH(n){let e;return()=>(e===void 0&&(e=n()),e)}const uH=cH(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),dH=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Qv=10,hH=2e4,fH=(n,e)=>e.type==="spring"||n==="backgroundColor"||!QO(e.ease);function pH(n,e,{onUpdate:t,onComplete:r,...i}){if(!(uH()&&dH.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,a,l,c=!1;const d=()=>{l=new Promise(w=>{a=w})};d();let{keyframes:h,duration:f=300,ease:m,times:y}=i;if(fH(e,i)){const w=Kb({...i,repeat:0,delay:0});let E={done:!1,value:h[0]};const T=[];let k=0;for(;!E.done&&k<hH;)E=w.sample(k),T.push(E.value),k+=Qv;y=void 0,h=T,f=k-Qv,m="linear"}const g=_8(n.owner.current,e,h,{...i,duration:f,ease:m,times:y}),b=()=>{c=!1,g.cancel()},v=()=>{c=!0,vt.update(b),a(),d()};return g.onfinish=()=>{c||(n.set(E8(h,i)),r&&r(),v())},{then(w,E){return l.then(w,E)},attachTimeline(w){return g.timeline=w,g.onfinish=null,Vt},get time(){return Zo(g.currentTime||0)},set time(w){g.currentTime=Dl(w)},get speed(){return g.playbackRate},set speed(w){g.playbackRate=w},get duration(){return Zo(f)},play:()=>{o||(g.play(),sa(b))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:w}=g;if(w){const E=Kb({...i,autoplay:!1});n.setWithVelocity(E.sample(w-Qv).value,E.sample(w).value,Qv)}v()},complete:()=>{c||g.finish()},cancel:v}}function mH({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const i=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Vt,pause:Vt,stop:Vt,then:s=>(s(),Promise.resolve()),cancel:Vt,complete:Vt});return e?Kb({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const gH={type:"spring",stiffness:500,damping:25,restSpeed:10},yH=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),vH={type:"keyframes",duration:.8},xH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bH=(n,{keyframes:e})=>e.length>2?vH:cd.has(n)?n.startsWith("scale")?yH(e[1]):gH:xH,DE=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(zl.test(e)||e==="0")&&!e.startsWith("url(")),wH=new Set(["brightness","contrast","saturate","opacity"]);function SH(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(PS)||[];if(!r)return n;const i=t.replace(r,"");let s=wH.has(e)?1:0;return r!==t&&(s*=100),e+"("+s+i+")"}const AH=/([a-z-]*)\(.*?\)/g,OE={...zl,getAnimatableNone:n=>{const e=n.match(AH);return e?e.map(SH).join(" "):n}},_H={...LO,color:tr,backgroundColor:tr,outlineColor:tr,fill:tr,stroke:tr,borderColor:tr,borderTopColor:tr,borderRightColor:tr,borderBottomColor:tr,borderLeftColor:tr,filter:OE,WebkitFilter:OE},cP=n=>_H[n];function wF(n,e){let t=cP(n);return t!==OE&&(t=zl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const SF=n=>/^0[^.\s]+$/.test(n);function EH(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||SF(n)}function kH(n,e,t,r){const i=DE(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=r.from!==void 0?r.from:n.get();let a;const l=[];for(let c=0;c<s.length;c++)s[c]===null&&(s[c]=c===0?o:s[c-1]),EH(s[c])&&l.push(c),typeof s[c]=="string"&&s[c]!=="none"&&s[c]!=="0"&&(a=s[c]);if(i&&l.length&&a)for(let c=0;c<l.length;c++){const d=l[c];s[d]=wF(e,a)}return s}function CH({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}function uP(n,e){return n[e]||n.default||n}const TH={skipAnimations:!1},dP=(n,e,t,r={})=>i=>{const s=uP(r,n)||{},o=s.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Dl(o);const l=kH(e,n,t,s),c=l[0],d=l[l.length-1],h=DE(n,c),f=DE(n,d);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:y=>{e.set(y),s.onUpdate&&s.onUpdate(y)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(CH(s)||(m={...m,...bH(n,m)}),m.duration&&(m.duration=Dl(m.duration)),m.repeatDelay&&(m.repeatDelay=Dl(m.repeatDelay)),!h||!f||A8.current||s.type===!1||TH.skipAnimations)return mH(m);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=pH(e,n,m);if(y)return y}return Kb(m)};function Xb(n){return!!(Pr(n)&&n.add)}const AF=n=>/^\-?\d*\.?\d+$/.test(n);function hP(n,e){n.indexOf(e)===-1&&n.push(e)}function fP(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class pP{constructor(){this.subscriptions=[]}add(e){return hP(this.subscriptions,e),()=>fP(this.subscriptions,e)}notify(e,t,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const PH=n=>!isNaN(parseFloat(n));class NH{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:s,timestamp:o}=Un;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,vt.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>vt.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=PH(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new pP);const r=this.events[e].add(t);return e==="change"?()=>{r(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?vF(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pp(n,e){return new NH(n,e)}const _F=n=>e=>e.test(n),RH={test:n=>n==="auto",parse:n=>n},EF=[ud,xe,Ys,va,F6,O6,RH],Vp=n=>EF.find(_F(n)),jH=[...EF,tr,zl],MH=n=>jH.find(_F(n));function LH(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,pp(t))}function IH(n,e){const t=RS(n,e);let{transitionEnd:r={},transition:i={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...r};for(const o in s){const a=J6(s[o]);LH(n,o,a)}}function DH(n,e,t){var r,i;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],c=e[l];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(i=(r=t[l])!==null&&r!==void 0?r:n.readValue(l))!==null&&i!==void 0?i:e[l]),d!=null&&(typeof d=="string"&&(AF(d)||SF(d))?d=parseFloat(d):!MH(d)&&zl.test(c)&&(d=wF(l,c)),n.addValue(l,pp(d,{owner:n})),t[l]===void 0&&(t[l]=d),d!==null&&n.setBaseTarget(l,d))}}function OH(n,e){return e?(e[n]||e.default||e).from:void 0}function FH(n,e,t){const r={};for(const i in n){const s=OH(i,e);if(s!==void 0)r[i]=s;else{const o=t.getValue(i);o&&(r[i]=o.get())}}return r}function BH({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function zH(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function kF(n,e,{delay:t=0,transitionOverride:r,type:i}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");r&&(s=r);const c=[],d=i&&n.animationState&&n.animationState.getState()[i];for(const h in a){const f=n.getValue(h),m=a[h];if(!f||m===void 0||d&&BH(d,h))continue;const y={delay:t,elapsed:0,...uP(s||{},h)};if(window.HandoffAppearAnimations){const v=n.getProps()[CO];if(v){const x=window.HandoffAppearAnimations(v,h,f,vt);x!==null&&(y.elapsed=x,y.isHandoff=!0)}}let g=!y.isHandoff&&!zH(f,m);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(dP(h,f,m,n.shouldReduceMotion&&cd.has(h)?{type:!1}:y));const b=f.animation;Xb(l)&&(l.add(h),b.then(()=>l.remove(h))),c.push(b)}return o&&Promise.all(c).then(()=>{o&&IH(n,o)}),c}function FE(n,e,t={}){const r=RS(n,e,t.custom);let{transition:i=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(i=t.transitionOverride);const s=r?()=>Promise.all(kF(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=i;return $H(n,e,c+l,d,h,t)}:()=>Promise.resolve(),{when:a}=i;if(a){const[l,c]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>c())}else return Promise.all([s(),o(t.delay)])}function $H(n,e,t=0,r=0,i=1,s){const o=[],a=(n.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(n.variantChildren).sort(UH).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(FE(c,e,{...s,delay:t+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function UH(n,e){return n.sortNodePosition(e)}function VH(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>FE(n,s,t));r=Promise.all(i)}else if(typeof e=="string")r=FE(n,e,t);else{const i=typeof e=="function"?RS(n,e,t.custom):e;r=Promise.all(kF(n,i,t))}return r.then(()=>n.notify("AnimationComplete",e))}const HH=[...XT].reverse(),qH=XT.length;function GH(n){return e=>Promise.all(e.map(({animation:t,options:r})=>VH(n,t,r)))}function WH(n){let e=GH(n);const t=XH();let r=!0;const i=(l,c)=>{const d=RS(n,c);if(d){const{transition:h,transitionEnd:f,...m}=d;l={...l,...m,...f}}return l};function s(l){e=l(n)}function o(l,c){const d=n.getProps(),h=n.getVariantContext(!0)||{},f=[],m=new Set;let y={},g=1/0;for(let v=0;v<qH;v++){const x=HH[v],w=t[x],E=d[x]!==void 0?d[x]:h[x],T=fg(E),k=x===c?w.isActive:null;k===!1&&(g=v);let P=E===h[x]&&E!==d[x]&&T;if(P&&r&&n.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...y},!w.isActive&&k===null||!E&&!w.prevProp||CS(E)||typeof E=="boolean")continue;let L=KH(w.prevProp,E)||x===c&&w.isActive&&!P&&T||v>g&&T,O=!1;const F=Array.isArray(E)?E:[E];let I=F.reduce(i,{});k===!1&&(I={});const{prevResolvedValues:U={}}=w,B={...U,...I},M=D=>{L=!0,m.has(D)&&(O=!0,m.delete(D)),w.needsAnimating[D]=!0};for(const D in B){const z=I[D],$=U[D];if(y.hasOwnProperty(D))continue;let V=!1;qb(z)&&qb($)?V=!XO(z,$):V=z!==$,V?z!==void 0?M(D):m.add(D):z!==void 0&&m.has(D)?M(D):w.protectedKeys[D]=!0}w.prevProp=E,w.prevResolvedValues=I,w.isActive&&(y={...y,...I}),r&&n.blockInitialAnimation&&(L=!1),L&&(!P||O)&&f.push(...F.map(D=>({animation:D,options:{type:x,...l}})))}if(m.size){const v={};m.forEach(x=>{const w=n.getBaseTarget(x);w!==void 0&&(v[x]=w)}),f.push({animation:v})}let b=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(b=!1),r=!1,b?e(f):Promise.resolve()}function a(l,c,d){var h;if(t[l].isActive===c)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(l,c)}),t[l].isActive=c;const f=o(d,l);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function KH(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!XO(e,n):!1}function Yl(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function XH(){return{animate:Yl(!0),whileInView:Yl(),whileHover:Yl(),whileTap:Yl(),whileDrag:Yl(),whileFocus:Yl(),exit:Yl()}}class YH extends Gl{constructor(e){super(e),e.animationState||(e.animationState=WH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),CS(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let QH=0;class JH extends Gl{constructor(){super(...arguments),this.id=QH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const s=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const ZH={animation:{Feature:YH},exit:{Feature:JH}},xR=(n,e)=>Math.abs(n-e);function eq(n,e){const t=xR(n.x,e.x),r=xR(n.y,e.y);return Math.sqrt(t**2+r**2)}class CF{constructor(e,t,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=WA(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=eq(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:g}=Un;this.history.push({...y,timestamp:g});const{onStart:b,onMove:v}=this.handlers;f||(b&&b(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=GA(f,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=WA(h.type==="pointercancel"?this.lastMoveEventInfo:GA(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,b),y&&y(h,b)},!HO(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.contextWindow=i||window;const o=NS(e),a=GA(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Un;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,WA(a,this.history)),this.removeListeners=Il(Jo(this.contextWindow,"pointermove",this.handlePointerMove),Jo(this.contextWindow,"pointerup",this.handlePointerUp),Jo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sa(this.updatePoint)}}function GA(n,e){return e?{point:e(n.point)}:n}function bR(n,e){return{x:n.x-e.x,y:n.y-e.y}}function WA({point:n},e){return{point:n,delta:bR(n,TF(e)),offset:bR(n,tq(e)),velocity:nq(e,.1)}}function tq(n){return n[0]}function TF(n){return n[n.length-1]}function nq(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const i=TF(n);for(;t>=0&&(r=n[t],!(i.timestamp-r.timestamp>Dl(e)));)t--;if(!r)return{x:0,y:0};const s=Zo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ii(n){return n.max-n.min}function BE(n,e=0,t=.01){return Math.abs(n-e)<=t}function wR(n,e,t,r=.5){n.origin=r,n.originPoint=jt(e.min,e.max,n.origin),n.scale=ii(t)/ii(e),(BE(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=jt(t.min,t.max,n.origin)-n.originPoint,(BE(n.translate)||isNaN(n.translate))&&(n.translate=0)}function $m(n,e,t,r){wR(n.x,e.x,t.x,r?r.originX:void 0),wR(n.y,e.y,t.y,r?r.originY:void 0)}function SR(n,e,t){n.min=t.min+e.min,n.max=n.min+ii(e)}function rq(n,e,t){SR(n.x,e.x,t.x),SR(n.y,e.y,t.y)}function AR(n,e,t){n.min=e.min-t.min,n.max=n.min+ii(e)}function Um(n,e,t){AR(n.x,e.x,t.x),AR(n.y,e.y,t.y)}function iq(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?jt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?jt(t,n,r.max):Math.min(n,t)),n}function _R(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function sq(n,{top:e,left:t,bottom:r,right:i}){return{x:_R(n.x,t,i),y:_R(n.y,e,r)}}function ER(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function oq(n,e){return{x:ER(n.x,e.x),y:ER(n.y,e.y)}}function aq(n,e){let t=.5;const r=ii(n),i=ii(e);return i>r?t=mg(e.min,e.max-r,n.min):r>i&&(t=mg(n.min,n.max-i,e.min)),Bl(0,1,t)}function lq(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const zE=.35;function cq(n=zE){return n===!1?n=0:n===!0&&(n=zE),{x:kR(n,"left","right"),y:kR(n,"top","bottom")}}function kR(n,e,t){return{min:CR(n,e),max:CR(n,t)}}function CR(n,e){return typeof n=="number"?n:n[e]||0}const TR=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vd=()=>({x:TR(),y:TR()}),PR=()=>({min:0,max:0}),Yt=()=>({x:PR(),y:PR()});function di(n){return[n("x"),n("y")]}function PF({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function uq({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function dq(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function KA(n){return n===void 0||n===1}function $E({scale:n,scaleX:e,scaleY:t}){return!KA(n)||!KA(e)||!KA(t)}function ic(n){return $E(n)||NF(n)||n.z||n.rotate||n.rotateX||n.rotateY}function NF(n){return NR(n.x)||NR(n.y)}function NR(n){return n&&n!=="0%"}function Yb(n,e,t){const r=n-t,i=e*r;return t+i}function RR(n,e,t,r,i){return i!==void 0&&(n=Yb(n,i,r)),Yb(n,t,r)+e}function UE(n,e=0,t=1,r,i){n.min=RR(n.min,e,t,r,i),n.max=RR(n.max,e,t,r,i)}function RF(n,{x:e,y:t}){UE(n.x,e.translate,e.scale,e.originPoint),UE(n.y,t.translate,t.scale,t.originPoint)}function hq(n,e,t,r=!1){const i=t.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Hd(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,RF(n,o)),r&&ic(s.latestValues)&&Hd(n,s.latestValues))}e.x=jR(e.x),e.y=jR(e.y)}function jR(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Sa(n,e){n.min=n.min+e,n.max=n.max+e}function MR(n,e,[t,r,i]){const s=e[i]!==void 0?e[i]:.5,o=jt(n.min,n.max,s);UE(n,e[t],e[r],o,e.scale)}const fq=["x","scaleX","originX"],pq=["y","scaleY","originY"];function Hd(n,e){MR(n.x,e,fq),MR(n.y,e,pq)}function jF(n,e){return PF(dq(n.getBoundingClientRect(),e))}function mq(n,e,t){const r=jF(n,t),{scroll:i}=e;return i&&(Sa(r.x,i.offset.x),Sa(r.y,i.offset.y)),r}const MF=({current:n})=>n?n.ownerDocument.defaultView:null,gq=new WeakMap;class yq{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Yt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(NS(d,"page").point)},s=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=GO(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),di(b=>{let v=this.getAxisMotionValue(b).get()||0;if(Ys.test(v)){const{projection:x}=this.visualElement;if(x&&x.layout){const w=x.layout.layoutBox[b];w&&(v=ii(w)*(parseFloat(v)/100))}}this.originPoint[b]=v}),y&&vt.update(()=>y(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:b}=h;if(m&&this.currentDirection===null){this.currentDirection=vq(b),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,b),this.updateAxis("y",h.point,b),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),l=()=>di(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new CF(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:MF(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&vt.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:i}=this.getProps();if(!r||!Jv(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=iq(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&$d(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=sq(i.layoutBox,t):this.constraints=!1,this.elastic=cq(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&di(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=lq(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!$d(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=mq(r,i.root,this.visualElement.getTransformPagePoint());let o=oq(i.layout.layoutBox,s);if(t){const a=t(uq(o));this.hasMutatedConstraints=!!a,a&&(o=PF(a))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=di(d=>{if(!Jv(d,t,this.currentDirection))return;let h=l&&l[d]||{};o&&(h={min:0,max:0});const f=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(dP(e,r,0,t))}stopAnimation(){di(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){di(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[t];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){di(t=>{const{drag:r}=this.getProps();if(!Jv(t,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[t];s.set(e[t]-jt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!$d(t)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};di(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();i[o]=aq({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),di(o=>{if(!Jv(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(jt(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;gq.set(this.visualElement,this);const e=this.visualElement.current,t=Jo(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();$d(l)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const o=Yo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(di(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=zE,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Jv(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function vq(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class xq extends Gl{constructor(e){super(e),this.removeGroupControls=Vt,this.removeListeners=Vt,this.controls=new yq(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vt}unmount(){this.removeGroupControls(),this.removeListeners()}}const LR=n=>(e,t)=>{n&&vt.update(()=>n(e,t))};class bq extends Gl{constructor(){super(...arguments),this.removePointerDownListener=Vt}onPointerDown(e){this.session=new CF(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:MF(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:LR(e),onStart:LR(t),onMove:r,onEnd:(s,o)=>{delete this.session,i&&vt.update(()=>i(s,o))}}}mount(){this.removePointerDownListener=Jo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function wq(){const n=_.useContext(ES);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,i=_.useId();return _.useEffect(()=>r(i),[]),!e&&t?[!1,()=>t&&t(i)]:[!0]}const Ix={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function IR(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Hp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(xe.test(n))n=parseFloat(n);else return n;const t=IR(n,e.target.x),r=IR(n,e.target.y);return`${t}% ${r}%`}},Sq={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,i=zl.parse(n);if(i.length>5)return r;const s=zl.createTransformer(n),o=typeof i[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=jt(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Aq extends Pe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;N6(_q),s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ix.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||vt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function LF(n){const[e,t]=wq(),r=_.useContext(QT);return Pe.createElement(Aq,{...n,layoutGroup:r,switchLayoutGroup:_.useContext(PO),isPresent:e,safeToRemove:t})}const _q={borderRadius:{...Hp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Hp,borderTopRightRadius:Hp,borderBottomLeftRadius:Hp,borderBottomRightRadius:Hp,boxShadow:Sq},IF=["TopLeft","TopRight","BottomLeft","BottomRight"],Eq=IF.length,DR=n=>typeof n=="string"?parseFloat(n):n,OR=n=>typeof n=="number"||xe.test(n);function kq(n,e,t,r,i,s){i?(n.opacity=jt(0,t.opacity!==void 0?t.opacity:1,Cq(r)),n.opacityExit=jt(e.opacity!==void 0?e.opacity:1,0,Tq(r))):s&&(n.opacity=jt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<Eq;o++){const a=`border${IF[o]}Radius`;let l=FR(e,a),c=FR(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||OR(l)===OR(c)?(n[a]=Math.max(jt(DR(l),DR(c),r),0),(Ys.test(c)||Ys.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=jt(e.rotate||0,t.rotate||0,r))}function FR(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Cq=DF(0,.5,iF),Tq=DF(.5,.95,Vt);function DF(n,e,t){return r=>r<n?0:r>e?1:t(mg(n,e,r))}function BR(n,e){n.min=e.min,n.max=e.max}function li(n,e){BR(n.x,e.x),BR(n.y,e.y)}function zR(n,e,t,r,i){return n-=e,n=Yb(n,1/t,r),i!==void 0&&(n=Yb(n,1/i,r)),n}function Pq(n,e=0,t=1,r=.5,i,s=n,o=n){if(Ys.test(e)&&(e=parseFloat(e),e=jt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=jt(s.min,s.max,r);n===s&&(a-=e),n.min=zR(n.min,e,t,a,i),n.max=zR(n.max,e,t,a,i)}function $R(n,e,[t,r,i],s,o){Pq(n,e[t],e[r],e[i],e.scale,s,o)}const Nq=["x","scaleX","originX"],Rq=["y","scaleY","originY"];function UR(n,e,t,r){$R(n.x,e,Nq,t?t.x:void 0,r?r.x:void 0),$R(n.y,e,Rq,t?t.y:void 0,r?r.y:void 0)}function VR(n){return n.translate===0&&n.scale===1}function OF(n){return VR(n.x)&&VR(n.y)}function jq(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function FF(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function HR(n){return ii(n.x)/ii(n.y)}class Mq{constructor(){this.members=[]}add(e){hP(this.members,e),e.scheduleRender()}remove(e){if(fP(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let r;for(let i=t;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qR(n,e,t){let r="";const i=n.x.translate/e.x,s=n.y.translate/e.y;if((i||s)&&(r=`translate3d(${i}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:c,rotateY:d}=t;l&&(r+=`rotate(${l}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const Lq=(n,e)=>n.depth-e.depth;class Iq{constructor(){this.children=[],this.isDirty=!1}add(e){hP(this.children,e),this.isDirty=!0}remove(e){fP(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Lq),this.isDirty=!1,this.children.forEach(e)}}function Dq(n,e){const t=performance.now(),r=({timestamp:i})=>{const s=i-t;s>=e&&(sa(r),n(s-e))};return vt.read(r,!0),()=>sa(r)}function Oq(n){window.MotionDebug&&window.MotionDebug.record(n)}function Fq(n){return n instanceof SVGElement&&n.tagName!=="svg"}function Bq(n,e,t){const r=Pr(n)?n:pp(n);return r.start(dP("",r,e,t)),r.animation}const GR=["","X","Y","Z"],zq={visibility:"hidden"},WR=1e3;let $q=0;const sc={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function BF({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=$q++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,sc.totalNodes=sc.resolvedTargetDeltas=sc.recalculatedProjection=0,this.nodes.forEach(Hq),this.nodes.forEach(Xq),this.nodes.forEach(Yq),this.nodes.forEach(qq),Oq(sc)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Iq)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new pP),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Fq(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Dq(f,250),Ix.hasAnimatedSinceResize&&(Ix.hasAnimatedSinceResize=!1,this.nodes.forEach(XR))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||tG,{onLayoutAnimationStart:b,onLayoutAnimationComplete:v}=d.getProps(),x=!this.targetLayout||!FF(this.targetLayout,y)||m,w=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,w);const E={...uP(g,"layout"),onPlay:b,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||XR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Qq),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KR);return}this.isUpdating||this.nodes.forEach(Wq),this.isUpdating=!1,this.nodes.forEach(Kq),this.nodes.forEach(Uq),this.nodes.forEach(Vq),this.clearAllSnapshots();const a=performance.now();Un.delta=Bl(0,1e3/60,a-Un.timestamp),Un.timestamp=a,Un.isProcessing=!0,FA.update.process(Un),FA.preRender.process(Un),FA.render.process(Un),Un.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Gq),this.sharedNodes.forEach(Jq)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Yt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!OF(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||ic(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),nG(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Yt();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Sa(a.x,l.offset.x),Sa(a.y,l.offset.y)),a}removeElementScroll(o){const a=Yt();li(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l],{scroll:d,options:h}=c;if(c!==this.root&&d&&h.layoutScroll){if(d.isRoot){li(a,o);const{scroll:f}=this.root;f&&(Sa(a.x,-f.offset.x),Sa(a.y,-f.offset.y))}Sa(a.x,d.offset.x),Sa(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const l=Yt();li(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Hd(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ic(d.latestValues)&&Hd(l,d.latestValues)}return ic(this.latestValues)&&Hd(l,this.latestValues),l}removeTransform(o){const a=Yt();li(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!ic(c.latestValues))continue;$E(c.latestValues)&&c.updateSnapshot();const d=Yt(),h=c.measurePageBox();li(d,h),UR(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return ic(this.latestValues)&&UR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Un.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Un.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),Um(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Yt(),this.targetWithTransforms=Yt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rq(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):li(this.target,this.layout.layoutBox),RF(this.target,this.targetDelta)):li(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Yt(),this.relativeTargetOrigin=Yt(),Um(this.relativeTargetOrigin,this.target,m.target),li(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}sc.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||$E(this.parent.latestValues)||NF(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Un.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;li(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;hq(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Vd(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Vd(),this.projectionDeltaWithTransform=Vd());const g=this.projectionTransform;$m(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=qR(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),sc.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},h=Vd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Yt(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,b=this.getStack(),v=!b||b.members.length<=1,x=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(eG));this.animationProgress=0;let w;this.mixTargetDelta=E=>{const T=E/1e3;YR(h.x,o.x,T),YR(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Um(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Zq(this.relativeTarget,this.relativeTargetOrigin,f,T),w&&jq(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Yt()),li(w,this.relativeTarget)),g&&(this.animationValues=d,kq(d,c,this.latestValues,T,x,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{Ix.hasAnimatedSinceResize=!0,this.currentAnimation=Bq(0,WR,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&zF(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Yt();const h=ii(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=ii(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}li(a,l),Hd(a,d),$m(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Mq),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<GR.length;d++){const h="rotate"+GR[d];l[h]&&(c[h]=l[h],o.setStaticValue(h,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zq;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Lx(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Lx(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ic(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),c.transform=qR(this.projectionDeltaWithTransform,this.treeScale,f),d&&(c.transform=d(f,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?c.opacity=h===this?(l=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:c.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Vb){if(f[g]===void 0)continue;const{correct:b,applyTo:v}=Vb[g],x=c.transform==="none"?f[g]:b(f[g],h);if(v){const w=v.length;for(let E=0;E<w;E++)c[v[E]]=x}else c[g]=x}return this.options.layoutId&&(c.pointerEvents=h===this?Lx(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(KR),this.root.sharedNodes.clear()}}}function Uq(n){n.updateLayout()}function Vq(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?di(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=ii(f);f.min=r[h].min,f.max=f.min+m}):zF(s,t.layoutBox,r)&&di(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=ii(r[h]);f.max=f.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=Vd();$m(a,r,t.layoutBox);const l=Vd();o?$m(l,n.applyTransform(i,!0),t.measuredBox):$m(l,r,t.layoutBox);const c=!OF(a);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=Yt();Um(y,t.layoutBox,f.layoutBox);const g=Yt();Um(g,r,m.layoutBox),FF(y,g)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function Hq(n){sc.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function qq(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Gq(n){n.clearSnapshot()}function KR(n){n.clearMeasurements()}function Wq(n){n.isLayoutDirty=!1}function Kq(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function XR(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Xq(n){n.resolveTargetDelta()}function Yq(n){n.calcProjection()}function Qq(n){n.resetRotation()}function Jq(n){n.removeLeadSnapshot()}function YR(n,e,t){n.translate=jt(e.translate,0,t),n.scale=jt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function QR(n,e,t,r){n.min=jt(e.min,t.min,r),n.max=jt(e.max,t.max,r)}function Zq(n,e,t,r){QR(n.x,e.x,t.x,r),QR(n.y,e.y,t.y,r)}function eG(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const tG={duration:.45,ease:[.4,0,.1,1]},JR=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),ZR=JR("applewebkit/")&&!JR("chrome/")?Math.round:Vt;function ej(n){n.min=ZR(n.min),n.max=ZR(n.max)}function nG(n){ej(n.x),ej(n.y)}function zF(n,e,t){return n==="position"||n==="preserve-aspect"&&!BE(HR(e),HR(t),.2)}const rG=BF({attachResizeListener:(n,e)=>Yo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),XA={current:void 0},$F=BF({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!XA.current){const n=new rG({});n.mount(window),n.setOptions({layoutScroll:!0}),XA.current=n}return XA.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),iG={pan:{Feature:bq},drag:{Feature:xq,ProjectionNode:$F,MeasureLayout:LF}},sG=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function oG(n){const e=sG.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function VE(n,e,t=1){const[r,i]=oG(n);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return AF(o)?parseFloat(o):o}else return jE(i)?VE(i,e,t+1):i}function aG(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(i=>{const s=i.get();if(!jE(s))return;const o=VE(s,r);o&&i.set(o)});for(const i in e){const s=e[i];if(!jE(s))continue;const o=VE(s,r);o&&(e[i]=o,t||(t={}),t[i]===void 0&&(t[i]=s))}return{target:e,transitionEnd:t}}const lG=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),UF=n=>lG.has(n),cG=n=>Object.keys(n).some(UF),tj=n=>n===ud||n===xe,nj=(n,e)=>parseFloat(n.split(", ")[e]),rj=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return nj(i[1],e);{const s=r.match(/^matrix\((.+)\)$/);return s?nj(s[1],n):0}},uG=new Set(["x","y","z"]),dG=cv.filter(n=>!uG.has(n));function hG(n){const e=[];return dG.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const mp={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:rj(4,13),y:rj(5,14)};mp.translateX=mp.x;mp.translateY=mp.y;const fG=(n,e,t)=>{const r=e.measureViewportBox(),i=e.current,s=getComputedStyle(i),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(c=>{a[c]=mp[c](r,s)}),e.render();const l=e.measureViewportBox();return t.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),n[c]=mp[c](l,s)}),n},pG=(n,e,t={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(UF);let s=[],o=!1;const a=[];if(i.forEach(l=>{const c=n.getValue(l);if(!n.hasValue(l))return;let d=t[l],h=Vp(d);const f=e[l];let m;if(qb(f)){const y=f.length,g=f[0]===null?1:0;d=f[g],h=Vp(d);for(let b=g;b<y&&f[b]!==null;b++)m?sP(Vp(f[b])===m):m=Vp(f[b])}else m=Vp(f);if(h!==m)if(tj(h)&&tj(m)){const y=c.get();typeof y=="string"&&c.set(parseFloat(y)),typeof f=="string"?e[l]=parseFloat(f):Array.isArray(f)&&m===xe&&(e[l]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?c.set(m.transform(d)):e[l]=h.transform(f):(o||(s=hG(n),o=!0),a.push(l),r[l]=r[l]!==void 0?r[l]:e[l],c.jump(f))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,c=fG(e,n,a);return s.length&&s.forEach(([d,h])=>{n.getValue(d).set(h)}),n.render(),kS&&l!==null&&window.scrollTo({top:l}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function mG(n,e,t,r){return cG(e)?pG(n,e,t,r):{target:e,transitionEnd:r}}const gG=(n,e,t,r)=>{const i=aG(n,e,r);return e=i.target,r=i.transitionEnd,mG(n,e,t,r)},HE={current:null},VF={current:!1};function yG(){if(VF.current=!0,!!kS)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>HE.current=n.matches;n.addListener(e),e()}else HE.current=!1}function vG(n,e,t){const{willChange:r}=e;for(const i in e){const s=e[i],o=t[i];if(Pr(s))n.addValue(i,s),Xb(r)&&r.add(i);else if(Pr(o))n.addValue(i,pp(s,{owner:n})),Xb(r)&&r.remove(i);else if(o!==s)if(n.hasValue(i)){const a=n.getValue(i);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(i);n.addValue(i,pp(a!==void 0?a:s,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const ij=new WeakMap,HF=Object.keys(pg),xG=HF.length,sj=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],bG=YT.length;class wG{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>vt.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=TS(t),this.isVariantNode=TO(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{});for(const h in d){const f=d[h];a[h]!==void 0&&Pr(f)&&(f.set(a[h],!1),Xb(c)&&c.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,ij.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),VF.current||yG(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:HE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ij.delete(this.current),this.projection&&this.projection.unmount(),sa(this.notifyUpdate),sa(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=cd.has(e),i=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&vt.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,i,s){let o,a;for(let l=0;l<xG;l++){const c=HF[l],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=pg[c];f&&(o=f),d(t)&&(!this.features[c]&&h&&(this.features[c]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:c,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:c,alwaysMeasureLayout:!!d||h&&$d(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:s,layoutScroll:f,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Yt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<sj.length;r++){const i=sj[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s=e["on"+i];s&&(this.propEventSubscriptions[i]=this.on(i,s))}this.prevMotionValues=vG(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<bG;r++){const i=YT[r],s=this.props[i];(fg(s)||s===!1)&&(t[i]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=pp(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(t=iP(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Pr(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new pP),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class qF extends wG{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:i},s){let o=FH(r,e||{},this);if(i&&(t&&(t=i(t)),r&&(r=i(r)),o&&(o=i(o))),s){DH(this,r,o);const a=gG(this,r,o,t);t=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:t,...r}}}function SG(n){return window.getComputedStyle(n)}class AG extends qF{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(cd.has(t)){const r=cP(t);return r&&r.default||0}else{const r=SG(e),i=(jO(t)?r.getPropertyValue(t):r[t])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return jF(e,t)}build(e,t,r,i){ZT(e,t,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,t){return rP(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Pr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,i){FO(e,t,r,i)}}class _G extends qF{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(cd.has(t)){const r=cP(t);return r&&r.default||0}return t=BO.has(t)?t:KT(t),e.getAttribute(t)}measureInstanceViewportBox(){return Yt()}scrapeMotionValuesFromProps(e,t){return $O(e,t)}build(e,t,r,i){tP(e,t,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,r,i){zO(e,t,r,i)}mount(e){this.isSVGTag=nP(e.tagName),super.mount(e)}}const EG=(n,e)=>JT(n)?new _G(e,{enableHardwareAcceleration:!1}):new AG(e,{enableHardwareAcceleration:!0}),kG={layout:{ProjectionNode:$F,MeasureLayout:LF}},CG={...ZH,...x8,...iG,...kG},ne=T6((n,e)=>o8(n,e,CG,EG));function GF(){const n=_.useRef(!1);return WT(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function TG(){const n=GF(),[e,t]=_.useState(0),r=_.useCallback(()=>{n.current&&t(e+1)},[e]);return[_.useCallback(()=>vt.postRender(r),[r]),e]}class PG extends _.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function NG({children:n,isPresent:e}){const t=_.useId(),r=_.useRef(null),i=_.useRef({width:0,height:0,top:0,left:0});return _.useInsertionEffect(()=>{const{width:s,height:o,top:a,left:l}=i.current;if(e||!r.current||!s||!o)return;r.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${s}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${l}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),_.createElement(PG,{isPresent:e,childRef:r,sizeRef:i},_.cloneElement(n,{ref:r}))}const YA=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=UO(RG),l=_.useId(),c=_.useMemo(()=>({id:l,initial:e,isPresent:t,custom:i,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),s?void 0:[t]);return _.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[t]),_.useEffect(()=>{!t&&!a.size&&r&&r()},[t]),o==="popLayout"&&(n=_.createElement(NG,{isPresent:t},n)),_.createElement(ES.Provider,{value:c},n)};function RG(){return new Map}function jG(n){return _.useEffect(()=>()=>n(),[])}const oc=n=>n.key||"";function MG(n,e){n.forEach(t=>{const r=oc(t);e.set(r,t)})}function LG(n){const e=[];return _.Children.forEach(n,t=>{_.isValidElement(t)&&e.push(t)}),e}const Qs=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:i,presenceAffectsLayout:s=!0,mode:o="sync"})=>{const a=_.useContext(QT).forceRender||TG()[0],l=GF(),c=LG(n);let d=c;const h=_.useRef(new Map).current,f=_.useRef(d),m=_.useRef(new Map).current,y=_.useRef(!0);if(WT(()=>{y.current=!1,MG(c,m),f.current=d}),jG(()=>{y.current=!0,m.clear(),h.clear()}),y.current)return _.createElement(_.Fragment,null,d.map(x=>_.createElement(YA,{key:oc(x),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:s,mode:o},x)));d=[...d];const g=f.current.map(oc),b=c.map(oc),v=g.length;for(let x=0;x<v;x++){const w=g[x];b.indexOf(w)===-1&&!h.has(w)&&h.set(w,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((x,w)=>{if(b.indexOf(w)!==-1)return;const E=m.get(w);if(!E)return;const T=g.indexOf(w);let k=x;if(!k){const P=()=>{h.delete(w);const R=Array.from(m.keys()).filter(L=>!b.includes(L));if(R.forEach(L=>m.delete(L)),f.current=c.filter(L=>{const O=oc(L);return O===w||R.includes(O)}),!h.size){if(l.current===!1)return;a(),r&&r()}};k=_.createElement(YA,{key:oc(E),isPresent:!1,onExitComplete:P,custom:e,presenceAffectsLayout:s,mode:o},E),h.set(w,k)}d.splice(T,0,k)}),d=d.map(x=>{const w=x.key;return h.has(w)?x:_.createElement(YA,{key:oc(x),isPresent:!0,presenceAffectsLayout:s,mode:o},x)}),_.createElement(_.Fragment,null,h.size?d:d.map(x=>_.cloneElement(x)))},IG=tO("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Te=_.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...i},s)=>{const o=r?TU:"button";return p.jsx(o,{className:hs(IG({variant:e,size:t,className:n})),ref:s,...i})});Te.displayName="Button";const DG="modulepreload",OG=function(n){return"/"+n},oj={},ua=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=OG(s),s in oj)return;oj[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const h=i[d];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":DG,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},FG=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ua(()=>Promise.resolve().then(()=>pv),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class mP extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class aj extends mP{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class lj extends mP{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class cj extends mP{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qE;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(qE||(qE={}));var BG=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class zG{constructor(e,{headers:t={},customFetch:r,region:i=qE.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=FG(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return BG(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o,signal:a}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let h;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(l["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(l["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:h,signal:a}).catch(b=>{throw b.name==="AbortError"?b:new aj(b)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new lj(f);if(!f.ok)throw new cj(f);let y=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield f.json():y==="application/octet-stream"?g=yield f.blob():y==="text/event-stream"?g=f:y==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new aj(i)}:{data:null,error:i,response:i instanceof cj||i instanceof lj?i.context:void 0}}})}}var Ar={},gP={},jS={},fv={},MS={},LS={},$G=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},gp=$G();const UG=gp.fetch,VG=gp.fetch.bind(gp),HG=gp.Headers,qG=gp.Request,GG=gp.Response,pv=Object.freeze(Object.defineProperty({__proto__:null,Headers:HG,Request:qG,Response:GG,default:VG,fetch:UG},Symbol.toStringTag,{value:"Module"})),WG=ez(pv);var IS={};Object.defineProperty(IS,"__esModule",{value:!0});let KG=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};IS.default=KG;var WF=Gn&&Gn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(LS,"__esModule",{value:!0});const XG=WF(WG),YG=WF(IS);let QG=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(r=e.isMaybeSingle)!==null&&r!==void 0?r:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=XG.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l,c;let d=null,h=null,f=null,m=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const x=await s.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=x:h=JSON.parse(x))}const b=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(l=s.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const b=await s.text();try{d=JSON.parse(b),Array.isArray(d)&&s.status===404&&(h=[],d=null,m=200,y="OK")}catch{s.status===404&&b===""?(m=204,y="No Content"):d={message:b}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,y="OK"),d&&this.shouldThrowOnError)throw new YG.default(d)}return{error:d,data:h,count:f,status:m,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};LS.default=QG;var JG=Gn&&Gn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(MS,"__esModule",{value:!0});const ZG=JG(LS);let eW=class extends ZG.default{select(e){let t=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};MS.default=eW;var tW=Gn&&Gn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fv,"__esModule",{value:!0});const nW=tW(MS);let rW=class extends nW.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};fv.default=rW;var iW=Gn&&Gn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(jS,"__esModule",{value:!0});const qp=iW(fv);let sW=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new qp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var i;const s="POST";if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new qp.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new qp.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var r;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new qp.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:e}={}){var t;const r="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new qp.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};jS.default=sW;var KF=Gn&&Gn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(gP,"__esModule",{value:!0});const oW=KF(jS),aW=KF(fv);let lW=class XF{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new oW.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new XF(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var o;let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||i?(a=r?"HEAD":"GET",Object.entries(t).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{l.searchParams.append(h,f)})):(a="POST",c=t);const d=new Headers(this.headers);return s&&d.set("Prefer",`count=${s}`),new aW.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};gP.default=lW;var _p=Gn&&Gn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ar,"__esModule",{value:!0});Ar.PostgrestError=Ar.PostgrestBuilder=Ar.PostgrestTransformBuilder=Ar.PostgrestFilterBuilder=Ar.PostgrestQueryBuilder=Ar.PostgrestClient=void 0;const YF=_p(gP);Ar.PostgrestClient=YF.default;const QF=_p(jS);Ar.PostgrestQueryBuilder=QF.default;const JF=_p(fv);Ar.PostgrestFilterBuilder=JF.default;const ZF=_p(MS);Ar.PostgrestTransformBuilder=ZF.default;const e3=_p(LS);Ar.PostgrestBuilder=e3.default;const t3=_p(IS);Ar.PostgrestError=t3.default;var cW=Ar.default={PostgrestClient:YF.default,PostgrestQueryBuilder:QF.default,PostgrestFilterBuilder:JF.default,PostgrestTransformBuilder:ZF.default,PostgrestBuilder:e3.default,PostgrestError:t3.default};const{PostgrestClient:uW,PostgrestQueryBuilder:Lte,PostgrestFilterBuilder:Ite,PostgrestTransformBuilder:Dte,PostgrestBuilder:Ote,PostgrestError:Fte}=cW;class dW{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const r=t.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const hW="2.15.6",fW=`realtime-js/${hW}`,pW="1.0.0",GE=1e4,mW=1e3,gW=100;var Vm;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Vm||(Vm={}));var tn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(tn||(tn={}));var os;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(os||(os={}));var WE;(function(n){n.websocket="websocket"})(WE||(WE={}));var uc;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(uc||(uc={}));class yW{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class n3{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ut;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ut||(ut={}));const uj=(n,e,t={})=>{var r;const i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=vW(o,n,e,i),s),{}):{}},vW=(n,e,t,r)=>{const i=e.find(a=>a.name===n),s=i==null?void 0:i.type,o=t[n];return s&&!r.includes(s)?r3(s,o):KE(o)},r3=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return SW(e,t)}switch(n){case ut.bool:return xW(e);case ut.float4:case ut.float8:case ut.int2:case ut.int4:case ut.int8:case ut.numeric:case ut.oid:return bW(e);case ut.json:case ut.jsonb:return wW(e);case ut.timestamp:return AW(e);case ut.abstime:case ut.date:case ut.daterange:case ut.int4range:case ut.int8range:case ut.money:case ut.reltime:case ut.text:case ut.time:case ut.timestamptz:case ut.timetz:case ut.tsrange:case ut.tstzrange:return KE(e);default:return KE(e)}},KE=n=>n,xW=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},bW=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},wW=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},SW=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>r3(e,a))}return n},AW=n=>typeof n=="string"?n.replace(" ","T"):n,i3=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class QA{constructor(e,t,r={},i=GE){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dj;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(dj||(dj={}));class Hm{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Hm.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Hm.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Hm.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const h=s[c];if(h){const f=d.map(b=>b.presence_ref),m=h.map(b=>b.presence_ref),y=d.filter(b=>m.indexOf(b.presence_ref)<0),g=h.filter(b=>f.indexOf(b.presence_ref)<0);y.length>0&&(a[c]=y),g.length>0&&(l[c]=g)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,t,r,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hj;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(hj||(hj={}));var qm;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(qm||(qm={}));var so;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(so||(so={}));class yP{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new QA(this,os.join,this.params,this.timeout),this.rejoinTimer=new n3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(os.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Hm(this),this.broadcastEndpointURL=i3(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[qm.PRESENCE]&&this.bindings[qm.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(so.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(so.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(so.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,b=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let x=0;x<b;x++){const w=g[x],{filter:{event:E,schema:T,table:k,filter:P}}=w,R=m&&m[x];if(R&&R.event===E&&R.schema===T&&R.table===k&&R.filter===P)v.push(Object.assign(Object.assign({},w),{id:R.id}));else{this.unsubscribe(),this.state=tn.errored,e==null||e(so.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(so.SUBSCRIBED);return}}).receive("error",m=>{this.state=tn.errored,e==null||e(so.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(so.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===tn.joined&&e===qm.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tn.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(os.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new QA(this,os.leave,{},e),r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tn.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new QA(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>gW){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=os;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let f=this._onMessage(o,t,r);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var y,g,b;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((b=(g=m.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(m=>m.callback(f,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var y,g,b,v,x,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,T=(y=m.filter)===null||y===void 0?void 0:y.event;return E&&((g=t.ids)===null||g===void 0?void 0:g.includes(E))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((b=t.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const E=(x=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return E==="*"||E===((w=t==null?void 0:t.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:g,table:b,commit_timestamp:v,type:x,errors:w}=y;f=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:v,eventType:x,new:{},old:{},errors:w}),this._getPayloadRecords(y))}m.callback(f,r)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&yP.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(os.close,{},e)}_onError(e){this._on(os.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=uj(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=uj(e.columns,e.old_record)),t}}const JA=()=>{},Zv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},_W=[1e3,2e3,5e3,1e4],EW=1e4,kW=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class CW{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=GE,this.transport=null,this.heartbeatIntervalMs=Zv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=JA,this.ref=0,this.reconnectTimer=null,this.logger=JA,this.conn=null,this.sendBuffer=[],this.serializer=new yW,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>ua(()=>Promise.resolve().then(()=>pv),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=t==null?void 0:t.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${WE.websocket}`,this.httpEndpoint=i3(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=dW.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:pW}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Vm.connecting:return uc.Connecting;case Vm.open:return uc.Open;case Vm.closing:return uc.Closing;default:return uc.Closed}}isConnected(){return this.connectionState()===uc.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new yP(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(mW,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Zv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=t,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(os.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([kW],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const i={access_token:t,version:fW};t&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(os.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new n3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,o,a,l,c,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:GE,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Zv.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:JA,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>_W[h-1]||EW,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class vP extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function on(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class TW extends vP{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class XE extends vP{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var PW=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const s3=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>ua(()=>Promise.resolve().then(()=>pv),void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},NW=()=>PW(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ua(()=>Promise.resolve().then(()=>pv),void 0)).Response:Response}),YE=n=>{if(Array.isArray(n))return n.map(t=>YE(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=YE(r)}),e},RW=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var dd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const ZA=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),jW=(n,e,t)=>dd(void 0,void 0,void 0,function*(){const r=yield NW();n instanceof r&&!(t!=null&&t.noResolveJson)?n.json().then(i=>{const s=n.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new TW(ZA(i),s,o))}).catch(i=>{e(new XE(ZA(i),i))}):e(new XE(ZA(n),n))}),MW=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!r?i:(RW(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function mv(n,e,t,r,i,s){return dd(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,MW(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>jW(l,a,r))})})}function Qb(n,e,t,r){return dd(this,void 0,void 0,function*(){return mv(n,"GET",e,t,r)})}function xs(n,e,t,r,i){return dd(this,void 0,void 0,function*(){return mv(n,"POST",e,r,i,t)})}function QE(n,e,t,r,i){return dd(this,void 0,void 0,function*(){return mv(n,"PUT",e,r,i,t)})}function LW(n,e,t,r){return dd(this,void 0,void 0,function*(){return mv(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function o3(n,e,t,r,i){return dd(this,void 0,void 0,function*(){return mv(n,"DELETE",e,r,i,t)})}var Xn=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const IW={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class DW{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=s3(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return Xn(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},fj),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),h=yield(e=="PUT"?QE:xs)(this.fetch,`${this.url}/object/${d}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(on(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Xn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:fj.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield QE(this.fetch,a.toString(),l,{headers:d});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(on(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Xn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);t!=null&&t.upsert&&(i["x-upsert"]="true");const s=yield xs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new vP("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}})}update(e,t,r){return Xn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Xn(this,void 0,void 0,function*(){try{return{data:yield xs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(on(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Xn(this,void 0,void 0,function*(){try{return{data:{path:(yield xs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(on(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Xn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield xs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(on(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Xn(this,void 0,void 0,function*(){try{const i=yield xs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(on(i))return{data:null,error:i};throw i}})}download(e,t){return Xn(this,void 0,void 0,function*(){const i=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Qb(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(on(a))return{data:null,error:a};throw a}})}info(e){return Xn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Qb(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:YE(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}})}exists(e){return Xn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield LW(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(on(r)&&r instanceof XE){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),i=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Xn(this,void 0,void 0,function*(){try{return{data:yield o3(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(on(t))return{data:null,error:t};throw t}})}list(e,t,r){return Xn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},IW),t),{prefix:e||""});return{data:yield xs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(on(i))return{data:null,error:i};throw i}})}listV2(e,t){return Xn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield xs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const OW="2.12.1",FW={"X-Client-Info":`storage-js/${OW}`};var yd=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};class BW{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href,this.headers=Object.assign(Object.assign({},FW),t),this.fetch=s3(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return yd(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(on(e))return{data:null,error:e};throw e}})}getBucket(e){return yd(this,void 0,void 0,function*(){try{return{data:yield Qb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(on(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return yd(this,void 0,void 0,function*(){try{return{data:yield xs(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return yd(this,void 0,void 0,function*(){try{return{data:yield QE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(on(r))return{data:null,error:r};throw r}})}emptyBucket(e){return yd(this,void 0,void 0,function*(){try{return{data:yield xs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(on(t))return{data:null,error:t};throw t}})}deleteBucket(e){return yd(this,void 0,void 0,function*(){try{return{data:yield o3(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(on(t))return{data:null,error:t};throw t}})}}class zW extends BW{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new DW(this.url,this.headers,e,this.fetch)}}const $W="2.30.0",UW={"X-Client-Info":`supabase-js/${$W}`};var JE={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Gn<"u"&&Gn,r=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Gn<"u"&&Gn||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(M){return M&&DataView.prototype.isPrototypeOf(M)}if(l.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(M){return M&&d.indexOf(Object.prototype.toString.call(M))>-1};function f(M){if(typeof M!="string"&&(M=String(M)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(M)||M==="")throw new TypeError('Invalid character in header field name: "'+M+'"');return M.toLowerCase()}function m(M){return typeof M!="string"&&(M=String(M)),M}function y(M){var D={next:function(){var z=M.shift();return{done:z===void 0,value:z}}};return l.iterable&&(D[Symbol.iterator]=function(){return D}),D}function g(M){this.map={},M instanceof g?M.forEach(function(D,z){this.append(z,D)},this):Array.isArray(M)?M.forEach(function(D){if(D.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+D.length);this.append(D[0],D[1])},this):M&&Object.getOwnPropertyNames(M).forEach(function(D){this.append(D,M[D])},this)}g.prototype.append=function(M,D){M=f(M),D=m(D);var z=this.map[M];this.map[M]=z?z+", "+D:D},g.prototype.delete=function(M){delete this.map[f(M)]},g.prototype.get=function(M){return M=f(M),this.has(M)?this.map[M]:null},g.prototype.has=function(M){return this.map.hasOwnProperty(f(M))},g.prototype.set=function(M,D){this.map[f(M)]=m(D)},g.prototype.forEach=function(M,D){for(var z in this.map)this.map.hasOwnProperty(z)&&M.call(D,this.map[z],z,this)},g.prototype.keys=function(){var M=[];return this.forEach(function(D,z){M.push(z)}),y(M)},g.prototype.values=function(){var M=[];return this.forEach(function(D){M.push(D)}),y(M)},g.prototype.entries=function(){var M=[];return this.forEach(function(D,z){M.push([z,D])}),y(M)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function b(M){if(!M._noBody){if(M.bodyUsed)return Promise.reject(new TypeError("Already read"));M.bodyUsed=!0}}function v(M){return new Promise(function(D,z){M.onload=function(){D(M.result)},M.onerror=function(){z(M.error)}})}function x(M){var D=new FileReader,z=v(D);return D.readAsArrayBuffer(M),z}function w(M){var D=new FileReader,z=v(D),$=/charset=([A-Za-z0-9_-]+)/.exec(M.type),V=$?$[1]:"utf-8";return D.readAsText(M,V),z}function E(M){for(var D=new Uint8Array(M),z=new Array(D.length),$=0;$<D.length;$++)z[$]=String.fromCharCode(D[$]);return z.join("")}function T(M){if(M.slice)return M.slice(0);var D=new Uint8Array(M.byteLength);return D.set(new Uint8Array(M)),D.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(M){this.bodyUsed=this.bodyUsed,this._bodyInit=M,M?typeof M=="string"?this._bodyText=M:l.blob&&Blob.prototype.isPrototypeOf(M)?this._bodyBlob=M:l.formData&&FormData.prototype.isPrototypeOf(M)?this._bodyFormData=M:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)?this._bodyText=M.toString():l.arrayBuffer&&l.blob&&c(M)?(this._bodyArrayBuffer=T(M.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(M)||h(M))?this._bodyArrayBuffer=T(M):this._bodyText=M=Object.prototype.toString.call(M):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof M=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var M=b(this);if(M)return M;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var M=b(this);return M||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(x);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var M=b(this);if(M)return M;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(M){var D=M.toUpperCase();return P.indexOf(D)>-1?D:M}function L(M,D){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');D=D||{};var z=D.body;if(M instanceof L){if(M.bodyUsed)throw new TypeError("Already read");this.url=M.url,this.credentials=M.credentials,D.headers||(this.headers=new g(M.headers)),this.method=M.method,this.mode=M.mode,this.signal=M.signal,!z&&M._bodyInit!=null&&(z=M._bodyInit,M.bodyUsed=!0)}else this.url=String(M);if(this.credentials=D.credentials||this.credentials||"same-origin",(D.headers||!this.headers)&&(this.headers=new g(D.headers)),this.method=R(D.method||this.method||"GET"),this.mode=D.mode||this.mode||null,this.signal=D.signal||this.signal||function(){if("AbortController"in a){var N=new AbortController;return N.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&z)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(z),(this.method==="GET"||this.method==="HEAD")&&(D.cache==="no-store"||D.cache==="no-cache")){var $=/([?&])_=[^&]*/;if($.test(this.url))this.url=this.url.replace($,"$1_="+new Date().getTime());else{var V=/\?/;this.url+=(V.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})};function O(M){var D=new FormData;return M.trim().split("&").forEach(function(z){if(z){var $=z.split("="),V=$.shift().replace(/\+/g," "),N=$.join("=").replace(/\+/g," ");D.append(decodeURIComponent(V),decodeURIComponent(N))}}),D}function F(M){var D=new g,z=M.replace(/\r?\n[\t ]+/g," ");return z.split("\r").map(function($){return $.indexOf(`
`)===0?$.substr(1,$.length):$}).forEach(function($){var V=$.split(":"),N=V.shift().trim();if(N){var W=V.join(":").trim();try{D.append(N,W)}catch(G){console.warn("Response "+G.message)}}}),D}k.call(L.prototype);function I(M,D){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(D||(D={}),this.type="default",this.status=D.status===void 0?200:D.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=D.statusText===void 0?"":""+D.statusText,this.headers=new g(D.headers),this.url=D.url||"",this._initBody(M)}k.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},I.error=function(){var M=new I(null,{status:200,statusText:""});return M.ok=!1,M.status=0,M.type="error",M};var U=[301,302,303,307,308];I.redirect=function(M,D){if(U.indexOf(D)===-1)throw new RangeError("Invalid status code");return new I(null,{status:D,headers:{location:M}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(D,z){this.message=D,this.name=z;var $=Error(D);this.stack=$.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function B(M,D){return new Promise(function(z,$){var V=new L(M,D);if(V.signal&&V.signal.aborted)return $(new o.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function W(){N.abort()}N.onload=function(){var ee={statusText:N.statusText,headers:F(N.getAllResponseHeaders()||"")};V.url.indexOf("file://")===0&&(N.status<200||N.status>599)?ee.status=200:ee.status=N.status,ee.url="responseURL"in N?N.responseURL:ee.headers.get("X-Request-URL");var ye="response"in N?N.response:N.responseText;setTimeout(function(){z(new I(ye,ee))},0)},N.onerror=function(){setTimeout(function(){$(new TypeError("Network request failed"))},0)},N.ontimeout=function(){setTimeout(function(){$(new TypeError("Network request timed out"))},0)},N.onabort=function(){setTimeout(function(){$(new o.DOMException("Aborted","AbortError"))},0)};function G(ee){try{return ee===""&&a.location.href?a.location.href:ee}catch{return ee}}if(N.open(V.method,G(V.url),!0),V.credentials==="include"?N.withCredentials=!0:V.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&(l.blob?N.responseType="blob":l.arrayBuffer&&(N.responseType="arraybuffer")),D&&typeof D.headers=="object"&&!(D.headers instanceof g||a.Headers&&D.headers instanceof a.Headers)){var j=[];Object.getOwnPropertyNames(D.headers).forEach(function(ee){j.push(f(ee)),N.setRequestHeader(ee,m(D.headers[ee]))}),V.headers.forEach(function(ee,ye){j.indexOf(ye)===-1&&N.setRequestHeader(ye,ee)})}else V.headers.forEach(function(ee,ye){N.setRequestHeader(ye,ee)});V.signal&&(V.signal.addEventListener("abort",W),N.onreadystatechange=function(){N.readyState===4&&V.signal.removeEventListener("abort",W)}),N.send(typeof V._bodyInit>"u"?null:V._bodyInit)})}return B.polyfill=!0,a.fetch||(a.fetch=B,a.Headers=g,a.Request=L,a.Response=I),o.Headers=g,o.Request=L,o.Response=I,o.fetch=B,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=t.fetch?t:r;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,n.exports=e})(JE,JE.exports);var xP=JE.exports;const a3=la(xP),VW=fL({__proto__:null,default:a3},[xP]);var HW=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const qW=n=>{let e;return n?e=n:typeof fetch>"u"?e=a3:e=fetch,(...t)=>e(...t)},GW=()=>typeof Headers>"u"?xP.Headers:Headers,WW=(n,e,t)=>{const r=qW(t),i=GW();return(s,o)=>HW(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};function KW(n){return n.replace(/\/$/,"")}function XW(n,e){const{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:l,global:c}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s)}}function YW(n){return Math.round(Date.now()/1e3)+n}function QW(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const eo=()=>typeof document<"u",Ql={tested:!1,writable:!1},Dx=()=>{if(!eo())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ql.tested)return Ql.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ql.tested=!0,Ql.writable=!0}catch{Ql.tested=!0,Ql.writable=!1}return Ql.writable};function ur(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),i=r.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const l3=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await ua(()=>Promise.resolve().then(()=>VW),void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},JW=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Gp=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},ex=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},e_=async(n,e)=>{await n.removeItem(e)};function ZW(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",r,i,s,o,a,l,c,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=e.indexOf(n.charAt(d++)),a=e.indexOf(n.charAt(d++)),l=e.indexOf(n.charAt(d++)),c=e.indexOf(n.charAt(d++)),r=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,t=t+String.fromCharCode(r),l!=64&&i!=0&&(t=t+String.fromCharCode(i)),c!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class DS{constructor(){this.promise=new DS.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}DS.promiseConstructor=Promise;function pj(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(ZW(r))}function e9(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function t9(n,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function n9(n){return("0"+n.toString(16)).substr(-2)}function tx(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,n9).join("")}async function r9(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}function i9(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nx(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await r9(n);return i9(e)}const s9="__stack_guard__",o9="__",a9=/__stack_guard__([a-zA-Z0-9_-]+)__/;let mj=!1,bP;function ZE(n){var e,t;bP();let r;try{throw new Error}catch(s){r=s}const i=(t=(e=r.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let s=0;s<i.length;s+=1){const a=i[s].match(a9);if(a&&a[1]===n)return!0}return!1}async function ek(n,e){await bP();const t=`${s9}${n}${o9}`;return await{[t]:async()=>await e()}[t]()}bP=async()=>{mj||(mj=!0,await ek("ENV_CHECK",async()=>{const n=ZE("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class wP extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function qe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class l9 extends wP{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function c9(n){return qe(n)&&n.name==="AuthApiError"}class c3 extends wP{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Ep extends wP{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class vd extends Ep{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class t_ extends Ep{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class rx extends Ep{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Zs extends Ep{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class n_ extends Ep{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class tk extends Ep{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function gj(n){return qe(n)&&n.name==="AuthRetryableFetchError"}var u9=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};const am=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),d9=[502,503,504];async function yj(n){if(!JW(n))throw new tk(am(n),0);if(d9.includes(n.status))throw new tk(am(n),n.status);let e;try{e=await n.json()}catch(t){throw new c3(am(t),t)}throw new l9(am(e),n.status||500)}const h9=(n,e,t,r)=>{const i={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};async function Ke(n,e,t,r){var i;const s=Object.assign({},r==null?void 0:r.headers);r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await f9(n,e,t+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function f9(n,e,t,r,i,s){const o=h9(e,r,i,s);let a;try{a=await n(t,o)}catch(l){throw console.error(l),new tk(am(l),0)}if(a.ok||await yj(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await yj(l)}}function ga(n){var e;let t=null;y9(n)&&(t=Object.assign({},n),t.expires_at=YW(n.expires_in));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function dc(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function p9(n){return{data:n,error:null}}function m9(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=u9(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function g9(n){return n}function y9(n){return n.access_token&&n.refresh_token&&n.expires_in}var v9=globalThis&&globalThis.__rest||function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t};class x9{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=l3(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await Ke(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(qe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await Ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:dc})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=v9(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:m9,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(qe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Ke(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:dc})}catch(t){if(qe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:g9});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(y.split(";")[1].split("=")[1]);c[`${b}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(qe(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await Ke(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:dc})}catch(t){if(qe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Ke(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:dc})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){try{return await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:dc})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Ke(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(qe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Ke(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(qe(t))return{data:null,error:t};throw t}}}const b9="2.43.1",w9="http://localhost:9999",S9="supabase.auth.token",A9={"X-Client-Info":`gotrue-js/${b9}`},vj=10,xj={getItem:n=>Dx()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Dx()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Dx()&&globalThis.localStorage.removeItem(n)}};function _9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}_9();const E9={url:w9,storageKey:S9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:A9,flowType:"implicit",debug:!1},ix=30*1e3,bj=3;class gg{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=gg.nextInstanceID,gg.nextInstanceID+=1,this.instanceID>0&&eo()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},E9),e);if(this.logDebugMessages=r.debug,this.inMemorySession=null,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.persistSession=r.persistSession,this.storage=r.storage||xj,this.admin=new x9({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=l3(r.fetch),this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===xj&&!Dx()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),eo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=ek("_initialize",async()=>{try{const e=eo()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:r}=await this._getSessionFromUrl(e);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:i,redirectType:s}=t;return this._debug("#_initialize()","detected session in URL",i,"redirect type",s),await this._saveSession(i),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return qe(e)?{error:e}:{error:new c3("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,r,i;try{await this._removeSession();let s;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,y=null;if(this.flowType==="pkce"){const g=tx();await Gp(this.storage,`${this.storageKey}-code-verifier`,g),m=await nx(g),y=g===m?"plain":"s256"}s=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:ga})}else if("phone"in e){const{phone:d,password:h,options:f}=e;s=await Ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},channel:(i=f==null?void 0:f.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ga})}else throw new rx("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(qe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ga})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:ga})}else throw new rx("You must provide either an email or phone number and a password");const{data:r,error:i}=t;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new t_}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:{user:r.user,session:r.session},error:i})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,i,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await ex(this.storage,`${this.storageKey}-code-verifier`),{data:r,error:i}=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:ga});return await e_(this.storage,`${this.storageKey}-code-verifier`),i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new t_}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:r,error:i})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:r,token:i,access_token:s,nonce:o}=e,a=await Ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ga}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new t_}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,i,s,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:l}=e;let c=null,d=null;if(this.flowType==="pkce"){const f=tx();await Gp(this.storage,`${this.storageKey}-code-verifier`,f),c=await nx(f),d=f===c?"plain":"s256"}const{error:h}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await Ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new rx("You must provide either an email or phone number.")}catch(a){if(qe(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:i,error:s}=await Ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,xform:ga});if(s)throw s;if(!i)throw new Error("An error occurred on token verification.");const o=i.session,a=i.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(qe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,r,i;try{return await this._removeSession(),await Ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:p9})}catch(s){if(qe(s))return{data:null,error:s};throw s}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new vd;const{error:i}=await Ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(qe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ke(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Ke(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new rx("You must provide either an email or phone number and a type")}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await ek("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!ZE("_useSession"))throw new Error("Please use #_useSession()");ZE("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const s=await ex(this.storage,this.storageKey);this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var r,i;if(!e){const{data:s,error:o}=t;if(o)throw o;e=(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0}return await Ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:dc})})}catch(t){if(qe(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new vd;const o=i.session,{data:a,error:l}=await Ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:o.access_token,xform:dc});if(l)throw l;return o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(qe(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return pj(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new vd;const t=Date.now()/1e3;let r=t,i=!0,s=null;const o=pj(e.access_token);if(o.exp&&(r=o.exp,i=r<=t),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this.getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(qe(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new vd;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(qe(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!eo())throw new Zs("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Zs("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new n_("Not a valid PKCE flow url.");if(e){const b=ur("code");if(!b)throw new n_("No code detected.");const{data:v,error:x}=await this.exchangeCodeForSession(b);if(x)throw x;if(!v.session)throw new n_("No session detected.");let w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:v.session,redirectType:null},error:null}}const t=ur("error_description");if(t){const b=ur("error_code");if(!b)throw new Zs("No error_code detected.");const v=ur("error");throw v?new Zs(t,{error:v,code:b}):new Zs("No error detected.")}const r=ur("provider_token"),i=ur("provider_refresh_token"),s=ur("access_token");if(!s)throw new Zs("No access_token detected.");const o=ur("expires_in");if(!o)throw new Zs("No expires_in detected.");const a=ur("refresh_token");if(!a)throw new Zs("No refresh_token detected.");const l=ur("token_type");if(!l)throw new Zs("No token_type detected.");const d=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:f}=await this.getUser(s);if(f)throw f;const m=h.user,y={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:parseInt(o),expires_at:d,refresh_token:a,token_type:l,user:m},g=ur("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:y,redirectType:g},error:null}}catch(t){if(qe(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return eo()&&(!!ur("access_token")||!!ur("error_description"))}async _isPKCEFlow(){const e=await ex(this.storage,`${this.storageKey}-code-verifier`);return!!ur("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(c9(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await e_(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=QW(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),this._emitInitialSession(t),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{const{data:{session:s},error:o}=t;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;if(this.flowType==="pkce"){const s=tx();await Gp(this.storage,`${this.storageKey}-code-verifier`,s),r=await nx(s),i=s===r?"plain":"s256"}try{return await Ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(qe(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await t9(async i=>(await e9(i*200),this._debug(t,"refreshing attempt",i),await Ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ga})),(i,s,o)=>o&&o.error&&gj(o.error)&&Date.now()+(i+1)*200-r<ix)}catch(r){if(this._debug(t,"error",r),qe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),eo()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await ex(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r)){this._debug(t,"session is not valid"),r!==null&&await this._removeSession();return}const i=Math.round(Date.now()/1e3),s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)<i+vj;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${vj}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:o}=await this._callRefreshToken(r.refresh_token);o&&(console.error(o),gj(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(t,"error",r),console.error(r);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new vd;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new DS;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new vd;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),qe(s)){const o={session:null,error:s};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Gp(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await e_(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&eo()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ix);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/ix);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ix}ms, refresh threshold is ${bj} ticks`),i<=bj&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!eo()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const i=tx();await Gp(this.storage,`${this.storageKey}-code-verifier`,i);const s=await nx(i),o=i===s?"plain":"s256";this._debug("PKCE","code verifier",`${i.substring(0,5)}...`,"code challenge",s,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);r.push(i.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Ke(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(qe(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;const{data:s,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:l}=await Ke(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(!((i=a==null?void 0:a.totp)===null||i===void 0)&&i.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(qe(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await Ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(qe(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var r;const{data:i,error:s}=t;return s?{data:null,error:s}:await Ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(qe(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(e==null?void 0:e.factors)||[],i=r.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:r,totp:i},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}})}}gg.nextInstanceID=0;class k9 extends gg{constructor(e){super(e)}}var C9=globalThis&&globalThis.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(h){o(h)}}function l(d){try{c(r.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(n,e||[])).next())})};const T9={headers:UW},P9={schema:"public"},N9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},R9={};class j9{constructor(e,t,r){var i,s,o,a,l,c,d,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=KW(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:P9,realtime:R9,auth:Object.assign(Object.assign({},N9),{storageKey:m}),global:T9},g=XW(r??{},y);this.storageKey=(s=(i=g.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((l=g.auth)!==null&&l!==void 0?l:{},this.headers,(c=g.global)===null||c===void 0?void 0:c.fetch),this.fetch=WW(t,this._getAccessToken.bind(this),(d=g.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new uW(`${f}/rest/v1`,{headers:this.headers,schema:(h=g.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new zG(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new zW(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return C9(this,void 0,void 0,function*(){const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,debug:a},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new k9({url:this.authUrl,headers:Object.assign(Object.assign({},d),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,debug:a,fetch:c})}_initRealtimeClient(e){return new CW(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.realtime.setAuth(r??null),this.changedAccessToken=r):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const M9=(n,e,t)=>new j9(n,e,t),Jl=new Map,wj={type:"memory",getItem:n=>Jl.has(n)?Jl.get(n):null,setItem:(n,e)=>{Jl.set(n,e)},removeItem:n=>{Jl.delete(n)},clear:()=>Jl.clear(),key:n=>Array.from(Jl.keys())[n]??null,get length(){return Jl.size}},Sj={type:"cookie",getItem:n=>{if(typeof document>"u")return null;const e=document.cookie.match(new RegExp(`(?:^|; )${n}=([^;]*)`));return e?decodeURIComponent(e[1]):null},setItem:(n,e)=>{if(typeof document>"u")return;const t=encodeURIComponent(e);document.cookie=`${n}=${t}; path=/; SameSite=Lax`},removeItem:n=>{typeof document>"u"||(document.cookie=`${n}=; path=/; max-age=0; SameSite=Lax`)},clear:()=>{if(typeof document>"u")return;document.cookie.split(";").forEach(e=>{const[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; max-age=0; SameSite=Lax`})},key:()=>null,get length(){return typeof document>"u"||!document.cookie?0:document.cookie.split(";").length}},Aj=n=>{if(!n)return null;try{const e=`safe-storage-probe-${Math.random().toString(36).slice(2)}`;n.setItem(e,"ok");const t=n.getItem(e)==="ok";return n.removeItem(e),t?n:null}catch{return null}},L9=()=>{if(typeof window>"u")return{storage:wj,type:"memory"};const n=[{type:"local",ref:window.localStorage},{type:"session",ref:window.sessionStorage}];for(const t of n){const r=Aj(t.ref);if(r)return{storage:r,type:t.type}}return Aj(Sj)?{storage:Sj,type:"cookie"}:{storage:wj,type:"memory"}},u3=L9(),OS=u3.storage,I9=u3.type,SP=n=>{try{return OS.getItem(n)}catch{return null}},yg=(n,e)=>{try{return OS.setItem(n,e),!0}catch{return!1}},d3=n=>{try{OS.removeItem(n)}catch{}},D9="https://ytubybkoucltwnselbhc.supabase.co",O9="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo",pt=M9(D9,O9,{auth:{storage:OS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),h3=_.createContext(void 0),F9=({children:n})=>{const{toast:e}=GT(),[t,r]=_.useState(null),[i,s]=_.useState(null),[o,a]=_.useState(!0),l=_.useCallback(async m=>{s(m),r((m==null?void 0:m.user)??null),a(!1)},[]);_.useEffect(()=>{if(typeof window>"u")return;let m=!1;return(async()=>{const g=new URL(window.location.href),b=new URLSearchParams(window.location.hash.replace(/^#/,"")),v=g.searchParams.get("code"),x=b.get("access_token"),w=b.get("refresh_token"),E=g.searchParams.get("error_description"),T=window.location.hash.includes("access_token")||window.location.hash.includes("refresh_token"),k=`${g.origin}${g.pathname}${T?"":g.hash}`,P=()=>{window.history.replaceState({},document.title,k)};if(E){e({variant:"destructive",title:"No pudimos iniciar sesin",description:E||"El enlace no es vlido. Intenta abrirlo en el navegador nativo."}),P();return}if(v){const{data:R,error:L}=await pt.auth.exchangeCodeForSession(v);m||(L?e({variant:"destructive",title:"No pudimos completar el login",description:L.message||"Intenta abrir el enlace en el navegador por defecto."}):l(R.session),P());return}if(x&&w){const{data:R,error:L}=await pt.auth.setSession({access_token:x,refresh_token:w});m||(L?e({variant:"destructive",title:"No pudimos completar el login",description:L.message||"Intenta abrir el enlace en el navegador por defecto."}):l(R.session),P())}})(),()=>{m=!0}},[l,e]),_.useEffect(()=>{(async()=>{const{data:{session:g}}=await pt.auth.getSession();l(g)})();const{data:{subscription:y}}=pt.auth.onAuthStateChange(async(g,b)=>{l(b)});return()=>y.unsubscribe()},[l]);const c=_.useCallback(async(m,y,g)=>{const{error:b}=await pt.auth.signUp({email:m,password:y,options:g});return b&&e({variant:"destructive",title:"Sign up Failed",description:b.message||"Something went wrong"}),{error:b}},[e]),d=_.useCallback(async(m,y)=>{const{error:g}=await pt.auth.signInWithPassword({email:m,password:y});return g&&e({variant:"destructive",title:"Sign in Failed",description:g.message||"Something went wrong"}),{error:g}},[e]),h=_.useCallback(async()=>{const{error:m}=await pt.auth.signOut();return m&&e({variant:"destructive",title:"Sign out Failed",description:m.message||"Something went wrong"}),{error:m}},[e]),f=_.useMemo(()=>({user:t,session:i,loading:o,signUp:c,signIn:d,signOut:h}),[t,i,o,c,d,h]);return _.useEffect(()=>{typeof window>"u"||i&&SP("gatoencerrado:resume-contribution")==="true"&&(window.dispatchEvent(new CustomEvent("gatoencerrado:resume-contribution")),d3("gatoencerrado:resume-contribution"))},[i]),p.jsx(h3.Provider,{value:f,children:n})},gv=()=>{const n=_.useContext(h3);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},_j={hidden:{opacity:0},visible:{opacity:1}},B9={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1}},AP=({onClose:n})=>{const[e,t]=_.useState(""),[r,i]=_.useState(!1),[s,o]=_.useState(null),a=I9==="memory",l=_.useMemo(()=>{if(typeof window>"u")return;const{origin:h,pathname:f,hash:m}=window.location,y=m&&!m.includes("access_token")?m:"";return`${h}${f}${y}`},[]),c=_.useCallback(async h=>{if(h.preventDefault(),r)return;if(a){o({type:"error",text:"Tu navegador mvil est bloqueando almacenamiento. brelo en el navegador por defecto o desactiva el modo privado para iniciar sesin."});return}const f=e.trim();if(!f){o({type:"error",text:"Ingresa tu correo para enviarte el enlace mgico."});return}i(!0),o(null),yg("gatoencerrado:resume-contribution","true");const{error:m}=await pt.auth.signInWithOtp({email:f,options:{emailRedirectTo:l}});m?o({type:"error",text:m.message||"No pudimos enviar el enlace."}):(o({type:"success",text:"Te enviamos un link mgico. Revisa tu correo para continuar."}),t("")),i(!1)},[e,r,l,a]),d=_.useCallback(async()=>{if(o(null),a){o({type:"error",text:"No pudimos iniciar sesin porque el navegador bloquea cookies/almacenamiento. Prueba abrir en Safari/Chrome fuera de modo privado."});return}yg("gatoencerrado:resume-contribution","true");const{error:h}=await pt.auth.signInWithOAuth({provider:"google",options:{redirectTo:l}});if(h){o({type:"error",text:h.message||"No pudimos iniciar sesin con Google."});return}n==null||n()},[n,l,a]);return _.useEffect(()=>{const h=f=>{f.key==="Escape"&&(n==null||n())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n]),p.jsxs(ne.div,{className:"fixed inset-0 z-[110] flex items-center justify-center px-4 py-6",initial:"hidden",animate:"visible",exit:"hidden",variants:_j,children:[p.jsx(ne.button,{type:"button",className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n,"aria-label":"Cerrar overlay de autenticacin",variants:_j}),p.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"tracking-overlay-title","aria-describedby":"tracking-overlay-desc",className:"relative z-10 w-full max-w-md transform rounded-3xl border border-white/10 bg-[#0a0019]/90 p-6 shadow-2xl backdrop-blur-xl",initial:"hidden",animate:"visible",exit:"hidden",variants:B9,children:[p.jsx("button",{type:"button",onClick:n,className:"absolute top-3 right-3 rounded-full border border-white/15 px-2 py-1 text-sm text-slate-400 hover:text-slate-100","aria-label":"Cerrar overlay",children:""}),p.jsxs("div",{className:"space-y-4 pt-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500/80",children:"Seguimiento"}),p.jsx("h3",{id:"tracking-overlay-title",className:"font-display text-2xl text-slate-50",children:"Inicia sesin para continuar el dilogo"})]}),p.jsx("p",{id:"tracking-overlay-desc",className:"text-sm text-slate-300 leading-relaxed",children:"Queremos asegurarnos de que puedas retomar tu experiencia justo donde la dejaste. Esto no genera ningn cargo ni suscripcin."}),p.jsx("button",{type:"button",onClick:d,className:"flex w-full items-center justify-center rounded-full border border-white/20 bg-white/10 px-4 py-3 text-sm font-semibold text-white transition hover:border-white/40 hover:bg-white/15",children:"Iniciar sesin con Google"}),a?p.jsx("p",{className:"text-xs text-amber-300",children:"Tu navegador est bloqueando almacenamiento; abre el sitio en Safari/Chrome (fuera de modo privado) para completar el login."}):null,p.jsxs("form",{onSubmit:c,className:"space-y-3",children:[p.jsx("label",{htmlFor:"tracking-email",className:"sr-only",children:"Correo electrnico"}),p.jsx("input",{id:"tracking-email",type:"email",value:e,onChange:h=>t(h.target.value),placeholder:"nombre@correo.com",className:"w-full rounded-2xl border border-white/20 bg-black/30 px-4 py-3 text-sm text-slate-100 placeholder:text-slate-400 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",required:!0}),p.jsx("button",{type:"submit",disabled:r,className:"w-full rounded-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 px-4 py-3 text-sm font-semibold text-white transition hover:from-purple-500 hover:to-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",children:r?"Enviando...":"Enviar Magic Link"})]}),s?p.jsx("p",{className:`text-xs ${s.type==="error"?"text-rose-300":"text-emerald-300"}`,children:s.text}):null,p.jsx("p",{className:"text-xs text-slate-500",children:"Tu experienica no se perder. Continuars donde te quedaste."})]})]})]})},z9=()=>{var w,E;const[n,e]=_.useState(!1),[t,r]=_.useState(!1),[i,s]=_.useState(!1),{user:o,signOut:a}=gv(),{toast:l}=GT(),c=((w=o==null?void 0:o.user_metadata)==null?void 0:w.alias)||((E=o==null?void 0:o.user_metadata)==null?void 0:E.full_name)||(o!=null&&o.email?o.email.split("@")[0]:""),d=c?c.trim().split(/\s+/)[0]:"",h=o?`Hola ${d||"gato"}`:"",f=o?"Cerrar sesin":"Iniciar sesin",m=o?"bg-emerald-400":"bg-slate-600",y=_.useCallback(()=>s(!1),[]),g=_.useCallback(()=>s(!0),[]),b=_.useCallback(async()=>{if(!o){s(!0);return}const{error:T}=await a();l(T?{description:T.message||"No pudimos cerrar sesin. Intenta ms tarde."}:{description:"Sesin cerrada correctamente."})},[a,l,o]);_.useEffect(()=>{const T=()=>{r(window.scrollY>20)};return window.addEventListener("scroll",T),()=>window.removeEventListener("scroll",T)},[]);const v=[{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Miniversos",href:"#transmedia"},{name:"Textos",href:"#dialogo-critico"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}],x=T=>{e(!1);const k=document.querySelector(T);k&&k.scrollIntoView({behavior:"smooth"})};return p.jsxs(ne.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-black/60 backdrop-blur-lg border-b border-slate-100/10":"bg-transparent"}`,children:[p.jsxs("nav",{className:"container mx-auto px-6 py-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(ne.button,{type:"button",whileHover:{scale:1.05,textShadow:"0 0 8px rgba(233, 213, 255, 0.5)"},className:"flex items-center gap-3 cursor-pointer text-white",onClick:()=>x("#hero"),children:[p.jsx("span",{className:"font-display text-2xl font-bold text-gradient",children:"#GatoEncerrado"}),p.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${m}`}),o?p.jsx("span",{className:"text-sm md:text-base font-semibold tracking-tight text-white",children:h}):null]}),p.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[v.map(T=>p.jsx(ne.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>x(T.href),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md",children:T.name},T.name)),p.jsx(ne.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>x("#contact"),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md ml-4 border border-purple-300/30 hover:bg-purple-500/20",children:"Contacto"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Te,{variant:"ghost",size:"icon",className:"md:hidden text-slate-200",onClick:()=>e(!n),children:n?p.jsx(AS,{size:24}):p.jsx(PV,{size:24})}),p.jsx("button",{onClick:o?b:g,className:"hidden md:inline text-sm font-semibold text-slate-100",children:f})]})]}),n&&p.jsxs(ne.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-4 bg-black/80 backdrop-blur-md rounded-lg p-4 border border-slate-100/10",children:[v.map(T=>p.jsx("button",{onClick:()=>x(T.href),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors",children:T.name},T.name)),p.jsx("button",{onClick:()=>x("#contact"),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2 border-t border-slate-100/10",children:"Contacto"}),p.jsx("button",{onClick:o?b:g,className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2",children:f})]})]}),i?p.jsx(AP,{onClose:y}):null]})},Ej=["#f472b6","#a855f7","#facc15","#34d399"],$9=({seed:n})=>{const e=_.useMemo(()=>Array.from({length:12},(t,r)=>({left:Math.random()*100,delay:Math.random()*.2,color:Ej[r%Ej.length]})),[n]);return p.jsx("div",{className:"confetti-layer","aria-hidden":"true",children:e.map((t,r)=>p.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${Math.random()*20}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${r}`))})},U9=()=>{const[n,e]=_.useState([]),t=_.useCallback(()=>{const r=Date.now();e(i=>[...i,r]),setTimeout(()=>{e(i=>i.filter(s=>s!==r))},1100)},[]);return{bursts:n,fireConfetti:t}},V9="/assets/logoapp.png",f3=[{id:"taza-250",title:"Taza AR",price:"$250",helper:"Taza especial con activacin AR. Disponible el da del evento."},{id:"taza-causa-600",title:"Taza con causa",price:"$600",helper:"Incluye membresa anual. Se entrega el 28 de diciembre."},{id:"novela-400",title:"Novela Mi Gato Encerrado",price:"$400",helper:"Primera edicin con QR secreto."},{id:"combo-900",title:"Combo: novela + 2 tazas",price:"$900",helper:"Paquete completo disponible solo el da del evento."}],H9=f3.reduce((n,e)=>(n[e.id]=`${e.title}  ${e.price}`,n),{}),kj={fullName:"",email:"",city:"",notes:"",packages:[]},q9={hidden:{opacity:0},visible:{opacity:.85}},G9={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},_P=({open:n,onClose:e})=>{const[t,r]=_.useState(kj),[i,s]=_.useState("idle"),[o,a]=_.useState(""),{bursts:l,fireConfetti:c}=U9(),[d,h]=_.useState(!1);_.useEffect(()=>{n&&(r(kj),s("idle"),a(""))},[n]),_.useEffect(()=>{if(!n)return;const b=v=>v.key==="Escape"&&(e==null?void 0:e());return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[n,e]);const f=_.useCallback(b=>{const{name:v,value:x}=b.target;r(w=>({...w,[v]:x}))},[]),m=_.useCallback(b=>{r(v=>{const x=v.packages.includes(b);return{...v,packages:x?v.packages.filter(w=>w!==b):[...v.packages,b]}})},[]),y=_.useCallback(async b=>{if(b.preventDefault(),i!=="loading"){if(!t.fullName.trim()||!t.email.trim()){Me({description:"Por favor completa tu nombre y correo electrnico."});return}if(t.packages.length===0){Me({description:"Selecciona al menos un artculo para apartar."});return}s("loading"),h(!0),a("");try{const v=t.packages.map(E=>H9[E]).join(", "),x={full_name:t.fullName.trim(),email:t.email.trim().toLowerCase(),city:t.city.trim()||null,object_type:"merch",event:"funcion-2025-12-28",channel:"landing",notes:`${v} | ${t.notes||""}`.trim()},{error:w}=await pt.from("rsvp_extended").insert(x);if(w){s("error"),a("No pudimos registrar tu solicitud. Intenta nuevamente.");return}await W9({email:x.email,name:x.full_name,city:x.city,notes:x.notes}),c(),s("success"),Me({description:"Apartado recibido! Revisa tu correo con los siguientes pasos."})}catch{s("error"),a("Ocurri un error inesperado. Intenta ms tarde.")}finally{h(!1)}}},[t,i,c]),g=_.useCallback(()=>{i!=="loading"&&(e==null||e())},[i,e]);return p.jsx(Qs,{children:n&&p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-start justify-center px-4 py-6 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ne.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:q9,onClick:g}),p.jsxs(ne.div,{role:"dialog","aria-modal":"true",variants:G9,className:"relative z-10 w-full max-w-3xl rounded-3xl border border-white/10 bg-slate-950/95 p-6 sm:p-10 shadow-2xl max-h-[92vh] overflow-y-auto",children:[l.map(b=>p.jsx($9,{seed:b},b)),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-8",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:V9,alt:"#GatoEncerrado",className:"h-12 w-auto object-contain rounded-full border border-white/20 bg-white/5 p-1 shadow-lg"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"28 de diciembre  CECUT"}),p.jsx("h2",{className:"font-display text-3xl text-slate-50",children:"Aparta tus artculos de #GatoEncerrado"}),p.jsx("p",{className:"text-xs text-slate-400/80 mt-1",children:"Estos productos son edicin especial y se entregan nicamente en la mesa de merch el da del evento."})]})]}),p.jsx("button",{onClick:g,className:"self-end text-slate-400 hover:text-white transition",children:""})]}),p.jsxs("div",{className:"mb-6 rounded-xl border border-yellow-400/20 bg-yellow-400/10 p-4 text-xs text-yellow-200",children:["Este formulario ",p.jsx("strong",{children:"no es para comprar boletos"}),". Aqu solo apartas artculos de merch (taza, novela o combo). Los boletos se adquieren directamente en taquilla CECUT."]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-5",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"font-display text-lg text-slate-100 mb-1",children:"Paquetes disponibles"}),p.jsx("p",{className:"text-xs text-slate-400/80",children:"Marca lo que quieras apartar. Te enviaremos tu lnea de reservaciones y un enlace de pago seguro (Stripe)."})]}),p.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:f3.map(b=>{const v=t.packages.includes(b.id),x={"taza-250":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/tazax1.jpeg","taza-causa-600":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/taza2x1.jpeg","novela-400":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/novelasola.jpeg","combo-900":"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/NovelaTazaCombo.png"};return p.jsxs("label",{className:`relative block rounded-2xl border ${v?"border-purple-400/70 shadow-[0_12px_35px_rgba(126,34,206,0.35)]":"border-white/10"} bg-gradient-to-br from-slate-900/80 to-black/60 p-4 hover:border-purple-400/40 transition`,children:[p.jsx("div",{className:"mb-3 w-full h-32 rounded-xl overflow-hidden border border-white/5",children:p.jsx("img",{src:x[b.id],alt:b.title,className:"w-full h-full object-cover",loading:"lazy"})}),p.jsxs("div",{className:"flex items-start gap-3",children:[p.jsx("input",{type:"checkbox",checked:v,onChange:()=>m(b.id),className:"mt-1 h-4 w-4 rounded border-slate-400 bg-black/40 text-purple-500 focus:ring-purple-400"}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("p",{className:"font-semibold text-slate-100",children:[b.title," ",p.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",b.price]})]}),p.jsx("p",{className:"text-xs text-slate-400",children:b.helper})]})]})]},b.id)})})]}),p.jsxs("form",{className:"space-y-5",onSubmit:y,children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),p.jsx("input",{name:"fullName",type:"text",required:!0,value:t.fullName,onChange:f,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo te llamas?"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),p.jsx("input",{name:"email",type:"email",required:!0,value:t.email,onChange:f,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Ciudad"}),p.jsx("input",{name:"city",type:"text",value:t.city,onChange:f,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Desde dnde nos visitas?"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),p.jsx("textarea",{name:"notes",rows:3,value:t.notes,onChange:f,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Necesitas facilidades especiales o tienes un cdigo de preventa?"})]}),i==="error"&&p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:o}),i==="success"&&p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Listo! Revisa tu correo para completar tu apartado."}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(Te,{type:"submit",disabled:i==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:d?"Enviando":"Apartar mis artculos"}),p.jsx("button",{type:"button",onClick:g,className:"text-sm text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]})]})]})})};async function W9({email:n,name:e,city:t,notes:r}){if(n)try{const{error:i}=await pt.functions.invoke("send-reserve-confirmation",{body:{email:n,name:e,city:t,notes:r}});i&&console.error("[ReserveModal] Error en sendReserveConfirmationEmail:",i)}catch(i){console.error("[ReserveModal] Exception in sendReserveConfirmationEmail:",i)}}const K9="/assets/logoapp.png",X9="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Gato%20Encerrado%20%C2%B7%2028%20de%20diciembre&dates=20241228T210000Z/20241228T223000Z&details=Funci%C3%B3n%20especial%20en%20CEC&location=CECUT",Y9={}.VITE_SMS_NUMBER||"+526623550516",Q9=encodeURIComponent("Hola equipo Gato Encerrado, recurdenme la funcin del 28 de diciembre en CECUT."),J9={hidden:{opacity:0},visible:{opacity:.85}},Z9={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},p3=({open:n,onClose:e})=>{Pe.useEffect(()=>{if(!n)return;const r=i=>i.key==="Escape"&&(e==null?void 0:e());return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[n,e]);const t=r=>{e==null||e(),setTimeout(()=>{var i;return(i=document.querySelector(r))==null?void 0:i.scrollIntoView({behavior:"smooth",block:"start"})},80)};return p.jsx(Qs,{children:n?p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-3 sm:px-6",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ne.div,{className:"absolute inset-0 bg-black/85 backdrop-blur-md",variants:J9,"aria-hidden":"true",onClick:e}),p.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"ticket-modal-title",variants:Z9,className:`
              relative z-10 w-full max-w-lg               /* MOBILE: ideal width */
              rounded-3xl border border-white/10 
              bg-slate-950/95 p-5 sm:p-8 
              shadow-[0_20px_70px_rgba(0,0,0,0.5)]
              overflow-y-auto max-h-[90vh]
            `,children:[p.jsxs("div",{className:"flex items-center justify-between gap-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:K9,alt:"Logotipo Gato Encerrado",className:"h-10 w-10 rounded-xl border border-white/15 bg-black/40 p-1"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] uppercase tracking-[0.3em] text-purple-300/80",children:"28 de diciembre  CECUT"}),p.jsx("h3",{id:"ticket-modal-title",className:"font-display text-xl sm:text-3xl text-slate-50 leading-tight",children:"Funcin nica de Es un Gato Encerrado"})]})]}),p.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition text-lg","aria-label":"Cerrar modal",children:""})]}),p.jsxs("div",{className:"flex flex-col gap-6",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/40 p-5 space-y-6 shadow-[0_15px_50px_rgba(0,0,0,0.4)]",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-lg font-semibold text-slate-100 leading-tight",children:"Compra presencial en taquilla del CECUT"}),p.jsxs("p",{className:"text-sm text-slate-300 leading-relaxed",children:["La preventa est abierta hasta agotar localidades.",p.jsx("br",{}),p.jsx("strong",{className:"text-slate-100/90 block mt-1",children:"La Taza Incentivo solo se entrega durante la preventa y mientras haya stock."}),p.jsx("span",{className:"text-xs text-slate-400/90 block mt-1",children:"El da del evento podra no haber tazas disponibles."})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("img",{src:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/TazaPreventa.jpg",alt:"Taza incentivo de preventa",className:"w-full h-44 object-cover rounded-xl border border-white/10"}),p.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:"Esta pieza activa WebAR y forma parte del Miniverso Taza, donde se cruza con la causa social del proyecto."}),p.jsx("div",{className:"flex flex-col gap-3",children:p.jsx(Te,{variant:"outline",className:"w-full border-purple-300/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>t("#apoya"),children:"Apoya el proyecto"})})]})]}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/35 p-5 space-y-4 shadow-inner",children:[p.jsx("p",{className:"text-[10px] uppercase tracking-[0.32em] text-purple-300/80",children:"No te pierdas la funcin"}),p.jsx("h4",{className:"text-lg font-semibold text-slate-100 leading-tight",children:"Sabemos que los das se pasan volando"}),p.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:"Activa un recordatorio para que el 28 no se te pase:"}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsxs("a",{href:X9,target:"_blank",rel:"noreferrer",className:`
                      block w-full rounded-2xl border border-white/10 bg-slate-900/60 
                      px-4 py-4 text-slate-100 hover:border-purple-400/80 transition
                    `,children:[p.jsx("span",{className:"block text-sm font-semibold",children:"Aadir a mi calendario"}),p.jsx("span",{className:"text-xs text-slate-400",children:"Con fecha, hora y lugar prellenados."})]}),p.jsxs("a",{href:`https://wa.me/${Y9.replace(/\D/g,"")}?text=${Q9}`,target:"_blank",rel:"noreferrer",className:`
                      block w-full rounded-2xl border border-white/10 bg-slate-900/60 
                      px-4 py-4 text-slate-100 hover:border-purple-400/80 transition
                    `,children:[p.jsx("span",{className:"block text-sm font-semibold",children:"Recibir asistencia humana"}),p.jsx("span",{className:"text-xs text-slate-400",children:"Te enviamos un aviso personalizado por WhatsApp/SMS."})]})]})]}),p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/25 p-4 text-sm text-slate-300 space-y-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/80",children:"No te gusta hacer fila?"}),p.jsx("h4",{className:"font-semibold text-slate-100",children:"Tambin puedes comprar en lnea desde tu celular"}),p.jsx("span",{className:"text-slate-500 text-xs",children:"(La Taza Incentivo se entrega solo en compras presenciales.)"}),p.jsx(Te,{asChild:!0,className:`
      w-full py-3 rounded-2xl font-semibold
      bg-gradient-to-r from-orange-500 via-rose-500 to-pink-500 
      hover:from-orange-400 hover:to-pink-400
      text-white shadow-[0_12px_40px_rgba(255,99,132,0.35)]
    `,children:p.jsx("a",{href:"https://www.taquillacecut.com.mx/eventos/saladeespectaculos/2025-12-28",target:"_blank",rel:"noreferrer",children:"Comprar en taquillacecut.com.mx"})})]})]})]})]}):null})},e7="/assets/bg-logo-ba7fccc4.png",t7=()=>{const[n,e]=_.useState(!1),[t,r]=_.useState(!1);_.useCallback(()=>{const l=document.querySelector("#about");l==null||l.scrollIntoView({behavior:"smooth"})},[]);const i=_.useCallback(()=>{e(!0)},[]),s=_.useCallback(()=>{e(!1)},[]),o=_.useCallback(()=>{r(!0)},[]),a=_.useCallback(()=>{r(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"hero",className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[p.jsxs("div",{className:"absolute inset-0 bg-black",children:[p.jsxs("div",{className:"absolute inset-0 opacity-30",children:[p.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 bg-gradient-to-br from-pink-900/50 via-transparent to-transparent blur-4xl"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-purple-700/60 via-transparent to-transparent blur-3xl"})]}),p.jsx("img",{className:"absolute inset-0 w-full h-full object-cover opacity-15 mix-blend-luminosity pointer-events-none",style:{filter:"contrast(10%) brightness(95%)"},alt:"Textura de teln de teatro de terciopelo oscuro",src:e7})]}),p.jsx("div",{className:"container mx-auto px-6 text-center relative z-10",children:p.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"max-w-4xl mx-auto",children:[p.jsx(ne.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.2},className:"font-display text-5xl md:text-7xl font-medium italic mb-6 text-gradient",style:{textShadow:"0 0 20px rgba(233, 213, 255, 0.3)"},children:"#GatoEncerrado"}),p.jsxs(ne.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.5},className:"text-xl md:text-2xl text-slate-300/80 mb-12 leading-relaxed font-light flex flex-col items-center gap-1",children:["El espacio transmedia donde late la obra",p.jsxs("button",{onClick:()=>{var l;return(l=document.querySelector("#about"))==null?void 0:l.scrollIntoView({behavior:"smooth",block:"start"})},className:`
      text-slate-200 underline underline-offset-4 decoration-slate-400/50
      hover:text-white hover:decoration-purple-400 transition
      font-normal flex items-center gap-1
    `,children:["Es un gato encerrado",p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 opacity-80",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})]}),p.jsx(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.8},className:"flex flex-col gap-4 justify-center items-center",children:p.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center",children:[p.jsxs(Te,{onClick:o,className:`
      px-8 py-4 rounded-full font-semibold
      flex items-center gap-2 text-white
      bg-gradient-to-r from-orange-400 via-rose-500 to-pink-500
      shadow-[0_8px_32px_rgba(255,90,120,0.45)]
      hover:shadow-[0_12px_42px_rgba(255,90,120,0.55)]
      hover:scale-[1.03]
      transition-all duration-300 ease-out
      text-base tracking-wide
    `,children:[p.jsx(fO,{size:22,className:"drop-shadow-md"}),"Comprar boleto"]}),p.jsxs(Te,{variant:"outline",onClick:()=>i("preventa"),className:`
      px-8 py-4 rounded-full font-semibold
      flex items-center gap-2
      backdrop-blur-xl 
      bg-white/5
      border border-purple-300/30
      text-purple-200
      hover:bg-purple-950/30
      hover:border-purple-300/60
      hover:shadow-[0_6px_24px_rgba(150,80,255,0.25)]
      hover:scale-[1.02]
      transition-all duration-300 ease-out
      text-base tracking-wide
    `,children:[p.jsx(uO,{size:20,className:"text-purple-200/90 drop-shadow-sm"}),"Apartar merch"]}),p.jsx("p",{className:"text-xs text-slate-400/70 leading-tight",children:"Paquetes disponibles solo el da del evento."})]})})]})})]}),p.jsx(_P,{open:n,onClose:s,initialInterest:"preventa"}),p.jsx(p3,{open:t,onClose:a})]})},m3="trailers",Gm="trailerlanding",g3=(n="")=>n.toLowerCase().replace(/\.[^/.]+$/,""),nk=(n="")=>{var t;switch((t=n.split(".").pop())==null?void 0:t.toLowerCase()){case"webm":return"video/webm";case"mov":return"video/quicktime";case"mkv":return"video/x-matroska";case"m4v":return"video/x-m4v";case"mp4":default:return"video/mp4"}},Cj="trailerlanding.mp4",Tj="trailer_landing.mp4",y3="https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/trailer_landing.mp4",rk="https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/trailer_landing_v.mp4",Pj={trailerlanding:{url:y3,name:Cj,mimeType:nk(Cj)},trailer_landing:{url:rk,name:Tj,mimeType:nk(Tj)}},n7=(n=Gm)=>{const e=g3(n)||Gm;return{...Pj[e]||Pj[Gm]}},v3=async(n="")=>{const{data:e,error:t}=await pt.storage.from(m3).list(n,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});if(t)throw new Error(t.message);if(!Array.isArray(e)||e.length===0)return[];const r=[];for(const i of e){const s=n?`${n}/${i.name}`:i.name;if(!i.metadata){const o=await v3(s);r.push(...o);continue}r.push({...i,fullPath:s})}return r};async function r7(n=Gm){var r;const e=g3(n)||Gm,t=n7(e);try{let i;try{i=await v3("")}catch(c){return console.error("Error al listar trailers:",c.message),{...t}}if(!Array.isArray(i)||i.length===0)return{...t};const s=e;let o=i.find(c=>{const d=c.fullPath.toLowerCase();return s&&(d===s||d.endsWith(`/${s}`)||d.includes(`/${s}.`)||d===`${s}.mp4`||d.startsWith(`${s}.`))});if(!o&&s&&(o=i.find(c=>c.fullPath.toLowerCase().includes(s))),!o)return{...t};const{data:a}=pt.storage.from(m3).getPublicUrl(o.fullPath),l=((r=o.metadata)==null?void 0:r.mimetype)||nk(o.fullPath);return a!=null&&a.publicUrl?{url:a.publicUrl,name:o.fullPath,mimeType:l}:{...t,name:o.fullPath,mimeType:l}}catch(i){return console.error("Excepcin al obtener el triler:",i),{...t}}}const i7="Es un gato encerrado existe como obra escnica y como #UniversoTransmedia: es, al mismo tiempo, un relato ntimo en un escenario y una constelacin de la mente y del dolor humano en mltiples lenguajes artsticos. Nuestra obra es el corazn que hace pulsar aquellas preguntas que no estn aqu para contestarse, sino para sentirlas en compaa. En pocas palabras, cuando la obra est latente, el universo #GatoEncerrado contina latiendo en otras narrativas. Un recordatorio de que el corazn nunca se encierra del todo.",s7=[{quote:"Salir de la funcin fue como despertar con nuevos recuerdos. La obra me oblig a conversar con mis propias ausencias.",author:"Maru Solano",role:"Espectadora / Tijuana"},{quote:"Es un Gato Encerrado nos recuerda que el teatro puede ser tambin archivo emocional y dispositivo de memoria.",author:"Dr. Luis Miguel Snchez",role:"Crtico invitado"}],r_=`Hola 
Quiero invitarte a ver *Es un gato encerrado*.
Mira el triler aqu: https://esungatoencerrado.com/trailer
Si te late, vamos. `,o7=()=>{const[n,e]=_.useState(null),[t,r]=_.useState(!1),[i,s]=_.useState(!1),[o,a]=_.useState(!1),[l,c]=_.useState("preventa"),[d,h]=_.useState(!1),[f,m]=_.useState(()=>typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches);_.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const k=window.matchMedia("(max-width: 768px)"),P=R=>m(R.matches);return typeof k.addEventListener=="function"?k.addEventListener("change",P):typeof k.addListener=="function"&&k.addListener(P),()=>{typeof k.removeEventListener=="function"?k.removeEventListener("change",P):typeof k.removeListener=="function"&&k.removeListener(P)}},[]);const y=f?rk:y3;_.useCallback(k=>{c(k),a(!0)},[]);const g=_.useCallback(()=>{a(!1)},[]),b=_.useCallback(()=>{var P,R;const k=document.getElementById("blog-submit-cta");if(k){k.scrollIntoView({behavior:"smooth",block:"center"}),(P=k.focus)==null||P.call(k);return}(R=document.querySelector("#blog-contribuye"))==null||R.scrollIntoView({behavior:"smooth",block:"start"})},[]),v=_.useCallback(async()=>{var R;if(i)return;const k=f?"trailer_landing_v":"trailerlanding";if((n==null?void 0:n.url)&&(((R=n.name)==null?void 0:R.toLowerCase().includes(k))||n.url.toLowerCase().includes(k))){r(!0);return}try{s(!0);const L=await r7(k);if(L!=null&&L.url){let O=L;f&&!L.url.toLowerCase().includes("trailer_landing_v")&&(O={...L,url:rk,name:"trailer_landing_v.mp4"}),e(O),r(!0)}else Me({description:"El triler an no est disponible. Intenta ms tarde."})}catch(L){console.error("Error al obtener el triler:",L),Me({description:"No se pudo cargar el triler. Intntalo de nuevo ms tarde."})}finally{s(!1)}},[i,f,n]),x=_.useCallback(()=>{r(!1);const k=document.getElementById("gato-encerrado-trailer");k&&typeof k.pause=="function"&&k.pause()},[]),w=_.useCallback(async()=>{const k={title:"Es un gato encerrado",url:"https://esungatoencerrado.com/trailer",text:r_};if(typeof navigator<"u"&&typeof navigator.share=="function")try{await navigator.share(k);return}catch(P){if((P==null?void 0:P.name)==="AbortError")return;console.error("Error al compartir invitacin:",P)}h(!0)},[]),E=_.useCallback(()=>{h(!1)},[]),T=_.useCallback(k=>{const P=encodeURIComponent(r_),R=`https://wa.me/?text=${P}`,L=`mailto:?subject=${encodeURIComponent("Te invito a ver Es un gato encerrado")}&body=${P}`,O=k==="whatsapp"?R:L;typeof window<"u"&&window.open(O,"_blank","noopener,noreferrer"),h(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"about",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Sobre la Obra"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light whitespace-pre-line",children:i7})]}),p.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12",children:p.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[p.jsxs("div",{className:"relative order-2 md:order-1",children:[p.jsx("video",{className:"w-full h-96 object-cover rounded-xl shadow-2xl shadow-black/50","aria-label":"Escena de la obra #GatoEncerrado, luz tenue y misteriosa",src:y,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,preload:"metadata"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl","aria-hidden":"true"})]}),p.jsxs("div",{className:"order-1 md:order-2",children:[p.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"La Mente de Silvestre"}),p.jsxs("p",{className:"text-slate-300/80 leading-relaxed mb-8 font-light",children:["Silvestre vive en ",p.jsx("strong",{children:"Es un gato encerrado"}),". Este es el ",p.jsx("i",{children:"rincn onrico"})," donde enfrenta sus desdoblamientos y dilemas existenciales. Aqu, lo real y lo imaginario ya no compiten. Y t espectador, visitante, cmplice puedes entrar sin tocar la puerta, porque quizs t tambin tienes un gato encerrado en el pecho."]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs(Te,{onClick:v,disabled:i,className:"relative bg-purple-500/20 border border-purple-400/30 text-purple-300 hover:bg-purple-500/30 hover:text-purple-200 disabled:opacity-60 disabled:cursor-not-allowed px-6 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow",children:[p.jsx(CV,{size:20}),i?"Cargando":"Escucha el Triler"]}),p.jsxs(Te,{variant:"outline",onClick:w,className:"border-slate-100/20 text-slate-200 hover:bg-slate-100/10 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[p.jsx(hO,{size:20}),"Invita a alguien"]})]})]})]})}),p.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-16 glass-effect rounded-2xl p-8 md:p-12",children:p.jsxs("div",{className:"grid md:grid-cols-[3fr_2fr] gap-8 items-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"uppercase tracking-[0.35em] text-xs text-slate-400/80 mb-4",children:"Perspectivas del pblico"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-6 italic",children:"Qu provoca La Obra?"}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-6 font-light",children:"Reunimos testimonios, crticas y preguntas abiertas que continan la conversacin. Haz scroll hacia Textos y Blog para leer ms y expandir tu propia mirada."}),p.jsx(Te,{variant:"outline",onClick:b,className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/20 w-full sm:w-auto whitespace-normal break-words text-center leading-snug",children:"Clicar para compartir tu perspectiva"})]}),p.jsx("div",{className:"space-y-6",children:s7.map(k=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-6",children:[p.jsx(RV,{className:"text-purple-300 mb-4",size:28}),p.jsx("p",{className:"text-slate-200 italic leading-relaxed mb-4",children:k.quote}),p.jsxs("div",{className:"text-sm text-slate-400",children:[p.jsx("p",{className:"text-slate-200 font-semibold",children:k.author}),p.jsx("p",{children:k.role})]})]},k.author))})]})})]}),p.jsxs(Qs,{children:[t&&(n==null?void 0:n.url)&&p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(ne.div,{className:"absolute inset-0 bg-black/70",onClick:x,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsx(ne.div,{className:`relative z-10 w-full h-full ${f?"max-w-4xl p-4":"p-6 sm:p-8"} overflow-hidden bg-slate-950/95 backdrop-blur-xl`,initial:{scale:.96,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.96,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:p.jsxs("div",{className:"w-full max-w-6xl mx-auto flex flex-col gap-4 h-full",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 sm:px-6 py-4 border border-white/10 rounded-2xl bg-black/40 text-slate-200 uppercase tracking-[0.35em] text-xs shadow-[0_12px_40px_rgba(0,0,0,0.45)]",children:[p.jsx("span",{children:"Triler #GatoEncerrado"}),p.jsx("button",{onClick:x,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar triler",children:""})]}),(()=>{var R,L;const P=f&&(((R=n==null?void 0:n.url)==null?void 0:R.toLowerCase().includes("trailer_landing_v"))||((L=n==null?void 0:n.name)==null?void 0:L.toLowerCase().includes("trailer_landing_v")))?"aspect-[9/16]":"aspect-video";return p.jsx("div",{className:`relative w-full ${P} bg-black rounded-2xl overflow-hidden mx-auto flex items-center justify-center shadow-[0_18px_60px_rgba(0,0,0,0.55)]`,children:p.jsx("video",{id:"gato-encerrado-trailer",src:n.url,controls:!0,autoPlay:!0,className:"h-full w-full object-contain"},n.url)})})()]})})]}),d&&p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(ne.div,{className:"absolute inset-0 bg-black/70",onClick:E,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsxs(ne.div,{className:"relative z-10 w-full max-w-md rounded-3xl border border-white/10 bg-slate-950/90 backdrop-blur-xl p-6 shadow-[0_18px_60px_rgba(0,0,0,0.55)]",initial:{scale:.96,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.96,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:"Compartir"}),p.jsx("h4",{className:"text-slate-100 font-display text-2xl",children:"Invita a alguien"})]}),p.jsx("button",{onClick:E,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar invitacin",children:""})]}),p.jsx("p",{className:"text-slate-300/80 whitespace-pre-line text-sm mb-6 font-light",children:r_}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>T("whatsapp"),className:"w-full px-5 py-3 rounded-full font-semibold flex items-center justify-center gap-2 bg-emerald-500/15 hover:bg-emerald-500/25 border border-emerald-500/30 text-emerald-200 transition",children:"Enviar por WhatsApp"}),p.jsx("button",{onClick:()=>T("email"),className:"w-full px-5 py-3 rounded-full font-semibold flex items-center justify-center gap-2 border border-slate-100/20 text-slate-200 hover:bg-slate-100/10 transition",children:"Enviar por Email"})]})]})]})]})]}),p.jsx(_P,{open:o,onClose:g,initialInterest:l})]})},Wp=[{id:"waitlist",label:"Prximamente"},{id:"experiences",label:"Miniversos activos"}],a7=[{title:"Microficciones sonoras",description:"Voces internas de Silvestre publicadas en notas de voz efmeras.",action:"Pronto recibirs el enlace secreto."},{title:"Bitcora interactiva",description:"Un recorrido visual por los objetos que habitan la habitacin de Silvestre.",action:"Se liberar con la novela impresa."},{title:"Constelacin de espectadores",description:"Mapa colaborativo donde la comunidad comparte sueos y teoras.",action:"Disponible a partir de enero 2025."}],Nj={fullName:"",email:"",interest:"miniversos",message:""},l7={hidden:{opacity:0},visible:{opacity:.85}},c7={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},u7=({open:n,onClose:e})=>{const[t,r]=_.useState(Wp[0].id),[i,s]=_.useState(Nj),[o,a]=_.useState("idle"),[l,c]=_.useState("");_.useEffect(()=>{n&&(r(Wp[0].id),s(Nj),a("idle"),c(""))},[n]),_.useEffect(()=>{if(!n)return;const y=g=>{g.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[n,e]);const d=_.useCallback(y=>{const{name:g,value:b}=y.target;s(v=>({...v,[g]:b}))},[]),h=_.useMemo(()=>{var y;return((y=Wp.find(g=>g.id===t))==null?void 0:y.label)??Wp[0].label},[t]),f=_.useCallback(async y=>{var g;if(y.preventDefault(),o!=="loading"){if(!i.fullName.trim()||!i.email.trim()){Me({description:"Por favor completa tu nombre y correo."});return}a("loading"),c("");try{const b={full_name:i.fullName.trim(),email:i.email.trim().toLowerCase(),city:null,interest:"miniversos",channel:"landing",object_type:"experiencia-digital",event:"miniversos",notes:i.message.trim()||null},{error:v}=await pt.from("rsvp_extended").insert(b);if(v){console.error("[MiniverseModal] Error al registrar miniverso:",v),a("error"),c((g=v.message)!=null&&g.includes("rsvp_extended")?"Crea la tabla rsvp_extended en Supabase para habilitar este formulario.":"No pudimos registrar tu inters. Intenta de nuevo.");return}a("success"),Me({description:"Gracias. Te enviaremos una seal cuando el prximo miniverso cobre vida."})}catch(b){console.error("[MiniverseModal] Excepcin al guardar:",b),a("error"),c("Ocurri un error inesperado. Intenta ms tarde.")}}},[i,o]),m=_.useCallback(()=>{o!=="loading"&&(e==null||e())},[e,o]);return p.jsx(Qs,{children:n?p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center px-3 py-6 sm:px-4 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ne.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:l7,onClick:m,"aria-hidden":"true"}),p.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"miniverse-modal-title",variants:c7,className:"relative z-10 w-full max-w-4xl rounded-3xl border border-white/10 bg-slate-950/95 p-5 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"Universos expandidos #GatoEncerrado"}),p.jsx("h2",{id:"miniverse-modal-title",className:"font-display text-3xl text-slate-50",children:"Explora los miniversos"}),p.jsx("p",{className:"text-sm text-slate-400/80",children:"Lo que empieza en el escenario contina en otros formatos. Aqu reunimos las experiencias emergentes."})]}),p.jsx("button",{onClick:m,className:"self-end text-slate-400 hover:text-white transition","aria-label":"Cerrar explorador de miniversos",children:""})]}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Wp.map(y=>p.jsx("button",{onClick:()=>r(y.id),className:`rounded-full border px-4 py-2 text-sm transition ${t===y.id?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:y.label},y.id))}),p.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t==="waitlist"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"space-y-4 text-slate-300/90 text-sm leading-relaxed",children:[p.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100 mb-3",children:"Qu necesitas saber?"}),p.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[p.jsx("li",{children:" Algunos miniversos an estn bajo construccin."}),p.jsx("li",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),p.jsx("li",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4",children:[p.jsx("h3",{className:"font-display text-lg text-purple-200 mb-3",children:"Qu recibirs?"}),p.jsx("p",{children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]})]}),p.jsxs("form",{className:"space-y-5",onSubmit:f,children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),p.jsx("input",{name:"fullName",type:"text",required:!0,value:i.fullName,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),p.jsx("input",{name:"email",type:"email",required:!0,value:i.email,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),p.jsx("textarea",{name:"message",rows:3,value:i.message,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Comparte qu miniverso te emociona ms o si traes alguna propuesta."})]}),o==="error"?p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:l}):null,o==="success"?p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Quedas en lista para las prximas experiencias. Llegar un correo con la primera pista."}):null,p.jsx(Te,{type:"submit",disabled:o==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:o==="loading"?"Guardando":"Quiero recibir las activaciones"})]})]}):p.jsx("div",{className:"md:col-span-2 grid md:grid-cols-3 gap-6",children:a7.map(y=>p.jsxs("div",{className:"glass-effect rounded-2xl border border-white/10 p-6",children:[p.jsx("h3",{className:"font-display text-xl text-slate-100 mb-3",children:y.title}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed mb-4",children:y.description}),p.jsx("span",{className:"text-xs uppercase tracking-[0.25em] text-purple-200/80",children:y.action})]},y.title))})}),p.jsxs("div",{className:"mt-8 flex items-center justify-between text-xs text-slate-500",children:[p.jsx("span",{children:h}),p.jsx("button",{onClick:m,className:"text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]}):null})},d7=6,Kp=17,Xp=75;function Rj({value:n}){return p.jsx("div",{className:"w-full h-2 rounded-full bg-white/10 overflow-hidden",children:p.jsx("div",{className:"h-full bg-white/70",style:{width:`${Math.min(100,Math.max(0,n))}%`}})})}const h7=()=>{const[n,e]=_.useState(""),[t,r]=_.useState(!1),[i,s]=_.useState(""),[o,a]=_.useState(0),[l,c]=_.useState(!!"http://localhost:8787");_.useEffect(()=>{if(!l)return;let f=!0;async function m(){try{const b=await(await fetch("http://localhost:8787/stats/suscriptores",{cache:"no-store"})).json();if(!f)return;a(Number((b==null?void 0:b.total)||0))}catch(g){console.error("Error stats/suscriptores",g),c(!1)}}m();const y=setInterval(m,15e3);return()=>{f=!1,clearInterval(y)}},[l]);const d=_.useMemo(()=>{const f=o*d7,m=Math.floor(o/Kp),y=o%Kp,g=y===0?Kp:Kp-y,b=y/Kp*100,v=Math.floor(o/Xp),x=o%Xp,w=x===0?Xp:Xp-x,E=x/Xp*100;return{sesiones:f,residencias:m,residenciasFaltan:g,residenciasProg:b,escuelas:v,escuelasFaltan:w,escuelasProg:E}},[o]);async function h(){try{r(!0),s("");const f=await fetch("http://localhost:8787/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),m=await f.json();if(!f.ok)throw new Error((m==null?void 0:m.error)||"No se pudo crear la sesin");window.location.href=m.url}catch(f){s(f.message)}finally{r(!1)}}return p.jsxs("div",{className:"max-w-xl mx-auto text-center space-y-6",children:[p.jsx(ne.p,{className:"text-md text-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Cada suscripcin abre un umbral: sostiene el universo y activa impacto real en la causa social."}),p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-left text-slate-100 space-y-4",children:[p.jsxs("div",{className:"flex items-baseline justify-between",children:[p.jsx("p",{className:"text-sm opacity-80",children:"Suscriptores activos"}),p.jsx("p",{className:"text-2xl font-semibold",children:o})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm mb-1 opacity-80",children:"Terapias asignadas"}),p.jsxs("p",{className:"text-lg mb-2",children:[p.jsx("strong",{children:d.sesiones})," sesiones (1 suscripcin = 6 sesiones)"]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm opacity-80",children:[p.jsx("span",{children:"Residencias creativas"}),p.jsxs("span",{children:[d.residencias," activas"]})]}),p.jsx(Rj,{value:d.residenciasProg}),p.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Faltan ",p.jsx("strong",{children:d.residenciasFaltan})," suscripciones para abrir la siguiente residencia ( 17/sub)."]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm opacity-80",children:[p.jsx("span",{children:"Escuelas con app activa"}),p.jsxs("span",{children:[d.escuelas," escuelas"]})]}),p.jsx(Rj,{value:d.escuelasProg}),p.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Faltan ",p.jsx("strong",{children:d.escuelasFaltan})," suscripciones para la prxima escuela ( 75/sub)."]})]}),p.jsx("p",{className:"text-[11px] leading-4 text-slate-300/80 pt-2",children:"* Isabel Ayuda para la Vida, A.C. no cobra al usuario por sesin. Las sesiones se asignan sin costo para las familias cuando se detecta riesgo, gracias a la combinacin de suscripciones, aportes simblicos y apoyos institucionales."})]}),p.jsxs("div",{className:"grid gap-3",children:[p.jsx("input",{type:"email",placeholder:"tu@email.com",value:n,onChange:f=>e(f.target.value),className:"w-full px-3 py-2 rounded text-black"}),p.jsx("button",{onClick:h,disabled:t||!n,className:"bg-white/90 text-black px-4 py-2 rounded disabled:opacity-50",children:t?"Creando sesin":"Quiero suscribirme"})]}),i&&p.jsx("p",{className:"text-red-300 text-sm",children:i})]})},x3="blog_posts",sx=[],jj=()=>`post-${Math.random().toString(36).slice(2,10)}`,ik=n=>({id:n.id??n.slug??jj(),slug:n.slug??`post-${n.id??jj()}`,title:n.title??"Entrada sin ttulo",excerpt:n.excerpt??n.summary??"",author:n.author??n.byline??"Autora pendiente",author_role:n.author_role??n.role??"",content:n.content??n.body??"",published_at:n.published_at??n.publish_date??null,read_time_minutes:n.read_time_minutes??n.read_time??null,tags:n.tags??[],featured_image_url:n.featured_image_url??n.cover_image??null});async function f7(){try{const{data:n,error:e}=await pt.from(x3).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).order("published_at",{ascending:!1}).limit(20);if(e)return console.error("[blogService] Error al obtener posts:",e.message),sx;if(!Array.isArray(n)||n.length===0)return sx;const t=n.filter(i=>i.is_published===!0||i.is_published===null||typeof i.is_published>"u").map(ik),r=sx.filter(i=>!t.some(s=>s.slug===i.slug)).map(ik);return[...t,...r]}catch(n){return console.error("[blogService] Excepcin al obtener posts:",n),sx}}async function p7(n){if(!n)return null;try{const{data:e,error:t}=await pt.from(x3).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).eq("slug",n).maybeSingle();return t?(console.error("[blogService] Error al obtener post por slug:",t.message),null):!e||e.is_published===!1?null:ik(e)}catch(e){return console.error("[blogService] Excepcin al buscar post por slug:",e),null}}const nr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),sk=[.001,0,0,.001,0,0],i_=1.35,Qr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Gs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},vg="pdfjs_internal_editor_",Se={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Oe={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},b3={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},wn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Wm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ht={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},wd={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},yv={ERRORS:0,WARNINGS:1,INFOS:5},yp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ox={moveTo:0,lineTo:1,curveTo:2,closePath:3},w3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let FS=yv.WARNINGS;function m7(n){Number.isInteger(n)&&(FS=n)}function g7(){return FS}function BS(n){FS>=yv.INFOS&&console.info(`Info: ${n}`)}function Ae(n){FS>=yv.WARNINGS&&console.warn(`Warning: ${n}`)}function ct(n){throw new Error(n)}function $e(n,e){n||ct(e)}function y7(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function EP(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=S7(n)}catch{}}const r=e?URL.parse(n,e):URL.parse(n);return y7(r)?r:null}function kP(n,e,t=!1){const r=URL.parse(n);return r?(r.hash=e,r.href):t&&EP(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Ne(n,e,t,r=!1){return Object.defineProperty(n,e,{value:t,enumerable:!r,configurable:!0,writable:!1}),t}const hd=function(){function e(t,r){this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();class Mj extends hd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class s_ extends hd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Jb extends hd{constructor(e){super(e,"InvalidPDFException")}}class xg extends hd{constructor(e,t,r){super(e,"ResponseException"),this.status=t,this.missing=r}}class v7 extends hd{constructor(e){super(e,"FormatError")}}class oa extends hd{constructor(e){super(e,"AbortException")}}function S3(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ct("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const r=[];for(let i=0;i<e;i+=t){const s=Math.min(i+t,e),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function vv(n){typeof n!="string"&&ct("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let r=0;r<e;++r)t[r]=n.charCodeAt(r)&255;return t}function x7(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function b7(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function w7(){try{return new Function(""),!0}catch{return!1}}class xn{static get isLittleEndian(){return Ne(this,"isLittleEndian",b7())}static get isEvalSupported(){return Ne(this,"isEvalSupported",w7())}static get isOffscreenCanvasSupported(){return Ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ne(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Ne(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return Ne(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const o_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var ah,Ox,Cg,ok;class re{static makeHexColor(e,t,r){return`#${o_[e]}${o_[t]}${o_[r]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[1],t[1]=r,r=t[2],t[2]=t[3],t[3]=r,e[1]<0&&(r=t[1],t[1]=t[3],t[3]=r),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[2],t[2]=r),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,r=0){const i=e[r],s=e[r+1];e[r]=i*t[0]+s*t[2]+t[4],e[r+1]=i*t[1]+s*t[3]+t[5]}static applyTransformToBezier(e,t,r=0){const i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5];for(let d=0;d<6;d+=2){const h=e[r+d],f=e[r+d+1];e[r+d]=h*i+f*o+l,e[r+d+1]=h*s+f*a+c}}static applyInverseTransform(e,t){const r=e[0],i=e[1],s=t[0]*t[3]-t[1]*t[2];e[0]=(r*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/s,e[1]=(-r*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/s}static axialAlignedBoundingBox(e,t,r){const i=t[0],s=t[1],o=t[2],a=t[3],l=t[4],c=t[5],d=e[0],h=e[1],f=e[2],m=e[3];let y=i*d+l,g=y,b=i*f+l,v=b,x=a*h+c,w=x,E=a*m+c,T=E;if(s!==0||o!==0){const k=s*d,P=s*f,R=o*h,L=o*m;y+=R,v+=R,b+=L,g+=L,x+=k,T+=k,E+=P,w+=P}r[0]=Math.min(r[0],y,b,g,v),r[1]=Math.min(r[1],x,E,w,T),r[2]=Math.max(r[2],y,b,g,v),r[3]=Math.max(r[3],x,E,w,T)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const r=e[0],i=e[1],s=e[2],o=e[3],a=r**2+i**2,l=r*s+i*o,c=s**2+o**2,d=(a+c)/2,h=Math.sqrt(d**2-(a*c-l**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>i)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>o?null:[r,s,i,o]}static pointBoundingBox(e,t,r){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}static rectBoundingBox(e,t,r,i,s){s[0]=Math.min(s[0],e,r),s[1]=Math.min(s[1],t,i),s[2]=Math.max(s[2],e,r),s[3]=Math.max(s[3],t,i)}static bezierBoundingBox(e,t,r,i,s,o,a,l,c){c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l),C(this,Cg,ok).call(this,e,r,s,a,t,i,o,l,3*(-e+3*(r-s)+a),6*(e-2*r+s),3*(r-e),c),C(this,Cg,ok).call(this,e,r,s,a,t,i,o,l,3*(-t+3*(i-o)+l),6*(t-2*i+o),3*(i-t),c)}}ah=new WeakSet,Ox=function(e,t,r,i,s,o,a,l,c,d){if(c<=0||c>=1)return;const h=1-c,f=c*c,m=f*c,y=h*(h*(h*e+3*c*t)+3*f*r)+m*i,g=h*(h*(h*s+3*c*o)+3*f*a)+m*l;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],g)},Cg=new WeakSet,ok=function(e,t,r,i,s,o,a,l,c,d,h,f){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&C(this,ah,Ox).call(this,e,t,r,i,s,o,a,l,-h/d,f);return}const m=d**2-4*h*c;if(m<0)return;const y=Math.sqrt(m),g=2*c;C(this,ah,Ox).call(this,e,t,r,i,s,o,a,l,(-d+y)/g,f),C(this,ah,Ox).call(this,e,t,r,i,s,o,a,l,(-d-y)/g,f)},S(re,ah),S(re,Cg);function S7(n){return decodeURIComponent(escape(n))}let a_=null,Lj=null;function A3(n){return a_||(a_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Lj=new Map([["","t"]])),n.replaceAll(a_,(e,t,r)=>t?t.normalize("NFKC"):Lj.get(r))}function CP(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),S3(n)}const TP="pdfjs_internal_id_";function A7(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[r,i,...s]=t;if(!n(r)&&!Number.isInteger(r)||!e(i))return!1;const o=s.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Vn(n,e,t){return Math.min(Math.max(n,e),t)}function _3(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(S3(n))}function _7(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):vv(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class bg{static textContent(e){const t=[],r={items:t,styles:Object.create(null)};function i(s){var l;if(!s)return;let o=null;const a=s.name;if(a==="#text")o=s.value;else if(bg.shouldBuildText(a))(l=s==null?void 0:s.attributes)!=null&&l.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&t.push({str:o}),!!s.children)for(const c of s.children)i(c)}return i(e),r}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class PP{static setupStorage(e,t,r,i,s){const o=i.getValue(t,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",a=>{i.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),s==="print")break;e.addEventListener("input",a=>{i.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:r=null,intent:i,linkService:s}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var h,f;const t=e.annotationStorage,r=e.linkService,i=e.xfaHtml,s=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});const a=s!=="richText",l=e.div;if(l.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(i.children.length===0){if(i.value){const m=document.createTextNode(i.value);o.append(m),a&&bg.shouldBuildText(i.name)&&c.push(m)}return{textDivs:c}}const d=[[i,-1,o]];for(;d.length>0;){const[m,y,g]=d.at(-1);if(y+1===m.children.length){d.pop();continue}const b=m.children[++d.at(-1)[1]];if(b===null)continue;const{name:v}=b;if(v==="#text"){const w=document.createTextNode(b.value);c.push(w),g.append(w);continue}const x=(h=b==null?void 0:b.attributes)!=null&&h.xmlns?document.createElementNS(b.attributes.xmlns,v):document.createElement(v);if(g.append(x),b.attributes&&this.setAttributes({html:x,element:b,storage:t,intent:s,linkService:r}),((f=b.children)==null?void 0:f.length)>0)d.push([b,-1,x]);else if(b.value){const w=document.createTextNode(b.value);a&&bg.shouldBuildText(v)&&c.push(w),x.append(w)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const to="http://www.w3.org/2000/svg",fc=class fc{};X(fc,"CSS",96),X(fc,"PDF",72),X(fc,"PDF_TO_CSS_UNITS",fc.CSS/fc.PDF);let aa=fc;async function kp(n,e="text"){if(lm(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,r)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})}class xv{constructor({viewBox:e,userUnit:t,scale:r,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=o,r*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let d,h,f,m;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,h=0,f=0,m=1;break;case 90:d=0,h=1,f=1,m=0;break;case 270:d=0,h=-1,f=-1,m=0;break;case 0:d=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,m=-m);let y,g,b,v;d===0?(y=Math.abs(c-e[1])*r+s,g=Math.abs(l-e[0])*r+o,b=(e[3]-e[1])*r,v=(e[2]-e[0])*r):(y=Math.abs(l-e[0])*r+s,g=Math.abs(c-e[1])*r+o,b=(e[2]-e[0])*r,v=(e[3]-e[1])*r),this.transform=[d*r,h*r,f*r,m*r,y-d*r*l-f*r*c,g-h*r*l-m*r*c],this.width=b,this.height=v}get rawDims(){const e=this.viewBox;return Ne(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new xv({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(e,t){const r=[e,t];return re.applyTransform(r,this.transform),r}convertToViewportRectangle(e){const t=[e[0],e[1]];re.applyTransform(t,this.transform);const r=[e[2],e[3]];return re.applyTransform(r,this.transform),[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){const r=[e,t];return re.applyInverseTransform(r,this.transform),r}}class zS extends hd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function bv(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function $S(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function E3(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function k3(n,e="document.pdf"){if(typeof n!="string")return e;if(bv(n))return Ae('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return e;const i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},s=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(s.test(o))return i(o);if(r.searchParams.size>0){const a=Array.from(r.searchParams.values()).reverse();for(const c of a)if(s.test(c))return i(c);const l=Array.from(r.searchParams.keys()).reverse();for(const c of l)if(s.test(c))return i(c)}if(r.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return e}class Ij{constructor(){X(this,"started",Object.create(null));X(this,"times",[])}time(e){e in this.started&&Ae(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ae(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:r}of this.times)t=Math.max(r.length,t);for(const{name:r,start:i,end:s}of this.times)e.push(`${r.padEnd(t)} ${s-i}ms
`);return e.join("")}}function lm(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function si(n){n.preventDefault()}function Rt(n){n.preventDefault(),n.stopPropagation()}function E7(n){console.log("Deprecated API usage: "+n)}var Tg;class wg{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;u(this,Tg)||A(this,Tg,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=u(this,Tg).exec(e);if(!t)return null;const r=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,c==="-"?(o+=d,a+=h):c==="+"&&(o-=d,a-=h),new Date(Date.UTC(r,i,s,o,a,l))}}Tg=new WeakMap,S(wg,Tg,void 0);function C3(n,{scale:e=1,rotation:t=0}){const{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new xv({viewBox:s,userUnit:1,scale:e,rotation:t})}function Cp(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ae(`Not a valid color format: "${n}"`),[0,0,0])}function k7(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const r=window.getComputedStyle(e).color;n.set(t,Cp(r))}e.remove()}function Pt(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform();return[e,t,r,i,s,o]}function ms(n){const{a:e,b:t,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[e,t,r,i,s,o]}function $l(n,e,t=!1,r=!0){if(e instanceof xv){const{pageWidth:i,pageHeight:s}=e.rawDims,{style:o}=n,a=xn.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,d=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,h=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}r&&n.setAttribute("data-main-rotation",e.rotation)}class ds{constructor(){const{pixelRatio:e}=ds;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,r,i,s=-1){let o=1/0,a=1/0,l=1/0;r=ds.capPixels(r,s),r>0&&(o=Math.sqrt(r/(e*t))),i!==-1&&(a=i/e,l=i/t);const c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,r):r}return e}}const Zb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class C7{static get isDarkMode(){var e;return Ne(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class T3{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:r}=window.getComputedStyle(e);return e.remove(),Ne(this,"commentForegroundColor",Cp(r))}}function P3(n,e,t,r){r=Math.min(Math.max(r??1,0),1);const i=255*(1-r);return n=Math.round(n*r+i),e=Math.round(e*r+i),t=Math.round(t*r+i),[n,e,t]}function Dj(n,e){const t=n[0]/255,r=n[1]/255,i=n[2]/255,s=Math.max(t,r,i),o=Math.min(t,r,i),a=(s+o)/2;if(s===o)e[0]=e[1]=0;else{const l=s-o;switch(e[1]=a<.5?l/(s+o):l/(2-s-o),s){case t:e[0]=((r-i)/l+(r<i?6:0))*60;break;case r:e[0]=((i-t)/l+2)*60;break;case i:e[0]=((t-r)/l+4)*60;break}}e[2]=a}function ak(n,e){const t=n[0],r=n[1],i=n[2],s=(1-Math.abs(2*i-1))*r,o=s*(1-Math.abs(t/60%2-1)),a=i-s/2;switch(Math.floor(t/60)){case 0:e[0]=s+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=s+a,e[2]=a;break;case 2:e[0]=a,e[1]=s+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=s+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=s+a;break;case 5:case 6:e[0]=s+a,e[1]=a,e[2]=o+a;break}}function Oj(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function Fj(n,e,t){ak(n,t),t.map(Oj);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];ak(e,t),t.map(Oj);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const Bj=new Map;function N3(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let r=Bj.get(t);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),o=i.subarray(3,6);Dj(n,o);const a=i.subarray(6,9);Dj(e,a);const l=a[2]<.5,c=l?12:4.5;if(o[2]=l?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),Fj(o,a,s)<c){let d,h;l?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const m=o[2]=(d+h)/2;l===Fj(o,a,s)<c?d=m:h=m}o[2]=l?h:d}return ak(o,s),r=re.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),Bj.set(t,r),r}function NP({html:n,dir:e,className:t},r){const i=document.createDocumentFragment();if(typeof n=="string"){const s=document.createElement("p");s.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,l=o.length;a<l;++a){const c=o[a];s.append(document.createTextNode(c)),a<l-1&&s.append(document.createElement("br"))}i.append(s)}else PP.render({xfaHtml:n,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),r.append(i)}var Ea,ka,hi,fi,Pg,Ca,lh,ch,Ng,fw,R3,pw,j3,mw,M3,Ta,Sd,wc,cm;const oo=class oo{constructor(e){S(this,pw);S(this,mw);S(this,Ta);S(this,wc);S(this,Ea,null);S(this,ka,null);S(this,hi,void 0);S(this,fi,null);S(this,Pg,null);S(this,Ca,null);S(this,lh,null);S(this,ch,null);A(this,hi,e),u(oo,Ng)||A(oo,Ng,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=A(this,Ea,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=u(this,hi)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",si,{signal:t}),e.addEventListener("pointerdown",C(oo,fw,R3),{signal:t}));const r=A(this,fi,document.createElement("div"));r.className="buttons",e.append(r);const i=u(this,hi).toolbarPosition;if(i){const{style:s}=e,o=u(this,hi)._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return u(this,Ea)}hide(){var e;u(this,Ea).classList.add("hidden"),(e=u(this,ka))==null||e.hideDropdown()}show(){var e,t;u(this,Ea).classList.remove("hidden"),(e=u(this,Pg))==null||e.shown(),(t=u(this,Ca))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=u(this,hi),r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",u(oo,Ng)[e]),C(this,Ta,Sd).call(this,r)&&r.addEventListener("click",i=>{t.delete()},{signal:t._signal}),u(this,fi).append(r)}async addAltText(e){const t=await e.render();C(this,Ta,Sd).call(this,t),u(this,fi).append(t,u(this,wc,cm)),A(this,Pg,e)}addComment(e,t=null){if(u(this,Ca))return;const r=e.renderForToolbar();if(!r)return;C(this,Ta,Sd).call(this,r);const i=A(this,lh,u(this,wc,cm));t?(u(this,fi).insertBefore(r,t),u(this,fi).insertBefore(i,t)):u(this,fi).append(r,i),A(this,Ca,e),e.toolbar=this}addColorPicker(e){if(u(this,ka))return;A(this,ka,e);const t=e.renderButton();C(this,Ta,Sd).call(this,t),u(this,fi).append(t,u(this,wc,cm))}async addEditSignatureButton(e){const t=A(this,ch,await e.renderEditButton(u(this,hi)));C(this,Ta,Sd).call(this,t),u(this,fi).append(t,u(this,wc,cm))}removeButton(e){var t,r;switch(e){case"comment":(t=u(this,Ca))==null||t.removeToolbarCommentButton(),A(this,Ca,null),(r=u(this,lh))==null||r.remove(),A(this,lh,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,r){const i=u(this,fi).querySelector(r);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){u(this,ch)&&(u(this,ch).title=e)}remove(){var e;u(this,Ea).remove(),(e=u(this,ka))==null||e.destroy(),A(this,ka,null)}};Ea=new WeakMap,ka=new WeakMap,hi=new WeakMap,fi=new WeakMap,Pg=new WeakMap,Ca=new WeakMap,lh=new WeakMap,ch=new WeakMap,Ng=new WeakMap,fw=new WeakSet,R3=function(e){e.stopPropagation()},pw=new WeakSet,j3=function(e){u(this,hi)._focusEventsAllowed=!1,Rt(e)},mw=new WeakSet,M3=function(e){u(this,hi)._focusEventsAllowed=!0,Rt(e)},Ta=new WeakSet,Sd=function(e){const t=u(this,hi)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",C(this,pw,j3).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,mw,M3).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",si,{signal:t}),!0)},wc=new WeakSet,cm=function(){const e=document.createElement("div");return e.className="divider",e},S(oo,fw),S(oo,Ng,null);let lk=oo;var Rg,Sc,co,gw,L3,yw,I3,jg,ck;class T7{constructor(e){S(this,gw);S(this,yw);S(this,jg);S(this,Rg,null);S(this,Sc,null);S(this,co,void 0);A(this,co,e)}show(e,t,r){const[i,s]=C(this,yw,I3).call(this,t,r),{style:o}=u(this,Sc)||A(this,Sc,C(this,gw,L3).call(this));e.append(u(this,Sc)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){u(this,Sc).remove()}}Rg=new WeakMap,Sc=new WeakMap,co=new WeakMap,gw=new WeakSet,L3=function(){const e=A(this,Sc,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=u(this,co)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",si,{signal:t});const r=A(this,Rg,document.createElement("div"));return r.className="buttons",e.append(r),u(this,co).hasCommentManager()&&C(this,jg,ck).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{u(this,co).commentSelection("floating_button")}),C(this,jg,ck).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{u(this,co).highlightSelection("floating_button")}),e},yw=new WeakSet,I3=function(e,t){let r=0,i=0;for(const s of e){const o=s.y+s.height;if(o<r)continue;const a=s.x+(t?s.width:0);if(o>r){i=a,r=o;continue}t?a>i&&(i=a):a<i&&(i=a)}return[t?1-i:i,r]},jg=new WeakSet,ck=function(e,t,r,i){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",t);const o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);const a=u(this,co)._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",si,{signal:a}),s.addEventListener("click",i,{signal:a})),u(this,Rg).append(s)};function D3(n,e,t){for(const r of t)e.addEventListener(r,n[r].bind(n))}var vw;class P7{constructor(){S(this,vw,0)}get id(){return`${vg}${en(this,vw)._++}`}}vw=new WeakMap;var uh,Mg,Dn,dh,Fx;const s2=class s2{constructor(){S(this,dh);S(this,uh,CP());S(this,Mg,0);S(this,Dn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Ne(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:r,size:i,type:s}=e;return C(this,dh,Fx).call(this,`${t}_${r}_${i}_${s}`,e)}async getFromUrl(e){return C(this,dh,Fx).call(this,e,e)}async getFromBlob(e,t){const r=await t;return C(this,dh,Fx).call(this,e,r)}async getFromId(e){u(this,Dn)||A(this,Dn,new Map);const t=u(this,Dn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:r}=t;return delete t.blobPromise,this.getFromBlob(t.id,r)}return this.getFromUrl(t.url)}getFromCanvas(e,t){u(this,Dn)||A(this,Dn,new Map);let r=u(this,Dn).get(e);if(r!=null&&r.bitmap)return r.refCounter+=1,r;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${u(this,uh)}_${en(this,Mg)._++}`,refCounter:1,isSvg:!1},u(this,Dn).set(e,r),u(this,Dn).set(r.id,r),r}getSvgUrl(e){const t=u(this,Dn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var i;u(this,Dn)||A(this,Dn,new Map);const t=u(this,Dn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:r}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(r.width,r.height);s.getContext("bitmaprenderer").transferFromImageBitmap(r),t.blobPromise=s.convertToBlob()}(i=r.close)==null||i.call(r),t.bitmap=null}isValidId(e){return e.startsWith(`image_${u(this,uh)}_`)}};uh=new WeakMap,Mg=new WeakMap,Dn=new WeakMap,dh=new WeakSet,Fx=async function(e,t){u(this,Dn)||A(this,Dn,new Map);let r=u(this,Dn).get(e);if(r===null)return null;if(r!=null&&r.bitmap)return r.refCounter+=1,r;try{r||(r={bitmap:null,id:`image_${u(this,uh)}_${en(this,Mg)._++}`,refCounter:0,isSvg:!1});let i;if(typeof t=="string"?(r.url=t,i=await kp(t,"blob")):t instanceof File?i=r.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const s=s2._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,d)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=async()=>{const h=r.svgUrl=o.result;a.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(i),await l}else r.bitmap=await createImageBitmap(i);r.refCounter=1}catch(i){Ae(i),r=null}return u(this,Dn).set(e,r),r&&u(this,Dn).set(r.id,r),r};let uk=s2;var qt,Pa,Lg,Tt;class N7{constructor(e=128){S(this,qt,[]);S(this,Pa,!1);S(this,Lg,void 0);S(this,Tt,-1);A(this,Lg,e)}add({cmd:e,undo:t,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&e(),u(this,Pa))return;const l={cmd:e,undo:t,post:r,type:s};if(u(this,Tt)===-1){u(this,qt).length>0&&(u(this,qt).length=0),A(this,Tt,0),u(this,qt).push(l);return}if(o&&u(this,qt)[u(this,Tt)].type===s){a&&(l.undo=u(this,qt)[u(this,Tt)].undo),u(this,qt)[u(this,Tt)]=l;return}const c=u(this,Tt)+1;c===u(this,Lg)?u(this,qt).splice(0,1):(A(this,Tt,c),c<u(this,qt).length&&u(this,qt).splice(c)),u(this,qt).push(l)}undo(){if(u(this,Tt)===-1)return;A(this,Pa,!0);const{undo:e,post:t}=u(this,qt)[u(this,Tt)];e(),t==null||t(),A(this,Pa,!1),A(this,Tt,u(this,Tt)-1)}redo(){if(u(this,Tt)<u(this,qt).length-1){A(this,Tt,u(this,Tt)+1),A(this,Pa,!0);const{cmd:e,post:t}=u(this,qt)[u(this,Tt)];e(),t==null||t(),A(this,Pa,!1)}}hasSomethingToUndo(){return u(this,Tt)!==-1}hasSomethingToRedo(){return u(this,Tt)<u(this,qt).length-1}cleanType(e){if(u(this,Tt)!==-1){for(let t=u(this,Tt);t>=0;t--)if(u(this,qt)[t].type!==e){u(this,qt).splice(t+1,u(this,Tt)-t),A(this,Tt,t);return}u(this,qt).length=0,A(this,Tt,-1)}}destroy(){A(this,qt,null)}}qt=new WeakMap,Pa=new WeakMap,Lg=new WeakMap,Tt=new WeakMap;var xw,O3;class wv{constructor(e){S(this,xw);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=xn.platform;for(const[r,i,s={}]of e)for(const o of r){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const r=this.callbacks.get(C(this,xw,O3).call(this,t));if(!r)return;const{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(e,t)||(i.bind(e,...o,t)(),s||Rt(t))}}xw=new WeakSet,O3=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const bw=class bw{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return k7(e),Ne(this,"_colors",e)}convert(e){const t=Cp(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[r,i]of this._colors)if(i.every((s,o)=>s===t[o]))return bw._colorsMapping.get(r);return t}getHexCode(e){const t=this._colors.get(e);return t?re.makeHexColor(...t):e}};X(bw,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let dk=bw;var hh,Mr,fh,Bt,rn,ph,pi,mh,mi,On,Na,Ra,gh,ja,ws,gi,Ac,Ig,Dg,yh,Og,Ss,Ma,vh,La,As,ww,Ia,xh,Fg,Da,_c,bh,Oa,Bg,Xt,Qe,uo,Fa,Ba,zg,wh,$g,za,_s,ho,Ug,Vg,yi,Sh,Bx,Hg,hk,Sw,F3,Aw,B3,Ec,um,_w,z3,Ew,$3,kw,U3,qg,fk,Cw,V3,Gg,pk,Wg,mk,Tw,H3,Sn,Yn,qi,no,Pw,q3,Nw,G3,Kg,gk,Rw,W3,kc,dm,Xg,yk;const Gd=class Gd{constructor(e,t,r,i,s,o,a,l,c,d,h,f,m,y,g,b){S(this,Sh);S(this,Hg);S(this,Sw);S(this,Aw);S(this,Ec);S(this,_w);S(this,Ew);S(this,kw);S(this,qg);S(this,Cw);S(this,Gg);S(this,Wg);S(this,Tw);S(this,Sn);S(this,qi);S(this,Pw);S(this,Nw);S(this,Kg);S(this,Rw);S(this,kc);S(this,Xg);S(this,hh,new AbortController);S(this,Mr,null);S(this,fh,null);S(this,Bt,new Map);S(this,rn,new Map);S(this,ph,null);S(this,pi,null);S(this,mh,null);S(this,mi,new N7);S(this,On,null);S(this,Na,null);S(this,Ra,null);S(this,gh,0);S(this,ja,new Set);S(this,ws,null);S(this,gi,null);S(this,Ac,new Set);X(this,"_editorUndoBar",null);S(this,Ig,!1);S(this,Dg,!1);S(this,yh,!1);S(this,Og,null);S(this,Ss,null);S(this,Ma,null);S(this,vh,null);S(this,La,!1);S(this,As,null);S(this,ww,new P7);S(this,Ia,!1);S(this,xh,!1);S(this,Fg,!1);S(this,Da,null);S(this,_c,null);S(this,bh,null);S(this,Oa,null);S(this,Bg,null);S(this,Xt,Se.NONE);S(this,Qe,new Set);S(this,uo,null);S(this,Fa,null);S(this,Ba,null);S(this,zg,null);S(this,wh,null);S(this,$g,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,za,[0,0]);S(this,_s,null);S(this,ho,null);S(this,Ug,null);S(this,Vg,null);S(this,yi,null);const v=this._signal=u(this,hh).signal;A(this,ho,e),A(this,Ug,t),A(this,Vg,r),A(this,ph,i),A(this,On,s),A(this,Fa,o),A(this,wh,l),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),window.addEventListener("pointerdown",()=>{A(this,xh,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{A(this,xh,!1)},{capture:!0,signal:v}),C(this,_w,z3).call(this),C(this,Tw,H3).call(this),C(this,qg,fk).call(this),A(this,pi,l.annotationStorage),A(this,Og,l.filterFactory),A(this,Ba,c),A(this,vh,d||null),A(this,Ig,h),A(this,Dg,f),A(this,yh,m),A(this,Bg,y||null),this.viewParameters={realScale:aa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=b!==!1,s==null||s.setSidebarUiManager(this)}static get _keyboardManager(){const e=Gd.prototype,t=o=>u(o,ho).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),r=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},i=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ne(this,"_keyboardManager",new wv([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:r}],[["ctrl+z","mac+meta+z"],e.undo,{checker:r}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:r}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:r}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&u(o,ho).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&u(o,ho).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,r,i,s,o,a,l,c;(e=u(this,yi))==null||e.resolve(),A(this,yi,null),(t=u(this,hh))==null||t.abort(),A(this,hh,null),this._signal=null;for(const d of u(this,rn).values())d.destroy();u(this,rn).clear(),u(this,Bt).clear(),u(this,Ac).clear(),(r=u(this,Oa))==null||r.clear(),A(this,Mr,null),u(this,Qe).clear(),u(this,mi).destroy(),(i=u(this,ph))==null||i.destroy(),(s=u(this,On))==null||s.destroy(),(o=u(this,Fa))==null||o.destroy(),(a=u(this,As))==null||a.hide(),A(this,As,null),(l=u(this,bh))==null||l.destroy(),A(this,bh,null),A(this,fh,null),u(this,Ss)&&(clearTimeout(u(this,Ss)),A(this,Ss,null)),u(this,_s)&&(clearTimeout(u(this,_s)),A(this,_s,null)),(c=this._editorUndoBar)==null||c.destroy(),A(this,wh,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return u(this,Bg)}get useNewAltTextFlow(){return u(this,Dg)}get useNewAltTextWhenAddingImage(){return u(this,yh)}get hcmFilter(){return Ne(this,"hcmFilter",u(this,Ba)?u(this,Og).addHCMFilter(u(this,Ba).foreground,u(this,Ba).background):"none")}get direction(){return Ne(this,"direction",getComputedStyle(u(this,ho)).direction)}get _highlightColors(){return Ne(this,"_highlightColors",u(this,vh)?new Map(u(this,vh).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Ne(this,"highlightColors",null);const t=new Map,r=!!u(this,Ba);for(const[i,s]of e){const o=i.endsWith("_HCM");if(r&&o){t.set(i.replace("_HCM",""),s);continue}!r&&!o&&t.set(i,s)}return Ne(this,"highlightColors",t)}get highlightColorNames(){return Ne(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),A(this,Ra,e)}setMainHighlightColorPicker(e){A(this,bh,e)}editAltText(e,t=!1){var r;(r=u(this,ph))==null||r.editAltText(this,e,t)}hasCommentManager(){return!!u(this,On)}editComment(e,t,r,i){var s;(s=u(this,On))==null||s.showDialog(this,e,t,r,i)}selectComment(e,t){const r=u(this,rn).get(e),i=r==null?void 0:r.getEditorByUID(t);i==null||i.toggleComment(!0,!0)}updateComment(e){var t;(t=u(this,On))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=u(this,On))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=u(this,On))==null||t.removeComments([e.uid])}toggleComment(e,t,r=void 0){var i;(i=u(this,On))==null||i.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var r;return e&&((r=u(this,On))==null?void 0:r.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=u(this,On))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(u(this,rn).has(e-1))return;const{resolve:t,promise:r}=Promise.withResolvers(),i=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await r}getSignature(e){var t;(t=u(this,Fa))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return u(this,Fa)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":A(this,yh,t);break}}onPageChanging({pageNumber:e}){A(this,gh,e-1)}focusMainContainer(){u(this,ho).focus()}findParent(e,t){for(const r of u(this,rn).values()){const{x:i,y:s,width:o,height:a}=r.div.getBoundingClientRect();if(e>=i&&e<=i+o&&t>=s&&t<=s+a)return r}return null}disableUserSelect(e=!1){u(this,Ug).classList.toggle("noUserSelect",e)}addShouldRescale(e){u(this,Ac).add(e)}removeShouldRescale(e){u(this,Ac).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*aa.PDF_TO_CSS_UNITS;for(const r of u(this,Ac))r.onScaleChanging();(t=u(this,Ra))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const r=document.getSelection();if(!r||r.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a}=r,l=r.toString(),d=C(this,Sh,Bx).call(this,r).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;r.empty();const f=C(this,Hg,hk).call(this,d),m=u(this,Xt)===Se.NONE,y=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:a,text:l});m&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(m){this.switchToMode(Se.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!u(this,pi))return null;const t=`${vg}${e}`,r=u(this,pi).getRawValue(t);return r&&u(this,pi).remove(t),r}addToAnnotationStorage(e){!e.isEmpty()&&u(this,pi)&&!u(this,pi).has(e.id)&&u(this,pi).setValue(e.id,e)}a11yAlert(e,t=null){const r=u(this,Vg);r&&(r.setAttribute("data-l10n-id",e),t?r.setAttribute("data-l10n-args",JSON.stringify(t)):r.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,u(this,La)&&(A(this,La,!1),C(this,Ec,um).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of u(this,Qe))if(t.div.contains(e)){A(this,_c,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!u(this,_c))return;const[e,t]=u(this,_c);A(this,_c,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,qg,fk).call(this),C(this,Gg,pk).call(this)}removeEditListeners(){C(this,Cw,V3).call(this),C(this,Wg,mk).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const r of u(this,gi))if(r.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const r of u(this,gi))if(r.isHandlingMimeForPasting(t.type)){r.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var r;if(e.preventDefault(),(r=u(this,Mr))==null||r.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of u(this,Qe)){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const o of u(this,gi))if(o.isHandlingMimeForPasting(s.type)){o.paste(s,this.currentLayer);return}let r=t.getData("application/pdfjs");if(!r)return;try{r=JSON.parse(r)}catch(s){Ae(`paste: "${s.message}".`);return}if(!Array.isArray(r))return;this.unselectAll();const i=this.currentLayer;try{const s=[];for(const l of r){const c=await i.deserialize(l);if(!c)return;s.push(c)}const o=()=>{for(const l of s)C(this,Kg,gk).call(this,l);C(this,Xg,yk).call(this,s)},a=()=>{for(const l of s)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(s){Ae(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),u(this,Xt)!==Se.NONE&&!this.isEditorHandlingKeyboard&&Gd._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,u(this,La)&&(A(this,La,!1),C(this,Ec,um).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(C(this,Ew,$3).call(this),C(this,Gg,pk).call(this),C(this,Sn,Yn).call(this,{isEditing:u(this,Xt)!==Se.NONE,isEmpty:C(this,kc,dm).call(this),hasSomethingToUndo:u(this,mi).hasSomethingToUndo(),hasSomethingToRedo:u(this,mi).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,kw,U3).call(this),C(this,Wg,mk).call(this),C(this,Sn,Yn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!u(this,gi)){A(this,gi,e);for(const t of u(this,gi))C(this,qi,no).call(this,t.defaultPropertiesToUpdate)}}getId(){return u(this,ww).id}get currentLayer(){return u(this,rn).get(u(this,gh))}getLayer(e){return u(this,rn).get(e)}get currentPageIndex(){return u(this,gh)}addLayer(e){u(this,rn).set(e.pageIndex,e),u(this,Ia)?e.enable():e.disable()}removeLayer(e){u(this,rn).delete(e.pageIndex)}async updateMode(e,t=null,r=!1,i=!1,s=!1){var o,a,l,c,d,h;if(u(this,Xt)!==e&&!(u(this,yi)&&(await u(this,yi).promise,!u(this,yi)))){if(A(this,yi,Promise.withResolvers()),(o=u(this,Ra))==null||o.commitOrRemove(),u(this,Xt)===Se.POPUP&&((a=u(this,On))==null||a.hideSidebar()),(l=u(this,On))==null||l.destroyPopup(),A(this,Xt,e),e===Se.NONE){this.setEditingState(!1),C(this,Nw,G3).call(this);for(const f of u(this,Bt).values())f.hideStandaloneCommentButton();(c=this._editorUndoBar)==null||c.hide(),this.toggleComment(null),u(this,yi).resolve();return}for(const f of u(this,Bt).values())f.addStandaloneCommentButton();e===Se.SIGNATURE&&await((d=u(this,Fa))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await C(this,Pw,q3).call(this),this.unselectAll();for(const f of u(this,rn).values())f.updateMode(e);if(e===Se.POPUP){u(this,fh)||A(this,fh,await u(this,wh).getAnnotationsByType(new Set(u(this,gi).map(y=>y._editorType))));const f=new Set,m=[];for(const y of u(this,Bt).values()){const{annotationElementId:g,hasComment:b,deleted:v}=y;g&&f.add(g),b&&!v&&m.push(y.getData())}for(const y of u(this,fh)){const{id:g,popupRef:b,contentsObj:v}=y;b&&(v!=null&&v.str)&&!f.has(g)&&!u(this,ja).has(g)&&m.push(y)}(h=u(this,On))==null||h.showSidebar(m)}if(!t){r&&this.addNewEditorFromKeyboard(),u(this,yi).resolve();return}for(const f of u(this,Bt).values())f.uid===t?(this.setSelected(f),s?f.editComment():i?f.enterInEditMode():f.focus()):f.unselect();u(this,yi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==u(this,Xt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(u(this,gi)){switch(e){case Oe.CREATE:this.currentLayer.addNewEditor(t);return;case Oe.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(u(this,zg)||A(this,zg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const r of u(this,Qe))r.updateParams(e,t);else for(const r of u(this,gi))r.updateDefaultParams(e,t)}}showAllEditors(e,t,r=!1){var s;for(const o of u(this,Bt).values())o.editorType===e&&o.show(t);(((s=u(this,zg))==null?void 0:s.get(Oe.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,qi,no).call(this,[[Oe.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(u(this,Fg)!==e){A(this,Fg,e);for(const t of u(this,rn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of u(this,Bt).values())t.pageIndex===e&&(yield t)}getEditor(e){return u(this,Bt).get(e)}addEditor(e){u(this,Bt).set(e.id,e)}removeEditor(e){var t,r;e.div.contains(document.activeElement)&&(u(this,Ss)&&clearTimeout(u(this,Ss)),A(this,Ss,setTimeout(()=>{this.focusMainContainer(),A(this,Ss,null)},0))),u(this,Bt).delete(e.id),e.annotationElementId&&((t=u(this,Oa))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!u(this,ja).has(e.annotationElementId))&&((r=u(this,pi))==null||r.remove(e.id))}addDeletedAnnotationElement(e){u(this,ja).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return u(this,ja).has(e)}removeDeletedAnnotationElement(e){u(this,ja).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){u(this,Mr)!==e&&(A(this,Mr,e),e&&C(this,qi,no).call(this,e.propertiesToUpdate))}updateUI(e){u(this,Rw,W3)===e&&C(this,qi,no).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,qi,no).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(u(this,Qe).has(e)){u(this,Qe).delete(e),e.unselect(),C(this,Sn,Yn).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,Qe).add(e),e.select(),C(this,qi,no).call(this,e.propertiesToUpdate),C(this,Sn,Yn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=u(this,Ra))==null||t.commitOrRemove();for(const r of u(this,Qe))r!==e&&r.unselect();u(this,Qe).clear(),u(this,Qe).add(e),e.select(),C(this,qi,no).call(this,e.propertiesToUpdate),C(this,Sn,Yn).call(this,{hasSelectedEditor:!0})}isSelected(e){return u(this,Qe).has(e)}get firstSelectedEditor(){return u(this,Qe).values().next().value}unselect(e){e.unselect(),u(this,Qe).delete(e),C(this,Sn,Yn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,Qe).size!==0}get isEnterHandled(){return u(this,Qe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;u(this,mi).undo(),C(this,Sn,Yn).call(this,{hasSomethingToUndo:u(this,mi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,kc,dm).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){u(this,mi).redo(),C(this,Sn,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,mi).hasSomethingToRedo(),isEmpty:C(this,kc,dm).call(this)})}addCommands(e){u(this,mi).add(e),C(this,Sn,Yn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,kc,dm).call(this)})}cleanUndoStack(e){u(this,mi).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...u(this,Qe)],r=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},i=()=>{for(const o of t)C(this,Kg,gk).call(this,o)};this.addCommands({cmd:r,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=u(this,Mr))==null||e.commitOrRemove()}hasSomethingToControl(){return u(this,Mr)||this.hasSelection}selectAll(){for(const e of u(this,Qe))e.commit();C(this,Xg,yk).call(this,u(this,Bt).values())}unselectAll(){var e;if(!(u(this,Mr)&&(u(this,Mr).commitOrRemove(),u(this,Xt)!==Se.NONE))&&!((e=u(this,Ra))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of u(this,Qe))t.unselect();u(this,Qe).clear(),C(this,Sn,Yn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,r=!1){if(r||this.commitOrRemove(),!this.hasSelection)return;u(this,za)[0]+=e,u(this,za)[1]+=t;const[i,s]=u(this,za),o=[...u(this,Qe)],a=1e3;u(this,_s)&&clearTimeout(u(this,_s)),A(this,_s,setTimeout(()=>{A(this,_s,null),u(this,za)[0]=u(this,za)[1]=0,this.addCommands({cmd:()=>{for(const l of o)u(this,Bt).has(l.id)&&(l.translateInPage(i,s),l.translationDone())},undo:()=>{for(const l of o)u(this,Bt).has(l.id)&&(l.translateInPage(-i,-s),l.translationDone())},mustExec:!1})},a));for(const l of o)l.translateInPage(e,t),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),A(this,ws,new Map);for(const e of u(this,Qe))u(this,ws).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!u(this,ws))return!1;this.disableUserSelect(!1);const e=u(this,ws);A(this,ws,null);let t=!1;for(const[{x:i,y:s,pageIndex:o},a]of e)a.newX=i,a.newY=s,a.newPageIndex=o,t||(t=i!==a.savedX||s!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const r=(i,s,o,a)=>{if(u(this,Bt).has(i.id)){const l=u(this,rn).get(a);l?i._setParentAndPosition(l,s,o):(i.pageIndex=a,i.x=s,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:s,newY:o,newPageIndex:a}]of e)r(i,s,o,a)},undo:()=>{for(const[i,{savedX:s,savedY:o,savedPageIndex:a}]of e)r(i,s,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(u(this,ws))for(const r of u(this,ws).keys())r.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||u(this,Qe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return u(this,Mr)===e}getActive(){return u(this,Mr)}getMode(){return u(this,Xt)}isEditingMode(){return u(this,Xt)!==Se.NONE}get imageManager(){return Ne(this,"imageManager",new uk)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,d=t.rangeCount;c<d;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:r,y:i,width:s,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,d,h,f)=>({x:(d-i)/o,y:1-(c+h-r)/s,width:f/o,height:h/s});break;case"180":a=(c,d,h,f)=>({x:1-(c+h-r)/s,y:1-(d+f-i)/o,width:h/s,height:f/o});break;case"270":a=(c,d,h,f)=>({x:1-(d+f-i)/o,y:(c-r)/s,width:f/o,height:h/s});break;default:a=(c,d,h,f)=>({x:(c-r)/s,y:(d-i)/o,width:h/s,height:f/o});break}const l=[];for(let c=0,d=t.rangeCount;c<d;c++){const h=t.getRangeAt(c);if(!h.collapsed)for(const{x:f,y:m,width:y,height:g}of h.getClientRects())y===0||g===0||l.push(a(f,m,y,g))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(u(this,mh)||A(this,mh,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=u(this,mh))==null||t.delete(e)}renderAnnotationElement(e){var i;const t=(i=u(this,mh))==null?void 0:i.get(e.data.id);if(!t)return;const r=u(this,pi).getRawValue(t);r&&(u(this,Xt)===Se.NONE&&!r.hasBeenModified||r.renderAnnotationElement(e))}setMissingCanvas(e,t,r){var s;const i=(s=u(this,Oa))==null?void 0:s.get(e);i&&(i.setCanvas(t,r),u(this,Oa).delete(e))}addMissingCanvas(e,t){(u(this,Oa)||A(this,Oa,new Map)).set(e,t)}};hh=new WeakMap,Mr=new WeakMap,fh=new WeakMap,Bt=new WeakMap,rn=new WeakMap,ph=new WeakMap,pi=new WeakMap,mh=new WeakMap,mi=new WeakMap,On=new WeakMap,Na=new WeakMap,Ra=new WeakMap,gh=new WeakMap,ja=new WeakMap,ws=new WeakMap,gi=new WeakMap,Ac=new WeakMap,Ig=new WeakMap,Dg=new WeakMap,yh=new WeakMap,Og=new WeakMap,Ss=new WeakMap,Ma=new WeakMap,vh=new WeakMap,La=new WeakMap,As=new WeakMap,ww=new WeakMap,Ia=new WeakMap,xh=new WeakMap,Fg=new WeakMap,Da=new WeakMap,_c=new WeakMap,bh=new WeakMap,Oa=new WeakMap,Bg=new WeakMap,Xt=new WeakMap,Qe=new WeakMap,uo=new WeakMap,Fa=new WeakMap,Ba=new WeakMap,zg=new WeakMap,wh=new WeakMap,$g=new WeakMap,za=new WeakMap,_s=new WeakMap,ho=new WeakMap,Ug=new WeakMap,Vg=new WeakMap,yi=new WeakMap,Sh=new WeakSet,Bx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Hg=new WeakSet,hk=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const r of u(this,rn).values())if(r.hasTextLayer(e))return r;return null},Sw=new WeakSet,F3=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const r=C(this,Sh,Bx).call(this,e).closest(".textLayer"),i=this.getSelectionBoxes(r);i&&(u(this,As)||A(this,As,new T7(this)),u(this,As).show(r,i,this.direction==="ltr"))},Aw=new WeakSet,B3=function(){var s,o,a;const e=document.getSelection();if(!e||e.isCollapsed){u(this,uo)&&((s=u(this,As))==null||s.hide(),A(this,uo,null),C(this,Sn,Yn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===u(this,uo))return;const i=C(this,Sh,Bx).call(this,e).closest(".textLayer");if(!i){u(this,uo)&&((o=u(this,As))==null||o.hide(),A(this,uo,null),C(this,Sn,Yn).call(this,{hasSelectedText:!1}));return}if((a=u(this,As))==null||a.hide(),A(this,uo,t),C(this,Sn,Yn).call(this,{hasSelectedText:!0}),!(u(this,Xt)!==Se.HIGHLIGHT&&u(this,Xt)!==Se.NONE)&&(u(this,Xt)===Se.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),A(this,La,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=u(this,Xt)===Se.HIGHLIGHT?C(this,Hg,hk).call(this,i):null;if(l==null||l.toggleDrawing(),u(this,xh)){const c=new AbortController,d=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&C(this,Ec,um).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else l==null||l.toggleDrawing(!0),C(this,Ec,um).call(this,"main_toolbar")}},Ec=new WeakSet,um=function(e=""){u(this,Xt)===Se.HIGHLIGHT?this.highlightSelection(e):u(this,Ig)&&C(this,Sw,F3).call(this)},_w=new WeakSet,z3=function(){document.addEventListener("selectionchange",C(this,Aw,B3).bind(this),{signal:this._signal})},Ew=new WeakSet,$3=function(){if(u(this,Ma))return;A(this,Ma,new AbortController);const e=this.combinedSignal(u(this,Ma));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},kw=new WeakSet,U3=function(){var e;(e=u(this,Ma))==null||e.abort(),A(this,Ma,null)},qg=new WeakSet,fk=function(){if(u(this,Da))return;A(this,Da,new AbortController);const e=this.combinedSignal(u(this,Da));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},Cw=new WeakSet,V3=function(){var e;(e=u(this,Da))==null||e.abort(),A(this,Da,null)},Gg=new WeakSet,pk=function(){if(u(this,Na))return;A(this,Na,new AbortController);const e=this.combinedSignal(u(this,Na));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Wg=new WeakSet,mk=function(){var e;(e=u(this,Na))==null||e.abort(),A(this,Na,null)},Tw=new WeakSet,H3=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Sn=new WeakSet,Yn=function(e){Object.entries(e).some(([r,i])=>u(this,$g)[r]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,$g),e)}),u(this,Xt)===Se.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,qi,no).call(this,[[Oe.HIGHLIGHT_FREE,!0]]))},qi=new WeakSet,no=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},Pw=new WeakSet,q3=async function(){if(!u(this,Ia)){A(this,Ia,!0);const e=[];for(const t of u(this,rn).values())e.push(t.enable());await Promise.all(e);for(const t of u(this,Bt).values())t.enable()}},Nw=new WeakSet,G3=function(){if(this.unselectAll(),u(this,Ia)){A(this,Ia,!1);for(const e of u(this,rn).values())e.disable();for(const e of u(this,Bt).values())e.disable()}},Kg=new WeakSet,gk=function(e){const t=u(this,rn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Rw=new WeakSet,W3=function(){let e=null;for(e of u(this,Qe));return e},kc=new WeakSet,dm=function(){if(u(this,Bt).size===0)return!0;if(u(this,Bt).size===1)for(const e of u(this,Bt).values())return e.isEmpty();return!1},Xg=new WeakSet,yk=function(e){for(const t of u(this,Qe))t.unselect();u(this,Qe).clear();for(const t of e)t.isEmpty()||(u(this,Qe).add(t),t.select());C(this,Sn,Yn).call(this,{hasSelectedEditor:this.hasSelection})},X(Gd,"TRANSLATE_SMALL",1),X(Gd,"TRANSLATE_BIG",10);let Ul=Gd;var cn,Es,Gi,Ah,ks,Lr,_h,Cs,pr,fo,Cc,Ts,$a,Tc,hm,Eh,zx;const Qn=class Qn{constructor(e){S(this,Tc);S(this,Eh);S(this,cn,null);S(this,Es,!1);S(this,Gi,null);S(this,Ah,null);S(this,ks,null);S(this,Lr,null);S(this,_h,!1);S(this,Cs,null);S(this,pr,null);S(this,fo,null);S(this,Cc,null);S(this,Ts,!1);A(this,pr,e),A(this,Ts,e._uiManager.useNewAltTextFlow),u(Qn,$a)||A(Qn,$a,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Qn._l10n??(Qn._l10n=e)}async render(){const e=A(this,Gi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=A(this,Ah,document.createElement("span"));e.append(t),u(this,Ts)?(e.classList.add("new"),e.setAttribute("data-l10n-id",u(Qn,$a).missing),t.setAttribute("data-l10n-id",u(Qn,$a)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const r=u(this,pr)._uiManager._signal;e.addEventListener("contextmenu",si,{signal:r}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),u(this,pr)._uiManager.editAltText(u(this,pr)),u(this,Ts)&&u(this,pr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:u(this,Tc,hm)}})};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(A(this,_h,!0),i(s))},{signal:r}),await C(this,Eh,zx).call(this),e}finish(){u(this,Gi)&&(u(this,Gi).focus({focusVisible:u(this,_h)}),A(this,_h,!1))}isEmpty(){return u(this,Ts)?u(this,cn)===null:!u(this,cn)&&!u(this,Es)}hasData(){return u(this,Ts)?u(this,cn)!==null||!!u(this,fo):this.isEmpty()}get guessedText(){return u(this,fo)}async setGuessedText(e){u(this,cn)===null&&(A(this,fo,e),A(this,Cc,await Qn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,Eh,zx).call(this))}toggleAltTextBadge(e=!1){var t;if(!u(this,Ts)||u(this,cn)){(t=u(this,Cs))==null||t.remove(),A(this,Cs,null);return}if(!u(this,Cs)){const r=A(this,Cs,document.createElement("div"));r.className="noAltTextBadge",u(this,pr).div.append(r)}u(this,Cs).classList.toggle("hidden",!e)}serialize(e){let t=u(this,cn);return!e&&u(this,fo)===t&&(t=u(this,Cc)),{altText:t,decorative:u(this,Es),guessedText:u(this,fo),textWithDisclaimer:u(this,Cc)}}get data(){return{altText:u(this,cn),decorative:u(this,Es)}}set data({altText:e,decorative:t,guessedText:r,textWithDisclaimer:i,cancel:s=!1}){r&&(A(this,fo,r),A(this,Cc,i)),!(u(this,cn)===e&&u(this,Es)===t)&&(s||(A(this,cn,e),A(this,Es,t)),C(this,Eh,zx).call(this))}toggle(e=!1){u(this,Gi)&&(!e&&u(this,Lr)&&(clearTimeout(u(this,Lr)),A(this,Lr,null)),u(this,Gi).disabled=!e)}shown(){u(this,pr)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:u(this,Tc,hm)}})}destroy(){var e,t;(e=u(this,Gi))==null||e.remove(),A(this,Gi,null),A(this,Ah,null),A(this,ks,null),(t=u(this,Cs))==null||t.remove(),A(this,Cs,null)}};cn=new WeakMap,Es=new WeakMap,Gi=new WeakMap,Ah=new WeakMap,ks=new WeakMap,Lr=new WeakMap,_h=new WeakMap,Cs=new WeakMap,pr=new WeakMap,fo=new WeakMap,Cc=new WeakMap,Ts=new WeakMap,$a=new WeakMap,Tc=new WeakSet,hm=function(){return u(this,cn)&&"added"||u(this,cn)===null&&this.guessedText&&"review"||"missing"},Eh=new WeakSet,zx=async function(){var i,s,o;const e=u(this,Gi);if(!e)return;if(u(this,Ts)){if(e.classList.toggle("done",!!u(this,cn)),e.setAttribute("data-l10n-id",u(Qn,$a)[u(this,Tc,hm)]),(i=u(this,Ah))==null||i.setAttribute("data-l10n-id",u(Qn,$a)[`${u(this,Tc,hm)}-label`]),!u(this,cn)){(s=u(this,ks))==null||s.remove();return}}else{if(!u(this,cn)&&!u(this,Es)){e.classList.remove("done"),(o=u(this,ks))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=u(this,ks);if(!t){A(this,ks,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${u(this,pr).id}`;const a=100,l=u(this,pr)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(u(this,Lr)),A(this,Lr,null)},{once:!0}),e.addEventListener("mouseenter",()=>{A(this,Lr,setTimeout(()=>{A(this,Lr,null),u(this,ks).classList.add("show"),u(this,pr)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),e.addEventListener("mouseleave",()=>{var c;u(this,Lr)&&(clearTimeout(u(this,Lr)),A(this,Lr,null)),(c=u(this,ks))==null||c.classList.remove("show")},{signal:l})}u(this,Es)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=u(this,cn)),t.parentNode||e.append(t);const r=u(this,pr).getElementForAltText();r==null||r.setAttribute("aria-describedby",t.id)},S(Qn,$a,null),X(Qn,"_l10n",null);let ew=Qn;var An,vi,Pc,ht,Yg,Nc,Wi,Rc,jc,Mc,Qg,vk;class ax{constructor(e){S(this,Qg);S(this,An,null);S(this,vi,null);S(this,Pc,!1);S(this,ht,null);S(this,Yg,null);S(this,Nc,null);S(this,Wi,null);S(this,Rc,null);S(this,jc,!1);S(this,Mc,null);A(this,ht,e)}renderForToolbar(){const e=A(this,vi,document.createElement("button"));return e.className="comment",C(this,Qg,vk).call(this,e,!1)}renderForStandalone(){const e=A(this,An,document.createElement("button"));e.className="annotationCommentButton";const t=u(this,ht).commentButtonPosition;if(t){const{style:r}=e;r.insetInlineEnd=`calc(${100*(u(this,ht)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,r.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=u(this,ht).commentButtonColor;i&&(r.backgroundColor=i)}return C(this,Qg,vk).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=u(this,An)??u(this,vi))==null||e.focus()},0)}onUpdatedColor(){if(!u(this,An))return;const e=u(this,ht).commentButtonColor;e&&(u(this,An).style.backgroundColor=e),u(this,ht)._uiManager.updatePopupColor(u(this,ht))}get commentButtonWidth(){var e;return(((e=u(this,An))==null?void 0:e.getBoundingClientRect().width)??0)/u(this,ht).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(u(this,Mc))return u(this,Mc);if(!u(this,An))return null;const{x:e,y:t,height:r}=u(this,An).getBoundingClientRect(),{x:i,y:s,width:o,height:a}=u(this,ht).parent.boundingClientRect;return[(e-i)/o,(t+r-s)/a]}set commentPopupPositionInLayer(e){A(this,Mc,e)}hasDefaultPopupPosition(){return u(this,Mc)===null}removeStandaloneCommentButton(){var e;(e=u(this,An))==null||e.remove(),A(this,An,null)}removeToolbarCommentButton(){var e;(e=u(this,vi))==null||e.remove(),A(this,vi,null)}setCommentButtonStates({selected:e,hasPopup:t}){u(this,An)&&(u(this,An).classList.toggle("selected",e),u(this,An).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let r,i;if(t)[r,i]=t;else{[r,i]=u(this,ht).commentButtonPosition;const{width:d,height:h,x:f,y:m}=u(this,ht);r=f+r*d,i=m+i*h}const s=u(this,ht).parent.boundingClientRect,{x:o,y:a,width:l,height:c}=s;u(this,ht)._uiManager.editComment(u(this,ht),o+r*l,a+i*c,{...e,parentDimensions:s})}finish(){u(this,vi)&&(u(this,vi).focus({focusVisible:u(this,Pc)}),A(this,Pc,!1))}isDeleted(){return u(this,jc)||u(this,Wi)===""}isEmpty(){return u(this,Wi)===null}hasBeenEdited(){return this.isDeleted()||u(this,Wi)!==u(this,Yg)}serialize(){return this.data}get data(){return{text:u(this,Wi),richText:u(this,Nc),date:u(this,Rc),deleted:this.isDeleted()}}set data(e){if(e!==u(this,Wi)&&A(this,Nc,null),e===null){A(this,Wi,""),A(this,jc,!0);return}A(this,Wi,e),A(this,Rc,new Date),A(this,jc,!1)}setInitialText(e,t=null){A(this,Yg,e),this.data=e,A(this,Rc,null),A(this,Nc,t)}shown(){}destroy(){var e,t;(e=u(this,vi))==null||e.remove(),A(this,vi,null),(t=u(this,An))==null||t.remove(),A(this,An,null),A(this,Wi,""),A(this,Nc,null),A(this,Rc,null),A(this,ht,null),A(this,Pc,!1),A(this,jc,!1)}}An=new WeakMap,vi=new WeakMap,Pc=new WeakMap,ht=new WeakMap,Yg=new WeakMap,Nc=new WeakMap,Wi=new WeakMap,Rc=new WeakMap,jc=new WeakMap,Mc=new WeakMap,Qg=new WeakSet,vk=function(e,t){if(!u(this,ht)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[u(this,ht)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const r=u(this,ht)._uiManager._signal;if(!(r instanceof AbortSignal)||r.aborted)return e;e.addEventListener("contextmenu",si,{signal:r}),t&&(e.addEventListener("focusin",s=>{u(this,ht)._focusEventsAllowed=!1,Rt(s)},{capture:!0,signal:r}),e.addEventListener("focusout",s=>{u(this,ht)._focusEventsAllowed=!0,Rt(s)},{capture:!0,signal:r})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:r});const i=s=>{s.preventDefault(),e===u(this,vi)?this.edit():u(this,ht).toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:r}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(A(this,Pc,!0),i(s))},{signal:r}),e.addEventListener("pointerenter",()=>{u(this,ht).toggleComment(!1,!0)},{signal:r}),e.addEventListener("pointerleave",()=>{u(this,ht).toggleComment(!1,!1)},{signal:r}),e};var kh,Lc,Jg,Zg,ey,ty,ny,po,Ic,mo,Dc,go,jw,K3,Mw,X3,Lw,Y3;const o2=class o2{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){S(this,jw);S(this,Mw);S(this,Lw);S(this,kh,void 0);S(this,Lc,!1);S(this,Jg,null);S(this,Zg,void 0);S(this,ey,void 0);S(this,ty,void 0);S(this,ny,void 0);S(this,po,null);S(this,Ic,void 0);S(this,mo,null);S(this,Dc,void 0);S(this,go,null);A(this,kh,e),A(this,Jg,r),A(this,Zg,t),A(this,ey,i),A(this,ty,s),A(this,ny,o),A(this,Dc,new AbortController),A(this,Ic,AbortSignal.any([a,u(this,Dc).signal])),e.addEventListener("touchstart",C(this,jw,K3).bind(this),{passive:!1,signal:u(this,Ic)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ds.pixelRatio}destroy(){var e,t;(e=u(this,Dc))==null||e.abort(),A(this,Dc,null),(t=u(this,po))==null||t.abort(),A(this,po,null)}};kh=new WeakMap,Lc=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,ey=new WeakMap,ty=new WeakMap,ny=new WeakMap,po=new WeakMap,Ic=new WeakMap,mo=new WeakMap,Dc=new WeakMap,go=new WeakMap,jw=new WeakSet,K3=function(e){var i,s,o;if((i=u(this,Zg))!=null&&i.call(this))return;if(e.touches.length===1){if(u(this,po))return;const a=A(this,po,new AbortController),l=AbortSignal.any([u(this,Ic),a.signal]),c=u(this,kh),d={capture:!0,signal:l,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=u(this,po))==null||m.abort(),A(this,po,null))};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Rt(f),h(f))},d),c.addEventListener("pointerup",h,d),c.addEventListener("pointercancel",h,d);return}if(!u(this,go)){A(this,go,new AbortController);const a=AbortSignal.any([u(this,Ic),u(this,go).signal]),l=u(this,kh),c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",C(this,Mw,X3).bind(this),c);const d=C(this,Lw,Y3).bind(this);l.addEventListener("touchend",d,c),l.addEventListener("touchcancel",d,c),c.capture=!0,l.addEventListener("pointerdown",Rt,c),l.addEventListener("pointermove",Rt,c),l.addEventListener("pointercancel",Rt,c),l.addEventListener("pointerup",Rt,c),(s=u(this,ey))==null||s.call(this)}if(Rt(e),e.touches.length!==2||(o=u(this,Jg))!=null&&o.call(this)){A(this,mo,null);return}let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]),A(this,mo,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:r.screenX,touch1Y:r.screenY})},Mw=new WeakSet,X3=function(e){var E;if(!u(this,mo)||e.touches.length!==2)return;Rt(e);let[t,r]=e.touches;t.identifier>r.identifier&&([t,r]=[r,t]);const{screenX:i,screenY:s}=t,{screenX:o,screenY:a}=r,l=u(this,mo),{touch0X:c,touch0Y:d,touch1X:h,touch1Y:f}=l,m=h-c,y=f-d,g=o-i,b=a-s,v=Math.hypot(g,b)||1,x=Math.hypot(m,y)||1;if(!u(this,Lc)&&Math.abs(x-v)<=o2.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!u(this,Lc)){A(this,Lc,!0);return}const w=[(i+o)/2,(s+a)/2];(E=u(this,ty))==null||E.call(this,w,x,v)},Lw=new WeakSet,Y3=function(e){var t;e.touches.length>=2||(u(this,go)&&(u(this,go).abort(),A(this,go,null),(t=u(this,ny))==null||t.call(this)),u(this,mo)&&(Rt(e),A(this,mo,null),A(this,Lc,!1)))};let Sg=o2;var Oc,Ki,_t,ot,yo,Ch,Ua,ry,_n,Fc,vo,Ps,Va,iy,Bc,Ir,sy,zc,xo,Ns,Th,Ph,xi,$c,oy,Iw,ay,xk,ly,bk,Nh,$x,Dw,Q3,Ow,J3,cy,wk,Rh,Ux,uy,Sk,Fw,Z3,Bw,e4,zw,t4,dy,Ak,$w,n4,hy,_k,Uw,r4,Vw,i4,Hw,s4,fy,Ek,Uc,fm;const _e=class _e{constructor(e){S(this,ay);S(this,Nh);S(this,Dw);S(this,Ow);S(this,cy);S(this,Rh);S(this,uy);S(this,Fw);S(this,Bw);S(this,zw);S(this,dy);S(this,$w);S(this,hy);S(this,Uw);S(this,Vw);S(this,Hw);S(this,fy);S(this,Uc);S(this,Oc,null);S(this,Ki,null);S(this,_t,null);S(this,ot,null);S(this,yo,null);S(this,Ch,!1);S(this,Ua,null);S(this,ry,"");S(this,_n,null);S(this,Fc,null);S(this,vo,null);S(this,Ps,null);S(this,Va,null);S(this,iy,"");S(this,Bc,!1);S(this,Ir,null);S(this,sy,!1);S(this,zc,!1);S(this,xo,!1);S(this,Ns,null);S(this,Th,0);S(this,Ph,0);S(this,xi,null);S(this,$c,null);X(this,"isSelected",!1);X(this,"_isCopy",!1);X(this,"_editToolbar",null);X(this,"_initialOptions",Object.create(null));X(this,"_initialData",null);X(this,"_isVisible",!0);X(this,"_uiManager",null);X(this,"_focusEventsAllowed",!0);S(this,oy,!1);S(this,Iw,_e._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=_e.prototype._resizeWithKeyboard,t=Ul.TRANSLATE_SMALL,r=Ul.TRANSLATE_BIG;return Ne(this,"_resizerKeyboardManager",new wv([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,r]}],[["Escape","mac+Escape"],_e.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ne(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new R7({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(_e._l10n??(_e._l10n=e),_e._l10nResizer||(_e._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),_e._borderLineWidth!==-1)return;const r=getComputedStyle(document.documentElement);_e._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ct("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return u(this,oy)}set _isDraggable(e){var t;A(this,oy,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=u(this,Iw)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(C(this,Uc,fm).call(this),(t=u(this,Ps))==null||t.remove(),A(this,Ps,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(u(this,Bc)?A(this,Bc,!1):this.parent.setSelected(this))}focusout(e){var r;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(r=this.parent)!=null&&r.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,r,i){const[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(e+r)/s,this.y=(t+i)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[r,i]=this.parentDimensions;this.setAt(e*r,t*i,this.width*r,this.height*i),this._onTranslated()}translate(e,t){C(this,ay,xk).call(this,this.parentDimensions,e,t)}translateInPage(e,t){u(this,Ir)||A(this,Ir,[this.x,this.y,this.width,this.height]),C(this,ay,xk).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){u(this,Ir)||A(this,Ir,[this.x,this.y,this.width,this.height]);const{div:r,parentDimensions:[i,s]}=this;if(this.x+=e/i,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:d}=r;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!u(this,Ir)&&(u(this,Ir)[0]!==this.x||u(this,Ir)[1]!==this.y)}get _hasBeenResized(){return!!u(this,Ir)&&(u(this,Ir)[2]!==this.width||u(this,Ir)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:r}=_e,i=r/e,s=r/t;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[r,i]}=this;let{x:s,y:o,width:a,height:l}=this;if(a*=r,l*=i,s*=r,o*=i,this._mustFixPosition)switch(e){case 0:s=Vn(s,0,r-a),o=Vn(o,0,i-l);break;case 90:s=Vn(s,0,r-l),o=Vn(o,a,i);break;case 180:s=Vn(s,a,r),o=Vn(o,l,i);break;case 270:s=Vn(s,l,r),o=Vn(o,0,i-a);break}this.x=s/=r,this.y=o/=i;const[c,d]=this.getBaseTranslation();s+=c,o+=d,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var r;return C(r=_e,ly,bk).call(r,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var r;return C(r=_e,ly,bk).call(r,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,r]}=this;return[t*e,r*e]}setDims(){const{div:{style:e},width:t,height:r}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*r).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=u(this,_t))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||u(this,zc))return this._editToolbar;this._editToolbar=new lk(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,r]of e)await this._editToolbar.addButton(t,r);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=u(this,_t))==null||t.destroy()}addContainer(e){var r;const t=(r=this._editToolbar)==null?void 0:r.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return u(this,_t)||(ew.initialize(_e._l10n),A(this,_t,new ew(this)),u(this,Oc)&&(u(this,_t).data=u(this,Oc),A(this,Oc,null))),u(this,_t)}get altTextData(){var e;return(e=u(this,_t))==null?void 0:e.data}set altTextData(e){u(this,_t)&&(u(this,_t).data=e)}get guessedAltText(){var e;return(e=u(this,_t))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=u(this,_t))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=u(this,_t))==null?void 0:t.serialize(e)}hasAltText(){return!!u(this,_t)&&!u(this,_t).isEmpty()}hasAltTextData(){var e;return((e=u(this,_t))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=u(this,ot))==null||e.focusButton()}addCommentButton(){return u(this,ot)||A(this,ot,new ax(this))}addStandaloneCommentButton(){if(u(this,yo)){this._uiManager.isEditingMode()&&u(this,yo).classList.remove("hidden");return}this.hasComment&&(A(this,yo,u(this,ot).renderForStandalone()),this.div.append(u(this,yo)))}removeStandaloneCommentButton(){u(this,ot).removeStandaloneCommentButton(),A(this,yo,null)}hideStandaloneCommentButton(){var e;(e=u(this,yo))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:r,deleted:i}}=u(this,ot);return{text:t,richText:e,date:r,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){u(this,ot)||A(this,ot,new ax(this)),u(this,ot).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:r}){if(!t||(u(this,ot)||A(this,ot,new ax(this)),u(this,ot).setInitialText(e,r),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return(e=u(this,ot))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=u(this,ot))==null?void 0:e.isDeleted()}get hasComment(){return!!u(this,ot)&&!u(this,ot).isEmpty()&&!u(this,ot).isDeleted()}async editComment(e){u(this,ot)||A(this,ot,new ax(this)),u(this,ot).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){u(this,ot).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,a=o+s+1,l=i-100,c=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,c,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){u(this,ot).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=u(this,Ch)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),C(this,hy,_k).call(this);const[t,r]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*r/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/r).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),D3(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(u(this,$c)||A(this,$c,new Sg({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,Fw,Z3).bind(this),onPinching:C(this,Bw,e4).bind(this),onPinchEnd:C(this,zw,t4).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(A(this,Bc,!0),this._isDraggable){C(this,$w,n4).call(this,e);return}C(this,dy,Ak).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){u(this,Ns)&&clearTimeout(u(this,Ns)),A(this,Ns,setTimeout(()=>{var e;A(this,Ns,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,r){e.changeParent(this),this.x=t,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,r=this.rotation){const i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/i,d=t/i,h=this.x*s,f=this.y*o,m=this.width*s,y=this.height*o;switch(r){case 0:return[h+c+a,o-f-d-y+l,h+c+m+a,o-f-d+l];case 90:return[h+d+a,o-f+c+l,h+d+y+a,o-f+c+m+l];case 180:return[h-c-m+a,o-f+d+l,h-c+a,o-f+d+y+l];case 270:return[h-d-y+a,o-f-c-m+l,h-d+a,o-f-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[r,i,s,o]=e,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,t-o,a,l];case 90:return[r,t-i,l,a];case 180:return[s,t-i,a,l];case 270:return[s,t-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&_e._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=u(this,ot))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:r,opacity:i,deleted:s,richText:o},uid:a,pageIndex:l,creationDate:c,modificationDate:d}=this;return{id:a,pageIndex:l,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:c,modificationDate:r||d,popupRef:!s,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),A(this,zc,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),A(this,zc,!1),!0):!1}isInEditMode(){return u(this,zc)}shouldGetKeyboardEvents(){return u(this,xo)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return t<o&&i>0&&e<s&&r>0}rebuild(){C(this,hy,_k).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var r;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((r=this._initialData)==null?void 0:r.popupRef)||""}}static async deserialize(e,t,r){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:r,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,A(i,Oc,e.accessibilityData),i._isCopy=e.isCopy||!1;const[s,o]=i.pageDimensions,[a,l,c,d]=i.getRectInCurrentCoords(e.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=d/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=u(this,Va))==null||e.abort(),A(this,Va,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),u(this,Ns)&&(clearTimeout(u(this,Ns)),A(this,Ns,null)),C(this,Uc,fm).call(this),this.removeEditToolbar(),u(this,xi)){for(const r of u(this,xi).values())clearTimeout(r);A(this,xi,null)}this.parent=null,(t=u(this,$c))==null||t.destroy(),A(this,$c,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,Dw,Q3).call(this),u(this,_n).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[r,i,s,o]=this.getPDFRect();return[_e._round(r+(s-r)*e),_e._round(i+(o-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return u(this,ot).commentPopupPositionInLayer}set commentPopupPosition(e){u(this,ot).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return u(this,ot).hasDefaultPopupPosition()}get commentButtonWidth(){return u(this,ot).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){u(this,ot).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),A(this,vo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=u(this,_n).children;if(!u(this,Ki)){A(this,Ki,Array.from(t));const o=C(this,Uw,r4).bind(this),a=C(this,Vw,i4).bind(this),l=this._uiManager._signal;for(const c of u(this,Ki)){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",C(this,Hw,s4).bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",_e._l10nResizer[d])}}const r=u(this,Ki)[0];let i=0;for(const o of t){if(o===r)break;i++}const s=(360-this.rotation+this.parentRotation)%360/90*(u(this,Ki).length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)u(this,_n).append(u(this,_n).firstChild);else if(s>i)for(let a=0;a<s-i;a++)u(this,_n).firstChild.before(u(this,_n).lastChild);let o=0;for(const a of t){const c=u(this,Ki)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",_e._l10nResizer[c])}}C(this,fy,Ek).call(this,0),A(this,xo,!0),u(this,_n).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){u(this,xo)&&C(this,uy,Sk).call(this,u(this,iy),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,Uc,fm).call(this),this.div.focus()}select(){var e,t,r;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,s;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(r=u(this,_t))==null||r.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,r,i,s;this.isSelected&&(this.isSelected=!1,(e=u(this,_n))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(r=this.div)!=null&&r.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(s=u(this,_t))==null||s.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return u(this,sy)}set isEditing(e){A(this,sy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){u(this,xi)||A(this,xi,new Map);const{action:r}=e;let i=u(this,xi).get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),u(this,xi).delete(r),u(this,xi).size===0&&A(this,xi,null)},_e._telemetryTimeout),u(this,xi).set(r,i);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),A(this,Ch,!1)}disable(){this.div&&(this.div.tabIndex=-1),A(this,Ch,!0)}updateFakeAnnotationElement(e){if(!u(this,Ps)&&!this.deleted){A(this,Ps,e.addFakeAnnotation(this));return}if(this.deleted){u(this,Ps).remove(),A(this,Ps,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&u(this,Ps).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const r=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),r.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Oc=new WeakMap,Ki=new WeakMap,_t=new WeakMap,ot=new WeakMap,yo=new WeakMap,Ch=new WeakMap,Ua=new WeakMap,ry=new WeakMap,_n=new WeakMap,Fc=new WeakMap,vo=new WeakMap,Ps=new WeakMap,Va=new WeakMap,iy=new WeakMap,Bc=new WeakMap,Ir=new WeakMap,sy=new WeakMap,zc=new WeakMap,xo=new WeakMap,Ns=new WeakMap,Th=new WeakMap,Ph=new WeakMap,xi=new WeakMap,$c=new WeakMap,oy=new WeakMap,Iw=new WeakMap,ay=new WeakSet,xk=function([e,t],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ly=new WeakSet,bk=function(e,t,r){switch(r){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Nh=new WeakSet,$x=function(e){switch(e){case 90:{const[t,r]=this.pageDimensions;return[0,-t/r,r/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,r]=this.pageDimensions;return[0,t/r,-r/t,0]}default:return[1,0,0,1]}},Dw=new WeakSet,Q3=function(){if(u(this,_n))return;A(this,_n,document.createElement("div")),u(this,_n).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const r of e){const i=document.createElement("div");u(this,_n).append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",C(this,Ow,J3).bind(this,r),{signal:t}),i.addEventListener("contextmenu",si,{signal:t}),i.tabIndex=-1}this.div.prepend(u(this,_n))},Ow=new WeakSet,J3=function(e,t){var d;t.preventDefault();const{isMac:r}=xn.platform;if(t.button!==0||t.ctrlKey&&r)return;(d=u(this,_t))==null||d.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,A(this,Fc,[t.screenX,t.screenY]);const s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,uy,Sk).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Rt,{passive:!1,signal:o}),window.addEventListener("contextmenu",si,{signal:o}),A(this,vo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=u(this,_t))==null||h.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,C(this,Rh,Ux).call(this)};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})},cy=new WeakSet,wk=function(e,t,r,i){this.width=r,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Rh=new WeakSet,Ux=function(){if(!u(this,vo))return;const{savedX:e,savedY:t,savedWidth:r,savedHeight:i}=u(this,vo);A(this,vo,null);const s=this.x,o=this.y,a=this.width,l=this.height;s===e&&o===t&&a===r&&l===i||this.addCommands({cmd:C(this,cy,wk).bind(this,s,o,a,l),undo:C(this,cy,wk).bind(this,e,t,r,i),mustExec:!0})},uy=new WeakSet,Sk=function(e,t){const[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=_e.MIN_SIZE/r,d=_e.MIN_SIZE/i,h=C(this,Nh,$x).call(this,this.rotation),f=(D,z)=>[h[0]*D+h[2]*z,h[1]*D+h[3]*z],m=C(this,Nh,$x).call(this,360-this.rotation),y=(D,z)=>[m[0]*D+m[2]*z,m[1]*D+m[3]*z];let g,b,v=!1,x=!1;switch(e){case"topLeft":v=!0,g=(D,z)=>[0,0],b=(D,z)=>[D,z];break;case"topMiddle":g=(D,z)=>[D/2,0],b=(D,z)=>[D/2,z];break;case"topRight":v=!0,g=(D,z)=>[D,0],b=(D,z)=>[0,z];break;case"middleRight":x=!0,g=(D,z)=>[D,z/2],b=(D,z)=>[0,z/2];break;case"bottomRight":v=!0,g=(D,z)=>[D,z],b=(D,z)=>[0,0];break;case"bottomMiddle":g=(D,z)=>[D/2,z],b=(D,z)=>[D/2,0];break;case"bottomLeft":v=!0,g=(D,z)=>[0,z],b=(D,z)=>[D,0];break;case"middleLeft":x=!0,g=(D,z)=>[0,z/2],b=(D,z)=>[D,z/2];break}const w=g(a,l),E=b(a,l);let T=f(...E);const k=_e._round(s+T[0]),P=_e._round(o+T[1]);let R=1,L=1,O,F;if(t.fromKeyboard)({deltaX:O,deltaY:F}=t);else{const{screenX:D,screenY:z}=t,[$,V]=u(this,Fc);[O,F]=this.screenToPageTranslation(D-$,z-V),u(this,Fc)[0]=D,u(this,Fc)[1]=z}if([O,F]=y(O/r,F/i),v){const D=Math.hypot(a,l);R=L=Math.max(Math.min(Math.hypot(E[0]-w[0]-O,E[1]-w[1]-F)/D,1/a,1/l),c/a,d/l)}else x?R=Vn(Math.abs(E[0]-w[0]-O),c,1)/a:L=Vn(Math.abs(E[1]-w[1]-F),d,1)/l;const I=_e._round(a*R),U=_e._round(l*L);T=f(...b(I,U));const B=k-T[0],M=P-T[1];u(this,Ir)||A(this,Ir,[this.x,this.y,this.width,this.height]),this.width=I,this.height=U,this.x=B,this.y=M,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Fw=new WeakSet,Z3=function(){var e;A(this,vo,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=u(this,_t))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Bw=new WeakSet,e4=function(e,t,r){let s=.7*(r/t)+1-.7;if(s===1)return;const o=C(this,Nh,$x).call(this,this.rotation),a=(k,P)=>[o[0]*k+o[2]*P,o[1]*k+o[3]*P],[l,c]=this.parentDimensions,d=this.x,h=this.y,f=this.width,m=this.height,y=_e.MIN_SIZE/l,g=_e.MIN_SIZE/c;s=Math.max(Math.min(s,1/f,1/m),y/f,g/m);const b=_e._round(f*s),v=_e._round(m*s);if(b===f&&v===m)return;u(this,Ir)||A(this,Ir,[d,h,f,m]);const x=a(f/2,m/2),w=_e._round(d+x[0]),E=_e._round(h+x[1]),T=a(b/2,v/2);this.x=w-T[0],this.y=E-T[1],this.width=b,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},zw=new WeakSet,t4=function(){var e;(e=u(this,_t))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,Rh,Ux).call(this)},dy=new WeakSet,Ak=function(e){const{isMac:t}=xn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},$w=new WeakSet,n4=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let r=!1;const i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=c=>{i.abort(),A(this,Ua,null),A(this,Bc,!1),this._uiManager.endDragSession()||C(this,dy,Ak).call(this,c),r&&this._onStopDragging()};t&&(A(this,Th,e.clientX),A(this,Ph,e.clientY),A(this,Ua,e.pointerId),A(this,ry,e.pointerType),window.addEventListener("pointermove",c=>{r||(r=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=c;if(f!==u(this,Ua)){Rt(c);return}const[m,y]=this.screenToPageTranslation(d-u(this,Th),h-u(this,Ph));A(this,Th,d),A(this,Ph,h),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",Rt,o),window.addEventListener("pointerdown",c=>{c.pointerType===u(this,ry)&&(u(this,$c)||c.isPrimary)&&a(c),Rt(c)},o));const l=c=>{if(!u(this,Ua)||u(this,Ua)===c.pointerId){a(c);return}Rt(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},hy=new WeakSet,_k=function(){if(u(this,Va)||!this.div)return;A(this,Va,new AbortController);const e=this._uiManager.combinedSignal(u(this,Va));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Uw=new WeakSet,r4=function(e){_e._resizerKeyboardManager.exec(this,e)},Vw=new WeakSet,i4=function(e){var t;u(this,xo)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==u(this,_n)&&C(this,Uc,fm).call(this)},Hw=new WeakSet,s4=function(e){A(this,iy,u(this,xo)?e:"")},fy=new WeakSet,Ek=function(e){if(u(this,Ki))for(const t of u(this,Ki))t.tabIndex=e},Uc=new WeakSet,fm=function(){A(this,xo,!1),C(this,fy,Ek).call(this,-1),C(this,Rh,Ux).call(this)},S(_e,ly),X(_e,"_l10n",null),X(_e,"_l10nResizer",null),X(_e,"_borderLineWidth",-1),X(_e,"_colorManager",new dk),X(_e,"_zIndex",1),X(_e,"_telemetryTimeout",1e3);let gt=_e;class R7 extends gt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const zj=3285377520,ci=4294901760,gs=65535;class o4{constructor(e){this.h1=e?e&4294967295:zj,this.h2=e?e&4294967295:zj}update(e){let t,r;if(typeof e=="string"){t=new Uint8Array(e.length*2),r=0;for(let g=0,b=e.length;g<b;g++){const v=e.charCodeAt(g);v<=255?t[r++]=v:(t[r++]=v>>>8,t[r++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),r=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=r>>2,s=r-i*4,o=new Uint32Array(t.buffer,0,i);let a=0,l=0,c=this.h1,d=this.h2;const h=3432918353,f=461845907,m=h&gs,y=f&gs;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*h&ci|a*m&gs,a=a<<15|a>>>17,a=a*f&ci|a*y&gs,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*h&ci|l*m&gs,l=l<<15|l>>>17,l=l*f&ci|l*y&gs,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,s){case 3:a^=t[i*4+2]<<16;case 2:a^=t[i*4+1]<<8;case 1:a^=t[i*4],a=a*h&ci|a*m&gs,a=a<<15|a>>>17,a=a*f&ci|a*y&gs,i&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ci|e*36045&gs,t=t*4283543511&ci|((t<<16|e>>>16)*2950163797&ci)>>>16,e^=t>>>1,e=e*444984403&ci|e*60499&gs,t=t*3301882366&ci|((t<<16|e>>>16)*3120437893&ci)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const kk=Object.freeze({map:null,hash:"",transfer:void 0});var Vc,Hc,bo,En,qw,a4;class RP{constructor(){S(this,qw);S(this,Vc,!1);S(this,Hc,null);S(this,bo,null);S(this,En,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const r=u(this,En).get(e);return r===void 0?t:Object.assign(t,r)}getRawValue(e){return u(this,En).get(e)}remove(e){const t=u(this,En).get(e);if(t!==void 0&&(t instanceof gt&&u(this,bo).delete(t.annotationElementId),u(this,En).delete(e),u(this,En).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const r of u(this,En).values())if(r instanceof gt)return;this.onAnnotationEditor(null)}}setValue(e,t){const r=u(this,En).get(e);let i=!1;if(r!==void 0)for(const[s,o]of Object.entries(t))r[s]!==o&&(i=!0,r[s]=o);else i=!0,u(this,En).set(e,t);i&&C(this,qw,a4).call(this),t instanceof gt&&((u(this,bo)||A(this,bo,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return u(this,En).has(e)}get size(){return u(this,En).size}resetModified(){u(this,Vc)&&(A(this,Vc,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new l4(this)}get serializable(){if(u(this,En).size===0)return kk;const e=new Map,t=new o4,r=[],i=Object.create(null);let s=!1;for(const[o,a]of u(this,En)){const l=a instanceof gt?a.serialize(!1,i):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const o of e.values())o.bitmap&&r.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:r}:kk}get editorStats(){let e=null;const t=new Map;let r=0,i=0;for(const s of u(this,En).values()){if(!(s instanceof gt)){s.popup&&(s.popup.deleted?i+=1:r+=1);continue}s.isCommentDeleted?i+=1:s.hasEditedComment&&(r+=1);const o=s.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(s).constructor),e||(e=Object.create(null));const l=e[a]||(e[a]=new Map);for(const[c,d]of Object.entries(o)){if(c==="type")continue;let h=l.get(c);h||(h=new Map,l.set(c,h));const f=h.get(d)??0;h.set(d,f+1)}}if((i>0||r>0)&&(e||(e=Object.create(null)),e.comments={deleted:i,edited:r}),!e)return null;for(const[s,o]of t)e[s]=o.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){A(this,Hc,null)}updateEditor(e,t){var i;const r=(i=u(this,bo))==null?void 0:i.get(e);return r?(r.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=u(this,bo))==null?void 0:t.get(e))||null}get modifiedIds(){if(u(this,Hc))return u(this,Hc);const e=[];if(u(this,bo))for(const t of u(this,bo).values())t.serialize()&&e.push(t.annotationElementId);return A(this,Hc,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return u(this,En).entries()}}Vc=new WeakMap,Hc=new WeakMap,bo=new WeakMap,En=new WeakMap,qw=new WeakSet,a4=function(){u(this,Vc)||(A(this,Vc,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var py;class l4 extends RP{constructor(t){super();S(this,py,void 0);const{map:r,hash:i,transfer:s}=t.serializable,o=structuredClone(r,s?{transfer:s}:null);A(this,py,{map:o,hash:i,transfer:s})}get print(){ct("Should not call PrintAnnotationStorage.print")}get serializable(){return u(this,py)}get modifiedIds(){return Ne(this,"modifiedIds",{ids:new Set,hash:""})}}py=new WeakMap;var jh;class j7{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){S(this,jh,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),u(this,jh).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:r}){if(!(!e||u(this,jh).has(e.loadedName))){if($e(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:o}=e,a=new FontFace(i,s,o);this.addNativeFontFace(a);try{await a.load(),u(this,jh).add(i),r==null||r(e)}catch{Ae(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ct("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const r=e.createNativeFontFace();if(r){this.addNativeFontFace(r);try{await r.loaded}catch(i){throw Ae(`Failed to load font '${r.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(r=>{const i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ne(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Ne(this,"isSyncFontLoadingSupported",nr||xn.platform.isFirefox)}_queueLoadingCallback(e){function t(){for($e(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){const s=r.shift();setTimeout(s.callback,0)}}const{loadingRequests:r}=this,i={done:!1,complete:t,callback:e};return r.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ne(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function r(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function i(E,T,k,P){const R=E.substring(0,T),L=E.substring(T+k);return R+P+L}let s,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function d(E,T){if(++c>30){Ae("Load test font never loaded."),T();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,E,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=i(f,976,h.length,h);const y=16,g=1482184792;let b=r(f,y);for(s=0,o=h.length-3;s<o;s+=4)b=b-g+r(h,s)|0;s<h.length&&(b=b-g+r(h+"XXX",s)|0),f=i(f,y,4,x7(b));const v=`url(data:font/opentype;base64,${btoa(f)});`,x=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(x);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const E of[e.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,w.append(T)}this._document.body.append(w),d(h,()=>{w.remove(),t.complete()})}}jh=new WeakMap;var nt;class M7{constructor(e,t=null,r,i){S(this,nt,void 0);this.compiledGlyphs=Object.create(null),A(this,nt,e),this._inspectFont=t,r&&Object.assign(this,r),i&&(this.charProcOperatorList=i)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const r={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(r.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,r)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var r;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${_3(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return(r=this._inspectFont)==null||r.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const r=this.loadedName+"_path_"+t;let i;try{i=e.get(r)}catch(o){Ae(`getPathGenerator - ignoring character: "${o}".`)}const s=new Path2D(i||"");return this.fontExtraProperties||e.delete(r),this.compiledGlyphs[t]=s}get black(){return u(this,nt).black}get bold(){return u(this,nt).bold}get disableFontFace(){return u(this,nt).disableFontFace??!1}get fontExtraProperties(){return u(this,nt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return u(this,nt).isInvalidPDFjsFont}get isType3Font(){return u(this,nt).isType3Font}get italic(){return u(this,nt).italic}get missingFile(){return u(this,nt).missingFile}get remeasure(){return u(this,nt).remeasure}get vertical(){return u(this,nt).vertical}get ascent(){return u(this,nt).ascent}get defaultWidth(){return u(this,nt).defaultWidth}get descent(){return u(this,nt).descent}get bbox(){return u(this,nt).bbox}get fontMatrix(){return u(this,nt).fontMatrix}get fallbackName(){return u(this,nt).fallbackName}get loadedName(){return u(this,nt).loadedName}get mimetype(){return u(this,nt).mimetype}get name(){return u(this,nt).name}get data(){return u(this,nt).data}clearData(){u(this,nt).clearData()}get cssFontInfo(){return u(this,nt).cssFontInfo}get systemFontInfo(){return u(this,nt).systemFontInfo}get defaultVMetrics(){return u(this,nt).defaultVMetrics}}nt=new WeakMap;function L7(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(nr)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function I7(n){if(nr&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vv(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function lx(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const Ck=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,D7=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",c4=A7.bind(null,Ck,D7);var wo,Gw;class O7{constructor(){S(this,wo,new Map);S(this,Gw,Promise.resolve())}postMessage(e,t){const r={data:structuredClone(e,t?{transfer:t}:null)};u(this,Gw).then(()=>{for(const[i]of u(this,wo))i.call(this,r)})}addEventListener(e,t,r=null){let i=null;if((r==null?void 0:r.signal)instanceof AbortSignal){const{signal:s}=r;if(s.aborted){Ae("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}u(this,wo).set(t,i)}removeEventListener(e,t){const r=u(this,wo).get(t);r==null||r(),u(this,wo).delete(t)}terminate(){for(const[,e]of u(this,wo))e==null||e();u(this,wo).clear()}}wo=new WeakMap,Gw=new WeakMap;const cx={DATA:1,ERROR:2},Kt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function $j(){}function hr(n){if(n instanceof oa||n instanceof Jb||n instanceof Mj||n instanceof xg||n instanceof s_)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ct('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new oa(n.message);case"InvalidPDFException":return new Jb(n.message);case"PasswordException":return new Mj(n.message,n.code);case"ResponseException":return new xg(n.message,n.status,n.missing);case"UnknownErrorException":return new s_(n.message,n.details)}return new s_(n.message,n.toString())}var Mh,Ww,u4,Kw,d4,Xw,h4,Lh,Vx;class pm{constructor(e,t,r){S(this,Ww);S(this,Kw);S(this,Xw);S(this,Lh);S(this,Mh,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",C(this,Ww,u4).bind(this),{signal:u(this,Mh).signal})}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(e,t,r,i){const s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:s,data:t,desiredSize:c.desiredSize},i),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,l.postMessage({sourceName:o,targetName:a,stream:Kt.PULL,streamId:s,desiredSize:c.desiredSize}),d.promise},cancel:c=>{$e(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Kt.CANCEL,streamId:s,reason:hr(c)}),d.promise}},r)}destroy(){var e;(e=u(this,Mh))==null||e.abort(),A(this,Mh,null)}}Mh=new WeakMap,Ww=new WeakSet,u4=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Xw,h4).call(this,e);return}if(e.callback){const r=e.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],e.callback===cx.DATA)i.resolve(e.data);else if(e.callback===cx.ERROR)i.reject(hr(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const r=this.sourceName,i=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:cx.DATA,callbackId:e.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:cx.ERROR,callbackId:e.callbackId,reason:hr(o)})});return}if(e.streamId){C(this,Kw,d4).call(this,e);return}t(e.data)},Kw=new WeakSet,d4=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Kt.ENQUEUE,streamId:t,chunk:c},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Kt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){$e(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Kt.ERROR,streamId:t,reason:hr(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Kt.START_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Kt.START_COMPLETE,streamId:t,reason:hr(c)})})},Xw=new WeakSet,h4=function(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,s=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Kt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(hr(e.reason));break;case Kt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(hr(e.reason));break;case Kt.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:Kt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||$j).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Kt.PULL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Kt.PULL_COMPLETE,streamId:t,reason:hr(c)})});break;case Kt.ENQUEUE:if($e(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Kt.CLOSE:if($e(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Lh,Vx).call(this,o,t);break;case Kt.ERROR:$e(o,"error should have stream controller"),o.controller.error(hr(e.reason)),C(this,Lh,Vx).call(this,o,t);break;case Kt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(hr(e.reason)),C(this,Lh,Vx).call(this,o,t);break;case Kt.CANCEL:if(!a)break;const l=hr(e.reason);Promise.try(a.onCancel||$j,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Kt.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Kt.CANCEL_COMPLETE,streamId:t,reason:hr(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Lh=new WeakSet,Vx=async function(e,t){var r,i,s;await Promise.allSettled([(r=e.startCall)==null?void 0:r.promise,(i=e.pullCall)==null?void 0:i.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var my;class f4{constructor({enableHWA:e=!1}){S(this,my,!1);A(this,my,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!u(this,my)})}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ct("Abstract method `_createCanvas` called.")}}my=new WeakMap;class F7 extends f4{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}class p4{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(r=>({cMapData:r,isCompressed:this.isCompressed})).catch(r=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ct("Abstract method `_fetch` called.")}}class Uj extends p4{async _fetch(e){const t=await kp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):vv(t)}}class m4{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,r,i,s){return"none"}destroy(e=!1){}}var qc,Ih,So,Ao,Fn,Gc,Wc,un,In,Kc,mm,Ha,Ad,Dh,Hx,qa,_d,Yw,g4,gy,Tk,Ga,Ed,Xc,gm,Yc,ym,yy,Pk,Qc,vm;class B7 extends m4{constructor({docId:t,ownerDocument:r=globalThis.document}){super();S(this,un);S(this,Kc);S(this,Ha);S(this,Dh);S(this,qa);S(this,Yw);S(this,gy);S(this,Ga);S(this,Xc);S(this,Yc);S(this,yy);S(this,Qc);S(this,qc,void 0);S(this,Ih,void 0);S(this,So,void 0);S(this,Ao,void 0);S(this,Fn,void 0);S(this,Gc,void 0);S(this,Wc,0);A(this,Ao,t),A(this,Fn,r)}addFilter(t){if(!t)return"none";let r=u(this,un,In).get(t);if(r)return r;const[i,s,o]=C(this,Dh,Hx).call(this,t),a=t.length===1?i:`${i}${s}${o}`;if(r=u(this,un,In).get(a),r)return u(this,un,In).set(t,r),r;const l=`g_${u(this,Ao)}_transfer_map_${en(this,Wc)._++}`,c=C(this,qa,_d).call(this,l);u(this,un,In).set(t,c),u(this,un,In).set(a,c);const d=C(this,Ga,Ed).call(this,l);return C(this,Yc,ym).call(this,i,s,o,d),c}addHCMFilter(t,r){var y;const i=`${t}-${r}`,s="base";let o=u(this,Kc,mm).get(s);if((o==null?void 0:o.key)===i||(o?((y=o.filter)==null||y.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},u(this,Kc,mm).set(s,o)),!t||!r))return o.url;const a=C(this,Qc,vm).call(this,t);t=re.makeHexColor(...a);const l=C(this,Qc,vm).call(this,r);if(r=re.makeHexColor(...l),u(this,Ha,Ad).style.color="",t==="#000000"&&r==="#ffffff"||t===r)return o.url;const c=new Array(256);for(let g=0;g<=255;g++){const b=g/255;c[g]=b<=.03928?b/12.92:((b+.055)/1.055)**2.4}const d=c.join(","),h=`g_${u(this,Ao)}_hcm_filter`,f=o.filter=C(this,Ga,Ed).call(this,h);C(this,Yc,ym).call(this,d,d,d,f),C(this,gy,Tk).call(this,f);const m=(g,b)=>{const v=a[g]/255,x=l[g]/255,w=new Array(b+1);for(let E=0;E<=b;E++)w[E]=v+E/b*(x-v);return w.join(",")};return C(this,Yc,ym).call(this,m(0,5),m(1,5),m(2,5),f),o.url=C(this,qa,_d).call(this,h),o.url}addAlphaFilter(t){let r=u(this,un,In).get(t);if(r)return r;const[i]=C(this,Dh,Hx).call(this,[t]),s=`alpha_${i}`;if(r=u(this,un,In).get(s),r)return u(this,un,In).set(t,r),r;const o=`g_${u(this,Ao)}_alpha_map_${en(this,Wc)._++}`,a=C(this,qa,_d).call(this,o);u(this,un,In).set(t,a),u(this,un,In).set(s,a);const l=C(this,Ga,Ed).call(this,o);return C(this,yy,Pk).call(this,i,l),a}addLuminosityFilter(t){let r=u(this,un,In).get(t||"luminosity");if(r)return r;let i,s;if(t?([i]=C(this,Dh,Hx).call(this,[t]),s=`luminosity_${i}`):s="luminosity",r=u(this,un,In).get(s),r)return u(this,un,In).set(t,r),r;const o=`g_${u(this,Ao)}_luminosity_map_${en(this,Wc)._++}`,a=C(this,qa,_d).call(this,o);u(this,un,In).set(t,a),u(this,un,In).set(s,a);const l=C(this,Ga,Ed).call(this,o);return C(this,Yw,g4).call(this,l),t&&C(this,yy,Pk).call(this,i,l),a}addHighlightHCMFilter(t,r,i,s,o){var x;const a=`${r}-${i}-${s}-${o}`;let l=u(this,Kc,mm).get(t);if((l==null?void 0:l.key)===a||(l?((x=l.filter)==null||x.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},u(this,Kc,mm).set(t,l)),!r||!i))return l.url;const[c,d]=[r,i].map(C(this,Qc,vm).bind(this));let h=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[s,o].map(C(this,Qc,vm).bind(this));f<h&&([h,f,m,y]=[f,h,y,m]),u(this,Ha,Ad).style.color="";const g=(w,E,T)=>{const k=new Array(256),P=(f-h)/T,R=w/255,L=(E-w)/(255*T);let O=0;for(let F=0;F<=T;F++){const I=Math.round(h+F*P),U=R+F*L;for(let B=O;B<=I;B++)k[B]=U;O=I+1}for(let F=O;F<256;F++)k[F]=k[O-1];return k.join(",")},b=`g_${u(this,Ao)}_hcm_${t}_filter`,v=l.filter=C(this,Ga,Ed).call(this,b);return C(this,gy,Tk).call(this,v),C(this,Yc,ym).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),l.url=C(this,qa,_d).call(this,b),l.url}destroy(t=!1){var r,i,s,o;t&&((r=u(this,Gc))!=null&&r.size)||((i=u(this,So))==null||i.parentNode.parentNode.remove(),A(this,So,null),(s=u(this,Ih))==null||s.clear(),A(this,Ih,null),(o=u(this,Gc))==null||o.clear(),A(this,Gc,null),A(this,Wc,0))}}qc=new WeakMap,Ih=new WeakMap,So=new WeakMap,Ao=new WeakMap,Fn=new WeakMap,Gc=new WeakMap,Wc=new WeakMap,un=new WeakSet,In=function(){return u(this,Ih)||A(this,Ih,new Map)},Kc=new WeakSet,mm=function(){return u(this,Gc)||A(this,Gc,new Map)},Ha=new WeakSet,Ad=function(){if(!u(this,So)){const t=u(this,Fn).createElement("div"),{style:r}=t;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const i=u(this,Fn).createElementNS(to,"svg");i.setAttribute("width",0),i.setAttribute("height",0),A(this,So,u(this,Fn).createElementNS(to,"defs")),t.append(i),i.append(u(this,So)),u(this,Fn).body.append(t)}return u(this,So)},Dh=new WeakSet,Hx=function(t){if(t.length===1){const c=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=c[f]/255;const h=d.join(",");return[h,h,h]}const[r,i,s]=t,o=new Array(256),a=new Array(256),l=new Array(256);for(let c=0;c<256;c++)o[c]=r[c]/255,a[c]=i[c]/255,l[c]=s[c]/255;return[o.join(","),a.join(","),l.join(",")]},qa=new WeakSet,_d=function(t){if(u(this,qc)===void 0){A(this,qc,"");const r=u(this,Fn).URL;r!==u(this,Fn).baseURI&&(bv(r)?Ae('#createUrl: ignore "data:"-URL for performance reasons.'):A(this,qc,kP(r,"")))}return`url(${u(this,qc)}#${t})`},Yw=new WeakSet,g4=function(t){const r=u(this,Fn).createElementNS(to,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(r)},gy=new WeakSet,Tk=function(t){const r=u(this,Fn).createElementNS(to,"feColorMatrix");r.setAttribute("type","matrix"),r.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(r)},Ga=new WeakSet,Ed=function(t){const r=u(this,Fn).createElementNS(to,"filter");return r.setAttribute("color-interpolation-filters","sRGB"),r.setAttribute("id",t),u(this,Ha,Ad).append(r),r},Xc=new WeakSet,gm=function(t,r,i){const s=u(this,Fn).createElementNS(to,r);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),t.append(s)},Yc=new WeakSet,ym=function(t,r,i,s){const o=u(this,Fn).createElementNS(to,"feComponentTransfer");s.append(o),C(this,Xc,gm).call(this,o,"feFuncR",t),C(this,Xc,gm).call(this,o,"feFuncG",r),C(this,Xc,gm).call(this,o,"feFuncB",i)},yy=new WeakSet,Pk=function(t,r){const i=u(this,Fn).createElementNS(to,"feComponentTransfer");r.append(i),C(this,Xc,gm).call(this,i,"feFuncA",t)},Qc=new WeakSet,vm=function(t){return u(this,Ha,Ad).style.color=t,Cp(getComputedStyle(u(this,Ha,Ad)).getPropertyValue("color"))};class y4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ct("Abstract method `_fetch` called.")}}class Vj extends y4{async _fetch(e){const t=await kp(e,"arraybuffer");return new Uint8Array(t)}}class v4{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(r=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ct("Abstract method `_fetch` called.")}}class Hj extends v4{async _fetch(e){const t=await kp(e,"arraybuffer");return new Uint8Array(t)}}nr&&Ae("Please use the `legacy` build in Node.js environments.");async function jP(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class z7 extends m4{}class $7 extends f4{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class U7 extends p4{async _fetch(e){return jP(e)}}class V7 extends y4{async _fetch(e){return jP(e)}}class H7 extends v4{async _fetch(e){return jP(e)}}const xd="__forcedDependency",{floor:qj,ceil:Gj}=Math;function ux(n,e,t,r,i,s){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],r),n[e*4+2]=Math.max(n[e*4+2],i),n[e*4+3]=Math.max(n[e*4+3],s)}const Nk=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Oh,Wa;class q7{constructor(e,t){S(this,Oh,void 0);S(this,Wa,void 0);A(this,Oh,e),A(this,Wa,t)}get length(){return u(this,Oh).length}isEmpty(e){return u(this,Oh)[e]===Nk}minX(e){return u(this,Wa)[e*4+0]/256}minY(e){return u(this,Wa)[e*4+1]/256}maxX(e){return(u(this,Wa)[e*4+2]+1)/256}maxY(e){return(u(this,Wa)[e*4+3]+1)/256}}Oh=new WeakMap,Wa=new WeakMap;const dx=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var mr,gr,Jc,Xi,Zc,_o,Je,rt,Eo,yr,vy,Fh,eu,tu,ko,Bn,Rs,xy,Rk;class G7{constructor(e,t,r=!1){S(this,xy);S(this,mr,{__proto__:null});S(this,gr,{__proto__:null,transform:[],moveText:[],sameLineText:[],[xd]:[]});S(this,Jc,new Map);S(this,Xi,[]);S(this,Zc,[]);S(this,_o,[[1,0,0,1,0,0]]);S(this,Je,[-1/0,-1/0,1/0,1/0]);S(this,rt,new Float64Array([1/0,1/0,-1/0,-1/0]));S(this,Eo,-1);S(this,yr,new Set);S(this,vy,new Map);S(this,Fh,new Map);S(this,eu,void 0);S(this,tu,void 0);S(this,ko,void 0);S(this,Bn,void 0);S(this,Rs,void 0);A(this,eu,e.width),A(this,tu,e.height),C(this,xy,Rk).call(this,t),r&&A(this,Rs,new Map)}growOperationsCount(e){e>=u(this,Bn).length&&C(this,xy,Rk).call(this,e,u(this,Bn))}save(e){return A(this,mr,{__proto__:u(this,mr)}),A(this,gr,{__proto__:u(this,gr),transform:{__proto__:u(this,gr).transform},moveText:{__proto__:u(this,gr).moveText},sameLineText:{__proto__:u(this,gr).sameLineText},[xd]:{__proto__:u(this,gr)[xd]}}),A(this,Je,{__proto__:u(this,Je)}),u(this,Xi).push(e),this}restore(e){var i;const t=Object.getPrototypeOf(u(this,mr));if(t===null)return this;A(this,mr,t),A(this,gr,Object.getPrototypeOf(u(this,gr))),A(this,Je,Object.getPrototypeOf(u(this,Je)));const r=u(this,Xi).pop();return r!==void 0&&((i=dx(u(this,Rs),e))==null||i.dependencies.add(r),u(this,Bn)[e]=u(this,Bn)[r]),this}recordOpenMarker(e){return u(this,Xi).push(e),this}getOpenMarker(){return u(this,Xi).length===0?null:u(this,Xi).at(-1)}recordCloseMarker(e){var r;const t=u(this,Xi).pop();return t!==void 0&&((r=dx(u(this,Rs),e))==null||r.dependencies.add(t),u(this,Bn)[e]=u(this,Bn)[t]),this}beginMarkedContent(e){return u(this,Zc).push(e),this}endMarkedContent(e){var r;const t=u(this,Zc).pop();return t!==void 0&&((r=dx(u(this,Rs),e))==null||r.dependencies.add(t),u(this,Bn)[e]=u(this,Bn)[t]),this}pushBaseTransform(e){return u(this,_o).push(re.multiplyByDOMMatrix(u(this,_o).at(-1),e.getTransform())),this}popBaseTransform(){return u(this,_o).length>1&&u(this,_o).pop(),this}recordSimpleData(e,t){return u(this,mr)[e]=t,this}recordIncrementalData(e,t){return u(this,gr)[e].push(t),this}resetIncrementalData(e,t){return u(this,gr)[e].length=0,this}recordNamedData(e,t){return u(this,Jc).set(e,t),this}recordSimpleDataFromNamed(e,t,r){u(this,mr)[e]=u(this,Jc).get(t)??r}recordFutureForcedDependency(e,t){return this.recordIncrementalData(xd,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in u(this,mr)&&this.recordFutureForcedDependency(t,u(this,mr)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of u(this,yr))this.recordFutureForcedDependency(xd,e);return this}resetBBox(e){return u(this,Eo)!==e&&(A(this,Eo,e),u(this,rt)[0]=1/0,u(this,rt)[1]=1/0,u(this,rt)[2]=-1/0,u(this,rt)[3]=-1/0),this}recordClipBox(e,t,r,i,s,o){const a=re.multiplyByDOMMatrix(u(this,_o).at(-1),t.getTransform()),l=[1/0,1/0,-1/0,-1/0];re.axialAlignedBoundingBox([r,s,i,o],a,l);const c=re.intersect(u(this,Je),l);return c?(u(this,Je)[0]=c[0],u(this,Je)[1]=c[1],u(this,Je)[2]=c[2],u(this,Je)[3]=c[3]):(u(this,Je)[0]=u(this,Je)[1]=1/0,u(this,Je)[2]=u(this,Je)[3]=-1/0),this}recordBBox(e,t,r,i,s,o){const a=u(this,Je);if(a[0]===1/0)return this;const l=re.multiplyByDOMMatrix(u(this,_o).at(-1),t.getTransform());if(a[0]===-1/0)return re.axialAlignedBoundingBox([r,s,i,o],l,u(this,rt)),this;const c=[1/0,1/0,-1/0,-1/0];return re.axialAlignedBoundingBox([r,s,i,o],l,c),u(this,rt)[0]=Math.min(u(this,rt)[0],Math.max(c[0],a[0])),u(this,rt)[1]=Math.min(u(this,rt)[1],Math.max(c[1],a[1])),u(this,rt)[2]=Math.max(u(this,rt)[2],Math.min(c[2],a[2])),u(this,rt)[3]=Math.max(u(this,rt)[3],Math.min(c[3],a[3])),this}recordCharacterBBox(e,t,r,i=1,s=0,o=0,a){const l=r.bbox;let c,d;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&u(this,Fh).get(r),c!==!1&&(d=[0,0,0,0],re.axialAlignedBoundingBox(l,r.fontMatrix,d),(i!==1||s!==0||o!==0)&&re.scaleMinMax([i,0,0,-i,s,o],d),c)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return l&&d&&c===void 0&&(c=d[0]<=s-h.actualBoundingBoxLeft&&d[2]>=s+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,u(this,Fh).set(r,c),c)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,s-h.actualBoundingBoxLeft,s+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return u(this,rt)[0]=Math.max(0,u(this,Je)[0]),u(this,rt)[1]=Math.max(0,u(this,Je)[1]),u(this,rt)[2]=Math.min(u(this,eu),u(this,Je)[2]),u(this,rt)[3]=Math.min(u(this,tu),u(this,Je)[3]),this}getSimpleIndex(e){return u(this,mr)[e]}recordDependencies(e,t){const r=u(this,yr),i=u(this,mr),s=u(this,gr);for(const o of t)o in u(this,mr)?r.add(i[o]):o in s&&s[o].forEach(r.add,r);return this}recordNamedDependency(e,t){return u(this,Jc).has(t)&&u(this,yr).add(u(this,Jc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[xd]),u(this,Rs)){const r=dx(u(this,Rs),e),{dependencies:i}=r;u(this,yr).forEach(i.add,i),u(this,Xi).forEach(i.add,i),u(this,Zc).forEach(i.add,i),i.delete(e),r.isRenderingOperation=!0}if(u(this,Eo)===e){const r=qj(u(this,rt)[0]*256/u(this,eu)),i=qj(u(this,rt)[1]*256/u(this,tu)),s=Gj(u(this,rt)[2]*256/u(this,eu)),o=Gj(u(this,rt)[3]*256/u(this,tu));ux(u(this,ko),e,r,i,s,o);for(const a of u(this,yr))a!==e&&ux(u(this,ko),a,r,i,s,o);for(const a of u(this,Xi))a!==e&&ux(u(this,ko),a,r,i,s,o);for(const a of u(this,Zc))a!==e&&ux(u(this,ko),a,r,i,s,o);t||(u(this,yr).clear(),A(this,Eo,-1))}return this}recordShowTextOperation(e,t=!1){const r=Array.from(u(this,yr));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of r)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return u(this,Eo)===e&&(A(this,Eo,-1),u(this,Je)[0]=Math.max(u(this,Je)[0],u(this,rt)[0]),u(this,Je)[1]=Math.max(u(this,Je)[1],u(this,rt)[1]),u(this,Je)[2]=Math.min(u(this,Je)[2],u(this,rt)[2]),u(this,Je)[3]=Math.min(u(this,Je)[3],u(this,rt)[3]),t||u(this,yr).clear()),this}_takePendingDependencies(){const e=u(this,yr);return A(this,yr,new Set),e}_extractOperation(e){const t=u(this,vy).get(e);return u(this,vy).delete(e),t}_pushPendingDependencies(e){for(const t of e)u(this,yr).add(t)}take(){return u(this,Fh).clear(),new q7(u(this,Bn),u(this,ko))}takeDebugMetadata(){return u(this,Rs)}}mr=new WeakMap,gr=new WeakMap,Jc=new WeakMap,Xi=new WeakMap,Zc=new WeakMap,_o=new WeakMap,Je=new WeakMap,rt=new WeakMap,Eo=new WeakMap,yr=new WeakMap,vy=new WeakMap,Fh=new WeakMap,eu=new WeakMap,tu=new WeakMap,ko=new WeakMap,Bn=new WeakMap,Rs=new WeakMap,xy=new WeakSet,Rk=function(e,t){const r=new ArrayBuffer(e*4);A(this,ko,new Uint8ClampedArray(r)),A(this,Bn,new Uint32Array(r)),t&&t.length>0?(u(this,Bn).set(t),u(this,Bn).fill(Nk,t.length)):u(this,Bn).fill(Nk)};var at,zt,Yi,Bh,zh;const a2=class a2{constructor(e,t,r){S(this,at,void 0);S(this,zt,void 0);S(this,Yi,void 0);S(this,Bh,0);S(this,zh,0);if(e instanceof a2&&u(e,Yi)===!!r)return e;A(this,at,e),A(this,zt,t),A(this,Yi,!!r)}growOperationsCount(){throw new Error("Unreachable")}save(e){return en(this,zh)._++,u(this,at).save(u(this,zt)),this}restore(e){return u(this,zh)>0&&(u(this,at).restore(u(this,zt)),en(this,zh)._--),this}recordOpenMarker(e){return en(this,Bh)._++,this}getOpenMarker(){return u(this,Bh)>0?u(this,zt):u(this,at).getOpenMarker()}recordCloseMarker(e){return en(this,Bh)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return u(this,at).pushBaseTransform(e),this}popBaseTransform(){return u(this,at).popBaseTransform(),this}recordSimpleData(e,t){return u(this,at).recordSimpleData(e,u(this,zt)),this}recordIncrementalData(e,t){return u(this,at).recordIncrementalData(e,u(this,zt)),this}resetIncrementalData(e,t){return u(this,at).resetIncrementalData(e,u(this,zt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,r){return u(this,at).recordSimpleDataFromNamed(e,t,u(this,zt)),this}recordFutureForcedDependency(e,t){return u(this,at).recordFutureForcedDependency(e,u(this,zt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return u(this,at).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return u(this,at).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return u(this,Yi)||u(this,at).resetBBox(u(this,zt)),this}recordClipBox(e,t,r,i,s,o){return u(this,Yi)||u(this,at).recordClipBox(u(this,zt),t,r,i,s,o),this}recordBBox(e,t,r,i,s,o){return u(this,Yi)||u(this,at).recordBBox(u(this,zt),t,r,i,s,o),this}recordCharacterBBox(e,t,r,i,s,o,a){return u(this,Yi)||u(this,at).recordCharacterBBox(u(this,zt),t,r,i,s,o,a),this}recordFullPageBBox(e){return u(this,Yi)||u(this,at).recordFullPageBBox(u(this,zt)),this}getSimpleIndex(e){return u(this,at).getSimpleIndex(e)}recordDependencies(e,t){return u(this,at).recordDependencies(u(this,zt),t),this}recordNamedDependency(e,t){return u(this,at).recordNamedDependency(u(this,zt),t),this}recordOperation(e){return u(this,at).recordOperation(u(this,zt),!0),this}recordShowTextOperation(e){return u(this,at).recordShowTextOperation(u(this,zt),!0),this}bboxToClipBoxDropOperation(e){return u(this,Yi)||u(this,at).bboxToClipBoxDropOperation(u(this,zt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};at=new WeakMap,zt=new WeakMap,Yi=new WeakMap,Bh=new WeakMap,zh=new WeakMap;let tw=a2;const ui={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Pn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function jk(n,e){if(!e)return;const t=e[2]-e[0],r=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,r),n.clip(i)}class MP{isModifyingCurrentTransform(){return!1}getPattern(){ct("Abstract method `getPattern` called.")}}class W7 extends MP{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let s;if(i===Pn.STROKE||i===Pn.FILL){const o=t.current.getClippedPathBoundingBox(i,Pt(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),r=re.transform(r,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),jk(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(c.canvas,"no-repeat");const h=new DOMMatrix(r);s.setTransform(h)}else jk(e,this._bbox),s=this._createGradient(e);return s}}function l_(n,e,t,r,i,s,o,a){const l=e.coords,c=e.colors,d=n.data,h=n.width*4;let f;l[t+1]>l[r+1]&&(f=t,t=r,r=f,f=s,s=o,o=f),l[r+1]>l[i+1]&&(f=r,r=i,i=f,f=o,o=a,a=f),l[t+1]>l[r+1]&&(f=t,t=r,r=f,f=s,s=o,o=f);const m=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,b=(l[r+1]+e.offsetY)*e.scaleY,v=(l[i]+e.offsetX)*e.scaleX,x=(l[i+1]+e.offsetY)*e.scaleY;if(y>=x)return;const w=c[s],E=c[s+1],T=c[s+2],k=c[o],P=c[o+1],R=c[o+2],L=c[a],O=c[a+1],F=c[a+2],I=Math.round(y),U=Math.round(x);let B,M,D,z,$,V,N,W;for(let G=I;G<=U;G++){if(G<b){const se=G<y?0:(y-G)/(y-b);B=m-(m-g)*se,M=w-(w-k)*se,D=E-(E-P)*se,z=T-(T-R)*se}else{let se;G>x?se=1:b===x?se=0:se=(b-G)/(b-x),B=g-(g-v)*se,M=k-(k-L)*se,D=P-(P-O)*se,z=R-(R-F)*se}let j;G<y?j=0:G>x?j=1:j=(y-G)/(y-x),$=m-(m-v)*j,V=w-(w-L)*j,N=E-(E-O)*j,W=T-(T-F)*j;const ee=Math.round(Math.min(B,$)),ye=Math.round(Math.max(B,$));let de=h*G+ee*4;for(let se=ee;se<=ye;se++)j=(B-se)/(B-$),j<0?j=0:j>1&&(j=1),d[de++]=M-(M-V)*j|0,d[de++]=D-(D-N)*j|0,d[de++]=z-(z-W)*j|0,d[de++]=255}}function K7(n,e,t){const r=e.coords,i=e.colors;let s,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let d=s*a;for(let h=0;h<c;h++,d++)l_(n,t,r[d],r[d+1],r[d+a],i[d],i[d+1],i[d+a]),l_(n,t,r[d+a+1],r[d+1],r[d+a],i[d+a+1],i[d+1],i[d+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)l_(n,t,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class X7 extends MP{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,r){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=c/h,y=d/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/y},b=h+2*2,v=f+2*2,x=r.getCanvas("mesh",b,v),w=x.context,E=w.createImageData(h,f);if(t){const k=E.data;for(let P=0,R=k.length;P<R;P+=4)k[P]=t[0],k[P+1]=t[1],k[P+2]=t[2],k[P+3]=255}for(const k of this._figures)K7(E,k,g);return w.putImageData(E,2,2),{canvas:x.canvas,offsetX:a-2*m,offsetY:l-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,r,i){jk(e,this._bbox);const s=new Float32Array(2);if(i===Pn.SHADING)re.singularValueDecompose2dScale(Pt(e),s);else if(this.matrix){re.singularValueDecompose2dScale(this.matrix,s);const[a,l]=s;re.singularValueDecompose2dScale(t.baseTransform,s),s[0]*=a,s[1]*=l}else re.singularValueDecompose2dScale(t.baseTransform,s);const o=this._createMeshCanvas(s,i===Pn.SHADING?null:this._background,t.cachedCanvases);return i!==Pn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Y7 extends MP{getPattern(){return"hotpink"}}function Q7(n){switch(n[0]){case"RadialAxial":return new W7(n);case"Mesh":return new X7(n);case"Dummy":return new Y7}throw new Error(`Unknown IR type: ${n[0]}`)}const Wj={COLORED:1,UNCOLORED:2},Qw=class Qw{constructor(e,t,r,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=r,this.baseTransform=i}createPatternCanvas(e,t){var V,N;const{bbox:r,operatorList:i,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:d}=this;c=Math.abs(c),d=Math.abs(d),BS("TilingType: "+o);const h=r[0],f=r[1],m=r[2],y=r[3],g=m-h,b=y-f,v=new Float32Array(2);re.singularValueDecompose2dScale(this.matrix,v);const[x,w]=v;re.singularValueDecompose2dScale(this.baseTransform,v);const E=x*v[0],T=w*v[1];let k=g,P=b,R=!1,L=!1;const O=Math.ceil(c*E),F=Math.ceil(d*T),I=Math.ceil(g*E),U=Math.ceil(b*T);O>=I?k=c:R=!0,F>=U?P=d:L=!0;const B=this.getSizeAndScale(k,this.ctx.canvas.width,E),M=this.getSizeAndScale(P,this.ctx.canvas.height,T),D=e.cachedCanvases.getCanvas("pattern",B.size,M.size),z=D.context,$=l.createCanvasGraphics(z,t);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,s,a),z.translate(-B.scale*h,-M.scale*f),$.transform(0,B.scale,0,0,M.scale,0,0),z.save(),(V=$.dependencyTracker)==null||V.save(),this.clipBbox($,h,f,m,y),$.baseTransform=Pt($.ctx),$.executeOperatorList(i),$.endDrawing(),(N=$.dependencyTracker)==null||N.restore(),z.restore(),R||L){const W=D.canvas;R&&(k=c),L&&(P=d);const G=this.getSizeAndScale(k,this.ctx.canvas.width,E),j=this.getSizeAndScale(P,this.ctx.canvas.height,T),ee=G.size,ye=j.size,de=e.cachedCanvases.getCanvas("pattern-workaround",ee,ye),se=de.context,Ee=R?Math.floor(g/c):0,Fe=L?Math.floor(b/d):0;for(let ve=0;ve<=Ee;ve++)for(let Ue=0;Ue<=Fe;Ue++)se.drawImage(W,ee*ve,ye*Ue,ee,ye,0,0,ee,ye);return{canvas:de.canvas,scaleX:G.scale,scaleY:j.scale,offsetX:h,offsetY:f}}return{canvas:D.canvas,scaleX:B.scale,scaleY:M.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,r){const i=Math.max(Qw.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*r);return s>=i?s=i:r=s/e,{scale:r,size:s}}clipBbox(e,t,r,i,s){const o=i-t,a=s-r;e.ctx.rect(t,r,o,a),re.axialAlignedBoundingBox([t,r,i,s],Pt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,s=e.current;switch(t){case Wj.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;i.fillStyle=s.fillColor=o,i.strokeStyle=s.strokeColor=a;break;case Wj.UNCOLORED:i.fillStyle=i.strokeStyle=r,s.fillColor=s.strokeColor=r;break;default:throw new v7(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,r,i,s){let o=r;i!==Pn.SHADING&&(o=re.transform(o,t.baseTransform),this.matrix&&(o=re.transform(o,this.matrix)));const a=this.createPatternCanvas(t,s);let l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}};X(Qw,"MAX_PATTERN_SIZE",3e3);let Mk=Qw;function J7({src:n,srcPos:e=0,dest:t,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){const a=xn.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],d=r>>3,h=r&7,f=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<i;y++){for(const b=e+d;e<b;e++){const v=e<f?n[e]:255;t[m++]=v&128?c:l,t[m++]=v&64?c:l,t[m++]=v&32?c:l,t[m++]=v&16?c:l,t[m++]=v&8?c:l,t[m++]=v&4?c:l,t[m++]=v&2?c:l,t[m++]=v&1?c:l}if(h===0)continue;const g=e<f?n[e++]:255;for(let b=0;b<h;b++)t[m++]=g&1<<7-b?c:l}return{srcPos:e,destPos:m}}const Kj=16,Xj=100,Z7=15,Yj=10,wr=16,c_=new DOMMatrix,Zr=new Float32Array(2),qd=new Float32Array([1/0,1/0,-1/0,-1/0]);function eK(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,r){e.translate(t,r),this.__originalTranslate(t,r)},n.scale=function(t,r){e.scale(t,r),this.__originalScale(t,r)},n.transform=function(t,r,i,s,o,a){e.transform(t,r,i,s,o,a),this.__originalTransform(t,r,i,s,o,a)},n.setTransform=function(t,r,i,s,o,a){e.setTransform(t,r,i,s,o,a),this.__originalSetTransform(t,r,i,s,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,r){e.moveTo(t,r),this.__originalMoveTo(t,r)},n.lineTo=function(t,r){e.lineTo(t,r),this.__originalLineTo(t,r)},n.bezierCurveTo=function(t,r,i,s,o,a){e.bezierCurveTo(t,r,i,s,o,a),this.__originalBezierCurveTo(t,r,i,s,o,a)},n.rect=function(t,r,i,s){e.rect(t,r,i,s),this.__originalRect(t,r,i,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class tK{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,r)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function hx(n,e,t,r,i,s,o,a,l,c){const[d,h,f,m,y,g]=Pt(n);if(h===0&&f===0){const x=o*d+y,w=Math.round(x),E=a*m+g,T=Math.round(E),k=(o+l)*d+y,P=Math.abs(Math.round(k)-w)||1,R=(a+c)*m+g,L=Math.abs(Math.round(R)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),w,T),n.drawImage(e,t,r,i,s,0,0,P,L),n.setTransform(d,h,f,m,y,g),[P,L]}if(d===0&&m===0){const x=a*f+y,w=Math.round(x),E=o*h+g,T=Math.round(E),k=(a+c)*f+y,P=Math.abs(Math.round(k)-w)||1,R=(o+l)*h+g,L=Math.abs(Math.round(R)-T)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,w,T),n.drawImage(e,t,r,i,s,0,0,L,P),n.setTransform(d,h,f,m,y,g),[L,P]}n.drawImage(e,t,r,i,s,o,a,l,c);const b=Math.hypot(d,h),v=Math.hypot(f,m);return[b*l,v*c]}class Qj{constructor(e,t,r){X(this,"alphaIsShape",!1);X(this,"fontSize",0);X(this,"fontSizeScale",1);X(this,"textMatrix",null);X(this,"textMatrixScale",1);X(this,"fontMatrix",sk);X(this,"leading",0);X(this,"x",0);X(this,"y",0);X(this,"lineX",0);X(this,"lineY",0);X(this,"charSpacing",0);X(this,"wordSpacing",0);X(this,"textHScale",1);X(this,"textRenderingMode",wn.FILL);X(this,"textRise",0);X(this,"fillColor","#000000");X(this,"strokeColor","#000000");X(this,"patternFill",!1);X(this,"patternStroke",!1);X(this,"fillAlpha",1);X(this,"strokeAlpha",1);X(this,"lineWidth",1);X(this,"activeSMask",null);X(this,"transferMaps","none");r==null||r(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=qd.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Pn.FILL,t=null){const r=this.minMax.slice();if(e===Pn.STROKE){t||ct("Stroke bounding box must include transform."),re.singularValueDecompose2dScale(t,Zr);const i=Zr[0]*this.lineWidth/2,s=Zr[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){const e=re.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(qd,0)}getClippedPathBoundingBox(e=Pn.FILL,t=null){return re.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function Jj(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,r=e.width,i=t%wr,s=(t-i)/wr,o=i===0?s:s+1,a=n.createImageData(r,wr);let l=0,c;const d=e.data,h=a.data;let f,m,y,g;if(e.kind===Wm.GRAYSCALE_1BPP){const b=d.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),x=v.length,w=r+7>>3,E=4294967295,T=xn.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<s?wr:i,c=0,m=0;m<y;m++){const k=b-l;let P=0;const R=k>w?r:k*8-7,L=R&-8;let O=0,F=0;for(;P<L;P+=8)F=d[l++],v[c++]=F&128?E:T,v[c++]=F&64?E:T,v[c++]=F&32?E:T,v[c++]=F&16?E:T,v[c++]=F&8?E:T,v[c++]=F&4?E:T,v[c++]=F&2?E:T,v[c++]=F&1?E:T;for(;P<R;P++)O===0&&(F=d[l++],O=128),v[c++]=F&O?E:T,O>>=1}for(;c<x;)v[c++]=0;n.putImageData(a,0,f*wr)}}else if(e.kind===Wm.RGBA_32BPP){for(m=0,g=r*wr*4,f=0;f<s;f++)h.set(d.subarray(l,l+g)),l+=g,n.putImageData(a,0,m),m+=wr;f<o&&(g=r*i*4,h.set(d.subarray(l,l+g)),n.putImageData(a,0,m))}else if(e.kind===Wm.RGB_24BPP)for(y=wr,g=r*y,f=0;f<o;f++){for(f>=s&&(y=i,g=r*y),c=0,m=g;m--;)h[c++]=d[l++],h[c++]=d[l++],h[c++]=d[l++],h[c++]=255;n.putImageData(a,0,f*wr)}else throw new Error(`bad image kind: ${e.kind}`)}function Zj(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,r=e.width,i=t%wr,s=(t-i)/wr,o=i===0?s:s+1,a=n.createImageData(r,wr);let l=0;const c=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<s?wr:i;({srcPos:l}=J7({src:c,srcPos:l,dest:d,width:r,height:f,nonBlackColor:0})),n.putImageData(a,0,h*wr)}}function Yp(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of t)n[r]!==void 0&&(e[r]=n[r]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function fx(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function eM(n,e){if(e)return!0;re.singularValueDecompose2dScale(n,Zr);const t=Math.fround(ds.pixelRatio*aa.PDF_TO_CSS_UNITS);return Zr[0]<=t&&Zr[1]<=t}const nK=["butt","round","square"],rK=["miter","round","bevel"],iK={},tM={};var by,Lk,wy,Ik,Sy,Dk;const l2=class l2{constructor(e,t,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c,d){S(this,by);S(this,wy);S(this,Sy);this.ctx=e,this.current=new Qj(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new tK(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,r=null){var i;return typeof t=="string"?((i=this.dependencyTracker)==null||i.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):r}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:i=null}){const s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){const l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Pt(this.compositeCtx))}this.ctx.save(),fx(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Pt(this.ctx)}executeOperatorList(e,t,r,i,s){var v;const o=e.argsArray,a=e.fnArray;let l=t||0;const c=o.length;if(c===l)return l;const d=c-l>Yj&&typeof r=="function",h=d?Date.now()+Z7:0;let f=0;const m=this.commonObjs,y=this.objs;let g,b;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s(l))if(g=a[l],b=o[l]??null,g!==yp.dependency)b===null?this[g](l):this[g](l,...b);else for(const x of b){(v=this.dependencyTracker)==null||v.recordNamedData(x,l);const w=x.startsWith("g_")?m:y;if(!w.has(x))return w.get(x,r),l}if(l++,l===c)return l;if(d&&++f>Yj){if(Date.now()>h)return r(),l;f=0}}}endDrawing(){C(this,by,Lk).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,wy,Ik).call(this)}_scaleImage(e,t){const r=e.width??e.displayWidth,i=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=r,l=i,c="prescale1",d,h;for(;s>2&&a>1||o>2&&l>1;){let f=a,m=l;s>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/f),o>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/m),d=this.cachedCanvases.getCanvas(c,f,m),h=d.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,a,l,0,0,f,m),e=d.canvas,a=f,l=m,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e,t){var O,F;const r=this.ctx,{width:i,height:s}=t,o=this.current.fillColor,a=this.current.patternFill,l=Pt(r);let c,d,h,f;if((t.bitmap||t.data)&&t.count>1){const I=t.bitmap||t.data.buffer;d=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(I),c||(c=new Map,this._cachedBitmapsMap.set(I,c));const U=c.get(d);if(U&&!a){const B=Math.round(Math.min(l[0],l[2])+l[4]),M=Math.round(Math.min(l[1],l[3])+l[5]);return(O=this.dependencyTracker)==null||O.recordDependencies(e,ui.transformAndFill),{canvas:U,offsetX:B,offsetY:M}}h=U}h||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),Zj(f.context,t));let m=re.transform(l,[1/i,0,0,-1/s,0,0]);m=re.transform(m,[1,0,0,1,0,-s]);const y=qd.slice();re.axialAlignedBoundingBox([0,0,i,s],m,y);const[g,b,v,x]=y,w=Math.round(v-g)||1,E=Math.round(x-b)||1,T=this.cachedCanvases.getCanvas("fillCanvas",w,E),k=T.context,P=g,R=b;k.translate(-P,-R),k.transform(...m),h||(h=this._scaleImage(f.canvas,ms(k)),h=h.img,c&&a&&c.set(d,h)),k.imageSmoothingEnabled=eM(Pt(k),t.interpolate),hx(k,h,0,0,h.width,h.height,0,0,i,s),k.globalCompositeOperation="source-in";const L=re.transform(ms(k),[1,0,0,1,-P,-R]);return k.fillStyle=a?o.getPattern(r,this,L,Pn.FILL,e):o,k.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,T.canvas)),(F=this.dependencyTracker)==null||F.recordDependencies(e,ui.transformAndFill),{canvas:T.canvas,offsetX:Math.round(P),offsetY:Math.round(R)}}setLineWidth(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineCap",e),this.ctx.lineCap=nK[t]}setLineJoin(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("lineJoin",e),this.ctx.lineJoin=rK[t]}setMiterLimit(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,r){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=r)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var r,i,s,o,a;for(const[l,c]of t)switch(l){case"LW":this.setLineWidth(e,c);break;case"LC":this.setLineCap(e,c);break;case"LJ":this.setLineJoin(e,c);break;case"ML":this.setMiterLimit(e,c);break;case"D":this.setDash(e,c[0],c[1]);break;case"RI":this.setRenderingIntent(e,c);break;case"FL":this.setFlatness(e,c);break;case"Font":this.setFont(e,c[0],c[1]);break;case"CA":(r=this.dependencyTracker)==null||r.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=c;break;case"ca":(i=this.dependencyTracker)==null||i.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=c;break;case"BM":(s=this.dependencyTracker)==null||s.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=c;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=c?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(c);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,r);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),Yp(this.suspendedCtx,o),eK(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Yp(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,r,i){const s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,r,a,l,t.subtype,t.backdrop,t.transferMap,s,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}genericComposeSMask(e,t,r,i,s,o,a,l,c,d,h){let f=e.canvas,m=l-d,y=c-h;if(o)if(m<0||y<0||m+r>f.width||y+i>f.height){const b=this.cachedCanvases.getCanvas("maskExtension",r,i),v=b.context;v.drawImage(f,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,r,i),v.globalCompositeOperation="source-over",f=b.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const b=new Path2D;b.rect(m,y,r,i),e.clip(b),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,r,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(l,c,r,i),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,m,y,r,i,l,c,r,i),t.restore()}save(e){var r;this.inSMaskMode&&Yp(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(r=this.dependencyTracker)==null||r.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Yp(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,r,i,s,o,a){var l;(l=this.dependencyTracker)==null||l.recordIncrementalData("transform",e),this.ctx.transform(t,r,i,s,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r,i){let[s]=r;if(!i){s||(s=r[0]=new Path2D),this[t](e,s);return}if(this.dependencyTracker!==null){const o=t===yp.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(e,["transform"])}if(!(s instanceof Path2D)){const o=r[0]=new Path2D;for(let a=0,l=s.length;a<l;)switch(s[a++]){case ox.moveTo:o.moveTo(s[a++],s[a++]);break;case ox.lineTo:o.lineTo(s[a++],s[a++]);break;case ox.curveTo:o.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case ox.closePath:o.closePath();break;default:Ae(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=o}re.axialAlignedBoundingBox(i,Pt(this.ctx),this.current.minMax),this[t](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,r=!0){var o;const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const a=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,ms(i),Pn.STROKE,e),a){const l=new Path2D;l.addPath(t,i.getTransform().invertSelf().multiplySelf(a)),t=l}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,ui.stroke),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Pn.STROKE,Pt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,r=!0){var c,d,h;const i=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=s.isModifyingCurrentTransform()?i.getTransform():null;if((c=this.dependencyTracker)==null||c.save(e),i.save(),i.fillStyle=s.getPattern(i,this,ms(i),Pn.FILL,e),f){const m=new Path2D;m.addPath(t,i.getTransform().invertSelf().multiplySelf(f)),t=m}a=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,ui.fill),a&&(i.restore(),(h=this.dependencyTracker)==null||h.restore(e)),r&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var r;this.ctx.fill(t),(r=this.dependencyTracker)==null||r.recordDependencies(e,ui.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=iK}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=tM}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,s=r.getTransform().invertSelf();for(const{transform:o,x:a,y:l,fontSize:c,path:d}of t)d&&i.addPath(d,new DOMMatrix(o).preMultiplySelf(s).translate(a,l).scale(c,-c));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,r){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||sk,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&Ae("Invalid font matrix for font "+t),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;const o=i.loadedName||"sans-serif",a=((f=i.systemFontInfo)==null?void 0:f.css)||`"${o}", ${i.fallbackName}`;let l="normal";i.black?l="900":i.bold&&(l="bold");const c=i.italic?"italic":"normal";let d=r;r<Kj?d=Kj:r>Xj&&(d=Xj),this.current.fontSizeScale=r/d,this.ctx.font=`${c} ${l} ${d}px ${a}`}setTextRenderingMode(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,r){var i;(i=this.dependencyTracker)==null||i.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=r}setLeadingMoveText(e,t,r){this.setLeading(e,-r),this.moveText(e,t,r)}setTextMatrix(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,r,i,s,o){var v,x,w,E;const a=this.ctx,l=this.current,c=l.font,d=l.textRenderingMode,h=l.fontSize/l.fontSizeScale,f=d&wn.FILL_STROKE_MASK,m=!!(d&wn.ADD_TO_PATH_FLAG),y=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile;let b;if((c.disableFontFace||m||y||g)&&!c.missingFile&&(b=c.getPathGenerator(this.commonObjs,t)),b&&(c.disableFontFace||y||g)){a.save(),a.translate(r,i),a.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,a,c);let T;if(f===wn.FILL||f===wn.FILL_STROKE)if(s){T=a.getTransform(),a.setTransform(...s);const k=C(this,Sy,Dk).call(this,b,T,s);a.fill(k)}else a.fill(b);if(f===wn.STROKE||f===wn.FILL_STROKE)if(o){T||(T=a.getTransform()),a.setTransform(...o);const{a:k,b:P,c:R,d:L}=T,O=re.inverseTransform(o),F=re.transform([k,P,R,L,0,0],O);re.singularValueDecompose2dScale(F,Zr),a.lineWidth*=Math.max(Zr[0],Zr[1])/h,a.stroke(C(this,Sy,Dk).call(this,b,T,o))}else a.lineWidth/=h,a.stroke(b);a.restore()}else(f===wn.FILL||f===wn.FILL_STROKE)&&(a.fillText(t,r,i),(x=this.dependencyTracker)==null||x.recordCharacterBBox(e,a,c,h,r,i,()=>a.measureText(t))),(f===wn.STROKE||f===wn.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(e,a,c,h,r,i,()=>a.measureText(t)).recordDependencies(e,ui.stroke)),a.strokeText(t,r,i));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Pt(a),x:r,y:i,fontSize:h,path:b}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,c,h,r,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){r=!0;break}return Ne(this,"isFontSubpixelAAEnabled",r)}showText(e,t){var R,L,O,F;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,ui.showText).resetBBox(e),this.current.textRenderingMode&wn.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(e,t),(R=this.dependencyTracker)==null||R.recordShowTextOperation(e);return}const s=r.fontSize;if(s===0){(L=this.dependencyTracker)==null||L.recordOperation(e);return}const o=this.ctx,a=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,d=r.fontDirection,h=r.textHScale*d,f=t.length,m=i.vertical,y=m?1:-1,g=i.defaultVMetrics,b=s*r.fontMatrix[0],v=r.textRenderingMode===wn.FILL&&!i.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),d>0?o.scale(h,-1):o.scale(h,1);let x,w;if(r.patternFill){o.save();const I=r.fillColor.getPattern(o,this,ms(o),Pn.FILL,e);x=Pt(o),o.restore(),o.fillStyle=I}if(r.patternStroke){o.save();const I=r.strokeColor.getPattern(o,this,ms(o),Pn.STROKE,e);w=Pt(o),o.restore(),o.strokeStyle=I}let E=r.lineWidth;const T=r.textMatrixScale;if(T===0||E===0){const I=r.textRenderingMode&wn.FILL_STROKE_MASK;(I===wn.STROKE||I===wn.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=T;if(a!==1&&(o.scale(a,a),E/=a),o.lineWidth=E,i.isInvalidPDFjsFont){const I=[];let U=0;for(const M of t)I.push(M.unicode),U+=M.width;const B=I.join("");if(o.fillText(B,0,0),this.dependencyTracker!==null){const M=o.measureText(B);this.dependencyTracker.recordBBox(e,this.ctx,-M.actualBoundingBoxLeft,M.actualBoundingBoxRight,-M.actualBoundingBoxAscent,M.actualBoundingBoxDescent).recordShowTextOperation(e)}r.x+=U*b*h,o.restore(),this.compose();return}let k=0,P;for(P=0;P<f;++P){const I=t[P];if(typeof I=="number"){k+=y*I*s/1e3;continue}let U=!1;const B=(I.isSpace?c:0)+l,M=I.fontChar,D=I.accent;let z,$,V=I.width;if(m){const G=I.vmetric||g,j=-(I.vmetric?G[1]:V*.5)*b,ee=G[2]*b;V=G?-G[0]:V,z=j/a,$=(k+ee)/a}else z=k/a,$=0;let N;if(i.remeasure&&V>0){N=o.measureText(M);const G=N.width*1e3/s*a;if(V<G&&this.isFontSubpixelAAEnabled){const j=V/G;U=!0,o.save(),o.scale(j,1),z/=j}else V!==G&&(z+=(V-G)/2e3*s/a)}if(this.contentVisible&&(I.isInFont||i.missingFile)){if(v&&!D)o.fillText(M,z,$),(O=this.dependencyTracker)==null||O.recordCharacterBBox(e,o,N?{bbox:null}:i,s/a,z,$,()=>N??o.measureText(M));else if(this.paintChar(e,M,z,$,x,w),D){const G=z+s*D.offset.x/a,j=$-s*D.offset.y/a;this.paintChar(e,D.fontChar,G,j,x,w)}}const W=m?V*b-B*d:V*b+B*d;k+=W,U&&o.restore()}m?r.y-=k:r.x+=k*h,o.restore(),this.compose(),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e)}showType3Text(e,t){const r=this.ctx,i=this.current,s=i.font,o=i.fontSize,a=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,d=i.wordSpacing,h=i.textHScale*a,f=i.fontMatrix||sk,m=t.length,y=i.textRenderingMode===wn.INVISIBLE;let g,b,v,x;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(h,a);const w=this.dependencyTracker;for(this.dependencyTracker=w?new tw(w,e):null,g=0;g<m;++g){if(b=t[g],typeof b=="number"){x=l*b*o/1e3,this.ctx.translate(x,0),i.x+=x*h;continue}const E=(b.isSpace?d:0)+c,T=s.charProcOperatorList[b.operatorListId];T?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...f),this.executeOperatorList(T),this.restore()):Ae(`Type3 character "${b.operatorListId}" is not available.`);const k=[b.width,0];re.applyTransform(k,f),v=k[0]*o+E,r.translate(v,0),i.x+=v*h}r.restore(),w&&(this.dependencyTracker=w)}setCharWidth(e,t,r){}setCharWidthAndBounds(e,t,r,i,s,o,a){var c;const l=new Path2D;l.rect(i,s,o-i,a-s),this.ctx.clip(l),(c=this.dependencyTracker)==null||c.recordBBox(e,this.ctx,i,o,s,a).recordClipBox(e,this.ctx,i,o,s,a),this.endPath(e)}getColorN_Pattern(e,t){let r;if(t[0]==="TilingPattern"){const i=this.baseTransform||Pt(this.ctx),s={createCanvasGraphics:(o,a)=>new l2(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new tw(this.dependencyTracker,a,!0):null)};r=new Mk(t,this.ctx,s,i)}else r=this._getPattern(e,t[1],t[2]);return r}setStrokeColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,r=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Q7(this.getObject(e,t)),this.cachedPatterns.set(t,i)),r&&(i.matrix=r),i}shadingFill(e,t){var o;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,ms(r),Pn.SHADING,e);const s=ms(r);if(s){const{width:a,height:l}=r.canvas,c=qd.slice();re.axialAlignedBoundingBox([0,0,a,l],s,c);const[d,h,f,m]=c;this.ctx.fillRect(d,h,f-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,ui.transform).recordDependencies(e,ui.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ct("Should not call beginInlineImage")}beginImageData(){ct("Should not call beginImageData")}paintFormXObjectBegin(e,t,r){var i;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Pt(this.ctx),r)){re.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);const[s,o,a,l]=r,c=new Path2D;c.rect(s,o,a-s,l-o),this.ctx.clip(c),(i=this.dependencyTracker)==null||i.recordClipBox(e,this.ctx,s,a,o,l),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var w;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||BS("TODO: Support non-isolated groups."),t.knockout&&Ae("Knockout groups not supported.");const i=Pt(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=qd.slice();re.axialAlignedBoundingBox(t.bbox,Pt(r),s);const o=[0,0,r.canvas.width,r.canvas.height];s=re.intersect(s,o)||[0,0,0,0];const a=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),d=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,c,d),m=f.context;m.translate(-a,-l),m.transform(...i);let y=new Path2D;const[g,b,v,x]=t.bbox;if(y.rect(g,b,v-g,x-b),t.matrix){const E=new Path2D;E.addPath(y,new DOMMatrix(t.matrix)),y=E}m.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:a,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,l),r.save()),Yp(r,m),this.ctx=m,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var s;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,(s=this.dependencyTracker)==null||s.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Pt(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=qd.slice();re.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],o,a),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,r,i,s,o){if(C(this,by,Lk).call(this),fx(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){const a=r[2]-r[0],l=r[3]-r[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=l,re.singularValueDecompose2dScale(Pt(this.ctx),Zr);const{viewportScale:c}=this,d=Math.ceil(a*this.outputScaleX*c),h=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Zr[0],0,0,-Zr[1],0,l*Zr[1]),fx(this.ctx)}else{fx(this.ctx),this.endPath(e);const c=new Path2D;c.rect(r[0],r[1],a,l),this.ctx.clip(c)}}this.current=new Qj(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),C(this,wy,Ik).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const r=t.count;t=this.getObject(e,t.data,t),t.count=r;const i=this.ctx,s=this._createMaskCanvas(e,t),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r,i=0,s=0,o,a){var h,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const l=this.ctx;l.save();const c=Pt(l);l.transform(r,i,s,o,0,0);const d=this._createMaskCanvas(e,t);l.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let y=0,g=a.length;y<g;y+=2){const b=re.transform(c,[r,i,s,o,a[y],a[y+1]]);l.drawImage(d.canvas,b[4],b[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,b[4],b[4]+d.canvas.width,b[5],b[5]+d.canvas.height)}l.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,l;if(!this.contentVisible)return;const r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,ui.transformAndFill);for(const c of t){const{data:d,width:h,height:f,transform:m}=c,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),g=y.context;g.save();const b=this.getObject(e,d,c);Zj(g,b),g.globalCompositeOperation="source-in",g.fillStyle=s?i.getPattern(g,this,ms(r),Pn.FILL,e):i,g.fillRect(0,0,h,f),g.restore(),r.save(),r.transform(...m),r.scale(1,-1),hx(r,y.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,h,0,f),r.restore()}this.compose(),(l=this.dependencyTracker)==null||l.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const r=this.getObject(e,t);if(!r){Ae("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,r)}paintImageXObjectRepeat(e,t,r,i,s){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Ae("Dependent image isn't ready yet");return}const a=o.width,l=o.height,c=[];for(let d=0,h=s.length;d<h;d+=2)c.push({transform:[r,0,0,i,s[d],s[d+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(e,o,c)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:r,height:i}=e,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",s.canvas}paintInlineImageXObject(e,t){var c;if(!this.contentVisible)return;const r=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/r,-1/i);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",r,i).context;Jj(h,t),a=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(a,ms(s));s.imageSmoothingEnabled=eM(Pt(s),t.interpolate),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,ui.imageXObject).recordOperation(e),hx(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,r){var o,a,l;if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const c=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",c,d).context;Jj(f,t),s=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const c of r)i.save(),i.transform(...c.transform),i.scale(1,-1),hx(i,s,c.x,c.y,c.w,c.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,i,0,1,-1,0),i.restore();(l=this.dependencyTracker)==null||l.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,ui.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,r){}beginMarkedContent(e,t){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,r){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,r){var o,a;const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);const s=this.ctx;this.pendingClip?(i||(this.pendingClip===tM?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Pt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:r,c:i,d:s}=this.ctx.getTransform();let o,a;if(r===0&&i===0){const l=Math.abs(t),c=Math.abs(s);if(l===c)if(e===0)o=a=1/l;else{const d=l*e;o=a=d<1?1/d:1}else if(e===0)o=1/l,a=1/c;else{const d=l*e,h=c*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const l=Math.abs(t*s-r*i),c=Math.hypot(t,r),d=Math.hypot(i,s);if(e===0)o=d/l,a=c/l;else{const h=e*l;o=d>h?d/h:1,a=c>h?c/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:r,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o){r.lineWidth=(i||1)*s,r.stroke(e);return}const a=r.getLineDash();t&&r.save(),r.scale(s,o),c_.a=1/s,c_.d=1/o;const l=new Path2D;if(l.addPath(e,c_),a.length>0){const c=Math.max(s,o);r.setLineDash(a.map(d=>d/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),t&&r.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};by=new WeakSet,Lk=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},wy=new WeakSet,Ik=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},Sy=new WeakSet,Dk=function(e,t,r){const i=new Path2D;return i.addPath(e,new DOMMatrix(r).invertSelf().multiplySelf(t)),i};let nh=l2;for(const n in yp)nh.prototype[n]!==void 0&&(nh.prototype[yp[n]]=nh.prototype[n]);var $h,Uh,Ay,Vh,qx;const Wd=class Wd{constructor(e){S(this,Vh);S(this,$h,void 0);S(this,Uh,void 0);S(this,Ay,void 0);A(this,$h,e),A(this,Uh,new DataView(u(this,$h))),A(this,Ay,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let i=0;for(const c of Wd.strings){const d=t.encode(e[c]);r[c]=d,i+=4+d.length}const s=new ArrayBuffer(i),o=new Uint8Array(s),a=new DataView(s);let l=0;for(const c of Wd.strings){const d=r[c],h=d.length;a.setUint32(l,h),o.set(d,l+4),l+=4+h}return $e(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}get fontFamily(){return C(this,Vh,qx).call(this,0)}get fontWeight(){return C(this,Vh,qx).call(this,1)}get italicAngle(){return C(this,Vh,qx).call(this,2)}};$h=new WeakMap,Uh=new WeakMap,Ay=new WeakMap,Vh=new WeakSet,qx=function(e){$e(e<Wd.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=u(this,Uh).getUint32(t)+4;const r=u(this,Uh).getUint32(t);return u(this,Ay).decode(new Uint8Array(u(this,$h),t+4,r))},X(Wd,"strings",["fontFamily","fontWeight","italicAngle"]);let nw=Wd;var Ka,js,nu,ru,xm;const Kd=class Kd{constructor(e){S(this,ru);S(this,Ka,void 0);S(this,js,void 0);S(this,nu,void 0);A(this,Ka,e),A(this,js,new DataView(u(this,Ka))),A(this,nu,new TextDecoder)}static write(e){const t=new TextEncoder,r={};let i=0;for(const f of Kd.strings){const m=t.encode(e[f]);r[f]=m,i+=4+m.length}i+=4;let s,o,a=1+i;e.style&&(s=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+s.length+4+o.length);const l=new ArrayBuffer(a),c=new Uint8Array(l),d=new DataView(l);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,i=0;for(const f of Kd.strings){const m=r[f],y=m.length;i+=4+y,d.setUint32(h,y),c.set(m,h+4),h+=4+y}return d.setUint32(h-i-4,i),e.style&&(d.setUint32(h,s.length),c.set(s,h+4),h+=4+s.length,d.setUint32(h,o.length),c.set(o,h+4),h+=4+o.length),$e(h<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(h)}get guessFallback(){return u(this,js).getUint8(0)!==0}get css(){return C(this,ru,xm).call(this,0)}get loadedName(){return C(this,ru,xm).call(this,1)}get baseFontName(){return C(this,ru,xm).call(this,2)}get src(){return C(this,ru,xm).call(this,3)}get style(){let e=1;e+=4+u(this,js).getUint32(e);const t=u(this,js).getUint32(e),r=u(this,nu).decode(new Uint8Array(u(this,Ka),e+4,t));e+=4+t;const i=u(this,js).getUint32(e),s=u(this,nu).decode(new Uint8Array(u(this,Ka),e+4,i));return{style:r,weight:s}}};Ka=new WeakMap,js=new WeakMap,nu=new WeakMap,ru=new WeakSet,xm=function(e){$e(e<Kd.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=u(this,js).getUint32(t)+4;const r=u(this,js).getUint32(t);return u(this,nu).decode(new Uint8Array(u(this,Ka),t+4,r))},X(Kd,"strings",["css","loadedName","baseFontName","src"]);let rw=Kd;var Hh,qh,Gh,Wh,Dr,Ms,_y,it,Or,Ui,Kh,Gx,iu,bm;const Ce=class Ce{constructor({data:e,extra:t}){S(this,Or);S(this,Kh);S(this,iu);S(this,Ms,void 0);S(this,_y,void 0);S(this,it,void 0);A(this,Ms,e),A(this,_y,new TextDecoder),A(this,it,new DataView(u(this,Ms))),t&&Object.assign(this,t)}get black(){return C(this,Or,Ui).call(this,0)}get bold(){return C(this,Or,Ui).call(this,1)}get disableFontFace(){return C(this,Or,Ui).call(this,2)}get fontExtraProperties(){return C(this,Or,Ui).call(this,3)}get isInvalidPDFjsFont(){return C(this,Or,Ui).call(this,4)}get isType3Font(){return C(this,Or,Ui).call(this,5)}get italic(){return C(this,Or,Ui).call(this,6)}get missingFile(){return C(this,Or,Ui).call(this,7)}get remeasure(){return C(this,Or,Ui).call(this,8)}get vertical(){return C(this,Or,Ui).call(this,9)}get ascent(){return C(this,Kh,Gx).call(this,0)}get defaultWidth(){return C(this,Kh,Gx).call(this,1)}get descent(){return C(this,Kh,Gx).call(this,2)}get bbox(){let e=u(Ce,qh);if(u(this,it).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<4;i++)r.push(u(this,it).getInt16(e,!0)),e+=2;return r}get fontMatrix(){let e=u(Ce,Gh);if(u(this,it).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<6;i++)r.push(u(this,it).getFloat64(e,!0)),e+=8;return r}get defaultVMetrics(){let e=u(Ce,Wh);if(u(this,it).getUint8(e)===0)return;e+=1;const r=[];for(let i=0;i<3;i++)r.push(u(this,it).getInt16(e,!0)),e+=2;return r}get fallbackName(){return C(this,iu,bm).call(this,0)}get loadedName(){return C(this,iu,bm).call(this,1)}get mimetype(){return C(this,iu,bm).call(this,2)}get name(){return C(this,iu,bm).call(this,3)}get data(){let e=u(Ce,Dr);const t=u(this,it).getUint32(e);e+=4+t;const r=u(this,it).getUint32(e);e+=4+r;const i=u(this,it).getUint32(e);e+=4+i;const s=u(this,it).getUint32(e);if(s!==0)return new Uint8Array(u(this,Ms),e+4,s)}clearData(){let e=u(Ce,Dr);const t=u(this,it).getUint32(e);e+=4+t;const r=u(this,it).getUint32(e);e+=4+r;const i=u(this,it).getUint32(e);e+=4+i;const s=u(this,it).getUint32(e);new Uint8Array(u(this,Ms),e+4,s).fill(0),u(this,it).setUint32(e,0)}get cssFontInfo(){let e=u(Ce,Dr);const t=u(this,it).getUint32(e);e+=4+t;const r=u(this,it).getUint32(e);e+=4+r;const i=u(this,it).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(u(this,Ms),e+4,i)),new nw(s.buffer)}get systemFontInfo(){let e=u(Ce,Dr);const t=u(this,it).getUint32(e);e+=4+t;const r=u(this,it).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(u(this,Ms),e+4,r)),new rw(i.buffer)}static write(e){const t=e.systemFontInfo?rw.write(e.systemFontInfo):null,r=e.cssFontInfo?nw.write(e.cssFontInfo):null,i=new TextEncoder,s={};let o=0;for(const g of Ce.strings)s[g]=i.encode(e[g]),o+=4+s[g].length;const a=u(Ce,Dr)+4+o+4+(t?t.byteLength:0)+4+(r?r.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(a),c=new Uint8Array(l),d=new DataView(l);let h=0;const f=Ce.bools.length;let m=0,y=0;for(let g=0;g<f;g++){const b=e[Ce.bools[g]];m|=(b===void 0?0:b?2:1)<<y,y+=2,(y===8||g===f-1)&&(d.setUint8(h++,m),m=0,y=0)}$e(h===u(Ce,Hh),"FontInfo.write: Boolean properties offset mismatch");for(const g of Ce.numbers)d.setFloat64(h,e[g]),h+=8;if($e(h===u(Ce,qh),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if($e(h===u(Ce,Gh),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if($e(h===u(Ce,Wh),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=3*2;$e(h===u(Ce,Dr),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(u(Ce,Dr),0),h+=4;for(const g of Ce.strings){const b=s[g],v=b.length;d.setUint32(h,v),c.set(b,h+4),h+=4+v}if(d.setUint32(u(Ce,Dr),h-u(Ce,Dr)-4),!t)d.setUint32(h,0),h+=4;else{const g=t.byteLength;d.setUint32(h,g),$e(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),c.set(new Uint8Array(t),h+4),h+=4+g}if(!r)d.setUint32(h,0),h+=4;else{const g=r.byteLength;d.setUint32(h,g),$e(h+4+g<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),c.set(new Uint8Array(r),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),c.set(e.data,h+4),h+=4+e.data.length),$e(h<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(h)}};Hh=new WeakMap,qh=new WeakMap,Gh=new WeakMap,Wh=new WeakMap,Dr=new WeakMap,Ms=new WeakMap,_y=new WeakMap,it=new WeakMap,Or=new WeakSet,Ui=function(e){$e(e<Ce.bools.length,"Invalid boolean index");const t=Math.floor(e/4),r=e*2%8,i=u(this,it).getUint8(t)>>r&3;return i===0?void 0:i===2},Kh=new WeakSet,Gx=function(e){return $e(e<Ce.numbers.length,"Invalid number index"),u(this,it).getFloat64(u(Ce,Hh)+e*8)},iu=new WeakSet,bm=function(e){$e(e<Ce.strings.length,"Invalid string index");let t=u(Ce,Dr)+4;for(let s=0;s<e;s++)t+=u(this,it).getUint32(t)+4;const r=u(this,it).getUint32(t),i=new Uint8Array(r);return i.set(new Uint8Array(u(this,Ms),t+4,r)),u(this,_y).decode(i)},X(Ce,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),X(Ce,"numbers",["ascent","defaultWidth","descent"]),X(Ce,"strings",["fallbackName","loadedName","mimetype","name"]),S(Ce,Hh,Math.ceil(Ce.bools.length*2/8)),S(Ce,qh,u(Ce,Hh)+Ce.numbers.length*8),S(Ce,Gh,u(Ce,qh)+1+2*4),S(Ce,Wh,u(Ce,Gh)+1+8*6),S(Ce,Dr,u(Ce,Wh)+1+2*3);let Ok=Ce;var Ey,ky;class Ci{static get workerPort(){return u(this,Ey)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");A(this,Ey,e)}static get workerSrc(){return u(this,ky)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");A(this,ky,e)}}Ey=new WeakMap,ky=new WeakMap,S(Ci,Ey,null),S(Ci,ky,"");var Xh,Cy;class sK{constructor({parsedData:e,rawData:t}){S(this,Xh,void 0);S(this,Cy,void 0);A(this,Xh,e),A(this,Cy,t)}getRaw(){return u(this,Cy)}get(e){return u(this,Xh).get(e)??null}[Symbol.iterator](){return u(this,Xh).entries()}}Xh=new WeakMap,Cy=new WeakMap;const kd=Symbol("INTERNAL");var Ty,Py,Ny,Yh;class oK{constructor(e,{name:t,intent:r,usage:i,rbGroups:s}){S(this,Ty,!1);S(this,Py,!1);S(this,Ny,!1);S(this,Yh,!0);A(this,Ty,!!(e&Qr.DISPLAY)),A(this,Py,!!(e&Qr.PRINT)),this.name=t,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(u(this,Ny))return u(this,Yh);if(!u(this,Yh))return!1;const{print:e,view:t}=this.usage;return u(this,Ty)?(t==null?void 0:t.viewState)!=="OFF":u(this,Py)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,r=!1){e!==kd&&ct("Internal method `_setVisible` called."),A(this,Ny,r),A(this,Yh,t)}}Ty=new WeakMap,Py=new WeakMap,Ny=new WeakMap,Yh=new WeakMap;var Xa,st,Qh,Jh,Ry,Fk;class aK{constructor(e,t=Qr.DISPLAY){S(this,Ry);S(this,Xa,null);S(this,st,new Map);S(this,Qh,null);S(this,Jh,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,A(this,Jh,e.order);for(const r of e.groups)u(this,st).set(r.id,new oK(t,r));if(e.baseState==="OFF")for(const r of u(this,st).values())r._setVisible(kd,!1);for(const r of e.on)u(this,st).get(r)._setVisible(kd,!0);for(const r of e.off)u(this,st).get(r)._setVisible(kd,!1);A(this,Qh,this.getHash())}}isVisible(e){if(u(this,st).size===0)return!0;if(!e)return BS("Optional content group not defined."),!0;if(e.type==="OCG")return u(this,st).has(e.id)?u(this,st).get(e.id).visible:(Ae(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,Ry,Fk).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!u(this,st).has(t))return Ae(`Optional content group not found: ${t}`),!0;if(u(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!u(this,st).has(t))return Ae(`Optional content group not found: ${t}`),!0;if(!u(this,st).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!u(this,st).has(t))return Ae(`Optional content group not found: ${t}`),!0;if(!u(this,st).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!u(this,st).has(t))return Ae(`Optional content group not found: ${t}`),!0;if(u(this,st).get(t).visible)return!1}return!0}return Ae(`Unknown optional content policy ${e.policy}.`),!0}return Ae(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,r=!0){var s;const i=u(this,st).get(e);if(!i){Ae(`Optional content group not found: ${e}`);return}if(r&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==e&&((s=u(this,st).get(a))==null||s._setVisible(kd,!1,!0));i._setVisible(kd,!!t,!0),A(this,Xa,null)}setOCGState({state:e,preserveRB:t}){let r;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}const s=u(this,st).get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!s.visible,t);break}}A(this,Xa,null)}get hasInitialVisibility(){return u(this,Qh)===null||this.getHash()===u(this,Qh)}getOrder(){return u(this,st).size?u(this,Jh)?u(this,Jh).slice():[...u(this,st).keys()]:null}getGroup(e){return u(this,st).get(e)||null}getHash(){if(u(this,Xa)!==null)return u(this,Xa);const e=new o4;for(const[t,r]of u(this,st))e.update(`${t}:${r.visible}`);return A(this,Xa,e.hexdigest())}[Symbol.iterator](){return u(this,st).entries()}}Xa=new WeakMap,st=new WeakMap,Qh=new WeakMap,Jh=new WeakMap,Ry=new WeakSet,Fk=function(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const s=e[i];let o;if(Array.isArray(s))o=C(this,Ry,Fk).call(this,s);else if(u(this,st).has(s))o=u(this,st).get(s).visible;else return Ae(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"};class lK{constructor(e,{disableRange:t=!1,disableStream:r=!1}){$e(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const r=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{const i=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(r),!0)});$e(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,r,i,s;e.total===void 0?(r=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||r.call(t,{loaded:e.loaded}):(s=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||s.call(i,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){$e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new cK(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new uK(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeReaders.slice(0))r.cancel(e);this._pdfDataRangeTransport.abort()}}class cK{constructor(e,t,r=!1,i=null){this._stream=e,this._done=r||!1,this._filename=$S(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class uK{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function dK(n){let e=!0,t=r("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=l(d),d=c(d),s(d)}if(t=o(n),t){const d=c(t);return s(d)}if(t=r("filename","i").exec(n),t){t=t[1];let d=a(t);return d=c(d),s(d)}function r(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function i(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),m=vv(h);h=f.decode(m),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=i("utf-8",d),e&&(d=i("iso-8859-1",d))),d}function o(d){const h=[];let f;const m=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(d))!==null;){let[,g,b,v]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[b,v]}const y=[];for(let g=0;g<h.length&&g in h;++g){let[b,v]=h[g];v=a(v),b&&(v=unescape(v),g===0&&(v=l(v))),y.push(v)}return y.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),y=d.slice(h+1).replace(/^[^']*'/,"");return i(f,y)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,b){return String.fromCharCode(parseInt(b,16))}),i(f,y);try{y=atob(y)}catch{}return i(f,y)})}return""}function x4(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const r in e){const i=e[r];i!==void 0&&t.append(r,i)}return t}function US(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function b4({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:r}){const i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*t)||r||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function w4(n){const e=n.get("Content-Disposition");if(e){let t=dK(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if($S(t))return t}return null}function Sv(n,e){return new xg(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function S4(n){return n===200||n===206}function A4(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function _4(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(Ae(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class hK{constructor(e){X(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=x4(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return $e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new fK(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new pK(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class fK{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const r=new Headers(e.headers),i=t.url;fetch(i,A4(r,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=US(s.url),!S4(s.status))throw Sv(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();const o=s.headers,{allowRangeRequests:a,suggestedLength:l}=b4({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=w4(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new oa("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:_4(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class pK{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${r-1}`);const o=i.url;fetch(o,A4(s,this._withCredentials,this._abortController)).then(a=>{const l=US(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!S4(a.status))throw Sv(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:_4(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const u_=200,d_=206;function mK(n){const e=n.response;return typeof e!="string"?e:vv(e).buffer}class gK{constructor({url:e,httpHeaders:t,withCredentials:r}){X(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=x4(this.isHttp,t),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,o]of this.headers)t.setRequestHeader(s,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=d_):i.expectedStatus=u_,t.responseType="arraybuffer",$e(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var i;const r=this.pendingRequests[e];r&&((i=r.onProgress)==null||i.call(r,t))}onStateChange(e,t){const r=this.pendingRequests[e];if(!r)return;const i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){r.onError(i.status);return}const s=i.status||u_;if(!(s===u_&&r.expectedStatus===d_)&&s!==r.expectedStatus){r.onError(i.status);return}const a=mK(i);if(s===d_){const l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:a}):(Ae('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class yK{constructor(e){this._source=e,this._manager=new gK(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return $e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new vK(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new xK(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class vK{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=US(t.responseURL);const r=t.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=b4({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=w4(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Sv(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class xK{constructor(e,t,r){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=US((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Sv(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const bK=/^[a-z][a-z0-9\-+.]+:/i;function wK(n){if(bK.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class SK{constructor(e){this.source=e,this.url=wK(e.url),$e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return $e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new AK(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new _K(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}class AK{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Sv(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new oa("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _K{constructor(e,t,r){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var r;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(r=this.onProgress)==null||r.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Qp=Symbol("INITIAL_DATA");var Fr,jy,Bk;class E4{constructor(){S(this,jy);S(this,Fr,Object.create(null))}get(e,t=null){if(t){const i=C(this,jy,Bk).call(this,e);return i.promise.then(()=>t(i.data)),null}const r=u(this,Fr)[e];if(!r||r.data===Qp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=u(this,Fr)[e];return!!t&&t.data!==Qp}delete(e){const t=u(this,Fr)[e];return!t||t.data===Qp?!1:(delete u(this,Fr)[e],!0)}resolve(e,t=null){const r=C(this,jy,Bk).call(this,e);r.data=t,r.resolve()}clear(){var e;for(const t in u(this,Fr)){const{data:r}=u(this,Fr)[t];(e=r==null?void 0:r.bitmap)==null||e.close()}A(this,Fr,Object.create(null))}*[Symbol.iterator](){for(const e in u(this,Fr)){const{data:t}=u(this,Fr)[e];t!==Qp&&(yield[e,t])}}}Fr=new WeakMap,jy=new WeakSet,Bk=function(e){var t;return(t=u(this,Fr))[e]||(t[e]={...Promise.withResolvers(),data:Qp})};const EK=1e5,nM=30;var dL,Ya,vr,My,Ly,su,Co,Iy,Dy,ou,Zh,ef,Qa,tf,Oy,nf,au,Fy,By,kt,rf,lu,zy,Ja,sf,Jw,k4,Zw,C4,$y,zk,of,Wx,Uy,$k,e1,T4,t1,P4;let Ag=(kt=class{constructor({textContentSource:e,container:t,viewport:r}){S(this,Jw);S(this,Zw);S(this,$y);S(this,Ya,Promise.withResolvers());S(this,vr,null);S(this,My,!1);S(this,Ly,!!((dL=globalThis.FontInspector)!=null&&dL.enabled));S(this,su,null);S(this,Co,null);S(this,Iy,0);S(this,Dy,0);S(this,ou,null);S(this,Zh,null);S(this,ef,0);S(this,Qa,0);S(this,tf,Object.create(null));S(this,Oy,[]);S(this,nf,null);S(this,au,[]);S(this,Fy,new WeakMap);S(this,By,null);var l;if(e instanceof ReadableStream)A(this,nf,e);else if(typeof e=="object")A(this,nf,new ReadableStream({start(c){c.enqueue(e),c.close()}}));else throw new Error('No "textContentSource" parameter specified.');A(this,vr,A(this,Zh,t)),A(this,Qa,r.scale*ds.pixelRatio),A(this,ef,r.rotation),A(this,Co,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;A(this,By,[1,0,0,-1,-o,a+s]),A(this,Dy,i),A(this,Iy,s),C(l=kt,e1,T4).call(l),$l(t,r),u(this,Ya).promise.finally(()=>{u(kt,sf).delete(this),A(this,Co,null),A(this,tf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=xn.platform;return Ne(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{u(this,ou).read().then(({value:t,done:r})=>{if(r){u(this,Ya).resolve();return}u(this,su)??A(this,su,t.lang),Object.assign(u(this,tf),t.styles),C(this,Jw,k4).call(this,t.items),e()},u(this,Ya).reject)};return A(this,ou,u(this,nf).getReader()),u(kt,sf).add(this),e(),u(this,Ya).promise}update({viewport:e,onBefore:t=null}){var s;const r=e.scale*ds.pixelRatio,i=e.rotation;if(i!==u(this,ef)&&(t==null||t(),A(this,ef,i),$l(u(this,Zh),{rotation:i})),r!==u(this,Qa)){t==null||t(),A(this,Qa,r);const o={div:null,properties:null,ctx:C(s=kt,of,Wx).call(s,u(this,su))};for(const a of u(this,au))o.properties=u(this,Fy).get(a),o.div=a,C(this,$y,zk).call(this,o)}}cancel(){var t;const e=new oa("TextLayer task cancelled.");(t=u(this,ou))==null||t.cancel(e).catch(()=>{}),A(this,ou,null),u(this,Ya).reject(e)}get textDivs(){return u(this,au)}get textContentItemsStr(){return u(this,Oy)}static cleanup(){if(!(u(this,sf).size>0)){u(this,rf).clear();for(const{canvas:e}of u(this,lu).values())e.remove();u(this,lu).clear()}}},Ya=new WeakMap,vr=new WeakMap,My=new WeakMap,Ly=new WeakMap,su=new WeakMap,Co=new WeakMap,Iy=new WeakMap,Dy=new WeakMap,ou=new WeakMap,Zh=new WeakMap,ef=new WeakMap,Qa=new WeakMap,tf=new WeakMap,Oy=new WeakMap,nf=new WeakMap,au=new WeakMap,Fy=new WeakMap,By=new WeakMap,rf=new WeakMap,lu=new WeakMap,zy=new WeakMap,Ja=new WeakMap,sf=new WeakMap,Jw=new WeakSet,k4=function(e){var i,s;if(u(this,My))return;(s=u(this,Co)).ctx??(s.ctx=C(i=kt,of,Wx).call(i,u(this,su)));const t=u(this,au),r=u(this,Oy);for(const o of e){if(t.length>EK){Ae("Ignoring additional textDivs for performance reasons."),A(this,My,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=u(this,vr);A(this,vr,document.createElement("span")),u(this,vr).classList.add("markedContent"),o.id&&u(this,vr).setAttribute("id",`${o.id}`),a.append(u(this,vr))}else o.type==="endMarkedContent"&&A(this,vr,u(this,vr).parentNode);continue}r.push(o.str),C(this,Zw,C4).call(this,o)}},Zw=new WeakSet,C4=function(e){var g;const t=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};u(this,au).push(t);const i=re.transform(u(this,By),e.transform);let s=Math.atan2(i[1],i[0]);const o=u(this,tf)[e.fontName];o.vertical&&(s+=Math.PI/2);let a=u(this,Ly)&&o.fontSubstitution||o.fontFamily;a=kt.fontFamilyMap.get(a)||a;const l=Math.hypot(i[2],i[3]),c=l*C(g=kt,t1,P4).call(g,a,o,u(this,su));let d,h;s===0?(d=i[4],h=i[5]-c):(d=i[4]+c*Math.sin(s),h=i[5]-c*Math.cos(s));const f="calc(var(--total-scale-factor) *",m=t.style;u(this,vr)===u(this,Zh)?(m.left=`${(100*d/u(this,Dy)).toFixed(2)}%`,m.top=`${(100*h/u(this,Iy)).toFixed(2)}%`):(m.left=`${f}${d.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(u(kt,Ja)*l).toFixed(2)}px)`,m.fontFamily=a,r.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,u(this,Ly)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),s!==0&&(r.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const b=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);b!==v&&Math.max(b,v)/Math.min(b,v)>1.5&&(y=!0)}if(y&&(r.canvasWidth=o.vertical?e.height:e.width),u(this,Fy).set(t,r),u(this,Co).div=t,u(this,Co).properties=r,C(this,$y,zk).call(this,u(this,Co)),r.hasText&&u(this,vr).append(t),r.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),u(this,vr).append(b)}},$y=new WeakSet,zk=function(e){var a;const{div:t,properties:r,ctx:i}=e,{style:s}=t;let o="";if(u(kt,Ja)>1&&(o=`scale(${1/u(kt,Ja)})`),r.canvasWidth!==0&&r.hasText){const{fontFamily:l}=s,{canvasWidth:c,fontSize:d}=r;C(a=kt,Uy,$k).call(a,i,d*u(this,Qa),l);const{width:h}=i.measureText(t.textContent);h>0&&(o=`scaleX(${c*u(this,Qa)/h}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)},of=new WeakSet,Wx=function(e=null){let t=u(this,lu).get(e||(e=""));if(!t){const r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=e,document.body.append(r),t=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),u(this,lu).set(e,t),u(this,zy).set(t,{size:0,family:""})}return t},Uy=new WeakSet,$k=function(e,t,r){const i=u(this,zy).get(e);t===i.size&&r===i.family||(e.font=`${t}px ${r}`,i.size=t,i.family=r)},e1=new WeakSet,T4=function(){if(u(this,Ja)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),A(this,Ja,e.getBoundingClientRect().height),e.remove()},t1=new WeakSet,P4=function(e,t,r){const i=u(this,rf).get(e);if(i)return i;const s=C(this,of,Wx).call(this,r);s.canvas.width=s.canvas.height=nM,C(this,Uy,$k).call(this,s,nM,e);const o=s.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return a?c=a/(a+l):(xn.platform.isFirefox&&Ae("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?c=t.ascent:t.descent&&(c=1+t.descent)),u(this,rf).set(e,c),c},S(kt,of),S(kt,Uy),S(kt,e1),S(kt,t1),S(kt,rf,new Map),S(kt,lu,new Map),S(kt,zy,new WeakMap),S(kt,Ja,null),S(kt,sf,new Set),kt);const kK=100;function LP(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Uk,{docId:t}=e,r=n.url?L7(n.url):null,i=n.data?I7(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof IP?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof vp?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!bv(n.docBaseUrl)?n.docBaseUrl:null,m=lx(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(nr?U7:Uj),b=lx(n.iccUrl),v=lx(n.standardFontDataUrl),x=n.StandardFontDataFactory||(nr?V7:Vj),w=lx(n.wasmUrl),E=n.WasmFactory||(nr?H7:Hj),T=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,R=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!nr,L=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!nr&&(xn.platform.isFirefox||!globalThis.chrome),O=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:nr,I=n.fontExtraProperties===!0,U=n.enableXfa===!0,B=n.ownerDocument||globalThis.document,M=n.disableRange===!0,D=n.disableStream===!0,z=n.disableAutoFetch===!0,$=n.pdfBug===!0,V=n.CanvasFactory||(nr?$7:F7),N=n.FilterFactory||(nr?z7:B7),W=n.enableHWA===!0,G=n.useWasm!==!1,j=l?l.length:n.length??NaN,ee=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!nr&&!F,ye=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===Uj&&x===Vj&&E===Hj&&m&&v&&w&&lm(m,document.baseURI)&&lm(v,document.baseURI)&&lm(w,document.baseURI)),de=null;m7(h);const se={canvasFactory:new V({ownerDocument:B,enableHWA:W}),filterFactory:new N({docId:t,ownerDocument:B}),cMapReaderFactory:ye?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:ye?null:new x({baseUrl:v}),wasmFactory:ye?null:new E({baseUrl:w})};d||(d=vp.create({verbosity:h,port:Ci.workerPort}),e._worker=d);const Ee={docId:t,apiVersion:"5.4.296",data:i,password:a,disableAutoFetch:z,rangeChunkSize:c,length:j,docBaseUrl:f,enableXfa:U,evaluatorOptions:{maxImageSize:k,disableFontFace:F,ignoreErrors:T,isEvalSupported:P,isOffscreenCanvasSupported:R,isImageDecoderSupported:L,canvasMaxAreaInBytes:O,fontExtraProperties:I,useSystemFonts:ee,useWasm:G,useWorkerFetch:ye,cMapUrl:m,iccUrl:b,standardFontDataUrl:v,wasmUrl:w}},Fe={ownerDocument:B,pdfBug:$,styleElement:de,loadingParams:{disableAutoFetch:z,enableXfa:U}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ve=d.messageHandler.sendWithPromise("GetDocRequest",Ee,i?[i.buffer]:null);let Ue;if(l)Ue=new lK(l,{disableRange:M,disableStream:D});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");const Dt=lm(r)?hK:nr?SK:yK;Ue=new Dt({url:r,length:j,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:M,disableStream:D})}return ve.then(Dt=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Y=new pm(t,Dt,d.port),te=new PK(Y,e,Ue,Fe,se,W);e._transport=te,Y.send("Ready",null)})}).catch(e._capability.reject),e}var n1;const r1=class r1{constructor(){X(this,"_capability",Promise.withResolvers());X(this,"_transport",null);X(this,"_worker",null);X(this,"docId",`d${en(r1,n1)._++}`);X(this,"destroyed",!1);X(this,"onPassword",null);X(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,r,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(r=this._worker)!=null&&r.port&&delete this._worker._pendingDestroy,s}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};n1=new WeakMap,S(r1,n1,0);let Uk=r1;var cu,Vy,Hy,qy,Gy,hL;let IP=(hL=class{constructor(e,t,r=!1,i=null){S(this,cu,Promise.withResolvers());S(this,Vy,[]);S(this,Hy,[]);S(this,qy,[]);S(this,Gy,[]);this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(e){u(this,Gy).push(e)}addProgressListener(e){u(this,qy).push(e)}addProgressiveReadListener(e){u(this,Hy).push(e)}addProgressiveDoneListener(e){u(this,Vy).push(e)}onDataRange(e,t){for(const r of u(this,Gy))r(e,t)}onDataProgress(e,t){u(this,cu).promise.then(()=>{for(const r of u(this,qy))r(e,t)})}onDataProgressiveRead(e){u(this,cu).promise.then(()=>{for(const t of u(this,Hy))t(e)})}onDataProgressiveDone(){u(this,cu).promise.then(()=>{for(const e of u(this,Vy))e()})}transportReady(){u(this,cu).resolve()}requestDataRange(e,t){ct("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},cu=new WeakMap,Vy=new WeakMap,Hy=new WeakMap,qy=new WeakMap,Gy=new WeakMap,hL);class CK{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ne(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var To,uu,wm;class TK{constructor(e,t,r,i=!1){S(this,uu);S(this,To,!1);this._pageIndex=e,this._pageInfo=t,this._transport=r,this._stats=i?new Ij:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new E4,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new xv({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ne(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:r,intent:i="display",annotationMode:s=Gs.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:y=null}){var L,O,F;(L=this._stats)==null||L.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,f),{renderingIntent:b,cacheKey:v}=g;A(this,To,!1),l||(l=this._transport.getOptionalContentConfig(b));let x=this._intentStates.get(v);x||(x=Object.create(null),this._intentStates.set(v,x)),x.streamReaderCancelTimeout&&(clearTimeout(x.streamReaderCancelTimeout),x.streamReaderCancelTimeout=null);const w=!!(b&Qr.PRINT);x.displayReadyCapability||(x.displayReadyCapability=Promise.withResolvers(),x.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(O=this._stats)==null||O.time("Page Request"),this._pumpOperatorList(g));const E=!!(this._pdfBug&&((F=globalThis.StepperManager)!=null&&F.enabled)),T=!this.recordedBBoxes&&(m||E),k=I=>{var U,B;if(x.renderTasks.delete(P),T){const M=(U=P.gfx)==null?void 0:U.dependencyTracker.take();M&&(P.stepper&&P.stepper.setOperatorBBoxes(M,P.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=M))}w&&A(this,To,!0),C(this,uu,wm).call(this),I?(P.capability.reject(I),this._abortOperatorList({intentState:x,reason:I instanceof Error?I:new Error(I)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(B=globalThis.Stats)!=null&&B.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Vk({callback:k,params:{canvas:t,canvasContext:e,dependencyTracker:T?new G7(t,x.operatorList.length,E):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:x.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(x.renderTasks||(x.renderTasks=new Set)).add(P);const R=P.task;return Promise.all([x.displayReadyCapability.promise,l]).then(([I,U])=>{var B;if(this.destroyed){k();return}if((B=this._stats)==null||B.time("Rendering"),!(U.renderingIntent&b))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:I,optionalContentConfig:U}),P.operatorListChanged()}).catch(k),R}getOperatorList({intent:e="display",annotationMode:t=Gs.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){var c;function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,r,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(c=this._stats)==null||c.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>bg.textContent(r));const t=this.streamTextContent(e);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();return this.objs.clear(),A(this,To,!1),Promise.all(e)}cleanup(e=!1){A(this,To,!0);const t=C(this,uu,wm).call(this);return e&&t&&this._stats&&(this._stats=new Ij),t}_startRenderPage(e,t){var i,s;const r=this._intentStates.get(t);r&&((i=this._stats)==null||i.timeEnd("Page Request"),(s=r.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let r=0,i=e.length;r<i;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&C(this,uu,wm).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:r,modifiedIds:i}){const{map:s,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const d=()=>{l.read().then(({value:h,done:f})=>{if(f){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,c),d())},h=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const f of c.renderTasks)f.operatorListChanged();C(this,uu,wm).call(this)}if(c.displayReadyCapability)c.displayReadyCapability.reject(h);else if(c.opListReadCapability)c.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!r){if(e.renderTasks.size>0)return;if(t instanceof zS){let i=kK;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new oa(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,s]of this._intentStates)if(s===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}To=new WeakMap,uu=new WeakSet,wm=function(){if(!u(this,To)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),A(this,To,!1),!0};var Za,Qi,Po,du,i1,hu,fu,af,Kx,s1,N4,o1,R4,pu,Sm,lf,Xx;const At=class At{constructor({name:e=null,port:t=null,verbosity:r=g7()}={}){S(this,af);S(this,s1);S(this,o1);S(this,pu);S(this,Za,Promise.withResolvers());S(this,Qi,null);S(this,Po,null);S(this,du,null);if(this.name=e,this.destroyed=!1,this.verbosity=r,t){if(u(At,fu).has(t))throw new Error("Cannot use more than one PDFWorker per port.");u(At,fu).set(t,this),C(this,s1,N4).call(this,t)}else C(this,o1,R4).call(this)}get promise(){return u(this,Za).promise}get port(){return u(this,Po)}get messageHandler(){return u(this,Qi)}destroy(){var e,t;this.destroyed=!0,(e=u(this,du))==null||e.terminate(),A(this,du,null),u(At,fu).delete(u(this,Po)),A(this,Po,null),(t=u(this,Qi))==null||t.destroy(),A(this,Qi,null)}static create(e){const t=u(this,fu).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new At(e)}static get workerSrc(){if(Ci.workerSrc)return Ci.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ne(this,"_setupFakeWorkerGlobal",(async()=>u(this,lf,Xx)?u(this,lf,Xx):(await ua(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Za=new WeakMap,Qi=new WeakMap,Po=new WeakMap,du=new WeakMap,i1=new WeakMap,hu=new WeakMap,fu=new WeakMap,af=new WeakSet,Kx=function(){u(this,Za).resolve(),u(this,Qi).send("configure",{verbosity:this.verbosity})},s1=new WeakSet,N4=function(e){A(this,Po,e),A(this,Qi,new pm("main","worker",e)),u(this,Qi).on("ready",()=>{}),C(this,af,Kx).call(this)},o1=new WeakSet,R4=function(){if(u(At,hu)||u(At,lf,Xx)){C(this,pu,Sm).call(this);return}let{workerSrc:e}=At;try{At._isSameOrigin(window.location,e)||(e=At._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),r=new pm("main","worker",t),i=()=>{s.abort(),r.destroy(),t.terminate(),this.destroyed?u(this,Za).reject(new Error("Worker was destroyed")):C(this,pu,Sm).call(this)},s=new AbortController;t.addEventListener("error",()=>{u(this,du)||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}A(this,Qi,r),A(this,Po,t),A(this,du,t),C(this,af,Kx).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{C(this,pu,Sm).call(this)}});const o=()=>{const a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{BS("The worker has been disabled.")}C(this,pu,Sm).call(this)},pu=new WeakSet,Sm=function(){u(At,hu)||(Ae("Setting up fake worker."),A(At,hu,!0)),At._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){u(this,Za).reject(new Error("Worker was destroyed"));return}const t=new O7;A(this,Po,t);const r=`fake${en(At,i1)._++}`,i=new pm(r+"_worker",r,t);e.setup(i,t),A(this,Qi,new pm(r,r+"_worker",t)),C(this,af,Kx).call(this)}).catch(e=>{u(this,Za).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},lf=new WeakSet,Xx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},S(At,lf),S(At,i1,0),S(At,hu,!1),S(At,fu,new WeakMap),nr&&(A(At,hu,!0),Ci.workerSrc||(Ci.workerSrc="./pdf.worker.mjs")),At._isSameOrigin=(e,t)=>{const r=URL.parse(e);if(!(r!=null&&r.origin)||r.origin==="null")return!1;const i=new URL(t,r);return r.origin===i.origin},At._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},At.fromPort=e=>{if(E7("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return At.create(e)};let vp=At;var No,Ls,cf,uf,Ro,mu,Am;class PK{constructor(e,t,r,i,s,o){S(this,mu);S(this,No,new Map);S(this,Ls,new Map);S(this,cf,new Map);S(this,uf,new Map);S(this,Ro,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new E4,this.fontLoader=new j7({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return Ne(this,"annotationStorage",new RP)}getRenderingIntent(e,t=Gs.ENABLE,r=null,i=!1,s=!1){let o=Qr.DISPLAY,a=kk;switch(e){case"any":o=Qr.ANY;break;case"display":break;case"print":o=Qr.PRINT;break;default:Ae(`getRenderingIntent - invalid intent: ${e}`)}const l=o&Qr.PRINT&&r instanceof l4?r:this.annotationStorage;switch(t){case Gs.DISABLE:o+=Qr.ANNOTATIONS_DISABLE;break;case Gs.ENABLE:break;case Gs.ENABLE_FORMS:o+=Qr.ANNOTATIONS_FORMS;break;case Gs.ENABLE_STORAGE:o+=Qr.ANNOTATIONS_STORAGE,a=l.serializable;break;default:Ae(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(o+=Qr.IS_EDITING),s&&(o+=Qr.OPLIST);const{ids:c,hash:d}=l.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(r=u(this,Ro))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of u(this,Ls).values())e.push(i._destroy());u(this,Ls).clear(),u(this,cf).clear(),u(this,uf).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var i,s;this.commonObjs.clear(),this.fontLoader.clear(),u(this,No).clear(),this.filterFactory.destroy(),Ag.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new oa("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(r,i)=>{$e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}$e(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async r=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var c;(c=t.onProgress)==null||c.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}}),e.on("GetRangeReader",(r,i)=>{$e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}$e(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,t._capability.resolve(new CK(r,this))}),e.on("DocException",r=>{t._capability.reject(hr(r))}),e.on("PasswordRequest",r=>{A(this,Ro,Promise.withResolvers());try{if(!t.onPassword)throw hr(r);const i=s=>{s instanceof Error?u(this,Ro).reject(s):u(this,Ro).resolve({password:s})};t.onPassword(i,r.code)}catch(i){u(this,Ro).reject(i)}return u(this,Ro).promise}),e.on("DataLoaded",r=>{var i;(i=t.onProgress)==null||i.call(t,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),e.on("StartRenderPage",r=>{if(this.destroyed)return;u(this,Ls).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),e.on("commonobj",([r,i,s])=>{var o;if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const h=s.error;Ae(`Error during font loading: ${h}`),this.commonObjs.resolve(r,h);break}const a=new Ok(s),l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,c=new M7(a,l,s.extra,s.charProcOperatorList);this.fontLoader.bind(c).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!c.fontExtraProperties&&c.data&&c.clearData(),this.commonObjs.resolve(r,c)});break;case"CopyLocalImage":const{imageRef:d}=s;$e(d,"The imageRef must be defined.");for(const h of u(this,Ls).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(r,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([r,i,s,o])=>{var l;if(this.destroyed)return;const a=u(this,Ls).get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){(l=o==null?void 0:o.bitmap)==null||l.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",r=>{var i;this.destroyed||(i=t.onProgress)==null||i.call(t,{loaded:r.loaded,total:r.total})}),e.on("FetchBinaryData",async r=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r;this.annotationStorage.size<=0&&Ae("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((r=this._fullReader)==null?void 0:r.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=u(this,cf).get(t);if(r)return r;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&u(this,uf).set(s.refStr,e);const o=new TK(t,s,this,this._params.pdfBug);return u(this,Ls).set(t,o),o});return u(this,cf).set(t,i),i}getPageIndex(e){return Ck(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,mu,Am).call(this,"GetFieldObjects")}hasJSActions(){return C(this,mu,Am).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return C(this,mu,Am).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,mu,Am).call(this,"GetOptionalContentConfig").then(t=>new aK(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=u(this,No).get(e);if(t)return t;const r=this.messageHandler.sendWithPromise(e,null).then(i=>{var s,o;return{info:i[0],metadata:i[1]?new sK(i[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return u(this,No).set(e,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of u(this,Ls).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),u(this,No).clear(),this.filterFactory.destroy(!0),Ag.cleanup()}}cachedPageNumber(e){if(!Ck(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return u(this,uf).get(t)??null}}No=new WeakMap,Ls=new WeakMap,cf=new WeakMap,uf=new WeakMap,Ro=new WeakMap,mu=new WeakSet,Am=function(e,t=null){const r=u(this,No).get(e);if(r)return r;const i=this.messageHandler.sendWithPromise(e,t);return u(this,No).set(e,i),i};var el;class NK{constructor(e){S(this,el,null);X(this,"onContinue",null);X(this,"onError",null);A(this,el,e)}get promise(){return u(this,el).capability.promise}cancel(e=0){u(this,el).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=u(this,el).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=u(this,el);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}el=new WeakMap;var tl,gu;const pc=class pc{constructor({callback:e,params:t,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:y=null}){S(this,tl,null);this.callback=e,this.params=t,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new NK(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var l,c;if(this.cancelled)return;if(this._canvas){if(u(pc,gu).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");u(pc,gu).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:r,transform:i,background:s,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new nh(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:r,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(e=null,t=0){var r,i,s;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),u(this,tl)&&(window.cancelAnimationFrame(u(this,tl)),A(this,tl,null)),u(pc,gu).delete(this._canvas),e||(e=new zS(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(s=(i=this.task).onError)==null||s.call(i,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?A(this,tl,window.requestAnimationFrame(()=>{A(this,tl,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),u(pc,gu).delete(this._canvas),this.callback())))}};tl=new WeakMap,gu=new WeakMap,S(pc,gu,new WeakSet);let Vk=pc;const DP="5.4.296",j4="f56dc8601";var Br,yu,df,sn,Wy,hf,jo,Ky,nl,Ji,Xy,Yy,Hk,Qy,qk,Jy,Gk,Mo,ac,a1,M4,Is,xa;const fr=class fr{constructor({editor:e=null,uiManager:t=null}){S(this,Yy);S(this,Qy);S(this,Jy);S(this,Mo);S(this,a1);S(this,Is);S(this,Br,null);S(this,yu,null);S(this,df,void 0);S(this,sn,null);S(this,Wy,!1);S(this,hf,!1);S(this,jo,null);S(this,Ky,void 0);S(this,nl,null);S(this,Ji,null);var r,i;e?(A(this,hf,!1),A(this,jo,e)):A(this,hf,!0),A(this,Ji,(e==null?void 0:e._uiManager)||t),A(this,Ky,u(this,Ji)._eventBus),A(this,df,((r=e==null?void 0:e.color)==null?void 0:r.toUpperCase())||((i=u(this,Ji))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),u(fr,Xy)||A(fr,Xy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ne(this,"_keyboardManager",new wv([[["Escape","mac+Escape"],fr.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],fr.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],fr.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],fr.prototype._moveToPrevious],[["Home","mac+Home"],fr.prototype._moveToBeginning],[["End","mac+End"],fr.prototype._moveToEnd]]))}renderButton(){const e=A(this,Br,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",u(this,jo)&&(e.ariaControls=`${u(this,jo).id}_colorpicker_dropdown`);const t=u(this,Ji)._signal;e.addEventListener("click",C(this,Mo,ac).bind(this),{signal:t}),e.addEventListener("keydown",C(this,Jy,Gk).bind(this),{signal:t});const r=A(this,yu,document.createElement("span"));return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=u(this,df),e.append(r),e}renderMainDropdown(){const e=A(this,sn,C(this,Yy,Hk).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===u(this,Br)){C(this,Mo,ac).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,Qy,qk).call(this,t,e)}_moveToNext(e){var t,r;if(!u(this,Is,xa)){C(this,Mo,ac).call(this,e);return}if(e.target===u(this,Br)){(t=u(this,sn).firstChild)==null||t.focus();return}(r=e.target.nextSibling)==null||r.focus()}_moveToPrevious(e){var t,r;if(e.target===((t=u(this,sn))==null?void 0:t.firstChild)||e.target===u(this,Br)){u(this,Is,xa)&&this._hideDropdownFromKeyboard();return}u(this,Is,xa)||C(this,Mo,ac).call(this,e),(r=e.target.previousSibling)==null||r.focus()}_moveToBeginning(e){var t;if(!u(this,Is,xa)){C(this,Mo,ac).call(this,e);return}(t=u(this,sn).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!u(this,Is,xa)){C(this,Mo,ac).call(this,e);return}(t=u(this,sn).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=u(this,sn))==null||e.classList.add("hidden"),u(this,Br).ariaExpanded="false",(t=u(this,nl))==null||t.abort(),A(this,nl,null)}_hideDropdownFromKeyboard(){var e;if(!u(this,hf)){if(!u(this,Is,xa)){(e=u(this,jo))==null||e.unselect();return}this.hideDropdown(),u(this,Br).focus({preventScroll:!0,focusVisible:u(this,Wy)})}}updateColor(e){if(u(this,yu)&&(u(this,yu).style.backgroundColor=e),!u(this,sn))return;const t=u(this,Ji).highlightColors.values();for(const r of u(this,sn).children)r.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=u(this,Br))==null||e.remove(),A(this,Br,null),A(this,yu,null),(t=u(this,sn))==null||t.remove(),A(this,sn,null)}};Br=new WeakMap,yu=new WeakMap,df=new WeakMap,sn=new WeakMap,Wy=new WeakMap,hf=new WeakMap,jo=new WeakMap,Ky=new WeakMap,nl=new WeakMap,Ji=new WeakMap,Xy=new WeakMap,Yy=new WeakSet,Hk=function(){const e=document.createElement("div"),t=u(this,Ji)._signal;e.addEventListener("contextmenu",si,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),u(this,jo)&&(e.id=`${u(this,jo).id}_colorpicker_dropdown`);for(const[r,i]of u(this,Ji).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",u(fr,Xy)[r]);const o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===u(this,df),s.addEventListener("click",C(this,Qy,qk).bind(this,i),{signal:t}),e.append(s)}return e.addEventListener("keydown",C(this,Jy,Gk).bind(this),{signal:t}),e},Qy=new WeakSet,qk=function(e,t){t.stopPropagation(),u(this,Ky).dispatch("switchannotationeditorparams",{source:this,type:Oe.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},Jy=new WeakSet,Gk=function(e){fr._keyboardManager.exec(this,e)},Mo=new WeakSet,ac=function(e){if(u(this,Is,xa)){this.hideDropdown();return}if(A(this,Wy,e.detail===0),u(this,nl)||(A(this,nl,new AbortController),window.addEventListener("pointerdown",C(this,a1,M4).bind(this),{signal:u(this,Ji).combinedSignal(u(this,nl))})),u(this,Br).ariaExpanded="true",u(this,sn)){u(this,sn).classList.remove("hidden");return}const t=A(this,sn,C(this,Yy,Hk).call(this));u(this,Br).append(t)},a1=new WeakSet,M4=function(e){var t;(t=u(this,sn))!=null&&t.contains(e.target)||this.hideDropdown()},Is=new WeakSet,xa=function(){return u(this,sn)&&!u(this,sn).classList.contains("hidden")},S(fr,Xy,null);let _g=fr;var Ds,Zy,ff,e0;const mc=class mc{constructor(e){S(this,Ds,null);S(this,Zy,null);S(this,ff,null);A(this,Zy,e),A(this,ff,e._uiManager),u(mc,e0)||A(mc,e0,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(u(this,Ds))return u(this,Ds);const{editorType:e,colorType:t,colorValue:r}=u(this,Zy),i=A(this,Ds,document.createElement("input"));return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",u(mc,e0)[e]),i.addEventListener("input",()=>{u(this,ff).updateParams(t,i.value)},{signal:u(this,ff)._signal}),i}update(e){u(this,Ds)&&(u(this,Ds).value=e)}destroy(){var e;(e=u(this,Ds))==null||e.remove(),A(this,Ds,null)}hideDropdown(){}};Ds=new WeakMap,Zy=new WeakMap,ff=new WeakMap,e0=new WeakMap,S(mc,e0,null);let iw=mc;function rM(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Jp(n){return Math.max(0,Math.min(255,255*n))}class iM{static CMYK_G([e,t,r,i]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Jp(e),[e,e,e]}static G_HTML([e]){const t=rM(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_rgb(e){return e.map(Jp)}static RGB_HTML(e){return`#${e.map(rM).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,r,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,r+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,r,i]){return[Jp(1-Math.min(1,e+i)),Jp(1-Math.min(1,r+i)),Jp(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,r]){const i=1-e,s=1-t,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}}class RK{create(e,t,r=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ct("Abstract method `_createSVG` called.")}}class Eg extends RK{_createSVG(e){return document.createElementNS(to,e)}}const jK=9,id=new WeakSet,MK=new Date().getTimezoneOffset()*60*1e3;class sM{static create(e){switch(e.data.annotationType){case Ht.LINK:return new OP(e);case Ht.TEXT:return new IK(e);case Ht.WIDGET:switch(e.data.fieldType){case"Tx":return new DK(e);case"Btn":return e.data.radioButton?new D4(e):e.data.checkBox?new FK(e):new BK(e);case"Ch":return new zK(e);case"Sig":return new OK(e)}return new fd(e);case Ht.POPUP:return new Kk(e);case Ht.FREETEXT:return new $4(e);case Ht.LINE:return new UK(e);case Ht.SQUARE:return new VK(e);case Ht.CIRCLE:return new HK(e);case Ht.POLYLINE:return new U4(e);case Ht.CARET:return new GK(e);case Ht.INK:return new FP(e);case Ht.POLYGON:return new qK(e);case Ht.HIGHLIGHT:return new V4(e);case Ht.UNDERLINE:return new WK(e);case Ht.SQUIGGLY:return new KK(e);case Ht.STRIKEOUT:return new XK(e);case Ht.STAMP:return new H4(e);case Ht.FILEATTACHMENT:return new YK(e);default:return new Lt(e)}}}var vu,pf,bi,t0,Wk;const c2=class c2{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){S(this,t0);S(this,vu,null);S(this,pf,!1);S(this,bi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return c2._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var r;const{data:e}=this,t=(r=this.annotationStorage)==null?void 0:r.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:r,rect:i}=this.data;let s=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let l=0;l<t.length;l+=8)t[l+1]>o?(o=t[l+1],s=t[l+2]):t[l+1]===o&&(s=Math.max(s,t[l+2]));return[s,o]}if((r==null?void 0:r.length)>=1){for(const l of r)for(let c=0,d=l.length;c<d;c+=2)l[c+1]>o?(o=l[c+1],s=l[c]):l[c+1]===o&&(s=Math.max(s,l[c]));if(s!==1/0)return[s,o]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-s)/r,e[1]=100*(e[1]-o)/i,e}get commentText(){var t,r,i;const{data:e}=this;return((r=(t=this.annotationStorage.getRawValue(`${vg}${e.id}`))==null?void 0:t.popup)==null?void 0:r.contents)||((i=e.contentsObj)==null?void 0:i.str)||""}set commentText(e){const{data:t}=this,r={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:r})||this.annotationStorage.setValue(`${vg}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:r,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=u(this,bi))==null?void 0:e.popup)||this.popup)==null||t.remove(),A(this,bi,this.popup=null)}updateEdited(e){var s;if(!this.container)return;e.rect&&(u(this,vu)||A(this,vu,{rect:this.data.rect.slice(0)}));const{rect:t,popup:r}=e;t&&C(this,t0,Wk).call(this,t);let i=((s=u(this,bi))==null?void 0:s.popup)||this.popup;!i&&(r!=null&&r.text)&&(this._createPopup(r),i=u(this,bi).popup),i&&(i.updateEdited(e),r!=null&&r.deleted&&(i.remove(),A(this,bi,null),this.popup=null))}resetEdited(){var e;u(this,vu)&&(C(this,t0,Wk).call(this,u(this,vu).rect),(e=u(this,bi))==null||e.popup.resetEdited(),A(this,vu,null))}_createContainer(e){const{data:t,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),!(this instanceof fd)&&!(this instanceof OP)&&(s.tabIndex=0);const{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Kk){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}const{width:a,height:l}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,b=t.borderStyle.verticalCornerRadius;if(g>0||b>0){const x=`calc(${g}px * var(--total-scale-factor)) / calc(${b}px * var(--total-scale-factor))`;o.borderRadius=x}else if(this instanceof D4){const x=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=x}switch(t.borderStyle.style){case wd.SOLID:o.borderStyle="solid";break;case wd.DASHED:o.borderStyle="dashed";break;case wd.BEVELED:Ae("Unimplemented border style: beveled");break;case wd.INSET:Ae("Unimplemented border style: inset");break;case wd.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(A(this,pf,!0),o.borderColor=re.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const c=re.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:m}=i.rawDims;o.left=`${100*(c[0]-f)/d}%`,o.top=`${100*(c[1]-m)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/d}%`,o.height=`${100*l/h}%`):this.setRotation(y,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims;let{width:s,height:o}=this;e%180!==0&&([s,o]=[o,s]),t.style.width=`${100*s/r}%`,t.style.height=`${100*o/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,r,i)=>{const s=i.detail[t],o=s[0],a=s.slice(1);i.target.style[r]=iM[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:iM[`${o}_rgb`](a)})};return Ne(this,"_commonActions",{display:t=>{const{display:r}=t.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:r}=t.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const r=t.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const i of Object.keys(t.detail)){const s=e[i]||r[i];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[i,s]of Object.entries(t)){const o=r[i];if(o){const a={detail:{[i]:s},target:e};o(a),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,r,i,s]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,b,v,x]=e.subarray(2,6);if(i===g&&s===b&&t===v&&r===x)return}const{style:o}=this.container;let a;if(u(this,pf)){const{borderColor:g,borderWidth:b}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${b}">`],this.container.classList.add("hasBorder")}const l=i-t,c=s-r,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const m=d.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let g=2,b=e.length;g<b;g+=8){const v=e[g],x=e[g+1],w=e[g+2],E=e[g+3],T=d.createElement("rect"),k=(w-t)/l,P=(s-x)/c,R=(v-w)/l,L=(x-E)/c;T.setAttribute("x",k),T.setAttribute("y",P),T.setAttribute("width",R),T.setAttribute("height",L),m.append(T),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${P}" width="${R}" height="${L}"/>`)}u(this,pf)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let r,i;e?(r={str:e.text},i=e.date):(r=t.contentsObj,i=t.modificationDate);const s=A(this,bi,new Kk({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:r,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(s.render())}get hasPopupElement(){return!!(u(this,bi)||this.popup||this.data.popupRef)}get extraPopupElement(){return u(this,bi)}render(){ct("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:s,id:o,exportValues:a}of i){if(s===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!id.has(c)){Ae(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(const i of document.getElementsByName(e)){const{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==t&&id.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var r;(r=this.linkService.eventBus)==null||r.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};vu=new WeakMap,pf=new WeakMap,bi=new WeakMap,t0=new WeakSet,Wk=function(e){const{container:{style:t},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r==null||r.splice(0,4,...e),t.left=`${100*(e[0]-a)/s}%`,t.top=`${100*(o-e[3]+l)/o}%`,i===0?(t.width=`${100*(e[2]-e[0])/s}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(i)};let Lt=c2;class LK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Lo,lc,l1,L4,c1,I4;class OP extends Lt{constructor(t,r=null){super(t,{isRenderable:!0,ignoreBorder:!!(r!=null&&r.ignoreBorder),createQuadrilaterals:!0});S(this,Lo);S(this,l1);S(this,c1);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:r}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let s=!1;return t.url?(r.addLinkAttributes(i,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),s=!0):t.attachment?(C(this,l1,L4).call(this,i,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(C(this,c1,I4).call(this,i,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),s=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}_bindLink(t,r,i=""){t.href=this.linkService.getDestinationHash(r),t.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||r==="")&&C(this,Lo,lc).call(this),i&&(t.title=i)}_bindNamedAction(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(r),!1),i&&(t.title=i),C(this,Lo,lc).call(this)}_bindJSAction(t,r){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(r.actions)){const o=i.get(s);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:s}}),!1})}r.overlaidText&&(t.title=r.overlaidText),t.onclick||(t.onclick=()=>!1),C(this,Lo,lc).call(this)}_bindResetFormAction(t,r){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),C(this,Lo,lc).call(this),!this._fieldObjects){Ae('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{var h;i==null||i();const{fields:s,refs:o,include:a}=r,l=[];if(s.length!==0||o.length!==0){const f=new Set(o);for(const m of s){const y=this._fieldObjects[m]||[];for(const{id:g}of y)f.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===a&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const c=this.annotationStorage,d=[];for(const f of l){const{id:m}=f;switch(d.push(m),f.type){case"text":{const g=f.defaultValue||"";c.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;c.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";c.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!id.has(y)){Ae(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Lo=new WeakSet,lc=function(){this.container.setAttribute("data-internal-link","")},l1=new WeakSet,L4=function(t,r,i="",s=null){t.href=this.linkService.getAnchorUrl(""),r.description?t.title=r.description:i&&(t.title=i),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(r.content,r.filename,s),!1},C(this,Lo,lc).call(this)},c1=new WeakSet,I4=function(t,r,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(r),!1),i&&(t.title=i),C(this,Lo,lc).call(this)};class IK extends Lt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class fd extends Lt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return xn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,r,i,s){r.includes("mouse")?e.addEventListener(r,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(r,o=>{var a;if(r==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(r==="focus"){if(t.focused)return;t.focused=!0}s&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}}))})}_setEventListeners(e,t,r,i){var s,o,a;for(const[l,c]of r)(c==="Action"||(s=this.data.actions)!=null&&s[c])&&((c==="Focus"||c==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,c,i),c==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":re.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||jK,s=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(i_*i))||1,h=c/d;o=Math.min(i,l(h/i_))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/i_))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=re.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class DK extends fd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,i){const s=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),s.setValue(o.id,{[i]:r})}render(){var i,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let c=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;c&&this.data.comb&&(c=c.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:c,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=c??a,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",c??a),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),id.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;h&&(r.title=h),this._setRequired(r,this.data.required),l&&(r.maxLength=l),r.addEventListener("input",b=>{e.setValue(t,{value:b.target.value}),this.setPropertyOnSiblings(r,"value",b.target.value,"value"),d.formattedValue=null}),r.addEventListener("resetform",b=>{const v=this.data.defaultFieldValue??"";r.value=d.userValue=v,d.formattedValue=null});let g=b=>{const{formattedValue:v}=d;v!=null&&(b.target.value=v),b.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",v=>{var w;if(d.focused)return;const{target:x}=v;if(y&&(x.type=f,m&&(x.step=m)),d.userValue){const E=d.userValue;if(y)if(f==="time"){const T=new Date(E),k=[T.getHours(),T.getMinutes(),T.getSeconds()];x.value=k.map(P=>P.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-MK).toISOString().split(f==="date"?"T":".",1)[0];else x.value=E}d.lastCommittedValue=x.value,d.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(d.focused=!0)}),r.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const x={value(w){d.userValue=w.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),w.target.value=d.userValue},formattedValue(w){const{formattedValue:E}=w.detail;d.formattedValue=E,E!=null&&w.target!==document.activeElement&&(w.target.value=E);const T={formattedValue:E};y&&(T.value=E),e.setValue(t,T)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var P;const{charLimit:E}=w.detail,{target:T}=w;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let k=d.userValue;!k||k.length<=E||(k=k.slice(0,E),T.value=d.userValue=k,e.setValue(t,{value:k}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,v)}),r.addEventListener("keydown",v=>{var E;d.commitKey=1;let x=-1;if(v.key==="Escape"?x=0:v.key==="Enter"&&!this.data.multiLine?x=2:v.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:w}=v.target;d.lastCommittedValue!==w&&(d.lastCommittedValue=w,d.userValue=w,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:x,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const b=g;g=null,r.addEventListener("blur",v=>{var E,T;if(!d.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{target:x}=v;let{value:w}=x;if(y){if(w&&f==="time"){const k=w.split(":").map(P=>parseInt(P,10));w=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),x.step=""}else w.includes("T")||(w=`${w}T00:00`),w=new Date(w).valueOf();x.type="text"}d.userValue=w,d.lastCommittedValue!==w&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:w,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),b(v)}),(s=this.data.actions)!=null&&s.Keystroke&&r.addEventListener("beforeinput",v=>{var L;d.lastCommittedValue=null;const{data:x,target:w}=v,{value:E,selectionStart:T,selectionEnd:k}=w;let P=T,R=k;switch(v.inputType){case"deleteWordBackward":{const O=E.substring(0,T).match(/\w*[^\w]*$/);O&&(P-=O[0].length);break}case"deleteWordForward":{const O=E.substring(T).match(/^[^\w]*\w*/);O&&(R+=O[0].length);break}case"deleteContentBackward":T===k&&(P-=1);break;case"deleteContentForward":T===k&&(R+=1);break}v.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:x||"",willCommit:!1,selStart:P,selEnd:R}})}),this._setEventListeners(r,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&r.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;r.classList.add("comb"),r.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class OK extends fd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class FK extends fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return id.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r)){const d=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class D4 extends fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,r=t.id;let i=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(r,{value:i})),i)for(const o of this._getElementsByName(t.fieldName,r))e.setValue(o.id,{value:!1});const s=document.createElement("input");if(id.add(s),s.setAttribute("data-element-id",r),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,r))e.setValue(c.id,{value:!1});e.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;s.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const d=o===c.detail.value;for(const h of this._getElementsByName(c.target.name)){const f=d&&h.id===r;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class BK extends OP{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),e}}class zK extends fd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");id.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of i.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,r.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),i.append(h)}let o=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),i.prepend(d),o=()=>{d.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:m}=i;return m?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=a(!1);const c=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const m=f.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of i.options)g.selected=y.has(g.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(f){i.multiple=!0},remove(f){const m=i.options,y=f.detail.remove;m[y].selected=!1,i.remove(y),m.length>0&&Array.prototype.findIndex.call(m,b=>b.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:c(f)}),l=a(!1)},clear(f){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(f){const{index:m,displayValue:y,exportValue:g}=f.detail.insert,b=i.children[m],v=document.createElement("option");v.textContent=y,v.value=g,b?b.before(v):i.append(v),e.setValue(t,{value:a(!0),items:c(f)}),l=a(!1)},items(f){const{items:m}=f.detail;for(;i.length!==0;)i.remove(0);for(const y of m){const{displayValue:g,exportValue:b}=y,v=document.createElement("option");v.textContent=g,v.value=b,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(f)}),l=a(!1)},indices(f){const m=new Set(f.detail.indices);for(const y of f.target.options)y.selected=m.has(y.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),i.addEventListener("input",d=>{var m;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):i.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}var n0,Xk;class Kk extends Lt{constructor(t){const{data:r,elements:i,parent:s}=t,o=!!s._commentManager;super(t,{isRenderable:!o&&Lt._hasPopupData(r)});S(this,n0);if(this.elements=i,o&&Lt._hasPopupData(r)){const a=this.popup=C(this,n0,Xk).call(this);for(const l of i)l.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const r=this.popup=C(this,n0,Xk).call(this),i=[];for(const s of this.elements)s.popup=r,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${TP}${s}`).join(",")),this.container}}n0=new WeakSet,Xk=function(){return new $K({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var zr,rl,u1,d1,mf,gf,$t,Os,il,xu,yf,vf,Fs,$r,Io,Do,dn,Oo,sl,r0,Fo,xf,bu,ol,zn,al,bf,Yx,i0,Yk,s0,Qk,o0,Jk,wf,Qx,a0,Zk,h1,O4,f1,F4,p1,B4,m1,z4,Sf,Jx,Af,Zx,l0,eC;class $K{constructor({container:e,color:t,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:d,open:h,commentManager:f=null}){S(this,bf);S(this,i0);S(this,s0);S(this,o0);S(this,wf);S(this,a0);S(this,h1);S(this,f1);S(this,p1);S(this,m1);S(this,Sf);S(this,Af);S(this,l0);S(this,zr,null);S(this,rl,C(this,p1,B4).bind(this));S(this,u1,C(this,l0,eC).bind(this));S(this,d1,C(this,Af,Zx).bind(this));S(this,mf,C(this,Sf,Jx).bind(this));S(this,gf,null);S(this,$t,null);S(this,Os,null);S(this,il,null);S(this,xu,null);S(this,yf,null);S(this,vf,null);S(this,Fs,!1);S(this,$r,null);S(this,Io,null);S(this,Do,null);S(this,dn,null);S(this,Oo,null);S(this,sl,null);S(this,r0,null);S(this,Fo,null);S(this,xf,null);S(this,bu,null);S(this,ol,!1);S(this,zn,null);S(this,al,null);A(this,$t,e),A(this,xf,i),A(this,Os,o),A(this,Fo,a),A(this,yf,l),A(this,gf,t),A(this,r0,c),A(this,vf,d),A(this,xu,r),A(this,zr,f),A(this,zn,r[0]),A(this,il,wg.toDateObject(s)),this.trigger=r.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(C(this,bf,Yx).call(this),u(this,$t).hidden=!0,h&&C(this,Sf,Jx).call(this))}renderCommentButton(){if(u(this,dn)||(u(this,Oo)||C(this,i0,Yk).call(this),!u(this,Oo)))return;const{signal:e}=A(this,Io,new AbortController),t=!!u(this,zn).extraPopupElement,r=()=>{u(this,zr).toggleCommentPopup(this,!0,void 0,!t)},i=()=>{u(this,zr).toggleCommentPopup(this,!1,!0,!t)},s=()=>{u(this,zr).toggleCommentPopup(this,!1,!1)};if(t){A(this,dn,u(this,zn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",u(this,rl),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=A(this,dn,document.createElement("button"));o.className="annotationCommentButton";const a=u(this,zn).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,o0,Jk).call(this),C(this,s0,Qk).call(this),o.addEventListener("keydown",u(this,rl),{signal:e}),o.addEventListener("click",r,{signal:e}),o.addEventListener("pointerenter",i,{signal:e}),o.addEventListener("pointerleave",s,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=u(this,zn).commentData;return e?u(this,yf)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=u(this,dn))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:r,creationDate:i,modificationDate:s}=u(this,zn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:r,creationDate:i,modificationDate:s}}get elementBeforePopup(){return u(this,dn)}get comment(){return u(this,al)||A(this,al,u(this,zn).commentText),u(this,al)}set comment(e){e!==this.comment&&(u(this,zn).commentText=A(this,al,e))}get parentBoundingClientRect(){return u(this,zn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){u(this,dn)&&(u(this,dn).classList.toggle("selected",e),u(this,dn).ariaExpanded=t)}setSelectedCommentButton(e){u(this,dn).classList.toggle("selected",e)}get commentPopupPosition(){if(u(this,sl))return u(this,sl);const{x:e,y:t,height:r}=u(this,dn).getBoundingClientRect(),{x:i,y:s,width:o,height:a}=u(this,zn).layer.getBoundingClientRect();return[(e-i)/o,(t+r-s)/a]}set commentPopupPosition(e){A(this,sl,e)}hasDefaultPopupPosition(){return u(this,sl)===null}get commentButtonPosition(){return u(this,Oo)}get commentButtonWidth(){return u(this,dn).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,r]=u(this,sl)||this.commentButtonPosition.map(c=>c/100),i=this.parentBoundingClientRect,{x:s,y:o,width:a,height:l}=i;u(this,zr).showDialog(null,this,s+t*a,o+r*l,{...e,parentDimensions:i})}render(){var r,i;if(u(this,$r))return;const e=A(this,$r,document.createElement("div"));if(e.className="popup",u(this,gf)){const s=e.style.outlineColor=re.makeHexColor(...u(this,gf));e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",(r=u(this,xf))!=null&&r.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=u(this,xf)}if(e.append(t),u(this,il)){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:u(this,il).valueOf()})),s.dateTime=u(this,il).toISOString(),t.append(s)}NP({html:u(this,wf,Qx)||u(this,Os).str,dir:(i=u(this,Os))==null?void 0:i.dir,className:"popupContent"},e),u(this,$t).append(e)}updateEdited({rect:e,popup:t,deleted:r}){var i;if(u(this,zr)){r?(this.remove(),A(this,al,null)):t&&(t.deleted?this.remove():(C(this,o0,Jk).call(this),A(this,al,t.text))),e&&(A(this,Oo,null),C(this,i0,Yk).call(this),C(this,s0,Qk).call(this));return}if(r||t!=null&&t.deleted){this.remove();return}C(this,bf,Yx).call(this),u(this,bu)||A(this,bu,{contentsObj:u(this,Os),richText:u(this,Fo)}),e&&A(this,Do,null),t&&t.text&&(A(this,Fo,C(this,f1,F4).call(this,t.text)),A(this,il,wg.toDateObject(t.date)),A(this,Os,null)),(i=u(this,$r))==null||i.remove(),A(this,$r,null)}resetEdited(){var e;u(this,bu)&&({contentsObj:en(this,Os)._,richText:en(this,Fo)._}=u(this,bu),A(this,bu,null),(e=u(this,$r))==null||e.remove(),A(this,$r,null),A(this,Do,null))}remove(){var e,t,r;if((e=u(this,Io))==null||e.abort(),A(this,Io,null),(t=u(this,$r))==null||t.remove(),A(this,$r,null),A(this,ol,!1),A(this,Fs,!1),(r=u(this,dn))==null||r.remove(),A(this,dn,null),this.trigger)for(const i of this.trigger)i.classList.remove("popupTriggerArea")}forceHide(){A(this,ol,this.isVisible),u(this,ol)&&(u(this,$t).hidden=!0)}maybeShow(){u(this,zr)||(C(this,bf,Yx).call(this),u(this,ol)&&(u(this,$r)||C(this,Af,Zx).call(this),A(this,ol,!1),u(this,$t).hidden=!1))}get isVisible(){return u(this,zr)?!1:u(this,$t).hidden===!1}}zr=new WeakMap,rl=new WeakMap,u1=new WeakMap,d1=new WeakMap,mf=new WeakMap,gf=new WeakMap,$t=new WeakMap,Os=new WeakMap,il=new WeakMap,xu=new WeakMap,yf=new WeakMap,vf=new WeakMap,Fs=new WeakMap,$r=new WeakMap,Io=new WeakMap,Do=new WeakMap,dn=new WeakMap,Oo=new WeakMap,sl=new WeakMap,r0=new WeakMap,Fo=new WeakMap,xf=new WeakMap,bu=new WeakMap,ol=new WeakMap,zn=new WeakMap,al=new WeakMap,bf=new WeakSet,Yx=function(){var t;if(u(this,Io))return;A(this,Io,new AbortController);const{signal:e}=u(this,Io);for(const r of this.trigger)r.addEventListener("click",u(this,mf),{signal:e}),r.addEventListener("pointerenter",u(this,d1),{signal:e}),r.addEventListener("pointerleave",u(this,u1),{signal:e}),r.classList.add("popupTriggerArea");for(const r of u(this,xu))(t=r.container)==null||t.addEventListener("keydown",u(this,rl),{signal:e})},i0=new WeakSet,Yk=function(){const e=u(this,xu).find(t=>t.hasCommentButton);e&&A(this,Oo,e._normalizePoint(e.commentButtonPosition))},s0=new WeakSet,Qk=function(){if(u(this,zn).extraPopupElement&&!u(this,zn).editor)return;this.renderCommentButton();const[e,t]=u(this,Oo),{style:r}=u(this,dn);r.left=`calc(${e}%)`,r.top=`calc(${t}% - var(--comment-button-dim))`},o0=new WeakSet,Jk=function(){u(this,zn).extraPopupElement||(this.renderCommentButton(),u(this,dn).style.backgroundColor=this.commentButtonColor||"")},wf=new WeakSet,Qx=function(){const e=u(this,Fo),t=u(this,Os);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&u(this,Fo).html||null},a0=new WeakSet,Zk=function(){var e,t,r;return((r=(t=(e=u(this,wf,Qx))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.fontSize)||0},h1=new WeakSet,O4=function(){var e,t,r;return((r=(t=(e=u(this,wf,Qx))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:r.color)||null},f1=new WeakSet,F4=function(e){const t=[],r={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:u(this,h1,O4),fontSize:u(this,a0,Zk)?`calc(${u(this,a0,Zk)}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:i});return r},p1=new WeakSet,B4=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&u(this,Fs))&&C(this,Sf,Jx).call(this)},m1=new WeakSet,z4=function(){if(u(this,Do)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:r,pageX:i,pageY:s}}}=u(this,yf);let o=!!u(this,vf),a=o?u(this,vf):u(this,r0);for(const y of u(this,xu))if(!a||re.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const l=re.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),c=5,d=o?a[2]-a[0]+c:0,h=l[0]+d,f=l[1];A(this,Do,[100*(h-i)/t,100*(f-s)/r]);const{style:m}=u(this,$t);m.left=`${u(this,Do)[0]}%`,m.top=`${u(this,Do)[1]}%`},Sf=new WeakSet,Jx=function(){if(u(this,zr)){u(this,zr).toggleCommentPopup(this,!1);return}A(this,Fs,!u(this,Fs)),u(this,Fs)?(C(this,Af,Zx).call(this),u(this,$t).addEventListener("click",u(this,mf)),u(this,$t).addEventListener("keydown",u(this,rl))):(C(this,l0,eC).call(this),u(this,$t).removeEventListener("click",u(this,mf)),u(this,$t).removeEventListener("keydown",u(this,rl)))},Af=new WeakSet,Zx=function(){u(this,$r)||this.render(),this.isVisible?u(this,Fs)&&u(this,$t).classList.add("focused"):(C(this,m1,z4).call(this),u(this,$t).hidden=!1,u(this,$t).style.zIndex=parseInt(u(this,$t).style.zIndex)+1e3)},l0=new WeakSet,eC=function(){u(this,$t).classList.remove("focused"),!(u(this,Fs)||!this.isVisible)&&(u(this,$t).hidden=!0,u(this,$t).style.zIndex=parseInt(u(this,$t).style.zIndex)-1e3)};class $4 extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Se.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const r=document.createElement("span");r.textContent=t,e.append(r)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var c0;class UK extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,c0,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=A(this,c0,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,c0)}addHighlightArea(){this.container.classList.add("highlightArea")}}c0=new WeakMap;var u0;class VK extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,u0,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=A(this,u0,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",r-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,u0)}addHighlightArea(){this.container.classList.add("highlightArea")}}u0=new WeakMap;var d0;class HK extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,d0,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:r,height:i}=this,s=this.svgFactory.create(r,i,!0),o=t.borderStyle.width,a=A(this,d0,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",r/2),a.setAttribute("cy",i/2),a.setAttribute("rx",r/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,d0)}addHighlightArea(){this.container.classList.add("highlightArea")}}d0=new WeakMap;var h0;class U4 extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,h0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:r,borderStyle:i,popupRef:s},width:o,height:a}=this;if(!r)return this.container;const l=this.svgFactory.create(o,a,!0);let c=[];for(let h=0,f=r.length;h<f;h+=2){const m=r[h]-t[0],y=t[3]-r[h+1];c.push(`${m},${y}`)}c=c.join(" ");const d=A(this,h0,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",c),d.setAttribute("stroke-width",i.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return u(this,h0)}addHighlightArea(){this.container.classList.add("highlightArea")}}h0=new WeakMap;class qK extends U4{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class GK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var f0,wu,p0,tC;class FP extends Lt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});S(this,p0);S(this,f0,null);S(this,wu,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Se.HIGHLIGHT:Se.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:r,inkLists:i,borderStyle:s,popupRef:o}}=this,{transform:a,width:l,height:c}=C(this,p0,tC).call(this,r,t),d=this.svgFactory.create(l,c,!0),h=A(this,f0,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,m=i.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);u(this,wu).push(y),y.setAttribute("points",i[f].join(",")),h.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:r,points:i,rect:s}=t,o=u(this,f0);if(r>=0&&o.setAttribute("stroke-width",r||1),i)for(let a=0,l=u(this,wu).length;a<l;a++)u(this,wu)[a].setAttribute("points",i[a].join(","));if(s){const{transform:a,width:l,height:c}=C(this,p0,tC).call(this,this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${l} ${c}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return u(this,wu)}addHighlightArea(){this.container.classList.add("highlightArea")}}f0=new WeakMap,wu=new WeakMap,p0=new WeakSet,tC=function(t,r){switch(t){case 90:return{transform:`rotate(90) translate(${-r[0]},${r[1]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};case 180:return{transform:`rotate(180) translate(${-r[2]},${r[1]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]};case 270:return{transform:`rotate(270) translate(${-r[2]},${r[3]}) scale(1,-1)`,width:r[3]-r[1],height:r[2]-r[0]};default:return{transform:`translate(${-r[0]},${r[3]}) scale(1,-1)`,width:r[2]-r[0],height:r[3]-r[1]}}};class V4 extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Se.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class WK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class KK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class XK extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=e,this.container.append(r)}return this.container}}class H4 extends Lt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Se.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var m0,g0,nC;class YK extends Lt{constructor(t){var i;super(t,{isRenderable:!0});S(this,g0);S(this,m0,null);const{file:r}=this.data;this.filename=r.filename,this.content=r.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...r})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:r}=this;let i;r.hasAppearance||r.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(r.name)?"paperclip":"pushpin"}.svg`,r.fillAlpha&&r.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(r.fillAlpha*100)}%);`)),i.addEventListener("dblclick",C(this,g0,nC).bind(this)),A(this,m0,i);const{isMac:s}=xn.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&C(this,g0,nC).call(this)}),!r.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return u(this,m0)}addHighlightArea(){this.container.classList.add("highlightArea")}}m0=new WeakMap,g0=new WeakSet,nC=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var _f,Su,Ef,ll,y0,Au,v0,rC,x0,iC,b0;let BP=(b0=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a,commentManager:l,linkService:c,annotationStorage:d}){S(this,v0);S(this,x0);S(this,_f,null);S(this,Su,null);S(this,Ef,null);S(this,ll,new Map);S(this,y0,null);S(this,Au,null);this.div=e,A(this,_f,t),A(this,Su,r),A(this,y0,a||null),A(this,Au,c||null),A(this,Ef,d||new RP),this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return u(this,ll).size>0}async render(e){var o,a,l;const{annotations:t}=e,r=this.div;$l(r,this.viewport);const i=new Map,s={data:null,layer:r,linkService:u(this,Au),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Eg,annotationStorage:u(this,Ef),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const d=c.annotationType===Ht.POPUP;if(d){const m=i.get(c.id);if(!m)continue;s.elements=m}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;s.data=c;const h=sM.create(s);if(!h.isRenderable)continue;if(!d&&c.popupRef){const m=i.get(c.popupRef);m?m.push(h):i.set(c.popupRef,[h])}const f=h.render();c.hidden&&(f.style.visibility="hidden"),await C(this,v0,rC).call(this,f,c.id,s.elements),(a=(o=h.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),h._isEditable&&(u(this,ll).set(h.data.id,h),(l=this._annotationEditorUIManager)==null||l.renderAnnotationElement(h))}C(this,x0,iC).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:u(this,Au),svgFactory:new Eg,parent:this};for(const r of e){r.borderStyle||(r.borderStyle=b0._defaultBorderStyle),t.data=r;const i=sM.create(t);if(!i.isRenderable)continue;const s=i.render();await C(this,v0,rC).call(this,s,r.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,$l(t,{rotation:e.rotation}),C(this,x0,iC).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(u(this,ll).values())}getEditableAnnotation(e){return u(this,ll).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:r,rotation:i}=e,s=new LK({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:u(this,Au),annotationStorage:u(this,Ef)}),o=s.render();return t.append(o),(a=u(this,_f))==null||a.moveElementInDOM(t,o,o,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return Ne(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:wd.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},_f=new WeakMap,Su=new WeakMap,Ef=new WeakMap,ll=new WeakMap,y0=new WeakMap,Au=new WeakMap,v0=new WeakSet,rC=async function(e,t,r){var a,l;const i=e.firstChild||e,s=i.id=`${TP}${t}`,o=await((a=u(this,y0))==null?void 0:a.getAriaAttributes(s));if(o)for(const[c,d]of o)i.setAttribute(c,d);r?r.at(-1).container.after(e):(this.div.append(e),(l=u(this,_f))==null||l.moveElementInDOM(this.div,e,i,!1))},x0=new WeakSet,iC=function(){var t;if(!u(this,Su))return;const e=this.div;for(const[r,i]of u(this,Su)){const s=e.querySelector(`[data-annotation-id="${r}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):s.append(i);const a=u(this,ll).get(r);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(r,s.id,i),a._hasNoCanvas=!1):a.canvas=i)}u(this,Su).clear()},b0);const px=/\r\n?|\n/g;var Ur,w0,_u,Vr,g1,q4,y1,G4,v1,W4,kf,eb,Cf,tb,Tf,nb,x1,K4,S0,oC,b1,X4;const dt=class dt extends gt{constructor(t){super({...t,name:"freeTextEditor"});S(this,g1);S(this,y1);S(this,v1);S(this,kf);S(this,Tf);S(this,x1);S(this,b1);S(this,Ur,"");S(this,w0,`${this.id}-editor`);S(this,_u,null);S(this,Vr,void 0);X(this,"_colorPicker",null);this.color=t.color||dt._defaultColor||gt._defaultLineColor,A(this,Vr,t.fontSize||dt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=dt.prototype,r=o=>o.isEmpty(),i=Ul.TRANSLATE_SMALL,s=Ul.TRANSLATE_BIG;return Ne(this,"_keyboardManager",new wv([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:r}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:r}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:r}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:r}]]))}static initialize(t,r){gt.initialize(t,r);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,r){switch(t){case Oe.FREETEXT_SIZE:dt._defaultFontSize=r;break;case Oe.FREETEXT_COLOR:dt._defaultColor=r;break}}updateParams(t,r){switch(t){case Oe.FREETEXT_SIZE:C(this,g1,q4).call(this,r);break;case Oe.FREETEXT_COLOR:C(this,y1,G4).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Oe.FREETEXT_SIZE,dt._defaultFontSize],[Oe.FREETEXT_COLOR,dt._defaultColor||gt._defaultLineColor]]}get propertiesToUpdate(){return[[Oe.FREETEXT_SIZE,u(this,Vr)],[Oe.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new iw(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Oe.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,r){this._uiManager.translateSelectedEditors(t,r,!0)}getInitialTranslation(){const t=this.parentScale;return[-dt._internalPadding*t,-(dt._internalPadding+u(this,Vr))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),A(this,_u,new AbortController);const t=this._uiManager.combinedSignal(u(this,_u));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",u(this,w0)),this._isDraggable=!0,(t=u(this,_u))==null||t.abort(),A(this,_u,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var r;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(r=this._initialOptions)!=null&&r.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=u(this,Ur),r=A(this,Ur,C(this,v1,W4).call(this).trimEnd());if(t===r)return;const i=s=>{if(A(this,Ur,s),!s){this.remove();return}C(this,Tf,nb).call(this),this._uiManager.rebuild(this),C(this,kf,eb).call(this)};this.addCommands({cmd:()=>{i(r)},undo:()=>{i(t)},mustExec:!1}),C(this,kf,eb).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){dt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,r;(this._isCopy||this.annotationElementId)&&(t=this.x,r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",u(this,w0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${u(this,Vr)}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,c]=this.getInitialTranslation();[l,c]=this.pageTranslationToScreen(l,c);const[d,h]=this.pageDimensions,[f,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(a[0]-f)/d,g=r+this.height-(a[1]-m)/h;break;case 90:y=t+(a[0]-f)/d,g=r-(a[1]-m)/h,[l,c]=[c,-l];break;case 180:y=t-this.width+(a[0]-f)/d,g=r-(a[1]-m)/h,[l,c]=[-l,-c];break;case 270:y=t+(a[0]-f-this.height*h)/d,g=r+(a[1]-m-this.width*d)/h,[l,c]=[-c,l];break}this.setAt(y*s,g*o,l,c)}else this._moveAfterPaste(t,r);C(this,Tf,nb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,b;const r=t.clipboardData||window.clipboardData,{types:i}=r;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const s=C(y=dt,S0,oC).call(y,r.getData("text")||"").replaceAll(px,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!s.includes(`
`)){a.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:l,startOffset:c}=a,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const v=l.parentElement;if(h.push(l.nodeValue.slice(c).replaceAll(px,"")),v!==this.editorDiv){let x=d;for(const w of this.editorDiv.childNodes){if(w===v){x=h;continue}x.push(C(g=dt,Cf,tb).call(g,w))}}d.push(l.nodeValue.slice(0,c).replaceAll(px,""))}else if(l===this.editorDiv){let v=d,x=0;for(const w of this.editorDiv.childNodes)x++===c&&(v=h),v.push(C(b=dt,Cf,tb).call(b,w))}A(this,Ur,`${d.join(`
`)}${s}${h.join(`
`)}`),C(this,Tf,nb).call(this);const f=new Range;let m=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const x=v.nodeValue.length;if(m<=x){f.setStart(v,m),f.setEnd(v,m);break}m-=x}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=dt._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,r,i){var a;let s=null;if(t instanceof $4){const{data:{defaultAppearanceData:{fontSize:l,fontColor:c},rect:d,rotation:h,id:f,popupRef:m,richText:y,contentsObj:g,creationDate:b,modificationDate:v},textContent:x,textPosition:w,parent:{page:{pageNumber:E}}}=t;if(!x||x.length===0)return null;s=t={annotationType:Se.FREETEXT,color:Array.from(c),fontSize:l,value:x.join(`
`),position:w,pageIndex:E-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(g==null?void 0:g.str)||null,richText:y,creationDate:b,modificationDate:v}}const o=await super.deserialize(t,r,i);return A(o,Vr,t.fontSize),o.color=re.makeHexColor(...t.color),A(o,Ur,C(a=dt,S0,oC).call(a,t.value)),o._initialData=s,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=gt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:r,fontSize:u(this,Vr),value:C(this,x1,K4).call(this)});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!C(this,b1,X4).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){const r=super.renderAnnotationElement(t);if(!r)return null;const{style:i}=r;i.fontSize=`calc(${u(this,Vr)}px * var(--total-scale-factor))`,i.color=this.color,r.replaceChildren();for(const s of u(this,Ur).split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),r.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:u(this,Ur)}}),r}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ur=new WeakMap,w0=new WeakMap,_u=new WeakMap,Vr=new WeakMap,g1=new WeakSet,q4=function(t){const r=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-u(this,Vr))*this.parentScale),A(this,Vr,s),C(this,kf,eb).call(this)},i=u(this,Vr);this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},y1=new WeakSet,G4=function(t){const r=s=>{this.color=s,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},v1=new WeakSet,W4=function(){var i;const t=[];this.editorDiv.normalize();let r=null;for(const s of this.editorDiv.childNodes)(r==null?void 0:r.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(C(i=dt,Cf,tb).call(i,s)),r=s);return t.join(`
`)},kf=new WeakSet,eb=function(){const[t,r]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,a=o.style.display,l=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/r):(this.width=i.height/t,this.height=i.width/r),this.fixAndSetPosition()},Cf=new WeakSet,tb=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(px,"")},Tf=new WeakSet,nb=function(){if(this.editorDiv.replaceChildren(),!!u(this,Ur))for(const t of u(this,Ur).split(`
`)){const r=document.createElement("div");r.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(r)}},x1=new WeakSet,K4=function(){return u(this,Ur).replaceAll(""," ")},S0=new WeakSet,oC=function(t){return t.replaceAll(" ","")},b1=new WeakSet,X4=function(t){const{value:r,fontSize:i,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==r||t.fontSize!==i||t.color.some((a,l)=>a!==s[l])||t.pageIndex!==o},S(dt,Cf),S(dt,S0),X(dt,"_freeTextDefaultContent",""),X(dt,"_internalPadding",0),X(dt,"_defaultColor",null),X(dt,"_defaultFontSize",10),X(dt,"_type","freetext"),X(dt,"_editorType",Se.FREETEXT);let sC=dt;class ie{toSVGPath(){ct("Abstract method `toSVGPath` must be implemented.")}get box(){ct("Abstract getter `box` must be implemented.")}serialize(e,t){ct("Abstract method `serialize` must be implemented.")}static _rescale(e,t,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*i,o[a+1]=r+e[a+1]*s;return o}static _rescaleAndSwap(e,t,r,i,s,o){o||(o=new Float32Array(e.length));for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*i,o[a+1]=r+e[a]*s;return o}static _translate(e,t,r,i){i||(i=new Float32Array(e.length));for(let s=0,o=e.length;s<o;s+=2)i[s]=t+e[s],i[s+1]=r+e[s+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,r,i,s){switch(s){case 90:return[1-t/r,e/i];case 180:return[1-e/r,1-t/i];case 270:return[t/r,1-e/i];default:return[e/r,t/i]}}static _normalizePagePoint(e,t,r){switch(r){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,r,i,s,o){return[(e+5*r)/6,(t+5*i)/6,(5*r+s)/6,(5*i+o)/6,(r+s)/2,(i+o)/2]}}X(ie,"PRECISION",1e-4);var Hr,Zi,Pf,Nf,Bs,je,Eu,ku,A0,_0,Rf,jf,cl,E0,w1,S1,Cu,_m,A1,Y4,_1,Q4,E1,J4,k1,Z4,C1,eB,T1,tB;const ao=class ao{constructor({x:e,y:t},r,i,s,o,a=0){S(this,Cu);S(this,A1);S(this,_1);S(this,E1);S(this,k1);S(this,C1);S(this,T1);S(this,Hr,void 0);S(this,Zi,[]);S(this,Pf,void 0);S(this,Nf,void 0);S(this,Bs,[]);S(this,je,new Float32Array(18));S(this,Eu,void 0);S(this,ku,void 0);S(this,A0,void 0);S(this,_0,void 0);S(this,Rf,void 0);S(this,jf,void 0);S(this,cl,[]);A(this,Hr,r),A(this,jf,s*i),A(this,Nf,o),u(this,je).set([NaN,NaN,NaN,NaN,e,t],6),A(this,Pf,a),A(this,_0,u(ao,E0)*i),A(this,A0,u(ao,S1)*i),A(this,Rf,i),u(this,cl).push(e,t)}isEmpty(){return isNaN(u(this,je)[8])}add({x:e,y:t}){var L;A(this,Eu,e),A(this,ku,t);const[r,i,s,o]=u(this,Hr);let[a,l,c,d]=u(this,je).subarray(8,12);const h=e-c,f=t-d,m=Math.hypot(h,f);if(m<u(this,A0))return!1;const y=m-u(this,_0),g=y/m,b=g*h,v=g*f;let x=a,w=l;a=c,l=d,c+=b,d+=v,(L=u(this,cl))==null||L.push(e,t);const E=-v/y,T=b/y,k=E*u(this,jf),P=T*u(this,jf);return u(this,je).set(u(this,je).subarray(2,8),0),u(this,je).set([c+k,d+P],4),u(this,je).set(u(this,je).subarray(14,18),12),u(this,je).set([c-k,d-P],16),isNaN(u(this,je)[6])?(u(this,Bs).length===0&&(u(this,je).set([a+k,l+P],2),u(this,Bs).push(NaN,NaN,NaN,NaN,(a+k-r)/s,(l+P-i)/o),u(this,je).set([a-k,l-P],14),u(this,Zi).push(NaN,NaN,NaN,NaN,(a-k-r)/s,(l-P-i)/o)),u(this,je).set([x,w,a,l,c,d],6),!this.isEmpty()):(u(this,je).set([x,w,a,l,c,d],6),Math.abs(Math.atan2(w-l,x-a)-Math.atan2(v,b))<Math.PI/2?([a,l,c,d]=u(this,je).subarray(2,6),u(this,Bs).push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+d)/2-i)/o),[a,l,x,w]=u(this,je).subarray(14,18),u(this,Zi).push(NaN,NaN,NaN,NaN,((x+a)/2-r)/s,((w+l)/2-i)/o),!0):([x,w,a,l,c,d]=u(this,je).subarray(0,6),u(this,Bs).push(((x+5*a)/6-r)/s,((w+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+d)/6-i)/o,((a+c)/2-r)/s,((l+d)/2-i)/o),[c,d,a,l,x,w]=u(this,je).subarray(12,18),u(this,Zi).push(((x+5*a)/6-r)/s,((w+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+d)/6-i)/o,((a+c)/2-r)/s,((l+d)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=u(this,Bs),t=u(this,Zi);if(isNaN(u(this,je)[6])&&!this.isEmpty())return C(this,A1,Y4).call(this);const r=[];r.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);C(this,E1,J4).call(this,r);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return C(this,_1,Q4).call(this,r),r.join(" ")}newFreeDrawOutline(e,t,r,i,s,o){return new nB(e,t,r,i,s,o)}getOutlines(){var h;const e=u(this,Bs),t=u(this,Zi),r=u(this,je),[i,s,o,a]=u(this,Hr),l=new Float32Array((((h=u(this,cl))==null?void 0:h.length)??0)+2);for(let f=0,m=l.length-2;f<m;f+=2)l[f]=(u(this,cl)[f]-i)/o,l[f+1]=(u(this,cl)[f+1]-s)/a;if(l[l.length-2]=(u(this,Eu)-i)/o,l[l.length-1]=(u(this,ku)-s)/a,isNaN(r[6])&&!this.isEmpty())return C(this,k1,Z4).call(this,l);const c=new Float32Array(u(this,Bs).length+24+u(this,Zi).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}d=C(this,T1,tB).call(this,c,d);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=t[f+m],c[d+1]=t[f+m+1],d+=2}return C(this,C1,eB).call(this,c,d),this.newFreeDrawOutline(c,l,u(this,Hr),u(this,Rf),u(this,Pf),u(this,Nf))}};Hr=new WeakMap,Zi=new WeakMap,Pf=new WeakMap,Nf=new WeakMap,Bs=new WeakMap,je=new WeakMap,Eu=new WeakMap,ku=new WeakMap,A0=new WeakMap,_0=new WeakMap,Rf=new WeakMap,jf=new WeakMap,cl=new WeakMap,E0=new WeakMap,w1=new WeakMap,S1=new WeakMap,Cu=new WeakSet,_m=function(){const e=u(this,je).subarray(4,6),t=u(this,je).subarray(16,18),[r,i,s,o]=u(this,Hr);return[(u(this,Eu)+(e[0]-t[0])/2-r)/s,(u(this,ku)+(e[1]-t[1])/2-i)/o,(u(this,Eu)+(t[0]-e[0])/2-r)/s,(u(this,ku)+(t[1]-e[1])/2-i)/o]},A1=new WeakSet,Y4=function(){const[e,t,r,i]=u(this,Hr),[s,o,a,l]=C(this,Cu,_m).call(this);return`M${(u(this,je)[2]-e)/r} ${(u(this,je)[3]-t)/i} L${(u(this,je)[4]-e)/r} ${(u(this,je)[5]-t)/i} L${s} ${o} L${a} ${l} L${(u(this,je)[16]-e)/r} ${(u(this,je)[17]-t)/i} L${(u(this,je)[14]-e)/r} ${(u(this,je)[15]-t)/i} Z`},_1=new WeakSet,Q4=function(e){const t=u(this,Zi);e.push(`L${t[4]} ${t[5]} Z`)},E1=new WeakSet,J4=function(e){const[t,r,i,s]=u(this,Hr),o=u(this,je).subarray(4,6),a=u(this,je).subarray(16,18),[l,c,d,h]=C(this,Cu,_m).call(this);e.push(`L${(o[0]-t)/i} ${(o[1]-r)/s} L${l} ${c} L${d} ${h} L${(a[0]-t)/i} ${(a[1]-r)/s}`)},k1=new WeakSet,Z4=function(e){const t=u(this,je),[r,i,s,o]=u(this,Hr),[a,l,c,d]=C(this,Cu,_m).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-r)/s,(t[3]-i)/o,NaN,NaN,NaN,NaN,(t[4]-r)/s,(t[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-r)/s,(t[17]-i)/o,NaN,NaN,NaN,NaN,(t[14]-r)/s,(t[15]-i)/o],0),this.newFreeDrawOutline(h,e,u(this,Hr),u(this,Rf),u(this,Pf),u(this,Nf))},C1=new WeakSet,eB=function(e,t){const r=u(this,Zi);return e.set([NaN,NaN,NaN,NaN,r[4],r[5]],t),t+=6},T1=new WeakSet,tB=function(e,t){const r=u(this,je).subarray(4,6),i=u(this,je).subarray(16,18),[s,o,a,l]=u(this,Hr),[c,d,h,f]=C(this,Cu,_m).call(this);return e.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],t),t+=24},S(ao,E0,8),S(ao,w1,2),S(ao,S1,u(ao,E0)+u(ao,w1));let sw=ao;var Mf,Tu,Bo,k0,qr,C0,Gt,P1,rB;class nB extends ie{constructor(t,r,i,s,o,a){super();S(this,P1);S(this,Mf,void 0);S(this,Tu,new Float32Array(4));S(this,Bo,void 0);S(this,k0,void 0);S(this,qr,void 0);S(this,C0,void 0);S(this,Gt,void 0);A(this,Gt,t),A(this,qr,r),A(this,Mf,i),A(this,C0,s),A(this,Bo,o),A(this,k0,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,P1,rB).call(this,a);const[l,c,d,h]=u(this,Tu);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-l)/d,t[f+1]=(t[f+1]-c)/h;for(let f=0,m=r.length;f<m;f+=2)r[f]=(r[f]-l)/d,r[f+1]=(r[f+1]-c)/h}toSVGPath(){const t=[`M${u(this,Gt)[4]} ${u(this,Gt)[5]}`];for(let r=6,i=u(this,Gt).length;r<i;r+=6){if(isNaN(u(this,Gt)[r])){t.push(`L${u(this,Gt)[r+4]} ${u(this,Gt)[r+5]}`);continue}t.push(`C${u(this,Gt)[r]} ${u(this,Gt)[r+1]} ${u(this,Gt)[r+2]} ${u(this,Gt)[r+3]} ${u(this,Gt)[r+4]} ${u(this,Gt)[r+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,r,i,s],o){const a=i-t,l=s-r;let c,d;switch(o){case 0:c=ie._rescale(u(this,Gt),t,s,a,-l),d=ie._rescale(u(this,qr),t,s,a,-l);break;case 90:c=ie._rescaleAndSwap(u(this,Gt),t,r,a,l),d=ie._rescaleAndSwap(u(this,qr),t,r,a,l);break;case 180:c=ie._rescale(u(this,Gt),i,r,-a,l),d=ie._rescale(u(this,qr),i,r,-a,l);break;case 270:c=ie._rescaleAndSwap(u(this,Gt),i,s,-a,-l),d=ie._rescaleAndSwap(u(this,qr),i,s,-a,-l);break}return{outline:Array.from(c),points:[Array.from(d)]}}get box(){return u(this,Tu)}newOutliner(t,r,i,s,o,a=0){return new sw(t,r,i,s,o,a)}getNewOutline(t,r){const[i,s,o,a]=u(this,Tu),[l,c,d,h]=u(this,Mf),f=o*d,m=a*h,y=i*d+l,g=s*h+c,b=this.newOutliner({x:u(this,qr)[0]*f+y,y:u(this,qr)[1]*m+g},u(this,Mf),u(this,C0),t,u(this,k0),r??u(this,Bo));for(let v=2;v<u(this,qr).length;v+=2)b.add({x:u(this,qr)[v]*f+y,y:u(this,qr)[v+1]*m+g});return b.getOutlines()}}Mf=new WeakMap,Tu=new WeakMap,Bo=new WeakMap,k0=new WeakMap,qr=new WeakMap,C0=new WeakMap,Gt=new WeakMap,P1=new WeakSet,rB=function(t){const r=u(this,Gt);let i=r[4],s=r[5];const o=[i,s,i,s];let a=i,l=s,c=i,d=s;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,g=r.length;y<g;y+=6){const b=r[y+4],v=r[y+5];isNaN(r[y])?(re.pointBoundingBox(b,v,o),l>v?(a=b,l=v):l===v&&(a=h(a,b)),d<v?(c=b,d=v):d===v&&(c=h(c,b))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,re.bezierBoundingBox(i,s,...r.slice(y,y+6),f),re.rectBoundingBox(f[0],f[1],f[2],f[3],o),l>f[1]?(a=f[0],l=f[1]):l===f[1]&&(a=h(a,f[0])),d<f[3]?(c=f[2],d=f[3]):d===f[3]&&(c=h(c,f[2]))),i=b,s=v}const m=u(this,Tu);m[0]=o[0]-u(this,Bo),m[1]=o[1]-u(this,Bo),m[2]=o[2]-o[0]+2*u(this,Bo),m[3]=o[3]-o[1]+2*u(this,Bo),this.firstPoint=[a,l],this.lastPoint=[c,d]};var T0,P0,N0,ul,es,N1,iB,Lf,rb,R1,sB,j1,oB,R0,lC;class aC{constructor(e,t=0,r=0,i=!0){S(this,N1);S(this,Lf);S(this,R1);S(this,j1);S(this,R0);S(this,T0,void 0);S(this,P0,void 0);S(this,N0,void 0);S(this,ul,[]);S(this,es,[]);const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:b,y:v,width:x,height:w}of e){const E=Math.floor((b-t)/a)*a,T=Math.ceil((b+x+t)/a)*a,k=Math.floor((v-t)/a)*a,P=Math.ceil((v+w+t)/a)*a,R=[E,k,P,!0],L=[T,k,P,!1];u(this,ul).push(R,L),re.rectBoundingBox(E,k,T,P,s)}const l=s[2]-s[0]+2*r,c=s[3]-s[1]+2*r,d=s[0]-r,h=s[1]-r;let f=i?-1/0:1/0,m=1/0;const y=u(this,ul).at(i?-1:-2),g=[y[0],y[2]];for(const b of u(this,ul)){const[v,x,w,E]=b;!E&&i?x<m?(m=x,f=v):x===m&&(f=Math.max(f,v)):E&&!i&&(x<m?(m=x,f=v):x===m&&(f=Math.min(f,v))),b[0]=(v-d)/l,b[1]=(x-h)/c,b[2]=(w-h)/c}A(this,T0,new Float32Array([d,h,l,c])),A(this,P0,[f,m]),A(this,N0,g)}getOutlines(){u(this,ul).sort((t,r)=>t[0]-r[0]||t[1]-r[1]||t[2]-r[2]);const e=[];for(const t of u(this,ul))t[3]?(e.push(...C(this,R0,lC).call(this,t)),C(this,R1,sB).call(this,t)):(C(this,j1,oB).call(this,t),e.push(...C(this,R0,lC).call(this,t)));return C(this,N1,iB).call(this,e)}}T0=new WeakMap,P0=new WeakMap,N0=new WeakMap,ul=new WeakMap,es=new WeakMap,N1=new WeakSet,iB=function(e){const t=[],r=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}const i=[];let s;for(;r.size>0;){const o=r.values().next().value;let[a,l,c,d,h]=o;r.delete(o);let f=a,m=l;for(s=[a,c],i.push(s);;){let y;if(r.has(d))y=d;else if(r.has(h))y=h;else break;r.delete(y),[a,l,c,d,h]=y,f!==a&&(s.push(f,m,a,m===l?l:c),f=a),m=m===l?c:l}s.push(f,m)}return new QK(i,u(this,T0),u(this,P0),u(this,N0))},Lf=new WeakSet,rb=function(e){const t=u(this,es);let r=0,i=t.length-1;for(;r<=i;){const s=r+i>>1,o=t[s][0];if(o===e)return s;o<e?r=s+1:i=s-1}return i+1},R1=new WeakSet,sB=function([,e,t]){const r=C(this,Lf,rb).call(this,e);u(this,es).splice(r,0,[e,t])},j1=new WeakSet,oB=function([,e,t]){const r=C(this,Lf,rb).call(this,e);for(let i=r;i<u(this,es).length;i++){const[s,o]=u(this,es)[i];if(s!==e)break;if(s===e&&o===t){u(this,es).splice(i,1);return}}for(let i=r-1;i>=0;i--){const[s,o]=u(this,es)[i];if(s!==e)break;if(s===e&&o===t){u(this,es).splice(i,1);return}}},R0=new WeakSet,lC=function(e){const[t,r,i]=e,s=[[t,r,i]],o=C(this,Lf,rb).call(this,i);for(let a=0;a<o;a++){const[l,c]=u(this,es)[a];for(let d=0,h=s.length;d<h;d++){const[,f,m]=s[d];if(!(c<=f||m<=l)){if(f>=l){if(m>c)s[d][1]=c;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=l,m>c&&s.push([t,c,m])}}}return s};var j0,If;class QK extends ie{constructor(t,r,i,s){super();S(this,j0,void 0);S(this,If,void 0);A(this,If,t),A(this,j0,r),this.firstPoint=i,this.lastPoint=s}toSVGPath(){const t=[];for(const r of u(this,If)){let[i,s]=r;t.push(`M${i} ${s}`);for(let o=2;o<r.length;o+=2){const a=r[o],l=r[o+1];a===i?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${a}`),i=a)}t.push("Z")}return t.join(" ")}serialize([t,r,i,s],o){const a=[],l=i-t,c=s-r;for(const d of u(this,If)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*l,h[f+1]=s-d[f+1]*c;a.push(h)}return a}get box(){return u(this,j0)}get classNamesForOutlining(){return["highlightOutline"]}}j0=new WeakMap,If=new WeakMap;class cC extends sw{newFreeDrawOutline(e,t,r,i,s,o){return new JK(e,t,r,i,s,o)}}class JK extends nB{newOutliner(e,t,r,i,s,o=0){return new cC(e,t,r,i,s,o)}}var Df,M0,zo,Pu,L0,xr,I0,D0,Nu,Gr,Wr,kn,Of,Ff,$n,Bf,wi,O0,F0,uC,zf,ib,M1,aB,L1,lB,I1,cB,B0,dC,$o,cc,dl,Cd,D1,uB,$f,sb,Uf,ob,O1,dB,F1,hB,B1,fB,z1,pB,$1,mB;const He=class He extends gt{constructor(t){super({...t,name:"highlightEditor"});S(this,F0);S(this,zf);S(this,M1);S(this,L1);S(this,I1);S(this,B0);S(this,$o);S(this,D1);S(this,$f);S(this,Uf);S(this,O1);S(this,F1);S(this,$1);S(this,Df,null);S(this,M0,0);S(this,zo,void 0);S(this,Pu,null);S(this,L0,null);S(this,xr,null);S(this,I0,null);S(this,D0,0);S(this,Nu,null);S(this,Gr,null);S(this,Wr,null);S(this,kn,!1);S(this,Of,null);S(this,Ff,null);S(this,$n,null);S(this,Bf,"");S(this,wi,void 0);S(this,O0,"");this.color=t.color||He._defaultColor,A(this,wi,t.thickness||He._defaultThickness),this.opacity=t.opacity||He._defaultOpacity,A(this,zo,t.boxes||null),A(this,O0,t.methodOfCreation||""),A(this,Bf,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(A(this,kn,!0),C(this,zf,ib).call(this,t),C(this,$o,cc).call(this)):u(this,zo)&&(A(this,Df,t.anchorNode),A(this,M0,t.anchorOffset),A(this,I0,t.focusNode),A(this,D0,t.focusOffset),C(this,F0,uC).call(this),C(this,$o,cc).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=He.prototype;return Ne(this,"_keyboardManager",new wv([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:u(this,kn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:u(this,wi),methodOfCreation:u(this,O0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,r){var i;gt.initialize(t,r),He._defaultColor||(He._defaultColor=((i=r.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(t,r){switch(t){case Oe.HIGHLIGHT_COLOR:He._defaultColor=r;break;case Oe.HIGHLIGHT_THICKNESS:He._defaultThickness=r;break}}translateInPage(t,r){}get toolbarPosition(){return u(this,Ff)}get commentButtonPosition(){return u(this,Of)}updateParams(t,r){switch(t){case Oe.HIGHLIGHT_COLOR:C(this,M1,aB).call(this,r);break;case Oe.HIGHLIGHT_THICKNESS:C(this,L1,lB).call(this,r);break}}static get defaultPropertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,He._defaultColor],[Oe.HIGHLIGHT_THICKNESS,He._defaultThickness]]}get propertiesToUpdate(){return[[Oe.HIGHLIGHT_COLOR,this.color||He._defaultColor],[Oe.HIGHLIGHT_THICKNESS,u(this,wi)||He._defaultThickness],[Oe.HIGHLIGHT_FREE,u(this,kn)]]}onUpdatedColor(){var t,r;(t=this.parent)==null||t.drawLayer.updateProperties(u(this,Wr),{root:{fill:this.color,"fill-opacity":this.opacity}}),(r=u(this,L0))==null||r.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",A(this,L0,new _g({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Uf,ob).call(this))}getBaseTranslation(){return[0,0]}getRect(t,r){return super.getRect(t,r,C(this,Uf,ob).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,B0,dC).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,$o,cc).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?C(this,B0,dC).call(this):t&&(C(this,$o,cc).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),r&&this.select()}rotate(t){var s,o,a;const{drawLayer:r}=this.parent;let i;u(this,kn)?(t=(t-this.rotation+360)%360,i=C(s=He,dl,Cd).call(s,u(this,Gr).box,t)):i=C(o=He,dl,Cd).call(o,[this.x,this.y,this.width,this.height],t),r.updateProperties(u(this,Wr),{bbox:i,root:{"data-main-rotation":t}}),r.updateProperties(u(this,$n),{bbox:C(a=He,dl,Cd).call(a,u(this,xr).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();u(this,Bf)&&(t.setAttribute("aria-label",u(this,Bf)),t.setAttribute("role","mark")),u(this,kn)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,D1,uB).bind(this),{signal:this._uiManager._signal});const r=A(this,Nu,document.createElement("div"));return t.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",r.style.clipPath=u(this,Pu),this.setDims(this.width,this.height),D3(this,u(this,Nu),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,$n),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(u(this,$n),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,$f,sb).call(this,!0);break;case 1:case 3:C(this,$f,sb).call(this,!1);break}}select(){var t;super.select(),u(this,$n)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,$n),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),u(this,$n)&&((t=this.parent)==null||t.drawLayer.updateProperties(u(this,$n),{rootClass:{selected:!1}}),u(this,kn)||C(this,$f,sb).call(this,!1))}get _mustFixPosition(){return!u(this,kn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(u(this,Wr),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(u(this,$n),{rootClass:{hidden:!t}}))}static startHighlighting(t,r,{target:i,x:s,y:o}){const{x:a,y:l,width:c,height:d}=i.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),m=y=>{h.abort(),C(this,z1,pB).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",Rt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",si,{signal:f}),i.addEventListener("pointermove",C(this,B1,fB).bind(this,t),{signal:f}),this._freeHighlight=new cC({x:s,y:o},[a,l,c,d],t.scale,this._defaultThickness/2,r,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,r,i){var g,b,v,x;let s=null;if(t instanceof V4){const{data:{quadPoints:w,rect:E,rotation:T,id:k,color:P,opacity:R,popupRef:L,richText:O,contentsObj:F,creationDate:I,modificationDate:U},parent:{page:{pageNumber:B}}}=t;s=t={annotationType:Se.HIGHLIGHT,color:Array.from(P),opacity:R,quadPoints:w,boxes:null,pageIndex:B-1,rect:E.slice(0),rotation:T,annotationElementId:k,id:k,deleted:!1,popupRef:L,richText:O,comment:(F==null?void 0:F.str)||null,creationDate:I,modificationDate:U}}else if(t instanceof FP){const{data:{inkLists:w,rect:E,rotation:T,id:k,color:P,borderStyle:{rawWidth:R},popupRef:L,richText:O,contentsObj:F,creationDate:I,modificationDate:U},parent:{page:{pageNumber:B}}}=t;s=t={annotationType:Se.HIGHLIGHT,color:Array.from(P),thickness:R,inkLists:w,boxes:null,pageIndex:B-1,rect:E.slice(0),rotation:T,annotationElementId:k,id:k,deleted:!1,popupRef:L,richText:O,comment:(F==null?void 0:F.str)||null,creationDate:I,modificationDate:U}}const{color:o,quadPoints:a,inkLists:l,opacity:c}=t,d=await super.deserialize(t,r,i);d.color=re.makeHexColor(...o),d.opacity=c||1,l&&A(d,wi,t.thickness),d._initialData=s,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[m,y]=d.pageTranslation;if(a){const w=A(d,zo,[]);for(let E=0;E<a.length;E+=8)w.push({x:(a[E]-m)/h,y:1-(a[E+1]-y)/f,width:(a[E+2]-a[E])/h,height:(a[E+1]-a[E+5])/f});C(g=d,F0,uC).call(g),C(b=d,$o,cc).call(b),d.rotate(d.rotation)}else if(l){A(d,kn,!0);const w=l[0],E={x:w[0]-m,y:f-(w[1]-y)},T=new cC(E,[0,0,h,f],1,u(d,wi)/2,!0,.001);for(let R=0,L=w.length;R<L;R+=2)E.x=w[R]-m,E.y=f-(w[R+1]-y),T.add(E);const{id:k,clipPathId:P}=r.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);C(v=d,zf,ib).call(v,{highlightOutlines:T.getOutlines(),highlightId:k,clipPathId:P}),C(x=d,$o,cc).call(x),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const r=gt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:r,opacity:this.opacity,thickness:u(this,wi),quadPoints:C(this,O1,dB).call(this),outlines:C(this,F1,hB).call(this,i.rect)}),this.addComment(i),this.annotationElementId&&!C(this,$1,mB).call(this,i)?null:(i.id=this.annotationElementId,i)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Df=new WeakMap,M0=new WeakMap,zo=new WeakMap,Pu=new WeakMap,L0=new WeakMap,xr=new WeakMap,I0=new WeakMap,D0=new WeakMap,Nu=new WeakMap,Gr=new WeakMap,Wr=new WeakMap,kn=new WeakMap,Of=new WeakMap,Ff=new WeakMap,$n=new WeakMap,Bf=new WeakMap,wi=new WeakMap,O0=new WeakMap,F0=new WeakSet,uC=function(){const t=new aC(u(this,zo),.001);A(this,Gr,t.getOutlines()),[this.x,this.y,this.width,this.height]=u(this,Gr).box;const r=new aC(u(this,zo),.0025,.001,this._uiManager.direction==="ltr");A(this,xr,r.getOutlines());const{firstPoint:i}=u(this,Gr);A(this,Of,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]);const{lastPoint:s}=u(this,xr);A(this,Ff,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},zf=new WeakSet,ib=function({highlightOutlines:t,highlightId:r,clipPathId:i}){var f,m;A(this,Gr,t);const s=1.5;if(A(this,xr,t.getNewOutline(u(this,wi)/2+s,.0025)),r>=0)A(this,Wr,r),A(this,Pu,i),this.parent.drawLayer.finalizeDraw(r,{bbox:t.box,path:{d:t.toSVGPath()}}),A(this,$n,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:u(this,xr).box,path:{d:u(this,xr).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(u(this,Wr),{bbox:C(f=He,dl,Cd).call(f,u(this,Gr).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(u(this,$n),{bbox:C(m=He,dl,Cd).call(m,u(this,xr).box,y),path:{d:u(this,xr).toSVGPath()}})}const[o,a,l,c]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=l,this.height=c;break;case 90:{const[y,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=l*g/y,this.height=c*y/g;break}case 180:this.x=1-o,this.y=1-a,this.width=l,this.height=c;break;case 270:{const[y,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=l*g/y,this.height=c*y/g;break}}const{firstPoint:d}=t;A(this,Of,[(d[0]-o)/l,(d[1]-a)/c]);const{lastPoint:h}=u(this,xr);A(this,Ff,[(h[0]-o)/l,(h[1]-a)/c])},M1=new WeakSet,aB=function(t){const r=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},i=this.color,s=this.opacity;this.addCommands({cmd:r.bind(this,t,He._defaultOpacity),undo:r.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},L1=new WeakSet,lB=function(t){const r=u(this,wi),i=s=>{A(this,wi,s),C(this,I1,cB).call(this,s)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Oe.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},I1=new WeakSet,cB=function(t){u(this,kn)&&(C(this,zf,ib).call(this,{highlightOutlines:u(this,Gr).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},B0=new WeakSet,dC=function(){u(this,Wr)===null||!this.parent||(this.parent.drawLayer.remove(u(this,Wr)),A(this,Wr,null),this.parent.drawLayer.remove(u(this,$n)),A(this,$n,null))},$o=new WeakSet,cc=function(t=this.parent){u(this,Wr)===null&&({id:en(this,Wr)._,clipPathId:en(this,Pu)._}=t.drawLayer.draw({bbox:u(this,Gr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:u(this,kn)},path:{d:u(this,Gr).toSVGPath()}},!1,!0),A(this,$n,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:u(this,kn)},bbox:u(this,xr).box,path:{d:u(this,xr).toSVGPath()}},u(this,kn))),u(this,Nu)&&(u(this,Nu).style.clipPath=u(this,Pu)))},dl=new WeakSet,Cd=function([t,r,i,s],o){switch(o){case 90:return[1-r-s,t,s,i];case 180:return[1-t-i,1-r-s,i,s];case 270:return[r,1-t-i,s,i]}return[t,r,i,s]},D1=new WeakSet,uB=function(t){He._keyboardManager.exec(this,t)},$f=new WeakSet,sb=function(t){if(!u(this,Df))return;const r=window.getSelection();t?r.setPosition(u(this,Df),u(this,M0)):r.setPosition(u(this,I0),u(this,D0))},Uf=new WeakSet,ob=function(){return u(this,kn)?this.rotation:0},O1=new WeakSet,dB=function(){if(u(this,kn))return null;const[t,r]=this.pageDimensions,[i,s]=this.pageTranslation,o=u(this,zo),a=new Float32Array(o.length*8);let l=0;for(const{x:c,y:d,width:h,height:f}of o){const m=c*t+i,y=(1-d)*r+s;a[l]=a[l+4]=m,a[l+1]=a[l+3]=y,a[l+2]=a[l+6]=m+h*t,a[l+5]=a[l+7]=y-f*r,l+=8}return a},F1=new WeakSet,hB=function(t){return u(this,Gr).serialize(t,C(this,Uf,ob).call(this))},B1=new WeakSet,fB=function(t,r){this._freeHighlight.add(r)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},z1=new WeakSet,pB=function(t,r){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(r,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},$1=new WeakSet,mB=function(t){const{color:r}=this._initialData;return this.hasEditedComment||t.color.some((i,s)=>i!==r[s])},S(He,dl),S(He,B1),S(He,z1),X(He,"_defaultColor",null),X(He,"_defaultOpacity",1),X(He,"_defaultThickness",12),X(He,"_type","highlight"),X(He,"_editorType",Se.HIGHLIGHT),X(He,"_freeHighlightId",-1),X(He,"_freeHighlight",null),X(He,"_freeHighlightClipId","");let ow=He;var Ru;class gB{constructor(){S(this,Ru,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,r]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,r)}updateSVGProperty(e,t){u(this,Ru)[e]=t}toSVGProperties(){const e=u(this,Ru);return A(this,Ru,Object.create(null)),{root:e}}reset(){A(this,Ru,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){ct("Not implemented")}}Ru=new WeakMap;var Kr,Vf,hn,ju,Mu,hl,fl,pl,Lu,z0,hC,$0,fC,U0,pC,Iu,Em,U1,yB,Hf,ab,Du,km,ml,Td;const le=class le extends gt{constructor(t){super(t);S(this,z0);S(this,$0);S(this,U0);S(this,Iu);S(this,U1);S(this,Hf);S(this,Du);S(this,ml);S(this,Kr,null);S(this,Vf,void 0);X(this,"_colorPicker",null);X(this,"_drawId",null);A(this,Vf,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(C(this,z0,hC).call(this,t),C(this,Iu,Em).call(this))}static _mergeSVGProperties(t,r){const i=new Set(Object.keys(t));for(const[s,o]of Object.entries(r))i.has(s)?Object.assign(t[s],o):t[s]=o;return t}static getDefaultDrawingOptions(t){ct("Not implemented")}static get typesMap(){ct("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,r){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(u(le,hn).updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,r){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,r)}static get defaultPropertiesToUpdate(){const t=[],r=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)t.push([i,r[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:r}=this;for(const[i,s]of this.constructor.typesMap)t.push([i,r[s]]);return t}_updateProperty(t,r,i){const s=this._drawingOptions,o=s[r],a=l=>{var d;s.updateProperty(r,l);const c=u(this,Kr).updateProperty(r,l);c&&C(this,Du,km).call(this,c),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,le._mergeSVGProperties(u(this,Kr).getPathResizingSVGProperties(C(this,Hf,ab).call(this)),{bbox:C(this,ml,Td).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,le._mergeSVGProperties(u(this,Kr).getPathResizedSVGProperties(C(this,Hf,ab).call(this)),{bbox:C(this,ml,Td).call(this)}))}_onTranslating(t,r){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:C(this,ml,Td).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,le._mergeSVGProperties(u(this,Kr).getPathTranslatedSVGProperties(C(this,Hf,ab).call(this),this.parentDimensions),{bbox:C(this,ml,Td).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,u(this,Vf)&&(A(this,Vf,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,U0,pC).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Iu,Em).call(this),C(this,Du,km).call(this,u(this,Kr).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var i;let r=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,U0,pC).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,Iu,Em).call(this,t),r=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(t),r&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,le._mergeSVGProperties({bbox:C(this,ml,Td).call(this)},u(this,Kr).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Du,km).call(this,u(this,Kr).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,r;this._isCopy&&(t=this.x,r=this.y);const i=super.render();i.classList.add("draw");const s=document.createElement("div");return i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,r),i}static createDrawerInstance(t,r,i,s,o){ct("Not implemented")}static startDrawing(t,r,i,s){var b;const{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:d}=s;if(u(le,fl)&&u(le,fl)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:m}=o.getBoundingClientRect(),y=A(le,ju,new AbortController),g=t.combinedSignal(y);if(u(le,hl)||A(le,hl,c),u(le,fl)??A(le,fl,d),window.addEventListener("pointerup",v=>{var x;u(le,hl)===v.pointerId?this._endDraw(v):(x=u(le,pl))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var x;u(le,hl)===v.pointerId?this._currentParent.endDrawingSession():(x=u(le,pl))==null||x.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{u(le,fl)===v.pointerType&&((u(le,pl)||A(le,pl,new Set)).add(v.pointerId),u(le,hn).isCancellable()&&(u(le,hn).removeLastElement(),u(le,hn).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",si,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===u(le,Lu)&&Rt(v)},{signal:g}),t.toggleDrawing(),(b=r._editorUndoBar)==null||b.hide(),u(le,hn)){t.drawLayer.updateProperties(this._currentDrawId,u(le,hn).startNew(a,l,f,m,h));return}r.updateUIForDefaultProperties(this),A(le,hn,this.createDrawerInstance(a,l,f,m,h)),A(le,Mu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(u(le,Mu).toSVGProperties(),u(le,hn).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(A(le,Lu,-1),!u(le,hn))return;const{offsetX:r,offsetY:i,pointerId:s}=t;if(u(le,hl)===s){if(((o=u(le,pl))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,u(le,hn).add(r,i)),A(le,Lu,t.timeStamp),Rt(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,A(le,hn,null),A(le,Mu,null),A(le,fl,null),A(le,Lu,NaN)),u(le,ju)&&(u(le,ju).abort(),A(le,ju,null),A(le,hl,NaN),A(le,pl,null))}static _endDraw(t){const r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===r.div&&r.drawLayer.updateProperties(this._currentDrawId,u(le,hn).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=u(le,hn),s=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Oe.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Oe.DRAW_STEP),!u(le,hn).isEmpty()){const{pageDimensions:[i,s],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:u(le,hn).getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:u(le,Mu),mustBeCommitted:!t});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,r,i,s,o,a){ct("Not implemented")}static async deserialize(t,r,i){var h,f;const{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}=r.viewport,c=this.deserializeDraw(a,l,s,o,this._INNER_MARGIN,t),d=await super.deserialize(t,r,i);return d.createDrawingOptions(t),C(h=d,z0,hC).call(h,{drawOutlines:c}),C(f=d,Iu,Em).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[r,i]=this.pageTranslation,[s,o]=this.pageDimensions;return u(this,Kr).serialize([r,i,s,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Kr=new WeakMap,Vf=new WeakMap,hn=new WeakMap,ju=new WeakMap,Mu=new WeakMap,hl=new WeakMap,fl=new WeakMap,pl=new WeakMap,Lu=new WeakMap,z0=new WeakSet,hC=function({drawOutlines:t,drawId:r,drawingOptions:i}){A(this,Kr,t),this._drawingOptions||(this._drawingOptions=i),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,t.defaultProperties)):this._drawId=C(this,$0,fC).call(this,t,this.parent),C(this,Du,km).call(this,t.box)},$0=new WeakSet,fC=function(t,r){const{id:i}=r.drawLayer.draw(le._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i},U0=new WeakSet,pC=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Iu=new WeakSet,Em=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,$0,fC).call(this,u(this,Kr),t)}},U1=new WeakSet,yB=function([t,r,i,s]){const{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[r,1-t,i*(a/o),s*(o/a)];case 180:return[1-t,1-r,i,s];case 270:return[1-r,t,i*(a/o),s*(o/a)];default:return[t,r,i,s]}},Hf=new WeakSet,ab=function(){const{x:t,y:r,width:i,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-r,t,i*(o/a),s*(a/o)];case 180:return[1-t,1-r,i,s];case 270:return[r,1-t,i*(o/a),s*(a/o)];default:return[t,r,i,s]}},Du=new WeakSet,km=function(t){[this.x,this.y,this.width,this.height]=C(this,U1,yB).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},ml=new WeakSet,Td=function(){const{x:t,y:r,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-r-s,t,s,i];case 2:return[1-t-i,1-r-s,i,s];case 3:return[r,1-t-i,s,i];case 4:return[t,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,t,i*(l/c),s*(c/l)];case 6:return[1-t-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-t-s*(c/l),i*(l/c),s*(c/l)];case 8:return[t-i,r-s,i,s];case 9:return[1-r,t-i,s,i];case 10:return[1-t,1-r,i,s];case 11:return[r-s,1-t,s,i];case 12:return[t-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),t-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-t,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-t,i*(l/c),s*(c/l)];default:return[t,r,i,s]}},X(le,"_currentDrawId",-1),X(le,"_currentParent",null),S(le,hn,null),S(le,ju,null),S(le,Mu,null),S(le,hl,NaN),S(le,fl,null),S(le,pl,null),S(le,Lu,NaN),X(le,"_INNER_MARGIN",3);let aw=le;var zs,fn,pn,Ou,qf,Jn,Cn,Si,Fu,Bu,zu,Gf,lb;class ZK{constructor(e,t,r,i,s,o){S(this,Gf);S(this,zs,new Float64Array(6));S(this,fn,void 0);S(this,pn,void 0);S(this,Ou,void 0);S(this,qf,void 0);S(this,Jn,void 0);S(this,Cn,"");S(this,Si,0);S(this,Fu,new Av);S(this,Bu,void 0);S(this,zu,void 0);A(this,Bu,r),A(this,zu,i),A(this,Ou,s),A(this,qf,o),[e,t]=C(this,Gf,lb).call(this,e,t);const a=A(this,fn,[NaN,NaN,NaN,NaN,e,t]);A(this,Jn,[e,t]),A(this,pn,[{line:a,points:u(this,Jn)}]),u(this,zs).set(a,0)}updateProperty(e,t){e==="stroke-width"&&A(this,qf,t)}isEmpty(){return!u(this,pn)||u(this,pn).length===0}isCancellable(){return u(this,Jn).length<=10}add(e,t){[e,t]=C(this,Gf,lb).call(this,e,t);const[r,i,s,o]=u(this,zs).subarray(2,6),a=e-s,l=t-o;return Math.hypot(u(this,Bu)*a,u(this,zu)*l)<=2?null:(u(this,Jn).push(e,t),isNaN(r)?(u(this,zs).set([s,o,e,t],2),u(this,fn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(u(this,zs)[0])&&u(this,fn).splice(6,6),u(this,zs).set([r,i,s,o,e,t],0),u(this,fn).push(...ie.createBezierPoints(r,i,s,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const r=this.add(e,t);return r||(u(this,Jn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,r,i,s){A(this,Bu,r),A(this,zu,i),A(this,Ou,s),[e,t]=C(this,Gf,lb).call(this,e,t);const o=A(this,fn,[NaN,NaN,NaN,NaN,e,t]);A(this,Jn,[e,t]);const a=u(this,pn).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),u(this,pn).push({line:o,points:u(this,Jn)}),u(this,zs).set(o,0),A(this,Si,0),this.toSVGPath(),null}getLastElement(){return u(this,pn).at(-1)}setLastElement(e){return u(this,pn)?(u(this,pn).push(e),A(this,fn,e.line),A(this,Jn,e.points),A(this,Si,0),{path:{d:this.toSVGPath()}}):u(this,Fu).setLastElement(e)}removeLastElement(){if(!u(this,pn))return u(this,Fu).removeLastElement();u(this,pn).pop(),A(this,Cn,"");for(let e=0,t=u(this,pn).length;e<t;e++){const{line:r,points:i}=u(this,pn)[e];A(this,fn,r),A(this,Jn,i),A(this,Si,0),this.toSVGPath()}return{path:{d:u(this,Cn)}}}toSVGPath(){const e=ie.svgRound(u(this,fn)[4]),t=ie.svgRound(u(this,fn)[5]);if(u(this,Jn).length===2)return A(this,Cn,`${u(this,Cn)} M ${e} ${t} Z`),u(this,Cn);if(u(this,Jn).length<=6){const i=u(this,Cn).lastIndexOf("M");A(this,Cn,`${u(this,Cn).slice(0,i)} M ${e} ${t}`),A(this,Si,6)}if(u(this,Jn).length===4){const i=ie.svgRound(u(this,fn)[10]),s=ie.svgRound(u(this,fn)[11]);return A(this,Cn,`${u(this,Cn)} L ${i} ${s}`),A(this,Si,12),u(this,Cn)}const r=[];u(this,Si)===0&&(r.push(`M ${e} ${t}`),A(this,Si,6));for(let i=u(this,Si),s=u(this,fn).length;i<s;i+=6){const[o,a,l,c,d,h]=u(this,fn).slice(i,i+6).map(ie.svgRound);r.push(`C${o} ${a} ${l} ${c} ${d} ${h}`)}return A(this,Cn,u(this,Cn)+r.join(" ")),A(this,Si,u(this,fn).length),u(this,Cn)}getOutlines(e,t,r,i){const s=u(this,pn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),u(this,Fu).build(u(this,pn),e,t,r,u(this,Ou),u(this,qf),i),A(this,zs,null),A(this,fn,null),A(this,pn,null),A(this,Cn,null),u(this,Fu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}zs=new WeakMap,fn=new WeakMap,pn=new WeakMap,Ou=new WeakMap,qf=new WeakMap,Jn=new WeakMap,Cn=new WeakMap,Si=new WeakMap,Fu=new WeakMap,Bu=new WeakMap,zu=new WeakMap,Gf=new WeakSet,lb=function(e,t){return ie._normalizePoint(e,t,u(this,Bu),u(this,zu),u(this,Ou))};var Zn,V0,H0,Xr,$s,Us,Wf,Kf,$u,ts,ro,V1,vB,H1,xB,q1,bB;class Av extends ie{constructor(){super(...arguments);S(this,ts);S(this,V1);S(this,H1);S(this,q1);S(this,Zn,void 0);S(this,V0,0);S(this,H0,void 0);S(this,Xr,void 0);S(this,$s,void 0);S(this,Us,void 0);S(this,Wf,void 0);S(this,Kf,void 0);S(this,$u,void 0)}build(t,r,i,s,o,a,l){A(this,$s,r),A(this,Us,i),A(this,Wf,s),A(this,Kf,o),A(this,$u,a),A(this,H0,l??0),A(this,Xr,t),C(this,H1,xB).call(this)}get thickness(){return u(this,$u)}setLastElement(t){return u(this,Xr).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return u(this,Xr).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:r}of u(this,Xr)){if(t.push(`M${ie.svgRound(r[4])} ${ie.svgRound(r[5])}`),r.length===6){t.push("Z");continue}if(r.length===12&&isNaN(r[6])){t.push(`L${ie.svgRound(r[10])} ${ie.svgRound(r[11])}`);continue}for(let i=6,s=r.length;i<s;i+=6){const[o,a,l,c,d,h]=r.subarray(i,i+6).map(ie.svgRound);t.push(`C${o} ${a} ${l} ${c} ${d} ${h}`)}}return t.join("")}serialize([t,r,i,s],o){const a=[],l=[],[c,d,h,f]=C(this,V1,vB).call(this);let m,y,g,b,v,x,w,E,T;switch(u(this,Kf)){case 0:T=ie._rescale,m=t,y=r+s,g=i,b=-s,v=t+c*i,x=r+(1-d-f)*s,w=t+(c+h)*i,E=r+(1-d)*s;break;case 90:T=ie._rescaleAndSwap,m=t,y=r,g=i,b=s,v=t+d*i,x=r+c*s,w=t+(d+f)*i,E=r+(c+h)*s;break;case 180:T=ie._rescale,m=t+i,y=r,g=-i,b=s,v=t+(1-c-h)*i,x=r+d*s,w=t+(1-c)*i,E=r+(d+f)*s;break;case 270:T=ie._rescaleAndSwap,m=t+i,y=r+s,g=-i,b=-s,v=t+(1-d-f)*i,x=r+(1-c-h)*s,w=t+(1-d)*i,E=r+(1-c)*s;break}for(const{line:k,points:P}of u(this,Xr))a.push(T(k,m,y,g,b,o?new Array(k.length):null)),l.push(T(P,m,y,g,b,o?new Array(P.length):null));return{lines:a,points:l,rect:[v,x,w,E]}}static deserialize(t,r,i,s,o,{paths:{lines:a,points:l},rotation:c,thickness:d}){const h=[];let f,m,y,g,b;switch(c){case 0:b=ie._rescale,f=-t/i,m=r/s+1,y=1/i,g=-1/s;break;case 90:b=ie._rescaleAndSwap,f=-r/s,m=-t/i,y=1/s,g=1/i;break;case 180:b=ie._rescale,f=t/i+1,m=-r/s,y=-1/i,g=1/s;break;case 270:b=ie._rescaleAndSwap,f=r/s+1,m=t/i+1,y=-1/s,g=-1/i;break}if(!a){a=[];for(const x of l){const w=x.length;if(w===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(w===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const E=new Float32Array(3*(w-2));a.push(E);let[T,k,P,R]=x.subarray(0,4);E.set([NaN,NaN,NaN,NaN,T,k],0);for(let L=4;L<w;L+=2){const O=x[L],F=x[L+1];E.set(ie.createBezierPoints(T,k,P,R,O,F),(L-2)*3),[T,k,P,R]=[P,R,O,F]}}}for(let x=0,w=a.length;x<w;x++)h.push({line:b(a[x].map(E=>E??NaN),f,m,y,g),points:b(l[x].map(E=>E??NaN),f,m,y,g)});const v=new this.prototype.constructor;return v.build(h,i,s,1,c,d,o),v}get box(){return u(this,Zn)}updateProperty(t,r){return t==="stroke-width"?C(this,q1,bB).call(this,r):null}updateParentDimensions([t,r],i){const[s,o]=C(this,ts,ro).call(this);A(this,$s,t),A(this,Us,r),A(this,Wf,i);const[a,l]=C(this,ts,ro).call(this),c=a-s,d=l-o,h=u(this,Zn);return h[0]-=c,h[1]-=d,h[2]+=2*c,h[3]+=2*d,h}updateRotation(t){return A(this,V0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return u(this,Zn).map(ie.svgRound).join(" ")}get defaultProperties(){const[t,r]=u(this,Zn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(r)}`}}}get rotationTransform(){const[,,t,r]=u(this,Zn);let i=0,s=0,o=0,a=0,l=0,c=0;switch(u(this,V0)){case 90:s=r/t,o=-t/r,l=t;break;case 180:i=-1,a=-1,l=t,c=r;break;case 270:s=-r/t,o=t/r,c=r;break;default:return""}return`matrix(${i} ${s} ${o} ${a} ${ie.svgRound(l)} ${ie.svgRound(c)})`}getPathResizingSVGProperties([t,r,i,s]){const[o,a]=C(this,ts,ro).call(this),[l,c,d,h]=u(this,Zn);if(Math.abs(d-o)<=ie.PRECISION||Math.abs(h-a)<=ie.PRECISION){const b=t+i/2-(l+d/2),v=r+s/2-(c+h/2);return{path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(r)}`,transform:`${this.rotationTransform} translate(${b} ${v})`}}}const f=(i-2*o)/(d-2*o),m=(s-2*a)/(h-2*a),y=d/i,g=h/s;return{path:{"transform-origin":`${ie.svgRound(l)} ${ie.svgRound(c)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${ie.svgRound(o)} ${ie.svgRound(a)}) scale(${f} ${m}) translate(${ie.svgRound(-o)} ${ie.svgRound(-a)})`}}}getPathResizedSVGProperties([t,r,i,s]){const[o,a]=C(this,ts,ro).call(this),l=u(this,Zn),[c,d,h,f]=l;if(l[0]=t,l[1]=r,l[2]=i,l[3]=s,Math.abs(h-o)<=ie.PRECISION||Math.abs(f-a)<=ie.PRECISION){const v=t+i/2-(c+h/2),x=r+s/2-(d+f/2);for(const{line:w,points:E}of u(this,Xr))ie._translate(w,v,x,w),ie._translate(E,v,x,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*o)/(h-2*o),y=(s-2*a)/(f-2*a),g=-m*(c+o)+t+o,b=-y*(d+a)+r+a;if(m!==1||y!==1||g!==0||b!==0)for(const{line:v,points:x}of u(this,Xr))ie._rescale(v,g,b,m,y,v),ie._rescale(x,g,b,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(r)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,r],i){const[s,o]=i,a=u(this,Zn),l=t-a[0],c=r-a[1];if(u(this,$s)===s&&u(this,Us)===o)for(const{line:d,points:h}of u(this,Xr))ie._translate(d,l,c,d),ie._translate(h,l,c,h);else{const d=u(this,$s)/s,h=u(this,Us)/o;A(this,$s,s),A(this,Us,o);for(const{line:f,points:m}of u(this,Xr))ie._rescale(f,l,c,d,h,f),ie._rescale(m,l,c,d,h,m);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t)} ${ie.svgRound(r)}`}}}get defaultSVGProperties(){const t=u(this,Zn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(t[0])} ${ie.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Zn=new WeakMap,V0=new WeakMap,H0=new WeakMap,Xr=new WeakMap,$s=new WeakMap,Us=new WeakMap,Wf=new WeakMap,Kf=new WeakMap,$u=new WeakMap,ts=new WeakSet,ro=function(t=u(this,$u)){const r=u(this,H0)+t/2*u(this,Wf);return u(this,Kf)%180===0?[r/u(this,$s),r/u(this,Us)]:[r/u(this,Us),r/u(this,$s)]},V1=new WeakSet,vB=function(){const[t,r,i,s]=u(this,Zn),[o,a]=C(this,ts,ro).call(this,0);return[t+o,r+a,i-2*o,s-2*a]},H1=new WeakSet,xB=function(){const t=A(this,Zn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of u(this,Xr)){if(s.length<=12){for(let l=4,c=s.length;l<c;l+=6)re.pointBoundingBox(s[l],s[l+1],t);continue}let o=s[4],a=s[5];for(let l=6,c=s.length;l<c;l+=6){const[d,h,f,m,y,g]=s.subarray(l,l+6);re.bezierBoundingBox(o,a,d,h,f,m,y,g,t),o=y,a=g}}const[r,i]=C(this,ts,ro).call(this);t[0]=Vn(t[0]-r,0,1),t[1]=Vn(t[1]-i,0,1),t[2]=Vn(t[2]+r,0,1),t[3]=Vn(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]},q1=new WeakSet,bB=function(t){const[r,i]=C(this,ts,ro).call(this);A(this,$u,t);const[s,o]=C(this,ts,ro).call(this),[a,l]=[s-r,o-i],c=u(this,Zn);return c[0]-=a,c[1]-=l,c[2]+=2*a,c[3]+=2*l,c};class VS extends gB{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:gt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new VS(this._viewParameters);return e.updateAll(this),e}}var G1,wB;const Xd=class Xd extends aw{constructor(t){super({...t,name:"inkEditor"});S(this,G1);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,r){gt.initialize(t,r),this._defaultDrawingOptions=new VS(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ne(this,"typesMap",new Map([[Oe.INK_THICKNESS,"stroke-width"],[Oe.INK_COLOR,"stroke"],[Oe.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,r,i,s,o){return new ZK(t,r,i,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,r,i,s,o,a){return Av.deserialize(t,r,i,s,o,a)}static async deserialize(t,r,i){let s=null;if(t instanceof FP){const{data:{inkLists:a,rect:l,rotation:c,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:y,richText:g,contentsObj:b,creationDate:v,modificationDate:x},parent:{page:{pageNumber:w}}}=t;s=t={annotationType:Se.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:a},boxes:null,pageIndex:w-1,rect:l.slice(0),rotation:c,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:g,comment:(b==null?void 0:b.str)||null,creationDate:v,modificationDate:x}}const o=await super.deserialize(t,r,i);return o._initialData=s,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new iw(this)),[["colorPicker",this._colorPicker]]}get colorType(){return Oe.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:r,parent:i}=this;r.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,r.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:r,opacity:i}){this._drawingOptions=Xd.getDefaultDrawingOptions({stroke:re.makeHexColor(...t),"stroke-width":r,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:r,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{color:gt._colorManager.convert(s),opacity:o,thickness:a,paths:{lines:r,points:i}});return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!C(this,G1,wB).call(this,l)?null:(l.id=this.annotationElementId,l)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:r,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:r,popup:this.comment}),null}};G1=new WeakSet,wB=function(t){const{color:r,thickness:i,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,l)=>a!==r[l])||t.thickness!==i||t.opacity!==s||t.pageIndex!==o},X(Xd,"_type","ink"),X(Xd,"_editorType",Se.INK),X(Xd,"_defaultDrawingOptions",null);let mC=Xd;class gC extends Av{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const mx=8,Zp=3;var Uu,q0,yC,ns,W1,SB,K1,AB,G0,vC,Xf,cb,X1,_B,Y1,EB,Q1,kB,W0,xC,K0,bC,J1,CB;class Jt{static extractContoursFromText(e,{fontFamily:t,fontStyle:r,fontWeight:i},s,o,a,l){let c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const h=200,f=d.font=`${r} ${i} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:b,fontBoundingBoxAscent:v,fontBoundingBoxDescent:x,width:w}=d.measureText(e),E=1.5,T=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,w)*E),k=Math.ceil(Math.max(Math.abs(g)+Math.abs(b)||h,Math.abs(v)+Math.abs(x)||h)*E);c=new OffscreenCanvas(T,k),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,T,k),d.fillStyle="black",d.fillText(e,T*(E-1)/2,k*(3-E)/2);const P=C(this,W0,xC).call(this,d.getImageData(0,0,T,k).data),R=C(this,Q1,kB).call(this,P),L=C(this,K0,bC).call(this,R),O=C(this,G0,vC).call(this,P,T,k,L);return this.processDrawnLines({lines:{curves:O,width:T,height:k},pageWidth:s,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,t,r,i,s){const[o,a,l]=C(this,J1,CB).call(this,e),[c,d]=C(this,Y1,EB).call(this,o,a,l,Math.hypot(a,l)*u(this,Uu).sigmaSFactor,u(this,Uu).sigmaR,u(this,Uu).kernelSize),h=C(this,K0,bC).call(this,d),f=C(this,G0,vC).call(this,c,a,l,h);return this.processDrawnLines({lines:{curves:f,width:a,height:l},pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!==0&&([t,r]=[r,t]);const{curves:l,width:c,height:d}=e,h=e.thickness??0,f=[],m=Math.min(t/c,r/d),y=m/t,g=m/r,b=[];for(const{points:x}of l){const w=o?C(this,X1,_B).call(this,x):x;if(!w)continue;b.push(w);const E=w.length,T=new Float32Array(E),k=new Float32Array(3*(E===2?2:E-2));if(f.push({line:k,points:T}),E===2){T[0]=w[0]*y,T[1]=w[1]*g,k.set([NaN,NaN,NaN,NaN,T[0],T[1]],0);continue}let[P,R,L,O]=w;P*=y,R*=g,L*=y,O*=g,T.set([P,R,L,O],0),k.set([NaN,NaN,NaN,NaN,P,R],0);for(let F=4;F<E;F+=2){const I=T[F]=w[F]*y,U=T[F+1]=w[F+1]*g;k.set(ie.createBezierPoints(P,R,L,O,I,U),(F-2)*3),[P,R,L,O]=[L,O,I,U]}}if(f.length===0)return null;const v=a?new gC:new Av;return v.build(f,t,r,1,i,a?0:h,s),{outline:v,newCurves:b,areContours:a,thickness:h,width:c,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:r,width:i,height:s}){let o=1/0,a=-1/0,l=0;for(const w of e){l+=w.length;for(let E=2,T=w.length;E<T;E++){const k=w[E]-w[E-2];o=Math.min(o,k),a=Math.max(a,k)}}let c;o>=-128&&a<=127?c=Int8Array:o>=-32768&&a<=32767?c=Int16Array:c=Int32Array;const d=e.length,h=mx+Zp*d,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(l-2*d)*c.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=i,f[m++]=s,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(r??0)),f[m++]=d,f[m++]=c.BYTES_PER_ELEMENT;for(const w of e)f[m++]=w.length-2,f[m++]=w[0],f[m++]=w[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const b=c.prototype.constructor;for(const w of e){const E=new b(w.length-2);for(let T=2,k=w.length;T<k;T++)E[T-2]=w[T]-w[T-2];g.write(E)}g.close();const v=await new Response(y.readable).arrayBuffer(),x=new Uint8Array(v);return _3(x)}static async decompressSignature(e){try{const t=_7(e),{readable:r,writable:i}=new DecompressionStream("deflate-raw"),s=i.getWriter();await s.ready,s.write(t).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let o=null,a=0;for await(const w of r)o||(o=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),o.set(w,a),a+=w.length;const l=new Uint32Array(o.buffer,0,o.length>>2),c=l[1];if(c!==0)throw new Error(`Invalid version: ${c}`);const d=l[2],h=l[3],f=l[4]===0,m=l[5],y=l[6],g=l[7],b=[],v=(mx+Zp*y)*Uint32Array.BYTES_PER_ELEMENT;let x;switch(g){case Int8Array.BYTES_PER_ELEMENT:x=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:x=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:x=new Int32Array(o.buffer,v);break}a=0;for(let w=0;w<y;w++){const E=l[Zp*w+mx],T=new Float32Array(E+2);b.push(T);for(let k=0;k<Zp-1;k++)T[k]=l[Zp*w+mx+k+1];for(let k=0;k<E;k++)T[k+2]=T[k]+x[a++]}return{areContours:f,thickness:m,outlines:b,width:d,height:h}}catch(t){return Ae(`decompressSignature: ${t}`),null}}}Uu=new WeakMap,q0=new WeakSet,yC=function(e,t,r,i){return r-=e,i-=t,r===0?i>0?0:4:r===1?i+6:2-i},ns=new WeakMap,W1=new WeakSet,SB=function(e,t,r,i,s,o,a){const l=C(this,q0,yC).call(this,r,i,s,o);for(let c=0;c<8;c++){const d=(-c+l-a+16)%8,h=u(this,ns)[2*d],f=u(this,ns)[2*d+1];if(e[(r+h)*t+(i+f)]!==0)return d}return-1},K1=new WeakSet,AB=function(e,t,r,i,s,o,a){const l=C(this,q0,yC).call(this,r,i,s,o);for(let c=0;c<8;c++){const d=(c+l+a+16)%8,h=u(this,ns)[2*d],f=u(this,ns)[2*d+1];if(e[(r+h)*t+(i+f)]!==0)return d}return-1},G0=new WeakSet,vC=function(e,t,r,i){const s=e.length,o=new Int32Array(s);for(let d=0;d<s;d++)o[d]=e[d]<=i?1:0;for(let d=1;d<r-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*r-1-d]=0;let a=1,l;const c=[];for(let d=1;d<r-1;d++){l=1;for(let h=1;h<t-1;h++){const f=d*t+h,m=o[f];if(m===0)continue;let y=d,g=h;if(m===1&&o[f-1]===0)a+=1,g-=1;else if(m>=1&&o[f+1]===0)a+=1,g+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const b=[h,d],v=g===h+1,x={isHole:v,points:b,id:a,parent:0};c.push(x);let w;for(const F of c)if(F.id===l){w=F;break}w?w.isHole?x.parent=v?w.parent:l:x.parent=v?l:w.parent:x.parent=v?l:0;const E=C(this,W1,SB).call(this,o,t,d,h,y,g,0);if(E===-1){o[f]=-a,o[f]!==1&&(l=Math.abs(o[f]));continue}let T=u(this,ns)[2*E],k=u(this,ns)[2*E+1];const P=d+T,R=h+k;y=P,g=R;let L=d,O=h;for(;;){const F=C(this,K1,AB).call(this,o,t,L,O,y,g,1);T=u(this,ns)[2*F],k=u(this,ns)[2*F+1];const I=L+T,U=O+k;b.push(U,I);const B=L*t+O;if(o[B+1]===0?o[B]=-a:o[B]===1&&(o[B]=a),I===d&&U===h&&L===P&&O===R){o[f]!==1&&(l=Math.abs(o[f]));break}else y=L,g=O,L=I,O=U}}}return c},Xf=new WeakSet,cb=function(e,t,r,i){if(r-t<=4){for(let P=t;P<r-2;P+=2)i.push(e[P],e[P+1]);return}const s=e[t],o=e[t+1],a=e[r-4]-s,l=e[r-3]-o,c=Math.hypot(a,l),d=a/c,h=l/c,f=d*o-h*s,m=l/a,y=1/c,g=Math.atan(m),b=Math.cos(g),v=Math.sin(g),x=y*(Math.abs(b)+Math.abs(v)),w=y*(1-x+x**2),E=Math.max(Math.atan(Math.abs(v+b)*w),Math.atan(Math.abs(v-b)*w));let T=0,k=t;for(let P=t+2;P<r-2;P+=2){const R=Math.abs(f-d*e[P+1]+h*e[P]);R>T&&(k=P,T=R)}T>(c*E)**2?(C(this,Xf,cb).call(this,e,t,k+2,i),C(this,Xf,cb).call(this,e,k,r,i)):i.push(s,o)},X1=new WeakSet,_B=function(e){const t=[],r=e.length;return C(this,Xf,cb).call(this,e,0,r,t),t.push(e[r-2],e[r-1]),t.length<=4?null:t},Y1=new WeakSet,EB=function(e,t,r,i,s,o){const a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){const b=(g-c)**2;for(let v=0;v<o;v++)a[g*o+v]=Math.exp((b+(v-c)**2)/l)}const d=new Float32Array(256),h=-2*s**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,m=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<r;g++)for(let b=0;b<t;b++){const v=g*t+b,x=e[v];let w=0,E=0;for(let k=0;k<o;k++){const P=g+k-c;if(!(P<0||P>=r))for(let R=0;R<o;R++){const L=b+R-c;if(L<0||L>=t)continue;const O=e[P*t+L],F=a[k*o+R]*d[Math.abs(O-x)];w+=O*F,E+=F}}const T=m[v]=Math.round(w/E);y[T]++}return[m,y]},Q1=new WeakSet,kB=function(e){const t=new Uint32Array(256);for(const r of e)t[r]++;return t},W0=new WeakSet,xC=function(e){const t=e.length,r=new Uint8ClampedArray(t>>2);let i=-1/0,s=1/0;for(let a=0,l=r.length;a<l;a++){const c=r[a]=e[a<<2];i=Math.max(i,c),s=Math.min(s,c)}const o=255/(i-s);for(let a=0,l=r.length;a<l;a++)r[a]=(r[a]-s)*o;return r},K0=new WeakSet,bC=function(e){let t,r=-1/0,i=-1/0;const s=e.findIndex(l=>l!==0);let o=s,a=s;for(t=s;t<256;t++){const l=e[t];l>r&&(t-o>i&&(i=t-o,a=t-1),r=l,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},J1=new WeakSet,CB=function(e){const t=e,{width:r,height:i}=e,{maxDim:s}=u(this,Uu);let o=r,a=i;if(r>s||i>s){let f=r,m=i,y=Math.log2(Math.max(r,i)/s);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){o=Math.ceil(f/2),a=Math.ceil(m/2);const x=new OffscreenCanvas(o,a);x.getContext("2d").drawImage(e,0,0,f,m,0,0,o,a),f=o,m=a,e!==t&&e.close(),e=x.transferToImageBitmap()}const b=Math.min(s/o,s/a);o=Math.round(o*b),a=Math.round(a*b)}const c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=c.getImageData(0,0,o,a).data;return[C(this,W0,xC).call(this,d),o,a]},S(Jt,q0),S(Jt,W1),S(Jt,K1),S(Jt,G0),S(Jt,Xf),S(Jt,X1),S(Jt,Y1),S(Jt,Q1),S(Jt,W0),S(Jt,K0),S(Jt,J1),S(Jt,Uu,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(Jt,ns,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class zP extends gB{constructor(){super(),super.updateProperties({fill:gt._defaultLineColor,"stroke-width":0})}clone(){const e=new zP;return e.updateAll(this),e}}class $P extends VS{constructor(e){super(e),super.updateProperties({stroke:gt._defaultLineColor,"stroke-width":1})}clone(){const e=new $P(this._viewParameters);return e.updateAll(this),e}}var gl,Vs,yl,Vu;const jr=class jr extends aw{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});S(this,gl,!1);S(this,Vs,null);S(this,yl,null);S(this,Vu,null);this._willKeepAspectRatio=!0,A(this,yl,t.signatureData||null),A(this,Vs,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,r){gt.initialize(t,r),this._defaultDrawingOptions=new zP,this._defaultDrawnSignatureOptions=new $P(r.viewParameters)}static getDefaultDrawingOptions(t){const r=this._defaultDrawingOptions.clone();return r.updateProperties(t),r}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ne(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!u(this,Vs)}}static computeTelemetryFinalData(t){const r=t.get("hasDescription");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,r;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,r=this.y),super.render(),this._drawId===null)if(u(this,yl)){const{lines:s,mustSmooth:o,areContours:a,description:l,uuid:c,heightInPage:d}=u(this,yl),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,y=Jt.processDrawnLines({lines:s,pageWidth:h,pageHeight:f,rotation:m,innerMargin:jr._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,d,l,c)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:u(this,Vs)||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,r)),this.div}setUuid(t){A(this,Vu,t),this.addEditToolbar()}getUuid(){return u(this,Vu)}get description(){return u(this,Vs)}set description(t){A(this,Vs,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(r=>{r==null||r.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:r,thickness:i,width:s,height:o}=u(this,yl),a=Math.max(s,o),l=Jt.processDrawnLines({lines:{curves:t.map(c=>({points:c})),thickness:i,width:s,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:r});return{areContours:r,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,r,i,s){const{x:o,y:a}=this,{outline:l}=A(this,yl,t);A(this,gl,l instanceof gC),this.description=i;let c;u(this,gl)?c=jr.getDefaultDrawingOptions():(c=jr._defaultDrawnSignatureOptions.clone(),c.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:c});const[,d]=this.pageDimensions;let h=r/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Jt.process(t,r,i,s,jr._INNER_MARGIN)}getFromText(t,r){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return Jt.extractContoursFromText(t,r,i,s,o,jr._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return Jt.processDrawnLines({lines:t,pageWidth:r,pageHeight:i,rotation:s,innerMargin:jr._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:r}){t?this._drawingOptions=jr.getDefaultDrawingOptions():(this._drawingOptions=jr._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":r}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:r,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:u(this,gl),color:[0,0,0],thickness:u(this,gl)?0:s});return this.addComment(o),t?(o.paths={lines:r,points:i},o.uuid=u(this,Vu),o.isCopy=!0):o.lines=r,u(this,Vs)&&(o.accessibilityData={type:"Figure",alt:u(this,Vs)}),o}static deserializeDraw(t,r,i,s,o,a){return a.areContours?gC.deserialize(t,r,i,s,o,a):Av.deserialize(t,r,i,s,o,a)}static async deserialize(t,r,i){var o;const s=await super.deserialize(t,r,i);return A(s,gl,t.areContours),s.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",A(s,Vu,t.uuid),s}};gl=new WeakMap,Vs=new WeakMap,yl=new WeakMap,Vu=new WeakMap,X(jr,"_type","signature"),X(jr,"_editorType",Se.SIGNATURE),X(jr,"_defaultDrawingOptions",null);let wC=jr;var Et,mn,vl,Uo,xl,Yf,Vo,Hu,Hs,Yr,Qf,qu,Cm,Gu,Tm,Jf,ub,Zf,db,ep,hb,X0,AC,tp,fb,Z1,TB;class SC extends gt{constructor(t){super({...t,name:"stampEditor"});S(this,qu);S(this,Gu);S(this,Jf);S(this,Zf);S(this,ep);S(this,X0);S(this,tp);S(this,Z1);S(this,Et,null);S(this,mn,null);S(this,vl,null);S(this,Uo,null);S(this,xl,null);S(this,Yf,"");S(this,Vo,null);S(this,Hu,!1);S(this,Hs,null);S(this,Yr,!1);S(this,Qf,!1);A(this,Uo,t.bitmapUrl),A(this,xl,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,r){gt.initialize(t,r)}static isHandlingMimeForPasting(t){return Zb.includes(t)}static paste(t,r){r.pasteEditor({mode:Se.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const r=t.get("hasAltText");return{hasAltText:r.get(!0)??0,hasNoAltText:r.get(!1)??0}}async mlGuessAltText(t=null,r=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,l=await i.guess({name:"altText",request:{data:s,width:o,height:a,channels:s.length/(o*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const c=l.output;return await this.setGuessedAltText(c),r&&!this.hasAltTextData()&&(this.altTextData={alt:c,decorative:!1}),c}remove(){var t;u(this,mn)&&(A(this,Et,null),this._uiManager.imageManager.deleteId(u(this,mn)),(t=u(this,Vo))==null||t.remove(),A(this,Vo,null),u(this,Hs)&&(clearTimeout(u(this,Hs)),A(this,Hs,null))),super.remove()}rebuild(){if(!this.parent){u(this,mn)&&C(this,Jf,ub).call(this);return}super.rebuild(),this.div!==null&&(u(this,mn)&&u(this,Vo)===null&&C(this,Jf,ub).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(u(this,vl)||u(this,Et)||u(this,Uo)||u(this,xl)||u(this,mn)||u(this,Hu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,r;return this._isCopy&&(t=this.x,r=this.y),super.render(),this.div.hidden=!0,this.createAltText(),u(this,Hu)||(u(this,Et)?C(this,Zf,db).call(this):C(this,Jf,ub).call(this)),this._isCopy&&this._moveAfterPaste(t,r),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,r){const{id:i,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,r);r.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(A(this,mn,i),s&&A(this,Et,s),A(this,Hu,!1),C(this,Zf,db).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;u(this,Hs)!==null&&clearTimeout(u(this,Hs)),A(this,Hs,setTimeout(()=>{A(this,Hs,null),C(this,X0,AC).call(this)},200))}copyCanvas(t,r,i=!1){t||(t=224);const{width:s,height:o}=u(this,Et),a=new ds;let l=u(this,Et),c=s,d=o,h=null;if(r){if(s>r||o>r){const P=Math.min(r/s,r/o);c=Math.floor(s*P),d=Math.floor(o*P)}h=document.createElement("canvas");const m=h.width=Math.ceil(c*a.sx),y=h.height=Math.ceil(d*a.sy);u(this,Yr)||(l=C(this,ep,hb).call(this,m,y));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let b="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":C7.isDarkMode&&(b="#8f8f9d",v="#42414d");const x=15,w=x*a.sx,E=x*a.sy,T=new OffscreenCanvas(w*2,E*2),k=T.getContext("2d");k.fillStyle=b,k.fillRect(0,0,w*2,E*2),k.fillStyle=v,k.fillRect(0,0,w,E),k.fillRect(w,E,w,E),g.fillStyle=g.createPattern(T,"repeat"),g.fillRect(0,0,m,y),g.drawImage(l,0,0,l.width,l.height,0,0,m,y)}let f=null;if(i){let m,y;if(a.symmetric&&l.width<t&&l.height<t)m=l.width,y=l.height;else if(l=u(this,Et),s>t||o>t){const v=Math.min(t/s,t/o);m=Math.floor(s*v),y=Math.floor(o*v),u(this,Yr)||(l=C(this,ep,hb).call(this,m,y))}const b=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});b.drawImage(l,0,0,l.width,l.height,0,0,m,y),f={width:m,height:y,data:b.getImageData(0,0,m,y).data}}return{canvas:h,width:c,height:d,imageData:f}}static async deserialize(t,r,i){var b;let s=null,o=!1;if(t instanceof H4){const{data:{rect:v,rotation:x,id:w,structParent:E,popupRef:T,richText:k,contentsObj:P,creationDate:R,modificationDate:L},container:O,parent:{page:{pageNumber:F}},canvas:I}=t;let U,B;I?(delete t.canvas,{id:U,bitmap:B}=i.imageManager.getFromCanvas(O.id,I),I.remove()):(o=!0,t._hasNoCanvas=!0);const M=((b=await r._structTree.getAriaAttributes(`${TP}${w}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:Se.STAMP,bitmapId:U,bitmap:B,pageIndex:F-1,rect:v.slice(0),rotation:x,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:M},isSvg:!1,structParent:E,popupRef:T,richText:k,comment:(P==null?void 0:P.str)||null,creationDate:R,modificationDate:L}}const a=await super.deserialize(t,r,i),{rect:l,bitmap:c,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=t;o?(i.addMissingCanvas(t.id,a),A(a,Hu,!0)):h&&i.imageManager.isValidId(h)?(A(a,mn,h),c&&A(a,Et,c)):A(a,Uo,d),A(a,Yr,f);const[y,g]=a.pageDimensions;return a.width=(l[2]-l[0])/y,a.height=(l[3]-l[1])/g,m&&(a.altTextData=m),a._initialData=s,t.comment&&a.setCommentData(t),A(a,Qf,!!s),a}serialize(t=!1,r=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:u(this,mn),isSvg:u(this,Yr)});if(this.addComment(i),t)return i.bitmapUrl=C(this,tp,fb).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const l=C(this,Z1,TB).call(this,i);return l.isSame?null:(l.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(r===null)return i;r.stamps||(r.stamps=new Map);const a=u(this,Yr)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!r.stamps.has(u(this,mn)))r.stamps.set(u(this,mn),{area:a,serialized:i}),i.bitmap=C(this,tp,fb).call(this,!1);else if(u(this,Yr)){const l=r.stamps.get(u(this,mn));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=C(this,tp,fb).call(this,!1))}return i}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}Et=new WeakMap,mn=new WeakMap,vl=new WeakMap,Uo=new WeakMap,xl=new WeakMap,Yf=new WeakMap,Vo=new WeakMap,Hu=new WeakMap,Hs=new WeakMap,Yr=new WeakMap,Qf=new WeakMap,qu=new WeakSet,Cm=function(t,r=!1){if(!t){this.remove();return}A(this,Et,t.bitmap),r||(A(this,mn,t.id),A(this,Yr,t.isSvg)),t.file&&A(this,Yf,t.file.name),C(this,Zf,db).call(this)},Gu=new WeakSet,Tm=function(){if(A(this,vl,null),this._uiManager.enableWaiting(!1),!!u(this,Vo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Et)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&u(this,Et)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Jf=new WeakSet,ub=function(){if(u(this,mn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(u(this,mn)).then(i=>C(this,qu,Cm).call(this,i,!0)).finally(()=>C(this,Gu,Tm).call(this));return}if(u(this,Uo)){const i=u(this,Uo);A(this,Uo,null),this._uiManager.enableWaiting(!0),A(this,vl,this._uiManager.imageManager.getFromUrl(i).then(s=>C(this,qu,Cm).call(this,s)).finally(()=>C(this,Gu,Tm).call(this)));return}if(u(this,xl)){const i=u(this,xl);A(this,xl,null),this._uiManager.enableWaiting(!0),A(this,vl,this._uiManager.imageManager.getFromFile(i).then(s=>C(this,qu,Cm).call(this,s)).finally(()=>C(this,Gu,Tm).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Zb.join(",");const r=this._uiManager._signal;A(this,vl,new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,qu,Cm).call(this,s)}i()},{signal:r}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:r})}).finally(()=>C(this,Gu,Tm).call(this))),t.click()},Zf=new WeakSet,db=function(){var c;const{div:t}=this;let{width:r,height:i}=u(this,Et);const[s,o]=this.pageDimensions,a=.75;if(this.width)r=this.width*s,i=this.height*o;else if(r>a*s||i>a*o){const d=Math.min(a*s/r,a*o/i);r*=d,i*=d}this._uiManager.enableWaiting(!1);const l=A(this,Vo,document.createElement("canvas"));l.setAttribute("role","img"),this.addContainer(l),this.width=r/s,this.height=i/o,this.setDims(),(c=this._initialOptions)!=null&&c.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,X0,AC).call(this),u(this,Qf)||(this.parent.addUndoableEditor(this),A(this,Qf,!0)),this._reportTelemetry({action:"inserted_image"}),u(this,Yf)&&this.div.setAttribute("aria-description",u(this,Yf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},ep=new WeakSet,hb=function(t,r){const{width:i,height:s}=u(this,Et);let o=i,a=s,l=u(this,Et);for(;o>2*t||a>2*r;){const c=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*r&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(l,0,0,c,d,0,0,o,a),l=h.transferToImageBitmap()}return l},X0=new WeakSet,AC=function(){const[t,r]=this.parentDimensions,{width:i,height:s}=this,o=new ds,a=Math.ceil(i*t*o.sx),l=Math.ceil(s*r*o.sy),c=u(this,Vo);if(!c||c.width===a&&c.height===l)return;c.width=a,c.height=l;const d=u(this,Yr)?u(this,Et):C(this,ep,hb).call(this,a,l),h=c.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,l)},tp=new WeakSet,fb=function(t){if(t){if(u(this,Yr)){const s=this._uiManager.imageManager.getSvgUrl(u(this,mn));if(s)return s}const r=document.createElement("canvas");return{width:r.width,height:r.height}=u(this,Et),r.getContext("2d").drawImage(u(this,Et),0,0),r.toDataURL()}if(u(this,Yr)){const[r,i]=this.pageDimensions,s=Math.round(this.width*r*aa.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*aa.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(s,o);return a.getContext("2d").drawImage(u(this,Et),0,0,u(this,Et).width,u(this,Et).height,0,0,s,o),a.transferToImageBitmap()}return structuredClone(u(this,Et))},Z1=new WeakSet,TB=function(t){var a;const{pageIndex:r,accessibilityData:{altText:i}}=this._initialData,s=t.pageIndex===r,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}},X(SC,"_type","stamp"),X(SC,"_editorType",Se.STAMP);var Wu,np,bl,wl,Ho,br,Sl,rp,ip,rs,qo,gn,Go,Al,sp,ce,_l,Y0,_C,eS,PB,Ai,ys,Q0,EC,J0,kC,op,pb;const Vi=class Vi{constructor({uiManager:e,pageIndex:t,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:d}){S(this,Y0);S(this,eS);S(this,Ai);S(this,Q0);S(this,J0);S(this,op);S(this,Wu,void 0);S(this,np,!1);S(this,bl,null);S(this,wl,null);S(this,Ho,null);S(this,br,new Map);S(this,Sl,!1);S(this,rp,!1);S(this,ip,!1);S(this,rs,null);S(this,qo,null);S(this,gn,null);S(this,Go,null);S(this,Al,null);S(this,sp,-1);S(this,ce,void 0);const h=[...u(Vi,_l).values()];if(!Vi._initialized){Vi._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),A(this,ce,e),this.pageIndex=t,this.div=r,A(this,Wu,s),A(this,bl,o),this.viewport=c,A(this,gn,l),this.drawLayer=a,this._structTree=i,u(this,ce).addLayer(this)}get isEmpty(){return u(this,br).size===0}get isInvisible(){return this.isEmpty&&u(this,ce).getMode()===Se.NONE}updateToolbar(e){u(this,ce).updateToolbar(e)}updateMode(e=u(this,ce).getMode()){switch(C(this,op,pb).call(this),e){case Se.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Se.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Se.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Se.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const r of u(Vi,_l).values())t.toggle(`${r._type}Editing`,e===r._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=u(this,gn))==null?void 0:t.div)}setEditingState(e){u(this,ce).setEditingState(e)}addCommands(e){u(this,ce).addCommands(e)}cleanUndoStack(e){u(this,ce).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=u(this,bl))==null||t.div.classList.toggle("disabled",!e)}async enable(){var r;A(this,ip,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(r=u(this,Al))==null||r.abort(),A(this,Al,null);const e=new Set;for(const i of u(this,Y0,_C))i.enableEditing(),i.show(!0),i.annotationElementId&&(u(this,ce).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=u(this,bl);if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),u(this,ce).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}A(this,ip,!1),u(this,ce)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var r;if(A(this,rp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),u(this,gn)&&!u(this,Al)){A(this,Al,new AbortController);const i=u(this,ce).combinedSignal(u(this,Al));u(this,gn).div.addEventListener("pointerdown",s=>{const{clientX:a,clientY:l,timeStamp:c}=s,d=u(this,sp);if(c-d>500){A(this,sp,c);return}A(this,sp,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(a,l);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const y=new RegExp(`^${vg}[0-9]+$`);for(const b of f)if(y.test(b.id)){m=b.id;break}if(!m)return;const g=u(this,br).get(m);(g==null?void 0:g.annotationElementId)===null&&(s.stopPropagation(),s.preventDefault(),g.dblclick(s))},{signal:i,capture:!0})}const e=u(this,bl);if(e){const i=new Map,s=new Map;for(const a of u(this,Y0,_C)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){i.set(a.annotationElementId,a);continue}else s.set(a.annotationElementId,a);(r=this.getEditableAnnotation(a.annotationElementId))==null||r.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:l}=a.data;if(u(this,ce).isDeletedAnnotationElement(l)){a.updateEdited({deleted:!0});continue}let c=s.get(l);if(c){c.resetAnnotationElement(a),c.show(!1),a.show();continue}c=i.get(l),c&&(u(this,ce).addChangedExistingAnnotation(c),c.renderAnnotationElement(a)&&c.show(!1)),a.show()}}C(this,op,pb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const i of u(Vi,_l).values())t.remove(`${i._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),A(this,rp,!1)}getEditableAnnotation(e){var t;return((t=u(this,bl))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){u(this,ce).getActive()!==e&&u(this,ce).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=u(this,gn))!=null&&e.div&&!u(this,Go)){A(this,Go,new AbortController);const t=u(this,ce).combinedSignal(u(this,Go));u(this,gn).div.addEventListener("pointerdown",C(this,eS,PB).bind(this),{signal:t}),u(this,gn).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=u(this,gn))!=null&&e.div&&u(this,Go)&&(u(this,Go).abort(),A(this,Go,null),u(this,gn).div.classList.remove("highlighting"))}enableClick(){if(u(this,wl))return;A(this,wl,new AbortController);const e=u(this,ce).combinedSignal(u(this,wl));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=u(this,wl))==null||e.abort(),A(this,wl,null)}attach(e){u(this,br).set(e.id,e);const{annotationElementId:t}=e;t&&u(this,ce).isDeletedAnnotationElement(t)&&u(this,ce).removeDeletedAnnotationElement(e)}detach(e){var t;u(this,br).delete(e.id),(t=u(this,Wu))==null||t.removePointerInTextLayer(e.contentDiv),!u(this,rp)&&e.annotationElementId&&u(this,ce).addDeletedAnnotationElement(e)}remove(e){this.detach(e),u(this,ce).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(u(this,ce).addDeletedAnnotationElement(e.annotationElementId),gt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),u(this,ce).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!u(this,ip)),u(this,ce).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var r;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!u(this,Ho)&&(e._focusEventsAllowed=!1,A(this,Ho,setTimeout(()=>{A(this,Ho,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:u(this,ce)._signal}),t.focus())},0))),e._structTreeParentId=(r=u(this,Wu))==null?void 0:r.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),r=()=>{e.remove()};this.addCommands({cmd:t,undo:r,mustExec:!1})}getEditorByUID(e){for(const t of u(this,br).values())if(t.uid===e)return t;return null}getNextId(){return u(this,ce).getId()}combinedSignal(e){return u(this,ce).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=u(this,Ai,ys))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await u(this,ce).updateMode(e.mode);const{offsetX:r,offsetY:i}=C(this,J0,kC).call(this),s=this.getNextId(),o=C(this,Q0,EC).call(this,{parent:this,id:s,x:r,y:i,uiManager:u(this,ce),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=u(Vi,_l).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,u(this,ce)))||null}createAndAddNewEditor(e,t,r={}){const i=this.getNextId(),s=C(this,Q0,EC).call(this,{parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:u(this,ce),isCentered:t,...r});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(C(this,J0,kC).call(this),!0,e)}setSelected(e){u(this,ce).setSelected(e)}toggleSelected(e){u(this,ce).toggleSelected(e)}unselect(e){u(this,ce).unselect(e)}pointerup(e){var i;const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!u(this,Sl)||(A(this,Sl,!1),(i=u(this,Ai,ys))!=null&&i.isDrawer&&u(this,Ai,ys).supportMultipleDrawings))return;if(!u(this,np)){A(this,np,!0);return}const r=u(this,ce).getMode();if(r===Se.STAMP||r===Se.SIGNATURE){u(this,ce).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var i;if(u(this,ce).getMode()===Se.HIGHLIGHT&&this.enableTextSelection(),u(this,Sl)){A(this,Sl,!1);return}const{isMac:t}=xn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(A(this,Sl,!0),(i=u(this,Ai,ys))!=null&&i.isDrawer){this.startDrawingSession(e);return}const r=u(this,ce).getActive();A(this,np,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),u(this,rs)){u(this,Ai,ys).startDrawing(this,u(this,ce),!1,e);return}u(this,ce).setCurrentDrawingSession(this),A(this,rs,new AbortController);const t=u(this,ce).combinedSignal(u(this,rs));this.div.addEventListener("blur",({relatedTarget:r})=>{r&&!this.div.contains(r)&&(A(this,qo,null),this.commitOrRemove())},{signal:t}),u(this,Ai,ys).startDrawing(this,u(this,ce),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&A(this,qo,t);return}u(this,qo)&&setTimeout(()=>{var t;(t=u(this,qo))==null||t.focus(),A(this,qo,null)},0)}endDrawingSession(e=!1){return u(this,rs)?(u(this,ce).setCurrentDrawingSession(null),u(this,rs).abort(),A(this,rs,null),A(this,qo,null),u(this,Ai,ys).endDrawing(e)):null}findNewParent(e,t,r){const i=u(this,ce).findParent(t,r);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return u(this,rs)?(this.endDrawingSession(),!0):!1}onScaleChanging(){u(this,rs)&&u(this,Ai,ys).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=u(this,ce).getActive())==null?void 0:e.parent)===this&&(u(this,ce).commitOrRemove(),u(this,ce).setActiveEditor(null)),u(this,Ho)&&(clearTimeout(u(this,Ho)),A(this,Ho,null));for(const r of u(this,br).values())(t=u(this,Wu))==null||t.removePointerInTextLayer(r.contentDiv),r.setParent(null),r.isAttachedToDOM=!1,r.div.remove();this.div=null,u(this,br).clear(),u(this,ce).removeLayer(this)}render({viewport:e}){this.viewport=e,$l(this.div,e);for(const t of u(this,ce).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){u(this,ce).commitOrRemove(),C(this,op,pb).call(this);const t=this.viewport.rotation,r=e.rotation;if(this.viewport=e,$l(this.div,{rotation:r}),t!==r)for(const i of u(this,br).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return u(this,ce).viewParameters.realScale}};Wu=new WeakMap,np=new WeakMap,bl=new WeakMap,wl=new WeakMap,Ho=new WeakMap,br=new WeakMap,Sl=new WeakMap,rp=new WeakMap,ip=new WeakMap,rs=new WeakMap,qo=new WeakMap,gn=new WeakMap,Go=new WeakMap,Al=new WeakMap,sp=new WeakMap,ce=new WeakMap,_l=new WeakMap,Y0=new WeakSet,_C=function(){return u(this,br).size!==0?u(this,br).values():u(this,ce).getEditors(this.pageIndex)},eS=new WeakSet,PB=function(e){u(this,ce).unselectAll();const{target:t}=e;if(t===u(this,gn).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&u(this,gn).div.contains(t)){const{isMac:r}=xn.platform;if(e.button!==0||e.ctrlKey&&r)return;u(this,ce).showAllEditors("highlight",!0,!0),u(this,gn).div.classList.add("free"),this.toggleDrawing(),ow.startHighlighting(this,u(this,ce).direction==="ltr",{target:u(this,gn).div,x:e.x,y:e.y}),u(this,gn).div.addEventListener("pointerup",()=>{u(this,gn).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:u(this,ce)._signal}),e.preventDefault()}},Ai=new WeakSet,ys=function(){return u(Vi,_l).get(u(this,ce).getMode())},Q0=new WeakSet,EC=function(e){const t=u(this,Ai,ys);return t?new t.prototype.constructor(e):null},J0=new WeakSet,kC=function(){const{x:e,y:t,width:r,height:i}=this.boundingClientRect,s=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+r),l=Math.min(window.innerHeight,t+i),c=(s+a)/2-e,d=(o+l)/2-t,[h,f]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:h,offsetY:f}},op=new WeakSet,pb=function(){for(const e of u(this,br).values())e.isEmpty()&&e.remove()},X(Vi,"_initialized",!1),S(Vi,_l,new Map([sC,mC,SC,ow,wC].map(e=>[e._editorType,e])));let lw=Vi;var is,er,Ku,Z0,tS,NB,ev,CC,nS,RB,tv,TC;const nn=class nn{constructor({pageIndex:e}){S(this,ev);S(this,nS);S(this,tv);S(this,is,null);S(this,er,new Map);S(this,Ku,new Map);this.pageIndex=e}setParent(e){if(!u(this,is)){A(this,is,e);return}if(u(this,is)!==e){if(u(this,er).size>0)for(const t of u(this,er).values())t.remove(),e.append(t);A(this,is,e)}}static get _svgFactory(){return Ne(this,"_svgFactory",new Eg)}draw(e,t=!1,r=!1){const i=en(nn,Z0)._++,s=C(this,ev,CC).call(this),o=nn._svgFactory.createElement("defs");s.append(o);const a=nn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&u(this,Ku).set(i,a);const c=r?C(this,nS,RB).call(this,o,l):null,d=nn._svgFactory.createElement("use");return s.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(s,e),u(this,er).set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(e,t){const r=en(nn,Z0)._++,i=C(this,ev,CC).call(this),s=nn._svgFactory.createElement("defs");i.append(s);const o=nn._svgFactory.createElement("path");s.append(o);const a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=nn._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${r}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=nn._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=nn._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const c=nn._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const d=c.cloneNode();return i.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(i,e),u(this,er).set(r,i),r}finalizeDraw(e,t){u(this,Ku).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:r,bbox:i,rootClass:s,path:o}=t,a=typeof e=="number"?u(this,er).get(e):e;if(a){if(r&&C(this,tv,TC).call(this,a,r),i&&C(l=nn,tS,NB).call(l,a,i),s){const{classList:c}=a;for(const[d,h]of Object.entries(s))c.toggle(d,h)}if(o){const d=a.firstChild.firstChild;C(this,tv,TC).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const r=u(this,er).get(e);r&&(u(t,is).append(r),u(this,er).delete(e),u(t,er).set(e,r))}remove(e){u(this,Ku).delete(e),u(this,is)!==null&&(u(this,er).get(e).remove(),u(this,er).delete(e))}destroy(){A(this,is,null);for(const e of u(this,er).values())e.remove();u(this,er).clear(),u(this,Ku).clear()}};is=new WeakMap,er=new WeakMap,Ku=new WeakMap,Z0=new WeakMap,tS=new WeakSet,NB=function(e,[t,r,i,s]){const{style:o}=e;o.top=`${100*r}%`,o.left=`${100*t}%`,o.width=`${100*i}%`,o.height=`${100*s}%`},ev=new WeakSet,CC=function(){const e=nn._svgFactory.create(1,1,!0);return u(this,is).append(e),e.setAttribute("aria-hidden",!0),e},nS=new WeakSet,RB=function(e,t){const r=nn._svgFactory.createElement("clipPath");e.append(r);const i=`clip_${t}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");const s=nn._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),i},tv=new WeakSet,TC=function(e,t){for(const[r,i]of Object.entries(t))i===null?e.removeAttribute(r):e.setAttribute(r,i)},S(nn,tS),S(nn,Z0,0);let cw=nn;globalThis._pdfjsTestingUtils={HighlightOutliner:aC};globalThis.pdfjsLib={AbortException:oa,AnnotationEditorLayer:lw,AnnotationEditorParamsType:Oe,AnnotationEditorType:Se,AnnotationEditorUIManager:Ul,AnnotationLayer:BP,AnnotationMode:Gs,AnnotationType:Ht,applyOpacity:P3,build:j4,ColorPicker:_g,createValidAbsoluteUrl:EP,CSSConstants:T3,DOMSVGFactory:Eg,DrawLayer:cw,FeatureTest:xn,fetchData:kp,findContrastColor:N3,getDocument:LP,getFilenameFromUrl:E3,getPdfFilenameFromUrl:k3,getRGB:Cp,getUuid:CP,getXfaPageViewport:C3,GlobalWorkerOptions:Ci,ImageKind:Wm,InvalidPDFException:Jb,isDataScheme:bv,isPdfFile:$S,isValidExplicitDest:c4,MathClamp:Vn,noContextMenu:si,normalizeUnicode:A3,OPS:yp,OutputScale:ds,PasswordResponses:w3,PDFDataRangeTransport:IP,PDFDateString:wg,PDFWorker:vp,PermissionFlag:b3,PixelsPerInch:aa,RenderingCancelledException:zS,renderRichText:NP,ResponseException:xg,setLayerDimensions:$l,shadow:Ne,SignatureExtractor:Jt,stopEvent:Rt,SupportedImageMimeTypes:Zb,TextLayer:Ag,TouchManager:Sg,updateUrlHash:kP,Util:re,VerbosityLevel:yv,version:DP,XfaLayer:PP};const eX=Object.freeze(Object.defineProperty({__proto__:null,AbortException:oa,AnnotationEditorLayer:lw,AnnotationEditorParamsType:Oe,AnnotationEditorType:Se,AnnotationEditorUIManager:Ul,AnnotationLayer:BP,AnnotationMode:Gs,AnnotationType:Ht,CSSConstants:T3,ColorPicker:_g,DOMSVGFactory:Eg,DrawLayer:cw,FeatureTest:xn,GlobalWorkerOptions:Ci,ImageKind:Wm,InvalidPDFException:Jb,MathClamp:Vn,OPS:yp,OutputScale:ds,PDFDataRangeTransport:IP,PDFDateString:wg,PDFWorker:vp,PasswordResponses:w3,PermissionFlag:b3,PixelsPerInch:aa,RenderingCancelledException:zS,ResponseException:xg,SignatureExtractor:Jt,SupportedImageMimeTypes:Zb,TextLayer:Ag,TouchManager:Sg,Util:re,VerbosityLevel:yv,XfaLayer:PP,applyOpacity:P3,build:j4,createValidAbsoluteUrl:EP,fetchData:kp,findContrastColor:N3,getDocument:LP,getFilenameFromUrl:E3,getPdfFilenameFromUrl:k3,getRGB:Cp,getUuid:CP,getXfaPageViewport:C3,isDataScheme:bv,isPdfFile:$S,isValidExplicitDest:c4,noContextMenu:si,normalizeUnicode:A3,renderRichText:NP,setLayerDimensions:$l,shadow:Ne,stopEvent:Rt,updateUrlHash:kP,version:DP},Symbol.toStringTag,{value:"Module"}));var oM=Object.prototype.hasOwnProperty;function aM(n,e,t){for(t of n.keys())if(rh(t,e))return t}function rh(n,e){var t,r,i;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((r=n.length)===e.length)for(;r--&&rh(n[r],e[r]););return r===-1}if(t===Set){if(n.size!==e.size)return!1;for(r of n)if(i=r,i&&typeof i=="object"&&(i=aM(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(r of n)if(i=r[0],i&&typeof i=="object"&&(i=aM(e,i),!i)||!rh(r[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((r=n.byteLength)===e.byteLength)for(;r--&&n.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(n)){if((r=n.byteLength)===e.byteLength)for(;r--&&n[r]===e[r];);return r===-1}if(!t||typeof n=="object"){r=0;for(t in n)if(oM.call(n,t)&&++r&&!oM.call(e,t)||!(t in e)||!rh(n[t],e[t]))return!1;return Object.keys(e).length===r}}return n!==n&&e!==e}function _v(n){let e=!1;return{promise:new Promise((r,i)=>{n.then(s=>!e&&r(s)).catch(s=>!e&&i(s))}),cancel(){e=!0}}}const tX=["onCopy","onCut","onPaste"],nX=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],rX=["onFocus","onBlur"],iX=["onInput","onInvalid","onReset","onSubmit"],sX=["onLoad","onError"],oX=["onKeyDown","onKeyPress","onKeyUp"],aX=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],lX=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],cX=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],uX=["onSelect"],dX=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],hX=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],fX=["onScroll"],pX=["onWheel"],mX=["onAnimationStart","onAnimationEnd","onAnimationIteration"],gX=["onTransitionEnd"],yX=["onToggle"],vX=["onChange"],xX=[...tX,...nX,...rX,...iX,...sX,...oX,...aX,...lX,...cX,...uX,...dX,...hX,...fX,...pX,...mX,...gX,...vX,...yX];function jB(n,e){const t={};for(const r of xX){const i=n[r];i&&(e?t[r]=s=>i(s,e(r)):t[r]=i)}return t}var bX=!0,h_="Invariant failed";function lt(n,e){if(!n){if(bX)throw new Error(h_);var t=typeof e=="function"?e():e,r=t?"".concat(h_,": ").concat(t):h_;throw new Error(r)}}var wX=function(){},SX=wX;const qn=la(SX),AX=_.createContext(null),MB=AX,_X="noopener noreferrer nofollow";class EX{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return lt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){lt(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,r){e.href=t,e.rel=this.externalLinkRel||_X,e.target=r?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{lt(this.pdfDocument,"PDF document not loaded."),lt(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{lt(Array.isArray(t),`"${t}" is not a valid destination array.`);const r=t[0];new Promise(i=>{lt(this.pdfDocument,"PDF document not loaded."),r instanceof Object?this.pdfDocument.getPageIndex(r).then(s=>{i(s)}).catch(()=>{lt(!1,`"${r}" is not a valid page reference.`)}):typeof r=="number"?i(r):lt(!1,`"${r}" is not a valid destination reference.`)}).then(i=>{const s=i+1;lt(this.pdfViewer,"PDF viewer is not initialized."),lt(s>=1&&s<=this.pagesCount,`"${s}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:s})})})}goToPage(e){const t=e-1;lt(this.pdfViewer,"PDF viewer is not initialized."),lt(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function ih({children:n,type:e}){return p.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const kX={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},lM=kX;function CX(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function xp(){return _.useReducer(CX,{value:void 0,error:void 0})}const HS=typeof window<"u",LB=HS&&window.location.protocol==="file:";function TX(n){return typeof n<"u"}function Zl(n){return TX(n)&&n!==null}function PX(n){return typeof n=="string"}function NX(n){return n instanceof ArrayBuffer}function RX(n){return lt(HS,"isBlob can only be used in a browser environment"),n instanceof Blob}function PC(n){return PX(n)&&/^data:/.test(n)}function cM(n){lt(PC(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function jX(){return HS&&window.devicePixelRatio||1}const IB="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function uM(){qn(!LB,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${IB}`)}function MX(){qn(!LB,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${IB}`)}function sd(n){n!=null&&n.cancel&&n.cancel()}function NC(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function LX(n){return n.name==="RenderingCancelledException"}function IX(n){return new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return t(new Error("Error while reading a file."));e(r.result)},r.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:s}=i.target;if(!s)return t(new Error("Error while reading a file."));switch(s.code){case s.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case s.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case s.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},r.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:DX}=eX,OX=(n,e)=>{switch(e){case lM.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case lM.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function dM(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const FX=_.forwardRef(function({children:e,className:t,error:r="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:s,file:o,inputRef:a,imageResourcesPath:l,loading:c="Loading PDF",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:m,onLoadSuccess:y,onPassword:g=OX,onSourceError:b,onSourceSuccess:v,options:x,renderMode:w,rotate:E,scale:T,...k},P){const[R,L]=xp(),{value:O,error:F}=R,[I,U]=xp(),{value:B,error:M}=I,D=_.useRef(new EX),z=_.useRef([]),$=_.useRef(void 0),V=_.useRef(void 0);o&&o!==$.current&&dM(o)&&(qn(!rh(o,$.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),$.current=o),x&&x!==V.current&&(qn(!rh(x,V.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),V.current=x);const N=_.useRef({scrollPageIntoView:Y=>{const{dest:te,pageNumber:fe,pageIndex:pe=fe-1}=Y;if(h){h({dest:te,pageIndex:pe,pageNumber:fe});return}const Ot=z.current[pe];if(Ot){Ot.scrollIntoView();return}qn(!1,`An internal link leading to page ${fe} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});_.useImperativeHandle(P,()=>({linkService:D,pages:z,viewer:N}),[]);function W(){v&&v()}function G(){F&&(qn(!1,F.toString()),b&&b(F))}function j(){L({type:"RESET"})}_.useEffect(j,[o,L]);const ee=_.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return PC(o)?{data:cM(o)}:(uM(),{url:o});if(o instanceof DX)return{range:o};if(NX(o))return{data:o};if(HS&&RX(o))return{data:await IX(o)};if(lt(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),lt(dM(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(PC(o.url)){const{url:Y,...te}=o;return{data:cM(Y),...te}}uM()}return o},[o]);_.useEffect(()=>{const Y=_v(ee());return Y.promise.then(te=>{L({type:"RESOLVE",value:te})}).catch(te=>{L({type:"REJECT",error:te})}),()=>{sd(Y)}},[ee,L]),_.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){G();return}W()}},[O]);function ye(){B&&(y&&y(B),z.current=new Array(B.numPages),D.current.setDocument(B))}function de(){M&&(qn(!1,M.toString()),f&&f(M))}_.useEffect(function(){U({type:"RESET"})},[U,O]),_.useEffect(function(){if(!O)return;const te=x?{...O,...x}:O,fe=LP(te);m&&(fe.onProgress=m),g&&(fe.onPassword=g);const pe=fe,Ot=pe.promise.then(jn=>{U({type:"RESOLVE",value:jn})}).catch(jn=>{pe.destroyed||U({type:"REJECT",error:jn})});return()=>{Ot.finally(()=>pe.destroy())}},[x,U,O]),_.useEffect(()=>{if(!(typeof B>"u")){if(B===!1){de();return}ye()}},[B]),_.useEffect(function(){D.current.setViewer(N.current),D.current.setExternalLinkRel(i),D.current.setExternalLinkTarget(s)},[i,s]);const se=_.useCallback((Y,te)=>{z.current[Y]=te},[]),Ee=_.useCallback(Y=>{delete z.current[Y]},[]),Fe=_.useMemo(()=>({imageResourcesPath:l,linkService:D.current,onItemClick:h,pdf:B,registerPage:se,renderMode:w,rotate:E,scale:T,unregisterPage:Ee}),[l,h,B,se,w,E,T,Ee]),ve=_.useMemo(()=>jB(k,()=>B),[k,B]);function Ue(){function Y(fe){return!!(fe!=null&&fe.pdf)}if(!Y(Fe))throw new Error("pdf is undefined");const te=typeof e=="function"?e(Fe):e;return p.jsx(MB.Provider,{value:Fe,children:te})}function Dt(){return o?B==null?p.jsx(ih,{type:"loading",children:typeof c=="function"?c():c}):B===!1?p.jsx(ih,{type:"error",children:typeof r=="function"?r():r}):Ue():p.jsx(ih,{type:"no-data",children:typeof d=="function"?d():d})}return p.jsx("div",{className:Ap("react-pdf__Document",t),ref:a,...ve,children:Dt()})}),BX=FX;function DB(){return _.useContext(MB)}function OB(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var r=t[0];return r||null}return function(s){for(var o=0,a=t;o<a.length;o++){var l=a[o];typeof l=="function"?l(s):l&&(l.current=s)}}}const zX=_.createContext(null),FB=zX;function qS(){return _.useContext(FB)}function $X(){const n=DB(),e=qS();lt(e,"Unable to find Page context.");const t={...n,...e},{imageResourcesPath:r,linkService:i,onGetAnnotationsError:s,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:l,page:c,pdf:d,renderForms:h,rotate:f,scale:m=1}=t;lt(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),lt(c,"Attempted to load page annotations, but no page was specified."),lt(i,"Attempted to load page annotations, but no linkService was specified.");const[y,g]=xp(),{value:b,error:v}=y,x=_.useRef(null);qn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function w(){b&&o&&o(b)}function E(){v&&(qn(!1,v.toString()),s&&s(v))}_.useEffect(function(){g({type:"RESET"})},[g,c]),_.useEffect(function(){if(!c)return;const L=_v(c.getAnnotations()),O=L;return L.promise.then(F=>{g({type:"RESOLVE",value:F})}).catch(F=>{g({type:"REJECT",error:F})}),()=>{sd(O)}},[g,c]),_.useEffect(()=>{if(b!==void 0){if(b===!1){E();return}w()}},[b]);function T(){l&&l()}function k(R){qn(!1,`${R}`),a&&a(R)}const P=_.useMemo(()=>c.getViewport({scale:m,rotation:f}),[c,f,m]);return _.useEffect(function(){if(!d||!c||!i||!b)return;const{current:L}=x;if(!L)return;const O=P.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:L,l10n:null,linkService:i,page:c,structTreeLayer:null,viewport:O},I={annotations:b,annotationStorage:d.annotationStorage,div:L,imageResourcesPath:r,linkService:i,page:c,renderForms:h,viewport:O};L.innerHTML="";try{new BP(F).render(I),T()}catch(U){k(U)}return()=>{}},[b,r,i,c,d,h,P]),p.jsx("div",{className:Ap("react-pdf__Page__annotations","annotationLayer"),ref:x})}const BB={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},UX=/^H(\d+)$/;function VX(n){return n in BB}function GS(n){return"children"in n}function zB(n){return GS(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function HX(n){const e={};if(GS(n)){const{role:t}=n,r=t.match(UX);if(r)e.role="heading",e["aria-level"]=Number(r[1]);else if(VX(t)){const i=BB[t];i&&(e.role=i)}}return e}function $B(n){const e={};if(GS(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),zB(n)){const[t]=n.children;if(t){const r=$B(t);return{...e,...r}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function qX(n){return n?{...HX(n),...$B(n)}:null}function UB({className:n,node:e}){const t=_.useMemo(()=>qX(e),[e]),r=_.useMemo(()=>!GS(e)||zB(e)?null:e.children.map((i,s)=>p.jsx(UB,{node:i},s)),[e]);return p.jsx("span",{className:n,...t,children:r})}function GX(){const n=qS();lt(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[r,i]=xp(),{value:s,error:o}=r,{customTextRenderer:a,page:l}=n;function c(){s&&t&&t(s)}function d(){o&&(qn(!1,o.toString()),e&&e(o))}return _.useEffect(function(){i({type:"RESET"})},[i,l]),_.useEffect(function(){if(a||!l)return;const f=_v(l.getStructTree()),m=f;return f.promise.then(y=>{i({type:"RESOLVE",value:y})}).catch(y=>{i({type:"REJECT",error:y})}),()=>sd(m)},[a,l,i]),_.useEffect(()=>{if(s!==void 0){if(s===!1){d();return}c()}},[s]),s?p.jsx(UB,{className:"react-pdf__Page__structTree structTree",node:s}):null}const hM=Gs;function WX(n){const e=qS();lt(e,"Unable to find Page context.");const t={...e,...n},{_className:r,canvasBackground:i,devicePixelRatio:s=jX(),onRenderError:o,onRenderSuccess:a,page:l,renderForms:c,renderTextLayer:d,rotate:h,scale:f}=t,{canvasRef:m}=n;lt(l,"Attempted to render page canvas, but no page was specified.");const y=_.useRef(null);function g(){l&&a&&a(NC(l,f))}function b(E){LX(E)||(qn(!1,E.toString()),o&&o(E))}const v=_.useMemo(()=>l.getViewport({scale:f*s,rotation:h}),[s,l,h,f]),x=_.useMemo(()=>l.getViewport({scale:f,rotation:h}),[l,h,f]);_.useEffect(function(){if(!l)return;l.cleanup();const{current:T}=y;if(!T)return;T.width=v.width,T.height=v.height,T.style.width=`${Math.floor(x.width)}px`,T.style.height=`${Math.floor(x.height)}px`,T.style.visibility="hidden";const k={annotationMode:c?hM.ENABLE_FORMS:hM.ENABLE,canvas:T,canvasContext:T.getContext("2d",{alpha:!1}),viewport:v};i&&(k.background=i);const P=l.render(k),R=P;return P.promise.then(()=>{T.style.visibility="",g()}).catch(b),()=>sd(R)},[i,l,c,v,x]);const w=_.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return _.useEffect(()=>w,[w]),p.jsx("canvas",{className:`${r}__canvas`,dir:"ltr",ref:OB(m,y),style:{display:"block",userSelect:"none"},children:d?p.jsx(GX,{}):null})}function KX(n){return"str"in n}function XX(){const n=qS();lt(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:r,onRenderTextLayerError:i,onRenderTextLayerSuccess:s,page:o,pageIndex:a,pageNumber:l,rotate:c,scale:d}=n;lt(o,"Attempted to load page text content, but no page was specified.");const[h,f]=xp(),{value:m,error:y}=h,g=_.useRef(null);qn(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function b(){m&&r&&r(m)}function v(){y&&(qn(!1,y.toString()),t&&t(y))}_.useEffect(function(){f({type:"RESET"})},[o,f]),_.useEffect(function(){if(!o)return;const R=_v(o.getTextContent()),L=R;return R.promise.then(O=>{f({type:"RESOLVE",value:O})}).catch(O=>{f({type:"REJECT",error:O})}),()=>sd(L)},[o,f]),_.useEffect(()=>{if(m!==void 0){if(m===!1){v();return}b()}},[m]);const x=_.useCallback(()=>{s&&s()},[s]),w=_.useCallback(P=>{qn(!1,P.toString()),i&&i(P)},[i]);function E(){const P=g.current;P&&P.classList.add("selecting")}function T(){const P=g.current;P&&P.classList.remove("selecting")}const k=_.useMemo(()=>o.getViewport({scale:d,rotation:c}),[o,c,d]);return _.useLayoutEffect(function(){if(!o||!m)return;const{current:R}=g;if(!R)return;R.innerHTML="";const L=o.streamTextContent({includeMarkedContent:!0}),O={container:R,textContentSource:L,viewport:k},F=new Ag(O),I=F;return F.render().then(()=>{const U=document.createElement("div");U.className="endOfContent",R.append(U);const B=R.querySelectorAll('[role="presentation"]');if(e){let M=0;m.items.forEach((D,z)=>{if(!KX(D))return;const $=B[M];if(!$)return;const V=e({pageIndex:a,pageNumber:l,itemIndex:z,...D});$.innerHTML=V,M+=D.str&&D.hasEOL?2:1})}x()}).catch(w),()=>sd(I)},[e,w,x,o,a,l,m,k]),p.jsx("div",{className:Ap("react-pdf__Page__textContent","textLayer"),onMouseUp:T,onMouseDown:E,ref:g})}const fM=1;function YX(n){const t={...DB(),...n},{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:s,canvasRef:o,children:a,className:l,customRenderer:c,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",height:m,inputRef:y,loading:g="Loading page",noData:b="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:x,onGetStructTreeError:w,onGetStructTreeSuccess:E,onGetTextError:T,onGetTextSuccess:k,onLoadError:P,onLoadSuccess:R,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:O,onRenderError:F,onRenderSuccess:I,onRenderTextLayerError:U,onRenderTextLayerSuccess:B,pageIndex:M,pageNumber:D,pdf:z,registerPage:$,renderAnnotationLayer:V=!0,renderForms:N=!1,renderMode:W="canvas",renderTextLayer:G=!0,rotate:j,scale:ee=fM,unregisterPage:ye,width:de,...se}=t,[Ee,Fe]=xp(),{value:ve,error:Ue}=Ee,Dt=_.useRef(null);lt(z,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const Y=Zl(D)?D-1:M??null,te=D??(Zl(M)?M+1:null),fe=j??(ve?ve.rotate:null),pe=_.useMemo(()=>{if(!ve)return null;let H=1;const J=ee??fM;if(de||m){const ue=ve.getViewport({scale:1,rotation:fe});de?H=de/ue.width:m&&(H=m/ue.height)}return J*H},[m,ve,fe,ee,de]);_.useEffect(function(){return()=>{Zl(Y)&&i&&ye&&ye(Y)}},[i,z,Y,ye]);function Ot(){if(R){if(!ve||!pe)return;R(NC(ve,pe))}if(i&&$){if(!Zl(Y)||!Dt.current)return;$(Y,Dt.current)}}function jn(){Ue&&(qn(!1,Ue.toString()),P&&P(Ue))}_.useEffect(function(){Fe({type:"RESET"})},[Fe,z,Y]),_.useEffect(function(){if(!z||!te)return;const J=_v(z.getPage(te)),ue=J;return J.promise.then(q=>{Fe({type:"RESOLVE",value:q})}).catch(q=>{Fe({type:"REJECT",error:q})}),()=>sd(ue)},[Fe,z,te]),_.useEffect(()=>{if(ve!==void 0){if(ve===!1){jn();return}Ot()}},[ve,pe]);const Nr=_.useMemo(()=>Zl(Y)&&te&&Zl(fe)&&Zl(pe)?{_className:r,canvasBackground:s,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:v,onGetAnnotationsSuccess:x,onGetStructTreeError:w,onGetStructTreeSuccess:E,onGetTextError:T,onGetTextSuccess:k,onRenderAnnotationLayerError:L,onRenderAnnotationLayerSuccess:O,onRenderError:F,onRenderSuccess:I,onRenderTextLayerError:U,onRenderTextLayerSuccess:B,page:ve,pageIndex:Y,pageNumber:te,renderForms:N,renderTextLayer:G,rotate:fe,scale:pe}:null,[r,s,d,h,v,x,w,E,T,k,L,O,F,I,U,B,ve,Y,te,N,G,fe,pe]),da=_.useMemo(()=>jB(se,()=>ve&&(pe?NC(ve,pe):void 0)),[se,ve,pe]),Ii=`${Y}@${pe}/${fe}`;function oe(){switch(W){case"custom":return lt(c,'renderMode was set to "custom", but no customRenderer was passed.'),p.jsx(c,{},`${Ii}_custom`);case"none":return null;case"canvas":default:return p.jsx(WX,{canvasRef:o},`${Ii}_canvas`)}}function Ve(){return G?p.jsx(XX,{},`${Ii}_text`):null}function cr(){return V?p.jsx($X,{},`${Ii}_annotations`):null}function ha(){function H(ue){return!!(ue!=null&&ue.page)}if(!H(Nr))throw new Error("page is undefined");const J=typeof a=="function"?a(Nr):a;return p.jsxs(FB.Provider,{value:Nr,children:[oe(),Ve(),cr(),J]})}function Np(){return te?z===null||ve===void 0||ve===null?p.jsx(ih,{type:"loading",children:typeof g=="function"?g():g}):z===!1||ve===!1?p.jsx(ih,{type:"error",children:typeof f=="function"?f():f}):ha():p.jsx(ih,{type:"no-data",children:typeof b=="function"?b():b})}return p.jsx("div",{className:Ap(r,l),"data-page-number":te,ref:OB(y,Dt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${pe}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:s||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...da,children:Np()})}MX();Ci.workerSrc="pdf.worker.mjs";const QX={idle:"Para activar la experiencia WebAR necesitamos permiso para usar tu cmara.",requesting:"Solicitando acceso a la cmara",granted:"Cmara lista. Si no ves la previsualizacin, asegrate de apuntar a la taza.",error:"No pudimos usar la cmara de tu dispositivo."},JX=({onGranted:n,className:e="",copy:t={},variant:r="card"})=>{const[i,s]=_.useState("idle"),o=_.useMemo(()=>({...QX,...t}),[t]),a=async()=>{var c;if(!((c=navigator.mediaDevices)!=null&&c.getUserMedia)){s("error");return}s("requesting");try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(h=>h.stop()),s("granted"),n==null||n()}catch(d){console.error("[CameraPermissionPrompt] Error al iniciar cmara:",d),s("error")}},l=r==="overlay"?"w-full max-w-xs rounded-3xl border border-white/20 bg-black/70 p-6 text-center space-y-4 text-slate-200 backdrop-blur":"rounded-2xl border border-white/10 bg-black/40 p-4 space-y-3 text-slate-300/90";return p.jsxs("div",{className:`${l} ${e}`,children:[p.jsx("p",{className:"text-sm leading-relaxed",children:o[i]}),i!=="granted"?p.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold bg-purple-500/80 hover:bg-purple-500 transition text-white disabled:opacity-50",disabled:i==="requesting",children:i==="requesting"?"Abriendo cmara":"Activar cmara"}):null]})},ZX="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js";let f_=null;function eY(){var n,e;return typeof window>"u"?Promise.reject(new Error("MindAR solo est disponible en el navegador.")):(e=(n=window.MINDAR)==null?void 0:n.IMAGE)!=null&&e.MindARThree?Promise.resolve(window.MINDAR.IMAGE):(f_||(f_=ua(()=>import(ZX),[]).then(t=>{var r,i;if(t!=null&&t.MindARThree)return t;if((i=(r=window.MINDAR)==null?void 0:r.IMAGE)!=null&&i.MindARThree)return window.MINDAR.IMAGE;throw new Error("MindAR no se inicializ correctamente.")}).catch(t=>{throw console.error("[loadMindAR] Error al importar MindAR:",t),t})),f_)}const tY="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js";let p_=null;function nY(){return typeof window>"u"?Promise.reject(new Error("Three.js solo est disponible en el navegador.")):window.__THREE_INSTANCE__?Promise.resolve(window.__THREE_INSTANCE__):(p_||(p_=ua(()=>import(tY),[]).then(n=>(window.__THREE_INSTANCE__=n,n))),p_)}const rY=n=>{const e=new n.Group,t=new n.Mesh(new n.IcosahedronGeometry(.35,1),new n.MeshStandardMaterial({color:"#c084fc",emissive:"#6b21a8",metalness:.2,roughness:.35,transparent:!0,opacity:.9})),r=new n.Mesh(new n.TorusGeometry(.5,.035,14,48),new n.MeshBasicMaterial({color:"#e879f9",transparent:!0,opacity:.65}));r.rotation.x=Math.PI/2;const i=new n.Mesh(new n.SphereGeometry(.18,16,16),new n.MeshBasicMaterial({color:"#a5b4fc",transparent:!0,opacity:.35}));return e.add(t),e.add(r),e.add(i),e},iY=_.forwardRef(({targetSrc:n="/assets/targets.mind",isCameraReady:e=!1,className:t="",message:r="La taza te escucha.",overlay:i=null},s)=>{const o=_.useMemo(()=>{if(!n||/^(https?:)?\/\//i.test(n))return n;const y="/";if(n.startsWith(y))return n;const g=y.endsWith("/")?y:`${y}/`,b=n.replace(/^\/+/,"");return`${g}${b}`},[n]),a=_.useRef(null),l=_.useRef(null),[c,d]=_.useState("idle"),[h,f]=_.useState("");return _.useEffect(()=>{if(!e||!a.current||!o)return;let m=null,y=null,g=null,b=null,v=null;return(async()=>{d("loading"),f("");try{const w=await nY(),E=await eY();m=new E.MindARThree({container:a.current,imageTargetSrc:o,uiLoading:"no",uiError:"no",uiScanning:"no"});const{renderer:T,scene:k,camera:P}=m;y=T;const R=new w.HemisphereLight("#ffffff","#333344",1);k.add(R);const L=new w.DirectionalLight("#ffffff",.8);L.position.set(.5,1,.5),k.add(L);const O=m.addAnchor(0),{GLTFLoader:F}=await ua(()=>import("./GLTFLoader-ab5cd9e3.js"),[]),I=new F;let U=null;try{U=(await I.loadAsync("/webar/taza/gato-abstracto.glb")).scene}catch(D){console.warn("[MindARScene] No se pudo cargar /webar/taza/gato-abstracto.glb, usando modelo fallback.",D),U=rY(w)}v=U,v.scale.set(.6,.6,.6),v.position.set(0,.3,0),v.rotation.set(0,Math.PI,0),O.group.add(v),await m.start();const B=m.video;B&&!a.current.contains(B)&&(B.setAttribute("playsinline","true"),B.muted=!0,B.style.position="absolute",B.style.top="0",B.style.left="0",B.style.width="100%",B.style.height="100%",B.style.objectFit="cover",B.style.zIndex="0",B.style.display="block",a.current.appendChild(B),b=B,l.current=B),d("running");const M=new w.Clock;g=()=>{const D=M.getElapsedTime();if(v){v.rotation.y=D*.4;const z=.6+Math.sin(D*.8)*.03;v.scale.set(z,z,z)}y.render(k,P)},y.setAnimationLoop(g)}catch(w){console.error("[MindARScene] Error al iniciar AR:",w),f((w==null?void 0:w.message)??"No pudimos iniciar la experiencia AR."),d("error")}})(),()=>{var w;y&&g&&y.setAnimationLoop(null),m&&(m.stop(),(w=m.renderer)==null||w.dispose()),l.current=null,b&&b.parentElement===a.current&&a.current.removeChild(b)}},[e,o]),_.useEffect(()=>{},[r]),_.useImperativeHandle(s,()=>({async captureFrame(){const m=l.current;if(!m||m.videoWidth===0||m.videoHeight===0)return null;const y=document.createElement("canvas");return y.width=m.videoWidth,y.height=m.videoHeight,y.getContext("2d").drawImage(m,0,0,y.width,y.height),await new Promise(b=>{y.toBlob(v=>b(v),"image/jpeg",.95)})}})),p.jsxs("div",{className:`relative w-full bg-transparent rounded-3xl overflow-hidden ${t}`,"data-ar-container":"true",children:[p.jsx("div",{ref:a,className:"absolute inset-0"}),c==="idle"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 text-sm pointer-events-none",children:"Esperando a que actives la cmara"}),c==="loading"&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-200 text-sm bg-black/40 pointer-events-none",children:[p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-purple-300 border-t-transparent mb-3"}),"Preparando portal..."]}),c==="error"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center px-6 text-sm text-red-300 bg-black/70 pointer-events-none",children:h}),i&&p.jsx("div",{className:"absolute inset-0",children:typeof i=="function"?i():i})]})}),pM=["La taza te escucha."],mM=({targetSrc:n="/assets/targets.mind",phrases:e=pM,onExit:t})=>{const[r,i]=_.useState(!1),[s,o]=_.useState(0),a=_.useRef(null),l=_.useMemo(()=>Array.isArray(e)&&e.length>0?e:pM,[e]);_.useEffect(()=>{o(0)},[n]);const c=()=>{o(y=>(y+1)%l.length)},d=()=>{t==null||t()},h=_.useCallback(async()=>{var y,g;if(!((y=a.current)!=null&&y.captureFrame)){Me({description:"La cmara an no est lista para capturar."});return}try{const b=await a.current.captureFrame();if(!b){Me({description:"No pudimos obtener la captura. Intenta de nuevo."});return}const v=new File([b],"miniverso-taza.jpg",{type:"image/jpeg"}),x="#EstoNoEsUnaTaza  Comparte tu portal y etiqueta a @gatoencerradoai para aparecer en la galera.";if(navigator.share&&((g=navigator.canShare)!=null&&g.call(navigator,{files:[v]})))await navigator.share({files:[v],title:"Miniverso Taza",text:x});else{const w=URL.createObjectURL(b),E=document.createElement("a");E.href=w,E.download="miniverso-taza.jpg",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(w),Me({description:"Guardamos la captura. Comprtela desde tu galera con #EstoNoEsUnaTaza."})}}catch(b){console.error("[ARExperience] Error al compartir captura:",b),Me({description:"No pudimos compartir la captura. Intenta ms tarde."})}},[]),f="rounded-full bg-black/55 text-white p-3 shadow-lg border border-white/15 hover:bg-black/70 transition backdrop-blur",m=r?p.jsx("div",{className:"absolute inset-x-0 bottom-5 flex justify-center pointer-events-none",children:p.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[p.jsx("button",{type:"button",onClick:c,className:f,"aria-label":"Nueva frase",children:p.jsx(jV,{size:18})}),p.jsx("button",{type:"button",onClick:h,className:f,"aria-label":"Compartir captura",children:p.jsx(LV,{size:18})}),p.jsx("button",{type:"button",onClick:d,className:f,"aria-label":"Salir de AR",children:p.jsx(AS,{size:18})})]})}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-6",children:p.jsx(JX,{onGranted:()=>i(!0),variant:"overlay",copy:{idle:"Activa tu cmara para revelar la frase de tu taza."}})});return p.jsxs("section",{className:"space-y-4 -mx-4 sm:mx-0",children:[p.jsx(iY,{ref:a,targetSrc:n,isCameraReady:r,message:l[s],className:"w-full min-h-[75vh] sm:min-h-[80vh]",overlay:m}),p.jsx("p",{className:"text-sm text-slate-400/80 px-4 sm:px-0",children:"Si el marcador no se detecta de inmediato, ajusta la iluminacin y mantn la taza completa dentro del encuadre."})]})},sY=(n=[])=>{const e=[...n];for(let t=e.length-1;t>0;t-=1){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},m_=n=>n?String(n).toLowerCase().trim():"",uw=(n,e)=>{for(const t of e)if(n[t])return n[t];return""},g_=(n,e)=>({id:n.id??`audio-${e}`,label:n.label??n.title??"Pista",title:n.title??n.label??"",url_audio:uw(n,["url_audio","audio_url","audioUrl","url"])}),y_=(n,e)=>({id:n.id??`poema-${e}`,label:n.label??n.title??"Poema ritual",title:n.title??n.label??"",poem_text:n.poem_text??n.text??n.poemText??"",poem_lines:n.poem_lines??null}),v_=(n,e)=>({id:n.id??`video-${e}`,url_video:uw(n,["url_video","video_url","videoUrl","url"]),title:n.title??n.label??"Video ritual",artist:n.artist??n.author??"Residencia #GatoEncerrado"}),gM=(n=[])=>n.some(t=>t.id==="silencio")?n:[{id:"silencio",label:"Silencio",title:"Silencio",url_audio:""},...n],oY=(n=[])=>{var t;const e=n.find(r=>r.id==="silencio");return e?e.id:((t=n[0])==null?void 0:t.id)??""},aY=({fallbackVideoUrl:n,fallbackVideoTitle:e="Video ritual",fallbackVideoArtist:t="Residencia #GatoEncerrado",fallbackAudioOptions:r=[],fallbackPoemOptions:i=[],videoLimit:s=null,audioLimit:o=null,poemLimit:a=null,fragmentLines:l=4}={})=>{const[c,d]=_.useState(!0),[h,f]=_.useState(""),[m,y]=_.useState([]),[g,b]=_.useState(0),[v,x]=_.useState([]),[w,E]=_.useState([]);_.useState([]),_.useEffect(()=>{let L=!1;return(async()=>{d(!0),f("");try{const{data:F,error:I}=await pt.from("sonoro_media").select("*");if(L)return;if(I)throw I;const U=F??[],B=U.filter(N=>{const W=m_(N.kind||N.type),G=uw(N,["url_video","video_url","videoUrl","url"]);return W==="video"&&!!G}).map(v_),M=U.filter(N=>{const W=m_(N.kind||N.type),G=uw(N,["url_audio","audio_url","audioUrl","url"]);return W==="audio"&&!!G}).map(g_),D=U.filter(N=>{const W=m_(N.kind||N.type),G=typeof N.poem_text=="string"&&N.poem_text.trim()!==""||Array.isArray(N.poem_lines)&&N.poem_lines.length>0||typeof N.text=="string"&&N.text.trim()!==""||typeof N.poemText=="string"&&N.poemText.trim()!=="";return(W==="poema"||W==="poem"||W==="poetry")&&G}).map((N,W)=>{const G=y_(N,W);if(!G.poem_lines&&G.poem_text){const j=G.poem_text.split(`
`).map(ee=>ee.trim()).filter(Boolean);G.poem_lines=j.slice(0,l)}return G.poem_lines&&l&&(G.poem_lines=G.poem_lines.slice(0,l)),G}),z=B.length>0?sY(s?B.slice(0,s):B):n?[v_({url_video:n,title:e,artist:t},0)]:[],$=gM(M.length>0?o?M.slice(0,o):M:(r??[]).map(g_)),V=D.length>0?a?D.slice(0,a):D:(i??[]).map(y_);y(z),b(0),x($),E(V),B.length===0&&M.length===0&&D.length===0&&f("Cargando con datos de respaldo. No hay registros recientes en sonoro_media.")}catch(F){const I=n?[v_({url_video:n,title:e,artist:t},0)]:[],U=gM((r??[]).map(g_)),B=(i??[]).map(y_);y(I),b(0),x(U),E(B),f((F==null?void 0:F.message)??"No pudimos cargar el miniverso sonoro.")}finally{L||d(!1)}})(),()=>{L=!0}},[r,i,t,e,n]);const T=_.useMemo(()=>m.length>0?m[g%m.length]:null,[m,g]),k=_.useMemo(()=>oY(v),[v]),P=_.useMemo(()=>"",[w]);return{videoQueue:m,currentVideoIndex:g,currentVideo:T,audioOptions:v,poemOptions:w,initialAudioId:k,initialPoemId:P,isLoading:c,errorMessage:h,nextVideo:()=>{b(L=>m.length===0?L:(L+1)%m.length)}}};const x_=[{id:"neblina",label:"Modo",short:"Neblina-Suave",copy:"Neblina suave que difumina los bordes del sueo."},{id:"sombras",label:"Modo",short:"Deep-Shadow",copy:"Contrastes ms profundos, como si todo ocurriera a media luz."},{id:"respiracion",label:"Modo",short:"Pulse-Bloom",copy:"La luz late con la escena, como si el sueo respirara."},{id:"umbral",label:"Modo",short:"Umbral-Deep",copy:"Un tnel suave y profundo que suspende la temporalidad."}];function yM({videoUrl:n,videoTitle:e="Video ritual",videoArtist:t="Residencia #GatoEncerrado",audioOptions:r=[],poemOptions:i=[],initialAudioId:s="",initialPoemId:o="",isLoading:a=!1,errorMessage:l,showHeader:c=!0,showCTA:d=!0,onEnterExperience:h,experienceHref:f="/miniverso-sonoro"}){const{currentVideo:m,audioOptions:y,poemOptions:g,initialAudioId:b,initialPoemId:v,videoQueue:x,isLoading:w,errorMessage:E,nextVideo:T}=aY({fallbackVideoUrl:n,fallbackVideoTitle:e,fallbackVideoArtist:t,fallbackAudioOptions:r,fallbackPoemOptions:i}),[k,P]=_.useState("neblina"),[R,L]=_.useState(!1),[O,F]=_.useState(b||s||""),[I,U]=_.useState(o||v||""),[B,M]=_.useState([]),[D,z]=_.useState(null),[$,V]=_.useState(!1),[N,W]=_.useState(!1),G=!!O&&!!I,j=_.useRef(null),ee=_.useRef(null),ye=_.useRef(0),de=w||a,se=_.useMemo(()=>y.find(oe=>oe.id===O),[y,O]),Ee=_.useMemo(()=>g.find(oe=>oe.id===I),[g,I]),Fe=(Ee==null?void 0:Ee.poem_text)||(Ee==null?void 0:Ee.text)||"",ve=_.useMemo(()=>x_.find(oe=>oe.id===k)||x_[0],[k]);_.useEffect(()=>{var oe;if(!O&&b){F(b);return}y.find(Ve=>Ve.id===O)||F(((oe=y[0])==null?void 0:oe.id)||b||"")},[y,b,O]),_.useEffect(()=>{if(!I&&v){U(v);return}I!==""&&(g.find(oe=>oe.id===I)||U(""))},[g,v,I]),_.useEffect(()=>{if(!Ee){M([]),z(0);return}const oe=Ee.poem_lines&&Array.isArray(Ee.poem_lines)&&Ee.poem_lines.length>0?Ee.poem_lines:typeof Fe=="string"?Fe.split(`
`).map(Ve=>Ve.trim()).filter(Boolean):[];M(oe),z(oe.length>0?0:null),V(oe.length>0)},[Ee,Fe]),_.useEffect(()=>{if(!B||B.length===0||D===null)return;const oe=D===B.length-1,Ve=setTimeout(()=>{oe?V(!1):z(cr=>cr===null?0:cr+1)},1500);return()=>clearTimeout(Ve)},[B,D,N]),_.useEffect(()=>{if(typeof window>"u")return;const oe=window.matchMedia("(max-width: 768px)"),Ve=()=>L(oe.matches);return Ve(),oe.addEventListener("change",Ve),()=>oe.removeEventListener("change",Ve)},[]),_.useEffect(()=>{if(!(typeof document>"u"))return N?(document.body.classList.add("overflow-hidden"),typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"})):document.body.classList.remove("overflow-hidden"),()=>document.body.classList.remove("overflow-hidden")},[N]),_.useEffect(()=>{if(R&&!N)return;const oe=j.current;!oe||!(m!=null&&m.url_video)||oe.play().catch(()=>{})},[R,m]),_.useEffect(()=>{if(!j.current)return;if(R&&!N){j.current.pause();return}const oe=j.current,Ve=oe.play();Ve&&Ve.catch&&Ve.catch(()=>{setTimeout(()=>oe.play().catch(()=>{}),250)})},[m==null?void 0:m.url_video,N,R]),_.useEffect(()=>{ee.current&&(N&&se&&se.url_audio?ee.current.play().catch(()=>{}):ee.current.pause())},[se,N]);const Ue=oe=>{F(oe.target.value);const Ve=ee.current;Ve&&Ve.play().catch(()=>{})},Dt=oe=>{U(oe.target.value)},Y=()=>{if(x.length>1){T();return}const oe=j.current;oe&&(oe.currentTime=0,oe.play().catch(()=>{}))},te=()=>{typeof window<"u"&&(ye.current=window.scrollY||0),W(!0),h&&h()},fe=()=>{W(!1),typeof window<"u"&&window.scrollTo({top:ye.current||0,behavior:"auto"})};_.useEffect(()=>{const oe=j.current,Ve=ee.current;if(N){if(oe){try{oe.currentTime=0}catch{}oe.play().catch(()=>{})}if(Ve&&(se!=null&&se.url_audio)){try{Ve.currentTime=0}catch{}Ve.play().catch(()=>{})}B.length>0&&(z(0),V(!0))}else oe&&R&&oe.pause(),Ve&&Ve.pause(),V(!1),z(B.length>0?0:null)},[N,R,B.length,se==null?void 0:se.url_audio]);const pe=(oe="")=>p.jsxs("div",{className:`sonoro-preview-video-card mode-${k} ${oe}`,children:[p.jsxs("div",{className:"sonoro-preview-hud",children:[p.jsxs("div",{children:[p.jsx("p",{className:"sonoro-preview-hud__kicker",children:"Cmara de resonancia"}),p.jsx("p",{className:"sonoro-preview-hud__title",children:(m==null?void 0:m.title)||e||"Video ritual"}),p.jsx("p",{className:"sonoro-preview-hud__artist",children:(m==null?void 0:m.artist)||t||"Residencia #GatoEncerrado"})]}),p.jsxs("div",{className:"sonoro-preview-hud__mode",children:[p.jsx("span",{className:"sonoro-preview-pill",children:ve.label}),p.jsx("small",{children:ve.short})]})]}),p.jsxs("div",{className:"sonoro-ambient",children:[p.jsxs("div",{className:"sonoro-ambient-video",children:[m!=null&&m.url_video?p.jsx("video",{ref:j,className:"sonoro-preview-video",src:m==null?void 0:m.url_video,muted:!0,autoPlay:!R||N,playsInline:!0,loop:!R||N,onEnded:Y},(m==null?void 0:m.id)||(m==null?void 0:m.url_video)):p.jsx("div",{className:"sonoro-preview-video-placeholder",children:p.jsx("p",{children:de?"Cargando el archivo sonoro":"Pronto se abrir un video ritual."})}),p.jsx("div",{className:`dream-overlay dream-${k}`,"aria-hidden":"true"})]}),p.jsx("div",{className:"sonoro-ambient-fog","aria-hidden":"true"}),p.jsx("div",{className:"sonoro-ambient-shadow","aria-hidden":"true"}),p.jsx("div",{className:"sonoro-ambient-breath","aria-hidden":"true"}),p.jsx("div",{className:"sonoro-ambient-grain","aria-hidden":"true"}),p.jsxs("div",{className:"sonoro-video-overlay","aria-hidden":"true",children:[p.jsx("span",{className:"sonoro-video-overlay__layer layer-1"}),p.jsx("span",{className:"sonoro-video-overlay__layer layer-2"}),p.jsx("span",{className:"sonoro-video-overlay__layer layer-3"}),p.jsx("span",{className:"sonoro-video-overlay__layer layer-4"})]})]}),((B==null?void 0:B.length)||Fe)&&p.jsx("div",{className:"sonoro-preview-poem-overlay poem-overlay",children:B!=null&&B.length?B.map((Ve,cr)=>p.jsx("p",{className:`poem-line ${cr===D&&$?"is-visible":""}`,style:{zIndex:cr===D?2:1},children:Ve},`${(Ee==null?void 0:Ee.id)||"poema"}-${cr}`)):p.jsx("p",{className:"poem-line is-visible",children:Fe})})]}),Ot=p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"sonoro-preview-control-group sonoro-preview-control-group--modes",children:[p.jsx("p",{className:"sonoro-preview-control-label",children:"Modos de sueo"}),p.jsx("div",{className:"sonoro-preview-mode-pills",children:x_.map(oe=>p.jsxs("button",{type:"button",className:`sonoro-preview-mode-pill ${k===oe.id?"is-active":""}`,onClick:()=>P(oe.id),"aria-pressed":k===oe.id,children:[p.jsxs("div",{className:"sonoro-preview-mode-pill__header",children:[p.jsx("span",{children:oe.label}),p.jsx("small",{children:oe.short})]}),p.jsx("p",{children:oe.copy})]},oe.id))})]}),p.jsxs("div",{className:"sonoro-preview-control-group",children:[p.jsx("p",{className:"sonoro-preview-control-label",children:"Elige la msica"}),p.jsx("select",{value:(se==null?void 0:se.id)??"",onChange:Ue,className:"sonoro-preview-select",children:y.map(oe=>p.jsx("option",{value:oe.id,children:oe.label||oe.title},oe.id))})]}),p.jsxs("div",{className:"sonoro-preview-control-group",children:[p.jsx("p",{className:"sonoro-preview-control-label",children:"Elige un poema"}),p.jsxs("select",{value:(Ee==null?void 0:Ee.id)??"",onChange:Dt,className:"sonoro-preview-select",children:[p.jsx("option",{value:"",children:"Ninguno"}),g.map(oe=>p.jsx("option",{value:oe.id,children:oe.label||oe.title||"Poema ritual"},oe.id))]})]})]}),jn=p.jsxs("div",{className:`sonoro-preview-layout ${R?"is-mobile":"is-desktop"}`,children:[p.jsx("aside",{className:"sonoro-preview-controls",children:Ot}),p.jsxs("section",{className:"sonoro-preview-stage",children:[pe(),d&&p.jsx("button",{type:"button",className:"sonoro-preview-cta",onClick:te,disabled:!G,children:"Entrar a la cmara de resonancia"})]})]}),Nr=p.jsxs("div",{className:"sonoro-preview-layout is-desktop",children:[p.jsx("aside",{className:"sonoro-preview-controls",children:Ot}),p.jsxs("section",{className:"sonoro-preview-stage",children:[pe(),d&&p.jsx("button",{type:"button",className:"sonoro-preview-cta",onClick:te,disabled:!G,children:"Entrar a la cmara de resonancia"})]})]}),da=typeof document<"u"&&N?av.createPortal(p.jsxs("div",{className:"sonoro-fullscreen-layer",children:[p.jsxs("div",{className:"sonoro-fullscreen-header",children:[p.jsx("p",{className:"sonoro-fullscreen-kicker",children:"Cmara de resonancia"}),p.jsx("button",{type:"button",className:"sonoro-fullscreen-close",onClick:fe,children:"Cerrar experiencia"})]}),p.jsx("div",{className:"sonoro-fullscreen-body",children:pe("is-full-experience")})]}),document.body):null,Ii=p.jsxs(p.Fragment,{children:[c&&p.jsxs("div",{className:"sonoro-preview-header",children:[p.jsxs("div",{className:"sonoro-preview-header__top",children:[p.jsx("p",{className:"sonoro-preview-small-title",children:"Miniverso Sonoro  Suea en Tres Capas"}),p.jsx("span",{className:"sonoro-preview-tag",children:"#GatoEncerrado"})]}),p.jsx("h2",{className:"sonoro-preview-title",children:"Miniverso Sonoro"}),p.jsx("p",{className:"sonoro-preview-subtitle",children:"Una cmara de resonancia en miniatura: el video corre solo, t eliges la msica y el poema."})]}),R?jn:Nr]});return p.jsxs("div",{className:`sonoro-preview root-mode-${k}`,children:[!N&&Ii,da,p.jsx("audio",{ref:ee,src:(se==null?void 0:se.url_audio)||(se==null?void 0:se.url)||void 0,loop:!0}),(E||l)&&p.jsx("p",{className:"sonoro-preview-error",children:E||l})]})}function lY(){const[n,e]=_.useState("segment"),[t,r]=_.useState([]),[i,s]=_.useState(!1),[o,a]=_.useState(null),[l,c]=_.useState(null),[d,h]=_.useState(""),[f,m]=_.useState(!1),[y,g]=_.useState(0),b=async()=>{try{const T=await(await fetch("/data/novela-preview.json")).json();r(T.segments||[])}catch(E){console.error("Error cargando segmentos:",E)}},v=(E,T)=>{y>=4||(a(E),c(T),h(""),s(!0))},x=()=>{s(!1),a(null),c(null),h("")};return{mode:n,setMode:e,segments:t,loadSegments:b,isModalOpen:i,openModal:v,closeModal:x,activeSegment:o,activePlan:l,reflection:d,setReflection:h,loading:f,reflectionCount:y,sendReflection:async()=>{if(d.trim()){m(!0);try{const{data:E,error:T}=await fetch("/functions/v1/send-blog-reflection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({segment_id:o.id,plan:l,reflection:d,author:"Invitado"})});T&&console.error("Supabase error:",T),g(k=>Math.min(k+1,4)),alert("Reflexin enviada."),x()}catch(E){console.error("Error enviando reflexin:",E)}m(!1)}}}}function cY(){const[n,e]=_.useState(!0),t=_.useRef(null);return _.useEffect(()=>{if(typeof window>"u"||!("ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0))return;const i=()=>{e(!1),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{e(!0)},500)};return window.addEventListener("touchstart",i,{passive:!0}),window.addEventListener("touchmove",i,{passive:!0}),()=>{window.removeEventListener("touchstart",i),window.removeEventListener("touchmove",i),t.current&&clearTimeout(t.current)}},[]),n}function uY({isOpen:n,onClose:e,segment:t,plan:r,reflection:i,setReflection:s,onSubmit:o,loading:a}){var c;if(_.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[n]),!n)return null;const l={academic:"Plano Acadmico",psychological:"Plano Psicolgico",narrative:"Plano Narrativo",theatrical:"Plano Teatral"};return p.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/80 backdrop-blur-3xl px-4",children:p.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-purple-400/40 bg-black/90 p-6 shadow-[0_30px_80px_rgba(15,23,42,0.75)]",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300/80",children:"Plano"}),p.jsx("h2",{className:"text-2xl font-semibold text-white",children:l[r]??"Plano"})]}),p.jsx("button",{onClick:e,className:"text-sm text-slate-300 hover:text-white",children:"Cerrar "})]}),p.jsx("p",{className:"text-sm text-slate-300/80 mb-6 leading-relaxed",children:(c=t==null?void 0:t.questions)==null?void 0:c[r]}),p.jsx("textarea",{className:"w-full min-h-[160px] rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-100 outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500/40 transition",placeholder:"Escribe tu reflexin aqu",value:i,onChange:d=>s(d.target.value)}),p.jsxs("div",{className:"mt-6 flex items-center justify-between gap-4",children:[p.jsx("button",{onClick:e,className:"text-sm uppercase tracking-[0.4em] text-slate-400 hover:text-white",children:"Cancelar"}),p.jsx("button",{onClick:o,disabled:a,className:"rounded-full bg-gradient-to-r from-purple-600/90 to-indigo-600/80 px-6 py-3 text-sm font-semibold text-white transition hover:from-purple-500/90 hover:to-indigo-500/90 disabled:opacity-60",children:a?"Enviando":"Enviar reflexin"})]})]})})}const dY=[{plan:"academic",label:"Acadmico",Icon:zT},{plan:"psychological",label:"Psicolgico",Icon:wV},{plan:"narrative",label:"Narrativo",Icon:SS},{plan:"theatrical",label:"Teatral",Icon:DV}];function hY({iconsVisible:n=!0,onSelect:e,disabled:t=!1,isTouchDevice:r=!1,readingMode:i="dark"}){return p.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:dY.map(({plan:s,label:o,Icon:a})=>{const l=r?n?"opacity-100":"opacity-50":"opacity-0 group-hover:opacity-100",c=i==="premium"?"text-[#3b2a1f]":"text-white",d=i==="premium"?"stroke-[#3b2a1f]":"stroke-current";return p.jsxs("button",{type:"button",onClick:()=>!t&&e(s),disabled:t,className:`group flex flex-col items-center justify-center rounded-full border border-white/10 bg-white/5 py-3 text-[0.6rem] uppercase tracking-[0.4em] text-white transition-opacity duration-300 ${l} ${t?"cursor-not-allowed opacity-40":`hover:border-purple-400 hover:text-white ${c}`}`,"aria-label":`Abrir plano ${o}`,children:[p.jsx(a,{size:18,className:d}),p.jsx("span",{className:`mt-1 ${c}`,children:o})]},s)})})}function fY(){const{segments:n,loadSegments:e,openModal:t,activeSegment:r,activePlan:i,reflection:s,setReflection:o,isModalOpen:a,closeModal:l,sendReflection:c,loading:d,reflectionCount:h}=lY(),f=cY(),m=h>=4,[y,g]=_.useState(!1),[b,v]=_.useState("dark"),x={dark:"bg-black/40 border-white/10 text-slate-100",premium:"bg-[#f7f2e8] border-[#c4bdae] text-[#3b2a1f] shadow-[0_20px_35px_rgba(0,0,0,0.15)]"},w={dark:"text-slate-100",premium:"text-[#3b2a1f]"},E={dark:'"Literata", "Times New Roman", serif',premium:'"Cormorant Garamond", "Palatino Linotype", serif'};return _.useEffect(()=>{e()},[]),_.useEffect(()=>{if(typeof window>"u")return;const T="ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0;g(T)},[]),p.jsxs("div",{className:"w-full min-h-screen px-4 py-8 text-slate-100",children:[p.jsxs("div",{className:"mx-auto flex w-full max-w-3xl flex-col items-center gap-6",children:[p.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:p.jsx("div",{className:"flex gap-3 items-center",children:["dark","premium"].map(T=>p.jsx("button",{onClick:()=>v(T),className:`w-8 h-8 rounded-full border transition ${b===T?"border-white/90 bg-white/80 shadow-lg":"border-white/30 bg-black/20"}`,"aria-label":`Modo ${T}`,children:p.jsx("span",{className:"hidden",children:T})},T))})}),m&&p.jsx("div",{className:"w-full max-w-[650px] rounded-2xl border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-center text-sm text-rose-200 shadow-lg shadow-rose-900/30",children:"Has alcanzado el lmite de reflexiones del preview."}),p.jsx("div",{className:"space-y-6",children:n.map(T=>p.jsxs("div",{className:`group mx-auto max-w-[650px] space-y-6 rounded-3xl border px-8 py-10 backdrop-blur-md shadow-[0_20px_50px_rgba(0,0,0,0.45)] transition-colors duration-500 ${x[b]}`,children:[p.jsx("p",{className:`text-base leading-relaxed ${w[b]}`,style:{fontFamily:E[b],lineHeight:1.8},children:T.text}),p.jsx(hY,{onSelect:k=>t(T,k),iconsVisible:f,isTouchDevice:y,disabled:m,readingMode:b})]},T.id))}),")}"]}),p.jsx(uY,{isOpen:a,onClose:l,segment:r,plan:i,reflection:s,setReflection:o,loading:d,onSubmit:c})]})}async function pY({showcaseId:n,user:e}){if(!n)return{success:!1,error:new Error("Falta el identificador del showcase")};const t={showcase_id:n,user_id:(e==null?void 0:e.id)??null,user_email:(e==null?void 0:e.email)??null,metadata:{recorded_at:new Date().toISOString()}},{error:r}=await pt.from("showcase_likes").insert(t);return{success:!r,error:r}}function mY(){const[n,e]=_.useState(!1),[t,r]=_.useState(()=>new Set);_.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const a=window.matchMedia("(max-width: 768px)"),l=c=>e(c.matches);return l(a),typeof a.addEventListener=="function"?(a.addEventListener("change",l),()=>a.removeEventListener("change",l)):(a.addListener(l),()=>a.removeListener(l))},[]),_.useEffect(()=>{n||r(new Set)},[n]);const i=_.useCallback(a=>{a&&r(l=>{if(l.has(a))return l;const c=new Set(l);return c.add(a),c})},[]),s=_.useCallback(a=>!n||!a?!0:t.has(a),[t,n]),o=_.useCallback(async(a,l)=>{if(!n)return;a.preventDefault(),a.stopPropagation();const c=a.currentTarget;if(!(c instanceof HTMLVideoElement))return;const d=async()=>{(c.paused||c.readyState<2)&&await c.play()};if(typeof document<"u"&&"pictureInPictureEnabled"in document&&document.pictureInPictureEnabled&&typeof c.requestPictureInPicture=="function"&&!c.disablePictureInPicture)try{await d(),await c.requestPictureInPicture();return}catch{}const f=c.requestFullscreen||c.webkitEnterFullscreen||c.webkitRequestFullscreen||c.mozRequestFullScreen||c.msRequestFullscreen;if(f)try{await d(),await f.call(c);return}catch{}i(l),c.controls=!0;try{await d()}catch{}},[i,n]);return{isMobileViewport:n,canUseInlinePlayback:s,requestMobileVideoPresentation:o}}Ci.workerSrc=`https://unpkg.com/pdfjs-dist@${DP}/build/pdf.worker.min.mjs`;const em={miniversos:{label:"Miniverso Trgico",type:"tragedia",intro:"Aqu nace la obra dentro de la obra. El gato encerrado de Es un gato encerrado.",cartaTitle:"#VibracinEscnica",notaAutoral:`De la escena brot el universo:
voz, trance y cuerpo
abriendo portales.`,narrative:["En este miniverso puedes entrar al mundo de Silvestre: escuchar sus ecos, leer a sus fantasmas o conversar directamente con su trasunto, el Payasito Tiste, en un chat que habita la herida."],ctaLabel:"Hablar con Silvestre",ctaDescription:"Activa el vnculo con la voz que an no se apaga. Aqu es donde Silvestre o lo que queda de l te responde."},copycats:{label:"Miniverso Cine",type:"cinema",intro:"El cine dentro de #GatoEncerrado es un laboratorio donde la realidad se revela por roce, no por imitacin. Obra, proceso y mirada se mezclan hasta volver indistinguibles sus fronteras.",promise:"Aqu no solo ves cine: te invitamos a entrar a su laboratorio.",theme:"La doble vida de una imagen: aquello que se ve y aquello que tiembla detrs. CopyCats (farsa lcida) y Quirn (herida ntima) responden a la misma pregunta en dos lenguajes.",tone:["Premiere ntima","Laboratorio abierto","Cine con memoria"],cartaTitle:"#LuzQueHiere",copycats:{title:"CopyCats",description:"Un juego serio sobre cmo nos repetimos sin notarlo. Mira su bitcora creativa y descubre cmo surgi esta pieza.",microcopy:"CopyCats es un ensayo cinematogrfico sobre el desgaste creativo: un making-of que piensa el acto de crear mientras sucede. Se detiene en el burnout, en la autocrtica feroz, y en ese desprecio silencioso que a veces sentimos por la obra justo cuando ms nos necesita.",assets:[{id:"copycats-carta",label:"Carta audiovisual (4:02)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/ensayos/La%20Cadena%20del%20Gesto.mp4"},{id:"copycats-ensayo",label:"La Cadena del Gesto (4:28)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/ensayos/La%20Cadena%20del%20Gesto.mp4"}],tags:["Cine-ensayo","Identidad Digital","Archivo autoficcional"]},quiron:{title:"Quirn",description:"Mira el teaser y los stills de rodaje de un cortometraje que busca la vulnerabilidad donde casi no se nota.",microcopy:"Quirn explora un silencio heredado: una familia atravesada por el suicidio de un padre y un abuelo. La pelcula nace para darle lenguaje a ese dolor y acercarnos a lo que normalmente se calla.",teaser:{id:"quiron-teaser",label:"Teaser oficial",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/Quiron.mp4"},stills:[{id:"quiron-still-01",label:"Still 01  Primera llamada",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/stills%20-%20quiron/rodaje%201.jpg"},{id:"quiron-still-02",label:"Still 02  Lectura en el set",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/stills%20-%20quiron/IMG_2290.JPG"},{id:"quiron-still-03",label:"Still 03  Seales del da",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/stills%20-%20quiron/IMG_2382.JPG"}]},collaborators:[{id:"viviana-gonzalez",name:"Viviana Gonzlez",role:"Direccin de foto y registro creativo",bio:"Cineasta y documentalista. Su cmara captura el pulso emocional de CopyCats y Quirn.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/placeholder-colaboradores.jpg",anchor:"#team"},{id:"diego-madera",name:"Diego Madera",role:"Compositor  Tema musical",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png",anchor:"#team"},{id:"maria-diana-laura-rodriguez",name:"Mara Diana Laura Rodriguez",role:"Coordinadora",bio:"Productora en lnea que facilita procesos con una disponibilidad impecable.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/placeholder-produccion.jpg",anchor:"#team"}],bridge:{title:"Una lnea que vibra entre ambas historias",description:"CopyCats y Quirn dialogan desde extremos distintos del mismo territorio. Una filma el desgaste creativo y la fractura del proceso;la otra abre una confesin ntima que decide hablar del suicidio sin rodeos.",note:"Dos pelculas, dos vulnerabilidades distintas, un mismo impulso: usar el arte para tocar aquello que no queremos decir en voz alta y encontrar otra manera de contarlo."},screening:{title:"Screening privado  Marzo  Cineteca CECUT",description:"nete al universo transmedia y asegura tu acceso al primer screening doble de CopyCats + Quirn, con conservatorio del equipo.",cta:"Quiero ser parte del screening",footnote:"El cine es otro modo de entrar al encierro. Acompanos en marzo para ver ambas pelculas antes que nadie."},notaAutoral:`Cuando la escena no alcanza,
la cmara recuerda
Quirn, CopyCats,
mismo espacio en otra luz.`},lataza:{label:"EstoNoEsUnaTaza",type:"object-webar",slug:"taza-que-habla",subtitle:"Esta no es una taza. Es un boleto.",intro:"Un objeto cotidiano convertido en smbolo de comunin. Cada taza est vinculada a un sentimiento. Cada sentimiento, a una historia personal.",note:"Apunta tu cmara a la taza. La pista aparecer.",ctaLabel:"Probar activacin WebAR",ctaLink:"/webar/taza/index.html",ctaMessage:"Cuando liberes la activacin WebAR, descubrirs la pista que le corresponde a tu taza.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/taza_h.png",sentiments:["Es tu manera de apoyar la causa social de Gato Encerrado."],phrases:["La taza te habla."],instructions:["Permite el acceso a tu cmara para iniciar.","Coloca la taza completa en cuadro, con buena iluminacin.","Mantn el marcador visible hasta que aparezca la orbe."],comments:[{id:"la-taza-comment-1",quote:"La taza me mostr una frase que me persigui toda la semana.",author:"Usuario annimo"},{id:"la-taza-comment-2",quote:"No entend nada hasta que le agarr el modo.",author:"Sofa B."}],cartaTitle:"#EstoNoEsUnaTaza",notaAutoral:`Una taza que escucha.
Un marcador que mira.
Lo cotidiano tambin es ritual.`},miniversoNovela:{label:"Miniverso Novela",type:"blog-series",slug:null,intro:"Aqu se cruzan la autoficcin, la novela grfica y las vidas que an no caben en escena. Fragmentos, procesos y pistas que solo existen cuando alguien las lee.",cartaTitle:"#PginaViva",notaAutoral:`La palabra devolvi lo que el gato se trag:
Mi Gato Encerrado
se cuenta a s misma.`,entries:[{id:"compra-libro",title:"Edicin fsica",description:"La novela completa en su versin impresa. Incluye QR secreto.",image:"/assets/edicion-fisica.png",type:"purchase-link",url:"/comprar-novela"},{id:"novel-apps",title:"Activa tu novela",description:"Cada formato tiene su propia app interactiva. La novela de autoficcin ya se puede activar; el cmic transmedia abre pronto su lector con pistas y capas expandidas.",type:"novel-apps",apps:[{id:"autoficcion-app",name:"Lector interactivo",description:"Lee los primeros fragmentos de la novela y desbloquea preguntas guiadas en cuatro planos de lectura: acadmico, psicolgico, narrativo y teatral.",snippet:{tagline:"Contraportada transmedia",text:"Al escanear el QR de tu ejemplar se desbloquean lecturas personalizadas. Aqu puedes probar una versin de inicio.",sideLayout:!0},ctaLabel:"Leer fragmentos",ctaAction:"openAutoficcionPreview"}]},{id:"comentarios-lectores",title:"Conversaciones con lectores",type:"quotes",quotes:[{quote:"No saba que un libro poda hablarme a mitad de la pgina.",author:"Lectora annima"}]}],ctaLabel:"Leer los primeros fragmentos"},miniversoSonoro:{label:"Miniverso Sonoro  Suea en Tres Capas",type:"audio-dream",intro:"Este miniverso mezcla imgenes errantes, pistas sonoras y palabras mviles para que crees tu propia atmsfera. Solo entra, prende un video, ponle la msica que quieras, elige un poema y deja que la combinacin te sorprenda.",highlights:["Video que fluye solo.","Msica que t eliges.","Poemas que respiran en pantalla."],exploration:["El video corre por su cuenta  cambia con cada visita.","T eliges la msica  ajusta el nimo del sueo.","Escoge un poema  y observa cmo se desliza mientras todo ocurre."],closing:["Cada combinacin abre un sueo distinto.","Entra y crea el tuyo."],videoUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/videos-v/Vacio.mov",musicOptions:[{id:"silencio",label:"Silencio",url:""},{id:"ensayo-abierto",label:"Ensayo Abierto (pista)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/audio/cat_theme.m4a"}],poems:[{id:"pulmon",label:"Poema 1  Pulmn",text:"La noche se abre como un pulmn cansado."},{id:"cuerpo",label:"Poema 2  Cuerpo",text:"Lo que cae del sueo tambin cae del cuerpo."}],cartaTitle:"#SueoEnCapas",notaAutoral:`suea una imagen.
Elige un pulso.
Deja que el poema respire por ti.`},miniversoGrafico:{label:"Miniverso Grfico",type:"graphic-lab",intro:"Coleccin viva de exploraciones visuales: cmics en curso, vietas interactivas, posters simblicos, caricaturas conceptuales, murales colaborativos y avances con IA/tcnicas mixtas.",cartaTitle:"#FronteraAbierta",notaAutoral:"Lo grfico como portal emocional. Cada pieza es un disparo breve a la herida o a la curiosidad, nunca un catlogo plano.",collection:["Cmics en curso y por venir","Vietas interactivas","Posters simblicos","Caricaturas conceptuales","Murales colaborativos","Avances con IA y tcnicas mixtas"],swipe:{title:"Swipe narrativo (modo vieta)",description:"Haz scroll hacia arriba para navegar por tarjetas verticales.",steps:["Cada tarjeta revela una escena, una decisin o una herida.","Desliza y elige: quieres ver lo que pasa o lo que duele?"]},upcoming:{title:"Prximamente  Lector Visual Interactivo",points:["Escanea la edicin impresa o digital.","Desbloquea vietas ocultas.","Escucha dilogos no escuchados.","Activa capas simblicas."]},quote:{text:"El cmic me habl justo cuando dudaba de seguir leyendo.",author:"Lectora annima"},ctas:{primary:"Explora el miniverso grfico",secondary:"Smate a la residencia grfica"}}},ec=({showcaseId:n,title:e,description:t,buttonLabel:r})=>{const{user:i}=gv(),[s,o]=_.useState("idle"),a=_.useCallback(async()=>{if(s==="loading")return;o("loading");const{success:l,error:c}=await pY({showcaseId:n,user:i});if(!l){console.error("[ShowcaseReaction] Error guardando like:",c),Me({description:"No pudimos registrar el like. Intenta de nuevo ms tarde."}),o("idle");return}o("success"),Me({description:"Gracias por tu apoyo en este showcase."})},[n,s,i]);return p.jsxs("div",{className:"mt-4 flex flex-col gap-3 rounded-2xl border border-white/10 bg-black/20 p-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.35em] text-slate-500",children:e}),p.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:t})]}),p.jsx("button",{type:"button",onClick:a,className:`rounded-full p-3 transition ${s==="success"?"bg-gradient-to-r from-pink-500 via-rose-500 to-yellow-500 shadow-[0_0_25px_rgba(244,114,182,0.6)] text-white border border-transparent":"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 text-white hover:from-purple-500 hover:to-indigo-500"}`,disabled:s==="loading",children:p.jsx(lO,{size:20})})]}),r?p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:s==="loading"?"Enviando":r}):null]})},gY=[{id:"miniversos",title:"Miniverso Trgico",description:"La obra como un miniverso dentro del mismo universo que ha generado.",icon:iO,iconClass:"text-purple-300",notaAutoral:"Aqu nunca abaca bien. Por lo menos no hasta el final."},{id:"lataza",title:"Miniverso Taza",description:"Objeto ritual con WebAR. Una excusa para seguir la historia desde lo cotidiano.",icon:rO,iconClass:"text-amber-300",notaAutoral:"Un objeto cotidiano que abri un portal. La Taza no acompaa: revela. Lo que sostiene no es barro, sino vnculo."},{id:"miniversoNovela",title:"Miniverso Novela",description:"El teatro termin, pero algo sigui hablando y de ese eco nace esta autoficcin.",icon:zT,iconClass:"text-emerald-300",notaAutoral:"La novela es donde la escena se desborda. Fragmentos que respiran distinto cuando alguien los lee. Aqu la historia sigue probndose."},{id:"miniversoGrafico",title:"Miniverso Grfico",description:"Coleccin de vietas interactivas, garabatos y smbolos en mutacin.",icon:dO,iconClass:"text-fuchsia-300",notaAutoral:"Lo grfico como portal emocional. Cada pieza se siente antes de entenderse."},{id:"copycats",title:"Miniverso Cine",description:"Filmes que piensan el cuerpo del Gato en clave cinematogrfica.",icon:oO,iconClass:"text-rose-300",notaAutoral:"La cmara mir lo que el teatro no poda sostener. CopyCats cuestiona; Quirn hiere con luz. Este espacio guarda esas miradas."},{id:"miniversoSonoro",title:"Miniverso Sonoro",description:"Capas de imagen, sonido y poema para soar.",icon:cO,iconClass:"text-cyan-300",notaAutoral:"Imagen, msica y palabra en suspensin. Cada mezcla inventa otro nimo. Aqu el sueo se edita solo."},{id:"detodxs",title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice del universo.",icon:VT,iconClass:"text-lime-300",notaAutoral:"Tecnologa como acompaamiento, no como solucin. Experiencias que cuidan, preguntan y extienden la historia cuando nadie est mirando."},{id:"clubdegato",title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre el universo.",icon:HT,iconClass:"text-indigo-300",notaAutoral:"El rastro vivo del proyecto. Crnicas, ecos, desvos. Donde lo que pasa en escena encuentra su segunda vida."}],vM=[{id:"tratamientos",title:"Tratamientos emocionales",description:"Tu suscripcin asigna hasta 6 sesiones a un joven sin costo para su familia. Isabel Ayuda para la Vida, A.C. activa las sesiones cuando se detecta riesgo emocional.",icon:aO,metric:"6 sesiones promedio por suscriptor"},{id:"residencias",title:"Residencias creativas",description:"Laboratorios de 2 meses donde arte y acompaamiento reparan memoria y cuerpo. Cada 17 suscripciones financian una residencia completa.",icon:dO,metric:"3 residencias activas por temporada"},{id:"app-escolar",title:"App Causa Social en escuelas",description:"Implementacin y seguimiento semestral de la app de deteccin temprana. 75 suscripciones financian 1 escuela por semestre.",icon:VT,metric:"15 escuelas atendidas cada semestre"}],yY=()=>{const[n,e]=_.useState(!1),[t,r]=_.useState(null),[i,s]=_.useState({}),o=_.useRef(null),[a,l]=_.useState(vM[0].id),[c,d]=_.useState(null),[h,f]=_.useState(null),[m,y]=_.useState(null),[g,b]=_.useState(null),v=_.useRef(null),x=_.useRef(null),[w,E]=_.useState(0),T=Math.max(w-48,320),[k,P]=_.useState(!1),[R,L]=_.useState(!1),[O,F]=_.useState(!1),[I,U]=_.useState(!1),[B,M]=_.useState(!1),[D,z]=_.useState(""),[$,V]=_.useState(""),[N,W]=_.useState(!1),G=_.useRef(null),j=_.useRef(""),[ee,ye]=_.useState(!1),[de,se]=_.useState(null),[Ee,Fe]=_.useState({}),{isMobileViewport:ve,canUseInlinePlayback:Ue,requestMobileVideoPresentation:Dt}=mY(),Y=()=>ve?p.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:p.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-black/70 px-3 py-1 text-[0.65rem] font-semibold uppercase tracking-[0.2em] text-white/80",children:[p.jsx(HT,{size:14}),"Ver video"]})}):null,te=_.useCallback(()=>{e(!0)},[]),fe=_.useCallback(()=>{e(!1)},[]),pe=_.useCallback(async K=>{const me=em[K];if(!(!me||me.type==="blog-series"||!me.slug)){s(ze=>({...ze,[K]:{...ze[K]??{},status:"loading",error:null}}));try{const ze=await p7(me.slug);if(!ze)throw new Error("No encontramos el texto asociado a este miniverso.");s(Bi=>({...Bi,[K]:{status:"success",post:ze,error:null}}))}catch(ze){s(Bi=>({...Bi,[K]:{status:"error",post:null,error:(ze==null?void 0:ze.message)??"Ocurri un error al cargar este showcase."}}))}}},[]),Ot=_.useCallback(K=>{if(em[K]){r(ze=>ze===K?null:K);const me=em[K];if(me.slug&&me.type!=="blog-series"){const ze=i[K];(!ze||ze.status==="error")&&pe(K)}return}te()},[te,pe,i]),jn=_.useCallback(K=>{var me;K&&(window.dispatchEvent(new CustomEvent("gatoencerrado:open-blog",{detail:{slug:K}})),(me=document.getElementById("dialogo-critico"))==null||me.scrollIntoView({behavior:"smooth",block:"start"}))},[]),Nr=_.useCallback(async K=>{if(K)try{await fetch("http://localhost:3000/api/silvestre",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mensaje:K})})}catch(me){console.error("[Silvestre Voice] Error sending transcript:",me),V("No pudimos enviar tu mensaje de voz. Intenta nuevamente ms tarde.")}},[]),da=_.useCallback(()=>{if(typeof window>"u")return;B?I||U(!0):(U(!0),M(!0));const K=window.SpeechRecognition||window.webkitSpeechRecognition;if(!K){V("Tu navegador no permite activar el micrfono. Puedes escribirle a Silvestre si prefieres."),window.dispatchEvent(new CustomEvent("gatoencerrado:open-silvestre"));return}if(!G.current){const me=new K;me.continuous=!0,me.interimResults=!0,me.lang="es-MX",me.maxAlternatives=1,me.onresult=ze=>{const Rp=Array.from(ze.results).map(Cv=>{var jp;return((jp=Cv[0])==null?void 0:jp.transcript)??""}).join(" ");j.current=Rp,z(Rp)},me.onerror=ze=>{console.error("[Silvestre Voice] recognition error:",ze),V("No pudimos acceder al micrfono. Intenta nuevamente."),W(!1)},me.onend=()=>{W(!1);const ze=j.current.trim();ze&&(Nr(ze),j.current="")},G.current=me}if(!N){try{G.current.start(),W(!0),V("")}catch(me){console.error("[Silvestre Voice] start error:",me),V("No pudimos abrir el micrfono. Intenta nuevamente.")}window.dispatchEvent(new CustomEvent("gatoencerrado:open-silvestre"))}},[B,N,I,Nr]),Ii=_.useCallback((K="#team")=>{const me=document.querySelector(K);me&&me.scrollIntoView({behavior:"smooth",block:"start"})},[]),oe=_.useCallback(K=>{K!=null&&K.src&&d({src:K.src,title:K.title??"",description:K.description??""})},[]),Ve=_.useCallback(()=>{d(null)},[]),cr=_.useCallback(()=>{var K;(K=x.current)==null||K.scrollIntoView({behavior:"smooth",block:"start"})},[]);_.useCallback(K=>{K!=null&&K.src&&(f({src:K.src,title:K.title??"",description:K.description??""}),y(null),b(null))},[]);const ha=_.useCallback(()=>{f(null),y(null),b(null)},[]),Np=_.useCallback(()=>{P(!0),typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches?(L(!0),document.body.classList.add("overflow-hidden")):L(!1)},[]),H=_.useCallback(()=>{P(!1),L(!1),document.body.classList.remove("overflow-hidden")},[]),J=_.useCallback(()=>{t&&Fe(K=>({...K,[t]:!K[t]}))},[t]),ue=_.useCallback(({numPages:K})=>{y(K)},[]),q=t?em[t]:null,Ye=t?Ee[t]:!1,Be=t?i[t]:null,Di=_.useMemo(()=>{var K;return(K=Be==null?void 0:Be.post)!=null&&K.content?Be.post.content.split(/\n{2,}/).map(me=>me.trim()).filter(Boolean):[]},[Be]);_.useEffect(()=>{t&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"start"})},[t]),_.useEffect(()=>{t&&Fe(K=>({...K,[t]:!1}))},[t]),_.useEffect(()=>{t!=="copycats"&&(ye(!1),se(null))},[t]),_.useEffect(()=>{t!=="lataza"&&(P(!1),L(!1),document.body.classList.remove("overflow-hidden"))},[t]),_.useEffect(()=>{if(!c&&!h)return;const K=me=>{me.key==="Escape"&&(c&&Ve(),h&&ha())};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[c,h,Ve,ha]),_.useEffect(()=>{if(!h)return;const K=()=>{v.current&&E(v.current.offsetWidth)};return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[h]),_.useEffect(()=>()=>{document.body.classList.remove("overflow-hidden")},[]),_.useEffect(()=>()=>{var K,me;(me=(K=G.current)==null?void 0:K.abort)==null||me.call(K),G.current=null},[]);const Oi=K=>{Me({description:K||"Muy pronto liberaremos la activacin WebAR de este objeto."})},fa=_.useCallback(async()=>{var K;if(typeof navigator>"u"||!((K=navigator.mediaDevices)!=null&&K.getUserMedia)){Me({description:"Tu dispositivo no permite abrir la cmara desde el navegador."});return}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})).getTracks().forEach(ze=>ze.stop()),Me({description:"Listo. En la versin final validaremos el QR con geolocalizacin para redimir tu ejemplar."})}catch(me){console.error("Error al acceder a la cmara:",me),Me({description:"No pudimos acceder a la cmara. Revisa los permisos e intntalo de nuevo."})}},[]),Kl=_.useCallback(K=>{if(K){if(K.ctaUrl){window.open(K.ctaUrl,"_blank","noopener,noreferrer");return}if(K.ctaAction==="openCamera"){fa();return}if(K.ctaAction==="openAutoficcionPreview"){F(!0);return}Me({description:K.ctaMessage||"Muy pronto liberaremos esta app interactiva."})}},[fa]),St=()=>{if(!(q!=null&&q.notaAutoral))return null;const K=q.type==="tragedia",me=K?"rounded-2xl border border-purple-400/60 bg-purple-900/20 p-4 text-sm text-slate-100 shadow-[0_0_25px_rgba(168,85,247,0.45),0_0_55px_rgba(109,40,217,0.32)]":"rounded-2xl border border-purple-300/45 p-6 bg-black/30 text-slate-300/80 text-sm leading-relaxed shadow-[0_0_22px_rgba(168,85,247,0.32),0_0_42px_rgba(59,130,246,0.18),0_20px_65px_rgba(0,0,0,0.45)]",ze=K?"text-xs uppercase tracking-[0.35em] text-slate-400 underline-offset-4 hover:text-white":"text-xs uppercase tracking-[0.35em] text-slate-400/80 underline-offset-4 hover:text-white";return p.jsxs("div",{className:`${K?"space-y-3 pt-4":"space-y-3 mt-4"}`,children:[p.jsx("button",{type:"button",className:ze,onClick:J,children:Ye?"Ocultar Verso del Autor":"Mostrar Verso del Autor"}),Ye?p.jsxs(ne.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"},className:me,children:[p.jsx("div",{className:"mb-2 space-y-1",children:p.jsx("p",{className:`text-xs uppercase tracking-[0.35em] ${K?"text-purple-200":"text-purple-300"}`,children:q.cartaTitle||"Nota autoral"})}),p.jsx("p",{className:"leading-relaxed whitespace-pre-line",children:q.notaAutoral})]},t):null]})},md=(K="Pronto liberaremos la carta completa de este miniverso.")=>q!=null&&q.slug?(Be==null?void 0:Be.status)==="loading"?p.jsx("p",{className:"text-slate-400 text-sm",children:"Cargando la carta que acompaa a este miniverso"}):(Be==null?void 0:Be.status)==="error"?p.jsx("p",{className:"text-red-300 text-sm",children:Be.error}):(Be==null?void 0:Be.status)==="success"&&Be.post?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400 mb-4",children:[Be.post.author?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(SS,{size:16}),Be.post.author,Be.post.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",Be.post.author_role]}):null]}):null,Be.post.published_at?p.jsx("span",{children:new Date(Be.post.published_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}):null]}),p.jsx("h4",{className:"font-display text-2xl text-slate-100 mb-6",children:Be.post.title}),p.jsx("div",{className:"space-y-5 text-slate-200 leading-relaxed font-light",children:Di.length===0?p.jsx("p",{children:"Muy pronto abriremos el expediente completo de este miniverso. Gracias por tu curiosidad."}):Di.map((me,ze)=>p.jsx("p",{children:me},ze))})]}):p.jsx("p",{className:"text-slate-400 text-sm",children:K}):null,Fi=()=>{var me,ze,Bi,Rp,Cv,jp,u2,d2,h2,f2,p2,m2,g2,y2,v2,x2,b2,w2,S2,A2,_2,E2,k2,C2,T2,P2,N2,R2,j2,M2,L2,I2,D2;if(!q)return p.jsx("p",{className:"text-slate-400 text-sm",children:"Selecciona un miniverso para explorar su carta y materiales."});if(q.type==="object-webar"){const Re=`${t??"object-webar"}-video`;return p.jsxs("div",{className:"grid gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"rounded-3xl border border-white/10 overflow-hidden bg-black/30",children:t==="lataza"&&k&&!R?p.jsx("div",{className:"p-0 sm:p-4",children:p.jsx(mM,{targetSrc:"/webar/taza/taza.mind",phrases:q.phrases,onExit:H})}):p.jsxs(p.Fragment,{children:[/\.mp4($|\?)/i.test(q.image)?p.jsxs("div",{className:"relative",children:[ve?p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/25 via-transparent to-black/55"}):null,Y(),p.jsx("video",{src:q.image,className:"w-full h-64 object-cover bg-black/50",autoPlay:!0,playsInline:!0,muted:!0,loop:!0,controls:Ue(Re),onClick:We=>Dt(We,Re),poster:q.imagePoster})]}):p.jsx("img",{src:q.image,alt:"Ilustracin de La Taza",className:"w-full h-64 object-cover bg-black/50"}),p.jsxs("div",{className:"p-6 space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400 uppercase tracking-[0.3em]",children:q.note}),q.instructions?p.jsx("ul",{className:"text-sm text-slate-300/90 space-y-2",children:q.instructions.map((We,ge)=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-purple-300 mt-1",children:""}),p.jsx("span",{children:We})]},ge))}):null,t==="lataza"?p.jsx(Te,{className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",variant:"outline",onClick:Np,children:q.ctaLabel}):q.ctaLink?p.jsx("a",{href:q.ctaLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold",children:q.ctaLabel}):p.jsx(Te,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>Oi(q.ctaMessage),children:q.ctaLabel})]})]})}),q.sentiments?p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Sentimientos vinculados"}),p.jsx("ul",{className:"space-y-3 text-slate-300/80 text-sm leading-relaxed",children:q.sentiments.map((We,ge)=>p.jsxs("li",{children:[" ",We]},ge))})]}):null]}),p.jsx("div",{className:"space-y-6",children:q.comments?p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-0",children:"Comentarios de la comunidad"}),p.jsx("div",{className:"space-y-4",children:q.comments.map(We=>p.jsxs("div",{className:"rounded-xl border border-white/5 p-4 bg-black/20",children:[p.jsx("p",{className:"text-slate-100 font-light mb-2",children:We.quote}),p.jsx("p",{className:"text-xs text-slate-500",children:We.author})]},We.id))}),t==="lataza"?p.jsx(ec,{showcaseId:"lataza",description:"Haz clic para guardar un like que conecta a la comunidad alrededor de la taza.",buttonLabel:"Resonar con la taza"}):null]}):null})]})}if(q.type==="audio-dream")return p.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6 order-1 lg:order-2",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cmo explorar"}),p.jsx("ol",{className:"list-decimal list-inside space-y-3 text-slate-200 text-sm leading-relaxed md:text-base",children:(me=q.exploration)==null?void 0:me.map((Re,We)=>p.jsx("li",{children:Re},We))})]}),p.jsxs("div",{className:"hidden lg:block space-y-4",children:[p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3 text-sm text-slate-300",children:(ze=q.closing)==null?void 0:ze.map((Re,We)=>p.jsx("p",{children:Re},We))}),t==="miniversoSonoro"?p.jsx(ec,{showcaseId:"miniversoSonoro",title:"La voz de quienes escuchan",description:"Comparte tu vibracin y deja un like que resuene en este miniverso.",buttonLabel:"Hacer latir la resonancia"}):null]}),p.jsxs("div",{className:"lg:hidden",children:[p.jsx(yM,{videoUrl:q.videoUrl,videoTitle:q.label,videoArtist:"Residencia #GatoEncerrado",audioOptions:q.musicOptions,poemOptions:q.poems,showHeader:!0,showCTA:!0}),p.jsxs("div",{className:"mt-4 space-y-4",children:[p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3 text-sm text-slate-300",children:(Bi=q.closing)==null?void 0:Bi.map((Re,We)=>p.jsx("p",{children:Re},We))}),t==="miniversoSonoro"?p.jsx(ec,{showcaseId:"miniversoSonoro",title:"La voz de quienes escuchan",description:"Comparte tu vibracin y deja un like que resuene en este miniverso.",buttonLabel:"Hacer latir la resonancia"}):null]})]})]}),p.jsx("div",{className:"hidden lg:flex justify-center px-4 order-2 lg:order-1 lg:px-0",children:p.jsx("div",{className:"w-full max-w-[1100px]",children:p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6",children:p.jsx(yM,{videoUrl:q.videoUrl,videoTitle:q.label,videoArtist:"Residencia #GatoEncerrado",audioOptions:q.musicOptions,poemOptions:q.poems,showHeader:!0,showCTA:!0})})})})]});if(q.type==="tragedia")return p.jsx("div",{className:"space-y-10",children:p.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-white/10 bg-gradient-to-br from-slate-900/90 via-black/60 to-rose-900/40 shadow-[0_25px_65px_rgba(15,23,42,0.65)]",children:[p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.15),_transparent_45%)]"}),p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(15,23,42,0.8),_transparent_65%)]"}),p.jsxs("div",{className:"relative mx-auto grid w-full max-w-[min(100vw-2rem,1100px)] gap-6 p-6 sm:p-8 lg:grid-cols-[3fr_2fr]",children:[p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{className:"space-y-5 rounded-3xl border border-white/10 bg-black/30 p-6 shadow-[0_20px_40px_rgba(0,0,0,0.45)]",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300",children:"Escaparate"}),p.jsx("h3",{className:"font-display text-3xl leading-tight text-white md:text-4xl",children:q.label}),p.jsx("p",{className:"text-lg text-slate-200/80 leading-relaxed font-light",children:q.intro}),p.jsx("div",{className:"space-y-3",children:(Rp=q.narrative)==null?void 0:Rp.map((Re,We)=>p.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:Re},`tragico-paragraph-${We}`))}),St()]})}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/40 p-6 space-y-5 shadow-[0_25px_45px_rgba(0,0,0,0.45)]",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Conciencia abierta"}),p.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:q.ctaDescription}),p.jsx(Te,{type:"button",variant:"outline",className:"w-full border border-purple-400/40 text-purple-100 hover:bg-purple-500/10 silvestre-cta",onClick:da,children:q.ctaLabel}),p.jsx("p",{className:"text-[11px] text-slate-500",children:"La conversacin se abre dentro del universo transmedia (pronto con GPT de Silvestre)."}),I&&!$?p.jsxs("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-200",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Silvestre quiere escucharte"}),p.jsx("p",{children:"Silvestre quiere escucharte. Dale acceso a tu micrfono para comenzar."})]}):null,$?p.jsxs("div",{className:"mt-3 rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm text-red-100",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-red-300",children:"Sin micrfono"}),p.jsx("p",{children:"Tu navegador no permite activar el micrfono. Puedes escribirle a Silvestre si prefieres."})]}):null,D?p.jsxs("div",{className:"mt-3 rounded-2xl border border-purple-500/40 bg-white/5 p-4 text-sm text-slate-100",children:[p.jsxs("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:["Transcripcin en vivo",N?" (escuchando...)":""]}),p.jsx("p",{className:"break-words",children:D})]}):null]})]})]})});if(q.type==="graphic-lab")return p.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:(Cv=q.swipe)==null?void 0:Cv.title}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:(jp=q.swipe)==null?void 0:jp.description}),p.jsx("ul",{className:"space-y-2 text-sm text-slate-200/90 leading-relaxed",children:(d2=(u2=q.swipe)==null?void 0:u2.steps)==null?void 0:d2.map((Re,We)=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-purple-300 mt-1",children:""}),p.jsx("span",{children:Re})]},`swipe-step-${We}`))})]}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Coleccin viva"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:(h2=q.collection)==null?void 0:h2.map((Re,We)=>p.jsx("span",{className:"px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs text-slate-100",children:Re},`collection-pill-${We}`))})]}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-r from-slate-900/70 via-black/60 to-fuchsia-900/40 p-6 space-y-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-fuchsia-200/80",children:(f2=q.upcoming)==null?void 0:f2.title}),p.jsx("ul",{className:"space-y-2 text-sm text-slate-100 leading-relaxed",children:(m2=(p2=q.upcoming)==null?void 0:p2.points)==null?void 0:m2.map((Re,We)=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-fuchsia-200 mt-1",children:""}),p.jsx("span",{children:Re})]},`upcoming-point-${We}`))})]})]}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Acciones"}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:"Activa el lector visual o smate a la residencia grfica."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[p.jsx(Te,{onClick:()=>Me({description:"Muy pronto liberars el lector visual interactivo desde aqu."}),className:"w-full sm:w-auto justify-center bg-gradient-to-r from-purple-600/80 to-fuchsia-500/80 hover:from-purple-500 hover:to-fuchsia-400 text-white",children:(g2=q.ctas)==null?void 0:g2.primary}),p.jsx(Te,{variant:"outline",onClick:()=>Me({description:"Escrbenos o postula; abriremos la residencia grfica en breve."}),className:"w-full sm:w-auto justify-center border-purple-400/40 text-purple-200 hover:bg-purple-500/10",children:(y2=q.ctas)==null?void 0:y2.secondary})]})]}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Testimonio"}),p.jsx("p",{className:"text-lg text-slate-100 leading-relaxed italic",children:(v2=q.quote)==null?void 0:v2.text}),p.jsx("p",{className:"text-xs text-slate-500",children:(x2=q.quote)==null?void 0:x2.author})]}),t==="miniversoGrafico"?p.jsx(ec,{showcaseId:"miniversoGrafico",title:"Validacin grfica",description:"Haz clic para dejar un like y seguir curando esta coleccin.",buttonLabel:"Resonar con el trazo"}):null]})]});if(q.type==="cinema"){const Re=(()=>{var bn;const he=new Set;return(((bn=q.copycats)==null?void 0:bn.assets)??[]).filter(tt=>{const Kn=(tt==null?void 0:tt.id)||(tt==null?void 0:tt.url);return Kn?he.has(Kn)?!1:(he.add(Kn),!0):!0})})(),We=(()=>{var bn;const he=new Set;return(((bn=q.quiron)==null?void 0:bn.stills)??[]).filter((tt,Kn)=>{const Xl=typeof tt=="string"?tt:(tt==null?void 0:tt.id)||(tt==null?void 0:tt.url)||`idx-${Kn}`;return he.has(Xl)?!1:(he.add(Xl),!0)})})();q.tone;const ge=he=>{if(!(he!=null&&he.url))return null;const bn=/\.mp4($|\?)/i.test(he.url),tt=(he==null?void 0:he.id)||(he==null?void 0:he.url);return p.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40",children:[p.jsx("div",{className:"aspect-video w-full bg-black/60",children:bn?p.jsxs("div",{className:"relative h-full w-full",children:[ve?p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/25 via-transparent to-black/55"}):null,Y(),p.jsx("video",{src:he.url,title:he.label,className:"w-full h-full object-cover",controls:Ue(tt),onClick:Kn=>Dt(Kn,tt),playsInline:!0,preload:"metadata"})]}):p.jsx("iframe",{src:he.url,title:he.label,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media; web-share",allowFullScreen:!0,loading:"lazy",referrerPolicy:"strict-origin-when-cross-origin"})}),he.label?p.jsx("div",{className:"px-4 py-3 text-sm text-slate-300 flex items-center justify-between gap-3",children:p.jsx("span",{children:he.label})}):null]})};return p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsx("div",{className:"flex items-start justify-between gap-3",children:p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Meta-documental"}),p.jsx("h4",{className:"font-display text-xl text-slate-100",children:(b2=q.copycats)==null?void 0:b2.title})]})}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:(w2=q.copycats)==null?void 0:w2.description}),p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(S2=q.copycats)==null?void 0:S2.microcopy}),(_2=(A2=q.copycats)==null?void 0:A2.tags)!=null&&_2.length?p.jsx("div",{className:"flex flex-wrap gap-2",children:q.copycats.tags.map((he,bn)=>p.jsx("span",{className:"px-3 py-1 rounded-full border border-purple-400/30 bg-purple-900/20 text-xs text-purple-100",children:he},`copycats-tag-${bn}`))}):null,Re.length?p.jsx("div",{className:"space-y-4",children:Re.map(he=>p.jsx("div",{children:ge(he)},he.id))}):null]}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsxs("div",{className:"flex items-start justify-between gap-3",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cortometraje"}),p.jsx("h4",{className:"font-display text-xl text-slate-100",children:(E2=q.quiron)==null?void 0:E2.title})]}),p.jsx("span",{className:"text-[11px] uppercase tracking-[0.3em] text-rose-300",children:"Teaser + stills"})]}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:(k2=q.quiron)==null?void 0:k2.description}),p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(C2=q.quiron)==null?void 0:C2.microcopy}),(T2=q.quiron)!=null&&T2.teaser?p.jsx("div",{children:ge(q.quiron.teaser)}):null,We.length?p.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:We.map((he,bn)=>{const tt=typeof he=="string"?he:he.label||`Still ${bn+1}`,Kn=typeof he=="string"?null:he.url;return Kn?p.jsxs("div",{className:"overflow-hidden rounded-2xl border border-white/10 bg-black/20",children:[p.jsx("div",{className:"aspect-[4/3] bg-black/40",children:p.jsx("img",{src:Kn,alt:tt,className:"h-full w-full object-cover",loading:"lazy"})}),p.jsx("p",{className:"px-4 py-3 text-xs uppercase tracking-[0.25em] text-slate-200",children:tt})]},he.id||`quiron-still-${bn}`):p.jsx("span",{className:"px-3 py-1 rounded-full border border-white/10 bg-white/5 text-xs text-slate-100",children:tt},`quiron-still-pill-${bn}`)})}):null]})]}),(P2=q.collaborators)!=null&&P2.length?p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Colaboradores"}),p.jsx("button",{type:"button",onClick:()=>ye(he=>!he),className:"text-xs uppercase tracking-[0.3em] text-slate-300 hover:text-white transition",children:ee?"Ocultar":"Ver"})]}),ee?p.jsx("div",{className:"space-y-3",children:q.collaborators.map((he,bn)=>{const tt=de===he.id,Kn=he.image||"/images/placeholder-colaboradores.jpg";return p.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20",children:[p.jsxs("button",{type:"button",onClick:()=>se(Xl=>Xl===he.id?null:he.id),className:"w-full flex items-center justify-between gap-3 px-4 py-3 text-left hover:bg-white/5 transition",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("img",{src:Kn,alt:`Retrato de ${he.name}`,className:"h-12 w-12 rounded-full object-cover border border-white/10",loading:"lazy"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-slate-100 font-semibold",children:he.name}),he.role?p.jsx("p",{className:"text-[11px] uppercase tracking-[0.3em] text-purple-300",children:he.role}):null]})]}),p.jsx("span",{className:"text-slate-400 text-lg",children:tt?"":"+"})]}),tt?p.jsxs("div",{className:"px-4 pb-4 text-sm text-slate-200/90 leading-relaxed space-y-3",children:[he.bio?p.jsx("p",{children:he.bio}):null,p.jsx("button",{type:"button",onClick:()=>Ii(he.anchor),className:"text-xs uppercase tracking-[0.3em] text-purple-300 hover:text-purple-100 underline underline-offset-4",children:"Ver semblanza"})]}):null]},he.id||`cinema-collab-${bn}`)})}):null]}):null,p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Lo que las conecta"}),p.jsx("h4",{className:"font-display text-xl text-slate-100",children:(N2=q.bridge)==null?void 0:N2.title}),p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(R2=q.bridge)==null?void 0:R2.description}),p.jsx("p",{className:"text-sm text-slate-400 leading-relaxed",children:(j2=q.bridge)==null?void 0:j2.note})]}),p.jsxs("div",{className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-r from-slate-900/80 via-black/60 to-purple-900/40 p-6 space-y-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Pantalla 5  CTA final"}),p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:(M2=q.screening)==null?void 0:M2.title}),p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:(L2=q.screening)==null?void 0:L2.description}),p.jsx(Te,{onClick:()=>Me({description:"Guardaremos tu inters; pronto abriremos la lista de suscriptores para el screening doble en CECUT."}),className:"w-full sm:w-auto justify-center bg-gradient-to-r from-purple-600/80 to-indigo-500/80 hover:from-purple-500 hover:to-indigo-400 text-white",children:(I2=q.screening)==null?void 0:I2.cta}),(D2=q.screening)!=null&&D2.footnote?p.jsx("p",{className:"text-xs text-slate-400 leading-relaxed",children:q.screening.footnote}):null]}),p.jsx("div",{className:"space-y-4",children:p.jsx(ec,{showcaseId:"copycats",title:"Validacin cinematogrfica",description:"Haz clic para dejar un like y amplificar el screening de CopyCats + Quirn.",buttonLabel:"Sumar mi aplauso"})})]})]})}if(q.type==="blog-series"){const Re=q.entries??[],We=ge=>{switch(ge.type){case"internal-reading":return ge.previewMode==="pdf"&&ge.previewPdfUrl?p.jsx(Te,{onClick:()=>F(!0),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):ge.previewMode==="image"&&ge.previewImage?p.jsx(Te,{onClick:()=>oe({src:ge.previewImage,title:ge.title,description:ge.description}),className:"w-full sm:w-auto justify-center",children:"Ver fragmento"}):ge.contentSlug?p.jsx(Te,{onClick:()=>jn(ge.contentSlug),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):null;case"purchase-link":return ge.url?p.jsx("a",{href:ge.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold transition",children:"Comprar edicin"}):null;case"qr-scan":return p.jsx(Te,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10 w-full sm:w-auto justify-center",onClick:()=>Me({title:"Escanea el QR",description:"Abre la cmara de tu dispositivo y apunta al cdigo para activar la experiencia."}),children:"Escanear QR"});default:return null}};return p.jsxs("div",{className:"space-y-10",children:[p.jsx("div",{children:md()}),Re.length>0?p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:Re.map(ge=>{var tt,Kn,Xl;if(ge.type==="horizontal-gallery")return p.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ge.title}),ge.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ge.description}):null]}),p.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:(tt=ge.images)==null?void 0:tt.map((Ft,Tv)=>p.jsx("div",{className:"w-48 h-32 flex-shrink-0 rounded-xl overflow-hidden border border-white/5 bg-black/40",children:p.jsx("img",{src:Ft,alt:`${ge.title} ${Tv+1}`,className:"w-full h-full object-cover"})},`${ge.id}-${Tv}`))})]},ge.id);if(ge.type==="quotes")return p.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ge.title}),p.jsx("div",{className:"space-y-4",children:(Kn=ge.quotes)==null?void 0:Kn.map((Ft,Tv)=>p.jsxs("blockquote",{className:"text-slate-100 font-light leading-relaxed",children:[p.jsx("p",{children:Ft.quote}),Ft.author?p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:Ft.author}):null]},`${ge.id}-quote-${Tv}`))}),p.jsx(ec,{showcaseId:"miniversoNovela",description:"Haz clic para guardar un like y amplificar las conversaciones que la novela susurra.",buttonLabel:"Apoyar la novela"})]},ge.id);if(ge.type==="novel-apps")return p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ge.title}),ge.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ge.description}):null]}),p.jsx("div",{className:"grid gap-4 grid-cols-1",children:(Xl=ge.apps)==null?void 0:Xl.map(Ft=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsx("p",{className:"font-semibold text-slate-100",children:Ft.name}),p.jsx("span",{className:`text-xs uppercase tracking-[0.3em] ${Ft.status==="Disponible"?"text-emerald-300":"text-slate-500"}`,children:Ft.status})]}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:Ft.description}),Ft.snippet?p.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/60 p-4 space-y-2",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:Ft.snippet.tagline}),Ft.snippet.image?p.jsx("img",{src:Ft.snippet.image,alt:Ft.name,className:"w-full h-32 object-cover rounded-lg border border-white/5"}):null,Ft.snippet.text?p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:Ft.snippet.text}):null]}):null,p.jsx(Te,{onClick:()=>Kl(Ft),variant:Ft.status==="Disponible"?"default":"outline",className:`w-full justify-center ${Ft.status==="Disponible"?"bg-purple-600/80 hover:bg-purple-600 text-white":"border-purple-400/40 text-purple-200 hover:bg-purple-500/10"}`,children:Ft.ctaLabel})]},Ft.id))})]},ge.id);const he=ge.previewImage||ge.image,bn=We(ge);return p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[he?p.jsx("div",{className:"rounded-xl overflow-hidden border border-white/5 bg-black/40 h-52 sm:h-64",children:p.jsx("img",{src:he,alt:ge.title,className:"w-full h-full object-cover",loading:"lazy"})}):null,p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:ge.title}),ge.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:ge.description}):null]}),bn]},ge.id)})}):p.jsx("p",{className:"text-sm text-slate-400",children:"Muy pronto liberaremos el resto de la serie."})]})}const K=q.videos??[];return p.jsxs("div",{className:"space-y-10",children:[p.jsx("div",{children:md("Pronto liberaremos la carta completa de este miniverso. Mientras tanto puedes explorar la galera audiovisual.")}),K.length>0?p.jsxs("div",{children:[p.jsx("h5",{className:"font-display text-xl text-slate-100 mb-4",children:"Galera audiovisual"}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:K.map((Re,We)=>{const ge=Re.id||Re.url||`video-${We}`;return p.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40 flex flex-col",children:[p.jsx("div",{className:"relative aspect-video w-full",children:/\.mp4($|\?)/i.test(Re.url)?p.jsxs(p.Fragment,{children:[ve?p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-b from-black/25 via-transparent to-black/55"}):null,Y(),p.jsx("video",{src:Re.url,title:Re.title,className:"w-full h-full object-cover bg-black",controls:Ue(ge),onClick:he=>Dt(he,ge),playsInline:!0,preload:"metadata",poster:Re.poster})]}):p.jsx("iframe",{src:Re.url,title:Re.title,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}),p.jsxs("div",{className:"p-4 space-y-1 text-sm text-slate-300",children:[p.jsx("p",{className:"font-semibold text-slate-100",children:Re.title}),Re.author?p.jsx("p",{children:Re.author}):null,Re.duration?p.jsxs("p",{className:"text-slate-500",children:["Duracin: ",Re.duration]}):null]})]},Re.id||Re.url||`video-${We}`)})})]}):null,t==="copycats"?p.jsx(ec,{showcaseId:"copycats",description:"Guarda un like que celebra las miradas que quedarn en escena.",title:"Opiniones despus del corte"}):null]})};return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"transmedia",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16 space-y-6",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Universo Transmedia"}),p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium text-gradient italic",children:"Miniversos que sostienen la causa"}),p.jsxs("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:["#GatoEncerrado es un universo transmedia compuesto por miniversos narrativos. Cada experiencia digital, objeto o narrativa expandida financia el acompaamiento psicoemocional de"," ",p.jsx("button",{type:"button",onClick:cr,className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Isabel Ayuda para la Vida, A.C."})]})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:gY.map((K,me)=>{const ze=K.icon,Bi=K.iconClass??"text-purple-200";return p.jsxs(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:me*.1,ease:"easeOut"},viewport:{once:!0},className:"group glass-effect rounded-xl p-8 hover-glow cursor-pointer flex flex-col transition-all duration-300 hover:border-purple-400/50",onClick:()=>Ot(K.id),children:[p.jsx("div",{className:"flex items-center justify-start mb-6 transition-all duration-300 group-hover:scale-110",children:p.jsx(ze,{size:32,className:`${Bi} drop-shadow-[0_0_12px_rgba(168,85,247,0.4)]`})}),p.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-3",children:K.title}),p.jsx("p",{className:"text-slate-300/70 text-base leading-relaxed mb-4 flex-grow font-light",children:K.description}),p.jsxs("div",{className:"text-purple-300 flex items-center gap-2 font-semibold transition-all duration-300 group-hover:gap-3",children:["Explorar",p.jsx(bV,{size:18})]})]},K.id)})}),q?p.jsxs(ne.div,{ref:o,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mt-12 glass-effect rounded-2xl p-8 md:p-12 border border-white/10",children:[p.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[p.jsx("div",{children:q.type!=="tragedia"?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-2",children:"Showcase"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-3",children:q.label}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light max-w-3xl",children:q.intro}),St()]}):null}),p.jsx("button",{onClick:()=>r(null),className:"text-sm text-slate-400 hover:text-white transition self-start md:self-auto",children:"Cerrar showcase "})]}),p.jsx("div",{className:"mt-8",children:Fi()})]}):null,p.jsxs("div",{className:"mt-16 grid lg:grid-cols-[3fr_2fr] gap-10",children:[p.jsxs(ne.div,{id:"apoya",ref:x,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col justify-between",children:[p.jsxs("div",{className:"space-y-5",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/80",children:"Apoya el proyecto"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100",children:"Nuestro impacto crece contigo"}),p.jsxs("p",{className:"text-slate-300/80 leading-relaxed font-light",children:["La taquilla mantiene la obra en escena; el universo transmedia financia acompaamiento emocional real. Cada cuota se distribuye en tres frentes que opera Isabel Ayuda para la Vida, A.C."," ",p.jsx("a",{href:"https://www.ayudaparalavida.com/index.html",target:"_blank",rel:"noreferrer",className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Visita su sitio"})]}),p.jsx("div",{className:"mt-4 space-y-3",children:vM.map(K=>{const me=K.icon,ze=a===K.id;return p.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20 overflow-hidden transition",children:[p.jsxs("button",{type:"button",onClick:()=>l(Bi=>Bi===K.id?null:K.id),className:"w-full flex items-center justify-between gap-4 px-4 py-3 text-left hover:bg-white/5 transition",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-full bg-purple-500/15 text-purple-200",children:p.jsx(me,{size:18})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-slate-100",children:K.title}),p.jsx("p",{className:"text-xs text-slate-400",children:K.metric})]})]}),p.jsx("span",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:ze?"Ocultar":"Ver impacto"})]}),ze?p.jsx("div",{className:"px-4 pb-4 text-sm text-slate-300/90",children:K.description}):null]},K.id)})})]}),p.jsxs("div",{className:"mt-8 flex flex-col gap-4 md:flex-row md:items-center",children:[p.jsx(Te,{onClick:te,variant:"ghost",className:"text-purple-200 hover:text-white hover:bg-white/10 justify-start md:justify-center",children:" Ver miniversos activos"}),p.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:[p.jsx(aO,{size:20,className:"text-purple-300"}),p.jsx("span",{children:"Tu suscripcin = Apoyo directo"})]})]})]}),p.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-6 border border-white/10 bg-slate-950/50 shadow-2xl",children:p.jsx(h7,{})})]})]})]}),p.jsx(u7,{open:n,onClose:fe}),h?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:ha}),p.jsxs("div",{className:"relative z-10 w-full max-w-5xl space-y-4",children:[p.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Lectura en progreso"}),p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:h.title||"Fragmento en PDF"}),h.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed max-w-2xl",children:h.description}):null]}),p.jsx("button",{type:"button",onClick:ha,className:"self-start rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})]}),p.jsx("div",{ref:v,className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl p-4 max-h-[75vh] overflow-auto",children:g?p.jsx("p",{className:"text-sm text-red-300 text-center py-8",children:g}):p.jsx(BX,{file:h.src,onLoadSuccess:ue,onLoadError:K=>{console.error("Error al cargar PDF del miniverso:",K),b("No pudimos cargar el fragmento en PDF. Intenta de nuevo ms tarde.")},loading:p.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Preparando pginas"}),children:m?Array.from(new Array(m),(K,me)=>p.jsx("div",{className:"mb-6 last:mb-0",children:p.jsx(YX,{pageNumber:me+1,width:T,renderTextLayer:!1,renderAnnotationLayer:!1})},`pdf-page-${me+1}`)):null})})]})]}):null,c?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:Ve}),p.jsxs("div",{className:"relative z-10 w-full max-w-3xl",children:[p.jsx("div",{className:"flex justify-end mb-4",children:p.jsx("button",{type:"button",onClick:Ve,className:"rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl overflow-hidden",children:[p.jsx("div",{className:"bg-black/60",children:p.jsx("img",{src:c.src,alt:c.title||"Vista previa",className:"w-full h-auto"})}),c.title||c.description?p.jsxs("div",{className:"p-6 space-y-2",children:[c.title?p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:c.title}):null,c.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:c.description}):null,p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:"Ilustracin de la novela"})]}):null]})]})]}):null,k&&R?p.jsx("div",{className:"fixed inset-0 z-40 bg-black",children:p.jsx(mM,{targetSrc:"/webar/taza/taza.mind",phrases:em.lataza.phrases,onExit:H})}):null,O&&p.jsx("div",{className:"fixed inset-0 z-[200] overflow-auto bg-black/80 backdrop-blur-xl p-6",children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("button",{onClick:()=>F(!1),className:"text-slate-300 hover:text-white mb-6",children:"Cerrar "}),p.jsx(fY,{})]})})]})},xM=["http","https","mailto","tel"];function vY(n){const e=(n||"").trim(),t=e.charAt(0);if(t==="#"||t==="/")return e;const r=e.indexOf(":");if(r===-1)return e;let i=-1;for(;++i<xM.length;){const s=xM[i];if(r===s.length&&e.slice(0,s.length).toLowerCase()===s)return e}return i=e.indexOf("?"),i!==-1&&r>i||(i=e.indexOf("#"),i!==-1&&r>i)?e:"javascript:void(0)"}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var xY=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)};const VB=la(xY);function Km(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?bM(n.position):"start"in n||"end"in n?bM(n):"line"in n||"column"in n?RC(n):""}function RC(n){return wM(n&&n.line)+":"+wM(n&&n.column)}function bM(n){return RC(n&&n.start)+"-"+RC(n&&n.end)}function wM(n){return n&&typeof n=="number"?n:1}class ji extends Error{constructor(e,t,r){const i=[null,null];let s={start:{line:null,column:null},end:{line:null,column:null}};if(super(),typeof t=="string"&&(r=t,t=void 0),typeof r=="string"){const o=r.indexOf(":");o===-1?i[1]=r:(i[0]=r.slice(0,o),i[1]=r.slice(o+1))}t&&("type"in t||"position"in t?t.position&&(s=t.position):"start"in t||"end"in t?s=t:("line"in t||"column"in t)&&(s.start=t)),this.name=Km(t)||"1:1",this.message=typeof e=="object"?e.message:e,this.stack="",typeof e=="object"&&e.stack&&(this.stack=e.stack),this.reason=this.message,this.fatal,this.line=s.start.line,this.column=s.start.column,this.position=s,this.source=i[0],this.ruleId=i[1],this.file,this.actual,this.expected,this.url,this.note}}ji.prototype.file="";ji.prototype.name="";ji.prototype.reason="";ji.prototype.message="";ji.prototype.stack="";ji.prototype.fatal=null;ji.prototype.column=null;ji.prototype.line=null;ji.prototype.source=null;ji.prototype.ruleId=null;ji.prototype.position=null;const bs={basename:bY,dirname:wY,extname:SY,join:AY,sep:"/"};function bY(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ev(n);let t=0,r=-1,i=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;i--;)if(n.charCodeAt(i)===47){if(s){t=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":n.slice(t,r)}if(e===n)return"";let o=-1,a=e.length-1;for(;i--;)if(n.charCodeAt(i)===47){if(s){t=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(n.charCodeAt(i)===e.charCodeAt(a--)?a<0&&(r=i):(a=-1,r=o));return t===r?r=o:r<0&&(r=n.length),n.slice(t,r)}function wY(n){if(Ev(n),n.length===0)return".";let e=-1,t=n.length,r;for(;--t;)if(n.charCodeAt(t)===47){if(r){e=t;break}}else r||(r=!0);return e<0?n.charCodeAt(0)===47?"/":".":e===1&&n.charCodeAt(0)===47?"//":n.slice(0,e)}function SY(n){Ev(n);let e=n.length,t=-1,r=0,i=-1,s=0,o;for(;e--;){const a=n.charCodeAt(e);if(a===47){if(o){r=e+1;break}continue}t<0&&(o=!0,t=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||t<0||s===0||s===1&&i===t-1&&i===r+1?"":n.slice(i,t)}function AY(...n){let e=-1,t;for(;++e<n.length;)Ev(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":_Y(t)}function _Y(n){Ev(n);const e=n.charCodeAt(0)===47;let t=EY(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.charCodeAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function EY(n,e){let t="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=n.length;){if(o<n.length)a=n.charCodeAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",r=0):(t=t.slice(0,l),r=t.length-1-t.lastIndexOf("/")),i=o,s=0;continue}}else if(t.length>0){t="",r=0,i=o,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",r=2)}else t.length>0?t+="/"+n.slice(i+1,o):t=n.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return t}function Ev(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const kY={cwd:CY};function CY(){return"/"}function jC(n){return n!==null&&typeof n=="object"&&n.href&&n.origin}function TY(n){if(typeof n=="string")n=new URL(n);else if(!jC(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return PY(n)}function PY(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.charCodeAt(t)===37&&e.charCodeAt(t+1)===50){const r=e.charCodeAt(t+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const b_=["history","path","basename","stem","extname","dirname"];class HB{constructor(e){let t;e?typeof e=="string"||NY(e)?t={value:e}:jC(e)?t={path:e}:t=e:t={},this.data={},this.messages=[],this.history=[],this.cwd=kY.cwd(),this.value,this.stored,this.result,this.map;let r=-1;for(;++r<b_.length;){const s=b_[r];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let i;for(i in t)b_.includes(i)||(this[i]=t[i])}get path(){return this.history[this.history.length-1]}set path(e){jC(e)&&(e=TY(e)),S_(e,"path"),this.path!==e&&this.history.push(e)}get dirname(){return typeof this.path=="string"?bs.dirname(this.path):void 0}set dirname(e){SM(this.basename,"dirname"),this.path=bs.join(e||"",this.basename)}get basename(){return typeof this.path=="string"?bs.basename(this.path):void 0}set basename(e){S_(e,"basename"),w_(e,"basename"),this.path=bs.join(this.dirname||"",e)}get extname(){return typeof this.path=="string"?bs.extname(this.path):void 0}set extname(e){if(w_(e,"extname"),SM(this.dirname,"extname"),e){if(e.charCodeAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=bs.join(this.dirname,this.stem+(e||""))}get stem(){return typeof this.path=="string"?bs.basename(this.path,this.extname):void 0}set stem(e){S_(e,"stem"),w_(e,"stem"),this.path=bs.join(this.dirname||"",e+(this.extname||""))}toString(e){return(this.value||"").toString(e||void 0)}message(e,t,r){const i=new ji(e,t,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}info(e,t,r){const i=this.message(e,t,r);return i.fatal=null,i}fail(e,t,r){const i=this.message(e,t,r);throw i.fatal=!0,i}}function w_(n,e){if(n&&n.includes(bs.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+bs.sep+"`")}function S_(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function SM(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function NY(n){return VB(n)}function AM(n){if(n)throw n}var mb=Object.prototype.hasOwnProperty,qB=Object.prototype.toString,_M=Object.defineProperty,EM=Object.getOwnPropertyDescriptor,kM=function(e){return typeof Array.isArray=="function"?Array.isArray(e):qB.call(e)==="[object Array]"},CM=function(e){if(!e||qB.call(e)!=="[object Object]")return!1;var t=mb.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&mb.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!r)return!1;var i;for(i in e);return typeof i>"u"||mb.call(e,i)},TM=function(e,t){_M&&t.name==="__proto__"?_M(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},PM=function(e,t){if(t==="__proto__")if(mb.call(e,t)){if(EM)return EM(e,t).value}else return;return e[t]},RY=function n(){var e,t,r,i,s,o,a=arguments[0],l=1,c=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<c;++l)if(e=arguments[l],e!=null)for(t in e)r=PM(a,t),i=PM(e,t),a!==i&&(d&&i&&(CM(i)||(s=kM(i)))?(s?(s=!1,o=r&&kM(r)?r:[]):o=r&&CM(r)?r:{},TM(a,{name:t,newValue:n(d,o,i)})):typeof i<"u"&&TM(a,{name:t,newValue:i}));return a};const NM=la(RY);function MC(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function jY(){const n=[],e={run:t,use:r};return e;function t(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...c){const d=n[++s];let h=-1;if(l){o(l);return}for(;++h<i.length;)(c[h]===null||c[h]===void 0)&&(c[h]=i[h]);i=c,d?MY(d,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return n.push(i),e}}function MY(n,e){let t;return r;function r(...o){const a=n.length>o.length;let l;a&&o.push(i);try{l=n.apply(this,o)}catch(c){const d=c;if(a&&t)throw d;return i(d)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){t||(t=!0,e(o,...a))}function s(o){i(null,o)}}const LY=WB().freeze(),GB={}.hasOwnProperty;function WB(){const n=jY(),e=[];let t={},r,i=-1;return s.data=o,s.Parser=void 0,s.Compiler=void 0,s.freeze=a,s.attachers=e,s.use=l,s.parse=c,s.stringify=d,s.run=h,s.runSync=f,s.process=m,s.processSync=y,s;function s(){const g=WB();let b=-1;for(;++b<e.length;)g.use(...e[b]);return g.data(NM(!0,{},t)),g}function o(g,b){return typeof g=="string"?arguments.length===2?(E_("data",r),t[g]=b,s):GB.call(t,g)&&t[g]||null:g?(E_("data",r),t=g,s):t}function a(){if(r)return s;for(;++i<e.length;){const[g,...b]=e[i];if(b[0]===!1)continue;b[0]===!0&&(b[0]=void 0);const v=g.call(s,...b);typeof v=="function"&&n.use(v)}return r=!0,i=Number.POSITIVE_INFINITY,s}function l(g,...b){let v;if(E_("use",r),g!=null)if(typeof g=="function")T(g,...b);else if(typeof g=="object")Array.isArray(g)?E(g):w(g);else throw new TypeError("Expected usable value, not `"+g+"`");return v&&(t.settings=Object.assign(t.settings||{},v)),s;function x(k){if(typeof k=="function")T(k);else if(typeof k=="object")if(Array.isArray(k)){const[P,...R]=k;T(P,...R)}else w(k);else throw new TypeError("Expected usable value, not `"+k+"`")}function w(k){E(k.plugins),k.settings&&(v=Object.assign(v||{},k.settings))}function E(k){let P=-1;if(k!=null)if(Array.isArray(k))for(;++P<k.length;){const R=k[P];x(R)}else throw new TypeError("Expected a list of plugins, not `"+k+"`")}function T(k,P){let R=-1,L;for(;++R<e.length;)if(e[R][0]===k){L=e[R];break}L?(MC(L[1])&&MC(P)&&(P=NM(!0,L[1],P)),L[1]=P):e.push([...arguments])}}function c(g){s.freeze();const b=tm(g),v=s.Parser;return A_("parse",v),RM(v,"parse")?new v(String(b),b).parse():v(String(b),b)}function d(g,b){s.freeze();const v=tm(b),x=s.Compiler;return __("stringify",x),jM(g),RM(x,"compile")?new x(g,v).compile():x(g,v)}function h(g,b,v){if(jM(g),s.freeze(),!v&&typeof b=="function"&&(v=b,b=void 0),!v)return new Promise(x);x(null,v);function x(w,E){n.run(g,tm(b),T);function T(k,P,R){P=P||g,k?E(k):w?w(P):v(null,P,R)}}}function f(g,b){let v,x;return s.run(g,b,w),MM("runSync","run",x),v;function w(E,T){AM(E),v=T,x=!0}}function m(g,b){if(s.freeze(),A_("process",s.Parser),__("process",s.Compiler),!b)return new Promise(v);v(null,b);function v(x,w){const E=tm(g);s.run(s.parse(E),E,(k,P,R)=>{if(k||!P||!R)T(k);else{const L=s.stringify(P,R);L==null||(OY(L)?R.value=L:R.result=L),T(k,R)}});function T(k,P){k||!P?w(k):x?x(P):b(null,P)}}}function y(g){let b;s.freeze(),A_("processSync",s.Parser),__("processSync",s.Compiler);const v=tm(g);return s.process(v,x),MM("processSync","process",b),v;function x(w){b=!0,AM(w)}}}function RM(n,e){return typeof n=="function"&&n.prototype&&(IY(n.prototype)||e in n.prototype)}function IY(n){let e;for(e in n)if(GB.call(n,e))return!0;return!1}function A_(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `Parser`")}function __(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `Compiler`")}function E_(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function jM(n){if(!MC(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function MM(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function tm(n){return DY(n)?n:new HB(n)}function DY(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function OY(n){return typeof n=="string"||VB(n)}const FY={};function BY(n,e){const t=e||FY,r=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,i=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return KB(n,r,i)}function KB(n,e,t){if(zY(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return LM(n.children,e,t)}return Array.isArray(n)?LM(n,e,t):""}function LM(n,e,t){const r=[];let i=-1;for(;++i<n.length;)r[i]=KB(n[i],e,t);return r.join("")}function zY(n){return!!(n&&typeof n=="object")}function Js(n,e,t,r){const i=n.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,t=t>0?t:0,r.length<1e4)o=Array.from(r),o.unshift(e,t),n.splice(...o);else for(t&&n.splice(e,t);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),n.splice(...o),s+=1e4,e+=1e4}function ki(n,e){return n.length>0?(Js(n,n.length,0,e),n):e}const IM={}.hasOwnProperty;function $Y(n){const e={};let t=-1;for(;++t<n.length;)UY(e,n[t]);return e}function UY(n,e){let t;for(t in e){const i=(IM.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let o;if(s)for(o in s){IM.call(i,o)||(i[o]=[]);const a=s[o];VY(i[o],Array.isArray(a)?a:a?[a]:[])}}}function VY(n,e){let t=-1;const r=[];for(;++t<e.length;)(e[t].add==="after"?n:r).push(e[t]);Js(n,0,0,r)}const HY=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Ws=Wl(/[A-Za-z]/),ti=Wl(/[\dA-Za-z]/),qY=Wl(/[#-'*+\--9=?A-Z^-~]/);function LC(n){return n!==null&&(n<32||n===127)}const IC=Wl(/\d/),GY=Wl(/[\dA-Fa-f]/),WY=Wl(/[!-/:-@[-`{-~]/);function be(n){return n!==null&&n<-2}function Tr(n){return n!==null&&(n<0||n===32)}function Xe(n){return n===-2||n===-1||n===32}const KY=Wl(HY),XY=Wl(/\s/);function Wl(n){return e;function e(t){return t!==null&&n.test(String.fromCharCode(t))}}function yt(n,e,t,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Xe(l)?(n.enter(t),a(l)):e(l)}function a(l){return Xe(l)&&s++<i?(n.consume(l),a):(n.exit(t),e(l))}}const YY={tokenize:QY};function QY(n){const e=n.attempt(this.parser.constructs.contentInitial,r,i);let t;return e;function r(a){if(a===null){n.consume(a);return}return n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),yt(n,e,"linePrefix")}function i(a){return n.enter("paragraph"),s(a)}function s(a){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,o(a)}function o(a){if(a===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(a);return}return be(a)?(n.consume(a),n.exit("chunkText"),s):(n.consume(a),o)}}const JY={tokenize:ZY},DM={tokenize:eQ};function ZY(n){const e=this,t=[];let r=0,i,s,o;return a;function a(w){if(r<t.length){const E=t[r];return e.containerState=E[1],n.attempt(E[0].continuation,l,c)(w)}return c(w)}function l(w){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&x();const E=e.events.length;let T=E,k;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){k=e.events[T][1].end;break}v(r);let P=E;for(;P<e.events.length;)e.events[P][1].end=Object.assign({},k),P++;return Js(e.events,T+1,0,e.events.slice(E)),e.events.length=P,c(w)}return a(w)}function c(w){if(r===t.length){if(!i)return f(w);if(i.currentConstruct&&i.currentConstruct.concrete)return y(w);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(DM,d,h)(w)}function d(w){return i&&x(),v(r),f(w)}function h(w){return e.parser.lazy[e.now().line]=r!==t.length,o=e.now().offset,y(w)}function f(w){return e.containerState={},n.attempt(DM,m,y)(w)}function m(w){return r++,t.push([e.currentConstruct,e.containerState]),f(w)}function y(w){if(w===null){i&&x(),v(0),n.consume(w);return}return i=i||e.parser.flow(e.now()),n.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),g(w)}function g(w){if(w===null){b(n.exit("chunkFlow"),!0),v(0),n.consume(w);return}return be(w)?(n.consume(w),b(n.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(n.consume(w),g)}function b(w,E){const T=e.sliceStream(w);if(E&&T.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(T),e.parser.lazy[w.start.line]){let k=i.events.length;for(;k--;)if(i.events[k][1].start.offset<o&&(!i.events[k][1].end||i.events[k][1].end.offset>o))return;const P=e.events.length;let R=P,L,O;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(L){O=e.events[R][1].end;break}L=!0}for(v(r),k=P;k<e.events.length;)e.events[k][1].end=Object.assign({},O),k++;Js(e.events,R+1,0,e.events.slice(P)),e.events.length=k}}function v(w){let E=t.length;for(;E-- >w;){const T=t[E];e.containerState=T[1],T[0].exit.call(e,n)}t.length=w}function x(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function eQ(n,e,t){return yt(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function OM(n){if(n===null||Tr(n)||XY(n))return 1;if(KY(n))return 2}function UP(n,e,t){const r=[];let i=-1;for(;++i<n.length;){const s=n[i].resolveAll;s&&!r.includes(s)&&(e=s(e,t),r.push(s))}return e}const DC={name:"attention",tokenize:nQ,resolveAll:tQ};function tQ(n,e){let t=-1,r,i,s,o,a,l,c,d;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(r=t;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&e.sliceSerialize(n[r][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[r][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[r][1].end.offset-n[r][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const h=Object.assign({},n[r][1].end),f=Object.assign({},n[t][1].start);FM(h,-l),FM(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:h,end:Object.assign({},n[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},n[t][1].start),end:f},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},n[r][1].end),end:Object.assign({},n[t][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},n[r][1].end=Object.assign({},o.start),n[t][1].start=Object.assign({},a.end),c=[],n[r][1].end.offset-n[r][1].start.offset&&(c=ki(c,[["enter",n[r][1],e],["exit",n[r][1],e]])),c=ki(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=ki(c,UP(e.parser.constructs.insideSpan.null,n.slice(r+1,t),e)),c=ki(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),n[t][1].end.offset-n[t][1].start.offset?(d=2,c=ki(c,[["enter",n[t][1],e],["exit",n[t][1],e]])):d=0,Js(n,r-1,t-r+3,c),t=r+c.length-d-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function nQ(n,e){const t=this.parser.constructs.attentionMarkers.null,r=this.previous,i=OM(r);let s;return o;function o(l){return s=l,n.enter("attentionSequence"),a(l)}function a(l){if(l===s)return n.consume(l),a;const c=n.exit("attentionSequence"),d=OM(l),h=!d||d===2&&i||t.includes(l),f=!i||i===2&&d||t.includes(r);return c._open=!!(s===42?h:h&&(i||!f)),c._close=!!(s===42?f:f&&(d||!h)),e(l)}}function FM(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const rQ={name:"autolink",tokenize:iQ};function iQ(n,e,t){let r=0;return i;function i(m){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(m){return Ws(m)?(n.consume(m),o):c(m)}function o(m){return m===43||m===45||m===46||ti(m)?(r=1,a(m)):c(m)}function a(m){return m===58?(n.consume(m),r=0,l):(m===43||m===45||m===46||ti(m))&&r++<32?(n.consume(m),a):(r=0,c(m))}function l(m){return m===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):m===null||m===32||m===60||LC(m)?t(m):(n.consume(m),l)}function c(m){return m===64?(n.consume(m),d):qY(m)?(n.consume(m),c):t(m)}function d(m){return ti(m)?h(m):t(m)}function h(m){return m===46?(n.consume(m),r=0,d):m===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(m),n.exit("autolinkMarker"),n.exit("autolink"),e):f(m)}function f(m){if((m===45||ti(m))&&r++<63){const y=m===45?f:h;return n.consume(m),y}return t(m)}}const WS={tokenize:sQ,partial:!0};function sQ(n,e,t){return r;function r(s){return Xe(s)?yt(n,i,"linePrefix")(s):i(s)}function i(s){return s===null||be(s)?e(s):t(s)}}const XB={name:"blockQuote",tokenize:oQ,continuation:{tokenize:aQ},exit:lQ};function oQ(n,e,t){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(n.enter("blockQuote",{_container:!0}),a.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(o),n.exit("blockQuoteMarker"),s}return t(o)}function s(o){return Xe(o)?(n.enter("blockQuotePrefixWhitespace"),n.consume(o),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(o))}}function aQ(n,e,t){const r=this;return i;function i(o){return Xe(o)?yt(n,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return n.attempt(XB,e,t)(o)}}function lQ(n){n.exit("blockQuote")}const YB={name:"characterEscape",tokenize:cQ};function cQ(n,e,t){return r;function r(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),i}function i(s){return WY(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const BM=document.createElement("i");function VP(n){const e="&"+n+";";BM.innerHTML=e;const t=BM.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}const QB={name:"characterReference",tokenize:uQ};function uQ(n,e,t){const r=this;let i=0,s,o;return a;function a(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),l}function l(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),c):(n.enter("characterReferenceValue"),s=31,o=ti,d(h))}function c(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,o=GY,d):(n.enter("characterReferenceValue"),s=7,o=IC,d(h))}function d(h){if(h===59&&i){const f=n.exit("characterReferenceValue");return o===ti&&!VP(r.sliceSerialize(f))?t(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return o(h)&&i++<s?(n.consume(h),d):t(h)}}const zM={tokenize:hQ,partial:!0},$M={name:"codeFenced",tokenize:dQ,concrete:!0};function dQ(n,e,t){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return l;function l(k){return c(k)}function c(k){const P=r.events[r.events.length-1];return s=P&&P[1].type==="linePrefix"?P[2].sliceSerialize(P[1],!0).length:0,a=k,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(k)}function d(k){return k===a?(o++,n.consume(k),d):o<3?t(k):(n.exit("codeFencedFenceSequence"),Xe(k)?yt(n,h,"whitespace")(k):h(k))}function h(k){return k===null||be(k)?(n.exit("codeFencedFence"),r.interrupt?e(k):n.check(zM,g,E)(k)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),f(k))}function f(k){return k===null||be(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(k)):Xe(k)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),yt(n,m,"whitespace")(k)):k===96&&k===a?t(k):(n.consume(k),f)}function m(k){return k===null||be(k)?h(k):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),y(k))}function y(k){return k===null||be(k)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(k)):k===96&&k===a?t(k):(n.consume(k),y)}function g(k){return n.attempt(i,E,b)(k)}function b(k){return n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),v}function v(k){return s>0&&Xe(k)?yt(n,x,"linePrefix",s+1)(k):x(k)}function x(k){return k===null||be(k)?n.check(zM,g,E)(k):(n.enter("codeFlowValue"),w(k))}function w(k){return k===null||be(k)?(n.exit("codeFlowValue"),x(k)):(n.consume(k),w)}function E(k){return n.exit("codeFenced"),e(k)}function T(k,P,R){let L=0;return O;function O(M){return k.enter("lineEnding"),k.consume(M),k.exit("lineEnding"),F}function F(M){return k.enter("codeFencedFence"),Xe(M)?yt(k,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(M):I(M)}function I(M){return M===a?(k.enter("codeFencedFenceSequence"),U(M)):R(M)}function U(M){return M===a?(L++,k.consume(M),U):L>=o?(k.exit("codeFencedFenceSequence"),Xe(M)?yt(k,B,"whitespace")(M):B(M)):R(M)}function B(M){return M===null||be(M)?(k.exit("codeFencedFence"),P(M)):R(M)}}}function hQ(n,e,t){const r=this;return i;function i(o){return o===null?t(o):(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}const k_={name:"codeIndented",tokenize:pQ},fQ={tokenize:mQ,partial:!0};function pQ(n,e,t){const r=this;return i;function i(c){return n.enter("codeIndented"),yt(n,s,"linePrefix",4+1)(c)}function s(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):t(c)}function o(c){return c===null?l(c):be(c)?n.attempt(fQ,o,l)(c):(n.enter("codeFlowValue"),a(c))}function a(c){return c===null||be(c)?(n.exit("codeFlowValue"),o(c)):(n.consume(c),a)}function l(c){return n.exit("codeIndented"),e(c)}}function mQ(n,e,t){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?t(o):be(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),i):yt(n,s,"linePrefix",4+1)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):be(o)?i(o):t(o)}}const gQ={name:"codeText",tokenize:xQ,resolve:yQ,previous:vQ};function yQ(n){let e=n.length-4,t=3,r,i;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(r=t;++r<e;)if(n[r][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(r=t-1,e++;++r<=e;)i===void 0?r!==e&&n[r][1].type!=="lineEnding"&&(i=r):(r===e||n[r][1].type==="lineEnding")&&(n[i][1].type="codeTextData",r!==i+2&&(n[i][1].end=n[r-1][1].end,n.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return n}function vQ(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xQ(n,e,t){let r=0,i,s;return o;function o(h){return n.enter("codeText"),n.enter("codeTextSequence"),a(h)}function a(h){return h===96?(n.consume(h),r++,a):(n.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(n.enter("space"),n.consume(h),n.exit("space"),l):h===96?(s=n.enter("codeTextSequence"),i=0,d(h)):be(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),l):(n.enter("codeTextData"),c(h))}function c(h){return h===null||h===32||h===96||be(h)?(n.exit("codeTextData"),l(h)):(n.consume(h),c)}function d(h){return h===96?(n.consume(h),i++,d):i===r?(n.exit("codeTextSequence"),n.exit("codeText"),e(h)):(s.type="codeTextData",c(h))}}function JB(n){const e={};let t=-1,r,i,s,o,a,l,c;for(;++t<n.length;){for(;t in e;)t=e[t];if(r=n[t],t&&r[1].type==="chunkFlow"&&n[t-1][1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,bQ(n,t)),t=e[t],c=!0);else if(r[1]._container){for(s=t,i=void 0;s--&&(o=n[s],o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(n[i][1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},n[i][1].start),a=n.slice(i,t),a.unshift(r),Js(n,i,t-i+1,a))}}return!c}function bQ(n,e){const t=n[e][1],r=n[e][2];let i=e-1;const s=[],o=t._tokenizer||r.parser[t.contentType](t.start),a=o.events,l=[],c={};let d,h,f=-1,m=t,y=0,g=0;const b=[g];for(;m;){for(;n[++i][1]!==m;);s.push(i),m._tokenizer||(d=r.sliceStream(m),m.next||d.push(null),h&&o.defineSkip(m.start),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),m._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=t;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(g=f+1,b.push(g),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(o.events=[],m?(m._tokenizer=void 0,m.previous=void 0):b.pop(),f=b.length;f--;){const v=a.slice(b[f],b[f+1]),x=s.pop();l.unshift([x,x+v.length-1]),Js(n,x,2,v)}for(f=-1;++f<l.length;)c[y+l[f][0]]=y+l[f][1],y+=l[f][1]-l[f][0]-1;return c}const wQ={tokenize:_Q,resolve:AQ},SQ={tokenize:EQ,partial:!0};function AQ(n){return JB(n),n}function _Q(n,e){let t;return r;function r(a){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):be(a)?n.check(SQ,o,s)(a):(n.consume(a),i)}function s(a){return n.exit("chunkContent"),n.exit("content"),e(a)}function o(a){return n.consume(a),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,i}}function EQ(n,e,t){const r=this;return i;function i(o){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),yt(n,s,"linePrefix")}function s(o){if(o===null||be(o))return t(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):n.interrupt(r.parser.constructs.flow,t,e)(o)}}function ZB(n,e,t,r,i,s,o,a,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return h;function h(v){return v===60?(n.enter(r),n.enter(i),n.enter(s),n.consume(v),n.exit(s),f):v===null||v===32||v===41||LC(v)?t(v):(n.enter(r),n.enter(o),n.enter(a),n.enter("chunkString",{contentType:"string"}),g(v))}function f(v){return v===62?(n.enter(s),n.consume(v),n.exit(s),n.exit(i),n.exit(r),e):(n.enter(a),n.enter("chunkString",{contentType:"string"}),m(v))}function m(v){return v===62?(n.exit("chunkString"),n.exit(a),f(v)):v===null||v===60||be(v)?t(v):(n.consume(v),v===92?y:m)}function y(v){return v===60||v===62||v===92?(n.consume(v),m):m(v)}function g(v){return!d&&(v===null||v===41||Tr(v))?(n.exit("chunkString"),n.exit(a),n.exit(o),n.exit(r),e(v)):d<c&&v===40?(n.consume(v),d++,g):v===41?(n.consume(v),d--,g):v===null||v===32||v===40||LC(v)?t(v):(n.consume(v),v===92?b:g)}function b(v){return v===40||v===41||v===92?(n.consume(v),g):g(v)}}function e5(n,e,t,r,i,s){const o=this;let a=0,l;return c;function c(m){return n.enter(r),n.enter(i),n.consume(m),n.exit(i),n.enter(s),d}function d(m){return a>999||m===null||m===91||m===93&&!l||m===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?t(m):m===93?(n.exit(s),n.enter(i),n.consume(m),n.exit(i),n.exit(r),e):be(m)?(n.enter("lineEnding"),n.consume(m),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),h(m))}function h(m){return m===null||m===91||m===93||be(m)||a++>999?(n.exit("chunkString"),d(m)):(n.consume(m),l||(l=!Xe(m)),m===92?f:h)}function f(m){return m===91||m===92||m===93?(n.consume(m),a++,h):h(m)}}function t5(n,e,t,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(n.enter(r),n.enter(i),n.consume(f),n.exit(i),o=f===40?41:f,l):t(f)}function l(f){return f===o?(n.enter(i),n.consume(f),n.exit(i),n.exit(r),e):(n.enter(s),c(f))}function c(f){return f===o?(n.exit(s),l(o)):f===null?t(f):be(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),yt(n,c,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(f))}function d(f){return f===o||f===null||be(f)?(n.exit("chunkString"),c(f)):(n.consume(f),f===92?h:d)}function h(f){return f===o||f===92?(n.consume(f),d):d(f)}}function Xm(n,e){let t;return r;function r(i){return be(i)?(n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),t=!0,r):Xe(i)?yt(n,r,t?"linePrefix":"lineSuffix")(i):e(i)}}function sh(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const kQ={name:"definition",tokenize:TQ},CQ={tokenize:PQ,partial:!0};function TQ(n,e,t){const r=this;let i;return s;function s(m){return n.enter("definition"),o(m)}function o(m){return e5.call(r,n,a,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(m)}function a(m){return i=sh(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),m===58?(n.enter("definitionMarker"),n.consume(m),n.exit("definitionMarker"),l):t(m)}function l(m){return Tr(m)?Xm(n,c)(m):c(m)}function c(m){return ZB(n,d,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(m)}function d(m){return n.attempt(CQ,h,h)(m)}function h(m){return Xe(m)?yt(n,f,"whitespace")(m):f(m)}function f(m){return m===null||be(m)?(n.exit("definition"),r.parser.defined.push(i),e(m)):t(m)}}function PQ(n,e,t){return r;function r(a){return Tr(a)?Xm(n,i)(a):t(a)}function i(a){return t5(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Xe(a)?yt(n,o,"whitespace")(a):o(a)}function o(a){return a===null||be(a)?e(a):t(a)}}const NQ={name:"hardBreakEscape",tokenize:RQ};function RQ(n,e,t){return r;function r(s){return n.enter("hardBreakEscape"),n.consume(s),i}function i(s){return be(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const jQ={name:"headingAtx",tokenize:LQ,resolve:MQ};function MQ(n,e){let t=n.length-2,r=3,i,s;return n[r][1].type==="whitespace"&&(r+=2),t-2>r&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(r===t-1||t-4>r&&n[t-2][1].type==="whitespace")&&(t-=r+1===t?2:4),t>r&&(i={type:"atxHeadingText",start:n[r][1].start,end:n[t][1].end},s={type:"chunkText",start:n[r][1].start,end:n[t][1].end,contentType:"text"},Js(n,r,t-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),n}function LQ(n,e,t){let r=0;return i;function i(d){return n.enter("atxHeading"),s(d)}function s(d){return n.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(n.consume(d),o):d===null||Tr(d)?(n.exit("atxHeadingSequence"),a(d)):t(d)}function a(d){return d===35?(n.enter("atxHeadingSequence"),l(d)):d===null||be(d)?(n.exit("atxHeading"),e(d)):Xe(d)?yt(n,a,"whitespace")(d):(n.enter("atxHeadingText"),c(d))}function l(d){return d===35?(n.consume(d),l):(n.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||Tr(d)?(n.exit("atxHeadingText"),a(d)):(n.consume(d),c)}}const IQ=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],UM=["pre","script","style","textarea"],DQ={name:"htmlFlow",tokenize:zQ,resolveTo:BQ,concrete:!0},OQ={tokenize:UQ,partial:!0},FQ={tokenize:$Q,partial:!0};function BQ(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function zQ(n,e,t){const r=this;let i,s,o,a,l;return c;function c(j){return d(j)}function d(j){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(j),h}function h(j){return j===33?(n.consume(j),f):j===47?(n.consume(j),s=!0,g):j===63?(n.consume(j),i=3,r.interrupt?e:N):Ws(j)?(n.consume(j),o=String.fromCharCode(j),b):t(j)}function f(j){return j===45?(n.consume(j),i=2,m):j===91?(n.consume(j),i=5,a=0,y):Ws(j)?(n.consume(j),i=4,r.interrupt?e:N):t(j)}function m(j){return j===45?(n.consume(j),r.interrupt?e:N):t(j)}function y(j){const ee="CDATA[";return j===ee.charCodeAt(a++)?(n.consume(j),a===ee.length?r.interrupt?e:I:y):t(j)}function g(j){return Ws(j)?(n.consume(j),o=String.fromCharCode(j),b):t(j)}function b(j){if(j===null||j===47||j===62||Tr(j)){const ee=j===47,ye=o.toLowerCase();return!ee&&!s&&UM.includes(ye)?(i=1,r.interrupt?e(j):I(j)):IQ.includes(o.toLowerCase())?(i=6,ee?(n.consume(j),v):r.interrupt?e(j):I(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?t(j):s?x(j):w(j))}return j===45||ti(j)?(n.consume(j),o+=String.fromCharCode(j),b):t(j)}function v(j){return j===62?(n.consume(j),r.interrupt?e:I):t(j)}function x(j){return Xe(j)?(n.consume(j),x):O(j)}function w(j){return j===47?(n.consume(j),O):j===58||j===95||Ws(j)?(n.consume(j),E):Xe(j)?(n.consume(j),w):O(j)}function E(j){return j===45||j===46||j===58||j===95||ti(j)?(n.consume(j),E):T(j)}function T(j){return j===61?(n.consume(j),k):Xe(j)?(n.consume(j),T):w(j)}function k(j){return j===null||j===60||j===61||j===62||j===96?t(j):j===34||j===39?(n.consume(j),l=j,P):Xe(j)?(n.consume(j),k):R(j)}function P(j){return j===l?(n.consume(j),l=null,L):j===null||be(j)?t(j):(n.consume(j),P)}function R(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Tr(j)?T(j):(n.consume(j),R)}function L(j){return j===47||j===62||Xe(j)?w(j):t(j)}function O(j){return j===62?(n.consume(j),F):t(j)}function F(j){return j===null||be(j)?I(j):Xe(j)?(n.consume(j),F):t(j)}function I(j){return j===45&&i===2?(n.consume(j),D):j===60&&i===1?(n.consume(j),z):j===62&&i===4?(n.consume(j),W):j===63&&i===3?(n.consume(j),N):j===93&&i===5?(n.consume(j),V):be(j)&&(i===6||i===7)?(n.exit("htmlFlowData"),n.check(OQ,G,U)(j)):j===null||be(j)?(n.exit("htmlFlowData"),U(j)):(n.consume(j),I)}function U(j){return n.check(FQ,B,G)(j)}function B(j){return n.enter("lineEnding"),n.consume(j),n.exit("lineEnding"),M}function M(j){return j===null||be(j)?U(j):(n.enter("htmlFlowData"),I(j))}function D(j){return j===45?(n.consume(j),N):I(j)}function z(j){return j===47?(n.consume(j),o="",$):I(j)}function $(j){if(j===62){const ee=o.toLowerCase();return UM.includes(ee)?(n.consume(j),W):I(j)}return Ws(j)&&o.length<8?(n.consume(j),o+=String.fromCharCode(j),$):I(j)}function V(j){return j===93?(n.consume(j),N):I(j)}function N(j){return j===62?(n.consume(j),W):j===45&&i===2?(n.consume(j),N):I(j)}function W(j){return j===null||be(j)?(n.exit("htmlFlowData"),G(j)):(n.consume(j),W)}function G(j){return n.exit("htmlFlow"),e(j)}}function $Q(n,e,t){const r=this;return i;function i(o){return be(o)?(n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),s):t(o)}function s(o){return r.parser.lazy[r.now().line]?t(o):e(o)}}function UQ(n,e,t){return r;function r(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),n.attempt(WS,e,t)}}const VQ={name:"htmlText",tokenize:HQ};function HQ(n,e,t){const r=this;let i,s,o;return a;function a(N){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(N),l}function l(N){return N===33?(n.consume(N),c):N===47?(n.consume(N),T):N===63?(n.consume(N),w):Ws(N)?(n.consume(N),R):t(N)}function c(N){return N===45?(n.consume(N),d):N===91?(n.consume(N),s=0,y):Ws(N)?(n.consume(N),x):t(N)}function d(N){return N===45?(n.consume(N),m):t(N)}function h(N){return N===null?t(N):N===45?(n.consume(N),f):be(N)?(o=h,z(N)):(n.consume(N),h)}function f(N){return N===45?(n.consume(N),m):h(N)}function m(N){return N===62?D(N):N===45?f(N):h(N)}function y(N){const W="CDATA[";return N===W.charCodeAt(s++)?(n.consume(N),s===W.length?g:y):t(N)}function g(N){return N===null?t(N):N===93?(n.consume(N),b):be(N)?(o=g,z(N)):(n.consume(N),g)}function b(N){return N===93?(n.consume(N),v):g(N)}function v(N){return N===62?D(N):N===93?(n.consume(N),v):g(N)}function x(N){return N===null||N===62?D(N):be(N)?(o=x,z(N)):(n.consume(N),x)}function w(N){return N===null?t(N):N===63?(n.consume(N),E):be(N)?(o=w,z(N)):(n.consume(N),w)}function E(N){return N===62?D(N):w(N)}function T(N){return Ws(N)?(n.consume(N),k):t(N)}function k(N){return N===45||ti(N)?(n.consume(N),k):P(N)}function P(N){return be(N)?(o=P,z(N)):Xe(N)?(n.consume(N),P):D(N)}function R(N){return N===45||ti(N)?(n.consume(N),R):N===47||N===62||Tr(N)?L(N):t(N)}function L(N){return N===47?(n.consume(N),D):N===58||N===95||Ws(N)?(n.consume(N),O):be(N)?(o=L,z(N)):Xe(N)?(n.consume(N),L):D(N)}function O(N){return N===45||N===46||N===58||N===95||ti(N)?(n.consume(N),O):F(N)}function F(N){return N===61?(n.consume(N),I):be(N)?(o=F,z(N)):Xe(N)?(n.consume(N),F):L(N)}function I(N){return N===null||N===60||N===61||N===62||N===96?t(N):N===34||N===39?(n.consume(N),i=N,U):be(N)?(o=I,z(N)):Xe(N)?(n.consume(N),I):(n.consume(N),B)}function U(N){return N===i?(n.consume(N),i=void 0,M):N===null?t(N):be(N)?(o=U,z(N)):(n.consume(N),U)}function B(N){return N===null||N===34||N===39||N===60||N===61||N===96?t(N):N===47||N===62||Tr(N)?L(N):(n.consume(N),B)}function M(N){return N===47||N===62||Tr(N)?L(N):t(N)}function D(N){return N===62?(n.consume(N),n.exit("htmlTextData"),n.exit("htmlText"),e):t(N)}function z(N){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(N),n.exit("lineEnding"),$}function $(N){return Xe(N)?yt(n,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):V(N)}function V(N){return n.enter("htmlTextData"),o(N)}}const HP={name:"labelEnd",tokenize:YQ,resolveTo:XQ,resolveAll:KQ},qQ={tokenize:QQ},GQ={tokenize:JQ},WQ={tokenize:ZQ};function KQ(n){let e=-1;for(;++e<n.length;){const t=n[e][1];(t.type==="labelImage"||t.type==="labelLink"||t.type==="labelEnd")&&(n.splice(e+1,t.type==="labelImage"?4:2),t.type="data",e++)}return n}function XQ(n,e){let t=n.length,r=0,i,s,o,a;for(;t--;)if(i=n[t][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;n[t][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(n[t][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=t,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=t);const l={type:n[s][1].type==="labelLink"?"link":"image",start:Object.assign({},n[s][1].start),end:Object.assign({},n[n.length-1][1].end)},c={type:"label",start:Object.assign({},n[s][1].start),end:Object.assign({},n[o][1].end)},d={type:"labelText",start:Object.assign({},n[s+r+2][1].end),end:Object.assign({},n[o-2][1].start)};return a=[["enter",l,e],["enter",c,e]],a=ki(a,n.slice(s+1,s+r+3)),a=ki(a,[["enter",d,e]]),a=ki(a,UP(e.parser.constructs.insideSpan.null,n.slice(s+r+4,o-3),e)),a=ki(a,[["exit",d,e],n[o-2],n[o-1],["exit",c,e]]),a=ki(a,n.slice(o+1)),a=ki(a,[["exit",l,e]]),Js(n,s,n.length,a),n}function YQ(n,e,t){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?h(f):(o=r.parser.defined.includes(sh(r.sliceSerialize({start:s.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(f),n.exit("labelMarker"),n.exit("labelEnd"),l):t(f)}function l(f){return f===40?n.attempt(qQ,d,o?d:h)(f):f===91?n.attempt(GQ,d,o?c:h)(f):o?d(f):h(f)}function c(f){return n.attempt(WQ,d,h)(f)}function d(f){return e(f)}function h(f){return s._balanced=!0,t(f)}}function QQ(n,e,t){return r;function r(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),i}function i(h){return Tr(h)?Xm(n,s)(h):s(h)}function s(h){return h===41?d(h):ZB(n,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Tr(h)?Xm(n,l)(h):d(h)}function a(h){return t(h)}function l(h){return h===34||h===39||h===40?t5(n,c,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function c(h){return Tr(h)?Xm(n,d)(h):d(h)}function d(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),e):t(h)}}function JQ(n,e,t){const r=this;return i;function i(a){return e5.call(r,n,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(sh(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):t(a)}function o(a){return t(a)}}function ZQ(n,e,t){return r;function r(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),i}function i(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const eJ={name:"labelStartImage",tokenize:tJ,resolveAll:HP.resolveAll};function tJ(n,e,t){const r=this;return i;function i(a){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(a),n.exit("labelImageMarker"),s}function s(a){return a===91?(n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelImage"),o):t(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(a):e(a)}}const nJ={name:"labelStartLink",tokenize:rJ,resolveAll:HP.resolveAll};function rJ(n,e,t){const r=this;return i;function i(o){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?t(o):e(o)}}const C_={name:"lineEnding",tokenize:iJ};function iJ(n,e){return t;function t(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),yt(n,e,"linePrefix")}}const gb={name:"thematicBreak",tokenize:sJ};function sJ(n,e,t){let r=0,i;return s;function s(c){return n.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(n.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||be(c))?(n.exit("thematicBreak"),e(c)):t(c)}function l(c){return c===i?(n.consume(c),r++,l):(n.exit("thematicBreakSequence"),Xe(c)?yt(n,a,"whitespace")(c):a(c))}}const dr={name:"list",tokenize:lJ,continuation:{tokenize:cJ},exit:dJ},oJ={tokenize:hJ,partial:!0},aJ={tokenize:uJ,partial:!0};function lJ(n,e,t){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(m){const y=r.containerState.type||(m===42||m===43||m===45?"listUnordered":"listOrdered");if(y==="listUnordered"?!r.containerState.marker||m===r.containerState.marker:IC(m)){if(r.containerState.type||(r.containerState.type=y,n.enter(y,{_container:!0})),y==="listUnordered")return n.enter("listItemPrefix"),m===42||m===45?n.check(gb,t,c)(m):c(m);if(!r.interrupt||m===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(m)}return t(m)}function l(m){return IC(m)&&++o<10?(n.consume(m),l):(!r.interrupt||o<2)&&(r.containerState.marker?m===r.containerState.marker:m===41||m===46)?(n.exit("listItemValue"),c(m)):t(m)}function c(m){return n.enter("listItemMarker"),n.consume(m),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||m,n.check(WS,r.interrupt?t:d,n.attempt(oJ,f,h))}function d(m){return r.containerState.initialBlankLine=!0,s++,f(m)}function h(m){return Xe(m)?(n.enter("listItemPrefixWhitespace"),n.consume(m),n.exit("listItemPrefixWhitespace"),f):t(m)}function f(m){return r.containerState.size=s+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(m)}}function cJ(n,e,t){const r=this;return r.containerState._closeFlow=void 0,n.check(WS,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,yt(n,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Xe(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(aJ,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,yt(n,n.attempt(dr,e,t),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function uJ(n,e,t){const r=this;return yt(n,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):t(s)}}function dJ(n){n.exit(this.containerState.type)}function hJ(n,e,t){const r=this;return yt(n,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(s){const o=r.events[r.events.length-1];return!Xe(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const VM={name:"setextUnderline",tokenize:pJ,resolveTo:fJ};function fJ(n,e){let t=n.length,r,i,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){r=t;break}n[t][1].type==="paragraph"&&(i=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const o={type:"setextHeading",start:Object.assign({},n[i][1].start),end:Object.assign({},n[n.length-1][1].end)};return n[i][1].type="setextHeadingText",s?(n.splice(i,0,["enter",o,e]),n.splice(s+1,0,["exit",n[r][1],e]),n[r][1].end=Object.assign({},n[s][1].end)):n[r][1]=o,n.push(["exit",o,e]),n}function pJ(n,e,t){const r=this;let i;return s;function s(c){let d=r.events.length,h;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){h=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||h)?(n.enter("setextHeadingLine"),i=c,o(c)):t(c)}function o(c){return n.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(n.consume(c),a):(n.exit("setextHeadingLineSequence"),Xe(c)?yt(n,l,"lineSuffix")(c):l(c))}function l(c){return c===null||be(c)?(n.exit("setextHeadingLine"),e(c)):t(c)}}const mJ={tokenize:gJ};function gJ(n){const e=this,t=n.attempt(WS,r,n.attempt(this.parser.constructs.flowInitial,i,yt(n,n.attempt(this.parser.constructs.flow,i,n.attempt(wQ,i)),"linePrefix")));return t;function r(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function i(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const yJ={resolveAll:r5()},vJ=n5("string"),xJ=n5("text");function n5(n){return{tokenize:e,resolveAll:r5(n==="text"?bJ:void 0)};function e(t){const r=this,i=this.parser.constructs[n],s=t.attempt(i,o,a);return o;function o(d){return c(d)?s(d):a(d)}function a(d){if(d===null){t.consume(d);return}return t.enter("data"),t.consume(d),l}function l(d){return c(d)?(t.exit("data"),s(d)):(t.consume(d),l)}function c(d){if(d===null)return!0;const h=i[d];let f=-1;if(h)for(;++f<h.length;){const m=h[f];if(!m.previous||m.previous.call(r,r.previous))return!0}return!1}}}function r5(n){return e;function e(t,r){let i=-1,s;for(;++i<=t.length;)s===void 0?t[i]&&t[i][1].type==="data"&&(s=i,i++):(!t[i]||t[i][1].type!=="data")&&(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return n?n(t,r):t}}function bJ(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const r=n[t-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)l=!0,a++;else if(c!==-1){s++;break}}if(a){const c={type:t===n.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},c.start),r.start.offset===r.end.offset?Object.assign(r,c):(n.splice(t,0,["enter",c,e],["exit",c,e]),t+=2)}t++}return n}function wJ(n,e,t){let r=Object.assign(t?Object.assign({},t):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:x,enter:w,exit:E,attempt:P(T),check:P(k),interrupt:P(k,{interrupt:!0})},c={previous:null,code:null,containerState:{},events:[],parser:n,sliceStream:m,sliceSerialize:f,now:y,defineSkip:g,write:h};let d=e.tokenize.call(c,l);return e.resolveAll&&s.push(e),c;function h(F){return o=ki(o,F),b(),o[o.length-1]!==null?[]:(R(e,0),c.events=UP(s,c.events,c),c.events)}function f(F,I){return AJ(m(F),I)}function m(F){return SJ(o,F)}function y(){const{line:F,column:I,offset:U,_index:B,_bufferIndex:M}=r;return{line:F,column:I,offset:U,_index:B,_bufferIndex:M}}function g(F){i[F.line]=F.column,O()}function b(){let F;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(F=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===F&&r._bufferIndex<I.length;)v(I.charCodeAt(r._bufferIndex));else v(I)}}function v(F){d=d(F)}function x(F){be(F)?(r.line++,r.column=1,r.offset+=F===-3?2:1,O()):F!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=F}function w(F,I){const U=I||{};return U.type=F,U.start=y(),c.events.push(["enter",U,c]),a.push(U),U}function E(F){const I=a.pop();return I.end=y(),c.events.push(["exit",I,c]),I}function T(F,I){R(F,I.from)}function k(F,I){I.restore()}function P(F,I){return U;function U(B,M,D){let z,$,V,N;return Array.isArray(B)?G(B):"tokenize"in B?G([B]):W(B);function W(de){return se;function se(Ee){const Fe=Ee!==null&&de[Ee],ve=Ee!==null&&de.null,Ue=[...Array.isArray(Fe)?Fe:Fe?[Fe]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return G(Ue)(Ee)}}function G(de){return z=de,$=0,de.length===0?D:j(de[$])}function j(de){return se;function se(Ee){return N=L(),V=de,de.partial||(c.currentConstruct=de),de.name&&c.parser.constructs.disable.null.includes(de.name)?ye():de.tokenize.call(I?Object.assign(Object.create(c),I):c,l,ee,ye)(Ee)}}function ee(de){return F(V,N),M}function ye(de){return N.restore(),++$<z.length?j(z[$]):D}}}function R(F,I){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&Js(c.events,I,c.events.length-I,F.resolve(c.events.slice(I),c)),F.resolveTo&&(c.events=F.resolveTo(c.events,c))}function L(){const F=y(),I=c.previous,U=c.currentConstruct,B=c.events.length,M=Array.from(a);return{restore:D,from:B};function D(){r=F,c.previous=I,c.currentConstruct=U,c.events.length=B,a=M,O()}}function O(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function SJ(n,e){const t=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(t===i)o=[n[t].slice(r,s)];else{if(o=n.slice(t,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(n[i].slice(0,s))}return o}function AJ(n,e){let t=-1;const r=[];let i;for(;++t<n.length;){const s=n[t];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const _J={42:dr,43:dr,45:dr,48:dr,49:dr,50:dr,51:dr,52:dr,53:dr,54:dr,55:dr,56:dr,57:dr,62:XB},EJ={91:kQ},kJ={[-2]:k_,[-1]:k_,32:k_},CJ={35:jQ,42:gb,45:[VM,gb],60:DQ,61:VM,95:gb,96:$M,126:$M},TJ={38:QB,92:YB},PJ={[-5]:C_,[-4]:C_,[-3]:C_,33:eJ,38:QB,42:DC,60:[rQ,VQ],91:nJ,92:[NQ,YB],93:HP,95:DC,96:gQ},NJ={null:[DC,yJ]},RJ={null:[42,95]},jJ={null:[]},MJ=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:RJ,contentInitial:EJ,disable:jJ,document:_J,flow:CJ,flowInitial:kJ,insideSpan:NJ,string:TJ,text:PJ},Symbol.toStringTag,{value:"Module"}));function LJ(n){const t=$Y([MJ,...(n||{}).extensions||[]]),r={defined:[],lazy:{},constructs:t,content:i(YY),document:i(JY),flow:i(mJ),string:i(vJ),text:i(xJ)};return r;function i(s){return o;function o(a){return wJ(r,s,a)}}}const HM=/[\0\t\n\r]/g;function IJ(){let n=1,e="",t=!0,r;return i;function i(s,o,a){const l=[];let c,d,h,f,m;for(s=e+s.toString(o),h=0,e="",t&&(s.charCodeAt(0)===65279&&h++,t=void 0);h<s.length;){if(HM.lastIndex=h,c=HM.exec(s),f=c&&c.index!==void 0?c.index:s.length,m=s.charCodeAt(f),!c){e=s.slice(h);break}if(m===10&&h===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),h<f&&(l.push(s.slice(h,f)),n+=f-h),m){case 0:{l.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,l.push(-2);n++<d;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:r=!0,n=1}h=f+1}return a&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}function DJ(n){for(;!JB(n););return n}function i5(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCharCode(t)}const OJ=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function FJ(n){return n.replace(OJ,BJ)}function BJ(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const i=t.charCodeAt(1),s=i===120||i===88;return i5(t.slice(s?2:1),s?16:10)}return VP(t)||n}const s5={}.hasOwnProperty,zJ=function(n,e,t){return typeof e!="string"&&(t=e,e=void 0),$J(t)(DJ(LJ(t).document().write(IJ()(n,e,!0))))};function $J(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(da),autolinkProtocol:F,autolinkEmail:F,atxHeading:a(pe),blockQuote:a(Ue),characterEscape:F,characterReference:F,codeFenced:a(Dt),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(Dt,l),codeText:a(Y,l),codeTextData:F,data:F,codeFlowValue:F,definition:a(te),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a(fe),hardBreakEscape:a(Ot),hardBreakTrailing:a(Ot),htmlFlow:a(jn,l),htmlFlowData:F,htmlText:a(jn,l),htmlTextData:F,image:a(Nr),label:l,link:a(da),listItem:a(oe),listItemValue:y,listOrdered:a(Ii,m),listUnordered:a(Ii),paragraph:a(Ve),reference:ye,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(pe),strong:a(cr),thematicBreak:a(Np)},exit:{atxHeading:d(),atxHeadingSequence:P,autolink:d(),autolinkEmail:ve,autolinkProtocol:Fe,blockQuote:d(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:se,characterReferenceMarkerNumeric:se,characterReferenceValue:Ee,codeFenced:d(x),codeFencedFence:v,codeFencedFenceInfo:g,codeFencedFenceMeta:b,codeFlowValue:I,codeIndented:d(w),codeText:d(z),codeTextData:I,data:I,definition:d(),definitionDestinationString:k,definitionLabelString:E,definitionTitleString:T,emphasis:d(),hardBreakEscape:d(B),hardBreakTrailing:d(B),htmlFlow:d(M),htmlFlowData:I,htmlText:d(D),htmlTextData:I,image:d(V),label:W,labelText:N,lineEnding:U,link:d($),listItem:d(),listOrdered:d(),listUnordered:d(),paragraph:d(),referenceString:de,resourceDestinationString:G,resourceTitleString:j,resource:ee,setextHeading:d(O),setextHeadingLineSequence:L,setextHeadingText:R,strong:d(),thematicBreak:d()}};o5(e,(n||{}).mdastExtensions||[]);const t={};return r;function r(H){let J={type:"root",children:[]};const ue={stack:[J],tokenStack:[],config:e,enter:c,exit:h,buffer:l,resume:f,setData:s,getData:o},q=[];let Ye=-1;for(;++Ye<H.length;)if(H[Ye][1].type==="listOrdered"||H[Ye][1].type==="listUnordered")if(H[Ye][0]==="enter")q.push(Ye);else{const Be=q.pop();Ye=i(H,Be,Ye)}for(Ye=-1;++Ye<H.length;){const Be=e[H[Ye][0]];s5.call(Be,H[Ye][1].type)&&Be[H[Ye][1].type].call(Object.assign({sliceSerialize:H[Ye][2].sliceSerialize},ue),H[Ye][1])}if(ue.tokenStack.length>0){const Be=ue.tokenStack[ue.tokenStack.length-1];(Be[1]||qM).call(ue,void 0,Be[0])}for(J.position={start:ya(H.length>0?H[0][1].start:{line:1,column:1,offset:0}),end:ya(H.length>0?H[H.length-2][1].end:{line:1,column:1,offset:0})},Ye=-1;++Ye<e.transforms.length;)J=e.transforms[Ye](J)||J;return J}function i(H,J,ue){let q=J-1,Ye=-1,Be=!1,Di,Oi,fa,Kl;for(;++q<=ue;){const St=H[q];if(St[1].type==="listUnordered"||St[1].type==="listOrdered"||St[1].type==="blockQuote"?(St[0]==="enter"?Ye++:Ye--,Kl=void 0):St[1].type==="lineEndingBlank"?St[0]==="enter"&&(Di&&!Kl&&!Ye&&!fa&&(fa=q),Kl=void 0):St[1].type==="linePrefix"||St[1].type==="listItemValue"||St[1].type==="listItemMarker"||St[1].type==="listItemPrefix"||St[1].type==="listItemPrefixWhitespace"||(Kl=void 0),!Ye&&St[0]==="enter"&&St[1].type==="listItemPrefix"||Ye===-1&&St[0]==="exit"&&(St[1].type==="listUnordered"||St[1].type==="listOrdered")){if(Di){let md=q;for(Oi=void 0;md--;){const Fi=H[md];if(Fi[1].type==="lineEnding"||Fi[1].type==="lineEndingBlank"){if(Fi[0]==="exit")continue;Oi&&(H[Oi][1].type="lineEndingBlank",Be=!0),Fi[1].type="lineEnding",Oi=md}else if(!(Fi[1].type==="linePrefix"||Fi[1].type==="blockQuotePrefix"||Fi[1].type==="blockQuotePrefixWhitespace"||Fi[1].type==="blockQuoteMarker"||Fi[1].type==="listItemIndent"))break}fa&&(!Oi||fa<Oi)&&(Di._spread=!0),Di.end=Object.assign({},Oi?H[Oi][1].start:St[1].end),H.splice(Oi||q,0,["exit",Di,St[2]]),q++,ue++}St[1].type==="listItemPrefix"&&(Di={type:"listItem",_spread:!1,start:Object.assign({},St[1].start),end:void 0},H.splice(q,0,["enter",Di,St[2]]),q++,ue++,fa=void 0,Kl=!0)}}return H[J][1]._spread=Be,ue}function s(H,J){t[H]=J}function o(H){return t[H]}function a(H,J){return ue;function ue(q){c.call(this,H(q),q),J&&J.call(this,q)}}function l(){this.stack.push({type:"fragment",children:[]})}function c(H,J,ue){return this.stack[this.stack.length-1].children.push(H),this.stack.push(H),this.tokenStack.push([J,ue]),H.position={start:ya(J.start)},H}function d(H){return J;function J(ue){H&&H.call(this,ue),h.call(this,ue)}}function h(H,J){const ue=this.stack.pop(),q=this.tokenStack.pop();if(q)q[0].type!==H.type&&(J?J.call(this,H,q[0]):(q[1]||qM).call(this,H,q[0]));else throw new Error("Cannot close `"+H.type+"` ("+Km({start:H.start,end:H.end})+"): its not open");return ue.position.end=ya(H.end),ue}function f(){return BY(this.stack.pop())}function m(){s("expectingFirstListItemValue",!0)}function y(H){if(o("expectingFirstListItemValue")){const J=this.stack[this.stack.length-2];J.start=Number.parseInt(this.sliceSerialize(H),10),s("expectingFirstListItemValue")}}function g(){const H=this.resume(),J=this.stack[this.stack.length-1];J.lang=H}function b(){const H=this.resume(),J=this.stack[this.stack.length-1];J.meta=H}function v(){o("flowCodeInside")||(this.buffer(),s("flowCodeInside",!0))}function x(){const H=this.resume(),J=this.stack[this.stack.length-1];J.value=H.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),s("flowCodeInside")}function w(){const H=this.resume(),J=this.stack[this.stack.length-1];J.value=H.replace(/(\r?\n|\r)$/g,"")}function E(H){const J=this.resume(),ue=this.stack[this.stack.length-1];ue.label=J,ue.identifier=sh(this.sliceSerialize(H)).toLowerCase()}function T(){const H=this.resume(),J=this.stack[this.stack.length-1];J.title=H}function k(){const H=this.resume(),J=this.stack[this.stack.length-1];J.url=H}function P(H){const J=this.stack[this.stack.length-1];if(!J.depth){const ue=this.sliceSerialize(H).length;J.depth=ue}}function R(){s("setextHeadingSlurpLineEnding",!0)}function L(H){const J=this.stack[this.stack.length-1];J.depth=this.sliceSerialize(H).charCodeAt(0)===61?1:2}function O(){s("setextHeadingSlurpLineEnding")}function F(H){const J=this.stack[this.stack.length-1];let ue=J.children[J.children.length-1];(!ue||ue.type!=="text")&&(ue=ha(),ue.position={start:ya(H.start)},J.children.push(ue)),this.stack.push(ue)}function I(H){const J=this.stack.pop();J.value+=this.sliceSerialize(H),J.position.end=ya(H.end)}function U(H){const J=this.stack[this.stack.length-1];if(o("atHardBreak")){const ue=J.children[J.children.length-1];ue.position.end=ya(H.end),s("atHardBreak");return}!o("setextHeadingSlurpLineEnding")&&e.canContainEols.includes(J.type)&&(F.call(this,H),I.call(this,H))}function B(){s("atHardBreak",!0)}function M(){const H=this.resume(),J=this.stack[this.stack.length-1];J.value=H}function D(){const H=this.resume(),J=this.stack[this.stack.length-1];J.value=H}function z(){const H=this.resume(),J=this.stack[this.stack.length-1];J.value=H}function $(){const H=this.stack[this.stack.length-1];if(o("inReference")){const J=o("referenceType")||"shortcut";H.type+="Reference",H.referenceType=J,delete H.url,delete H.title}else delete H.identifier,delete H.label;s("referenceType")}function V(){const H=this.stack[this.stack.length-1];if(o("inReference")){const J=o("referenceType")||"shortcut";H.type+="Reference",H.referenceType=J,delete H.url,delete H.title}else delete H.identifier,delete H.label;s("referenceType")}function N(H){const J=this.sliceSerialize(H),ue=this.stack[this.stack.length-2];ue.label=FJ(J),ue.identifier=sh(J).toLowerCase()}function W(){const H=this.stack[this.stack.length-1],J=this.resume(),ue=this.stack[this.stack.length-1];if(s("inReference",!0),ue.type==="link"){const q=H.children;ue.children=q}else ue.alt=J}function G(){const H=this.resume(),J=this.stack[this.stack.length-1];J.url=H}function j(){const H=this.resume(),J=this.stack[this.stack.length-1];J.title=H}function ee(){s("inReference")}function ye(){s("referenceType","collapsed")}function de(H){const J=this.resume(),ue=this.stack[this.stack.length-1];ue.label=J,ue.identifier=sh(this.sliceSerialize(H)).toLowerCase(),s("referenceType","full")}function se(H){s("characterReferenceType",H.type)}function Ee(H){const J=this.sliceSerialize(H),ue=o("characterReferenceType");let q;ue?(q=i5(J,ue==="characterReferenceMarkerNumeric"?10:16),s("characterReferenceType")):q=VP(J);const Ye=this.stack.pop();Ye.value+=q,Ye.position.end=ya(H.end)}function Fe(H){I.call(this,H);const J=this.stack[this.stack.length-1];J.url=this.sliceSerialize(H)}function ve(H){I.call(this,H);const J=this.stack[this.stack.length-1];J.url="mailto:"+this.sliceSerialize(H)}function Ue(){return{type:"blockquote",children:[]}}function Dt(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function te(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function fe(){return{type:"emphasis",children:[]}}function pe(){return{type:"heading",depth:void 0,children:[]}}function Ot(){return{type:"break"}}function jn(){return{type:"html",value:""}}function Nr(){return{type:"image",title:null,url:"",alt:null}}function da(){return{type:"link",title:null,url:"",children:[]}}function Ii(H){return{type:"list",ordered:H.type==="listOrdered",start:null,spread:H._spread,children:[]}}function oe(H){return{type:"listItem",spread:H._spread,checked:null,children:[]}}function Ve(){return{type:"paragraph",children:[]}}function cr(){return{type:"strong",children:[]}}function ha(){return{type:"text",value:""}}function Np(){return{type:"thematicBreak"}}}function ya(n){return{line:n.line,column:n.column,offset:n.offset}}function o5(n,e){let t=-1;for(;++t<e.length;){const r=e[t];Array.isArray(r)?o5(n,r):UJ(n,r)}}function UJ(n,e){let t;for(t in e)if(s5.call(e,t)){if(t==="canContainEols"){const r=e[t];r&&n[t].push(...r)}else if(t==="transforms"){const r=e[t];r&&n[t].push(...r)}else if(t==="enter"||t==="exit"){const r=e[t];r&&Object.assign(n[t],r)}}}function qM(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Km({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Km({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Km({start:e.start,end:e.end})+") is still open")}function VJ(n){Object.assign(this,{Parser:t=>{const r=this.data("settings");return zJ(t,Object.assign({},r,n,{extensions:this.data("micromarkExtensions")||[],mdastExtensions:this.data("fromMarkdownExtensions")||[]}))}})}function HJ(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function qJ(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function GJ(n,e){const t=e.value?e.value+`
`:"",r=e.lang?e.lang.match(/^[^ \t]+(?=[ \t]|$)/):null,i={};r&&(i.className=["language-"+r]);let s={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(s.data={meta:e.meta}),n.patch(e,s),s=n.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},n.patch(e,s),s}function WJ(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function KJ(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function Tp(n){const e=[];let t=-1,r=0,i=0;for(;++t<n.length;){const s=n.charCodeAt(t);let o="";if(s===37&&ti(n.charCodeAt(t+1))&&ti(n.charCodeAt(t+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=n.charCodeAt(t+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(n.slice(r,t),encodeURIComponent(o)),r=t+i+1,o=""),i&&(t+=i,i=0)}return e.join("")+n.slice(r)}function a5(n,e){const t=String(e.identifier).toUpperCase(),r=Tp(t.toLowerCase()),i=n.footnoteOrder.indexOf(t);let s;i===-1?(n.footnoteOrder.push(t),n.footnoteCounts[t]=1,s=n.footnoteOrder.length):(n.footnoteCounts[t]++,s=i+1);const o=n.footnoteCounts[t],a={type:"element",tagName:"a",properties:{href:"#"+n.clobberPrefix+"fn-"+r,id:n.clobberPrefix+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(s)}]};n.patch(e,a);const l={type:"element",tagName:"sup",properties:{},children:[a]};return n.patch(e,l),n.applyData(e,l)}function XJ(n,e){const t=n.footnoteById;let r=1;for(;r in t;)r++;const i=String(r);return t[i]={type:"footnoteDefinition",identifier:i,children:[{type:"paragraph",children:e.children}],position:e.position},a5(n,{type:"footnoteReference",identifier:i,position:e.position})}function YJ(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function QJ(n,e){if(n.dangerous){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}return null}function l5(n,e){const t=e.referenceType;let r="]";if(t==="collapsed"?r+="[]":t==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return{type:"text",value:"!["+e.alt+r};const i=n.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function JJ(n,e){const t=n.definition(e.identifier);if(!t)return l5(n,e);const r={src:Tp(t.url||""),alt:e.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);const i={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,i),n.applyData(e,i)}function ZJ(n,e){const t={src:Tp(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,r),n.applyData(e,r)}function eZ(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const r={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,r),n.applyData(e,r)}function tZ(n,e){const t=n.definition(e.identifier);if(!t)return l5(n,e);const r={href:Tp(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);const i={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function nZ(n,e){const t={href:Tp(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const r={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,r),n.applyData(e,r)}function rZ(n,e,t){const r=n.all(e),i=t?iZ(t):c5(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},r.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return n.patch(e,c),n.applyData(e,c)}function iZ(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let r=-1;for(;!e&&++r<t.length;)e=c5(t[r])}return e}function c5(n){const e=n.spread;return e??n.children.length>1}function sZ(n,e){const t={},r=n.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function oZ(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function aZ(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function lZ(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const qP=u5("start"),GP=u5("end");function cZ(n){return{start:qP(n),end:GP(n)}}function u5(n){return e;function e(t){const r=t&&t.position&&t.position[n]||{};return{line:r.line||null,column:r.column||null,offset:r.offset>-1?r.offset:null}}}function uZ(n,e){const t=n.all(e),r=t.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(e.children[0],o),i.push(o)}if(t.length>0){const o={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},a=qP(e.children[1]),l=GP(e.children[e.children.length-1]);a.line&&l.line&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function dZ(n,e,t){const r=t?t.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=t&&t.type==="table"?t.align:void 0,a=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<a;){const h=e.children[l],f={},m=o?o[l]:void 0;m&&(f.align=m);let y={type:"element",tagName:s,properties:f,children:[]};h&&(y.children=n.all(h),n.patch(h,y),y=n.applyData(e,y)),c.push(y)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(c,!0)};return n.patch(e,d),n.applyData(e,d)}function hZ(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const GM=9,WM=32;function fZ(n){const e=String(n),t=/\r?\n|\r/g;let r=t.exec(e),i=0;const s=[];for(;r;)s.push(KM(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=t.exec(e);return s.push(KM(e.slice(i),i>0,!1)),s.join("")}function KM(n,e,t){let r=0,i=n.length;if(e){let s=n.codePointAt(r);for(;s===GM||s===WM;)r++,s=n.codePointAt(r)}if(t){let s=n.codePointAt(i-1);for(;s===GM||s===WM;)i--,s=n.codePointAt(i-1)}return i>r?n.slice(r,i):""}function pZ(n,e){const t={type:"text",value:fZ(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function mZ(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const gZ={blockquote:HJ,break:qJ,code:GJ,delete:WJ,emphasis:KJ,footnoteReference:a5,footnote:XJ,heading:YJ,html:QJ,imageReference:JJ,image:ZJ,inlineCode:eZ,linkReference:tZ,link:nZ,listItem:rZ,list:sZ,paragraph:oZ,root:aZ,strong:lZ,table:uZ,tableCell:hZ,tableRow:dZ,text:pZ,thematicBreak:mZ,toml:gx,yaml:gx,definition:gx,footnoteDefinition:gx};function gx(){return null}const d5=function(n){if(n==null)return bZ;if(typeof n=="string")return xZ(n);if(typeof n=="object")return Array.isArray(n)?yZ(n):vZ(n);if(typeof n=="function")return KS(n);throw new Error("Expected function, string, or object as test")};function yZ(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=d5(n[t]);return KS(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].call(this,...i))return!0;return!1}}function vZ(n){return KS(e);function e(t){let r;for(r in n)if(t[r]!==n[r])return!1;return!0}}function xZ(n){return KS(e);function e(t){return t&&t.type===n}}function KS(n){return e;function e(t,...r){return!!(t&&typeof t=="object"&&"type"in t&&n.call(this,t,...r))}}function bZ(){return!0}const wZ=!0,XM=!1,SZ="skip",AZ=function(n,e,t,r){typeof e=="function"&&typeof t!="function"&&(r=t,t=e,e=null);const i=d5(e),s=r?-1:1;o(n,void 0,[])();function o(a,l,c){const d=a&&typeof a=="object"?a:{};if(typeof d.type=="string"){const f=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(a.type+(f?"<"+f+">":""))+")"})}return h;function h(){let f=[],m,y,g;if((!e||i(a,l,c[c.length-1]||null))&&(f=_Z(t(a,c)),f[0]===XM))return f;if(a.children&&f[0]!==SZ)for(y=(r?a.children.length:-1)+s,g=c.concat(a);y>-1&&y<a.children.length;){if(m=o(a.children[y],y,g)(),m[0]===XM)return m;y=typeof m[1]=="number"?m[1]:y+s}return f}}};function _Z(n){return Array.isArray(n)?n:typeof n=="number"?[wZ,n]:[n]}const WP=function(n,e,t,r){typeof e=="function"&&typeof t!="function"&&(r=t,t=e,e=null),AZ(n,e,i,r);function i(s,o){const a=o[o.length-1];return t(s,a?a.children.indexOf(s):null,a)}};function EZ(n){return!n||!n.position||!n.position.start||!n.position.start.line||!n.position.start.column||!n.position.end||!n.position.end.line||!n.position.end.column}const YM={}.hasOwnProperty;function kZ(n){const e=Object.create(null);if(!n||!n.type)throw new Error("mdast-util-definitions expected node");return WP(n,"definition",r=>{const i=QM(r.identifier);i&&!YM.call(e,i)&&(e[i]=r)}),t;function t(r){const i=QM(r);return i&&YM.call(e,i)?e[i]:null}}function QM(n){return String(n||"").toUpperCase()}const dw={}.hasOwnProperty;function CZ(n,e){const t=e||{},r=t.allowDangerousHtml||!1,i={};return o.dangerous=r,o.clobberPrefix=t.clobberPrefix===void 0||t.clobberPrefix===null?"user-content-":t.clobberPrefix,o.footnoteLabel=t.footnoteLabel||"Footnotes",o.footnoteLabelTagName=t.footnoteLabelTagName||"h2",o.footnoteLabelProperties=t.footnoteLabelProperties||{className:["sr-only"]},o.footnoteBackLabel=t.footnoteBackLabel||"Back to content",o.unknownHandler=t.unknownHandler,o.passThrough=t.passThrough,o.handlers={...gZ,...t.handlers},o.definition=kZ(n),o.footnoteById=i,o.footnoteOrder=[],o.footnoteCounts={},o.patch=TZ,o.applyData=PZ,o.one=a,o.all=l,o.wrap=RZ,o.augment=s,WP(n,"footnoteDefinition",c=>{const d=String(c.identifier).toUpperCase();dw.call(i,d)||(i[d]=c)}),o;function s(c,d){if(c&&"data"in c&&c.data){const h=c.data;h.hName&&(d.type!=="element"&&(d={type:"element",tagName:"",properties:{},children:[]}),d.tagName=h.hName),d.type==="element"&&h.hProperties&&(d.properties={...d.properties,...h.hProperties}),"children"in d&&d.children&&h.hChildren&&(d.children=h.hChildren)}if(c){const h="type"in c?c:{position:c};EZ(h)||(d.position={start:qP(h),end:GP(h)})}return d}function o(c,d,h,f){return Array.isArray(h)&&(f=h,h={}),s(c,{type:"element",tagName:d,properties:h||{},children:f||[]})}function a(c,d){return h5(o,c,d)}function l(c){return KP(o,c)}}function TZ(n,e){n.position&&(e.position=cZ(n))}function PZ(n,e){let t=e;if(n&&n.data){const r=n.data.hName,i=n.data.hChildren,s=n.data.hProperties;typeof r=="string"&&(t.type==="element"?t.tagName=r:t={type:"element",tagName:r,properties:{},children:[]}),t.type==="element"&&s&&(t.properties={...t.properties,...s}),"children"in t&&t.children&&i!==null&&i!==void 0&&(t.children=i)}return t}function h5(n,e,t){const r=e&&e.type;if(!r)throw new Error("Expected node, got `"+e+"`");return dw.call(n.handlers,r)?n.handlers[r](n,e,t):n.passThrough&&n.passThrough.includes(r)?"children"in e?{...e,children:KP(n,e)}:e:n.unknownHandler?n.unknownHandler(n,e,t):NZ(n,e)}function KP(n,e){const t=[];if("children"in e){const r=e.children;let i=-1;for(;++i<r.length;){const s=h5(n,r[i],e);if(s){if(i&&r[i-1].type==="break"&&(!Array.isArray(s)&&s.type==="text"&&(s.value=s.value.replace(/^\s+/,"")),!Array.isArray(s)&&s.type==="element")){const o=s.children[0];o&&o.type==="text"&&(o.value=o.value.replace(/^\s+/,""))}Array.isArray(s)?t.push(...s):t.push(s)}}}return t}function NZ(n,e){const t=e.data||{},r="value"in e&&!(dw.call(t,"hProperties")||dw.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:KP(n,e)};return n.patch(e,r),n.applyData(e,r)}function RZ(n,e){const t=[];let r=-1;for(e&&t.push({type:"text",value:`
`});++r<n.length;)r&&t.push({type:"text",value:`
`}),t.push(n[r]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function jZ(n){const e=[];let t=-1;for(;++t<n.footnoteOrder.length;){const r=n.footnoteById[n.footnoteOrder[t]];if(!r)continue;const i=n.all(r),s=String(r.identifier).toUpperCase(),o=Tp(s.toLowerCase());let a=0;const l=[];for(;++a<=n.footnoteCounts[s];){const h={type:"element",tagName:"a",properties:{href:"#"+n.clobberPrefix+"fnref-"+o+(a>1?"-"+a:""),dataFootnoteBackref:!0,className:["data-footnote-backref"],ariaLabel:n.footnoteBackLabel},children:[{type:"text",value:""}]};a>1&&h.children.push({type:"element",tagName:"sup",children:[{type:"text",value:String(a)}]}),l.length>0&&l.push({type:"text",value:" "}),l.push(h)}const c=i[i.length-1];if(c&&c.type==="element"&&c.tagName==="p"){const h=c.children[c.children.length-1];h&&h.type==="text"?h.value+=" ":c.children.push({type:"text",value:" "}),c.children.push(...l)}else i.push(...l);const d={type:"element",tagName:"li",properties:{id:n.clobberPrefix+"fn-"+o},children:n.wrap(i,!0)};n.patch(r,d),e.push(d)}if(e.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:n.footnoteLabelTagName,properties:{...JSON.parse(JSON.stringify(n.footnoteLabelProperties)),id:"footnote-label"},children:[{type:"text",value:n.footnoteLabel}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(e,!0)},{type:"text",value:`
`}]}}function f5(n,e){const t=CZ(n,e),r=t.one(n,null),i=jZ(t);return i&&r.children.push({type:"text",value:`
`},i),Array.isArray(r)?{type:"root",children:r}:r}const MZ=function(n,e){return n&&"run"in n?IZ(n,e):DZ(n||e)},LZ=MZ;function IZ(n,e){return(t,r,i)=>{n.run(f5(t,e),r,s=>{i(s)})}}function DZ(n){return e=>f5(e,n)}var p5={exports:{}},OZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",FZ=OZ,BZ=FZ;function m5(){}function g5(){}g5.resetWarningCache=m5;var zZ=function(){function n(r,i,s,o,a,l){if(l!==BZ){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:g5,resetWarningCache:m5};return t.PropTypes=t,t};p5.exports=zZ();var $Z=p5.exports;const we=la($Z);class kv{constructor(e,t,r){this.property=e,this.normal=t,r&&(this.space=r)}}kv.prototype.property={};kv.prototype.normal={};kv.prototype.space=null;function y5(n,e){const t={},r={};let i=-1;for(;++i<n.length;)Object.assign(t,n[i].property),Object.assign(r,n[i].normal);return new kv(t,r,e)}function OC(n){return n.toLowerCase()}class Mi{constructor(e,t){this.property=e,this.attribute=t}}Mi.prototype.space=null;Mi.prototype.boolean=!1;Mi.prototype.booleanish=!1;Mi.prototype.overloadedBoolean=!1;Mi.prototype.number=!1;Mi.prototype.commaSeparated=!1;Mi.prototype.spaceSeparated=!1;Mi.prototype.commaOrSpaceSeparated=!1;Mi.prototype.mustUseProperty=!1;Mi.prototype.defined=!1;let UZ=0;const ke=pd(),Qt=pd(),v5=pd(),Z=pd(),ft=pd(),oh=pd(),Rr=pd();function pd(){return 2**++UZ}const FC=Object.freeze(Object.defineProperty({__proto__:null,boolean:ke,booleanish:Qt,commaOrSpaceSeparated:Rr,commaSeparated:oh,number:Z,overloadedBoolean:v5,spaceSeparated:ft},Symbol.toStringTag,{value:"Module"})),T_=Object.keys(FC);class XP extends Mi{constructor(e,t,r,i){let s=-1;if(super(e,t),JM(this,"space",i),typeof r=="number")for(;++s<T_.length;){const o=T_[s];JM(this,T_[s],(r&FC[o])===FC[o])}}}XP.prototype.defined=!0;function JM(n,e,t){t&&(n[e]=t)}const VZ={}.hasOwnProperty;function Pp(n){const e={},t={};let r;for(r in n.properties)if(VZ.call(n.properties,r)){const i=n.properties[r],s=new XP(r,n.transform(n.attributes||{},r),i,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,t[OC(r)]=r,t[OC(s.attribute)]=r}return new kv(e,t,n.space)}const x5=Pp({space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),b5=Pp({space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function w5(n,e){return e in n?n[e]:e}function S5(n,e){return w5(n,e.toLowerCase())}const A5=Pp({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:S5,properties:{xmlns:null,xmlnsXLink:null}}),_5=Pp({transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Qt,ariaAutoComplete:null,ariaBusy:Qt,ariaChecked:Qt,ariaColCount:Z,ariaColIndex:Z,ariaColSpan:Z,ariaControls:ft,ariaCurrent:null,ariaDescribedBy:ft,ariaDetails:null,ariaDisabled:Qt,ariaDropEffect:ft,ariaErrorMessage:null,ariaExpanded:Qt,ariaFlowTo:ft,ariaGrabbed:Qt,ariaHasPopup:null,ariaHidden:Qt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ft,ariaLevel:Z,ariaLive:null,ariaModal:Qt,ariaMultiLine:Qt,ariaMultiSelectable:Qt,ariaOrientation:null,ariaOwns:ft,ariaPlaceholder:null,ariaPosInSet:Z,ariaPressed:Qt,ariaReadOnly:Qt,ariaRelevant:null,ariaRequired:Qt,ariaRoleDescription:ft,ariaRowCount:Z,ariaRowIndex:Z,ariaRowSpan:Z,ariaSelected:Qt,ariaSetSize:Z,ariaSort:null,ariaValueMax:Z,ariaValueMin:Z,ariaValueNow:Z,ariaValueText:null,role:null}}),HZ=Pp({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:S5,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:oh,acceptCharset:ft,accessKey:ft,action:null,allow:null,allowFullScreen:ke,allowPaymentRequest:ke,allowUserMedia:ke,alt:null,as:null,async:ke,autoCapitalize:null,autoComplete:ft,autoFocus:ke,autoPlay:ke,blocking:ft,capture:null,charSet:null,checked:ke,cite:null,className:ft,cols:Z,colSpan:null,content:null,contentEditable:Qt,controls:ke,controlsList:ft,coords:Z|oh,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ke,defer:ke,dir:null,dirName:null,disabled:ke,download:v5,draggable:Qt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ke,formTarget:null,headers:ft,height:Z,hidden:ke,high:Z,href:null,hrefLang:null,htmlFor:ft,httpEquiv:ft,id:null,imageSizes:null,imageSrcSet:null,inert:ke,inputMode:null,integrity:null,is:null,isMap:ke,itemId:null,itemProp:ft,itemRef:ft,itemScope:ke,itemType:ft,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ke,low:Z,manifest:null,max:null,maxLength:Z,media:null,method:null,min:null,minLength:Z,multiple:ke,muted:ke,name:null,nonce:null,noModule:ke,noValidate:ke,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ke,optimum:Z,pattern:null,ping:ft,placeholder:null,playsInline:ke,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ke,referrerPolicy:null,rel:ft,required:ke,reversed:ke,rows:Z,rowSpan:Z,sandbox:ft,scope:null,scoped:ke,seamless:ke,selected:ke,shadowRootClonable:ke,shadowRootDelegatesFocus:ke,shadowRootMode:null,shape:null,size:Z,sizes:null,slot:null,span:Z,spellCheck:Qt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Z,step:null,style:null,tabIndex:Z,target:null,title:null,translate:null,type:null,typeMustMatch:ke,useMap:null,value:Qt,width:Z,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ft,axis:null,background:null,bgColor:null,border:Z,borderColor:null,bottomMargin:Z,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ke,declare:ke,event:null,face:null,frame:null,frameBorder:null,hSpace:Z,leftMargin:Z,link:null,longDesc:null,lowSrc:null,marginHeight:Z,marginWidth:Z,noResize:ke,noHref:ke,noShade:ke,noWrap:ke,object:null,profile:null,prompt:null,rev:null,rightMargin:Z,rules:null,scheme:null,scrolling:Qt,standby:null,summary:null,text:null,topMargin:Z,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Z,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ke,disableRemotePlayback:ke,prefix:null,property:null,results:Z,security:null,unselectable:null}}),qZ=Pp({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:w5,properties:{about:Rr,accentHeight:Z,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Z,amplitude:Z,arabicForm:null,ascent:Z,attributeName:null,attributeType:null,azimuth:Z,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Z,by:null,calcMode:null,capHeight:Z,className:ft,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Z,diffuseConstant:Z,direction:null,display:null,dur:null,divisor:Z,dominantBaseline:null,download:ke,dx:null,dy:null,edgeMode:null,editable:null,elevation:Z,enableBackground:null,end:null,event:null,exponent:Z,externalResourcesRequired:null,fill:null,fillOpacity:Z,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:oh,g2:oh,glyphName:oh,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Z,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Z,horizOriginX:Z,horizOriginY:Z,id:null,ideographic:Z,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Z,k:Z,k1:Z,k2:Z,k3:Z,k4:Z,kernelMatrix:Rr,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Z,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Z,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Z,overlineThickness:Z,paintOrder:null,panose1:null,path:null,pathLength:Z,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ft,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Z,pointsAtY:Z,pointsAtZ:Z,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Rr,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Rr,rev:Rr,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Rr,requiredFeatures:Rr,requiredFonts:Rr,requiredFormats:Rr,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Z,specularExponent:Z,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Z,strikethroughThickness:Z,string:null,stroke:null,strokeDashArray:Rr,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Z,strokeOpacity:Z,strokeWidth:null,style:null,surfaceScale:Z,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Rr,tabIndex:Z,tableValues:null,target:null,targetX:Z,targetY:Z,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Rr,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Z,underlineThickness:Z,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Z,values:null,vAlphabetic:Z,vMathematical:Z,vectorEffect:null,vHanging:Z,vIdeographic:Z,version:null,vertAdvY:Z,vertOriginX:Z,vertOriginY:Z,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Z,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),GZ=/^data[-\w.:]+$/i,ZM=/-[a-z]/g,WZ=/[A-Z]/g;function KZ(n,e){const t=OC(e);let r=e,i=Mi;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&GZ.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(ZM,YZ);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!ZM.test(s)){let o=s.replace(WZ,XZ);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=XP}return new i(r,e)}function XZ(n){return"-"+n.toLowerCase()}function YZ(n){return n.charAt(1).toUpperCase()}const eL={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},QZ=y5([b5,x5,A5,_5,HZ],"html"),JZ=y5([b5,x5,A5,_5,qZ],"svg");function ZZ(n){if(n.allowedElements&&n.disallowedElements)throw new TypeError("Only one of `allowedElements` and `disallowedElements` should be defined");if(n.allowedElements||n.disallowedElements||n.allowElement)return e=>{WP(e,"element",(t,r,i)=>{const s=i;let o;if(n.allowedElements?o=!n.allowedElements.includes(t.tagName):n.disallowedElements&&(o=n.disallowedElements.includes(t.tagName)),!o&&n.allowElement&&typeof r=="number"&&(o=!n.allowElement(t,r,s)),o&&typeof r=="number")return n.unwrapDisallowed&&t.children?s.children.splice(r,1,...t.children):s.children.splice(r,1),r})}}var E5={exports:{}},et={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YP=Symbol.for("react.element"),QP=Symbol.for("react.portal"),XS=Symbol.for("react.fragment"),YS=Symbol.for("react.strict_mode"),QS=Symbol.for("react.profiler"),JS=Symbol.for("react.provider"),ZS=Symbol.for("react.context"),eee=Symbol.for("react.server_context"),eA=Symbol.for("react.forward_ref"),tA=Symbol.for("react.suspense"),nA=Symbol.for("react.suspense_list"),rA=Symbol.for("react.memo"),iA=Symbol.for("react.lazy"),tee=Symbol.for("react.offscreen"),k5;k5=Symbol.for("react.module.reference");function Li(n){if(typeof n=="object"&&n!==null){var e=n.$$typeof;switch(e){case YP:switch(n=n.type,n){case XS:case QS:case YS:case tA:case nA:return n;default:switch(n=n&&n.$$typeof,n){case eee:case ZS:case eA:case iA:case rA:case JS:return n;default:return e}}case QP:return e}}}et.ContextConsumer=ZS;et.ContextProvider=JS;et.Element=YP;et.ForwardRef=eA;et.Fragment=XS;et.Lazy=iA;et.Memo=rA;et.Portal=QP;et.Profiler=QS;et.StrictMode=YS;et.Suspense=tA;et.SuspenseList=nA;et.isAsyncMode=function(){return!1};et.isConcurrentMode=function(){return!1};et.isContextConsumer=function(n){return Li(n)===ZS};et.isContextProvider=function(n){return Li(n)===JS};et.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===YP};et.isForwardRef=function(n){return Li(n)===eA};et.isFragment=function(n){return Li(n)===XS};et.isLazy=function(n){return Li(n)===iA};et.isMemo=function(n){return Li(n)===rA};et.isPortal=function(n){return Li(n)===QP};et.isProfiler=function(n){return Li(n)===QS};et.isStrictMode=function(n){return Li(n)===YS};et.isSuspense=function(n){return Li(n)===tA};et.isSuspenseList=function(n){return Li(n)===nA};et.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===XS||n===QS||n===YS||n===tA||n===nA||n===tee||typeof n=="object"&&n!==null&&(n.$$typeof===iA||n.$$typeof===rA||n.$$typeof===JS||n.$$typeof===ZS||n.$$typeof===eA||n.$$typeof===k5||n.getModuleId!==void 0)};et.typeOf=Li;E5.exports=et;var nee=E5.exports;const ree=la(nee);function iee(n){const e=n&&typeof n=="object"&&n.type==="text"?n.value||"":n;return typeof e=="string"&&e.replace(/[ \t\n\f\r]/g,"")===""}function see(n){return n.join(" ").trim()}function oee(n,e){const t=e||{};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}var JP={exports:{}},tL=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,aee=/\n/g,lee=/^\s*/,cee=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,uee=/^:\s*/,dee=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,hee=/^[;\s]*/,fee=/^\s+|\s+$/g,pee=`
`,nL="/",rL="*",hc="",mee="comment",gee="declaration",yee=function(n,e){if(typeof n!="string")throw new TypeError("First argument must be a string");if(!n)return[];e=e||{};var t=1,r=1;function i(y){var g=y.match(aee);g&&(t+=g.length);var b=y.lastIndexOf(pee);r=~b?y.length-b:r+y.length}function s(){var y={line:t,column:r};return function(g){return g.position=new o(y),c(),g}}function o(y){this.start=y,this.end={line:t,column:r},this.source=e.source}o.prototype.content=n;function a(y){var g=new Error(e.source+":"+t+":"+r+": "+y);if(g.reason=y,g.filename=e.source,g.line=t,g.column=r,g.source=n,!e.silent)throw g}function l(y){var g=y.exec(n);if(g){var b=g[0];return i(b),n=n.slice(b.length),g}}function c(){l(lee)}function d(y){var g;for(y=y||[];g=h();)g!==!1&&y.push(g);return y}function h(){var y=s();if(!(nL!=n.charAt(0)||rL!=n.charAt(1))){for(var g=2;hc!=n.charAt(g)&&(rL!=n.charAt(g)||nL!=n.charAt(g+1));)++g;if(g+=2,hc===n.charAt(g-1))return a("End of comment missing");var b=n.slice(2,g-2);return r+=2,i(b),n=n.slice(g),r+=2,y({type:mee,comment:b})}}function f(){var y=s(),g=l(cee);if(g){if(h(),!l(uee))return a("property missing ':'");var b=l(dee),v=y({type:gee,property:iL(g[0].replace(tL,hc)),value:b?iL(b[0].replace(tL,hc)):hc});return l(hee),v}}function m(){var y=[];d(y);for(var g;g=f();)g!==!1&&(y.push(g),d(y));return y}return c(),m()};function iL(n){return n?n.replace(fee,hc):hc}var vee=yee;function C5(n,e){var t=null;if(!n||typeof n!="string")return t;for(var r,i=vee(n),s=typeof e=="function",o,a,l=0,c=i.length;l<c;l++)r=i[l],o=r.property,a=r.value,s?e(o,a,r):a&&(t||(t={}),t[o]=a);return t}JP.exports=C5;JP.exports.default=C5;var xee=JP.exports;const bee=la(xee),BC={}.hasOwnProperty,wee=new Set(["table","thead","tbody","tfoot","tr"]);function T5(n,e){const t=[];let r=-1,i;for(;++r<e.children.length;)i=e.children[r],i.type==="element"?t.push(See(n,i,r,e)):i.type==="text"?(e.type!=="element"||!wee.has(e.tagName)||!iee(i))&&t.push(i.value):i.type==="raw"&&!n.options.skipHtml&&t.push(i.value);return t}function See(n,e,t,r){const i=n.options,s=i.transformLinkUri===void 0?vY:i.transformLinkUri,o=n.schema,a=e.tagName,l={};let c=o,d;if(o.space==="html"&&a==="svg"&&(c=JZ,n.schema=c),e.properties)for(d in e.properties)BC.call(e.properties,d)&&_ee(l,d,e.properties[d],n);(a==="ol"||a==="ul")&&n.listDepth++;const h=T5(n,e);(a==="ol"||a==="ul")&&n.listDepth--,n.schema=o;const f=e.position||{start:{line:null,column:null,offset:null},end:{line:null,column:null,offset:null}},m=i.components&&BC.call(i.components,a)?i.components[a]:a,y=typeof m=="string"||m===Pe.Fragment;if(!ree.isValidElementType(m))throw new TypeError(`Component for name \`${a}\` not defined or is not renderable`);if(l.key=t,a==="a"&&i.linkTarget&&(l.target=typeof i.linkTarget=="function"?i.linkTarget(String(l.href||""),e.children,typeof l.title=="string"?l.title:null):i.linkTarget),a==="a"&&s&&(l.href=s(String(l.href||""),e.children,typeof l.title=="string"?l.title:null)),!y&&a==="code"&&r.type==="element"&&r.tagName!=="pre"&&(l.inline=!0),!y&&(a==="h1"||a==="h2"||a==="h3"||a==="h4"||a==="h5"||a==="h6")&&(l.level=Number.parseInt(a.charAt(1),10)),a==="img"&&i.transformImageUri&&(l.src=i.transformImageUri(String(l.src||""),String(l.alt||""),typeof l.title=="string"?l.title:null)),!y&&a==="li"&&r.type==="element"){const g=Aee(e);l.checked=g&&g.properties?!!g.properties.checked:null,l.index=P_(r,e),l.ordered=r.tagName==="ol"}return!y&&(a==="ol"||a==="ul")&&(l.ordered=a==="ol",l.depth=n.listDepth),(a==="td"||a==="th")&&(l.align&&(l.style||(l.style={}),l.style.textAlign=l.align,delete l.align),y||(l.isHeader=a==="th")),!y&&a==="tr"&&r.type==="element"&&(l.isHeader=r.tagName==="thead"),i.sourcePos&&(l["data-sourcepos"]=Cee(f)),!y&&i.rawSourcePos&&(l.sourcePosition=e.position),!y&&i.includeElementIndex&&(l.index=P_(r,e),l.siblingCount=P_(r)),y||(l.node=e),h.length>0?Pe.createElement(m,l,h):Pe.createElement(m,l)}function Aee(n){let e=-1;for(;++e<n.children.length;){const t=n.children[e];if(t.type==="element"&&t.tagName==="input")return t}return null}function P_(n,e){let t=-1,r=0;for(;++t<n.children.length&&n.children[t]!==e;)n.children[t].type==="element"&&r++;return r}function _ee(n,e,t,r){const i=KZ(r.schema,e);let s=t;s==null||s!==s||(Array.isArray(s)&&(s=i.commaSeparated?oee(s):see(s)),i.property==="style"&&typeof s=="string"&&(s=Eee(s)),i.space&&i.property?n[BC.call(eL,i.property)?eL[i.property]:i.property]=s:i.attribute&&(n[i.attribute]=s))}function Eee(n){const e={};try{bee(n,t)}catch{}return e;function t(r,i){const s=r.slice(0,4)==="-ms-"?`ms-${r.slice(4)}`:r;e[s.replace(/-([a-z])/g,kee)]=i}}function kee(n,e){return e.toUpperCase()}function Cee(n){return[n.start.line,":",n.start.column,"-",n.end.line,":",n.end.column].map(String).join("")}const sL={}.hasOwnProperty,Tee="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",yx={plugins:{to:"remarkPlugins",id:"change-plugins-to-remarkplugins"},renderers:{to:"components",id:"change-renderers-to-components"},astPlugins:{id:"remove-buggy-html-in-markdown-parser"},allowDangerousHtml:{id:"remove-buggy-html-in-markdown-parser"},escapeHtml:{id:"remove-buggy-html-in-markdown-parser"},source:{to:"children",id:"change-source-to-children"},allowNode:{to:"allowElement",id:"replace-allownode-allowedtypes-and-disallowedtypes"},allowedTypes:{to:"allowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},disallowedTypes:{to:"disallowedElements",id:"replace-allownode-allowedtypes-and-disallowedtypes"},includeNodeIndex:{to:"includeElementIndex",id:"change-includenodeindex-to-includeelementindex"}};function P5(n){for(const s in yx)if(sL.call(yx,s)&&sL.call(n,s)){const o=yx[s];console.warn(`[react-markdown] Warning: please ${o.to?`use \`${o.to}\` instead of`:"remove"} \`${s}\` (see <${Tee}#${o.id}> for more info)`),delete yx[s]}const e=LY().use(VJ).use(n.remarkPlugins||[]).use(LZ,{...n.remarkRehypeOptions,allowDangerousHtml:!0}).use(n.rehypePlugins||[]).use(ZZ,n),t=new HB;typeof n.children=="string"?t.value=n.children:n.children!==void 0&&n.children!==null&&console.warn(`[react-markdown] Warning: please pass a string as \`children\` (not: \`${n.children}\`)`);const r=e.runSync(e.parse(t),t);if(r.type!=="root")throw new TypeError("Expected a `root` node");let i=Pe.createElement(Pe.Fragment,{},T5({options:n,schema:QZ,listDepth:0},r));return n.className&&(i=Pe.createElement("div",{className:n.className},i)),i}P5.propTypes={children:we.string,className:we.string,allowElement:we.func,allowedElements:we.arrayOf(we.string),disallowedElements:we.arrayOf(we.string),unwrapDisallowed:we.bool,remarkPlugins:we.arrayOf(we.oneOfType([we.object,we.func,we.arrayOf(we.oneOfType([we.bool,we.string,we.object,we.func,we.arrayOf(we.any)]))])),rehypePlugins:we.arrayOf(we.oneOfType([we.object,we.func,we.arrayOf(we.oneOfType([we.bool,we.string,we.object,we.func,we.arrayOf(we.any)]))])),sourcePos:we.bool,rawSourcePos:we.bool,skipHtml:we.bool,includeElementIndex:we.bool,transformLinkUri:we.oneOfType([we.func,we.bool]),linkTarget:we.oneOfType([we.func,we.string]),transformImageUri:we.func,components:we.object};const tc=[{id:"obra_escenica",icon:p.jsx(iO,{size:20,className:"text-purple-300"}),title:"La Obra - Es un Gato Encerrado",description:`De la escena brot el universo:
voz, trance y cuerpo
abriendo portales.`},{id:"miniverso_novela",icon:p.jsx(zT,{size:20,className:"text-emerald-300"}),title:"Miniverso Novela",description:`La palabra devolvi lo que el gato se trag:
Mi Gato Encerrado
 se cuenta a s misma.`},{id:"taza",icon:p.jsx(rO,{size:20,className:"text-amber-300"}),title:"Miniverso Taza",description:`Una taza que escucha.
Un marcador que mira.
Lo cotidiano tambin es ritual.`},{id:"cine",icon:p.jsx(oO,{size:20,className:"text-rose-300"}),title:"Miniverso Cine",description:`Cuando la escena no alcanza,
la cmara recuerda
Quirn, CopyCats,
mismo espacio en otra luz.`},{id:"apps",icon:p.jsx(VT,{size:20,className:"text-lime-300"}),title:"Miniverso Apps",description:`Pantallas que acompaan.
Tecnologas que cuidan.
Aqu sigues el universo,
sin salir del tuyo.`},{id:"sonoro",icon:p.jsx(cO,{size:20,className:"text-cyan-300"}),title:"Miniverso Sonoro",description:`Suea una imagen.
Elige un pulso.
Deja que el poema respire por ti.`},{id:"bitacora",icon:p.jsx(HT,{size:20,className:"text-indigo-300"}),title:"Miniverso Bitcora",description:`Crnicas que laten.
Pistas que se desdoblan.
La vida y la muerte conversan aqu.`},{id:"otro",icon:p.jsx(IV,{size:20,className:"text-fuchsia-300"}),title:"Otra contribucin",description:"Performance, glitch sonoro o investigacin hbrida. Tambin cabe aqu."}],Pee={hidden:{opacity:0},visible:{opacity:.85}},Nee={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},vx={name:"",email:"",role:"",proposal:"",attachmentUrl:""},N_="gatoencerrado-contrib-form",oL=new Set(["apps","bitacora","sonoro"]),Ree={obra_escenica:"Si la Obra te toc, este espacio es tuyo.",miniverso_novela:"Si encontraste algo tuyo entre estas pginas, djalo dicho.",taza:"Qu historia se activ cuando tomaste la taza? Escrbela aqu.",cine:"Qu imagen te persigui despus? Cuntanos qu viste ms all de la pantalla.",apps:"Cmo cambi tu forma de jugar o explorar este universo?",bitacora:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron.",otro:"Si no cabe en un miniverso es porque an no lo hemos nombrado.",sonoro:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron."},jee=({open:n,onClose:e})=>{const{user:t}=gv(),r=!!(t!=null&&t.email),i=_.useMemo(()=>{var Y,te;return((Y=t==null?void 0:t.user_metadata)==null?void 0:Y.alias)||((te=t==null?void 0:t.user_metadata)==null?void 0:te.full_name)||""},[t]),s=(t==null?void 0:t.email)??"",o=i||(s?s.split("@")[0]:""),[a,l]=_.useState(vx),[c,d]=_.useState("idle"),[h,f]=_.useState(""),[m,y]=_.useState(tc[0]),[g,b]=_.useState(!1),[v,x]=_.useState(!1),[w,E]=_.useState([]),[T,k]=_.useState(!1),[P,R]=_.useState(!1),[L,O]=_.useState(()=>typeof window>"u"?!1:window.matchMedia("(min-width: 768px)").matches),[F,I]=_.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 767px)").matches),U=_.useRef(null),B=_.useRef(null),[M,D]=_.useState(!1),z=r||g;_.useEffect(()=>{if(typeof window>"u")return;const Y=SP(N_);if(Y)try{const te=JSON.parse(Y);U.current=te,l(pe=>({...pe,...te.formState})),b(!!te.notifyOnPublish);const fe=tc.find(pe=>pe.id===te.selectedCategory);fe&&y(fe)}catch{U.current=null}D(!0)},[]),_.useEffect(()=>{if(!(!n||!M)){if(!U.current)l({...vx,name:r?o:"",email:r?s:""}),b(r),y(tc[0]),x(!1);else{const Y=U.current.formState??vx;l({...Y});const te=U.current.notifyOnPublish;b(typeof te=="boolean"?te:r);const fe=tc.find(pe=>pe.id===U.current.selectedCategory);fe&&y(fe),x(!0)}d("idle"),f("")}},[n,r,M]),_.useEffect(()=>{!n||!r||l(Y=>{var te;return{...Y,name:(te=Y.name)!=null&&te.trim()?Y.name:o,email:s||Y.email}})},[n,r,o,s]),_.useEffect(()=>{if(!n)return;const Y=te=>{te.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[n,e]),_.useEffect(()=>{if(typeof window>"u")return;const Y=window.matchMedia("(min-width: 768px)"),te=window.matchMedia("(max-width: 767px)"),fe=Ot=>{O(Ot.matches)},pe=Ot=>{I(Ot.matches)};return O(Y.matches),I(te.matches),Y.addEventListener?(Y.addEventListener("change",fe),te.addEventListener("change",pe)):(Y.addListener(fe),te.addListener(pe)),()=>{Y.removeEventListener?(Y.removeEventListener("change",fe),te.removeEventListener("change",pe)):(Y.removeListener(fe),te.removeListener(pe))}},[]),_.useEffect(()=>{r&&k(!1)},[r]);const $=_.useCallback(Y=>{const{name:te,value:fe}=Y.target;r&&te==="email"||l(pe=>({...pe,[te]:fe}))},[r]),V=_.useCallback(()=>{k(!1)},[]),N=_.useCallback(()=>{R(!0),setTimeout(()=>R(!1),420)},[]),W=_.useCallback(()=>{if(typeof window>"u")return;const Y=window.AudioContext||window.webkitAudioContext;if(!Y)return;const te=new Y,fe=te.createOscillator(),pe=te.createGain();fe.type="sine",fe.frequency.value=720,pe.gain.value=.03,fe.connect(pe),pe.connect(te.destination),fe.start(),fe.stop(te.currentTime+.1),fe.onended=()=>{te.close()}},[]),G=_.useCallback(()=>{B.current||(B.current=setTimeout(()=>{k(!0),B.current=null},520))},[]),j=_.useCallback(Y=>{if(N(),W(),setTimeout(W,140),!r){G();return}b(Y.target.checked)},[N,W,r,G]);_.useEffect(()=>{if(typeof window>"u")return;const Y={formState:a,notifyOnPublish:g,selectedCategory:m.id};yg(N_,JSON.stringify(Y)),U.current=Y},[a,g,m]),_.useEffect(()=>()=>{B.current&&clearTimeout(B.current)},[]);const ee=_.useCallback(()=>{const Y=Date.now();E(te=>[...te,Y]),setTimeout(()=>{E(te=>te.filter(fe=>fe!==Y))},1100)},[]),ye=_.useCallback(()=>{c!=="loading"&&(e==null||e(),!(typeof document>"u")&&setTimeout(()=>{var Y;(Y=document.querySelector("#transmedia"))==null||Y.scrollIntoView({behavior:"smooth",block:"start"})},80))},[e,c]),de=_.useCallback(async Y=>{var te;if(Y.preventDefault(),c!=="loading"){if(!a.name.trim()||!a.email.trim()||!a.proposal.trim()){Me({description:"Completa tu nombre, correo y una breve propuesta."});return}if(g&&!r){Me({description:"Inicia sesin para recibir la notificacin personalizada."});return}if(!r){Me({description:"Inicia sesin para enviar tu propuesta."}),G();return}d("loading"),f("");try{const fe=(m==null?void 0:m.id)??"obra_escenica",pe={name:a.name.trim(),email:a.email.trim().toLowerCase(),role:a.role.trim()||null,topic:fe,proposal:a.proposal.trim(),attachment_url:a.attachmentUrl.trim()||null,notify_on_publish:g},{error:Ot}=await pt.from("blog_contributions").insert(pe);if(Ot){console.error("[ContributionModal] Error al registrar propuesta:",Ot),d("error"),f((te=Ot.message)!=null&&te.includes("blog_contributions")?"Asegrate de crear la tabla blog_contributions en Supabase.":"No pudimos registrar tu propuesta. Intenta nuevamente.");return}try{const jn={author_email:pe.email,author_name:pe.name,category:fe,content:pe.proposal,meta:{origin:"public_site"}},{error:Nr}=await pt.from("backstage_contributions").insert(jn);Nr&&console.error("[ContributionModal] No se pudo duplicar en backstage_contributions:",Nr)}catch(jn){console.error("[ContributionModal] Excepcin duplicando en backstage_contributions:",jn)}a.email.trim()&&await Mee({email:a.email.trim().toLowerCase(),name:a.name.trim(),proposal:a.proposal.trim(),category:(m==null?void 0:m.title)??tc[0].title}),d("success"),ee(),Me({description:"Gracias! Revisaremos tu propuesta y te contactaremos pronto."}),l({...vx,name:i||"",email:(t==null?void 0:t.email)??""}),b(!1),y(tc[0]),x(!1),d3(N_),U.current=null}catch(fe){console.error("[ContributionModal] Excepcin al guardar:",fe),d("error"),f("Ocurri un error inesperado. Intenta ms tarde.")}}},[a,c,m,g,r,ee,i,t==null?void 0:t.email]),se=_.useCallback(()=>{c!=="loading"&&(e==null||e())},[e,c]),Ee=_.useCallback(Y=>{y(Y),x(!0)},[]),Fe=_.useMemo(()=>Ree[m==null?void 0:m.id]??"Contribuye al dilogo crtico",[m]),ve=_.useCallback(()=>{c!=="loading"&&x(!1)},[c]),Ue=()=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-4 py-3 text-[0.8rem] text-slate-300 leading-relaxed",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:"Qu necesitas saber?"}),p.jsx("p",{children:" Algunos miniversos an estn bajo construccin."}),p.jsx("p",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),p.jsx("p",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."}),p.jsx("div",{className:"border-t border-white/10 pt-3 text-xs uppercase tracking-[0.35em] text-slate-500",children:" Qu recibirs?"}),p.jsx("p",{className:"text-sm",children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]}),Dt=()=>p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Formulario"}),p.jsx("h3",{id:"contribution-modal-title",className:"font-display text-2xl text-slate-50",children:Fe}),p.jsxs("p",{className:"text-sm text-slate-400/80",children:["Ests escribiendo sobre"," ",p.jsx("span",{className:"text-purple-200 font-semibold",children:m.title})]})]}),F?p.jsx("button",{type:"button",onClick:ve,className:"mb-4 flex items-center gap-2 text-sm font-semibold text-purple-300 hover:text-purple-200",children:" Ver Ms"}):null,F&&oL.has(m.id)?p.jsx("div",{className:"mb-4",children:Ue()}):null,p.jsxs("form",{className:"space-y-4",onSubmit:de,children:[p.jsxs("div",{children:[p.jsx("input",{name:"name",type:"text",required:!0,value:a.name,onChange:$,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo quieres que te nombremos?"}),p.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"As quieres que te llamemos? Dinos cmo te gusta que te nombren."})]}),p.jsxs("div",{children:[p.jsx("input",{name:"email",type:"email",required:!0,value:a.email,onChange:$,readOnly:r,className:`w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 ${r?"cursor-not-allowed opacity-80":""}`,placeholder:"nombre@correo.com"}),r?p.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El correo se toma de tu sesin actual."}):null]}),p.jsx("input",{name:"role",type:"text",value:a.role,onChange:$,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Crtica teatral, artista, investigador, espectador..."}),p.jsx("textarea",{name:"proposal",rows:5,required:!0,value:a.proposal,onChange:$,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Resume tu texto, crnica o propuesta curatorial..."}),p.jsx("input",{name:"attachmentUrl",type:"url",value:a.attachmentUrl,onChange:$,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Enlace a material adicional (Drive, portfolio, video...)"}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-white/5 bg-black/20 px-4 py-3",children:[p.jsxs(ne.button,{type:"button",onClick:j,"aria-label":"Activar notificacin de publicacin",className:"relative flex items-center gap-3 text-left group focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-purple-400/60",children:[p.jsx(ne.div,{animate:z?{scale:[1,1.05,1],boxShadow:g?"0 0 18px rgba(74,222,128,0.65)":"0 0 12px rgba(74,222,128,0.45)",filter:"drop-shadow(0 0 10px rgba(74,222,128,0.45))"}:{scale:1,boxShadow:"0 0 0 rgba(0,0,0,0)"},transition:{duration:.45,ease:"easeOut"},className:`h-5 w-5 rounded-full border border-white/20 ${z?"bg-emerald-400 shadow-[0_0_12px_4px_rgba(52,211,153,0.65)] ring-2 ring-emerald-300/70":"bg-slate-600/40"}`}),p.jsx("span",{className:"text-sm text-slate-300/80 leading-relaxed",children:"Quiero recibir notificacin cuando se publique mi propuesta"})]}),r?null:p.jsx("span",{className:"pl-8 text-xs text-slate-500",children:"Inicia sesin para activar el seguimiento"})]}),c==="error"?p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:h}):null,c==="success"?p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Recibimos tu propuesta. Te contactaremos si necesitamos ms detalles."}):null,p.jsx(Te,{type:"submit",disabled:c==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:c==="loading"?"Enviando":"Enviar propuesta"})]}),L&&oL.has(m.id)?p.jsx("div",{className:"mt-6 space-y-3",children:Ue()}):null]});return p.jsxs(p.Fragment,{children:[p.jsx(Qs,{children:n?p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6 sm:py-12",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(ne.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:Pee,onClick:se,"aria-hidden":"true"}),p.jsxs(ne.div,{role:"dialog","aria-modal":"true","aria-labelledby":"contribution-modal-title",variants:Nee,className:"relative z-10 w-full max-w-5xl h-full max-h-[90vh] rounded-3xl border border-white/10 bg-slate-950 p-4 sm:p-8 shadow-2xl overflow-y-auto md:overflow-hidden flex flex-col gap-6",children:[p.jsxs("div",{className:"relative overflow-visible",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Blog / Dilogo vivo"}),p.jsx("h2",{className:"font-display text-2xl sm:text-3xl text-slate-50",children:"Contribuye al dilogo crtico"})]}),p.jsx("button",{onClick:se,className:"text-slate-400 hover:text-white transition text-xl leading-none","aria-label":"Cerrar formulario de propuestas",children:""})]}),w.map(Y=>p.jsx(Lee,{seed:Y},Y))]}),p.jsxs("div",{className:"mt-6 flex flex-col gap-6 md:flex-row md:items-start md:gap-6",children:[p.jsxs("div",{className:"flex-1 space-y-3 pr-3 md:pr-0 md:overflow-y-auto md:max-h-[72vh]",children:[tc.map(Y=>p.jsxs("button",{type:"button",onClick:()=>Ee(Y),className:`w-full rounded-2xl border px-4 py-4 text-left transition ${m.id===Y.id?"bg-purple-500/15 border-purple-300/40":"bg-black/20 border-white/10 hover:border-purple-300/30"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[Y.icon,p.jsx("h4",{className:"text-slate-100 font-medium",children:Y.title})]}),p.jsx("p",{className:"text-sm text-slate-400/80 leading-relaxed whitespace-pre-line",children:Y.description})]},Y.id)),p.jsx("div",{className:"pt-2 text-center text-xs text-purple-200/80",children:p.jsx("button",{type:"button",onClick:ye,className:"underline-offset-4 hover:underline",children:"No conoces los Miniversos? Clica aqu"})})]}),L?p.jsx("div",{className:"md:w-[520px] md:shrink-0",children:v?p.jsx(ne.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.35,ease:"easeOut"},className:"flex h-full max-h-[78vh] flex-col rounded-3xl border border-white/10 bg-slate-950/90 p-6 shadow-2xl overflow-y-auto",children:Dt()}):p.jsx("div",{className:"flex h-full min-h-[320px] items-center justify-center rounded-3xl border border-dashed border-white/10 bg-black/30 px-4 text-center text-sm text-slate-400",children:"Selecciona una categora para abrir el formulario."})}):null]}),p.jsx(Qs,{children:!L&&v?p.jsx(p.Fragment,{children:p.jsx(ne.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:24,stiffness:240},className:"fixed inset-0 z-[60] w-full bg-slate-950 border-white/15 shadow-2xl p-6 overflow-y-auto md:hidden",children:Dt()})}):null})]})]}):null}),p.jsx(Qs,{children:T?p.jsx(AP,{onClose:V}):null})]})};async function Mee({email:n,name:e,proposal:t,category:r}){if(n)try{const{error:i}=await pt.functions.invoke("send-proposal-confirmation",{body:{email:n,name:e,proposal:t,category:r}});i&&console.error("[ContributionModal] Error en sendConfirmationEmail:",i)}catch(i){console.error("[ContributionModal] Excepcin en sendConfirmationEmail:",i)}}const aL=["#f472b6","#a855f7","#facc15","#34d399"],Lee=({seed:n})=>{const e=_.useMemo(()=>Array.from({length:12},(t,r)=>({left:Math.random()*100,top:Math.random()*20,delay:Math.random()*.2,color:aL[r%aL.length]})),[n]);return p.jsx("div",{className:"confetti-layer",children:e.map((t,r)=>p.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${t.top}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${r}`))})},R_=n=>(n||"").toString().trim().toLowerCase(),kg=["curaduria","expansiones","backstage"],yb={curaduria:{id:"curaduria",label:"Curadura Reflexiva",summary:"Textos crticos y anlisis profundos sobre la obra y su universo, escritos por investigadores, curadoras y voces especializadas.",keywords:["curaduria","curatorial","critica","ensayo","analisis","reflexiva"]},expansiones:{id:"expansiones",label:"Expansiones Narrativas",summary:"Microficciones, comunidad y relatos que acompaan los miniversos transmedia: cartas, diarios, audios y relatos colectivos.",keywords:["miniverso","transmedia","ficcion","comunidad","microficcion","expansion"]},backstage:{id:"backstage",label:"Detrs de Cmaras",summary:"Noticias, avances y bitcoras del proceso creativo: apps, novela, ensayo tcnico, produccin y archivos del montaje.",keywords:["backstage","proceso","produccion","apps","novela","noticias","detras"]}},Iee=["carta-a-copycats","taza-que-habla"],lL=kg[0],Dee=n=>{if(!n)return lL;const e=R_(n.category);if(e&&kg.includes(e))return e;const t=R_(n.slug);if(t&&Iee.includes(t))return"expansiones";const r=Array.isArray(n.tags)?n.tags.map(i=>R_(i)).filter(Boolean):[];for(const i of kg){const s=yb[i].keywords;if(r.some(o=>s.includes(o)))return i}return lL};async function Oee({post:n,action:e,liked:t,notify:r,miniverse:i,mostViewedMiniverse:s,mostViewedMiniverseCount:o,interactionContext:a="blog_article_footer"}){if(!(n!=null&&n.id)||!(n!=null&&n.slug))return{success:!1,error:new Error("Falta el identificador del artculo")};const l={post_id:n.id,post_slug:n.slug,post_title:n.title,action:e,liked:!!t,notify:!!r,miniverse:i,most_viewed_miniverse:s,most_viewed_miniverse_count:o??null,interaction_context:a,metadata:{author:n.author,tags:n.tags??[],published_at:n.published_at}},{error:c}=await pt.from("blog_article_interactions").insert(l);return{success:!c,error:c}}const cL={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},uL={cine:{label:"Miniverso Cine",views:4320,subcategories:["Quirn","Copycats","Campo expandido"]},expansiones:{label:"Expansiones Narrativas",views:3860,subcategories:["Cartas","Bitcoras","Microrrelatos"]},curaduria:{label:"Curadura Reflexiva",views:2780,subcategories:["Ensayo crtico","Cartografas emocionales"]},apps:{label:"Miniverso Apps",views:2190,subcategories:["Guardianes digitales","Glitches","Rituales mviles"]},sonoro:{label:"Miniverso Sonoro",views:2010,subcategories:["Pistas","Field recordings","Ondas"]},bitacora:{label:"Miniverso Bitcora",views:1760,subcategories:["Crnicas","Archivo vivo","Cartas"]},taza:{label:"Miniverso Taza",views:1630,subcategories:["Objetos rituales","Memorias lquidas"]},otro:{label:"Otra contribucin",views:1480,subcategories:["Performance","Investigacin hbrida"]}},Fee={cine:["cine","quirn","copycats","film","pelcula"],expansiones:["expansiones","miniverso","novela","diario","microficcin"],curaduria:["curadura","critica","analisis","ensayo"],apps:["app","apps","digital","interactivo"],sonoro:["sonoro","audio","msica","sonidos"],bitacora:["bitcora","bitacora","cronica","crnica"],taza:["taza","objeto","cermica","ritual"],otro:["performance","hbrido","glitch","experimental"]},Bee=n=>{const e=[n.category,n.slug,n.title,n.excerpt,...Array.isArray(n.tags)?n.tags:[]].filter(Boolean).join(" ").toLowerCase();for(const[t,r]of Object.entries(Fee))if(r.some(i=>e.includes(i)))return t;return"curaduria"},zee={p:({node:n,...e})=>p.jsx("p",{className:"leading-relaxed font-light text-slate-200",...e}),strong:({node:n,...e})=>p.jsx("strong",{className:"font-semibold text-white",...e}),em:({node:n,...e})=>p.jsx("em",{className:"italic text-slate-100",...e}),blockquote:({node:n,...e})=>p.jsx("blockquote",{className:"border-l-4 border-purple-400/60 pl-4 italic text-slate-200/90 bg-white/5 py-2 rounded-r-xl",...e}),ul:({node:n,...e})=>p.jsx("ul",{className:"ml-6 list-disc space-y-2 text-slate-200",...e}),ol:({node:n,...e})=>p.jsx("ol",{className:"ml-6 list-decimal space-y-2 text-slate-200",...e}),li:({node:n,...e})=>p.jsx("li",{className:"leading-relaxed",...e}),a:({node:n,...e})=>p.jsx("a",{className:"text-purple-300 underline decoration-dotted hover:text-purple-200 transition-colors",target:"_blank",rel:"noopener noreferrer",...e})},$ee=({post:n,onSelect:e})=>{const t=n.published_at?new Date(n.published_at):null;return p.jsxs(ne.article,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,ease:"easeOut"},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col hover-glow transition-shadow",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm text-slate-400",children:[t&&p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx($T,{size:16}),t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}),n.read_time_minutes?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(nO,{size:16}),n.read_time_minutes," min lectura"]}):null,p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(SS,{size:16}),n.author,n.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]})]}),p.jsx("h3",{className:"font-display text-2xl md:text-3xl font-medium text-slate-100 mb-4",children:n.title}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-6",children:n.excerpt}),Array.isArray(n.tags)&&n.tags.length>0?p.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:n.tags.map(r=>p.jsx("span",{className:"text-xs uppercase tracking-wider text-purple-200/80 bg-purple-500/10 border border-purple-400/20 px-3 py-1 rounded-full",children:r},r))}):null,p.jsx(Te,{onClick:()=>e(n),variant:"outline",className:"self-start border-purple-400/40 text-purple-200 hover:bg-purple-500/20",children:"Leer artculo completo"})]})},Uee=({post:n,onClose:e})=>{const t=_.useMemo(()=>{var i;return((i=n==null?void 0:n.content)==null?void 0:i.trim())??""},[n]),r=n.published_at?new Date(n.published_at):null;return p.jsxs(ne.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.4,ease:"easeOut"},className:"glass-effect rounded-3xl p-8 md:p-12 border border-white/10 shadow-2xl backdrop-blur-xl",children:[p.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[p.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-400",children:[r?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx($T,{size:16}),r.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}):null,p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(SS,{size:16}),n.author,n.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]}),n.read_time_minutes?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(nO,{size:16}),n.read_time_minutes," min lectura"]}):null]}),p.jsx(Te,{onClick:e,variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/10",children:"Cerrar artculo"})]}),p.jsx("h3",{className:"font-display text-3xl md:text-4xl font-semibold text-slate-50 mb-8",children:n.title}),t?p.jsx("div",{className:"flex flex-col gap-6 text-slate-200 leading-relaxed font-light",children:p.jsx(P5,{components:zee,skipHtml:!1,linkTarget:"_blank",children:t})}):p.jsx("div",{className:"space-y-6 text-slate-200 leading-relaxed font-light",children:p.jsx("p",{children:"Este artculo estar disponible muy pronto. Gracias por tu inters en la comunidad crtica de #GatoEncerrado."})}),p.jsx(Vee,{post:n})]})},Vee=({post:n})=>{const{user:e}=gv(),[t,r]=_.useState(!1),i=_.useCallback(()=>r(!0),[]),s=_.useCallback(()=>r(!1),[]),o=_.useMemo(()=>Bee(n),[n]),a=uL[o]??uL.curaduria,[l,c]=_.useState(!1),[d,h]=_.useState(!1),[f,m]=_.useState({like:"idle",notify:"idle"}),y=async g=>{const b=g==="like"?!l:l,v=g==="notify"?!d:d;if(g==="notify"&&!e){Me({description:"Inicia sesin para recibir notificaciones y continuar en el Backstage."}),i();return}m(E=>({...E,[g]:"loading"}));const{success:x,error:w}=await Oee({post:n,action:g,liked:b,notify:v,miniverse:o,mostViewedMiniverse:a.label,mostViewedMiniverseCount:a.views??null});x?g==="like"?(c(b),Me({description:b?"Gracias por tu apoyo.":"Quitaste el Me gusta."})):(h(v),Me({description:v?"Te avisaremos cuando haya novedades sobre este texto.":"Ya no recibes notificaciones de este artculo."})):(console.error("[ArticleInteraction] Error guardando interaccin:",w),Me({description:"No pudimos guardar tu interaccin. Intenta nuevamente."})),m(E=>({...E,[g]:"idle"}))};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mt-10 rounded-3xl border border-white/10 bg-black/40 p-6 shadow-[0_30px_80px_rgba(0,0,0,0.35)]",children:[p.jsx("p",{className:"text-base text-slate-200",children:"La lectura te movi?"}),p.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Clic en los botones y registramos la interaccin para alimentar al gato del Backstage."}),p.jsxs("div",{className:"mt-6 flex flex-col gap-3 md:flex-row",children:[p.jsx(Te,{variant:l?"secondary":"default",size:"lg",onClick:()=>y("like"),disabled:f.like==="loading",className:"flex-1",children:l?"Gracias por el Me gusta":"Me gust este artculo"}),p.jsx(Te,{variant:"outline",size:"lg",onClick:()=>y("notify"),disabled:f.notify==="loading",className:"flex-1",children:d?"Te avisaremos de novedades":"Quiero recibir notificaciones"})]})]}),t?p.jsx(AP,{onClose:s}):null]})},j_="gatoencerrado-blog-onboarding",Hee=({posts:n=[],isLoading:e=!1,error:t=null})=>{const[r,i]=_.useState(null),[s,o]=_.useState(null),[a,l]=_.useState(!1),[c,d]=_.useState("all"),[h,f]=_.useState(""),[m,y]=_.useState(!1),g=_.useRef(null),b=_.useRef(!1),{user:v}=gv(),x=!!(v!=null&&v.email),w=hs("text-white px-8 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow transition mx-auto",x?"bg-gradient-to-r from-emerald-500/90 to-emerald-600/90 hover:from-emerald-400/90 hover:to-emerald-500/90 shadow-[0_0_35px_rgba(16,185,129,0.5)] ring-2 ring-emerald-400/30":"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600"),E=_.useMemo(()=>n.map(O=>({...O,category:Dee(O)})),[n]),T=_.useMemo(()=>[...E].sort((O,F)=>{const I=O.published_at?new Date(O.published_at).getTime():0;return(F.published_at?new Date(F.published_at).getTime():0)-I}),[E]),k=_.useMemo(()=>{const O=h.trim().toLowerCase();return T.filter(F=>(c==="all"?!0:F.category===c)?O?[F.title,F.author,F.excerpt,...Array.isArray(F.tags)?F.tags:[]].filter(Boolean).join(" ").toLowerCase().includes(O):!0:!1)},[T,c,h]),P=_.useCallback(O=>{i(O),requestAnimationFrame(()=>{const F=document.getElementById("blog-article");F==null||F.scrollIntoView({behavior:"smooth",block:"start"})})},[]),R=_.useCallback(O=>{d(O),requestAnimationFrame(()=>{var F;(F=g.current)==null||F.scrollIntoView({behavior:"smooth",block:"start"})})},[]);_.useEffect(()=>{if(s&&E.length>0){const O=E.find(F=>F.slug===s);O&&(P(O),o(null))}},[P,s,E]),_.useEffect(()=>{t&&Me({description:"No se pudieron cargar los artculos del blog."})},[t]),_.useEffect(()=>{const O=F=>{var B;const{slug:I}=F.detail||{};if(!I)return;const U=E.find(M=>M.slug===I);U?P(U):o(I),(B=document.getElementById("dialogo-critico"))==null||B.scrollIntoView({behavior:"smooth"})};return window.addEventListener("gatoencerrado:open-blog",O),()=>window.removeEventListener("gatoencerrado:open-blog",O)},[P,E]);const L=_.useCallback(()=>{l(!0),y(!1),b.current=!0,yg(j_,"seen")},[]);return _.useEffect(()=>{if(typeof window>"u"||b.current)return;if(SP(j_)==="seen"){y(!1),b.current=!0;return}y(!0);const F=setTimeout(()=>{y(!1),yg(j_,"seen"),b.current=!0},6e3);return()=>clearTimeout(F)},[]),_.useEffect(()=>{const O=()=>{l(!0)};return window.addEventListener("gatoencerrado:resume-contribution",O),()=>{window.removeEventListener("gatoencerrado:resume-contribution",O)}},[]),p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"dialogo-critico",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Dilogo Crtico"}),p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Pensamiento crtico, comunidad y resonancia"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Un espacio de pensamiento crtico, creatividad y potica donde convergen curadura, ficcin expandida y noticias detrs de escena. Filtra por inters, busca autoras especficas o explora las lneas editoriales."})]}),p.jsxs("div",{className:"space-y-16",children:[p.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1,ease:"easeOut"},viewport:{once:!0},className:"grid md:grid-cols-3 gap-6",children:kg.map(O=>p.jsxs("div",{className:"glass-effect rounded-2xl p-6 border border-white/10 flex flex-col gap-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:yb[O].label}),p.jsx("p",{className:"text-slate-300/80 text-sm leading-relaxed flex-1",children:yb[O].summary}),p.jsx(Te,{variant:"link",onClick:()=>R(O),className:"text-purple-300 hover:text-white self-start px-0",children:"Leer esta lnea editorial"})]},O))}),p.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{type:"button",onClick:()=>d("all"),className:`rounded-full border px-4 py-2 text-sm transition ${c==="all"?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:"Todas"}),kg.map(O=>p.jsx("button",{type:"button",onClick:()=>d(O),className:`rounded-full border px-4 py-2 text-sm transition ${c===O?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:yb[O].label},O))]}),p.jsxs("div",{className:"relative w-full md:w-72",children:[p.jsx(MV,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),p.jsx("input",{type:"search",value:h,onChange:O=>f(O.target.value),placeholder:"Buscar por ttulo o autor",className:"w-full rounded-full border border-white/10 bg-black/30 pl-10 pr-4 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400"})]})]}),p.jsx(ne.div,{ref:g,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.12}}},className:"grid md:grid-cols-2 gap-8",children:e?p.jsx(ne.div,{variants:cL,className:"md:col-span-2 text-center text-slate-400 py-12",children:"Cargando artculos"}):k.length===0?p.jsx(ne.div,{variants:cL,className:"md:col-span-2 text-center text-slate-400 py-12",children:"No encontramos textos con ese criterio. Ajusta el filtro o comparte un nuevo testimonio."}):k.map(O=>p.jsx($ee,{post:O,onSelect:P},O.id))}),p.jsx("div",{id:"blog-article",children:p.jsx(Qs,{mode:"wait",children:r?p.jsx(Uee,{post:r,onClose:()=>i(null)},r.id):null})})]}),p.jsxs(ne.div,{id:"blog-contribuye",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-20 glass-effect rounded-2xl p-8 md:p-12 text-center",children:[p.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"Algo de la obra se qued contigo?"}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-8 max-w-2xl mx-auto font-light",children:"Invitamos a espectadores, artistas, investigadores y espritus curiosos a compartir cmo esta obra reson en su forma de mirar, sentir, imaginar o habitar el mundo. Tu palabra tambin construye este universo."}),p.jsxs("div",{className:"relative inline-flex flex-col items-center gap-2",children:[m?p.jsx(ne.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -top-10 bg-purple-600/80 text-white text-xs px-3 py-1 rounded-full shadow-lg",children:"Nuevo! Abre la bandeja lateral y comparte tu texto"}):null,p.jsxs(Te,{id:"blog-submit-cta",onClick:L,className:w,children:[p.jsx(NV,{size:18})," Enviar propuesta"]})]})]})]})]}),p.jsx(jee,{open:a,onClose:()=>l(!1)})]})};var qee=_L[" useId ".trim().toString()]||(()=>{}),Gee=0;function N5(n){const[e,t]=_.useState(qee());return rd(()=>{n||t(r=>r??String(Gee++))},[n]),n||(e?`radix-${e}`:"")}var sA="Collapsible",[Wee,R5]=xS(sA),[Kee,ZP]=Wee(sA),j5=_.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:r,defaultOpen:i,disabled:s,onOpenChange:o,...a}=n,[l,c]=bS({prop:r,defaultProp:i??!1,onChange:o,caller:sA});return p.jsx(Kee,{scope:t,disabled:s,contentId:N5(),open:l,onOpenToggle:_.useCallback(()=>c(d=>!d),[c]),children:p.jsx(lr.div,{"data-state":t2(l),"data-disabled":s?"":void 0,...a,ref:e})})});j5.displayName=sA;var M5="CollapsibleTrigger",L5=_.forwardRef((n,e)=>{const{__scopeCollapsible:t,...r}=n,i=ZP(M5,t);return p.jsx(lr.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":t2(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:ir(n.onClick,i.onOpenToggle)})});L5.displayName=M5;var e2="CollapsibleContent",I5=_.forwardRef((n,e)=>{const{forceMount:t,...r}=n,i=ZP(e2,n.__scopeCollapsible);return p.jsx(IT,{present:t||i.open,children:({present:s})=>p.jsx(Xee,{...r,ref:e,present:s})})});I5.displayName=e2;var Xee=_.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:r,children:i,...s}=n,o=ZP(e2,t),[a,l]=_.useState(r),c=_.useRef(null),d=ia(e,c),h=_.useRef(0),f=h.current,m=_.useRef(0),y=m.current,g=o.open||a,b=_.useRef(g),v=_.useRef(void 0);return _.useEffect(()=>{const x=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(x)},[]),rd(()=>{const x=c.current;if(x){v.current=v.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const w=x.getBoundingClientRect();h.current=w.height,m.current=w.width,b.current||(x.style.transitionDuration=v.current.transitionDuration,x.style.animationName=v.current.animationName),l(r)}},[o.open,r]),p.jsx(lr.div,{"data-state":t2(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...s,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:g&&i})});function t2(n){return n?"open":"closed"}var Yee=j5,Qee=L5,Jee=I5,Zee=_.createContext(void 0);function ete(n){const e=_.useContext(Zee);return n||e||"ltr"}var fs="Accordion",tte=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[n2,nte,rte]=TD(fs),[oA,zte]=xS(fs,[rte,R5]),r2=R5(),D5=Pe.forwardRef((n,e)=>{const{type:t,...r}=n,i=r,s=r;return p.jsx(n2.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?p.jsx(ate,{...s,ref:e}):p.jsx(ote,{...i,ref:e})})});D5.displayName=fs;var[O5,ite]=oA(fs),[F5,ste]=oA(fs,{collapsible:!1}),ote=Pe.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:i=()=>{},collapsible:s=!1,...o}=n,[a,l]=bS({prop:t,defaultProp:r??"",onChange:i,caller:fs});return p.jsx(O5,{scope:n.__scopeAccordion,value:Pe.useMemo(()=>a?[a]:[],[a]),onItemOpen:l,onItemClose:Pe.useCallback(()=>s&&l(""),[s,l]),children:p.jsx(F5,{scope:n.__scopeAccordion,collapsible:s,children:p.jsx(B5,{...o,ref:e})})})}),ate=Pe.forwardRef((n,e)=>{const{value:t,defaultValue:r,onValueChange:i=()=>{},...s}=n,[o,a]=bS({prop:t,defaultProp:r??[],onChange:i,caller:fs}),l=Pe.useCallback(d=>a((h=[])=>[...h,d]),[a]),c=Pe.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return p.jsx(O5,{scope:n.__scopeAccordion,value:o,onItemOpen:l,onItemClose:c,children:p.jsx(F5,{scope:n.__scopeAccordion,collapsible:!0,children:p.jsx(B5,{...s,ref:e})})})}),[lte,aA]=oA(fs),B5=Pe.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:r,dir:i,orientation:s="vertical",...o}=n,a=Pe.useRef(null),l=ia(a,e),c=nte(t),h=ete(i)==="ltr",f=ir(n.onKeyDown,m=>{var R;if(!tte.includes(m.key))return;const y=m.target,g=c().filter(L=>{var O;return!((O=L.ref.current)!=null&&O.disabled)}),b=g.findIndex(L=>L.ref.current===y),v=g.length;if(b===-1)return;m.preventDefault();let x=b;const w=0,E=v-1,T=()=>{x=b+1,x>E&&(x=w)},k=()=>{x=b-1,x<w&&(x=E)};switch(m.key){case"Home":x=w;break;case"End":x=E;break;case"ArrowRight":s==="horizontal"&&(h?T():k());break;case"ArrowDown":s==="vertical"&&T();break;case"ArrowLeft":s==="horizontal"&&(h?k():T());break;case"ArrowUp":s==="vertical"&&k();break}const P=x%v;(R=g[P].ref.current)==null||R.focus()});return p.jsx(lte,{scope:t,disabled:r,direction:i,orientation:s,children:p.jsx(n2.Slot,{scope:t,children:p.jsx(lr.div,{...o,"data-orientation":s,ref:l,onKeyDown:r?void 0:f})})})}),hw="AccordionItem",[cte,i2]=oA(hw),z5=Pe.forwardRef((n,e)=>{const{__scopeAccordion:t,value:r,...i}=n,s=aA(hw,t),o=ite(hw,t),a=r2(t),l=N5(),c=r&&o.value.includes(r)||!1,d=s.disabled||n.disabled;return p.jsx(cte,{scope:t,open:c,disabled:d,triggerId:l,children:p.jsx(Yee,{"data-orientation":s.orientation,"data-state":G5(c),...a,...i,ref:e,disabled:d,open:c,onOpenChange:h=>{h?o.onItemOpen(r):o.onItemClose(r)}})})});z5.displayName=hw;var $5="AccordionHeader",U5=Pe.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,i=aA(fs,t),s=i2($5,t);return p.jsx(lr.h3,{"data-orientation":i.orientation,"data-state":G5(s.open),"data-disabled":s.disabled?"":void 0,...r,ref:e})});U5.displayName=$5;var zC="AccordionTrigger",V5=Pe.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,i=aA(fs,t),s=i2(zC,t),o=ste(zC,t),a=r2(t);return p.jsx(n2.ItemSlot,{scope:t,children:p.jsx(Qee,{"aria-disabled":s.open&&!o.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...a,...r,ref:e})})});V5.displayName=zC;var H5="AccordionContent",q5=Pe.forwardRef((n,e)=>{const{__scopeAccordion:t,...r}=n,i=aA(fs,t),s=i2(H5,t),o=r2(t);return p.jsx(Jee,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});q5.displayName=H5;function G5(n){return n?"open":"closed"}var ute=D5,dte=z5,hte=U5,W5=V5,K5=q5;const fte=ute,X5=Pe.forwardRef(({className:n,...e},t)=>p.jsx(dte,{ref:t,className:hs("border-b",n),...e}));X5.displayName="AccordionItem";const Y5=Pe.forwardRef(({className:n,children:e,...t},r)=>p.jsx(hte,{className:"flex",children:p.jsxs(W5,{ref:r,className:hs("tran-accordion-trigger flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,p.jsx("span",{className:"trigger-line","aria-hidden":"true"}),p.jsx(SV,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Y5.displayName=W5.displayName;const Q5=Pe.forwardRef(({className:n,children:e,...t},r)=>p.jsx(K5,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:p.jsx("div",{className:hs("pb-4 pt-0",n),children:e})}));Q5.displayName=K5.displayName;const pte={Direccin:{name:"Gilberto Corrales",bio:"Director, dramaturgo y actor. Licenciado en Teatro por la Facultad de Artes de la UABC, ha dirigido ms de cuarenta obras, la mayora de su autora. Su trabajo explora la transdisciplina y la investigacin del lenguaje escnico. Fundador de Incendio Producciones, sus obras han estado presentes en la Muestra Nacional de Teatro y en festivales de Colombia, Argentina y EE.UU. Ganador del Premio Juventud 2016 y del FITU UNAM. Dirige el Contagio Tijuana y colabora con artistas como Jorge Ballina y Daniel Primo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/gil-corrales.gif"},Elenco:{description:"Actores y actrices que encarnan el pulso emocional de la obra desde la fisicalidad, la voz y la presencia simblica.",members:[{id:"elenco-cyndi",name:"Cynthia Teresa Rodrguez Aguirre",role:"Intrprete",bio:"Artista interdisciplinaria egresada de la UABC. Su prctica integra fotografa, escritura y teatro. Ha participado en el San Diego Fringe Festival y en montajes de Incendio Producciones. Actualmente se enfoca en la direccin escnica y la exploracin visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/cyndi.jpg"},{id:"elenco-mariana",name:"Mariana de los Santos",role:"Intrprete",bio:"Actriz tijuanense formada en CEART y con experiencia en cine y teatro contemporneo. Su trabajo corporal revela una sensibilidad potica que dialoga entre lo ntimo y lo colectivo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariana.jpg"},{id:"elenco-ricardo",name:"Ricardo Mrquez Salgado",role:"Intrprete",bio:"Comuniclogo, modelo y actor. Ha participado en teatro, cine y publicidad. Destacan sus coprotagnicos en 'Ideas para no morir en el anonimato' y 'Entre Dos'. Su presencia combina energa escnica y precisin esttica.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/ricardo.jpg"},{id:"elenco-carlos-valdez",name:"Carlos Valdez Rosas",role:"Intrprete",bio:"Actor y productor de Incendio Producciones. Su trabajo combina performance, posdrama e interdisciplina. Ha participado en la Muestra Nacional de Teatro y festivales internacionales en Argentina y Estados Unidos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlitos.jpg"}]},Dramaturgia:{name:"Carlos A. Prez H.",bio:"Artista transmedia, autor y dramaturgo. Su obra habita entre teatro, escritura y tecnologa, proponiendo una potica crtica y humana. Formado en el ITESO, la Universidad de Salamanca y LABASAD Barcelona, integra astrologa psicolgica, cuerpo y arte digital en una mirada simblica. Creador del universo transmedia #GatoEncerrado, concibe el acto creativo como una forma de acompaamiento y transformacin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlos_perez.gif"},"Diseo y Tcnica Escnica":{description:"Un equipo de diseadores y tcnicos escnicos que entrelazan arquitectura, multimedia, sonido y luz para expandir la atmsfera de la obra.",members:[{name:"Jorge Ballina",role:"Escenografa",bio:"Arquitecto y escengrafo con ms de 120 obras en teatro, danza y pera. Miembro del Sistema Nacional de Creadores de Arte, ha sido galardonado con premios internacionales como el World Stage Design Toronto y Calgary. Su trabajo combina estructura y poesa visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/jorge.jpg"},{name:"Daniel Primo",role:"Video Escenogrfico e Iluminacin",bio:"Artista visual y diseador escnico. Explora la relacin entre multimedia y espacio escnico. Integrante del Sistema Nacional de Creadores, su trabajo ha sido presentado en Europa, Asia y Amrica. Cofundador de Engranaje Invertebrado.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/primo.jpg"},{name:"La Prez",role:"Diseo Sonoro",bio:"Artista sonora con ms de doce aos de experiencia. Fundadora de Concrete Sounds, ha colaborado en filmes como 'Ya no estoy aqu' y 'Monos'. Su especialidad es la creacin de paisajes inmersivos que amplan la dimensin sensorial del teatro.",image:"/images/placeholder-diseno.jpg"},{name:"Harold Garca",role:"Direccin Tcnica",bio:"Arquitecto y diseador lumnico. Ha colaborado en producciones como 'Matilda', 'Mamma Mia!' y 'Madame Butterfly'. Su trabajo abarca teatro, pera y danza contempornea, con presentaciones en Mxico, Los ngeles y festivales nacionales.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/harold.jpg"},{name:"Rebeca Hernndez",role:"Realizacin Escenogrfica",bio:"Diseadora industrial egresada del CIDI-UNAM y fundadora de Atelier RHC en Tijuana. Su taller produce escenografas, mobiliario y piezas funcionales para teatro y espacios pblicos, uniendo tcnica artesanal con visin contempornea.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rebeca.jpg"},{name:"Ximena Inurreta",role:"Asistente de Diseo de Escenografa",bio:"Diseadora escnica emergente que apoya el desarrollo de atmsferas visuales y transiciones espaciales en el montaje de #GatoEncerrado.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/Ximena.jpg"},{name:"Diego Madera",role:"Tema Musical",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio. Su pieza original acompaa los pasajes emocionales de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png"},{name:"Karla Flores",role:"Realizacin de Vestuario",bio:"Diseadora de vestuario que traduce emociones en textura, movimiento y color. Su trabajo aporta profundidad simblica a la corporalidad de los intrpretes.",image:"/images/placeholder-diseno.jpg"},{name:"Jonathan Lazcano",role:"Pelucas",bio:"Artista de caracterizacin. Su trabajo artesanal da vida y coherencia visual a los personajes a travs del detalle y la textura.",image:"/images/placeholder-diseno.jpg"}]},"Produccin y Asistencia":{description:"Un equipo que coordina, articula y acompaa cada engranaje de la produccin escnica con mirada sensible, tcnica y humana.",members:[{name:"Rosala Hernndez Milln",role:"Produccin General y Vinculacin Social",bio:"Presidenta de Isabel A.C. Ayuda para la Vida, Maestra en Psicobiologa y Neurociencia Cognitiva (UAB). Su labor impulsa la integracin entre arte y bienestar emocional, fortaleciendo el puente entre el proyecto escnico y la comunidad.",image:"/images/placeholder-colaboradores.jpg"},{name:"Miroslava Wilson",role:"Produccin Ejecutiva",bio:"Productora ejecutiva, directora y asesora de movimiento. Originaria de Hermosillo y radicada en Tijuana, es fundadora de Pndulo Cero A.C. y educadora de movimiento somtico certificada por Body Mind Movement. Su trabajo interdisciplinario vincula arte, medio ambiente y humanismo. Ha presentado su obra en Asia, Amrica y Europa, y actualmente impulsa proyectos como Casa Viva y SomasSomos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/Miroslava%20.jpg"},{name:"Marcela Durn Mulia",role:"Produccin Administrativa",bio:"Actriz, gestora y representante legal de Incendio Producciones. Licenciada en Comunicacin (UABC) y Maestra en Alta Direccin Corporativa (Humanitas). Ha participado en la Muestra Nacional de Teatro, ENARTES y otros festivales internacionales. Su mirada estratgica une la gestin cultural con la sensibilidad artstica.",image:"/images/placeholder-colaboradores.jpg"},{name:"Gabriel Monroy",role:"Asistencia de Direccin y Gestin",bio:"Actor, fotgrafo escnico y gestor. Licenciado en Artes Escnicas por la Universidad de Sonora. Creador de la serie fotogrfica 'Reflejos de la escena', exhibida internacionalmente. Su mirada visual y su acompaamiento escnico fortalecen el proceso de direccin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/gabriel.jpg"},{name:"Roco Morgan",role:"Asistencia Ejecutiva",bio:"Gestora cultural y apoyo logstico de produccin. Su labor sostiene los procesos administrativos y humanos que hacen posible la operacin cotidiana de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rocio.jpg"},{name:"Mara Diana Laura Rodriguez",role:"Enlace de Produccin",bio:"Maquillista y traspunte en el Teatro Camafeo. Fue un apoyo operativo clave en la etapa temprana de #GatoEncerrado y facilit el enlace con el director Gilberto Corrales, gesto que defini la continuidad del proyecto. Su iniciativa y acompaamiento hicieron posible que el montaje avanzara en el momento ms decisivo.",image:"/images/placeholder-produccion.jpg"}]},"Colaboradores y Agradecimientos":{description:"Detrs de cada funcin existe una constelacin de manos, miradas y corazones que hacen posible la obra de Es un Gato Encerrado. Este bloque celebra su labor silenciosa y luminosa.",members:[],details:{tecnicos:"Asistencia tcnica y tramoya: Renee Camacho  asistencia tcnica y tramoya. Luis Fernando Lpez Snchez, Alex Nava, Christian Camacho  equipo de realizacin de escenografa. Marco Antonio Corral Gastelm, Manuel Axxel Aquino, Santiago Augusto Rodrguez, Alejandro Saldaa  realizadores y tramoya.",registro:"Registro, foto y medios: Viviana Gonzlez  registro creativo videogrfico. Sergio Brown  registro audiovisual. Enigma Creative  publicidad y diseo grfico. Eclipse Comunicacin Estratgica  difusin y medios.",institucionales:"Apoyos institucionales: Agradecimiento a Teatro CAMAFEO y sus productoras Margarita Martnez de Camarena y Elsa Prez de Vargas; CEART Tijuana, IMAC, Casa Viva y Adagio Studio por su apoyo en ensayos y espacios."}},"Alianza Estratgica de Impacto Social":{name:"Isabel Ayuda para la Vida A.C.",bio:"Asociacin civil sin fines de lucro fundada en 2018 y dirigida por Rosala Hernndez Milln. Su misin es prevenir la violencia autoinfligida mediante el programa DySVAE, promoviendo el pedir ayuda como estrategia de vida. Colabora con #GatoEncerrado para visibilizar la salud emocional y la empata en contextos artsticos y educativos.",image:"/images/placeholder-institucional.jpg"}},mte=()=>{const[n,e]=_.useState(null),[t,r]=_.useState(!1),i=_.useRef(null);_.useEffect(()=>{const o=()=>r(typeof window<"u"?window.innerWidth<768:!1);return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),_.useEffect(()=>{t&&n&&e(null)},[t,n]);const s=(o,a)=>{const l=a==="Elenco",c=a==="Diseo y Tcnica Escnica"||a==="Produccin y Asistencia";if(Array.isArray(o==null?void 0:o.members)){const d=l&&!t,h=o.members.map((m,y)=>({member:m,id:m.id||`${m.name}-${y}`,idx:y})),f=d&&n?[...h.filter(m=>m.id===n),...h.filter(m=>m.id!==n)]:h;return p.jsxs("div",{className:"space-y-6",children:[o.description&&p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-2 md:text-base sm:text-sm",children:o.description}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:f.map(({member:m,id:y})=>{const g=d&&n===y,b=()=>d?e(v=>v===y?null:y):void 0;return g?p.jsx("div",{className:"glass-effect rounded-xl p-0 overflow-hidden border border-white/5 transition-all duration-300 md:col-span-2",children:p.jsx("button",{type:"button",onClick:b,className:"block w-full focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400",children:p.jsx("img",{className:"w-full h-full max-h-[520px] object-cover",src:m.image,alt:`Retrato de ${m.name}`,loading:"lazy"})})},y):c?p.jsxs("div",{className:"glass-effect rounded-xl p-5 flex gap-4 items-start border border-white/5",children:[p.jsx("img",{className:"h-20 w-20 flex-shrink-0 rounded-full object-cover shadow-lg shadow-black/30",src:m.image,alt:`Retrato de ${m.name}`,loading:"lazy"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-display text-lg text-purple-200",children:m.name}),m.role&&p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:m.role}),m.bio&&p.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:m.bio}),m.url&&p.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:m.urlLabel??"Ver perfil"})]})]},y):p.jsxs("div",{className:`glass-effect rounded-xl p-5 flex flex-col md:flex-row gap-4 border border-white/5 transition-all duration-300 ${d?"cursor-pointer hover:border-purple-400/40":""}`,onClick:b,role:d?"button":void 0,tabIndex:d?0:void 0,onKeyDown:d?v=>{(v.key==="Enter"||v.key===" ")&&(v.preventDefault(),b())}:void 0,children:[p.jsx("div",{className:"w-full md:w-44 overflow-hidden rounded-lg border border-white/5 bg-black/30",children:p.jsx("img",{className:"w-full h-44 object-cover shadow-lg shadow-black/30",src:m.image,alt:`Retrato de ${m.name}`,loading:"lazy"})}),p.jsxs("div",{className:"space-y-2 flex-1",children:[p.jsx("h4",{className:"font-display text-lg text-purple-200",children:m.name}),m.role&&p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:m.role}),m.bio&&p.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:m.bio}),m.url&&p.jsx("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:m.urlLabel??"Ver perfil"})]})]},y)})}),o.details&&p.jsxs("div",{className:"text-slate-400 text-sm leading-relaxed space-y-4",children:[p.jsx("div",{className:"border-t border-white/10 pt-4",children:o.details.tecnicos}),p.jsx("div",{className:"border-t border-white/10 pt-4",children:o.details.registro}),p.jsx("div",{className:"border-t border-white/10 pt-4",children:o.details.institucionales})]})]})}return p.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsx("img",{className:"w-full h-48 object-cover rounded-lg shadow-lg shadow-black/30",alt:`Retrato de ${o.name}`,src:o.image})}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("h3",{className:"font-display text-xl font-bold text-purple-300 mb-2",children:o.name}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light md:text-base sm:text-sm",children:o.bio})]})]})};return p.jsxs("section",{id:"team",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Equipo Creativo"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light md:text-base sm:text-sm",children:"Un colectivo de artistas multidisciplinarios unidos por la pasin de crear experiencias teatrales que desafan los lmites del arte escnico y la empata."})]}),p.jsx(ne.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"max-w-4xl mx-auto",children:p.jsx(fte,{type:"single",collapsible:!0,className:"w-full space-y-4",ref:i,onValueChange:()=>{i.current&&i.current.scrollIntoView({behavior:"smooth",block:"start"})},children:Object.entries(pte).map(([o,a],l)=>p.jsxs(X5,{value:`item-${l}`,className:"glass-effect rounded-lg border-none overflow-hidden",children:[p.jsx(Y5,{className:"font-display text-xl md:text-2xl text-slate-100 p-6 hover:no-underline hover:bg-white/5 transition-colors duration-300",children:o}),p.jsx(Q5,{className:"p-6 pt-0 bg-black/20",children:s(a,o)})]},o))})})]})]})};async function gte(){const n="galeria de gatoencerrado";try{const{data:e,error:t}=await pt.storage.from(n).list("",{limit:100,offset:0,sortBy:{column:"name",order:"desc"}});return t?(console.error("Error al listar imgenes:",t.message),[]):e.filter(i=>i.name.match(/\.(jpg|jpeg|png|webp)$/i)).map(i=>{const s=pt.storage.from(n).getPublicUrl(i.name).data.publicUrl;return{id:i.id||i.name,imgSrc:s,alt:i.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," "),postUrl:s}})}catch(e){return console.error("Excepcin al obtener imgenes del bucket:",e),[]}}const xx=[{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.8deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-2 lg:rotate-[0.3deg]",frame:"shadow-[14px_14px_0_rgba(167,139,250,0.14)]",tint:"from-purple-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:translate-y-3 lg:rotate-[0.9deg]",frame:"shadow-[12px_12px_0_rgba(129,140,248,0.14)]",tint:"from-indigo-400/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-2",frame:"shadow-[11px_11px_0_rgba(248,113,113,0.15)]",tint:"from-rose-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-2 sm:row-span-3 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-4",offset:"lg:translate-y-2 lg:-rotate-[1.6deg]",frame:"shadow-[16px_16px_0_rgba(251,191,36,0.14)]",tint:"from-amber-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-2",offset:"lg:-translate-y-4 lg:rotate-[-0.7deg]",frame:"shadow-[13px_13px_0_rgba(45,212,191,0.15)]",tint:"from-teal-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-3 lg:rotate-[0.6deg]",frame:"shadow-[12px_12px_0_rgba(148,163,184,0.16)]",tint:"from-slate-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-4 lg:row-span-4",offset:"lg:-translate-y-2 lg:rotate-[0.4deg]",frame:"shadow-[16px_16px_0_rgba(110,231,183,0.12)]",tint:"from-emerald-300/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-3",offset:"lg:translate-y-2 lg:-rotate-[0.9deg]",frame:"shadow-[13px_13px_0_rgba(244,162,97,0.13)]",tint:"from-orange-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.7deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-3",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-yellow-300/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-1 lg:rotate-[1deg]",frame:"shadow-[15px_15px_0_rgba(153,246,228,0.12)]",tint:"from-teal-200/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-2 md:row-span-4 lg:col-span-2 lg:row-span-4",offset:"lg:-translate-y-4 lg:-rotate-[1.1deg]",frame:"shadow-[20px_20px_0_rgba(203,213,225,0.13)]",tint:"from-slate-200/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[31px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.33deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"}],yte=[{match:"Copia de Foto 1 (1)",patternIndex:0,story:"Corte al vaco"},{match:"PoloyEstela",patternIndex:1,story:"Microclimas invisibles"},{match:"Copia de Foto 4",patternIndex:2,story:"Un nmero interminable"},{match:"Copia de Foto 3 (1)",patternIndex:3,story:"Memoria desdoblada"},{match:"Pausa entre actos",patternIndex:4,story:"Coreografa de luces"},{match:"Copia de Foto 4 (1)",patternIndex:5,story:"Confesin en penumbra"},{match:"_V7M6314",patternIndex:6,story:"Ritual previo al acto"},{match:"_V7M6296",patternIndex:7,story:"Risa entre grietas"},{match:"_V7M6348",patternIndex:8,story:"La jaula bajo la mesa"},{match:"Xanadu",patternIndex:9,story:"Voz que no se nombra"},{match:"_V7M6281",patternIndex:10,story:"El pliegue del vestido"},{match:"_V7M6324",patternIndex:11,story:"La cuerda floja"},{match:"_V7M6329",patternIndex:12,story:"Luz que acusa"},{match:"Copia de Foto 5 (1)",patternIndex:13,story:"Un eco sin dueo"},{match:"DSC02497",patternIndex:14,story:"Vestigio de sombras"}],bd=["Vestigio de sombras"],vte=()=>{const[n,e]=_.useState([]),[t,r]=_.useState(null),i="https://www.instagram.com/esungatoencerrado/?hl=en",s=15,[o,a]=_.useState(null),l=_.useRef(null),c=_.useRef(null),[d,h]=_.useState([]),f=_.useRef(0),m=_.useRef([]),y=_.useCallback((I,U)=>{if(!U)return!1;const B=`${I.alt||""} ${I.imgSrc||""}`.toLowerCase();return Array.isArray(U)?U.some(M=>B.includes(String(M).toLowerCase())):B.includes(String(U).toLowerCase())},[]),g=_.useCallback(I=>["susurro de vestuario","foto 2"].some(B=>y(I,B)),[y]);_.useEffect(()=>{(async()=>{try{const U=await gte();e(U)}catch(U){console.error("Error al traer imgenes del bucket:",U),r("No se pudieron cargar las imgenes del bucket.")}})()},[]),_.useEffect(()=>{if(n.length===0){h([]),f.current=0,m.current=[];return}const I=n.map((V,N)=>({post:V,originalIndex:N})).filter(({post:V})=>!g(V));if(I.length===0){h([]),f.current=0,m.current=[];return}const U=new Set,B=[];yte.forEach(V=>{const N=I.findIndex((W,G)=>!U.has(G)&&y(W.post,V.match));if(N!==-1){const W=I[N];U.add(N),B.push({postIndex:W.originalIndex,patternIndex:V.patternIndex??B.length%xx.length,story:V.story??bd[B.length%bd.length]})}});const M=I.map((V,N)=>({...V,idx:N})).filter(({idx:V})=>!U.has(V)).map((V,N)=>({postIndex:V.originalIndex,patternIndex:(B.length+N)%xx.length,story:bd[(B.length+N)%bd.length]})),D=[...B,...M];if(m.current=D,D.length===0){h([]),f.current=0;return}const z=Math.min(s,D.length),$=D.slice(0,z).map((V,N)=>({slotId:`${Date.now()}-${N}-${V.postIndex}-${Math.random()}`,postIndex:V.postIndex,patternIndex:V.patternIndex,story:V.story}));h($),f.current=D.length>0?z%D.length:0},[n,s,y,g]);const b=I=>{window.open(I,"_blank","noopener,noreferrer")},v=_.useCallback(I=>{l.current=document.activeElement,a(I)},[]),x=_.useCallback(()=>{a(null),l.current&&typeof l.current.focus=="function"&&l.current.focus()},[]),w=_.useCallback(()=>{a(I=>I===null?I:(I-1+n.length)%n.length)},[n.length]),E=_.useCallback(()=>{a(I=>I===null?I:(I+1)%n.length)},[n.length]);_.useEffect(()=>{if(o===null)return;const I=U=>{U.key==="Escape"&&x(),U.key==="ArrowLeft"&&w(),U.key==="ArrowRight"&&E()};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[o,x,w,E]);const T=o!==null,k=T&&n[o]?n[o]:null,P=n.length,R=o!==null?o:0,L=P>0?(R+1)/P*100:0;_.useEffect(()=>{T&&c.current&&c.current.focus()},[T]);const O={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.55,ease:"easeOut"}},exit:{opacity:0,y:-30,scale:.94,transition:{duration:.4,ease:"easeInOut"}}},F=_.useCallback((I,U)=>{if(!U||n.length<=s)return;const B=typeof window<"u"?window.innerHeight:0,M=U.boundingClientRect.bottom<=0,D=B?U.boundingClientRect.top>=B:!1;!M&&!D||h(z=>{if(!Array.isArray(z)||z.length===0)return z;const $=[...z],V=new Set($.filter((ee,ye)=>ye!==I).map(ee=>ee.postIndex)),N=m.current;if(!N||N.length===0)return z;let W=f.current??0,G=0;for(;G<N.length&&V.has(N[W].postIndex);)W=(W+1)%N.length,G+=1;if(G>=N.length)return z;const j=N[W];return f.current=(W+1)%N.length,$[I]={slotId:`${Date.now()}-${I}-${j.postIndex}-${Math.random()}`,postIndex:j.postIndex,patternIndex:j.patternIndex,story:j.story},$})},[n.length,s]);return p.jsxs("section",{id:"instagram",className:"py-20 relative",children:[p.jsx("div",{className:"section-divider mb-20"}),p.jsxs("div",{className:"container mx-auto px-5 sm:px-6",children:[p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.75,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-14",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-5 text-gradient italic",children:"Memoria Escnica"}),p.jsx("p",{className:"text-base md:text-lg text-slate-300/75 max-w-3xl mx-auto leading-relaxed mb-7 font-light",children:"Fragmentos de lo que solo sucede en escena Un homenaje visual al trabajo colectivo detrs de #GatoEncerrado: las funciones, los cuerpos, los silencios, las luces lo que solo existe cuando alguien lo mira."}),p.jsxs(Te,{onClick:()=>b(i),className:"bg-gradient-to-r from-pink-600/80 via-purple-600/80 to-indigo-600/80 hover:from-pink-600 hover:to-purple-600 text-white px-7 py-3 rounded-full font-semibold flex items-center gap-2 mx-auto hover-glow",children:[p.jsx(UT,{size:20}),"Seguir @esungatonecerrado",p.jsx(kV,{size:16})]})]}),t&&p.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 mb-6 text-center text-red-400 bg-red-900/20 rounded-lg",children:[p.jsx(xV,{size:22}),p.jsx("p",{children:t})]}),d.length>0?p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 lg:grid-cols-8 auto-rows-[95px] sm:auto-rows-[110px] md:auto-rows-[130px] lg:auto-rows-[150px] gap-2 md:gap-3 lg:gap-3.5",children:p.jsx(Qs,{mode:"popLayout",children:d.map((I,U)=>{const B=n[I.postIndex];if(!B)return null;const M=xx[I.patternIndex%xx.length],D=I.story??bd[(U+I.postIndex)%bd.length];return p.jsx(ne.button,{type:"button",layout:!0,variants:O,initial:"hidden",animate:"visible",exit:"exit",viewport:{amount:.5,once:!1},onViewportLeave:z=>F(U,z),onClick:()=>v(I.postIndex),onKeyDown:z=>{z.key==="Enter"&&v(I.postIndex)},className:`group relative isolate flex h-full w-full cursor-pointer items-stretch focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-400/60 ${M.grid}`,children:p.jsx("div",{className:`relative h-full w-full transition-transform duration-300 ease-out ${M.offset}`,children:p.jsxs(ne.div,{layout:!0,variants:O,initial:"hidden",whileInView:"visible",viewport:{amount:.6,once:!1},whileHover:{translateY:-6},transition:{duration:.35,ease:"easeOut"},className:`relative flex h-full w-full overflow-hidden rounded-[20px] bg-slate-950/70 backdrop-blur-sm ${M.frame}`,children:[p.jsx("span",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${M.tint}`,"aria-hidden":"true"}),p.jsx(ne.img,{src:B.imgSrc,alt:B.alt||"Recuerdo #GatoEncerrado",className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",initial:{scale:1.02,y:0,opacity:1},whileHover:{scale:1.06},transition:{duration:.35,ease:"easeOut"}}),p.jsxs("div",{className:"relative flex h-full flex-col justify-between p-3 md:p-4",children:[p.jsx("div",{className:"text-[0.58rem] uppercase tracking-[0.3em] text-slate-200/75 mix-blend-screen",children:"#GatoEncerrado"}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("div",{className:"w-8 md:w-10 border-t border-slate-200/30"}),p.jsx("p",{className:"text-[0.8rem] md:text-sm font-light text-slate-50/90 max-w-[10rem] md:max-w-[10.5rem] leading-relaxed drop-shadow-[0_10px_22px_rgba(15,23,42,0.6)]",children:D})]})]})]})})},I.slotId)})})}):!t&&p.jsx("div",{className:"text-center text-slate-400 animate-pulse italic",children:p.jsx("p",{children:"Cargando recuerdos..."})}),p.jsx(Qs,{children:T&&k&&p.jsxs(ne.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(ne.div,{className:"absolute inset-0 bg-slate-950/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:x}),p.jsxs(ne.div,{className:"relative z-10 w-full max-w-5xl overflow-hidden rounded-[28px] bg-slate-900/90 backdrop-blur-xl shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Recuerdo ampliado",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:26},children:[p.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:items-center md:gap-6",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-slate-300/90",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300/70",children:"#GatoEncerrado"}),p.jsxs("span",{className:"text-xs font-medium tracking-wide",children:[P>0?`${R+1}`:"0",p.jsxs("span",{className:"text-slate-400/80",children:["/",P]})]})]}),p.jsx("div",{className:"mt-3 h-2 rounded-full bg-white/10 overflow-hidden",children:p.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 transition-all duration-500",style:{width:`${L}%`},"aria-hidden":"true"})})]}),p.jsxs("div",{className:"flex items-center gap-3 self-start md:self-center",children:[p.jsx("button",{"aria-label":"Anterior",onClick:w,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(AV,{size:20})}),p.jsx("button",{"aria-label":"Siguiente",onClick:E,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(_V,{size:20})}),p.jsx("button",{ref:c,"aria-label":"Cerrar",onClick:x,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(AS,{size:18})})]})]}),p.jsx("div",{className:"relative aspect-[3/2] w-full bg-black",children:p.jsx("img",{src:k.imgSrc,alt:k.alt||"Recuerdo #GatoEncerrado",className:"h-full w-full object-contain"})})]})]},"gallery-modal")})]})]})},xte=()=>{const[n,e]=_.useState(!1),[t,r]=_.useState(!1),i=_.useCallback(()=>{e(!0)},[]),s=_.useCallback(()=>{e(!1)},[]),o=_.useCallback(()=>{r(!0)},[]),a=_.useCallback(()=>{r(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"next-show",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsx("div",{className:"container mx-auto px-6",children:p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12 text-center overflow-hidden",children:[p.jsxs("div",{className:"relative z-10",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-4 text-gradient italic",children:"Prxima Funcin"}),p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[p.jsx($T,{size:24,className:"text-purple-300"}),p.jsx("span",{className:"font-display text-2xl md:text-3xl text-slate-100 font-semibold",children:"28 de Diciembre"})]}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-2xl mx-auto leading-relaxed mb-8 italic font-light",children:'"En el Da de los Santos Inocentes, te invitamos a dudar de todo, incluso de lo que crees ver en escena. Quizs la mayor inocentada es pensar que algo es real."'}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[p.jsxs(Te,{onClick:o,className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[p.jsx(fO,{size:20}),"Comprar boleto"]}),p.jsxs(Te,{variant:"outline",onClick:i,className:"border-slate-100/30 text-slate-200 hover:bg-white/5 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[p.jsx(uO,{size:20}),"Apartar merch"]})]})]}),p.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-purple-900/20 rounded-full blur-3xl animate-pulse"}),p.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl animate-pulse animation-delay-2000"})]})})]}),p.jsx(_P,{open:n,onClose:s,initialInterest:"recordatorio"}),p.jsx(p3,{open:t,onClose:a})]})},bte=()=>{const[n,e]=_.useState({name:"",email:"",message:""}),[t,r]=_.useState("idle"),[i,s]=_.useState(""),o="https://www.instagram.com/esungatoencerrado/?hl=en",a="https://x.com/SilvestreFilis",l="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",c=_.useCallback(async f=>{if(f.preventDefault(),t==="loading")return;const m=n.name.trim(),y=n.email.trim(),g=n.message.trim();if(!m||!y||!g){Me({description:"Completa nombre, email y mensaje antes de enviar."});return}r("loading"),s("");try{const{error:b}=await pt.functions.invoke("send-contact-message",{body:{name:m,email:y.toLowerCase(),message:g}});if(b)throw b;try{const{error:v}=await pt.from("backstage_inbox").insert({name:m,email:y.toLowerCase(),subject:"Contacto pblico",message:g,meta:{route:"contact"}});v&&console.error("[Contact] No se pudo duplicar en backstage_inbox:",v)}catch(v){console.error("[Contact] Excepcin duplicando en backstage_inbox:",v)}r("success"),e({name:"",email:"",message:""}),Me({description:"Recibimos tu mensaje y te escribiremos pronto."})}catch(b){console.error("[Contact] Error enviando mensaje:",b),r("error"),s("No pudimos enviar tu mensaje. Intenta de nuevo ms tarde."),Me({description:"No pudimos enviar tu mensaje. Intenta de nuevo."})}},[n,t]),d=()=>{Me({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},h=f=>{f?window.open(f,"_blank","noopener,noreferrer"):Me({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})};return p.jsxs("section",{id:"contact",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(ne.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Contacto, Prensa & Crditos"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Para colaboraciones, entrevistas o simplemente para compartir tus teoras. Aqu cae el teln, pero la conversacin contina."})]}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[p.jsxs(ne.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8",children:[p.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-8",children:"Envanos un Mensaje"}),p.jsxs("form",{onSubmit:c,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Nombre"}),p.jsx("input",{name:"name",type:"text",value:n.name,onChange:f=>e(m=>({...m,name:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{name:"email",type:"email",value:n.email,onChange:f=>e(m=>({...m,email:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"tu@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Mensaje"}),p.jsx("textarea",{name:"message",rows:5,value:n.message,onChange:f=>e(m=>({...m,message:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Cuntanos ms..."})]}),t==="error"&&p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:i}),t==="success"&&p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu mensaje lleg. Te escribiremos a la brevedad."}),p.jsxs(Te,{type:"submit",disabled:t==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:[p.jsx(hO,{size:20}),t==="loading"?"Enviando":"Enviar"]})]})]}),p.jsxs(ne.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"space-y-8",children:[p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Redes Sociales"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Te,{onClick:()=>h(o),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(UT,{size:24})}),p.jsx(Te,{onClick:()=>h(a),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(pO,{size:24})}),p.jsx(Te,{onClick:()=>h(l),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(sO,{size:24})})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Kit de Prensa"}),p.jsx("p",{className:"text-slate-300/70 mb-4 font-light",children:"Descarga nuestro kit de prensa con imgenes en alta resolucin, dossier y ms."}),p.jsxs(Te,{onClick:d,variant:"outline",className:"border-purple-400/50 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400",children:[p.jsx(EV,{size:18,className:"mr-2"}),"Descargar Kit"]})]}),p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Crditos Finales"}),p.jsxs("p",{className:"text-slate-300/70 text-sm leading-relaxed font-light",children:["Una produccin de ",p.jsx("span",{className:"text-slate-200",children:"#GatoEncerrado"}),".",p.jsx("br",{}),"Con el apoyo de ",p.jsx("span",{className:"text-slate-200",children:"Isabel Ayuda para la Vida, A.C."}),".",p.jsx("br",{}),"Agradecimientos especiales a todos los que creyeron en esta locura."]})]})]})]})]})]})},wte=()=>{const n="https://www.instagram.com/esungatoencerrado/?hl=en",e="https://x.com/SilvestreFilis",t="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",r=s=>{s?window.open(s,"_blank","noopener,noreferrer"):Me({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},i=s=>{const o=document.querySelector(s);o&&o.scrollIntoView({behavior:"smooth"})};return p.jsxs("footer",{className:"relative py-16 mt-24",children:[p.jsx("div",{className:"section-divider mb-16"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[p.jsx("div",{className:"md:col-span-2",children:p.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-display text-3xl font-medium italic text-gradient mb-4 block",children:"#GatoEncerrado"}),p.jsx("p",{className:"text-slate-400 leading-relaxed mb-6 max-w-md font-light",children:"Una experiencia teatral transmedia que explora los lmites entre la realidad y la ficcin, creando nuevas formas de narrativa artstica."}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>r(n),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(UT,{size:20})}),p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>r(e),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(pO,{size:20})}),p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>r(t),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(sO,{size:20})}),p.jsx(Te,{variant:"ghost",size:"icon",onClick:()=>i("#contact"),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(TV,{size:20})})]})]})}),p.jsx("div",{children:p.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Navegacin"}),p.jsx("ul",{className:"space-y-3",children:[{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Miniversos",href:"#transmedia"},{name:"Textos",href:"#dialogo-critico"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}].map(s=>p.jsx("li",{children:p.jsx("button",{onClick:()=>i(s.href),className:"text-slate-400 hover:text-white transition-colors text-sm font-light",children:s.name})},s.name))})]})}),p.jsx("div",{children:p.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Contacto"}),p.jsxs("ul",{className:"space-y-3 text-sm font-light",children:[p.jsx("li",{className:"text-slate-400",children:"contacto@gatoencerrado.ai"}),p.jsx("li",{className:"text-slate-400",children:"+52 123 456 789"}),p.jsxs("li",{className:"text-slate-400",children:["#Universotransmedia",p.jsx("br",{}),"Tijuana, Mxico"]})]})]})})]}),p.jsxs(ne.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[p.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," #GatoEncerrado. Todos los derechos reservados."]}),p.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[p.jsx("span",{children:"Hecho con"}),p.jsx(lO,{size:16,className:"text-red-500/70"}),p.jsx("span",{children:"para el arte teatral"})]})]})]})]})},Ste=()=>{const[n,e]=_.useState([]),[t,r]=_.useState(!0),[i,s]=_.useState(null),o=_.useCallback(async()=>{r(!0),s(null);try{const a=await f7();e(Array.isArray(a)?a:[])}catch(a){console.error("[useBlogPosts] Error al cargar posts:",a),s(a),e([])}finally{r(!1)}},[]);return _.useEffect(()=>{o()},[o]),{posts:n,isLoading:t,error:i,refreshPosts:o}},Ate="#GatoEncerrado - Obra de Teatro transmedia",_te="La historia de alguien que desaparece y deja una huella emocional. Una experiencia teatral nica que explora mltiples formatos transmediaes.";function Ete(){const n=Ste();return _.useEffect(()=>{document.title=Ate;let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.setAttribute("name","description"),document.head.appendChild(e)),e.setAttribute("content",_te)},[]),p.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[p.jsx(z9,{}),p.jsxs("main",{className:"pt-20 lg:pt-24",children:[p.jsx(t7,{}),p.jsx(o7,{}),p.jsx(mte,{}),p.jsx(Hee,{posts:n.posts,isLoading:n.isLoading,error:n.error}),p.jsx(yY,{}),p.jsx(vte,{}),p.jsx(xte,{}),p.jsx(bte,{})]}),p.jsx(wte,{}),p.jsx(v6,{})]})}M_.createRoot(document.getElementById("root")).render(p.jsx(Pe.StrictMode,{children:p.jsx(F9,{children:p.jsx(Ete,{})})}));

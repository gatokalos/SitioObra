var XF=Object.defineProperty;var YF=(n,e,t)=>e in n?XF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var U=(n,e,t)=>(YF(n,typeof e!="symbol"?e+"":e,t),t),K1=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var l=(n,e,t)=>(K1(n,e,"read from private field"),t?t.call(n):e.get(n)),x=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},S=(n,e,t,s)=>(K1(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);var jt=(n,e,t,s)=>({set _(r){S(n,e,r,t)},get _(){return l(n,e,s)}}),C=(n,e,t)=>(K1(n,e,"access private method"),t);function sR(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in n)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();var An=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function QF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function s(){return this instanceof s?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(s){var r=Object.getOwnPropertyDescriptor(n,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:function(){return n[s]}})}),t}var rR={exports:{}},Jw={},iR={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=Symbol.for("react.element"),JF=Symbol.for("react.portal"),ZF=Symbol.for("react.fragment"),e3=Symbol.for("react.strict_mode"),t3=Symbol.for("react.profiler"),n3=Symbol.for("react.provider"),s3=Symbol.for("react.context"),r3=Symbol.for("react.forward_ref"),i3=Symbol.for("react.suspense"),o3=Symbol.for("react.memo"),a3=Symbol.for("react.lazy"),vT=Symbol.iterator;function l3(n){return n===null||typeof n!="object"?null:(n=vT&&n[vT]||n["@@iterator"],typeof n=="function"?n:null)}var oR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aR=Object.assign,lR={};function kf(n,e,t){this.props=n,this.context=e,this.refs=lR,this.updater=t||oR}kf.prototype.isReactComponent={};kf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};kf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function cR(){}cR.prototype=kf.prototype;function eC(n,e,t){this.props=n,this.context=e,this.refs=lR,this.updater=t||oR}var tC=eC.prototype=new cR;tC.constructor=eC;aR(tC,kf.prototype);tC.isPureReactComponent=!0;var bT=Array.isArray,uR=Object.prototype.hasOwnProperty,nC={current:null},dR={key:!0,ref:!0,__self:!0,__source:!0};function hR(n,e,t){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)uR.call(e,s)&&!dR.hasOwnProperty(s)&&(r[s]=e[s]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var c=Array(a),u=0;u<a;u++)c[u]=arguments[u+2];r.children=c}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)r[s]===void 0&&(r[s]=a[s]);return{$$typeof:sy,type:n,key:i,ref:o,props:r,_owner:nC.current}}function c3(n,e){return{$$typeof:sy,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function sC(n){return typeof n=="object"&&n!==null&&n.$$typeof===sy}function u3(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var xT=/\/+/g;function X1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?u3(""+n.key):e.toString(36)}function vv(n,e,t,s,r){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case sy:case JF:o=!0}}if(o)return o=n,r=r(o),n=s===""?"."+X1(o,0):s,bT(r)?(t="",n!=null&&(t=n.replace(xT,"$&/")+"/"),vv(r,e,t,"",function(u){return u})):r!=null&&(sC(r)&&(r=c3(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(xT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,s=s===""?".":s+":",bT(n))for(var a=0;a<n.length;a++){i=n[a];var c=s+X1(i,a);o+=vv(i,e,t,c,r)}else if(c=l3(n),typeof c=="function")for(n=c.call(n),a=0;!(i=n.next()).done;)i=i.value,c=s+X1(i,a++),o+=vv(i,e,t,c,r);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ty(n,e,t){if(n==null)return n;var s=[],r=0;return vv(n,s,"","",function(i){return e.call(t,i,r++)}),s}function d3(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var On={current:null},bv={transition:null},h3={ReactCurrentDispatcher:On,ReactCurrentBatchConfig:bv,ReactCurrentOwner:nC};function fR(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Ty,forEach:function(n,e,t){Ty(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ty(n,function(){e++}),e},toArray:function(n){return Ty(n,function(e){return e})||[]},only:function(n){if(!sC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};we.Component=kf;we.Fragment=ZF;we.Profiler=t3;we.PureComponent=eC;we.StrictMode=e3;we.Suspense=i3;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=h3;we.act=fR;we.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=aR({},n.props),r=n.key,i=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=nC.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(c in e)uR.call(e,c)&&!dR.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){a=Array(c);for(var u=0;u<c;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:sy,type:n.type,key:r,ref:i,props:s,_owner:o}};we.createContext=function(n){return n={$$typeof:s3,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:n3,_context:n},n.Consumer=n};we.createElement=hR;we.createFactory=function(n){var e=hR.bind(null,n);return e.type=n,e};we.createRef=function(){return{current:null}};we.forwardRef=function(n){return{$$typeof:r3,render:n}};we.isValidElement=sC;we.lazy=function(n){return{$$typeof:a3,_payload:{_status:-1,_result:n},_init:d3}};we.memo=function(n,e){return{$$typeof:o3,type:n,compare:e===void 0?null:e}};we.startTransition=function(n){var e=bv.transition;bv.transition={};try{n()}finally{bv.transition=e}};we.unstable_act=fR;we.useCallback=function(n,e){return On.current.useCallback(n,e)};we.useContext=function(n){return On.current.useContext(n)};we.useDebugValue=function(){};we.useDeferredValue=function(n){return On.current.useDeferredValue(n)};we.useEffect=function(n,e){return On.current.useEffect(n,e)};we.useId=function(){return On.current.useId()};we.useImperativeHandle=function(n,e,t){return On.current.useImperativeHandle(n,e,t)};we.useInsertionEffect=function(n,e){return On.current.useInsertionEffect(n,e)};we.useLayoutEffect=function(n,e){return On.current.useLayoutEffect(n,e)};we.useMemo=function(n,e){return On.current.useMemo(n,e)};we.useReducer=function(n,e,t){return On.current.useReducer(n,e,t)};we.useRef=function(n){return On.current.useRef(n)};we.useState=function(n){return On.current.useState(n)};we.useSyncExternalStore=function(n,e,t){return On.current.useSyncExternalStore(n,e,t)};we.useTransition=function(){return On.current.useTransition()};we.version="18.3.1";iR.exports=we;var A=iR.exports;const Ce=Qw(A),pR=sR({__proto__:null,default:Ce},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f3=A,p3=Symbol.for("react.element"),m3=Symbol.for("react.fragment"),g3=Object.prototype.hasOwnProperty,y3=f3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v3={key:!0,ref:!0,__self:!0,__source:!0};function mR(n,e,t){var s,r={},i=null,o=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)g3.call(e,s)&&!v3.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:p3,type:n,key:i,ref:o,props:r,_owner:y3.current}}Jw.Fragment=m3;Jw.jsx=mR;Jw.jsxs=mR;rR.exports=Jw;var p=rR.exports,s_={},gR={exports:{}},Ms={},yR={exports:{}},vR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(B,$){var V=B.length;B.push($);e:for(;0<V;){var W=V-1>>>1,q=B[W];if(0<r(q,$))B[W]=$,B[V]=q,V=W;else break e}}function t(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var $=B[0],V=B.pop();if(V!==$){B[0]=V;e:for(var W=0,q=B.length,K=q>>>1;W<K;){var se=2*(W+1)-1,pe=B[se],ye=se+1,ge=B[ye];if(0>r(pe,V))ye<q&&0>r(ge,pe)?(B[W]=ge,B[ye]=V,W=ye):(B[W]=pe,B[se]=V,W=se);else if(ye<q&&0>r(ge,V))B[W]=ge,B[ye]=V,W=ye;else break e}}return $}function r(B,$){var V=B.sortIndex-$.sortIndex;return V!==0?V:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var c=[],u=[],d=1,h=null,f=3,m=!1,y=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(B){for(var $=t(u);$!==null;){if($.callback===null)s(u);else if($.startTime<=B)s(u),$.sortIndex=$.expirationTime,e(c,$);else break;$=t(u)}}function E(B){if(g=!1,_(B),!y)if(t(c)!==null)y=!0,j(k);else{var $=t(u);$!==null&&O(E,$.startTime-B)}}function k(B,$){y=!1,g&&(g=!1,v(N),N=-1),m=!0;var V=f;try{for(_($),h=t(c);h!==null&&(!(h.expirationTime>$)||B&&!F());){var W=h.callback;if(typeof W=="function"){h.callback=null,f=h.priorityLevel;var q=W(h.expirationTime<=$);$=n.unstable_now(),typeof q=="function"?h.callback=q:h===t(c)&&s(c),_($)}else s(c);h=t(c)}if(h!==null)var K=!0;else{var se=t(u);se!==null&&O(E,se.startTime-$),K=!1}return K}finally{h=null,f=V,m=!1}}var T=!1,P=null,N=-1,M=5,L=-1;function F(){return!(n.unstable_now()-L<M)}function D(){if(P!==null){var B=n.unstable_now();L=B;var $=!0;try{$=P(!0,B)}finally{$?z():(T=!1,P=null)}}else T=!1}var z;if(typeof b=="function")z=function(){b(D)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,R=I.port2;I.port1.onmessage=D,z=function(){R.postMessage(null)}}else z=function(){w(D,0)};function j(B){P=B,T||(T=!0,z())}function O(B,$){N=w(function(){B(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,j(k))},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(B){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var V=f;f=$;try{return B()}finally{f=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var V=f;f=B;try{return $()}finally{f=V}},n.unstable_scheduleCallback=function(B,$,V){var W=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?W+V:W):V=W,B){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=V+q,B={id:d++,callback:$,priorityLevel:B,startTime:V,expirationTime:q,sortIndex:-1},V>W?(B.sortIndex=V,e(u,B),t(c)===null&&B===t(u)&&(g?(v(N),N=-1):g=!0,O(E,V-W))):(B.sortIndex=q,e(c,B),y||m||(y=!0,j(k))),B},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(B){var $=f;return function(){var V=f;f=$;try{return B.apply(this,arguments)}finally{f=V}}}})(vR);yR.exports=vR;var b3=yR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x3=A,Ps=b3;function H(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bR=new Set,Qp={};function gu(n,e){pf(n,e),pf(n+"Capture",e)}function pf(n,e){for(Qp[n]=e,n=0;n<e.length;n++)bR.add(e[n])}var xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r_=Object.prototype.hasOwnProperty,w3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wT={},ST={};function S3(n){return r_.call(ST,n)?!0:r_.call(wT,n)?!1:w3.test(n)?ST[n]=!0:(wT[n]=!0,!1)}function _3(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function A3(n,e,t,s){if(e===null||typeof e>"u"||_3(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fn(n,e,t,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){un[n]=new Fn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];un[e]=new Fn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){un[n]=new Fn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){un[n]=new Fn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){un[n]=new Fn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){un[n]=new Fn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){un[n]=new Fn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){un[n]=new Fn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){un[n]=new Fn(n,5,!1,n.toLowerCase(),null,!1,!1)});var rC=/[\-:]([a-z])/g;function iC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(rC,iC);un[e]=new Fn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(rC,iC);un[e]=new Fn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(rC,iC);un[e]=new Fn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){un[n]=new Fn(n,1,!1,n.toLowerCase(),null,!1,!1)});un.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){un[n]=new Fn(n,1,!1,n.toLowerCase(),null,!0,!0)});function oC(n,e,t,s){var r=un.hasOwnProperty(e)?un[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(A3(e,t,r,s)&&(t=null),s||r===null?S3(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var To=x3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Py=Symbol.for("react.element"),Fu=Symbol.for("react.portal"),Bu=Symbol.for("react.fragment"),aC=Symbol.for("react.strict_mode"),i_=Symbol.for("react.profiler"),xR=Symbol.for("react.provider"),wR=Symbol.for("react.context"),lC=Symbol.for("react.forward_ref"),o_=Symbol.for("react.suspense"),a_=Symbol.for("react.suspense_list"),cC=Symbol.for("react.memo"),Do=Symbol.for("react.lazy"),SR=Symbol.for("react.offscreen"),_T=Symbol.iterator;function Of(n){return n===null||typeof n!="object"?null:(n=_T&&n[_T]||n["@@iterator"],typeof n=="function"?n:null)}var gt=Object.assign,Y1;function ip(n){if(Y1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Y1=e&&e[1]||""}return`
`+Y1+n}var Q1=!1;function J1(n,e){if(!n||Q1)return"";Q1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,a=i.length-1;1<=o&&0<=a&&r[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==i[a]){var c=`
`+r[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=a);break}}}finally{Q1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?ip(n):""}function E3(n){switch(n.tag){case 5:return ip(n.type);case 16:return ip("Lazy");case 13:return ip("Suspense");case 19:return ip("SuspenseList");case 0:case 2:case 15:return n=J1(n.type,!1),n;case 11:return n=J1(n.type.render,!1),n;case 1:return n=J1(n.type,!0),n;default:return""}}function l_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Bu:return"Fragment";case Fu:return"Portal";case i_:return"Profiler";case aC:return"StrictMode";case o_:return"Suspense";case a_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case wR:return(n.displayName||"Context")+".Consumer";case xR:return(n._context.displayName||"Context")+".Provider";case lC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case cC:return e=n.displayName||null,e!==null?e:l_(n.type)||"Memo";case Do:e=n._payload,n=n._init;try{return l_(n(e))}catch{}}return null}function C3(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return l_(e);case 8:return e===aC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ja(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _R(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function k3(n){var e=_R(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Ny(n){n._valueTracker||(n._valueTracker=k3(n))}function AR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=_R(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function pb(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function c_(n,e){var t=e.checked;return gt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function AT(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Ja(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ER(n,e){e=e.checked,e!=null&&oC(n,"checked",e,!1)}function u_(n,e){ER(n,e);var t=Ja(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?d_(n,e.type,t):e.hasOwnProperty("defaultValue")&&d_(n,e.type,Ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function ET(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function d_(n,e,t){(e!=="number"||pb(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var op=Array.isArray;function id(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Ja(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function h_(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return gt({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function CT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(H(92));if(op(t)){if(1<t.length)throw Error(H(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Ja(t)}}function CR(n,e){var t=Ja(e.value),s=Ja(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function kT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function kR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f_(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?kR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ry,TR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ry=Ry||document.createElement("div"),Ry.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ry.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Jp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var jp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T3=["Webkit","ms","Moz","O"];Object.keys(jp).forEach(function(n){T3.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),jp[e]=jp[n]})});function PR(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||jp.hasOwnProperty(n)&&jp[n]?(""+e).trim():e+"px"}function NR(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=PR(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var P3=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function p_(n,e){if(e){if(P3[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function m_(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var g_=null;function uC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var y_=null,od=null,ad=null;function TT(n){if(n=oy(n)){if(typeof y_!="function")throw Error(H(280));var e=n.stateNode;e&&(e=s1(e),y_(n.stateNode,n.type,e))}}function RR(n){od?ad?ad.push(n):ad=[n]:od=n}function MR(){if(od){var n=od,e=ad;if(ad=od=null,TT(n),e)for(n=0;n<e.length;n++)TT(e[n])}}function jR(n,e){return n(e)}function LR(){}var Z1=!1;function DR(n,e,t){if(Z1)return n(e,t);Z1=!0;try{return jR(n,e,t)}finally{Z1=!1,(od!==null||ad!==null)&&(LR(),MR())}}function Zp(n,e){var t=n.stateNode;if(t===null)return null;var s=s1(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(H(231,e,typeof t));return t}var v_=!1;if(xo)try{var Ff={};Object.defineProperty(Ff,"passive",{get:function(){v_=!0}}),window.addEventListener("test",Ff,Ff),window.removeEventListener("test",Ff,Ff)}catch{v_=!1}function N3(n,e,t,s,r,i,o,a,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var Lp=!1,mb=null,gb=!1,b_=null,R3={onError:function(n){Lp=!0,mb=n}};function M3(n,e,t,s,r,i,o,a,c){Lp=!1,mb=null,N3.apply(R3,arguments)}function j3(n,e,t,s,r,i,o,a,c){if(M3.apply(this,arguments),Lp){if(Lp){var u=mb;Lp=!1,mb=null}else throw Error(H(198));gb||(gb=!0,b_=u)}}function yu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function IR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function PT(n){if(yu(n)!==n)throw Error(H(188))}function L3(n){var e=n.alternate;if(!e){if(e=yu(n),e===null)throw Error(H(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===t)return PT(r),n;if(i===s)return PT(r),e;i=i.sibling}throw Error(H(188))}if(t.return!==s.return)t=r,s=i;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,s=i;break}if(a===s){o=!0,s=r,t=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===t){o=!0,t=i,s=r;break}if(a===s){o=!0,s=i,t=r;break}a=a.sibling}if(!o)throw Error(H(189))}}if(t.alternate!==s)throw Error(H(190))}if(t.tag!==3)throw Error(H(188));return t.stateNode.current===t?n:e}function OR(n){return n=L3(n),n!==null?FR(n):null}function FR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=FR(n);if(e!==null)return e;n=n.sibling}return null}var BR=Ps.unstable_scheduleCallback,NT=Ps.unstable_cancelCallback,D3=Ps.unstable_shouldYield,I3=Ps.unstable_requestPaint,kt=Ps.unstable_now,O3=Ps.unstable_getCurrentPriorityLevel,dC=Ps.unstable_ImmediatePriority,$R=Ps.unstable_UserBlockingPriority,yb=Ps.unstable_NormalPriority,F3=Ps.unstable_LowPriority,VR=Ps.unstable_IdlePriority,Zw=null,pi=null;function B3(n){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(Zw,n,void 0,(n.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:z3,$3=Math.log,V3=Math.LN2;function z3(n){return n>>>=0,n===0?32:31-($3(n)/V3|0)|0}var My=64,jy=4194304;function ap(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vb(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,i=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?s=ap(a):(i&=o,i!==0&&(s=ap(i)))}else o=t&~r,o!==0?s=ap(o):i!==0&&(s=ap(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-kr(e),r=1<<t,s|=n[t],e&=~r;return s}function U3(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H3(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,i=n.pendingLanes;0<i;){var o=31-kr(i),a=1<<o,c=r[o];c===-1?(!(a&t)||a&s)&&(r[o]=U3(a,e)):c<=e&&(n.expiredLanes|=a),i&=~a}}function x_(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function zR(){var n=My;return My<<=1,!(My&4194240)&&(My=64),n}function eS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ry(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-kr(e),n[e]=t}function G3(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-kr(t),i=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~i}}function hC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-kr(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var Oe=0;function UR(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var HR,fC,GR,WR,qR,w_=!1,Ly=[],za=null,Ua=null,Ha=null,em=new Map,tm=new Map,Fo=[],W3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function RT(n,e){switch(n){case"focusin":case"focusout":za=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":em.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":tm.delete(e.pointerId)}}function Bf(n,e,t,s,r,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=oy(e),e!==null&&fC(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function q3(n,e,t,s,r){switch(e){case"focusin":return za=Bf(za,n,e,t,s,r),!0;case"dragenter":return Ua=Bf(Ua,n,e,t,s,r),!0;case"mouseover":return Ha=Bf(Ha,n,e,t,s,r),!0;case"pointerover":var i=r.pointerId;return em.set(i,Bf(em.get(i)||null,n,e,t,s,r)),!0;case"gotpointercapture":return i=r.pointerId,tm.set(i,Bf(tm.get(i)||null,n,e,t,s,r)),!0}return!1}function KR(n){var e=Cl(n.target);if(e!==null){var t=yu(e);if(t!==null){if(e=t.tag,e===13){if(e=IR(t),e!==null){n.blockedOn=e,qR(n.priority,function(){GR(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function xv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=S_(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);g_=s,t.target.dispatchEvent(s),g_=null}else return e=oy(t),e!==null&&fC(e),n.blockedOn=t,!1;e.shift()}return!0}function MT(n,e,t){xv(n)&&t.delete(e)}function K3(){w_=!1,za!==null&&xv(za)&&(za=null),Ua!==null&&xv(Ua)&&(Ua=null),Ha!==null&&xv(Ha)&&(Ha=null),em.forEach(MT),tm.forEach(MT)}function $f(n,e){n.blockedOn===e&&(n.blockedOn=null,w_||(w_=!0,Ps.unstable_scheduleCallback(Ps.unstable_NormalPriority,K3)))}function nm(n){function e(r){return $f(r,n)}if(0<Ly.length){$f(Ly[0],n);for(var t=1;t<Ly.length;t++){var s=Ly[t];s.blockedOn===n&&(s.blockedOn=null)}}for(za!==null&&$f(za,n),Ua!==null&&$f(Ua,n),Ha!==null&&$f(Ha,n),em.forEach(e),tm.forEach(e),t=0;t<Fo.length;t++)s=Fo[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Fo.length&&(t=Fo[0],t.blockedOn===null);)KR(t),t.blockedOn===null&&Fo.shift()}var ld=To.ReactCurrentBatchConfig,bb=!0;function X3(n,e,t,s){var r=Oe,i=ld.transition;ld.transition=null;try{Oe=1,pC(n,e,t,s)}finally{Oe=r,ld.transition=i}}function Y3(n,e,t,s){var r=Oe,i=ld.transition;ld.transition=null;try{Oe=4,pC(n,e,t,s)}finally{Oe=r,ld.transition=i}}function pC(n,e,t,s){if(bb){var r=S_(n,e,t,s);if(r===null)uS(n,e,s,xb,t),RT(n,s);else if(q3(r,n,e,t,s))s.stopPropagation();else if(RT(n,s),e&4&&-1<W3.indexOf(n)){for(;r!==null;){var i=oy(r);if(i!==null&&HR(i),i=S_(n,e,t,s),i===null&&uS(n,e,s,xb,t),i===r)break;r=i}r!==null&&s.stopPropagation()}else uS(n,e,s,null,t)}}var xb=null;function S_(n,e,t,s){if(xb=null,n=uC(s),n=Cl(n),n!==null)if(e=yu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=IR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return xb=n,null}function XR(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(O3()){case dC:return 1;case $R:return 4;case yb:case F3:return 16;case VR:return 536870912;default:return 16}default:return 16}}var $a=null,mC=null,wv=null;function YR(){if(wv)return wv;var n,e=mC,t=e.length,s,r="value"in $a?$a.value:$a.textContent,i=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(s=1;s<=o&&e[t-s]===r[i-s];s++);return wv=r.slice(n,1<s?1-s:void 0)}function Sv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Dy(){return!0}function jT(){return!1}function js(n){function e(t,s,r,i,o){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dy:jT,this.isPropagationStopped=jT,this}return gt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Dy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Dy)},persist:function(){},isPersistent:Dy}),e}var Tf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gC=js(Tf),iy=gt({},Tf,{view:0,detail:0}),Q3=js(iy),tS,nS,Vf,e1=gt({},iy,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vf&&(Vf&&n.type==="mousemove"?(tS=n.screenX-Vf.screenX,nS=n.screenY-Vf.screenY):nS=tS=0,Vf=n),tS)},movementY:function(n){return"movementY"in n?n.movementY:nS}}),LT=js(e1),J3=gt({},e1,{dataTransfer:0}),Z3=js(J3),e4=gt({},iy,{relatedTarget:0}),sS=js(e4),t4=gt({},Tf,{animationName:0,elapsedTime:0,pseudoElement:0}),n4=js(t4),s4=gt({},Tf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),r4=js(s4),i4=gt({},Tf,{data:0}),DT=js(i4),o4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=l4[n])?!!e[n]:!1}function yC(){return c4}var u4=gt({},iy,{key:function(n){if(n.key){var e=o4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Sv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?a4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yC,charCode:function(n){return n.type==="keypress"?Sv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),d4=js(u4),h4=gt({},e1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IT=js(h4),f4=gt({},iy,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yC}),p4=js(f4),m4=gt({},Tf,{propertyName:0,elapsedTime:0,pseudoElement:0}),g4=js(m4),y4=gt({},e1,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),v4=js(y4),b4=[9,13,27,32],vC=xo&&"CompositionEvent"in window,Dp=null;xo&&"documentMode"in document&&(Dp=document.documentMode);var x4=xo&&"TextEvent"in window&&!Dp,QR=xo&&(!vC||Dp&&8<Dp&&11>=Dp),OT=String.fromCharCode(32),FT=!1;function JR(n,e){switch(n){case"keyup":return b4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZR(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var $u=!1;function w4(n,e){switch(n){case"compositionend":return ZR(e);case"keypress":return e.which!==32?null:(FT=!0,OT);case"textInput":return n=e.data,n===OT&&FT?null:n;default:return null}}function S4(n,e){if($u)return n==="compositionend"||!vC&&JR(n,e)?(n=YR(),wv=mC=$a=null,$u=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QR&&e.locale!=="ko"?null:e.data;default:return null}}var _4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_4[n.type]:e==="textarea"}function eM(n,e,t,s){RR(s),e=wb(e,"onChange"),0<e.length&&(t=new gC("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Ip=null,sm=null;function A4(n){dM(n,0)}function t1(n){var e=Uu(n);if(AR(e))return n}function E4(n,e){if(n==="change")return e}var tM=!1;if(xo){var rS;if(xo){var iS="oninput"in document;if(!iS){var $T=document.createElement("div");$T.setAttribute("oninput","return;"),iS=typeof $T.oninput=="function"}rS=iS}else rS=!1;tM=rS&&(!document.documentMode||9<document.documentMode)}function VT(){Ip&&(Ip.detachEvent("onpropertychange",nM),sm=Ip=null)}function nM(n){if(n.propertyName==="value"&&t1(sm)){var e=[];eM(e,sm,n,uC(n)),DR(A4,e)}}function C4(n,e,t){n==="focusin"?(VT(),Ip=e,sm=t,Ip.attachEvent("onpropertychange",nM)):n==="focusout"&&VT()}function k4(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return t1(sm)}function T4(n,e){if(n==="click")return t1(e)}function P4(n,e){if(n==="input"||n==="change")return t1(e)}function N4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Pr=typeof Object.is=="function"?Object.is:N4;function rm(n,e){if(Pr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!r_.call(e,r)||!Pr(n[r],e[r]))return!1}return!0}function zT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function UT(n,e){var t=zT(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=zT(t)}}function sM(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?sM(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function rM(){for(var n=window,e=pb();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=pb(n.document)}return e}function bC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function R4(n){var e=rM(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&sM(t.ownerDocument.documentElement,t)){if(s!==null&&bC(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!n.extend&&i>s&&(r=s,s=i,i=r),r=UT(t,i);var o=UT(t,s);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),i>s?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var M4=xo&&"documentMode"in document&&11>=document.documentMode,Vu=null,__=null,Op=null,A_=!1;function HT(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;A_||Vu==null||Vu!==pb(s)||(s=Vu,"selectionStart"in s&&bC(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Op&&rm(Op,s)||(Op=s,s=wb(__,"onSelect"),0<s.length&&(e=new gC("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Vu)))}function Iy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var zu={animationend:Iy("Animation","AnimationEnd"),animationiteration:Iy("Animation","AnimationIteration"),animationstart:Iy("Animation","AnimationStart"),transitionend:Iy("Transition","TransitionEnd")},oS={},iM={};xo&&(iM=document.createElement("div").style,"AnimationEvent"in window||(delete zu.animationend.animation,delete zu.animationiteration.animation,delete zu.animationstart.animation),"TransitionEvent"in window||delete zu.transitionend.transition);function n1(n){if(oS[n])return oS[n];if(!zu[n])return n;var e=zu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in iM)return oS[n]=e[t];return n}var oM=n1("animationend"),aM=n1("animationiteration"),lM=n1("animationstart"),cM=n1("transitionend"),uM=new Map,GT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(n,e){uM.set(n,e),gu(e,[n])}for(var aS=0;aS<GT.length;aS++){var lS=GT[aS],j4=lS.toLowerCase(),L4=lS[0].toUpperCase()+lS.slice(1);rl(j4,"on"+L4)}rl(oM,"onAnimationEnd");rl(aM,"onAnimationIteration");rl(lM,"onAnimationStart");rl("dblclick","onDoubleClick");rl("focusin","onFocus");rl("focusout","onBlur");rl(cM,"onTransitionEnd");pf("onMouseEnter",["mouseout","mouseover"]);pf("onMouseLeave",["mouseout","mouseover"]);pf("onPointerEnter",["pointerout","pointerover"]);pf("onPointerLeave",["pointerout","pointerover"]);gu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gu("onBeforeInput",["compositionend","keypress","textInput","paste"]);gu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),D4=new Set("cancel close invalid load scroll toggle".split(" ").concat(lp));function WT(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,j3(s,e,void 0,n),n.currentTarget=null}function dM(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==i&&r.isPropagationStopped())break e;WT(r,a,u),i=c}else for(o=0;o<s.length;o++){if(a=s[o],c=a.instance,u=a.currentTarget,a=a.listener,c!==i&&r.isPropagationStopped())break e;WT(r,a,u),i=c}}}if(gb)throw n=b_,gb=!1,b_=null,n}function tt(n,e){var t=e[P_];t===void 0&&(t=e[P_]=new Set);var s=n+"__bubble";t.has(s)||(hM(e,n,2,!1),t.add(s))}function cS(n,e,t){var s=0;e&&(s|=4),hM(t,n,s,e)}var Oy="_reactListening"+Math.random().toString(36).slice(2);function im(n){if(!n[Oy]){n[Oy]=!0,bR.forEach(function(t){t!=="selectionchange"&&(D4.has(t)||cS(t,!1,n),cS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Oy]||(e[Oy]=!0,cS("selectionchange",!1,e))}}function hM(n,e,t,s){switch(XR(e)){case 1:var r=X3;break;case 4:r=Y3;break;default:r=pC}t=r.bind(null,e,t,n),r=void 0,!v_||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function uS(n,e,t,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Cl(a),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}a=a.parentNode}}s=s.return}DR(function(){var u=i,d=uC(t),h=[];e:{var f=uM.get(n);if(f!==void 0){var m=gC,y=n;switch(n){case"keypress":if(Sv(t)===0)break e;case"keydown":case"keyup":m=d4;break;case"focusin":y="focus",m=sS;break;case"focusout":y="blur",m=sS;break;case"beforeblur":case"afterblur":m=sS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=LT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Z3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=p4;break;case oM:case aM:case lM:m=n4;break;case cM:m=g4;break;case"scroll":m=Q3;break;case"wheel":m=v4;break;case"copy":case"cut":case"paste":m=r4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=IT}var g=(e&4)!==0,w=!g&&n==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var b=u,_;b!==null;){_=b;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,v!==null&&(E=Zp(b,v),E!=null&&g.push(om(b,E,_)))),w)break;b=b.return}0<g.length&&(f=new m(f,y,null,t,d),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==g_&&(y=t.relatedTarget||t.fromElement)&&(Cl(y)||y[wo]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?Cl(y):null,y!==null&&(w=yu(y),y!==w||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=LT,E="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(g=IT,E="onPointerLeave",v="onPointerEnter",b="pointer"),w=m==null?f:Uu(m),_=y==null?f:Uu(y),f=new g(E,b+"leave",m,t,d),f.target=w,f.relatedTarget=_,E=null,Cl(d)===u&&(g=new g(v,b+"enter",y,t,d),g.target=_,g.relatedTarget=w,E=g),w=E,m&&y)t:{for(g=m,v=y,b=0,_=g;_;_=Eu(_))b++;for(_=0,E=v;E;E=Eu(E))_++;for(;0<b-_;)g=Eu(g),b--;for(;0<_-b;)v=Eu(v),_--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=Eu(g),v=Eu(v)}g=null}else g=null;m!==null&&qT(h,f,m,g,!1),y!==null&&w!==null&&qT(h,w,y,g,!0)}}e:{if(f=u?Uu(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=E4;else if(BT(f))if(tM)k=P4;else{k=k4;var T=C4}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=T4);if(k&&(k=k(n,u))){eM(h,k,t,d);break e}T&&T(n,f,u),n==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&d_(f,"number",f.value)}switch(T=u?Uu(u):window,n){case"focusin":(BT(T)||T.contentEditable==="true")&&(Vu=T,__=u,Op=null);break;case"focusout":Op=__=Vu=null;break;case"mousedown":A_=!0;break;case"contextmenu":case"mouseup":case"dragend":A_=!1,HT(h,t,d);break;case"selectionchange":if(M4)break;case"keydown":case"keyup":HT(h,t,d)}var P;if(vC)e:{switch(n){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else $u?JR(n,t)&&(N="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(N="onCompositionStart");N&&(QR&&t.locale!=="ko"&&($u||N!=="onCompositionStart"?N==="onCompositionEnd"&&$u&&(P=YR()):($a=d,mC="value"in $a?$a.value:$a.textContent,$u=!0)),T=wb(u,N),0<T.length&&(N=new DT(N,n,null,t,d),h.push({event:N,listeners:T}),P?N.data=P:(P=ZR(t),P!==null&&(N.data=P)))),(P=x4?w4(n,t):S4(n,t))&&(u=wb(u,"onBeforeInput"),0<u.length&&(d=new DT("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=P))}dM(h,e)})}function om(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wb(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Zp(n,t),i!=null&&s.unshift(om(n,i,r)),i=Zp(n,e),i!=null&&s.push(om(n,i,r))),n=n.return}return s}function Eu(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function qT(n,e,t,s,r){for(var i=e._reactName,o=[];t!==null&&t!==s;){var a=t,c=a.alternate,u=a.stateNode;if(c!==null&&c===s)break;a.tag===5&&u!==null&&(a=u,r?(c=Zp(t,i),c!=null&&o.unshift(om(t,c,a))):r||(c=Zp(t,i),c!=null&&o.push(om(t,c,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var I4=/\r\n?/g,O4=/\u0000|\uFFFD/g;function KT(n){return(typeof n=="string"?n:""+n).replace(I4,`
`).replace(O4,"")}function Fy(n,e,t){if(e=KT(e),KT(n)!==e&&t)throw Error(H(425))}function Sb(){}var E_=null,C_=null;function k_(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var T_=typeof setTimeout=="function"?setTimeout:void 0,F4=typeof clearTimeout=="function"?clearTimeout:void 0,XT=typeof Promise=="function"?Promise:void 0,B4=typeof queueMicrotask=="function"?queueMicrotask:typeof XT<"u"?function(n){return XT.resolve(null).then(n).catch($4)}:T_;function $4(n){setTimeout(function(){throw n})}function dS(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),nm(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);nm(e)}function Ga(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function YT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Pf=Math.random().toString(36).slice(2),hi="__reactFiber$"+Pf,am="__reactProps$"+Pf,wo="__reactContainer$"+Pf,P_="__reactEvents$"+Pf,V4="__reactListeners$"+Pf,z4="__reactHandles$"+Pf;function Cl(n){var e=n[hi];if(e)return e;for(var t=n.parentNode;t;){if(e=t[wo]||t[hi]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=YT(n);n!==null;){if(t=n[hi])return t;n=YT(n)}return e}n=t,t=n.parentNode}return null}function oy(n){return n=n[hi]||n[wo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Uu(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(H(33))}function s1(n){return n[am]||null}var N_=[],Hu=-1;function il(n){return{current:n}}function st(n){0>Hu||(n.current=N_[Hu],N_[Hu]=null,Hu--)}function Ye(n,e){Hu++,N_[Hu]=n.current,n.current=e}var Za={},En=il(Za),es=il(!1),au=Za;function mf(n,e){var t=n.type.contextTypes;if(!t)return Za;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in t)r[i]=e[i];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ts(n){return n=n.childContextTypes,n!=null}function _b(){st(es),st(En)}function QT(n,e,t){if(En.current!==Za)throw Error(H(168));Ye(En,e),Ye(es,t)}function fM(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(H(108,C3(n)||"Unknown",r));return gt({},t,s)}function Ab(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Za,au=En.current,Ye(En,n),Ye(es,es.current),!0}function JT(n,e,t){var s=n.stateNode;if(!s)throw Error(H(169));t?(n=fM(n,e,au),s.__reactInternalMemoizedMergedChildContext=n,st(es),st(En),Ye(En,n)):st(es),Ye(es,t)}var ki=null,r1=!1,hS=!1;function pM(n){ki===null?ki=[n]:ki.push(n)}function U4(n){r1=!0,pM(n)}function ol(){if(!hS&&ki!==null){hS=!0;var n=0,e=Oe;try{var t=ki;for(Oe=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}ki=null,r1=!1}catch(r){throw ki!==null&&(ki=ki.slice(n+1)),BR(dC,ol),r}finally{Oe=e,hS=!1}}return null}var Gu=[],Wu=0,Eb=null,Cb=0,Ys=[],Qs=0,lu=null,ho=1,fo="";function fl(n,e){Gu[Wu++]=Cb,Gu[Wu++]=Eb,Eb=n,Cb=e}function mM(n,e,t){Ys[Qs++]=ho,Ys[Qs++]=fo,Ys[Qs++]=lu,lu=n;var s=ho;n=fo;var r=32-kr(s)-1;s&=~(1<<r),t+=1;var i=32-kr(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,ho=1<<32-kr(e)+r|t<<r|s,fo=i+n}else ho=1<<i|t<<r|s,fo=n}function xC(n){n.return!==null&&(fl(n,1),mM(n,1,0))}function wC(n){for(;n===Eb;)Eb=Gu[--Wu],Gu[Wu]=null,Cb=Gu[--Wu],Gu[Wu]=null;for(;n===lu;)lu=Ys[--Qs],Ys[Qs]=null,fo=Ys[--Qs],Ys[Qs]=null,ho=Ys[--Qs],Ys[Qs]=null}var Ts=null,ks=null,lt=!1,Cr=null;function gM(n,e){var t=Zs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ZT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ts=n,ks=Ga(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ts=n,ks=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=lu!==null?{id:ho,overflow:fo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Zs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ts=n,ks=null,!0):!1;default:return!1}}function R_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function M_(n){if(lt){var e=ks;if(e){var t=e;if(!ZT(n,e)){if(R_(n))throw Error(H(418));e=Ga(t.nextSibling);var s=Ts;e&&ZT(n,e)?gM(s,t):(n.flags=n.flags&-4097|2,lt=!1,Ts=n)}}else{if(R_(n))throw Error(H(418));n.flags=n.flags&-4097|2,lt=!1,Ts=n}}}function eP(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ts=n}function By(n){if(n!==Ts)return!1;if(!lt)return eP(n),lt=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!k_(n.type,n.memoizedProps)),e&&(e=ks)){if(R_(n))throw yM(),Error(H(418));for(;e;)gM(n,e),e=Ga(e.nextSibling)}if(eP(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(H(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){ks=Ga(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}ks=null}}else ks=Ts?Ga(n.stateNode.nextSibling):null;return!0}function yM(){for(var n=ks;n;)n=Ga(n.nextSibling)}function gf(){ks=Ts=null,lt=!1}function SC(n){Cr===null?Cr=[n]:Cr.push(n)}var H4=To.ReactCurrentBatchConfig;function zf(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(H(309));var s=t.stateNode}if(!s)throw Error(H(147,n));var r=s,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=r.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof n!="string")throw Error(H(284));if(!t._owner)throw Error(H(290,n))}return n}function $y(n,e){throw n=Object.prototype.toString.call(e),Error(H(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function tP(n){var e=n._init;return e(n._payload)}function vM(n){function e(v,b){if(n){var _=v.deletions;_===null?(v.deletions=[b],v.flags|=16):_.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function r(v,b){return v=Xa(v,b),v.index=0,v.sibling=null,v}function i(v,b,_){return v.index=_,n?(_=v.alternate,_!==null?(_=_.index,_<b?(v.flags|=2,b):_):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,b,_,E){return b===null||b.tag!==6?(b=bS(_,v.mode,E),b.return=v,b):(b=r(b,_),b.return=v,b)}function c(v,b,_,E){var k=_.type;return k===Bu?d(v,b,_.props.children,E,_.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Do&&tP(k)===b.type)?(E=r(b,_.props),E.ref=zf(v,b,_),E.return=v,E):(E=Pv(_.type,_.key,_.props,null,v.mode,E),E.ref=zf(v,b,_),E.return=v,E)}function u(v,b,_,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=xS(_,v.mode,E),b.return=v,b):(b=r(b,_.children||[]),b.return=v,b)}function d(v,b,_,E,k){return b===null||b.tag!==7?(b=ou(_,v.mode,E,k),b.return=v,b):(b=r(b,_),b.return=v,b)}function h(v,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=bS(""+b,v.mode,_),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Py:return _=Pv(b.type,b.key,b.props,null,v.mode,_),_.ref=zf(v,null,b),_.return=v,_;case Fu:return b=xS(b,v.mode,_),b.return=v,b;case Do:var E=b._init;return h(v,E(b._payload),_)}if(op(b)||Of(b))return b=ou(b,v.mode,_,null),b.return=v,b;$y(v,b)}return null}function f(v,b,_,E){var k=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return k!==null?null:a(v,b,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Py:return _.key===k?c(v,b,_,E):null;case Fu:return _.key===k?u(v,b,_,E):null;case Do:return k=_._init,f(v,b,k(_._payload),E)}if(op(_)||Of(_))return k!==null?null:d(v,b,_,E,null);$y(v,_)}return null}function m(v,b,_,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(_)||null,a(b,v,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Py:return v=v.get(E.key===null?_:E.key)||null,c(b,v,E,k);case Fu:return v=v.get(E.key===null?_:E.key)||null,u(b,v,E,k);case Do:var T=E._init;return m(v,b,_,T(E._payload),k)}if(op(E)||Of(E))return v=v.get(_)||null,d(b,v,E,k,null);$y(b,E)}return null}function y(v,b,_,E){for(var k=null,T=null,P=b,N=b=0,M=null;P!==null&&N<_.length;N++){P.index>N?(M=P,P=null):M=P.sibling;var L=f(v,P,_[N],E);if(L===null){P===null&&(P=M);break}n&&P&&L.alternate===null&&e(v,P),b=i(L,b,N),T===null?k=L:T.sibling=L,T=L,P=M}if(N===_.length)return t(v,P),lt&&fl(v,N),k;if(P===null){for(;N<_.length;N++)P=h(v,_[N],E),P!==null&&(b=i(P,b,N),T===null?k=P:T.sibling=P,T=P);return lt&&fl(v,N),k}for(P=s(v,P);N<_.length;N++)M=m(P,v,N,_[N],E),M!==null&&(n&&M.alternate!==null&&P.delete(M.key===null?N:M.key),b=i(M,b,N),T===null?k=M:T.sibling=M,T=M);return n&&P.forEach(function(F){return e(v,F)}),lt&&fl(v,N),k}function g(v,b,_,E){var k=Of(_);if(typeof k!="function")throw Error(H(150));if(_=k.call(_),_==null)throw Error(H(151));for(var T=k=null,P=b,N=b=0,M=null,L=_.next();P!==null&&!L.done;N++,L=_.next()){P.index>N?(M=P,P=null):M=P.sibling;var F=f(v,P,L.value,E);if(F===null){P===null&&(P=M);break}n&&P&&F.alternate===null&&e(v,P),b=i(F,b,N),T===null?k=F:T.sibling=F,T=F,P=M}if(L.done)return t(v,P),lt&&fl(v,N),k;if(P===null){for(;!L.done;N++,L=_.next())L=h(v,L.value,E),L!==null&&(b=i(L,b,N),T===null?k=L:T.sibling=L,T=L);return lt&&fl(v,N),k}for(P=s(v,P);!L.done;N++,L=_.next())L=m(P,v,N,L.value,E),L!==null&&(n&&L.alternate!==null&&P.delete(L.key===null?N:L.key),b=i(L,b,N),T===null?k=L:T.sibling=L,T=L);return n&&P.forEach(function(D){return e(v,D)}),lt&&fl(v,N),k}function w(v,b,_,E){if(typeof _=="object"&&_!==null&&_.type===Bu&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Py:e:{for(var k=_.key,T=b;T!==null;){if(T.key===k){if(k=_.type,k===Bu){if(T.tag===7){t(v,T.sibling),b=r(T,_.props.children),b.return=v,v=b;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Do&&tP(k)===T.type){t(v,T.sibling),b=r(T,_.props),b.ref=zf(v,T,_),b.return=v,v=b;break e}t(v,T);break}else e(v,T);T=T.sibling}_.type===Bu?(b=ou(_.props.children,v.mode,E,_.key),b.return=v,v=b):(E=Pv(_.type,_.key,_.props,null,v.mode,E),E.ref=zf(v,b,_),E.return=v,v=E)}return o(v);case Fu:e:{for(T=_.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){t(v,b.sibling),b=r(b,_.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=xS(_,v.mode,E),b.return=v,v=b}return o(v);case Do:return T=_._init,w(v,b,T(_._payload),E)}if(op(_))return y(v,b,_,E);if(Of(_))return g(v,b,_,E);$y(v,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(t(v,b.sibling),b=r(b,_),b.return=v,v=b):(t(v,b),b=bS(_,v.mode,E),b.return=v,v=b),o(v)):t(v,b)}return w}var yf=vM(!0),bM=vM(!1),kb=il(null),Tb=null,qu=null,_C=null;function AC(){_C=qu=Tb=null}function EC(n){var e=kb.current;st(kb),n._currentValue=e}function j_(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function cd(n,e){Tb=n,_C=qu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Zn=!0),n.firstContext=null)}function tr(n){var e=n._currentValue;if(_C!==n)if(n={context:n,memoizedValue:e,next:null},qu===null){if(Tb===null)throw Error(H(308));qu=n,Tb.dependencies={lanes:0,firstContext:n}}else qu=qu.next=n;return e}var kl=null;function CC(n){kl===null?kl=[n]:kl.push(n)}function xM(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,CC(e)):(t.next=r.next,r.next=t),e.interleaved=t,So(n,s)}function So(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Io=!1;function kC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wM(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function go(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Wa(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,Me&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,So(n,t)}return r=s.interleaved,r===null?(e.next=e,CC(s)):(e.next=r.next,r.next=e),s.interleaved=e,So(n,t)}function _v(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,hC(n,t)}}function nP(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?r=i=o:i=i.next=o,t=t.next}while(t!==null);i===null?r=i=e:i=i.next=e}else r=i=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Pb(n,e,t,s){var r=n.updateQueue;Io=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var c=a,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,d=u=c=null,a=i;do{var f=a.lane,m=a.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,g=a;switch(f=e,m=t,g.tag){case 1:if(y=g.payload,typeof y=="function"){h=y.call(m,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(m,h,f):y,f==null)break e;h=gt({},h,f);break e;case 2:Io=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(d===null&&(c=h),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);uu|=o,n.lanes=o,n.memoizedState=h}}function sP(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(H(191,r));r.call(s)}}}var ay={},mi=il(ay),lm=il(ay),cm=il(ay);function Tl(n){if(n===ay)throw Error(H(174));return n}function TC(n,e){switch(Ye(cm,e),Ye(lm,n),Ye(mi,ay),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:f_(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=f_(e,n)}st(mi),Ye(mi,e)}function vf(){st(mi),st(lm),st(cm)}function SM(n){Tl(cm.current);var e=Tl(mi.current),t=f_(e,n.type);e!==t&&(Ye(lm,n),Ye(mi,t))}function PC(n){lm.current===n&&(st(mi),st(lm))}var dt=il(0);function Nb(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fS=[];function NC(){for(var n=0;n<fS.length;n++)fS[n]._workInProgressVersionPrimary=null;fS.length=0}var Av=To.ReactCurrentDispatcher,pS=To.ReactCurrentBatchConfig,cu=0,pt=null,Bt=null,Xt=null,Rb=!1,Fp=!1,um=0,G4=0;function dn(){throw Error(H(321))}function RC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Pr(n[t],e[t]))return!1;return!0}function MC(n,e,t,s,r,i){if(cu=i,pt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Av.current=n===null||n.memoizedState===null?X4:Y4,n=t(s,r),Fp){i=0;do{if(Fp=!1,um=0,25<=i)throw Error(H(301));i+=1,Xt=Bt=null,e.updateQueue=null,Av.current=Q4,n=t(s,r)}while(Fp)}if(Av.current=Mb,e=Bt!==null&&Bt.next!==null,cu=0,Xt=Bt=pt=null,Rb=!1,e)throw Error(H(300));return n}function jC(){var n=um!==0;return um=0,n}function $r(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?pt.memoizedState=Xt=n:Xt=Xt.next=n,Xt}function nr(){if(Bt===null){var n=pt.alternate;n=n!==null?n.memoizedState:null}else n=Bt.next;var e=Xt===null?pt.memoizedState:Xt.next;if(e!==null)Xt=e,Bt=n;else{if(n===null)throw Error(H(310));Bt=n,n={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Xt===null?pt.memoizedState=Xt=n:Xt=Xt.next=n}return Xt}function dm(n,e){return typeof e=="function"?e(n):e}function mS(n){var e=nr(),t=e.queue;if(t===null)throw Error(H(311));t.lastRenderedReducer=n;var s=Bt,r=s.baseQueue,i=t.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,t.pending=null}if(r!==null){i=r.next,s=s.baseState;var a=o=null,c=null,u=i;do{var d=u.lane;if((cu&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(a=c=h,o=s):c=c.next=h,pt.lanes|=d,uu|=d}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=a,Pr(s,e.memoizedState)||(Zn=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do i=r.lane,pt.lanes|=i,uu|=i,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gS(n){var e=nr(),t=e.queue;if(t===null)throw Error(H(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,i=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do i=n(i,o.action),o=o.next;while(o!==r);Pr(i,e.memoizedState)||(Zn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,s]}function _M(){}function AM(n,e){var t=pt,s=nr(),r=e(),i=!Pr(s.memoizedState,r);if(i&&(s.memoizedState=r,Zn=!0),s=s.queue,LC(kM.bind(null,t,s,n),[n]),s.getSnapshot!==e||i||Xt!==null&&Xt.memoizedState.tag&1){if(t.flags|=2048,hm(9,CM.bind(null,t,s,r,e),void 0,null),Yt===null)throw Error(H(349));cu&30||EM(t,e,r)}return r}function EM(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function CM(n,e,t,s){e.value=t,e.getSnapshot=s,TM(e)&&PM(n)}function kM(n,e,t){return t(function(){TM(e)&&PM(n)})}function TM(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Pr(n,t)}catch{return!0}}function PM(n){var e=So(n,1);e!==null&&Tr(e,n,1,-1)}function rP(n){var e=$r();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:dm,lastRenderedState:n},e.queue=n,n=n.dispatch=K4.bind(null,pt,n),[e.memoizedState,n]}function hm(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=pt.updateQueue,e===null?(e={lastEffect:null,stores:null},pt.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function NM(){return nr().memoizedState}function Ev(n,e,t,s){var r=$r();pt.flags|=n,r.memoizedState=hm(1|e,t,void 0,s===void 0?null:s)}function i1(n,e,t,s){var r=nr();s=s===void 0?null:s;var i=void 0;if(Bt!==null){var o=Bt.memoizedState;if(i=o.destroy,s!==null&&RC(s,o.deps)){r.memoizedState=hm(e,t,i,s);return}}pt.flags|=n,r.memoizedState=hm(1|e,t,i,s)}function iP(n,e){return Ev(8390656,8,n,e)}function LC(n,e){return i1(2048,8,n,e)}function RM(n,e){return i1(4,2,n,e)}function MM(n,e){return i1(4,4,n,e)}function jM(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function LM(n,e,t){return t=t!=null?t.concat([n]):null,i1(4,4,jM.bind(null,e,n),t)}function DC(){}function DM(n,e){var t=nr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&RC(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function IM(n,e){var t=nr();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&RC(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function OM(n,e,t){return cu&21?(Pr(t,e)||(t=zR(),pt.lanes|=t,uu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Zn=!0),n.memoizedState=t)}function W4(n,e){var t=Oe;Oe=t!==0&&4>t?t:4,n(!0);var s=pS.transition;pS.transition={};try{n(!1),e()}finally{Oe=t,pS.transition=s}}function FM(){return nr().memoizedState}function q4(n,e,t){var s=Ka(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},BM(n))$M(e,t);else if(t=xM(n,e,t,s),t!==null){var r=In();Tr(t,n,s,r),VM(t,e,s)}}function K4(n,e,t){var s=Ka(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(BM(n))$M(e,r);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,t);if(r.hasEagerState=!0,r.eagerState=a,Pr(a,o)){var c=e.interleaved;c===null?(r.next=r,CC(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=xM(n,e,r,s),t!==null&&(r=In(),Tr(t,n,s,r),VM(t,e,s))}}function BM(n){var e=n.alternate;return n===pt||e!==null&&e===pt}function $M(n,e){Fp=Rb=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function VM(n,e,t){if(t&4194240){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,hC(n,t)}}var Mb={readContext:tr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},X4={readContext:tr,useCallback:function(n,e){return $r().memoizedState=[n,e===void 0?null:e],n},useContext:tr,useEffect:iP,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ev(4194308,4,jM.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ev(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ev(4,2,n,e)},useMemo:function(n,e){var t=$r();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=$r();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=q4.bind(null,pt,n),[s.memoizedState,n]},useRef:function(n){var e=$r();return n={current:n},e.memoizedState=n},useState:rP,useDebugValue:DC,useDeferredValue:function(n){return $r().memoizedState=n},useTransition:function(){var n=rP(!1),e=n[0];return n=W4.bind(null,n[1]),$r().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=pt,r=$r();if(lt){if(t===void 0)throw Error(H(407));t=t()}else{if(t=e(),Yt===null)throw Error(H(349));cu&30||EM(s,e,t)}r.memoizedState=t;var i={value:t,getSnapshot:e};return r.queue=i,iP(kM.bind(null,s,i,n),[n]),s.flags|=2048,hm(9,CM.bind(null,s,i,t,e),void 0,null),t},useId:function(){var n=$r(),e=Yt.identifierPrefix;if(lt){var t=fo,s=ho;t=(s&~(1<<32-kr(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=um++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=G4++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Y4={readContext:tr,useCallback:DM,useContext:tr,useEffect:LC,useImperativeHandle:LM,useInsertionEffect:RM,useLayoutEffect:MM,useMemo:IM,useReducer:mS,useRef:NM,useState:function(){return mS(dm)},useDebugValue:DC,useDeferredValue:function(n){var e=nr();return OM(e,Bt.memoizedState,n)},useTransition:function(){var n=mS(dm)[0],e=nr().memoizedState;return[n,e]},useMutableSource:_M,useSyncExternalStore:AM,useId:FM,unstable_isNewReconciler:!1},Q4={readContext:tr,useCallback:DM,useContext:tr,useEffect:LC,useImperativeHandle:LM,useInsertionEffect:RM,useLayoutEffect:MM,useMemo:IM,useReducer:gS,useRef:NM,useState:function(){return gS(dm)},useDebugValue:DC,useDeferredValue:function(n){var e=nr();return Bt===null?e.memoizedState=n:OM(e,Bt.memoizedState,n)},useTransition:function(){var n=gS(dm)[0],e=nr().memoizedState;return[n,e]},useMutableSource:_M,useSyncExternalStore:AM,useId:FM,unstable_isNewReconciler:!1};function cr(n,e){if(n&&n.defaultProps){e=gt({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function L_(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:gt({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var o1={isMounted:function(n){return(n=n._reactInternals)?yu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=In(),r=Ka(n),i=go(s,r);i.payload=e,t!=null&&(i.callback=t),e=Wa(n,i,r),e!==null&&(Tr(e,n,r,s),_v(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=In(),r=Ka(n),i=go(s,r);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=Wa(n,i,r),e!==null&&(Tr(e,n,r,s),_v(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=In(),s=Ka(n),r=go(t,s);r.tag=2,e!=null&&(r.callback=e),e=Wa(n,r,s),e!==null&&(Tr(e,n,s,t),_v(e,n,s))}};function oP(n,e,t,s,r,i,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!rm(t,s)||!rm(r,i):!0}function zM(n,e,t){var s=!1,r=Za,i=e.contextType;return typeof i=="object"&&i!==null?i=tr(i):(r=ts(e)?au:En.current,s=e.contextTypes,i=(s=s!=null)?mf(n,r):Za),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=o1,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=i),e}function aP(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&o1.enqueueReplaceState(e,e.state,null)}function D_(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},kC(n);var i=e.contextType;typeof i=="object"&&i!==null?r.context=tr(i):(i=ts(e)?au:En.current,r.context=mf(n,i)),r.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(L_(n,e,i,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&o1.enqueueReplaceState(r,r.state,null),Pb(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function bf(n,e){try{var t="",s=e;do t+=E3(s),s=s.return;while(s);var r=t}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:r,digest:null}}function yS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function I_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var J4=typeof WeakMap=="function"?WeakMap:Map;function UM(n,e,t){t=go(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){Lb||(Lb=!0,W_=s),I_(n,e)},t}function HM(n,e,t){t=go(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){I_(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){I_(n,e),typeof s!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function lP(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new J4;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=hB.bind(null,n,e,t),e.then(n,n))}function cP(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function uP(n,e,t,s,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=go(-1,1),e.tag=2,Wa(t,e,1))),t.lanes|=1),n)}var Z4=To.ReactCurrentOwner,Zn=!1;function Ln(n,e,t,s){e.child=n===null?bM(e,null,t,s):yf(e,n.child,t,s)}function dP(n,e,t,s,r){t=t.render;var i=e.ref;return cd(e,r),s=MC(n,e,t,s,i,r),t=jC(),n!==null&&!Zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,_o(n,e,r)):(lt&&t&&xC(e),e.flags|=1,Ln(n,e,s,r),e.child)}function hP(n,e,t,s,r){if(n===null){var i=t.type;return typeof i=="function"&&!UC(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,GM(n,e,i,s,r)):(n=Pv(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&r)){var o=i.memoizedProps;if(t=t.compare,t=t!==null?t:rm,t(o,s)&&n.ref===e.ref)return _o(n,e,r)}return e.flags|=1,n=Xa(i,s),n.ref=e.ref,n.return=e,e.child=n}function GM(n,e,t,s,r){if(n!==null){var i=n.memoizedProps;if(rm(i,s)&&n.ref===e.ref)if(Zn=!1,e.pendingProps=s=i,(n.lanes&r)!==0)n.flags&131072&&(Zn=!0);else return e.lanes=n.lanes,_o(n,e,r)}return O_(n,e,t,s,r)}function WM(n,e,t){var s=e.pendingProps,r=s.children,i=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Xu,Es),Es|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ye(Xu,Es),Es|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:t,Ye(Xu,Es),Es|=s}else i!==null?(s=i.baseLanes|t,e.memoizedState=null):s=t,Ye(Xu,Es),Es|=s;return Ln(n,e,r,t),e.child}function qM(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function O_(n,e,t,s,r){var i=ts(t)?au:En.current;return i=mf(e,i),cd(e,r),t=MC(n,e,t,s,i,r),s=jC(),n!==null&&!Zn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,_o(n,e,r)):(lt&&s&&xC(e),e.flags|=1,Ln(n,e,t,r),e.child)}function fP(n,e,t,s,r){if(ts(t)){var i=!0;Ab(e)}else i=!1;if(cd(e,r),e.stateNode===null)Cv(n,e),zM(e,t,s),D_(e,t,s,r),s=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=tr(u):(u=ts(t)?au:En.current,u=mf(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||c!==u)&&aP(e,o,s,u),Io=!1;var f=e.memoizedState;o.state=f,Pb(e,s,o,r),c=e.memoizedState,a!==s||f!==c||es.current||Io?(typeof d=="function"&&(L_(e,t,d,s),c=e.memoizedState),(a=Io||oP(e,t,a,s,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,wM(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:cr(e.type,a),o.props=u,h=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=tr(c):(c=ts(t)?au:En.current,c=mf(e,c));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==c)&&aP(e,o,s,c),Io=!1,f=e.memoizedState,o.state=f,Pb(e,s,o,r);var y=e.memoizedState;a!==h||f!==y||es.current||Io?(typeof m=="function"&&(L_(e,t,m,s),y=e.memoizedState),(u=Io||oP(e,t,u,s,f,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),s=!1)}return F_(n,e,t,s,i,r)}function F_(n,e,t,s,r,i){qM(n,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&JT(e,t,!1),_o(n,e,i);s=e.stateNode,Z4.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&o?(e.child=yf(e,n.child,null,i),e.child=yf(e,null,a,i)):Ln(n,e,a,i),e.memoizedState=s.state,r&&JT(e,t,!0),e.child}function KM(n){var e=n.stateNode;e.pendingContext?QT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&QT(n,e.context,!1),TC(n,e.containerInfo)}function pP(n,e,t,s,r){return gf(),SC(r),e.flags|=256,Ln(n,e,t,s),e.child}var B_={dehydrated:null,treeContext:null,retryLane:0};function $_(n){return{baseLanes:n,cachePool:null,transitions:null}}function XM(n,e,t){var s=e.pendingProps,r=dt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ye(dt,r&1),n===null)return M_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,n=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=c1(o,s,0,null),n=ou(n,s,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=$_(t),e.memoizedState=B_,n):IC(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return eB(n,e,o,s,a,r,t);if(i){i=s.fallback,o=e.mode,r=n.child,a=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Xa(r,c),s.subtreeFlags=r.subtreeFlags&14680064),a!==null?i=Xa(a,i):(i=ou(i,o,t,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=n.child.memoizedState,o=o===null?$_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=n.childLanes&~t,e.memoizedState=B_,s}return i=n.child,n=i.sibling,s=Xa(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function IC(n,e){return e=c1({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Vy(n,e,t,s){return s!==null&&SC(s),yf(e,n.child,null,t),n=IC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function eB(n,e,t,s,r,i,o){if(t)return e.flags&256?(e.flags&=-257,s=yS(Error(H(422))),Vy(n,e,o,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=c1({mode:"visible",children:s.children},r,0,null),i=ou(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&yf(e,n.child,null,o),e.child.memoizedState=$_(o),e.memoizedState=B_,i);if(!(e.mode&1))return Vy(n,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var a=s.dgst;return s=a,i=Error(H(419)),s=yS(i,s,void 0),Vy(n,e,o,s)}if(a=(o&n.childLanes)!==0,Zn||a){if(s=Yt,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,So(n,r),Tr(s,n,r,-1))}return zC(),s=yS(Error(H(421))),Vy(n,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=fB.bind(null,n),r._reactRetry=e,null):(n=i.treeContext,ks=Ga(r.nextSibling),Ts=e,lt=!0,Cr=null,n!==null&&(Ys[Qs++]=ho,Ys[Qs++]=fo,Ys[Qs++]=lu,ho=n.id,fo=n.overflow,lu=e),e=IC(e,s.children),e.flags|=4096,e)}function mP(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),j_(n.return,e,t)}function vS(n,e,t,s,r){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=t,i.tailMode=r)}function YM(n,e,t){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Ln(n,e,s.children,t),s=dt.current,s&2)s=s&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&mP(n,t,e);else if(n.tag===19)mP(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(Ye(dt,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Nb(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),vS(e,!1,r,t,i);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Nb(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}vS(e,!0,t,null,i);break;case"together":vS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cv(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function _o(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),uu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(H(153));if(e.child!==null){for(n=e.child,t=Xa(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Xa(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function tB(n,e,t){switch(e.tag){case 3:KM(e),gf();break;case 5:SM(e);break;case 1:ts(e.type)&&Ab(e);break;case 4:TC(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Ye(kb,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ye(dt,dt.current&1),e.flags|=128,null):t&e.child.childLanes?XM(n,e,t):(Ye(dt,dt.current&1),n=_o(n,e,t),n!==null?n.sibling:null);Ye(dt,dt.current&1);break;case 19:if(s=(t&e.childLanes)!==0,n.flags&128){if(s)return YM(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ye(dt,dt.current),s)break;return null;case 22:case 23:return e.lanes=0,WM(n,e,t)}return _o(n,e,t)}var QM,V_,JM,ZM;QM=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};V_=function(){};JM=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,Tl(mi.current);var i=null;switch(t){case"input":r=c_(n,r),s=c_(n,s),i=[];break;case"select":r=gt({},r,{value:void 0}),s=gt({},s,{value:void 0}),i=[];break;case"textarea":r=h_(n,r),s=h_(n,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Sb)}p_(t,s);var o;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Qp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(a=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==a&&(c!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(i||(i=[]),i.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Qp.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&tt("scroll",n),i||a===c||(i=[])):(i=i||[]).push(u,c))}t&&(i=i||[]).push("style",t);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};ZM=function(n,e,t,s){t!==s&&(e.flags|=4)};function Uf(n,e){if(!lt)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function hn(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function nB(n,e,t){var s=e.pendingProps;switch(wC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(e),null;case 1:return ts(e.type)&&_b(),hn(e),null;case 3:return s=e.stateNode,vf(),st(es),st(En),NC(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(By(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Cr!==null&&(X_(Cr),Cr=null))),V_(n,e),hn(e),null;case 5:PC(e);var r=Tl(cm.current);if(t=e.type,n!==null&&e.stateNode!=null)JM(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(H(166));return hn(e),null}if(n=Tl(mi.current),By(e)){s=e.stateNode,t=e.type;var i=e.memoizedProps;switch(s[hi]=e,s[am]=i,n=(e.mode&1)!==0,t){case"dialog":tt("cancel",s),tt("close",s);break;case"iframe":case"object":case"embed":tt("load",s);break;case"video":case"audio":for(r=0;r<lp.length;r++)tt(lp[r],s);break;case"source":tt("error",s);break;case"img":case"image":case"link":tt("error",s),tt("load",s);break;case"details":tt("toggle",s);break;case"input":AT(s,i),tt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},tt("invalid",s);break;case"textarea":CT(s,i),tt("invalid",s)}p_(t,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?s.textContent!==a&&(i.suppressHydrationWarning!==!0&&Fy(s.textContent,a,n),r=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Fy(s.textContent,a,n),r=["children",""+a]):Qp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",s)}switch(t){case"input":Ny(s),ET(s,i,!0);break;case"textarea":Ny(s),kT(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Sb)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=kR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(t,{is:s.is}):(n=o.createElement(t),t==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,t),n[hi]=e,n[am]=s,QM(n,e,!1,!1),e.stateNode=n;e:{switch(o=m_(t,s),t){case"dialog":tt("cancel",n),tt("close",n),r=s;break;case"iframe":case"object":case"embed":tt("load",n),r=s;break;case"video":case"audio":for(r=0;r<lp.length;r++)tt(lp[r],n);r=s;break;case"source":tt("error",n),r=s;break;case"img":case"image":case"link":tt("error",n),tt("load",n),r=s;break;case"details":tt("toggle",n),r=s;break;case"input":AT(n,s),r=c_(n,s),tt("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=gt({},s,{value:void 0}),tt("invalid",n);break;case"textarea":CT(n,s),r=h_(n,s),tt("invalid",n);break;default:r=s}p_(t,r),a=r;for(i in a)if(a.hasOwnProperty(i)){var c=a[i];i==="style"?NR(n,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&TR(n,c)):i==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&Jp(n,c):typeof c=="number"&&Jp(n,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Qp.hasOwnProperty(i)?c!=null&&i==="onScroll"&&tt("scroll",n):c!=null&&oC(n,i,c,o))}switch(t){case"input":Ny(n),ET(n,s,!1);break;case"textarea":Ny(n),kT(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Ja(s.value));break;case"select":n.multiple=!!s.multiple,i=s.value,i!=null?id(n,!!s.multiple,i,!1):s.defaultValue!=null&&id(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Sb)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hn(e),null;case 6:if(n&&e.stateNode!=null)ZM(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(H(166));if(t=Tl(cm.current),Tl(mi.current),By(e)){if(s=e.stateNode,t=e.memoizedProps,s[hi]=e,(i=s.nodeValue!==t)&&(n=Ts,n!==null))switch(n.tag){case 3:Fy(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Fy(s.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[hi]=e,e.stateNode=s}return hn(e),null;case 13:if(st(dt),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(lt&&ks!==null&&e.mode&1&&!(e.flags&128))yM(),gf(),e.flags|=98560,i=!1;else if(i=By(e),s!==null&&s.dehydrated!==null){if(n===null){if(!i)throw Error(H(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[hi]=e}else gf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hn(e),i=!1}else Cr!==null&&(X_(Cr),Cr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(n===null||dt.current&1?$t===0&&($t=3):zC())),e.updateQueue!==null&&(e.flags|=4),hn(e),null);case 4:return vf(),V_(n,e),n===null&&im(e.stateNode.containerInfo),hn(e),null;case 10:return EC(e.type._context),hn(e),null;case 17:return ts(e.type)&&_b(),hn(e),null;case 19:if(st(dt),i=e.memoizedState,i===null)return hn(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)Uf(i,!1);else{if($t!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Nb(n),o!==null){for(e.flags|=128,Uf(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)i=t,n=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,n=o.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ye(dt,dt.current&1|2),e.child}n=n.sibling}i.tail!==null&&kt()>xf&&(e.flags|=128,s=!0,Uf(i,!1),e.lanes=4194304)}else{if(!s)if(n=Nb(o),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Uf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!lt)return hn(e),null}else 2*kt()-i.renderingStartTime>xf&&t!==1073741824&&(e.flags|=128,s=!0,Uf(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(t=i.last,t!==null?t.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=kt(),e.sibling=null,t=dt.current,Ye(dt,s?t&1|2:t&1),e):(hn(e),null);case 22:case 23:return VC(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Es&1073741824&&(hn(e),e.subtreeFlags&6&&(e.flags|=8192)):hn(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function sB(n,e){switch(wC(e),e.tag){case 1:return ts(e.type)&&_b(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return vf(),st(es),st(En),NC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return PC(e),null;case 13:if(st(dt),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(H(340));gf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return st(dt),null;case 4:return vf(),null;case 10:return EC(e.type._context),null;case 22:case 23:return VC(),null;case 24:return null;default:return null}}var zy=!1,Sn=!1,rB=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Ku(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){St(n,e,s)}else t.current=null}function z_(n,e,t){try{t()}catch(s){St(n,e,s)}}var gP=!1;function iB(n,e){if(E_=bb,n=rM(),bC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var o=0,a=-1,c=-1,u=0,d=0,h=n,f=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==i||s!==0&&h.nodeType!==3||(c=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===n)break t;if(f===t&&++u===r&&(a=o),f===i&&++d===s&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}t=a===-1||c===-1?null:{start:a,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(C_={focusedElem:n,selectionRange:t},bb=!1,Z=e;Z!==null;)if(e=Z,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Z=n;else for(;Z!==null;){e=Z;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,w=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:cr(e.type,g),w);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(E){St(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}return y=gP,gP=!1,y}function Bp(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var i=r.destroy;r.destroy=void 0,i!==void 0&&z_(e,t,i)}r=r.next}while(r!==s)}}function a1(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function U_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function ej(n){var e=n.alternate;e!==null&&(n.alternate=null,ej(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[hi],delete e[am],delete e[P_],delete e[V4],delete e[z4])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function tj(n){return n.tag===5||n.tag===3||n.tag===4}function yP(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||tj(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function H_(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sb));else if(s!==4&&(n=n.child,n!==null))for(H_(n,e,t),n=n.sibling;n!==null;)H_(n,e,t),n=n.sibling}function G_(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(G_(n,e,t),n=n.sibling;n!==null;)G_(n,e,t),n=n.sibling}var an=null,Ar=!1;function No(n,e,t){for(t=t.child;t!==null;)nj(n,e,t),t=t.sibling}function nj(n,e,t){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(Zw,t)}catch{}switch(t.tag){case 5:Sn||Ku(t,e);case 6:var s=an,r=Ar;an=null,No(n,e,t),an=s,Ar=r,an!==null&&(Ar?(n=an,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):an.removeChild(t.stateNode));break;case 18:an!==null&&(Ar?(n=an,t=t.stateNode,n.nodeType===8?dS(n.parentNode,t):n.nodeType===1&&dS(n,t),nm(n)):dS(an,t.stateNode));break;case 4:s=an,r=Ar,an=t.stateNode.containerInfo,Ar=!0,No(n,e,t),an=s,Ar=r;break;case 0:case 11:case 14:case 15:if(!Sn&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&z_(t,e,o),r=r.next}while(r!==s)}No(n,e,t);break;case 1:if(!Sn&&(Ku(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(a){St(t,e,a)}No(n,e,t);break;case 21:No(n,e,t);break;case 22:t.mode&1?(Sn=(s=Sn)||t.memoizedState!==null,No(n,e,t),Sn=s):No(n,e,t);break;default:No(n,e,t)}}function vP(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new rB),e.forEach(function(s){var r=pB.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function ir(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var i=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:an=a.stateNode,Ar=!1;break e;case 3:an=a.stateNode.containerInfo,Ar=!0;break e;case 4:an=a.stateNode.containerInfo,Ar=!0;break e}a=a.return}if(an===null)throw Error(H(160));nj(i,o,r),an=null,Ar=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){St(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sj(e,n),e=e.sibling}function sj(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ir(e,n),Ir(n),s&4){try{Bp(3,n,n.return),a1(3,n)}catch(g){St(n,n.return,g)}try{Bp(5,n,n.return)}catch(g){St(n,n.return,g)}}break;case 1:ir(e,n),Ir(n),s&512&&t!==null&&Ku(t,t.return);break;case 5:if(ir(e,n),Ir(n),s&512&&t!==null&&Ku(t,t.return),n.flags&32){var r=n.stateNode;try{Jp(r,"")}catch(g){St(n,n.return,g)}}if(s&4&&(r=n.stateNode,r!=null)){var i=n.memoizedProps,o=t!==null?t.memoizedProps:i,a=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&ER(r,i),m_(a,o);var u=m_(a,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?NR(r,h):d==="dangerouslySetInnerHTML"?TR(r,h):d==="children"?Jp(r,h):oC(r,d,h,u)}switch(a){case"input":u_(r,i);break;case"textarea":CR(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?id(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?id(r,!!i.multiple,i.defaultValue,!0):id(r,!!i.multiple,i.multiple?[]:"",!1))}r[am]=i}catch(g){St(n,n.return,g)}}break;case 6:if(ir(e,n),Ir(n),s&4){if(n.stateNode===null)throw Error(H(162));r=n.stateNode,i=n.memoizedProps;try{r.nodeValue=i}catch(g){St(n,n.return,g)}}break;case 3:if(ir(e,n),Ir(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{nm(e.containerInfo)}catch(g){St(n,n.return,g)}break;case 4:ir(e,n),Ir(n);break;case 13:ir(e,n),Ir(n),r=n.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(BC=kt())),s&4&&vP(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(Sn=(u=Sn)||d,ir(e,n),Sn=u):ir(e,n),Ir(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(Z=n,d=n.child;d!==null;){for(h=Z=d;Z!==null;){switch(f=Z,m=f.child,f.tag){case 0:case 11:case 14:case 15:Bp(4,f,f.return);break;case 1:Ku(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,t=f.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){St(s,t,g)}}break;case 5:Ku(f,f.return);break;case 22:if(f.memoizedState!==null){xP(h);continue}}m!==null?(m.return=f,Z=m):xP(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=PR("display",o))}catch(g){St(n,n.return,g)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){St(n,n.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ir(e,n),Ir(n),s&4&&vP(n);break;case 21:break;default:ir(e,n),Ir(n)}}function Ir(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(tj(t)){var s=t;break e}t=t.return}throw Error(H(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(Jp(r,""),s.flags&=-33);var i=yP(n);G_(n,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,a=yP(n);H_(n,a,o);break;default:throw Error(H(161))}}catch(c){St(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function oB(n,e,t){Z=n,rj(n)}function rj(n,e,t){for(var s=(n.mode&1)!==0;Z!==null;){var r=Z,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||zy;if(!o){var a=r.alternate,c=a!==null&&a.memoizedState!==null||Sn;a=zy;var u=Sn;if(zy=o,(Sn=c)&&!u)for(Z=r;Z!==null;)o=Z,c=o.child,o.tag===22&&o.memoizedState!==null?wP(r):c!==null?(c.return=o,Z=c):wP(r);for(;i!==null;)Z=i,rj(i),i=i.sibling;Z=r,zy=a,Sn=u}bP(n)}else r.subtreeFlags&8772&&i!==null?(i.return=r,Z=i):bP(n)}}function bP(n){for(;Z!==null;){var e=Z;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sn||a1(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Sn)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:cr(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sP(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}sP(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&nm(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Sn||e.flags&512&&U_(e)}catch(f){St(e,e.return,f)}}if(e===n){Z=null;break}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}}function xP(n){for(;Z!==null;){var e=Z;if(e===n){Z=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Z=t;break}Z=e.return}}function wP(n){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{a1(4,e)}catch(c){St(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){St(e,r,c)}}var i=e.return;try{U_(e)}catch(c){St(e,i,c)}break;case 5:var o=e.return;try{U_(e)}catch(c){St(e,o,c)}}}catch(c){St(e,e.return,c)}if(e===n){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var aB=Math.ceil,jb=To.ReactCurrentDispatcher,OC=To.ReactCurrentOwner,er=To.ReactCurrentBatchConfig,Me=0,Yt=null,Mt=null,cn=0,Es=0,Xu=il(0),$t=0,fm=null,uu=0,l1=0,FC=0,$p=null,Qn=null,BC=0,xf=1/0,_i=null,Lb=!1,W_=null,qa=null,Uy=!1,Va=null,Db=0,Vp=0,q_=null,kv=-1,Tv=0;function In(){return Me&6?kt():kv!==-1?kv:kv=kt()}function Ka(n){return n.mode&1?Me&2&&cn!==0?cn&-cn:H4.transition!==null?(Tv===0&&(Tv=zR()),Tv):(n=Oe,n!==0||(n=window.event,n=n===void 0?16:XR(n.type)),n):1}function Tr(n,e,t,s){if(50<Vp)throw Vp=0,q_=null,Error(H(185));ry(n,t,s),(!(Me&2)||n!==Yt)&&(n===Yt&&(!(Me&2)&&(l1|=t),$t===4&&Bo(n,cn)),ns(n,s),t===1&&Me===0&&!(e.mode&1)&&(xf=kt()+500,r1&&ol()))}function ns(n,e){var t=n.callbackNode;H3(n,e);var s=vb(n,n===Yt?cn:0);if(s===0)t!==null&&NT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&NT(t),e===1)n.tag===0?U4(SP.bind(null,n)):pM(SP.bind(null,n)),B4(function(){!(Me&6)&&ol()}),t=null;else{switch(UR(s)){case 1:t=dC;break;case 4:t=$R;break;case 16:t=yb;break;case 536870912:t=VR;break;default:t=yb}t=hj(t,ij.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function ij(n,e){if(kv=-1,Tv=0,Me&6)throw Error(H(327));var t=n.callbackNode;if(ud()&&n.callbackNode!==t)return null;var s=vb(n,n===Yt?cn:0);if(s===0)return null;if(s&30||s&n.expiredLanes||e)e=Ib(n,s);else{e=s;var r=Me;Me|=2;var i=aj();(Yt!==n||cn!==e)&&(_i=null,xf=kt()+500,iu(n,e));do try{uB();break}catch(a){oj(n,a)}while(1);AC(),jb.current=i,Me=r,Mt!==null?e=0:(Yt=null,cn=0,e=$t)}if(e!==0){if(e===2&&(r=x_(n),r!==0&&(s=r,e=K_(n,r))),e===1)throw t=fm,iu(n,0),Bo(n,s),ns(n,kt()),t;if(e===6)Bo(n,s);else{if(r=n.current.alternate,!(s&30)&&!lB(r)&&(e=Ib(n,s),e===2&&(i=x_(n),i!==0&&(s=i,e=K_(n,i))),e===1))throw t=fm,iu(n,0),Bo(n,s),ns(n,kt()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(H(345));case 2:pl(n,Qn,_i);break;case 3:if(Bo(n,s),(s&130023424)===s&&(e=BC+500-kt(),10<e)){if(vb(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){In(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=T_(pl.bind(null,n,Qn,_i),e);break}pl(n,Qn,_i);break;case 4:if(Bo(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var o=31-kr(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=kt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*aB(s/1960))-s,10<s){n.timeoutHandle=T_(pl.bind(null,n,Qn,_i),s);break}pl(n,Qn,_i);break;case 5:pl(n,Qn,_i);break;default:throw Error(H(329))}}}return ns(n,kt()),n.callbackNode===t?ij.bind(null,n):null}function K_(n,e){var t=$p;return n.current.memoizedState.isDehydrated&&(iu(n,e).flags|=256),n=Ib(n,e),n!==2&&(e=Qn,Qn=t,e!==null&&X_(e)),n}function X_(n){Qn===null?Qn=n:Qn.push.apply(Qn,n)}function lB(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],i=r.getSnapshot;r=r.value;try{if(!Pr(i(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bo(n,e){for(e&=~FC,e&=~l1,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-kr(e),s=1<<t;n[t]=-1,e&=~s}}function SP(n){if(Me&6)throw Error(H(327));ud();var e=vb(n,0);if(!(e&1))return ns(n,kt()),null;var t=Ib(n,e);if(n.tag!==0&&t===2){var s=x_(n);s!==0&&(e=s,t=K_(n,s))}if(t===1)throw t=fm,iu(n,0),Bo(n,e),ns(n,kt()),t;if(t===6)throw Error(H(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,pl(n,Qn,_i),ns(n,kt()),null}function $C(n,e){var t=Me;Me|=1;try{return n(e)}finally{Me=t,Me===0&&(xf=kt()+500,r1&&ol())}}function du(n){Va!==null&&Va.tag===0&&!(Me&6)&&ud();var e=Me;Me|=1;var t=er.transition,s=Oe;try{if(er.transition=null,Oe=1,n)return n()}finally{Oe=s,er.transition=t,Me=e,!(Me&6)&&ol()}}function VC(){Es=Xu.current,st(Xu)}function iu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,F4(t)),Mt!==null)for(t=Mt.return;t!==null;){var s=t;switch(wC(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&_b();break;case 3:vf(),st(es),st(En),NC();break;case 5:PC(s);break;case 4:vf();break;case 13:st(dt);break;case 19:st(dt);break;case 10:EC(s.type._context);break;case 22:case 23:VC()}t=t.return}if(Yt=n,Mt=n=Xa(n.current,null),cn=Es=e,$t=0,fm=null,FC=l1=uu=0,Qn=$p=null,kl!==null){for(e=0;e<kl.length;e++)if(t=kl[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,i=t.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}t.pending=s}kl=null}return n}function oj(n,e){do{var t=Mt;try{if(AC(),Av.current=Mb,Rb){for(var s=pt.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}Rb=!1}if(cu=0,Xt=Bt=pt=null,Fp=!1,um=0,OC.current=null,t===null||t.return===null){$t=1,fm=e,Mt=null;break}e:{var i=n,o=t.return,a=t,c=e;if(e=cn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=cP(o);if(m!==null){m.flags&=-257,uP(m,o,a,i,e),m.mode&1&&lP(i,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){lP(i,u,e),zC();break e}c=Error(H(426))}}else if(lt&&a.mode&1){var w=cP(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),uP(w,o,a,i,e),SC(bf(c,a));break e}}i=c=bf(c,a),$t!==4&&($t=2),$p===null?$p=[i]:$p.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=UM(i,c,e);nP(i,v);break e;case 1:a=c;var b=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(qa===null||!qa.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var E=HM(i,a,e);nP(i,E);break e}}i=i.return}while(i!==null)}cj(t)}catch(k){e=k,Mt===t&&t!==null&&(Mt=t=t.return);continue}break}while(1)}function aj(){var n=jb.current;return jb.current=Mb,n===null?Mb:n}function zC(){($t===0||$t===3||$t===2)&&($t=4),Yt===null||!(uu&268435455)&&!(l1&268435455)||Bo(Yt,cn)}function Ib(n,e){var t=Me;Me|=2;var s=aj();(Yt!==n||cn!==e)&&(_i=null,iu(n,e));do try{cB();break}catch(r){oj(n,r)}while(1);if(AC(),Me=t,jb.current=s,Mt!==null)throw Error(H(261));return Yt=null,cn=0,$t}function cB(){for(;Mt!==null;)lj(Mt)}function uB(){for(;Mt!==null&&!D3();)lj(Mt)}function lj(n){var e=dj(n.alternate,n,Es);n.memoizedProps=n.pendingProps,e===null?cj(n):Mt=e,OC.current=null}function cj(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=sB(t,e),t!==null){t.flags&=32767,Mt=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$t=6,Mt=null;return}}else if(t=nB(t,e,Es),t!==null){Mt=t;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=n}while(e!==null);$t===0&&($t=5)}function pl(n,e,t){var s=Oe,r=er.transition;try{er.transition=null,Oe=1,dB(n,e,t,s)}finally{er.transition=r,Oe=s}return null}function dB(n,e,t,s){do ud();while(Va!==null);if(Me&6)throw Error(H(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(H(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(G3(n,i),n===Yt&&(Mt=Yt=null,cn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Uy||(Uy=!0,hj(yb,function(){return ud(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=er.transition,er.transition=null;var o=Oe;Oe=1;var a=Me;Me|=4,OC.current=null,iB(n,t),sj(t,n),R4(C_),bb=!!E_,C_=E_=null,n.current=t,oB(t),I3(),Me=a,Oe=o,er.transition=i}else n.current=t;if(Uy&&(Uy=!1,Va=n,Db=r),i=n.pendingLanes,i===0&&(qa=null),B3(t.stateNode),ns(n,kt()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(Lb)throw Lb=!1,n=W_,W_=null,n;return Db&1&&n.tag!==0&&ud(),i=n.pendingLanes,i&1?n===q_?Vp++:(Vp=0,q_=n):Vp=0,ol(),null}function ud(){if(Va!==null){var n=UR(Db),e=er.transition,t=Oe;try{if(er.transition=null,Oe=16>n?16:n,Va===null)var s=!1;else{if(n=Va,Va=null,Db=0,Me&6)throw Error(H(331));var r=Me;for(Me|=4,Z=n.current;Z!==null;){var i=Z,o=i.child;if(Z.flags&16){var a=i.deletions;if(a!==null){for(var c=0;c<a.length;c++){var u=a[c];for(Z=u;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Bp(8,d,i)}var h=d.child;if(h!==null)h.return=d,Z=h;else for(;Z!==null;){d=Z;var f=d.sibling,m=d.return;if(ej(d),d===u){Z=null;break}if(f!==null){f.return=m,Z=f;break}Z=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}Z=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Z=o;else e:for(;Z!==null;){if(i=Z,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Bp(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,Z=v;break e}Z=i.return}}var b=n.current;for(Z=b;Z!==null;){o=Z;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Z=_;else e:for(o=b;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:a1(9,a)}}catch(k){St(a,a.return,k)}if(a===o){Z=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Z=E;break e}Z=a.return}}if(Me=r,ol(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(Zw,n)}catch{}s=!0}return s}finally{Oe=t,er.transition=e}}return!1}function _P(n,e,t){e=bf(t,e),e=UM(n,e,1),n=Wa(n,e,1),e=In(),n!==null&&(ry(n,1,e),ns(n,e))}function St(n,e,t){if(n.tag===3)_P(n,n,t);else for(;e!==null;){if(e.tag===3){_P(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(qa===null||!qa.has(s))){n=bf(t,n),n=HM(e,n,1),e=Wa(e,n,1),n=In(),e!==null&&(ry(e,1,n),ns(e,n));break}}e=e.return}}function hB(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=In(),n.pingedLanes|=n.suspendedLanes&t,Yt===n&&(cn&t)===t&&($t===4||$t===3&&(cn&130023424)===cn&&500>kt()-BC?iu(n,0):FC|=t),ns(n,e)}function uj(n,e){e===0&&(n.mode&1?(e=jy,jy<<=1,!(jy&130023424)&&(jy=4194304)):e=1);var t=In();n=So(n,e),n!==null&&(ry(n,e,t),ns(n,t))}function fB(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),uj(n,t)}function pB(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(H(314))}s!==null&&s.delete(e),uj(n,t)}var dj;dj=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||es.current)Zn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Zn=!1,tB(n,e,t);Zn=!!(n.flags&131072)}else Zn=!1,lt&&e.flags&1048576&&mM(e,Cb,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Cv(n,e),n=e.pendingProps;var r=mf(e,En.current);cd(e,t),r=MC(null,e,s,n,r,t);var i=jC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ts(s)?(i=!0,Ab(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,kC(e),r.updater=o1,e.stateNode=r,r._reactInternals=e,D_(e,s,n,t),e=F_(null,e,s,!0,i,t)):(e.tag=0,lt&&i&&xC(e),Ln(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Cv(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=gB(s),n=cr(s,n),r){case 0:e=O_(null,e,s,n,t);break e;case 1:e=fP(null,e,s,n,t);break e;case 11:e=dP(null,e,s,n,t);break e;case 14:e=hP(null,e,s,cr(s.type,n),t);break e}throw Error(H(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:cr(s,r),O_(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:cr(s,r),fP(n,e,s,r,t);case 3:e:{if(KM(e),n===null)throw Error(H(387));s=e.pendingProps,i=e.memoizedState,r=i.element,wM(n,e),Pb(e,s,null,t);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=bf(Error(H(423)),e),e=pP(n,e,s,t,r);break e}else if(s!==r){r=bf(Error(H(424)),e),e=pP(n,e,s,t,r);break e}else for(ks=Ga(e.stateNode.containerInfo.firstChild),Ts=e,lt=!0,Cr=null,t=bM(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(gf(),s===r){e=_o(n,e,t);break e}Ln(n,e,s,t)}e=e.child}return e;case 5:return SM(e),n===null&&M_(e),s=e.type,r=e.pendingProps,i=n!==null?n.memoizedProps:null,o=r.children,k_(s,r)?o=null:i!==null&&k_(s,i)&&(e.flags|=32),qM(n,e),Ln(n,e,o,t),e.child;case 6:return n===null&&M_(e),null;case 13:return XM(n,e,t);case 4:return TC(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=yf(e,null,s,t):Ln(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:cr(s,r),dP(n,e,s,r,t);case 7:return Ln(n,e,e.pendingProps,t),e.child;case 8:return Ln(n,e,e.pendingProps.children,t),e.child;case 12:return Ln(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Ye(kb,s._currentValue),s._currentValue=o,i!==null)if(Pr(i.value,o)){if(i.children===r.children&&!es.current){e=_o(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var c=a.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=go(-1,t&-t),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=t,c=i.alternate,c!==null&&(c.lanes|=t),j_(i.return,t,e),a.lanes|=t;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(H(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),j_(o,t,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ln(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,cd(e,t),r=tr(r),s=s(r),e.flags|=1,Ln(n,e,s,t),e.child;case 14:return s=e.type,r=cr(s,e.pendingProps),r=cr(s.type,r),hP(n,e,s,r,t);case 15:return GM(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:cr(s,r),Cv(n,e),e.tag=1,ts(s)?(n=!0,Ab(e)):n=!1,cd(e,t),zM(e,s,r),D_(e,s,r,t),F_(null,e,s,!0,n,t);case 19:return YM(n,e,t);case 22:return WM(n,e,t)}throw Error(H(156,e.tag))};function hj(n,e){return BR(n,e)}function mB(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zs(n,e,t,s){return new mB(n,e,t,s)}function UC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gB(n){if(typeof n=="function")return UC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===lC)return 11;if(n===cC)return 14}return 2}function Xa(n,e){var t=n.alternate;return t===null?(t=Zs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Pv(n,e,t,s,r,i){var o=2;if(s=n,typeof n=="function")UC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Bu:return ou(t.children,r,i,e);case aC:o=8,r|=8;break;case i_:return n=Zs(12,t,e,r|2),n.elementType=i_,n.lanes=i,n;case o_:return n=Zs(13,t,e,r),n.elementType=o_,n.lanes=i,n;case a_:return n=Zs(19,t,e,r),n.elementType=a_,n.lanes=i,n;case SR:return c1(t,r,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xR:o=10;break e;case wR:o=9;break e;case lC:o=11;break e;case cC:o=14;break e;case Do:o=16,s=null;break e}throw Error(H(130,n==null?n:typeof n,""))}return e=Zs(o,t,e,r),e.elementType=n,e.type=s,e.lanes=i,e}function ou(n,e,t,s){return n=Zs(7,n,s,e),n.lanes=t,n}function c1(n,e,t,s){return n=Zs(22,n,s,e),n.elementType=SR,n.lanes=t,n.stateNode={isHidden:!1},n}function bS(n,e,t){return n=Zs(6,n,null,e),n.lanes=t,n}function xS(n,e,t){return e=Zs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function yB(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eS(0),this.expirationTimes=eS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eS(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function HC(n,e,t,s,r,i,o,a,c){return n=new yB(n,e,t,a,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Zs(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},kC(i),n}function vB(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fu,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function fj(n){if(!n)return Za;n=n._reactInternals;e:{if(yu(n)!==n||n.tag!==1)throw Error(H(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ts(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(n.tag===1){var t=n.type;if(ts(t))return fM(n,t,e)}return e}function pj(n,e,t,s,r,i,o,a,c){return n=HC(t,s,!0,n,r,i,o,a,c),n.context=fj(null),t=n.current,s=In(),r=Ka(t),i=go(s,r),i.callback=e??null,Wa(t,i,r),n.current.lanes=r,ry(n,r,s),ns(n,s),n}function u1(n,e,t,s){var r=e.current,i=In(),o=Ka(r);return t=fj(t),e.context===null?e.context=t:e.pendingContext=t,e=go(i,o),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Wa(r,e,o),n!==null&&(Tr(n,r,o,i),_v(n,r,o)),o}function Ob(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function AP(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function GC(n,e){AP(n,e),(n=n.alternate)&&AP(n,e)}function bB(){return null}var mj=typeof reportError=="function"?reportError:function(n){console.error(n)};function WC(n){this._internalRoot=n}d1.prototype.render=WC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(H(409));u1(n,e,null,null)};d1.prototype.unmount=WC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;du(function(){u1(null,n,null,null)}),e[wo]=null}};function d1(n){this._internalRoot=n}d1.prototype.unstable_scheduleHydration=function(n){if(n){var e=WR();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Fo.length&&e!==0&&e<Fo[t].priority;t++);Fo.splice(t,0,n),t===0&&KR(n)}};function qC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function h1(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function EP(){}function xB(n,e,t,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=Ob(o);i.call(u)}}var o=pj(e,s,n,0,null,!1,!1,"",EP);return n._reactRootContainer=o,n[wo]=o.current,im(n.nodeType===8?n.parentNode:n),du(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var a=s;s=function(){var u=Ob(c);a.call(u)}}var c=HC(n,0,!1,null,null,!1,!1,"",EP);return n._reactRootContainer=c,n[wo]=c.current,im(n.nodeType===8?n.parentNode:n),du(function(){u1(e,c,t,s)}),c}function f1(n,e,t,s,r){var i=t._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var a=r;r=function(){var c=Ob(o);a.call(c)}}u1(e,o,n,r)}else o=xB(t,e,n,r,s);return Ob(o)}HR=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=ap(e.pendingLanes);t!==0&&(hC(e,t|1),ns(e,kt()),!(Me&6)&&(xf=kt()+500,ol()))}break;case 13:du(function(){var s=So(n,1);if(s!==null){var r=In();Tr(s,n,1,r)}}),GC(n,1)}};fC=function(n){if(n.tag===13){var e=So(n,134217728);if(e!==null){var t=In();Tr(e,n,134217728,t)}GC(n,134217728)}};GR=function(n){if(n.tag===13){var e=Ka(n),t=So(n,e);if(t!==null){var s=In();Tr(t,n,e,s)}GC(n,e)}};WR=function(){return Oe};qR=function(n,e){var t=Oe;try{return Oe=n,e()}finally{Oe=t}};y_=function(n,e,t){switch(e){case"input":if(u_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=s1(s);if(!r)throw Error(H(90));AR(s),u_(s,r)}}}break;case"textarea":CR(n,t);break;case"select":e=t.value,e!=null&&id(n,!!t.multiple,e,!1)}};jR=$C;LR=du;var wB={usingClientEntryPoint:!1,Events:[oy,Uu,s1,RR,MR,$C]},Hf={findFiberByHostInstance:Cl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},SB={bundleType:Hf.bundleType,version:Hf.version,rendererPackageName:Hf.rendererPackageName,rendererConfig:Hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=OR(n),n===null?null:n.stateNode},findFiberByHostInstance:Hf.findFiberByHostInstance||bB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hy.isDisabled&&Hy.supportsFiber)try{Zw=Hy.inject(SB),pi=Hy}catch{}}Ms.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wB;Ms.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qC(e))throw Error(H(200));return vB(n,e,null,t)};Ms.createRoot=function(n,e){if(!qC(n))throw Error(H(299));var t=!1,s="",r=mj;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=HC(n,1,!1,null,null,t,!1,s,r),n[wo]=e.current,im(n.nodeType===8?n.parentNode:n),new WC(e)};Ms.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(H(188)):(n=Object.keys(n).join(","),Error(H(268,n)));return n=OR(e),n=n===null?null:n.stateNode,n};Ms.flushSync=function(n){return du(n)};Ms.hydrate=function(n,e,t){if(!h1(e))throw Error(H(200));return f1(null,n,e,!0,t)};Ms.hydrateRoot=function(n,e,t){if(!qC(n))throw Error(H(405));var s=t!=null&&t.hydratedSources||null,r=!1,i="",o=mj;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=pj(e,null,n,1,t??null,r,!1,i,o),n[wo]=e.current,im(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new d1(e)};Ms.render=function(n,e,t){if(!h1(e))throw Error(H(200));return f1(null,n,e,!1,t)};Ms.unmountComponentAtNode=function(n){if(!h1(n))throw Error(H(40));return n._reactRootContainer?(du(function(){f1(null,null,n,!1,function(){n._reactRootContainer=null,n[wo]=null})}),!0):!1};Ms.unstable_batchedUpdates=$C;Ms.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!h1(t))throw Error(H(200));if(n==null||n._reactInternals===void 0)throw Error(H(38));return f1(n,e,t,!1,s)};Ms.version="18.3.1-next-f1338f8080-20240426";function gj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gj)}catch(n){console.error(n)}}gj(),gR.exports=Ms;var p1=gR.exports;const _B=Qw(p1);var CP=p1;s_.createRoot=CP.createRoot,s_.hydrateRoot=CP.hydrateRoot;function Dn(n,e,{checkForDefaultPrevented:t=!0}={}){return function(r){if(n==null||n(r),t===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function kP(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function yj(...n){return e=>{let t=!1;const s=n.map(r=>{const i=kP(r,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let r=0;r<s.length;r++){const i=s[r];typeof i=="function"?i():kP(n[r],null)}}}}function Ao(...n){return A.useCallback(yj(...n),n)}function m1(n,e=[]){let t=[];function s(i,o){const a=A.createContext(o),c=t.length;t=[...t,o];const u=h=>{var v;const{scope:f,children:m,...y}=h,g=((v=f==null?void 0:f[n])==null?void 0:v[c])||a,w=A.useMemo(()=>y,Object.values(y));return p.jsx(g.Provider,{value:w,children:m})};u.displayName=i+"Provider";function d(h,f){var g;const m=((g=f==null?void 0:f[n])==null?void 0:g[c])||a,y=A.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const r=()=>{const i=t.map(o=>A.createContext(o));return function(a){const c=(a==null?void 0:a[n])||i;return A.useMemo(()=>({[`__scope${n}`]:{...a,[n]:c}}),[a,c])}};return r.scopeName=n,[s,AB(r,...e)]}function AB(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const s=n.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(i){const o=s.reduce((a,{useScope:c,scopeName:u})=>{const h=c(i)[`__scope${u}`];return{...a,...h}},{});return A.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return t.scopeName=e.scopeName,t}function Fb(n){const e=CB(n),t=A.forwardRef((s,r)=>{const{children:i,...o}=s,a=A.Children.toArray(i),c=a.find(TB);if(c){const u=c.props.children,d=a.map(h=>h===c?A.Children.count(u)>1?A.Children.only(null):A.isValidElement(u)?u.props.children:null:h);return p.jsx(e,{...o,ref:r,children:A.isValidElement(u)?A.cloneElement(u,void 0,d):null})}return p.jsx(e,{...o,ref:r,children:i})});return t.displayName=`${n}.Slot`,t}var EB=Fb("Slot");function CB(n){const e=A.forwardRef((t,s)=>{const{children:r,...i}=t;if(A.isValidElement(r)){const o=NB(r),a=PB(i,r.props);return r.type!==A.Fragment&&(a.ref=s?yj(s,o):o),A.cloneElement(r,a)}return A.Children.count(r)>1?A.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var kB=Symbol("radix.slottable");function TB(n){return A.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===kB}function PB(n,e){const t={...e};for(const s in e){const r=n[s],i=e[s];/^on[A-Z]/.test(s)?r&&i?t[s]=(...a)=>{const c=i(...a);return r(...a),c}:r&&(t[s]=r):s==="style"?t[s]={...r,...i}:s==="className"&&(t[s]=[r,i].filter(Boolean).join(" "))}return{...n,...t}}function NB(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function vj(n){const e=n+"CollectionProvider",[t,s]=m1(e),[r,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:w,children:v}=g,b=Ce.useRef(null),_=Ce.useRef(new Map).current;return p.jsx(r,{scope:w,itemMap:_,collectionRef:b,children:v})};o.displayName=e;const a=n+"CollectionSlot",c=Fb(a),u=Ce.forwardRef((g,w)=>{const{scope:v,children:b}=g,_=i(a,v),E=Ao(w,_.collectionRef);return p.jsx(c,{ref:E,children:b})});u.displayName=a;const d=n+"CollectionItemSlot",h="data-radix-collection-item",f=Fb(d),m=Ce.forwardRef((g,w)=>{const{scope:v,children:b,..._}=g,E=Ce.useRef(null),k=Ao(w,E),T=i(d,v);return Ce.useEffect(()=>(T.itemMap.set(E,{ref:E,..._}),()=>void T.itemMap.delete(E))),p.jsx(f,{[h]:"",ref:k,children:b})});m.displayName=d;function y(g){const w=i(n+"CollectionConsumer",g);return Ce.useCallback(()=>{const b=w.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((T,P)=>_.indexOf(T.ref.current)-_.indexOf(P.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,s]}var RB=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Bn=RB.reduce((n,e)=>{const t=Fb(`Primitive.${e}`),s=A.forwardRef((r,i)=>{const{asChild:o,...a}=r,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...a,ref:i})});return s.displayName=`Primitive.${e}`,{...n,[e]:s}},{});function bj(n,e){n&&p1.flushSync(()=>n.dispatchEvent(e))}function hu(n){const e=A.useRef(n);return A.useEffect(()=>{e.current=n}),A.useMemo(()=>(...t)=>{var s;return(s=e.current)==null?void 0:s.call(e,...t)},[])}function MB(n,e=globalThis==null?void 0:globalThis.document){const t=hu(n);A.useEffect(()=>{const s=r=>{r.key==="Escape"&&t(r)};return e.addEventListener("keydown",s,{capture:!0}),()=>e.removeEventListener("keydown",s,{capture:!0})},[t,e])}var jB="DismissableLayer",Y_="dismissableLayer.update",LB="dismissableLayer.pointerDownOutside",DB="dismissableLayer.focusOutside",TP,xj=A.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),wj=A.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:i,onInteractOutside:o,onDismiss:a,...c}=n,u=A.useContext(xj),[d,h]=A.useState(null),f=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=A.useState({}),y=Ao(e,P=>h(P)),g=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(w),b=d?g.indexOf(d):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,E=b>=v,k=OB(P=>{const N=P.target,M=[...u.branches].some(L=>L.contains(N));!E||M||(r==null||r(P),o==null||o(P),P.defaultPrevented||a==null||a())},f),T=FB(P=>{const N=P.target;[...u.branches].some(L=>L.contains(N))||(i==null||i(P),o==null||o(P),P.defaultPrevented||a==null||a())},f);return MB(P=>{b===u.layers.size-1&&(s==null||s(P),!P.defaultPrevented&&a&&(P.preventDefault(),a()))},f),A.useEffect(()=>{if(d)return t&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(TP=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),PP(),()=>{t&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=TP)}},[d,f,t,u]),A.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),PP())},[d,u]),A.useEffect(()=>{const P=()=>m({});return document.addEventListener(Y_,P),()=>document.removeEventListener(Y_,P)},[]),p.jsx(Bn.div,{...c,ref:y,style:{pointerEvents:_?E?"auto":"none":void 0,...n.style},onFocusCapture:Dn(n.onFocusCapture,T.onFocusCapture),onBlurCapture:Dn(n.onBlurCapture,T.onBlurCapture),onPointerDownCapture:Dn(n.onPointerDownCapture,k.onPointerDownCapture)})});wj.displayName=jB;var IB="DismissableLayerBranch",Sj=A.forwardRef((n,e)=>{const t=A.useContext(xj),s=A.useRef(null),r=Ao(e,s);return A.useEffect(()=>{const i=s.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),p.jsx(Bn.div,{...n,ref:r})});Sj.displayName=IB;function OB(n,e=globalThis==null?void 0:globalThis.document){const t=hu(n),s=A.useRef(!1),r=A.useRef(()=>{});return A.useEffect(()=>{const i=a=>{if(a.target&&!s.current){let c=function(){_j(LB,t,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=c,e.addEventListener("click",r.current,{once:!0})):c()}else e.removeEventListener("click",r.current);s.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",r.current)}},[e,t]),{onPointerDownCapture:()=>s.current=!0}}function FB(n,e=globalThis==null?void 0:globalThis.document){const t=hu(n),s=A.useRef(!1);return A.useEffect(()=>{const r=i=>{i.target&&!s.current&&_j(DB,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,t]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function PP(){const n=new CustomEvent(Y_);document.dispatchEvent(n)}function _j(n,e,t,{discrete:s}){const r=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?bj(r,i):r.dispatchEvent(i)}var BB=wj,$B=Sj,fu=globalThis!=null&&globalThis.document?A.useLayoutEffect:()=>{},VB="Portal",Aj=A.forwardRef((n,e)=>{var a;const{container:t,...s}=n,[r,i]=A.useState(!1);fu(()=>i(!0),[]);const o=t||r&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return o?_B.createPortal(p.jsx(Bn.div,{...s,ref:e}),o):null});Aj.displayName=VB;function zB(n,e){return A.useReducer((t,s)=>e[t][s]??t,n)}var KC=n=>{const{present:e,children:t}=n,s=UB(e),r=typeof t=="function"?t({present:s.isPresent}):A.Children.only(t),i=Ao(s.ref,HB(r));return typeof t=="function"||s.isPresent?A.cloneElement(r,{ref:i}):null};KC.displayName="Presence";function UB(n){const[e,t]=A.useState(),s=A.useRef(null),r=A.useRef(n),i=A.useRef("none"),o=n?"mounted":"unmounted",[a,c]=zB(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return A.useEffect(()=>{const u=Gy(s.current);i.current=a==="mounted"?u:"none"},[a]),fu(()=>{const u=s.current,d=r.current;if(d!==n){const f=i.current,m=Gy(u);n?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&f!==m?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),fu(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=m=>{const g=Gy(s.current).includes(CSS.escape(m.animationName));if(m.target===e&&g&&(c("ANIMATION_END"),!r.current)){const w=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=w)})}},f=m=>{m.target===e&&(i.current=Gy(s.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:A.useCallback(u=>{s.current=u?getComputedStyle(u):null,t(u)},[])}}function Gy(n){return(n==null?void 0:n.animationName)||"none"}function HB(n){var s,r;let e=(s=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:s.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var GB=pR[" useInsertionEffect ".trim().toString()]||fu;function g1({prop:n,defaultProp:e,onChange:t=()=>{},caller:s}){const[r,i,o]=WB({defaultProp:e,onChange:t}),a=n!==void 0,c=a?n:r;{const d=A.useRef(n!==void 0);A.useEffect(()=>{const h=d.current;h!==a&&console.warn(`${s} is changing from ${h?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=a},[a,s])}const u=A.useCallback(d=>{var h;if(a){const f=qB(d)?d(n):d;f!==n&&((h=o.current)==null||h.call(o,f))}else i(d)},[a,n,i,o]);return[c,u]}function WB({defaultProp:n,onChange:e}){const[t,s]=A.useState(n),r=A.useRef(t),i=A.useRef(e);return GB(()=>{i.current=e},[e]),A.useEffect(()=>{var o;r.current!==t&&((o=i.current)==null||o.call(i,t),r.current=t)},[t,r]),[t,s,i]}function qB(n){return typeof n=="function"}var KB=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),XB="VisuallyHidden",XC=A.forwardRef((n,e)=>p.jsx(Bn.span,{...n,ref:e,style:{...KB,...n.style}}));XC.displayName=XB;var YC="ToastProvider",[QC,YB,QB]=vj("Toast"),[Ej,d7]=m1("Toast",[QB]),[JB,y1]=Ej(YC),Cj=n=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:r="right",swipeThreshold:i=50,children:o}=n,[a,c]=A.useState(null),[u,d]=A.useState(0),h=A.useRef(!1),f=A.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${YC}\`. Expected non-empty \`string\`.`),p.jsx(QC.Provider,{scope:e,children:p.jsx(JB,{scope:e,label:t,duration:s,swipeDirection:r,swipeThreshold:i,toastCount:u,viewport:a,onViewportChange:c,onToastAdd:A.useCallback(()=>d(m=>m+1),[]),onToastRemove:A.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:f,children:o})})};Cj.displayName=YC;var kj="ToastViewport",ZB=["F8"],Q_="toast.viewportPause",J_="toast.viewportResume",Tj=A.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:s=ZB,label:r="Notifications ({hotkey})",...i}=n,o=y1(kj,t),a=YB(t),c=A.useRef(null),u=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=Ao(e,h,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;A.useEffect(()=>{const w=v=>{var _;s.length!==0&&s.every(E=>v[E]||v.code===E)&&((_=h.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),A.useEffect(()=>{const w=c.current,v=h.current;if(y&&w&&v){const b=()=>{if(!o.isClosePausedRef.current){const T=new CustomEvent(Q_);v.dispatchEvent(T),o.isClosePausedRef.current=!0}},_=()=>{if(o.isClosePausedRef.current){const T=new CustomEvent(J_);v.dispatchEvent(T),o.isClosePausedRef.current=!1}},E=T=>{!w.contains(T.relatedTarget)&&_()},k=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",b),w.addEventListener("focusout",E),w.addEventListener("pointermove",b),w.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",b),w.removeEventListener("focusout",E),w.removeEventListener("pointermove",b),w.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",_)}}},[y,o.isClosePausedRef]);const g=A.useCallback(({tabbingDirection:w})=>{const b=a().map(_=>{const E=_.ref.current,k=[E,...h5(E)];return w==="forwards"?k:k.reverse()});return(w==="forwards"?b.reverse():b).flat()},[a]);return A.useEffect(()=>{const w=h.current;if(w){const v=b=>{var k,T,P;const _=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!_){const N=document.activeElement,M=b.shiftKey;if(b.target===w&&M){(k=u.current)==null||k.focus();return}const D=g({tabbingDirection:M?"backwards":"forwards"}),z=D.findIndex(I=>I===N);wS(D.slice(z+1))?b.preventDefault():M?(T=u.current)==null||T.focus():(P=d.current)==null||P.focus()}};return w.addEventListener("keydown",v),()=>w.removeEventListener("keydown",v)}},[a,g]),p.jsxs($B,{ref:c,role:"region","aria-label":r.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&p.jsx(Z_,{ref:u,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"forwards"});wS(w)}}),p.jsx(QC.Slot,{scope:t,children:p.jsx(Bn.ol,{tabIndex:-1,...i,ref:f})}),y&&p.jsx(Z_,{ref:d,onFocusFromOutsideViewport:()=>{const w=g({tabbingDirection:"backwards"});wS(w)}})]})});Tj.displayName=kj;var Pj="ToastFocusProxy",Z_=A.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...r}=n,i=y1(Pj,t);return p.jsx(XC,{tabIndex:0,...r,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const a=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(a))&&s()}})});Z_.displayName=Pj;var ly="Toast",e5="toast.swipeStart",t5="toast.swipeMove",n5="toast.swipeCancel",s5="toast.swipeEnd",Nj=A.forwardRef((n,e)=>{const{forceMount:t,open:s,defaultOpen:r,onOpenChange:i,...o}=n,[a,c]=g1({prop:s,defaultProp:r??!0,onChange:i,caller:ly});return p.jsx(KC,{present:t||a,children:p.jsx(o5,{open:a,...o,ref:e,onClose:()=>c(!1),onPause:hu(n.onPause),onResume:hu(n.onResume),onSwipeStart:Dn(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Dn(n.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Dn(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Dn(n.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Nj.displayName=ly;var[r5,i5]=Ej(ly,{onClose(){}}),o5=A.forwardRef((n,e)=>{const{__scopeToast:t,type:s="foreground",duration:r,open:i,onClose:o,onEscapeKeyDown:a,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:f,onSwipeEnd:m,...y}=n,g=y1(ly,t),[w,v]=A.useState(null),b=Ao(e,I=>v(I)),_=A.useRef(null),E=A.useRef(null),k=r||g.duration,T=A.useRef(0),P=A.useRef(k),N=A.useRef(0),{onToastAdd:M,onToastRemove:L}=g,F=hu(()=>{var R;(w==null?void 0:w.contains(document.activeElement))&&((R=g.viewport)==null||R.focus()),o()}),D=A.useCallback(I=>{!I||I===1/0||(window.clearTimeout(N.current),T.current=new Date().getTime(),N.current=window.setTimeout(F,I))},[F]);A.useEffect(()=>{const I=g.viewport;if(I){const R=()=>{D(P.current),u==null||u()},j=()=>{const O=new Date().getTime()-T.current;P.current=P.current-O,window.clearTimeout(N.current),c==null||c()};return I.addEventListener(Q_,j),I.addEventListener(J_,R),()=>{I.removeEventListener(Q_,j),I.removeEventListener(J_,R)}}},[g.viewport,k,c,u,D]),A.useEffect(()=>{i&&!g.isClosePausedRef.current&&D(k)},[i,k,g.isClosePausedRef,D]),A.useEffect(()=>(M(),()=>L()),[M,L]);const z=A.useMemo(()=>w?Oj(w):null,[w]);return g.viewport?p.jsxs(p.Fragment,{children:[z&&p.jsx(a5,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite",children:z}),p.jsx(r5,{scope:t,onClose:F,children:p1.createPortal(p.jsx(QC.ItemSlot,{scope:t,children:p.jsx(BB,{asChild:!0,onEscapeKeyDown:Dn(a,()=>{g.isFocusedToastEscapeKeyDownRef.current||F(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Bn.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:Dn(n.onKeyDown,I=>{I.key==="Escape"&&(a==null||a(I.nativeEvent),I.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:Dn(n.onPointerDown,I=>{I.button===0&&(_.current={x:I.clientX,y:I.clientY})}),onPointerMove:Dn(n.onPointerMove,I=>{if(!_.current)return;const R=I.clientX-_.current.x,j=I.clientY-_.current.y,O=!!E.current,B=["left","right"].includes(g.swipeDirection),$=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,V=B?$(0,R):0,W=B?0:$(0,j),q=I.pointerType==="touch"?10:2,K={x:V,y:W},se={originalEvent:I,delta:K};O?(E.current=K,Wy(t5,h,se,{discrete:!1})):NP(K,g.swipeDirection,q)?(E.current=K,Wy(e5,d,se,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(R)>q||Math.abs(j)>q)&&(_.current=null)}),onPointerUp:Dn(n.onPointerUp,I=>{const R=E.current,j=I.target;if(j.hasPointerCapture(I.pointerId)&&j.releasePointerCapture(I.pointerId),E.current=null,_.current=null,R){const O=I.currentTarget,B={originalEvent:I,delta:R};NP(R,g.swipeDirection,g.swipeThreshold)?Wy(s5,m,B,{discrete:!0}):Wy(n5,f,B,{discrete:!0}),O.addEventListener("click",$=>$.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),a5=n=>{const{__scopeToast:e,children:t,...s}=n,r=y1(ly,e),[i,o]=A.useState(!1),[a,c]=A.useState(!1);return u5(()=>o(!0)),A.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),a?null:p.jsx(Aj,{asChild:!0,children:p.jsx(XC,{...s,children:i&&p.jsxs(p.Fragment,{children:[r.label," ",t]})})})},l5="ToastTitle",Rj=A.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return p.jsx(Bn.div,{...s,ref:e})});Rj.displayName=l5;var c5="ToastDescription",Mj=A.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n;return p.jsx(Bn.div,{...s,ref:e})});Mj.displayName=c5;var jj="ToastAction",Lj=A.forwardRef((n,e)=>{const{altText:t,...s}=n;return t.trim()?p.jsx(Ij,{altText:t,asChild:!0,children:p.jsx(JC,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${jj}\`. Expected non-empty \`string\`.`),null)});Lj.displayName=jj;var Dj="ToastClose",JC=A.forwardRef((n,e)=>{const{__scopeToast:t,...s}=n,r=i5(Dj,t);return p.jsx(Ij,{asChild:!0,children:p.jsx(Bn.button,{type:"button",...s,ref:e,onClick:Dn(n.onClick,r.onClose)})})});JC.displayName=Dj;var Ij=A.forwardRef((n,e)=>{const{__scopeToast:t,altText:s,...r}=n;return p.jsx(Bn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...r,ref:e})});function Oj(n){const e=[];return Array.from(n.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),d5(s)){const r=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!r)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Oj(s))}}),e}function Wy(n,e,t,{discrete:s}){const r=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&r.addEventListener(n,e,{once:!0}),s?bj(r,i):r.dispatchEvent(i)}var NP=(n,e,t=0)=>{const s=Math.abs(n.x),r=Math.abs(n.y),i=s>r;return e==="left"||e==="right"?i&&s>t:!i&&r>t};function u5(n=()=>{}){const e=hu(n);fu(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function d5(n){return n.nodeType===n.ELEMENT_NODE}function h5(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function wS(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var f5=Cj,Fj=Tj,Bj=Nj,$j=Rj,Vj=Mj,zj=Lj,Uj=JC;function Hj(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=Hj(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function Nf(){for(var n,e,t=0,s="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=Hj(n))&&(s&&(s+=" "),s+=e);return s}const RP=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,MP=Nf,Gj=(n,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return MP(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:r,defaultVariants:i}=e,o=Object.keys(r).map(u=>{const d=t==null?void 0:t[u],h=i==null?void 0:i[u];if(d===null)return null;const f=RP(d)||RP(h);return r[u][f]}),a=t&&Object.entries(t).reduce((u,d)=>{let[h,f]=d;return f===void 0||(u[h]=f),u},{}),c=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,d)=>{let{class:h,className:f,...m}=d;return Object.entries(m).every(y=>{let[g,w]=y;return Array.isArray(w)?w.includes({...i,...a}[g]):{...i,...a}[g]===w})?[...u,h,f]:u},[]);return MP(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};var p5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const m5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xe=(n,e)=>{const t=A.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:a,...c},u)=>A.createElement("svg",{ref:u,...p5,width:r,height:r,stroke:s,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${m5(n)}`,...c},[...e.map(([d,h])=>A.createElement(d,h)),...(Array.isArray(a)?a:[a])||[]]));return t.displayName=`${n}`,t},g5=xe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),y5=xe("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),v5=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ZC=xe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),b5=xe("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),ek=xe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),x5=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),w5=xe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),S5=xe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Wj=xe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),_5=xe("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),A5=xe("CupSoda",[["path",{d:"m6 8 1.75 12.28a2 2 0 0 0 2 1.72h4.54a2 2 0 0 0 2-1.72L18 8",key:"8166m8"}],["path",{d:"M5 8h14",key:"pcz4l3"}],["path",{d:"M7 15a6.47 6.47 0 0 1 5 0 6.47 6.47 0 0 0 5 0",key:"yjz344"}],["path",{d:"m12 8 1-6h2",key:"3ybfa4"}]]),E5=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),qj=xe("Drama",[["path",{d:"M 10 11h.01",key:"1lksi6"}],["path",{d:"M 14 6h.01",key:"1kxpxo"}],["path",{d:"M 18 6h.01",key:"1goweo"}],["path",{d:"M 6.5 13.1h.01",key:"1i19cj"}],["path",{d:"M22 5c0 9-4 12-6 12s-6-3-6-12c0-2 2-3 6-3s6 1 6 3",key:"172yzv"}],["path",{d:"M17.4 9.9c-.8.8-2 .8-2.8 0",key:"1obv0w"}],["path",{d:"M10.1 7.1C9 7.2 7.7 7.7 6 8.6c-3.5 2-4.7 3.9-3.7 5.6 4.5 7.8 9.5 8.4 11.2 7.4.9-.5 1.9-2.1 1.9-4.7",key:"rqjl8i"}],["path",{d:"M9.1 16.5c.3-1.1 1.4-1.7 2.4-1.4",key:"1mr6wy"}]]),C5=xe("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Kj=xe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),v1=xe("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]),tk=xe("Film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Xj=xe("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),Yj=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),nk=xe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),k5=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),T5=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),Qj=xe("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),P5=xe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),N5=xe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),R5=xe("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),M5=xe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),j5=xe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),L5=xe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),D5=xe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),sk=xe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),I5=xe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),O5=xe("Theater",[["path",{d:"M2 10s3-3 3-8",key:"3xiif0"}],["path",{d:"M22 10s-3-3-3-8",key:"ioaa5q"}],["path",{d:"M10 2c0 4.4-3.6 8-8 8",key:"16fkpi"}],["path",{d:"M14 2c0 4.4 3.6 8 8 8",key:"b9eulq"}],["path",{d:"M2 10s2 2 2 5",key:"1au1lb"}],["path",{d:"M22 10s-2 2-2 5",key:"qi2y5e"}],["path",{d:"M8 15h8",key:"45n4r"}],["path",{d:"M2 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"1vsc2m"}],["path",{d:"M14 22v-1a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v1",key:"hrha4u"}]]),rk=xe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]),Jj=xe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]),Zj=xe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),b1=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function F5(){for(var n=0,e,t,s="";n<arguments.length;)(e=arguments[n++])&&(t=eL(e))&&(s&&(s+=" "),s+=t);return s}function eL(n){if(typeof n=="string")return n;for(var e,t="",s=0;s<n.length;s++)n[s]&&(e=eL(n[s]))&&(t&&(t+=" "),t+=e);return t}var ik="-";function B5(n){var e=V5(n),t=n.conflictingClassGroups,s=n.conflictingClassGroupModifiers,r=s===void 0?{}:s;function i(a){var c=a.split(ik);return c[0]===""&&c.length!==1&&c.shift(),tL(c,e)||$5(a)}function o(a,c){var u=t[a]||[];return c&&r[a]?[].concat(u,r[a]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function tL(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],s=e.nextPart.get(t),r=s?tL(n.slice(1),s):void 0;if(r)return r;if(e.validators.length!==0){var i=n.join(ik);return(o=e.validators.find(function(a){var c=a.validator;return c(i)}))==null?void 0:o.classGroupId}}var jP=/^\[(.+)\]$/;function $5(n){if(jP.test(n)){var e=jP.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function V5(n){var e=n.theme,t=n.prefix,s={nextPart:new Map,validators:[]},r=U5(Object.entries(n.classGroups),t);return r.forEach(function(i){var o=i[0],a=i[1];eA(a,s,o,e)}),s}function eA(n,e,t,s){n.forEach(function(r){if(typeof r=="string"){var i=r===""?e:LP(e,r);i.classGroupId=t;return}if(typeof r=="function"){if(z5(r)){eA(r(s),e,t,s);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(function(o){var a=o[0],c=o[1];eA(c,LP(e,a),t,s)})})}function LP(n,e){var t=n;return e.split(ik).forEach(function(s){t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t}function z5(n){return n.isThemeGetter}function U5(n,e){return e?n.map(function(t){var s=t[0],r=t[1],i=r.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(a){var c=a[0],u=a[1];return[e+c,u]})):o});return[s,i]}):n}function H5(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,s=new Map;function r(i,o){t.set(i,o),e++,e>n&&(e=0,s=t,t=new Map)}return{get:function(o){var a=t.get(o);if(a!==void 0)return a;if((a=s.get(o))!==void 0)return r(o,a),a},set:function(o,a){t.has(o)?t.set(o,a):r(o,a)}}}var nL="!";function G5(n){var e=n.separator||":",t=e.length===1,s=e[0],r=e.length;return function(o){for(var a=[],c=0,u=0,d,h=0;h<o.length;h++){var f=o[h];if(c===0){if(f===s&&(t||o.slice(h,h+r)===e)){a.push(o.slice(u,h)),u=h+r;continue}if(f==="/"){d=h;continue}}f==="["?c++:f==="]"&&c--}var m=a.length===0?o:o.substring(u),y=m.startsWith(nL),g=y?m.substring(1):m,w=d&&d>u?d-u:void 0;return{modifiers:a,hasImportantModifier:y,baseClassName:g,maybePostfixModifierPosition:w}}}function W5(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(s){var r=s[0]==="[";r?(e.push.apply(e,t.sort().concat([s])),t=[]):t.push(s)}),e.push.apply(e,t.sort()),e}function q5(n){return{cache:H5(n.cacheSize),splitModifiers:G5(n),...B5(n)}}var K5=/\s+/;function X5(n,e){var t=e.splitModifiers,s=e.getClassGroupId,r=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(K5).map(function(o){var a=t(o),c=a.modifiers,u=a.hasImportantModifier,d=a.baseClassName,h=a.maybePostfixModifierPosition,f=s(h?d.substring(0,h):d),m=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=s(d),!f)return{isTailwindClass:!1,originalClassName:o};m=!1}var y=W5(c).join(":"),g=u?y+nL:y;return{isTailwindClass:!0,modifierId:g,classGroupId:f,originalClassName:o,hasPostfixModifier:m}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var a=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=a+c;return i.has(d)?!1:(i.add(d),r(c,u).forEach(function(h){return i.add(a+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Y5(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var s,r,i,o=a;function a(u){var d=e[0],h=e.slice(1),f=h.reduce(function(m,y){return y(m)},d());return s=q5(f),r=s.cache.get,i=s.cache.set,o=c,c(u)}function c(u){var d=r(u);if(d)return d;var h=X5(u,s);return i(u,h),h}return function(){return o(F5.apply(null,arguments))}}function et(n){var e=function(s){return s[n]||[]};return e.isThemeGetter=!0,e}var sL=/^\[(?:([a-z-]+):)?(.+)\]$/i,Q5=/^\d+\/\d+$/,J5=new Set(["px","full","screen"]),Z5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,e$=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,t$=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function or(n){return Pl(n)||J5.has(n)||Q5.test(n)||tA(n)}function tA(n){return vu(n,"length",a$)}function n$(n){return vu(n,"size",rL)}function s$(n){return vu(n,"position",rL)}function r$(n){return vu(n,"url",l$)}function qy(n){return vu(n,"number",Pl)}function Pl(n){return!Number.isNaN(Number(n))}function i$(n){return n.endsWith("%")&&Pl(n.slice(0,-1))}function Gf(n){return DP(n)||vu(n,"number",DP)}function Se(n){return sL.test(n)}function Wf(){return!0}function Ro(n){return Z5.test(n)}function o$(n){return vu(n,"",c$)}function vu(n,e,t){var s=sL.exec(n);return s?s[1]?s[1]===e:t(s[2]):!1}function a$(n){return e$.test(n)}function rL(){return!1}function l$(n){return n.startsWith("url(")}function DP(n){return Number.isInteger(Number(n))}function c$(n){return t$.test(n)}function u$(){var n=et("colors"),e=et("spacing"),t=et("blur"),s=et("brightness"),r=et("borderColor"),i=et("borderRadius"),o=et("borderSpacing"),a=et("borderWidth"),c=et("contrast"),u=et("grayscale"),d=et("hueRotate"),h=et("invert"),f=et("gap"),m=et("gradientColorStops"),y=et("gradientColorStopPositions"),g=et("inset"),w=et("margin"),v=et("opacity"),b=et("padding"),_=et("saturate"),E=et("scale"),k=et("sepia"),T=et("skew"),P=et("space"),N=et("translate"),M=function(){return["auto","contain","none"]},L=function(){return["auto","hidden","clip","visible","scroll"]},F=function(){return["auto",Se,e]},D=function(){return[Se,e]},z=function(){return["",or]},I=function(){return["auto",Pl,Se]},R=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},j=function(){return["solid","dashed","dotted","double","none"]},O=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},B=function(){return["start","end","center","between","around","evenly","stretch"]},$=function(){return["","0",Se]},V=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},W=function(){return[Pl,qy]},q=function(){return[Pl,Se]};return{cacheSize:500,theme:{colors:[Wf],spacing:[or],blur:["none","",Ro,Se],brightness:W(),borderColor:[n],borderRadius:["none","","full",Ro,Se],borderSpacing:D(),borderWidth:z(),contrast:W(),grayscale:$(),hueRotate:q(),invert:$(),gap:D(),gradientColorStops:[n],gradientColorStopPositions:[i$,tA],inset:F(),margin:F(),opacity:W(),padding:D(),saturate:W(),scale:W(),sepia:$(),skew:q(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Se]}],container:["container"],columns:[{columns:[Ro]}],"break-after":[{"break-after":V()}],"break-before":[{"break-before":V()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(R(),[Se])}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gf]}],basis:[{basis:F()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Se]}],grow:[{grow:$()}],shrink:[{shrink:$()}],order:[{order:["first","last","none",Gf]}],"grid-cols":[{"grid-cols":[Wf]}],"col-start-end":[{col:["auto",{span:["full",Gf]},Se]}],"col-start":[{"col-start":I()}],"col-end":[{"col-end":I()}],"grid-rows":[{"grid-rows":[Wf]}],"row-start-end":[{row:["auto",{span:[Gf]},Se]}],"row-start":[{"row-start":I()}],"row-end":[{"row-end":I()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Se]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Se]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(B())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(B(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(B(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",Se,e]}],"min-w":[{"min-w":["min","max","fit",Se,or]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[Ro]},Ro,Se]}],h:[{h:[Se,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",Se,or]}],"max-h":[{"max-h":[Se,e,"min","max","fit"]}],"font-size":[{text:["base",Ro,tA]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",qy]}],"font-family":[{font:[Wf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Se]}],"line-clamp":[{"line-clamp":["none",Pl,qy]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Se,or]}],"list-image":[{"list-image":["none",Se]}],"list-style-type":[{list:["none","disc","decimal",Se]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(j(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",or]}],"underline-offset":[{"underline-offset":["auto",Se,or]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(R(),[s$])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",n$]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},r$]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[].concat(j(),["hidden"])}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:j()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:[""].concat(j())}],"outline-offset":[{"outline-offset":[Se,or]}],"outline-w":[{outline:[or]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[or]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Ro,o$]}],"shadow-color":[{shadow:[Wf]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":O()}],"bg-blend":[{"bg-blend":O()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ro,Se]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[_]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Se]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",Se]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",Se]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Gf,Se]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Se]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[or,qy]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var d$=Y5(u$);function Rr(...n){return d$(Nf(n))}const h$=f5,iL=Ce.forwardRef(({className:n,...e},t)=>p.jsx(Fj,{ref:t,className:Rr("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));iL.displayName=Fj.displayName;const f$=Gj("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),oL=Ce.forwardRef(({className:n,variant:e,...t},s)=>p.jsx(Bj,{ref:s,className:Rr(f$({variant:e}),n),...t}));oL.displayName=Bj.displayName;const p$=Ce.forwardRef(({className:n,...e},t)=>p.jsx(zj,{ref:t,className:Rr("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));p$.displayName=zj.displayName;const aL=Ce.forwardRef(({className:n,...e},t)=>p.jsx(Uj,{ref:t,className:Rr("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:p.jsx(b1,{className:"h-4 w-4"})}));aL.displayName=Uj.displayName;const lL=Ce.forwardRef(({className:n,...e},t)=>p.jsx($j,{ref:t,className:Rr("text-sm font-semibold",n),...e}));lL.displayName=$j.displayName;const cL=Ce.forwardRef(({className:n,...e},t)=>p.jsx(Vj,{ref:t,className:Rr("text-sm opacity-90",n),...e}));cL.displayName=Vj.displayName;const m$=1,g$=1e6,po={ADD_TOAST:"ADD_TOAST",UPDATE_TOAST:"UPDATE_TOAST",DISMISS_TOAST:"DISMISS_TOAST",REMOVE_TOAST:"REMOVE_TOAST"};let SS=0;function y$(){return SS=(SS+1)%Number.MAX_SAFE_INTEGER,SS.toString()}const _S=new Map,IP=n=>{if(_S.has(n))return;const e=setTimeout(()=>{_S.delete(n),zp({type:po.REMOVE_TOAST,toastId:n})},g$);_S.set(n,e)},v$=(n,e)=>{switch(e.type){case po.ADD_TOAST:return{...n,toasts:[e.toast,...n.toasts].slice(0,m$)};case po.UPDATE_TOAST:return{...n,toasts:n.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case po.DISMISS_TOAST:{const{toastId:t}=e;return t?IP(t):n.toasts.forEach(s=>{IP(s.id)}),{...n,toasts:n.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case po.REMOVE_TOAST:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(t=>t.id!==e.toastId)}}},Nv=[];let Rv={toasts:[]};function zp(n){Rv=v$(Rv,n),Nv.forEach(e=>{e(Rv)})}function Te({...n}){const e=y$(),t=r=>zp({type:po.UPDATE_TOAST,toast:{...r,id:e}}),s=()=>zp({type:po.DISMISS_TOAST,toastId:e});return zp({type:po.ADD_TOAST,toast:{...n,id:e,open:!0,onOpenChange:r=>{r||s()}}}),{id:e,dismiss:s,update:t}}function ok(){const[n,e]=Ce.useState(Rv);return Ce.useEffect(()=>(Nv.push(e),()=>{const t=Nv.indexOf(e);t>-1&&Nv.splice(t,1)}),[n]),{...n,toast:Te,dismiss:t=>zp({type:po.DISMISS_TOAST,toastId:t})}}function b$(){const{toasts:n}=ok();return p.jsxs(h$,{children:[n.map(({id:e,title:t,description:s,action:r,...i})=>p.jsxs(oL,{...i,children:[p.jsxs("div",{className:"grid gap-1",children:[t&&p.jsx(lL,{children:t}),s&&p.jsx(cL,{children:s})]}),r,p.jsx(aL,{})]},e)),p.jsx(iL,{})]})}const uL=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),x1=A.createContext({}),w1=A.createContext(null),S1=typeof document<"u",ak=S1?A.useLayoutEffect:A.useEffect,dL=A.createContext({strict:!1}),lk=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),x$="framerAppearId",hL="data-"+lk(x$);function w$(n,e,t,s){const{visualElement:r}=A.useContext(x1),i=A.useContext(dL),o=A.useContext(w1),a=A.useContext(uL).reducedMotion,c=A.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=c.current;A.useInsertionEffect(()=>{u&&u.update(t,o)});const d=A.useRef(!!(t[hL]&&!window.HandoffComplete));return ak(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),A.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Yu(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function S$(n,e,t){return A.useCallback(s=>{s&&n.mount&&n.mount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Yu(t)&&(t.current=s))},[e])}function pm(n){return typeof n=="string"||Array.isArray(n)}function _1(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const ck=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uk=["initial",...ck];function A1(n){return _1(n.animate)||uk.some(e=>pm(n[e]))}function fL(n){return!!(A1(n)||n.variants)}function _$(n,e){if(A1(n)){const{initial:t,animate:s}=n;return{initial:t===!1||pm(t)?t:void 0,animate:pm(s)?s:void 0}}return n.inherit!==!1?e:{}}function A$(n){const{initial:e,animate:t}=_$(n,A.useContext(x1));return A.useMemo(()=>({initial:e,animate:t}),[OP(e),OP(t)])}function OP(n){return Array.isArray(n)?n.join(" "):n}const FP={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},mm={};for(const n in FP)mm[n]={isEnabled:e=>FP[n].some(t=>!!e[t])};function E$(n){for(const e in n)mm[e]={...mm[e],...n[e]}}const dk=A.createContext({}),pL=A.createContext({}),C$=Symbol.for("motionComponentSymbol");function k$({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:s,Component:r}){n&&E$(n);function i(a,c){let u;const d={...A.useContext(uL),...a,layoutId:T$(a)},{isStatic:h}=d,f=A$(a),m=s(a,h);if(!h&&S1){f.visualElement=w$(r,m,d,e);const y=A.useContext(pL),g=A.useContext(dL).strict;f.visualElement&&(u=f.visualElement.loadFeatures(d,g,n,y))}return A.createElement(x1.Provider,{value:f},u&&f.visualElement?A.createElement(u,{visualElement:f.visualElement,...d}):null,t(r,a,S$(m,f.visualElement,c),m,h,f.visualElement))}const o=A.forwardRef(i);return o[C$]=r,o}function T$({layoutId:n}){const e=A.useContext(dk).id;return e&&n!==void 0?e+"-"+n:n}function P$(n){function e(s,r={}){return k$(n(s,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(s,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const N$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hk(n){return typeof n!="string"||n.includes("-")?!1:!!(N$.indexOf(n)>-1||/[A-Z]/.test(n))}const Bb={};function R$(n){Object.assign(Bb,n)}const cy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bu=new Set(cy);function mL(n,{layout:e,layoutId:t}){return bu.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Bb[n]||n==="opacity")}const ss=n=>!!(n&&n.getVelocity),M$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},j$=cy.length;function L$(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},s,r){let i="";for(let o=0;o<j$;o++){const a=cy[o];if(n[a]!==void 0){const c=M$[a]||a;i+=`${c}(${n[a]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(n,s?"":i):t&&s&&(i="none"),i}const gL=n=>e=>typeof e=="string"&&e.startsWith(n),yL=gL("--"),nA=gL("var(--"),D$=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,I$=(n,e)=>e&&typeof n=="number"?e.transform(n):n,el=(n,e,t)=>Math.min(Math.max(t,n),e),xu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Up={...xu,transform:n=>el(0,1,n)},Ky={...xu,default:1},Hp=n=>Math.round(n*1e5)/1e5,E1=/(-)?([\d]*\.?[\d])+/g,vL=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,O$=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function uy(n){return typeof n=="string"}const dy=n=>({test:e=>uy(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),jo=dy("deg"),gi=dy("%"),oe=dy("px"),F$=dy("vh"),B$=dy("vw"),BP={...gi,parse:n=>gi.parse(n)/100,transform:n=>gi.transform(n*100)},$P={...xu,transform:Math.round},bL={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:jo,rotateX:jo,rotateY:jo,rotateZ:jo,scale:Ky,scaleX:Ky,scaleY:Ky,scaleZ:Ky,skew:jo,skewX:jo,skewY:jo,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Up,originX:BP,originY:BP,originZ:oe,zIndex:$P,fillOpacity:Up,strokeOpacity:Up,numOctaves:$P};function fk(n,e,t,s){const{style:r,vars:i,transform:o,transformOrigin:a}=n;let c=!1,u=!1,d=!0;for(const h in e){const f=e[h];if(yL(h)){i[h]=f;continue}const m=bL[h],y=I$(f,m);if(bu.has(h)){if(c=!0,o[h]=y,!d)continue;f!==(m.default||0)&&(d=!1)}else h.startsWith("origin")?(u=!0,a[h]=y):r[h]=y}if(e.transform||(c||s?r.transform=L$(n.transform,t,d,s):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=a;r.transformOrigin=`${h} ${f} ${m}`}}const pk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xL(n,e,t){for(const s in e)!ss(e[s])&&!mL(s,t)&&(n[s]=e[s])}function $$({transformTemplate:n},e,t){return A.useMemo(()=>{const s=pk();return fk(s,e,{enableHardwareAcceleration:!t},n),Object.assign({},s.vars,s.style)},[e])}function V$(n,e,t){const s=n.style||{},r={};return xL(r,s,n),Object.assign(r,$$(n,e,t)),n.transformValues?n.transformValues(r):r}function z$(n,e,t){const s={},r=V$(n,e,t);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=r,s}const U$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $b(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||U$.has(n)}let wL=n=>!$b(n);function H$(n){n&&(wL=e=>e.startsWith("on")?!$b(e):n(e))}try{H$(require("@emotion/is-prop-valid").default)}catch{}function G$(n,e,t){const s={};for(const r in n)r==="values"&&typeof n.values=="object"||(wL(r)||t===!0&&$b(r)||!e&&!$b(r)||n.draggable&&r.startsWith("onDrag"))&&(s[r]=n[r]);return s}function VP(n,e,t){return typeof n=="string"?n:oe.transform(e+t*n)}function W$(n,e,t){const s=VP(e,n.x,n.width),r=VP(t,n.y,n.height);return`${s} ${r}`}const q$={offset:"stroke-dashoffset",array:"stroke-dasharray"},K$={offset:"strokeDashoffset",array:"strokeDasharray"};function X$(n,e,t=1,s=0,r=!0){n.pathLength=1;const i=r?q$:K$;n[i.offset]=oe.transform(-s);const o=oe.transform(e),a=oe.transform(t);n[i.array]=`${o} ${a}`}function mk(n,{attrX:e,attrY:t,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:c=0,...u},d,h,f){if(fk(n,u,d,f),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:y,dimensions:g}=n;m.transform&&(g&&(y.transform=m.transform),delete m.transform),g&&(r!==void 0||i!==void 0||y.transform)&&(y.transformOrigin=W$(g,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),s!==void 0&&(m.scale=s),o!==void 0&&X$(m,o,a,c,!1)}const SL=()=>({...pk(),attrs:{}}),gk=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Y$(n,e,t,s){const r=A.useMemo(()=>{const i=SL();return mk(i,e,{enableHardwareAcceleration:!1},gk(s),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};xL(i,n.style,n),r.style={...i,...r.style}}return r}function Q$(n=!1){return(t,s,r,{latestValues:i},o)=>{const c=(hk(t)?Y$:z$)(s,i,o,t),d={...G$(s,typeof t=="string",n),...c,ref:r},{children:h}=s,f=A.useMemo(()=>ss(h)?h.get():h,[h]);return A.createElement(t,{...d,children:f})}}function _L(n,{style:e,vars:t},s,r){Object.assign(n.style,e,r&&r.getProjectionStyles(s));for(const i in t)n.style.setProperty(i,t[i])}const AL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EL(n,e,t,s){_L(n,e,void 0,s);for(const r in e.attrs)n.setAttribute(AL.has(r)?r:lk(r),e.attrs[r])}function yk(n,e){const{style:t}=n,s={};for(const r in t)(ss(t[r])||e.style&&ss(e.style[r])||mL(r,n))&&(s[r]=t[r]);return s}function CL(n,e){const t=yk(n,e);for(const s in n)if(ss(n[s])||ss(e[s])){const r=cy.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;t[r]=n[s]}return t}function vk(n,e,t,s={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,s,r)),e}function kL(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const Vb=n=>Array.isArray(n),J$=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Z$=n=>Vb(n)?n[n.length-1]||0:n;function Mv(n){const e=ss(n)?n.get():n;return J$(e)?e.toValue():e}function eV({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},s,r,i){const o={latestValues:tV(s,r,i,n),renderState:e()};return t&&(o.mount=a=>t(s,a,o)),o}const TL=n=>(e,t)=>{const s=A.useContext(x1),r=A.useContext(w1),i=()=>eV(n,e,s,r);return t?i():kL(i)};function tV(n,e,t,s){const r={},i=s(n,{});for(const f in i)r[f]=Mv(i[f]);let{initial:o,animate:a}=n;const c=A1(n),u=fL(n);e&&u&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const h=d?a:o;return h&&typeof h!="boolean"&&!_1(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const y=vk(n,m);if(!y)return;const{transitionEnd:g,transition:w,...v}=y;for(const b in v){let _=v[b];if(Array.isArray(_)){const E=d?_.length-1:0;_=_[E]}_!==null&&(r[b]=_)}for(const b in g)r[b]=g[b]}),r}const _t=n=>n;class zP{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function nV(n){let e=new zP,t=new zP,s=0,r=!1,i=!1;const o=new WeakSet,a={schedule:(c,u=!1,d=!1)=>{const h=d&&r,f=h?e:t;return u&&o.add(c),f.add(c)&&h&&r&&(s=e.order.length),c},cancel:c=>{t.remove(c),o.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),s=e.order.length,s)for(let u=0;u<s;u++){const d=e.order[u];d(c),o.has(d)&&(a.schedule(d),n())}r=!1,i&&(i=!1,a.process(c))}};return a}const Xy=["prepare","read","update","preRender","render","postRender"],sV=40;function rV(n,e){let t=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=Xy.reduce((h,f)=>(h[f]=nV(()=>t=!0),h),{}),o=h=>i[h].process(r),a=()=>{const h=performance.now();t=!1,r.delta=s?1e3/60:Math.max(Math.min(h-r.timestamp,sV),1),r.timestamp=h,r.isProcessing=!0,Xy.forEach(o),r.isProcessing=!1,t&&e&&(s=!1,n(a))},c=()=>{t=!0,s=!0,r.isProcessing||n(a)};return{schedule:Xy.reduce((h,f)=>{const m=i[f];return h[f]=(y,g=!1,w=!1)=>(t||c(),m.schedule(y,g,w)),h},{}),cancel:h=>Xy.forEach(f=>i[f].cancel(h)),state:r,steps:i}}const{schedule:Je,cancel:Eo,state:xn,steps:AS}=rV(typeof requestAnimationFrame<"u"?requestAnimationFrame:_t,!0),iV={useVisualState:TL({scrapeMotionValuesFromProps:CL,createRenderState:SL,onMount:(n,e,{renderState:t,latestValues:s})=>{Je.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Je.render(()=>{mk(t,s,{enableHardwareAcceleration:!1},gk(e.tagName),n.transformTemplate),EL(e,t)})}})},oV={useVisualState:TL({scrapeMotionValuesFromProps:yk,createRenderState:pk})};function aV(n,{forwardMotionProps:e=!1},t,s){return{...hk(n)?iV:oV,preloadedFeatures:t,useRender:Q$(e),createVisualElement:s,Component:n}}function mo(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}const PL=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function C1(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const lV=n=>e=>PL(e)&&n(e,C1(e));function yo(n,e,t,s){return mo(n,e,lV(t),s)}const cV=(n,e)=>t=>e(n(t)),Ya=(...n)=>n.reduce(cV);function NL(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const UP=NL("dragHorizontal"),HP=NL("dragVertical");function RL(n){let e=!1;if(n==="y")e=HP();else if(n==="x")e=UP();else{const t=UP(),s=HP();t&&s?e=()=>{t(),s()}:(t&&t(),s&&s())}return e}function ML(){const n=RL(!0);return n?(n(),!1):!0}class al{constructor(e){this.isMounted=!1,this.node=e}update(){}}function GP(n,e){const t="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),r=(i,o)=>{if(i.pointerType==="touch"||ML())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[s]&&Je.update(()=>a[s](i,o))};return yo(n.current,t,r,{passive:!n.getProps()[s]})}class uV extends al{mount(){this.unmount=Ya(GP(this.node,!0),GP(this.node,!1))}unmount(){}}class dV extends al{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ya(mo(this.node.current,"focus",()=>this.onFocus()),mo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const jL=(n,e)=>e?n===e?!0:jL(n,e.parentElement):!1;function ES(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,C1(t))}class hV extends al{constructor(){super(...arguments),this.removeStartListeners=_t,this.removeEndListeners=_t,this.removeAccessibleListeners=_t,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=yo(window,"pointerup",(a,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps();Je.update(()=>{!h&&!jL(this.node.current,a.target)?d&&d(a,c):u&&u(a,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=yo(window,"pointercancel",(a,c)=>this.cancelPress(a,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Ya(i,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||ES("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&Je.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=mo(this.node.current,"keyup",o),ES("down",(a,c)=>{this.startPress(a,c)})},t=mo(this.node.current,"keydown",e),s=()=>{this.isPressing&&ES("cancel",(i,o)=>this.cancelPress(i,o))},r=mo(this.node.current,"blur",s);this.removeAccessibleListeners=Ya(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Je.update(()=>s(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ML()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Je.update(()=>s(e,t))}mount(){const e=this.node.getProps(),t=yo(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=mo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Ya(t,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const sA=new WeakMap,CS=new WeakMap,fV=n=>{const e=sA.get(n.target);e&&e(n)},pV=n=>{n.forEach(fV)};function mV({root:n,...e}){const t=n||document;CS.has(t)||CS.set(t,{});const s=CS.get(t),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(pV,{root:n,...e})),s[r]}function gV(n,e,t){const s=mV(e);return sA.set(n,t),s.observe(n),()=>{sA.delete(n),s.unobserve(n)}}const yV={some:0,all:1};class vV extends al{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:r="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:yV[r]},a=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return gV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(bV(e,t))&&this.startObserver()}unmount(){}}function bV({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const xV={inView:{Feature:vV},tap:{Feature:hV},focus:{Feature:dV},hover:{Feature:uV}};function LL(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}function wV(n){const e={};return n.values.forEach((t,s)=>e[s]=t.get()),e}function SV(n){const e={};return n.values.forEach((t,s)=>e[s]=t.getVelocity()),e}function k1(n,e,t){const s=n.getProps();return vk(s,e,t!==void 0?t:s.custom,wV(n),SV(n))}let _V=_t,bk=_t;const Qa=n=>n*1e3,vo=n=>n/1e3,AV={current:!1},DL=n=>Array.isArray(n)&&typeof n[0]=="number";function IL(n){return!!(!n||typeof n=="string"&&OL[n]||DL(n)||Array.isArray(n)&&n.every(IL))}const cp=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,OL={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cp([0,.65,.55,1]),circOut:cp([.55,0,1,.45]),backIn:cp([.31,.01,.66,-.59]),backOut:cp([.33,1.53,.69,.99])};function FL(n){if(n)return DL(n)?cp(n):Array.isArray(n)?n.map(FL):OL[n]}function EV(n,e,t,{delay:s=0,duration:r,repeat:i=0,repeatType:o="loop",ease:a,times:c}={}){const u={[e]:t};c&&(u.offset=c);const d=FL(a);return Array.isArray(d)&&(u.easing=d),n.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function CV(n,{repeat:e,repeatType:t="loop"}){const s=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[s]}const BL=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,kV=1e-7,TV=12;function PV(n,e,t,s,r){let i,o,a=0;do o=e+(t-e)/2,i=BL(o,s,r)-n,i>0?t=o:e=o;while(Math.abs(i)>kV&&++a<TV);return o}function hy(n,e,t,s){if(n===e&&t===s)return _t;const r=i=>PV(i,0,1,n,t);return i=>i===0||i===1?i:BL(r(i),e,s)}const NV=hy(.42,0,1,1),RV=hy(0,0,.58,1),$L=hy(.42,0,.58,1),MV=n=>Array.isArray(n)&&typeof n[0]!="number",VL=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,zL=n=>e=>1-n(1-e),xk=n=>1-Math.sin(Math.acos(n)),UL=zL(xk),jV=VL(xk),HL=hy(.33,1.53,.69,.99),wk=zL(HL),LV=VL(wk),DV=n=>(n*=2)<1?.5*wk(n):.5*(2-Math.pow(2,-10*(n-1))),IV={linear:_t,easeIn:NV,easeInOut:$L,easeOut:RV,circIn:xk,circInOut:jV,circOut:UL,backIn:wk,backInOut:LV,backOut:HL,anticipate:DV},WP=n=>{if(Array.isArray(n)){bk(n.length===4);const[e,t,s,r]=n;return hy(e,t,s,r)}else if(typeof n=="string")return IV[n];return n},Sk=(n,e)=>t=>!!(uy(t)&&O$.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),GL=(n,e,t)=>s=>{if(!uy(s))return s;const[r,i,o,a]=s.match(E1);return{[n]:parseFloat(r),[e]:parseFloat(i),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},OV=n=>el(0,255,n),kS={...xu,transform:n=>Math.round(OV(n))},Nl={test:Sk("rgb","red"),parse:GL("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+kS.transform(n)+", "+kS.transform(e)+", "+kS.transform(t)+", "+Hp(Up.transform(s))+")"};function FV(n){let e="",t="",s="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const rA={test:Sk("#"),parse:FV,transform:Nl.transform},Qu={test:Sk("hsl","hue"),parse:GL("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+gi.transform(Hp(e))+", "+gi.transform(Hp(t))+", "+Hp(Up.transform(s))+")"},Mn={test:n=>Nl.test(n)||rA.test(n)||Qu.test(n),parse:n=>Nl.test(n)?Nl.parse(n):Qu.test(n)?Qu.parse(n):rA.parse(n),transform:n=>uy(n)?n:n.hasOwnProperty("red")?Nl.transform(n):Qu.transform(n)},ft=(n,e,t)=>-t*n+t*e+n;function TS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function BV({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let r=0,i=0,o=0;if(!e)r=i=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,c=2*t-a;r=TS(c,a,n+1/3),i=TS(c,a,n),o=TS(c,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}const PS=(n,e,t)=>{const s=n*n;return Math.sqrt(Math.max(0,t*(e*e-s)+s))},$V=[rA,Nl,Qu],VV=n=>$V.find(e=>e.test(n));function qP(n){const e=VV(n);let t=e.parse(n);return e===Qu&&(t=BV(t)),t}const WL=(n,e)=>{const t=qP(n),s=qP(e),r={...t};return i=>(r.red=PS(t.red,s.red,i),r.green=PS(t.green,s.green,i),r.blue=PS(t.blue,s.blue,i),r.alpha=ft(t.alpha,s.alpha,i),Nl.transform(r))};function zV(n){var e,t;return isNaN(n)&&uy(n)&&(((e=n.match(E1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(vL))===null||t===void 0?void 0:t.length)||0)>0}const qL={regex:D$,countKey:"Vars",token:"${v}",parse:_t},KL={regex:vL,countKey:"Colors",token:"${c}",parse:Mn.parse},XL={regex:E1,countKey:"Numbers",token:"${n}",parse:xu.parse};function NS(n,{regex:e,countKey:t,token:s,parse:r}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,s),n.values.push(...i.map(r)))}function zb(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&NS(t,qL),NS(t,KL),NS(t,XL),t}function YL(n){return zb(n).values}function QL(n){const{values:e,numColors:t,numVars:s,tokenised:r}=zb(n),i=e.length;return o=>{let a=r;for(let c=0;c<i;c++)c<s?a=a.replace(qL.token,o[c]):c<s+t?a=a.replace(KL.token,Mn.transform(o[c])):a=a.replace(XL.token,Hp(o[c]));return a}}const UV=n=>typeof n=="number"?0:n;function HV(n){const e=YL(n);return QL(n)(e.map(UV))}const tl={test:zV,parse:YL,createTransformer:QL,getAnimatableNone:HV},JL=(n,e)=>t=>`${t>0?e:n}`;function ZL(n,e){return typeof n=="number"?t=>ft(n,e,t):Mn.test(n)?WL(n,e):n.startsWith("var(")?JL(n,e):tD(n,e)}const eD=(n,e)=>{const t=[...n],s=t.length,r=n.map((i,o)=>ZL(i,e[o]));return i=>{for(let o=0;o<s;o++)t[o]=r[o](i);return t}},GV=(n,e)=>{const t={...n,...e},s={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(s[r]=ZL(n[r],e[r]));return r=>{for(const i in s)t[i]=s[i](r);return t}},tD=(n,e)=>{const t=tl.createTransformer(e),s=zb(n),r=zb(e);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?Ya(eD(s.values,r.values),t):JL(n,e)},gm=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s},KP=(n,e)=>t=>ft(n,e,t);function WV(n){return typeof n=="number"?KP:typeof n=="string"?Mn.test(n)?WL:tD:Array.isArray(n)?eD:typeof n=="object"?GV:KP}function qV(n,e,t){const s=[],r=t||WV(n[0]),i=n.length-1;for(let o=0;o<i;o++){let a=r(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||_t:e;a=Ya(c,a)}s.push(a)}return s}function nD(n,e,{clamp:t=!0,ease:s,mixer:r}={}){const i=n.length;if(bk(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=qV(e,s,r),a=o.length,c=u=>{let d=0;if(a>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const h=gm(n[d],n[d+1],u);return o[d](h)};return t?u=>c(el(n[0],n[i-1],u)):c}function KV(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const r=gm(0,e,s);n.push(ft(t,1,r))}}function XV(n){const e=[0];return KV(e,n.length-1),e}function YV(n,e){return n.map(t=>t*e)}function QV(n,e){return n.map(()=>e||$L).splice(0,n.length-1)}function Ub({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const r=MV(s)?s.map(WP):WP(s),i={done:!1,value:e[0]},o=YV(t&&t.length===e.length?t:XV(e),n),a=nD(o,e,{ease:Array.isArray(r)?r:QV(e,r)});return{calculatedDuration:n,next:c=>(i.value=a(c),i.done=c>=n,i)}}function sD(n,e){return e?n*(1e3/e):0}const JV=5;function rD(n,e,t){const s=Math.max(e-JV,0);return sD(t-n(s),e-s)}const RS=.001,ZV=.01,XP=10,ez=.05,tz=1;function nz({duration:n=800,bounce:e=.25,velocity:t=0,mass:s=1}){let r,i;_V(n<=Qa(XP));let o=1-e;o=el(ez,tz,o),n=el(ZV,XP,vo(n)),o<1?(r=u=>{const d=u*o,h=d*n,f=d-t,m=iA(u,o),y=Math.exp(-h);return RS-f/m*y},i=u=>{const h=u*o*n,f=h*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,y=Math.exp(-h),g=iA(Math.pow(u,2),o);return(-r(u)+RS>0?-1:1)*((f-m)*y)/g}):(r=u=>{const d=Math.exp(-u*n),h=(u-t)*n+1;return-RS+d*h},i=u=>{const d=Math.exp(-u*n),h=(t-u)*(n*n);return d*h});const a=5/n,c=rz(r,i,a);if(n=Qa(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:n}}}const sz=12;function rz(n,e,t){let s=t;for(let r=1;r<sz;r++)s=s-n(s)/e(s);return s}function iA(n,e){return n*Math.sqrt(1-e*e)}const iz=["duration","bounce"],oz=["stiffness","damping","mass"];function YP(n,e){return e.some(t=>n[t]!==void 0)}function az(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!YP(n,oz)&&YP(n,iz)){const t=nz(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function iD({keyframes:n,restDelta:e,restSpeed:t,...s}){const r=n[0],i=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:f}=az({...s,velocity:-vo(s.velocity||0)}),m=h||0,y=c/(2*Math.sqrt(a*u)),g=i-r,w=vo(Math.sqrt(a/u)),v=Math.abs(g)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let b;if(y<1){const _=iA(w,y);b=E=>{const k=Math.exp(-y*w*E);return i-k*((m+y*w*g)/_*Math.sin(_*E)+g*Math.cos(_*E))}}else if(y===1)b=_=>i-Math.exp(-w*_)*(g+(m+w*g)*_);else{const _=w*Math.sqrt(y*y-1);b=E=>{const k=Math.exp(-y*w*E),T=Math.min(_*E,300);return i-k*((m+y*w*g)*Math.sinh(T)+_*g*Math.cosh(T))/_}}return{calculatedDuration:f&&d||null,next:_=>{const E=b(_);if(f)o.done=_>=d;else{let k=m;_!==0&&(y<1?k=rD(b,_,E):k=0);const T=Math.abs(k)<=t,P=Math.abs(i-E)<=e;o.done=T&&P}return o.value=o.done?i:E,o}}}function QP({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:u=.5,restSpeed:d}){const h=n[0],f={done:!1,value:h},m=N=>a!==void 0&&N<a||c!==void 0&&N>c,y=N=>a===void 0?c:c===void 0||Math.abs(a-N)<Math.abs(c-N)?a:c;let g=t*e;const w=h+g,v=o===void 0?w:o(w);v!==w&&(g=v-h);const b=N=>-g*Math.exp(-N/s),_=N=>v+b(N),E=N=>{const M=b(N),L=_(N);f.done=Math.abs(M)<=u,f.value=f.done?v:L};let k,T;const P=N=>{m(f.value)&&(k=N,T=iD({keyframes:[f.value,y(f.value)],velocity:rD(_,N,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:N=>{let M=!1;return!T&&k===void 0&&(M=!0,E(N),P(N)),k!==void 0&&N>k?T.next(N-k):(!M&&E(N),f)}}}const lz=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Je.update(e,!0),stop:()=>Eo(e),now:()=>xn.isProcessing?xn.timestamp:performance.now()}},JP=2e4;function ZP(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<JP;)e+=t,s=n.next(e);return e>=JP?1/0:e}const cz={decay:QP,inertia:QP,tween:Ub,keyframes:Ub,spring:iD};function Hb({autoplay:n=!0,delay:e=0,driver:t=lz,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:h,...f}){let m=1,y=!1,g,w;const v=()=>{w=new Promise(W=>{g=W})};v();let b;const _=cz[r]||Ub;let E;_!==Ub&&typeof s[0]!="number"&&(E=nD([0,100],s,{clamp:!1}),s=[0,100]);const k=_({...f,keyframes:s});let T;a==="mirror"&&(T=_({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let P="idle",N=null,M=null,L=null;k.calculatedDuration===null&&i&&(k.calculatedDuration=ZP(k));const{calculatedDuration:F}=k;let D=1/0,z=1/0;F!==null&&(D=F+o,z=D*(i+1)-o);let I=0;const R=W=>{if(M===null)return;m>0&&(M=Math.min(M,W)),m<0&&(M=Math.min(W-z/m,M)),N!==null?I=N:I=Math.round(W-M)*m;const q=I-e*(m>=0?1:-1),K=m>=0?q<0:q>z;I=Math.max(q,0),P==="finished"&&N===null&&(I=z);let se=I,pe=k;if(i){const yt=Math.min(I,z)/D;let ve=Math.floor(yt),X=yt%1;!X&&yt>=1&&(X=1),X===1&&ve--,ve=Math.min(ve,i+1),!!(ve%2)&&(a==="reverse"?(X=1-X,o&&(X-=o/D)):a==="mirror"&&(pe=T)),se=el(0,1,X)*D}const ye=K?{done:!1,value:s[0]}:pe.next(se);E&&(ye.value=E(ye.value));let{done:ge}=ye;!K&&F!==null&&(ge=m>=0?I>=z:I<=0);const Jt=N===null&&(P==="finished"||P==="running"&&ge);return h&&h(ye.value),Jt&&B(),ye},j=()=>{b&&b.stop(),b=void 0},O=()=>{P="idle",j(),g(),v(),M=L=null},B=()=>{P="finished",d&&d(),j(),g()},$=()=>{if(y)return;b||(b=t(R));const W=b.now();c&&c(),N!==null?M=W-N:(!M||P==="finished")&&(M=W),P==="finished"&&v(),L=M,N=null,P="running",b.start()};n&&$();const V={then(W,q){return w.then(W,q)},get time(){return vo(I)},set time(W){W=Qa(W),I=W,N!==null||!b||m===0?N=W:M=b.now()-W/m},get duration(){const W=k.calculatedDuration===null?ZP(k):k.calculatedDuration;return vo(W)},get speed(){return m},set speed(W){W===m||!b||(m=W,V.time=vo(I))},get state(){return P},play:$,pause:()=>{P="paused",N=I},stop:()=>{y=!0,P!=="idle"&&(P="idle",u&&u(),O())},cancel:()=>{L!==null&&R(L),O()},complete:()=>{P="finished"},sample:W=>(M=0,R(W))};return V}function uz(n){let e;return()=>(e===void 0&&(e=n()),e)}const dz=uz(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),hz=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Yy=10,fz=2e4,pz=(n,e)=>e.type==="spring"||n==="backgroundColor"||!IL(e.ease);function mz(n,e,{onUpdate:t,onComplete:s,...r}){if(!(dz()&&hz.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,c,u=!1;const d=()=>{c=new Promise(_=>{a=_})};d();let{keyframes:h,duration:f=300,ease:m,times:y}=r;if(pz(e,r)){const _=Hb({...r,repeat:0,delay:0});let E={done:!1,value:h[0]};const k=[];let T=0;for(;!E.done&&T<fz;)E=_.sample(T),k.push(E.value),T+=Yy;y=void 0,h=k,f=T-Yy,m="linear"}const g=EV(n.owner.current,e,h,{...r,duration:f,ease:m,times:y}),w=()=>{u=!1,g.cancel()},v=()=>{u=!0,Je.update(w),a(),d()};return g.onfinish=()=>{u||(n.set(CV(h,r)),s&&s(),v())},{then(_,E){return c.then(_,E)},attachTimeline(_){return g.timeline=_,g.onfinish=null,_t},get time(){return vo(g.currentTime||0)},set time(_){g.currentTime=Qa(_)},get speed(){return g.playbackRate},set speed(_){g.playbackRate=_},get duration(){return vo(f)},play:()=>{o||(g.play(),Eo(w))},pause:()=>g.pause(),stop:()=>{if(o=!0,g.playState==="idle")return;const{currentTime:_}=g;if(_){const E=Hb({...r,autoplay:!1});n.setWithVelocity(E.sample(_-Yy).value,E.sample(_).value,Yy)}v()},complete:()=>{u||g.finish()},cancel:v}}function gz({keyframes:n,delay:e,onUpdate:t,onComplete:s}){const r=()=>(t&&t(n[n.length-1]),s&&s(),{time:0,speed:1,duration:0,play:_t,pause:_t,stop:_t,then:i=>(i(),Promise.resolve()),cancel:_t,complete:_t});return e?Hb({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const yz={type:"spring",stiffness:500,damping:25,restSpeed:10},vz=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),bz={type:"keyframes",duration:.8},xz={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wz=(n,{keyframes:e})=>e.length>2?bz:bu.has(n)?n.startsWith("scale")?vz(e[1]):yz:xz,oA=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(tl.test(e)||e==="0")&&!e.startsWith("url(")),Sz=new Set(["brightness","contrast","saturate","opacity"]);function _z(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(E1)||[];if(!s)return n;const r=t.replace(s,"");let i=Sz.has(e)?1:0;return s!==t&&(i*=100),e+"("+i+r+")"}const Az=/([a-z-]*)\(.*?\)/g,aA={...tl,getAnimatableNone:n=>{const e=n.match(Az);return e?e.map(_z).join(" "):n}},Ez={...bL,color:Mn,backgroundColor:Mn,outlineColor:Mn,fill:Mn,stroke:Mn,borderColor:Mn,borderTopColor:Mn,borderRightColor:Mn,borderBottomColor:Mn,borderLeftColor:Mn,filter:aA,WebkitFilter:aA},_k=n=>Ez[n];function oD(n,e){let t=_k(n);return t!==aA&&(t=tl),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const aD=n=>/^0[^.\s]+$/.test(n);function Cz(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||aD(n)}function kz(n,e,t,s){const r=oA(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const o=s.from!==void 0?s.from:n.get();let a;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),Cz(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(a=i[u]);if(r&&c.length&&a)for(let u=0;u<c.length;u++){const d=c[u];i[d]=oD(e,a)}return i}function Tz({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function Ak(n,e){return n[e]||n.default||n}const Pz={skipAnimations:!1},Ek=(n,e,t,s={})=>r=>{const i=Ak(s,n)||{},o=i.delay||s.delay||0;let{elapsed:a=0}=s;a=a-Qa(o);const c=kz(e,n,t,i),u=c[0],d=c[c.length-1],h=oA(n,u),f=oA(n,d);let m={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:y=>{e.set(y),i.onUpdate&&i.onUpdate(y)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(Tz(i)||(m={...m,...wz(n,m)}),m.duration&&(m.duration=Qa(m.duration)),m.repeatDelay&&(m.repeatDelay=Qa(m.repeatDelay)),!h||!f||AV.current||i.type===!1||Pz.skipAnimations)return gz(m);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const y=mz(e,n,m);if(y)return y}return Hb(m)};function Gb(n){return!!(ss(n)&&n.add)}const lD=n=>/^\-?\d*\.?\d+$/.test(n);function Ck(n,e){n.indexOf(e)===-1&&n.push(e)}function kk(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Tk{constructor(){this.subscriptions=[]}add(e){return Ck(this.subscriptions,e),()=>kk(this.subscriptions,e)}notify(e,t,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Nz=n=>!isNaN(parseFloat(n));class Rz{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:o}=xn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Je.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Je.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Nz(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Tk);const s=this.events[e].add(t);return e==="change"?()=>{s(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,s){this.set(t),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?sD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wf(n,e){return new Rz(n,e)}const cD=n=>e=>e.test(n),Mz={test:n=>n==="auto",parse:n=>n},uD=[xu,oe,gi,jo,B$,F$,Mz],qf=n=>uD.find(cD(n)),jz=[...uD,Mn,tl],Lz=n=>jz.find(cD(n));function Dz(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,wf(t))}function Iz(n,e){const t=k1(n,e);let{transitionEnd:s={},transition:r={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...s};for(const o in i){const a=Z$(i[o]);Dz(n,o,a)}}function Oz(n,e,t){var s,r;const i=Object.keys(e).filter(a=>!n.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const c=i[a],u=e[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(r=(s=t[c])!==null&&s!==void 0?s:n.readValue(c))!==null&&r!==void 0?r:e[c]),d!=null&&(typeof d=="string"&&(lD(d)||aD(d))?d=parseFloat(d):!Lz(d)&&tl.test(u)&&(d=oD(c,u)),n.addValue(c,wf(d,{owner:n})),t[c]===void 0&&(t[c]=d),d!==null&&n.setBaseTarget(c,d))}}function Fz(n,e){return e?(e[n]||e.default||e).from:void 0}function Bz(n,e,t){const s={};for(const r in n){const i=Fz(r,e);if(i!==void 0)s[r]=i;else{const o=t.getValue(r);o&&(s[r]=o.get())}}return s}function $z({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function Vz(n,e){const t=n.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==t)return!0}else return t!==e}function dD(n,e,{delay:t=0,transitionOverride:s,type:r}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const c=n.getValue("willChange");s&&(i=s);const u=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const f=n.getValue(h),m=a[h];if(!f||m===void 0||d&&$z(d,h))continue;const y={delay:t,elapsed:0,...Ak(i||{},h)};if(window.HandoffAppearAnimations){const v=n.getProps()[hL];if(v){const b=window.HandoffAppearAnimations(v,h,f,Je);b!==null&&(y.elapsed=b,y.isHandoff=!0)}}let g=!y.isHandoff&&!Vz(f,m);if(y.type==="spring"&&(f.getVelocity()||y.velocity)&&(g=!1),f.animation&&(g=!1),g)continue;f.start(Ek(h,f,m,n.shouldReduceMotion&&bu.has(h)?{type:!1}:y));const w=f.animation;Gb(c)&&(c.add(h),w.then(()=>c.remove(h))),u.push(w)}return o&&Promise.all(u).then(()=>{o&&Iz(n,o)}),u}function lA(n,e,t={}){const s=k1(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(r=t.transitionOverride);const i=s?()=>Promise.all(dD(n,s,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:h}=r;return zz(n,e,u+c,d,h,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,u]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(t.delay)])}function zz(n,e,t=0,s=0,r=1,i){const o=[],a=(n.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>a-u*s;return Array.from(n.variantChildren).sort(Uz).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(lA(u,e,{...i,delay:t+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function Uz(n,e){return n.sortNodePosition(e)}function Hz(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>lA(n,i,t));s=Promise.all(r)}else if(typeof e=="string")s=lA(n,e,t);else{const r=typeof e=="function"?k1(n,e,t.custom):e;s=Promise.all(dD(n,r,t))}return s.then(()=>n.notify("AnimationComplete",e))}const Gz=[...ck].reverse(),Wz=ck.length;function qz(n){return e=>Promise.all(e.map(({animation:t,options:s})=>Hz(n,t,s)))}function Kz(n){let e=qz(n);const t=Yz();let s=!0;const r=(c,u)=>{const d=k1(n,u);if(d){const{transition:h,transitionEnd:f,...m}=d;c={...c,...m,...f}}return c};function i(c){e=c(n)}function o(c,u){const d=n.getProps(),h=n.getVariantContext(!0)||{},f=[],m=new Set;let y={},g=1/0;for(let v=0;v<Wz;v++){const b=Gz[v],_=t[b],E=d[b]!==void 0?d[b]:h[b],k=pm(E),T=b===u?_.isActive:null;T===!1&&(g=v);let P=E===h[b]&&E!==d[b]&&k;if(P&&s&&n.manuallyAnimateOnMount&&(P=!1),_.protectedKeys={...y},!_.isActive&&T===null||!E&&!_.prevProp||_1(E)||typeof E=="boolean")continue;let M=Xz(_.prevProp,E)||b===u&&_.isActive&&!P&&k||v>g&&k,L=!1;const F=Array.isArray(E)?E:[E];let D=F.reduce(r,{});T===!1&&(D={});const{prevResolvedValues:z={}}=_,I={...z,...D},R=j=>{M=!0,m.has(j)&&(L=!0,m.delete(j)),_.needsAnimating[j]=!0};for(const j in I){const O=D[j],B=z[j];if(y.hasOwnProperty(j))continue;let $=!1;Vb(O)&&Vb(B)?$=!LL(O,B):$=O!==B,$?O!==void 0?R(j):m.add(j):O!==void 0&&m.has(j)?R(j):_.protectedKeys[j]=!0}_.prevProp=E,_.prevResolvedValues=D,_.isActive&&(y={...y,...D}),s&&n.blockInitialAnimation&&(M=!1),M&&(!P||L)&&f.push(...F.map(j=>({animation:j,options:{type:b,...c}})))}if(m.size){const v={};m.forEach(b=>{const _=n.getBaseTarget(b);_!==void 0&&(v[b]=_)}),f.push({animation:v})}let w=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function a(c,u,d){var h;if(t[c].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(m=>{var y;return(y=m.animationState)===null||y===void 0?void 0:y.setActive(c,u)}),t[c].isActive=u;const f=o(d,c);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>t}}function Xz(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!LL(e,n):!1}function ll(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Yz(){return{animate:ll(!0),whileInView:ll(),whileHover:ll(),whileTap:ll(),whileDrag:ll(),whileFocus:ll(),exit:ll()}}class Qz extends al{constructor(e){super(e),e.animationState||(e.animationState=Kz(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),_1(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let Jz=0;class Zz extends al{constructor(){super(...arguments),this.id=Jz++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const eU={animation:{Feature:Qz},exit:{Feature:Zz}},e2=(n,e)=>Math.abs(n-e);function tU(n,e){const t=e2(n.x,e.x),s=e2(n.y,e.y);return Math.sqrt(t**2+s**2)}class hD{constructor(e,t,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=jS(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,m=tU(h.offset,{x:0,y:0})>=3;if(!f&&!m)return;const{point:y}=h,{timestamp:g}=xn;this.history.push({...y,timestamp:g});const{onStart:w,onMove:v}=this.handlers;f||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,h)},this.handlePointerMove=(h,f)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=MS(f,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(h,f)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=jS(h.type==="pointercancel"?this.lastMoveEventInfo:MS(f,this.transformPagePoint),this.history);this.startEvent&&m&&m(h,w),y&&y(h,w)},!PL(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=s,this.contextWindow=r||window;const o=C1(e),a=MS(o,this.transformPagePoint),{point:c}=a,{timestamp:u}=xn;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,jS(a,this.history)),this.removeListeners=Ya(yo(this.contextWindow,"pointermove",this.handlePointerMove),yo(this.contextWindow,"pointerup",this.handlePointerUp),yo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Eo(this.updatePoint)}}function MS(n,e){return e?{point:e(n.point)}:n}function t2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function jS({point:n},e){return{point:n,delta:t2(n,fD(e)),offset:t2(n,nU(e)),velocity:sU(e,.1)}}function nU(n){return n[0]}function fD(n){return n[n.length-1]}function sU(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const r=fD(n);for(;t>=0&&(s=n[t],!(r.timestamp-s.timestamp>Qa(e)));)t--;if(!s)return{x:0,y:0};const i=vo(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ns(n){return n.max-n.min}function cA(n,e=0,t=.01){return Math.abs(n-e)<=t}function n2(n,e,t,s=.5){n.origin=s,n.originPoint=ft(e.min,e.max,n.origin),n.scale=Ns(t)/Ns(e),(cA(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=ft(t.min,t.max,n.origin)-n.originPoint,(cA(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Gp(n,e,t,s){n2(n.x,e.x,t.x,s?s.originX:void 0),n2(n.y,e.y,t.y,s?s.originY:void 0)}function s2(n,e,t){n.min=t.min+e.min,n.max=n.min+Ns(e)}function rU(n,e,t){s2(n.x,e.x,t.x),s2(n.y,e.y,t.y)}function r2(n,e,t){n.min=e.min-t.min,n.max=n.min+Ns(e)}function Wp(n,e,t){r2(n.x,e.x,t.x),r2(n.y,e.y,t.y)}function iU(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?ft(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?ft(t,n,s.max):Math.min(n,t)),n}function i2(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function oU(n,{top:e,left:t,bottom:s,right:r}){return{x:i2(n.x,t,r),y:i2(n.y,e,s)}}function o2(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function aU(n,e){return{x:o2(n.x,e.x),y:o2(n.y,e.y)}}function lU(n,e){let t=.5;const s=Ns(n),r=Ns(e);return r>s?t=gm(e.min,e.max-s,n.min):s>r&&(t=gm(n.min,n.max-r,e.min)),el(0,1,t)}function cU(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const uA=.35;function uU(n=uA){return n===!1?n=0:n===!0&&(n=uA),{x:a2(n,"left","right"),y:a2(n,"top","bottom")}}function a2(n,e,t){return{min:l2(n,e),max:l2(n,t)}}function l2(n,e){return typeof n=="number"?n:n[e]||0}const c2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ju=()=>({x:c2(),y:c2()}),u2=()=>({min:0,max:0}),Nt=()=>({x:u2(),y:u2()});function Os(n){return[n("x"),n("y")]}function pD({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function dU({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function hU(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function LS(n){return n===void 0||n===1}function dA({scale:n,scaleX:e,scaleY:t}){return!LS(n)||!LS(e)||!LS(t)}function ml(n){return dA(n)||mD(n)||n.z||n.rotate||n.rotateX||n.rotateY}function mD(n){return d2(n.x)||d2(n.y)}function d2(n){return n&&n!=="0%"}function Wb(n,e,t){const s=n-t,r=e*s;return t+r}function h2(n,e,t,s,r){return r!==void 0&&(n=Wb(n,r,s)),Wb(n,t,s)+e}function hA(n,e=0,t=1,s,r){n.min=h2(n.min,e,t,s,r),n.max=h2(n.max,e,t,s,r)}function gD(n,{x:e,y:t}){hA(n.x,e.translate,e.scale,e.originPoint),hA(n.y,t.translate,t.scale,t.originPoint)}function fU(n,e,t,s=!1){const r=t.length;if(!r)return;e.x=e.y=1;let i,o;for(let a=0;a<r;a++){i=t[a],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Zu(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,gD(n,o)),s&&ml(i.latestValues)&&Zu(n,i.latestValues))}e.x=f2(e.x),e.y=f2(e.y)}function f2(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Oo(n,e){n.min=n.min+e,n.max=n.max+e}function p2(n,e,[t,s,r]){const i=e[r]!==void 0?e[r]:.5,o=ft(n.min,n.max,i);hA(n,e[t],e[s],o,e.scale)}const pU=["x","scaleX","originX"],mU=["y","scaleY","originY"];function Zu(n,e){p2(n.x,e,pU),p2(n.y,e,mU)}function yD(n,e){return pD(hU(n.getBoundingClientRect(),e))}function gU(n,e,t){const s=yD(n,t),{scroll:r}=e;return r&&(Oo(s.x,r.offset.x),Oo(s.y,r.offset.y)),s}const vD=({current:n})=>n?n.ownerDocument.defaultView:null,yU=new WeakMap;class vU{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(C1(d,"page").point)},i=(d,h)=>{const{drag:f,dragPropagation:m,onDragStart:y}=this.getProps();if(f&&!m&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=RL(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Os(w=>{let v=this.getAxisMotionValue(w).get()||0;if(gi.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const _=b.layout.layoutBox[w];_&&(v=Ns(_)*(parseFloat(v)/100))}}this.originPoint[w]=v}),y&&Je.update(()=>y(d,h),!1,!0);const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},o=(d,h)=>{const{dragPropagation:f,dragDirectionLock:m,onDirectionLock:y,onDrag:g}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=h;if(m&&this.currentDirection===null){this.currentDirection=bU(w),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),g&&g(d,h)},a=(d,h)=>this.stop(d,h),c=()=>Os(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new hD(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:vD(this.visualElement)})}stop(e,t){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Je.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:r}=this.getProps();if(!s||!Qy(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=iU(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&Yu(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=oU(r.layoutBox,t):this.constraints=!1,this.elastic=uU(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Os(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=cU(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Yu(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=gU(s,r.root,this.visualElement.getTransformPagePoint());let o=aU(r.layout.layoutBox,i);if(t){const a=t(dU(o));this.hasMutatedConstraints=!!a,a&&(o=pD(a))}return o}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},u=Os(d=>{if(!Qy(d,t,this.currentDirection))return;let h=c&&c[d]||{};o&&(h={min:0,max:0});const f=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:s?e[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return s.start(Ek(e,s,0,t))}stopAnimation(){Os(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Os(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),r=s[t];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){Os(t=>{const{drag:s}=this.getProps();if(!Qy(t,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];i.set(e[t]-ft(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Yu(t)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Os(o=>{const a=this.getAxisMotionValue(o);if(a){const c=a.get();r[o]=lU({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Os(o=>{if(!Qy(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];a.set(ft(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;yU.set(this.visualElement,this);const e=this.visualElement.current,t=yo(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();Yu(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const o=mo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Os(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=uA,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Qy(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function bU(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class xU extends al{constructor(e){super(e),this.removeGroupControls=_t,this.removeListeners=_t,this.controls=new vU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||_t}unmount(){this.removeGroupControls(),this.removeListeners()}}const m2=n=>(e,t)=>{n&&Je.update(()=>n(e,t))};class wU extends al{constructor(){super(...arguments),this.removePointerDownListener=_t}onPointerDown(e){this.session=new hD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:m2(e),onStart:m2(t),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Je.update(()=>r(i,o))}}}mount(){this.removePointerDownListener=yo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function SU(){const n=A.useContext(w1);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:s}=n,r=A.useId();return A.useEffect(()=>s(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const jv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g2(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Kf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(oe.test(n))n=parseFloat(n);else return n;const t=g2(n,e.target.x),s=g2(n,e.target.y);return`${t}% ${s}%`}},_U={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,r=tl.parse(n);if(r.length>5)return s;const i=tl.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,c=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=c;const u=ft(a,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class AU extends Ce.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;R$(EU),i&&(t.group&&t.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),jv.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:r,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Je.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bD(n){const[e,t]=SU(),s=A.useContext(dk);return Ce.createElement(AU,{...n,layoutGroup:s,switchLayoutGroup:A.useContext(pL),isPresent:e,safeToRemove:t})}const EU={borderRadius:{...Kf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Kf,borderTopRightRadius:Kf,borderBottomLeftRadius:Kf,borderBottomRightRadius:Kf,boxShadow:_U},xD=["TopLeft","TopRight","BottomLeft","BottomRight"],CU=xD.length,y2=n=>typeof n=="string"?parseFloat(n):n,v2=n=>typeof n=="number"||oe.test(n);function kU(n,e,t,s,r,i){r?(n.opacity=ft(0,t.opacity!==void 0?t.opacity:1,TU(s)),n.opacityExit=ft(e.opacity!==void 0?e.opacity:1,0,PU(s))):i&&(n.opacity=ft(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,s));for(let o=0;o<CU;o++){const a=`border${xD[o]}Radius`;let c=b2(e,a),u=b2(t,a);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||v2(c)===v2(u)?(n[a]=Math.max(ft(y2(c),y2(u),s),0),(gi.test(u)||gi.test(c))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=ft(e.rotate||0,t.rotate||0,s))}function b2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const TU=wD(0,.5,UL),PU=wD(.5,.95,_t);function wD(n,e,t){return s=>s<n?0:s>e?1:t(gm(n,e,s))}function x2(n,e){n.min=e.min,n.max=e.max}function Ls(n,e){x2(n.x,e.x),x2(n.y,e.y)}function w2(n,e,t,s,r){return n-=e,n=Wb(n,1/t,s),r!==void 0&&(n=Wb(n,1/r,s)),n}function NU(n,e=0,t=1,s=.5,r,i=n,o=n){if(gi.test(e)&&(e=parseFloat(e),e=ft(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ft(i.min,i.max,s);n===i&&(a-=e),n.min=w2(n.min,e,t,a,r),n.max=w2(n.max,e,t,a,r)}function S2(n,e,[t,s,r],i,o){NU(n,e[t],e[s],e[r],e.scale,i,o)}const RU=["x","scaleX","originX"],MU=["y","scaleY","originY"];function _2(n,e,t,s){S2(n.x,e,RU,t?t.x:void 0,s?s.x:void 0),S2(n.y,e,MU,t?t.y:void 0,s?s.y:void 0)}function A2(n){return n.translate===0&&n.scale===1}function SD(n){return A2(n.x)&&A2(n.y)}function jU(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function _D(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function E2(n){return Ns(n.x)/Ns(n.y)}class LU{constructor(){this.members=[]}add(e){Ck(this.members,e),e.scheduleRender()}remove(e){if(kk(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let s;for(let r=t;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C2(n,e,t){let s="";const r=n.x.translate/e.x,i=n.y.translate/e.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:u,rotateY:d}=t;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),d&&(s+=`rotateY(${d}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(s+=`scale(${o}, ${a})`),s||"none"}const DU=(n,e)=>n.depth-e.depth;class IU{constructor(){this.children=[],this.isDirty=!1}add(e){Ck(this.children,e),this.isDirty=!0}remove(e){kk(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DU),this.isDirty=!1,this.children.forEach(e)}}function OU(n,e){const t=performance.now(),s=({timestamp:r})=>{const i=r-t;i>=e&&(Eo(s),n(i-e))};return Je.read(s,!0),()=>Eo(s)}function FU(n){window.MotionDebug&&window.MotionDebug.record(n)}function BU(n){return n instanceof SVGElement&&n.tagName!=="svg"}function $U(n,e,t){const s=ss(n)?n:wf(n);return s.start(Ek("",s,e,t)),s.animation}const k2=["","X","Y","Z"],VU={visibility:"hidden"},T2=1e3;let zU=0;const gl={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function AD({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=zU++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,gl.totalNodes=gl.resolvedTargetDeltas=gl.recalculatedProjection=0,this.nodes.forEach(GU),this.nodes.forEach(YU),this.nodes.forEach(QU),this.nodes.forEach(WU),FU(gl)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new IU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Tk),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=BU(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||c)&&(this.isLayoutDirty=!0),n){let h;const f=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=OU(f,250),jv.hasAnimatedSinceResize&&(jv.hasAnimatedSinceResize=!1,this.nodes.forEach(N2))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||d.getDefaultTransition()||n6,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=d.getProps(),b=!this.targetLayout||!_D(this.targetLayout,y)||m,_=!f&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||f&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,_);const E={...Ak(g,"layout"),onPlay:w,onComplete:v};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||N2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Eo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JU),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(P2);return}this.isUpdating||this.nodes.forEach(KU),this.isUpdating=!1,this.nodes.forEach(XU),this.nodes.forEach(UU),this.nodes.forEach(HU),this.clearAllSnapshots();const a=performance.now();xn.delta=el(0,1e3/60,a-xn.timestamp),xn.timestamp=a,xn.isProcessing=!0,AS.update.process(xn),AS.preRender.process(xn),AS.render.process(xn),xn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qU),this.sharedNodes.forEach(ZU)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!SD(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(a||ml(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),s6(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Nt();const a=o.measureViewportBox(),{scroll:c}=this.root;return c&&(Oo(a.x,c.offset.x),Oo(a.y,c.offset.y)),a}removeElementScroll(o){const a=Nt();Ls(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:h}=u;if(u!==this.root&&d&&h.layoutScroll){if(d.isRoot){Ls(a,o);const{scroll:f}=this.root;f&&(Oo(a.x,-f.offset.x),Oo(a.y,-f.offset.y))}Oo(a.x,d.offset.x),Oo(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const c=Nt();Ls(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Zu(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),ml(d.latestValues)&&Zu(c,d.latestValues)}return ml(this.latestValues)&&Zu(c,this.latestValues),c}removeTransform(o){const a=Nt();Ls(a,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!ml(u.latestValues))continue;dA(u.latestValues)&&u.updateSnapshot();const d=Nt(),h=u.measurePageBox();Ls(d,h),_2(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return ml(this.latestValues)&&_2(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==xn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=xn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Wp(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Ls(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),rU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ls(this.target,this.layout.layoutBox),gD(this.target,this.targetDelta)):Ls(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),Wp(this.relativeTargetOrigin,this.target,m.target),Ls(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}gl.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||dA(this.parent.latestValues)||mD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),c=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===xn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Ls(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;fU(this.layoutCorrected,this.treeScale,this.path,c),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:y}=a;if(!y){this.projectionTransform&&(this.projectionDelta=Ju(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ju(),this.projectionDeltaWithTransform=Ju());const g=this.projectionTransform;Gp(this.projectionDelta,this.layoutCorrected,y,this.latestValues),this.projectionTransform=C2(this.projectionDelta,this.treeScale),(this.projectionTransform!==g||this.treeScale.x!==f||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),gl.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Ju();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Nt(),m=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=m!==y,w=this.getStack(),v=!w||w.members.length<=1,b=!!(g&&!v&&this.options.crossfade===!0&&!this.path.some(t6));this.animationProgress=0;let _;this.mixTargetDelta=E=>{const k=E/1e3;R2(h.x,o.x,k),R2(h.y,o.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wp(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),e6(this.relativeTarget,this.relativeTargetOrigin,f,k),_&&jU(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Nt()),Ls(_,this.relativeTarget)),g&&(this.animationValues=d,kU(d,u,this.latestValues,k,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Eo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{jv.hasAnimatedSinceResize=!0,this.currentAnimation=$U(0,T2,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(T2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:u,latestValues:d}=o;if(!(!a||!c||!u)){if(this!==o&&this.layout&&u&&ED(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Nt();const h=Ns(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Ns(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ls(a,c),Zu(a,d),Gp(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new LU),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(a=!0),!a)return;const u={};for(let d=0;d<k2.length;d++){const h="rotate"+k2[d];c[h]&&(u[h]=c[h],o.setStaticValue(h,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var a,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VU;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Mv(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Mv(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!ml(this.latestValues)&&(g.transform=d?d({},""):"none",this.hasProjected=!1),g}const f=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=C2(this.projectionDeltaWithTransform,this.treeScale,f),d&&(u.transform=d(f,u.transform));const{x:m,y}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(a=f.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in Bb){if(f[g]===void 0)continue;const{correct:w,applyTo:v}=Bb[g],b=u.transform==="none"?f[g]:w(f[g],h);if(v){const _=v.length;for(let E=0;E<_;E++)u[v[E]]=b}else u[g]=b}return this.options.layoutId&&(u.pointerEvents=h===this?Mv(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(P2),this.root.sharedNodes.clear()}}}function UU(n){n.updateLayout()}function HU(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?Os(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=Ns(f);f.min=s[h].min,f.max=f.min+m}):ED(i,t.layoutBox,s)&&Os(h=>{const f=o?t.measuredBox[h]:t.layoutBox[h],m=Ns(s[h]);f.max=f.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=Ju();Gp(a,s,t.layoutBox);const c=Ju();o?Gp(c,n.applyTransform(r,!0),t.measuredBox):Gp(c,s,t.layoutBox);const u=!SD(a);let d=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const y=Nt();Wp(y,t.layoutBox,f.layoutBox);const g=Nt();Wp(g,s,m.layoutBox),_D(y,g)||(d=!0),h.options.layoutRoot&&(n.relativeTarget=g,n.relativeTargetOrigin=y,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:c,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function GU(n){gl.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function WU(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function qU(n){n.clearSnapshot()}function P2(n){n.clearMeasurements()}function KU(n){n.isLayoutDirty=!1}function XU(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function N2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function YU(n){n.resolveTargetDelta()}function QU(n){n.calcProjection()}function JU(n){n.resetRotation()}function ZU(n){n.removeLeadSnapshot()}function R2(n,e,t){n.translate=ft(e.translate,0,t),n.scale=ft(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function M2(n,e,t,s){n.min=ft(e.min,t.min,s),n.max=ft(e.max,t.max,s)}function e6(n,e,t,s){M2(n.x,e.x,t.x,s),M2(n.y,e.y,t.y,s)}function t6(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const n6={duration:.45,ease:[.4,0,.1,1]},j2=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),L2=j2("applewebkit/")&&!j2("chrome/")?Math.round:_t;function D2(n){n.min=L2(n.min),n.max=L2(n.max)}function s6(n){D2(n.x),D2(n.y)}function ED(n,e,t){return n==="position"||n==="preserve-aspect"&&!cA(E2(e),E2(t),.2)}const r6=AD({attachResizeListener:(n,e)=>mo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),DS={current:void 0},CD=AD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!DS.current){const n=new r6({});n.mount(window),n.setOptions({layoutScroll:!0}),DS.current=n}return DS.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),i6={pan:{Feature:wU},drag:{Feature:xU,ProjectionNode:CD,MeasureLayout:bD}},o6=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function a6(n){const e=o6.exec(n);if(!e)return[,];const[,t,s]=e;return[t,s]}function fA(n,e,t=1){const[s,r]=a6(n);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return lD(o)?parseFloat(o):o}else return nA(r)?fA(r,e,t+1):r}function l6(n,{...e},t){const s=n.current;if(!(s instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const i=r.get();if(!nA(i))return;const o=fA(i,s);o&&r.set(o)});for(const r in e){const i=e[r];if(!nA(i))continue;const o=fA(i,s);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=i))}return{target:e,transitionEnd:t}}const c6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),kD=n=>c6.has(n),u6=n=>Object.keys(n).some(kD),I2=n=>n===xu||n===oe,O2=(n,e)=>parseFloat(n.split(", ")[e]),F2=(n,e)=>(t,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return O2(r[1],e);{const i=s.match(/^matrix\((.+)\)$/);return i?O2(i[1],n):0}},d6=new Set(["x","y","z"]),h6=cy.filter(n=>!d6.has(n));function f6(n){const e=[];return h6.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Sf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:F2(4,13),y:F2(5,14)};Sf.translateX=Sf.x;Sf.translateY=Sf.y;const p6=(n,e,t)=>{const s=e.measureViewportBox(),r=e.current,i=getComputedStyle(r),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=Sf[u](s,i)}),e.render();const c=e.measureViewportBox();return t.forEach(u=>{const d=e.getValue(u);d&&d.jump(a[u]),n[u]=Sf[u](c,i)}),n},m6=(n,e,t={},s={})=>{e={...e},s={...s};const r=Object.keys(e).filter(kD);let i=[],o=!1;const a=[];if(r.forEach(c=>{const u=n.getValue(c);if(!n.hasValue(c))return;let d=t[c],h=qf(d);const f=e[c];let m;if(Vb(f)){const y=f.length,g=f[0]===null?1:0;d=f[g],h=qf(d);for(let w=g;w<y&&f[w]!==null;w++)m?bk(qf(f[w])===m):m=qf(f[w])}else m=qf(f);if(h!==m)if(I2(h)&&I2(m)){const y=u.get();typeof y=="string"&&u.set(parseFloat(y)),typeof f=="string"?e[c]=parseFloat(f):Array.isArray(f)&&m===oe&&(e[c]=f.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(d===0||f===0)?d===0?u.set(m.transform(d)):e[c]=h.transform(f):(o||(i=f6(n),o=!0),a.push(c),s[c]=s[c]!==void 0?s[c]:e[c],u.jump(f))}),a.length){const c=a.indexOf("height")>=0?window.pageYOffset:null,u=p6(e,n,a);return i.length&&i.forEach(([d,h])=>{n.getValue(d).set(h)}),n.render(),S1&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:e,transitionEnd:s}};function g6(n,e,t,s){return u6(e)?m6(n,e,t,s):{target:e,transitionEnd:s}}const y6=(n,e,t,s)=>{const r=l6(n,e,s);return e=r.target,s=r.transitionEnd,g6(n,e,t,s)},pA={current:null},TD={current:!1};function v6(){if(TD.current=!0,!!S1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>pA.current=n.matches;n.addListener(e),e()}else pA.current=!1}function b6(n,e,t){const{willChange:s}=e;for(const r in e){const i=e[r],o=t[r];if(ss(i))n.addValue(r,i),Gb(s)&&s.add(r);else if(ss(o))n.addValue(r,wf(i,{owner:n})),Gb(s)&&s.remove(r);else if(o!==i)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(i)}else{const a=n.getStaticValue(r);n.addValue(r,wf(a!==void 0?a:i,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const B2=new WeakMap,PD=Object.keys(mm),x6=PD.length,$2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],w6=uk.length;class S6{constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Je.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=A1(t),this.isVariantNode=fL(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{});for(const h in d){const f=d[h];a[h]!==void 0&&ss(f)&&(f.set(a[h],!1),Gb(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,B2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,s)=>this.bindToMotionValue(s,t)),TD.current||v6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:pA.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){B2.delete(this.current),this.projection&&this.projection.unmount(),Eo(this.notifyUpdate),Eo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const s=bu.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Je.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},s,r,i){let o,a;for(let c=0;c<x6;c++){const u=PD[c],{isEnabled:d,Feature:h,ProjectionNode:f,MeasureLayout:m}=mm[u];f&&(o=f),d(t)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(a=m))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:h,layoutScroll:f,layoutRoot:m}=t;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||h&&Yu(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<$2.length;s++){const r=$2[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=b6(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const t={};for(let s=0;s<w6;s++){const r=uk[s],i=this.props[r];(pm(i)||i===!1)&&(t[r]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=wf(t,{owner:this}),this.addValue(e,s)),s}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(t=vk(this.props,s))===null||t===void 0?void 0:t[e]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ss(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Tk),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class ND extends S6{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...s},{transformValues:r},i){let o=Bz(s,e||{},this);if(r&&(t&&(t=r(t)),s&&(s=r(s)),o&&(o=r(o))),i){Oz(this,s,o);const a=y6(this,s,o,t);t=a.transitionEnd,s=a.target}return{transition:e,transitionEnd:t,...s}}}function _6(n){return window.getComputedStyle(n)}class A6 extends ND{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(bu.has(t)){const s=_k(t);return s&&s.default||0}else{const s=_6(e),r=(yL(t)?s.getPropertyValue(t):s[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return yD(e,t)}build(e,t,s,r){fk(e,t,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return yk(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ss(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,s,r){_L(e,t,s,r)}}class E6 extends ND{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(bu.has(t)){const s=_k(t);return s&&s.default||0}return t=AL.has(t)?t:lk(t),e.getAttribute(t)}measureInstanceViewportBox(){return Nt()}scrapeMotionValuesFromProps(e,t){return CL(e,t)}build(e,t,s,r){mk(e,t,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,s,r){EL(e,t,s,r)}mount(e){this.isSVGTag=gk(e.tagName),super.mount(e)}}const C6=(n,e)=>hk(n)?new E6(e,{enableHardwareAcceleration:!1}):new A6(e,{enableHardwareAcceleration:!0}),k6={layout:{ProjectionNode:CD,MeasureLayout:bD}},T6={...eU,...xV,...i6,...k6},J=P$((n,e)=>aV(n,e,T6,C6));function RD(){const n=A.useRef(!1);return ak(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function P6(){const n=RD(),[e,t]=A.useState(0),s=A.useCallback(()=>{n.current&&t(e+1)},[e]);return[A.useCallback(()=>Je.postRender(s),[s]),e]}class N6 extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function R6({children:n,isPresent:e}){const t=A.useId(),s=A.useRef(null),r=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:c}=r.current;if(e||!s.current||!i||!o)return;s.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),A.createElement(N6,{isPresent:e,childRef:s,sizeRef:r},A.cloneElement(n,{ref:s}))}const IS=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o})=>{const a=kL(M6),c=A.useId(),u=A.useMemo(()=>({id:c,initial:e,isPresent:t,custom:r,onExitComplete:d=>{a.set(d,!0);for(const h of a.values())if(!h)return;s&&s()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[t]);return A.useMemo(()=>{a.forEach((d,h)=>a.set(h,!1))},[t]),A.useEffect(()=>{!t&&!a.size&&s&&s()},[t]),o==="popLayout"&&(n=A.createElement(R6,{isPresent:t},n)),A.createElement(w1.Provider,{value:u},n)};function M6(){return new Map}function j6(n){return A.useEffect(()=>()=>n(),[])}const yl=n=>n.key||"";function L6(n,e){n.forEach(t=>{const s=yl(t);e.set(s,t)})}function D6(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const bo=({children:n,custom:e,initial:t=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=A.useContext(dk).forceRender||P6()[0],c=RD(),u=D6(n);let d=u;const h=A.useRef(new Map).current,f=A.useRef(d),m=A.useRef(new Map).current,y=A.useRef(!0);if(ak(()=>{y.current=!1,L6(u,m),f.current=d}),j6(()=>{y.current=!0,m.clear(),h.clear()}),y.current)return A.createElement(A.Fragment,null,d.map(b=>A.createElement(IS,{key:yl(b),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:o},b)));d=[...d];const g=f.current.map(yl),w=u.map(yl),v=g.length;for(let b=0;b<v;b++){const _=g[b];w.indexOf(_)===-1&&!h.has(_)&&h.set(_,void 0)}return o==="wait"&&h.size&&(d=[]),h.forEach((b,_)=>{if(w.indexOf(_)!==-1)return;const E=m.get(_);if(!E)return;const k=g.indexOf(_);let T=b;if(!T){const P=()=>{h.delete(_);const N=Array.from(m.keys()).filter(M=>!w.includes(M));if(N.forEach(M=>m.delete(M)),f.current=u.filter(M=>{const L=yl(M);return L===_||N.includes(L)}),!h.size){if(c.current===!1)return;a(),s&&s()}};T=A.createElement(IS,{key:yl(E),isPresent:!1,onExitComplete:P,custom:e,presenceAffectsLayout:i,mode:o},E),h.set(_,T)}d.splice(k,0,T)}),d=d.map(b=>{const _=b.key;return h.has(_)?b:A.createElement(IS,{key:yl(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),A.createElement(A.Fragment,null,h.size?d:d.map(b=>A.cloneElement(b)))},I6=Gj("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ae=A.forwardRef(({className:n,variant:e,size:t,asChild:s=!1,...r},i)=>{const o=s?EB:"button";return p.jsx(o,{className:Rr(I6({variant:e,size:t,className:n})),ref:i,...r})});Ae.displayName="Button";const O6="modulepreload",F6=function(n){return"/"+n},V2={},Po=function(e,t,s){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=F6(i),i in V2)return;V2[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let d=r.length-1;d>=0;d--){const h=r[d];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":O6,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},B6=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Po(()=>Promise.resolve().then(()=>py),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)};class Pk extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class z2 extends Pk{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class U2 extends Pk{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class H2 extends Pk{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mA;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(mA||(mA={}));var $6=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class V6{constructor(e,{headers:t={},customFetch:s,region:r=mA.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=B6(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var s;return $6(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o,signal:a}=t;let c={},{region:u}=t;u||(u=this.region);const d=new URL(`${this.url}/${e}`);u&&u!=="any"&&(c["x-region"]=u,d.searchParams.set("forceFunctionRegion",u));let h;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(c["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(c["Content-Type"]="application/json",h=JSON.stringify(o)));const f=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),r),body:h,signal:a}).catch(w=>{throw w.name==="AbortError"?w:new z2(w)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new U2(f);if(!f.ok)throw new H2(f);let y=((s=f.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),g;return y==="application/json"?g=yield f.json():y==="application/octet-stream"?g=yield f.blob():y==="text/event-stream"?g=f:y==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(r){return r instanceof Error&&r.name==="AbortError"?{data:null,error:new z2(r)}:{data:null,error:r,response:r instanceof H2||r instanceof U2?r.context:void 0}}})}}var Jn={},Nk={},T1={},fy={},P1={},N1={},z6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_f=z6();const U6=_f.fetch,H6=_f.fetch.bind(_f),G6=_f.Headers,W6=_f.Request,q6=_f.Response,py=Object.freeze(Object.defineProperty({__proto__:null,Headers:G6,Request:W6,Response:q6,default:H6,fetch:U6},Symbol.toStringTag,{value:"Module"})),K6=QF(py);var R1={};Object.defineProperty(R1,"__esModule",{value:!0});let X6=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};R1.default=X6;var MD=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(N1,"__esModule",{value:!0});const Y6=MD(K6),Q6=MD(R1);let J6=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(s=e.isMaybeSingle)!==null&&s!==void 0?s:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Y6.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const s=this.fetch;let r=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,c,u;let d=null,h=null,f=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const b=await i.text();b===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?h=b:h=JSON.parse(b))}const w=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),v=(c=i.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");w&&v&&v.length>1&&(f=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,f=null,m=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const w=await i.text();try{d=JSON.parse(w),Array.isArray(d)&&i.status===404&&(h=[],d=null,m=200,y="OK")}catch{i.status===404&&w===""?(m=204,y="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,m=200,y="OK"),d&&this.shouldThrowOnError)throw new Q6.default(d)}return{error:d,data:h,count:f,status:m,statusText:y}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,a,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};N1.default=J6;var Z6=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(P1,"__esModule",{value:!0});const e8=Z6(N1);let t8=class extends e8.default{select(e){let t=!1;const s=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var a;const c=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};P1.default=t8;var n8=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(fy,"__esModule",{value:!0});const s8=n8(P1);let r8=class extends s8.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=s===void 0?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};fy.default=r8;var i8=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(T1,"__esModule",{value:!0});const Xf=i8(fy);let o8=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new Xf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;const i="POST";if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){const a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new Xf.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Xf.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var s;const r="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new Xf.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:e}={}){var t;const s="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new Xf.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};T1.default=o8;var jD=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nk,"__esModule",{value:!0});const a8=jD(T1),l8=jD(fy);let c8=class LD{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new a8.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new LD(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var o;let a;const c=new URL(`${this.url}/rpc/${e}`);let u;s||r?(a=s?"HEAD":"GET",Object.entries(t).filter(([h,f])=>f!==void 0).map(([h,f])=>[h,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([h,f])=>{c.searchParams.append(h,f)})):(a="POST",u=t);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new l8.default({method:a,url:c,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Nk.default=c8;var Rf=An&&An.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.PostgrestError=Jn.PostgrestBuilder=Jn.PostgrestTransformBuilder=Jn.PostgrestFilterBuilder=Jn.PostgrestQueryBuilder=Jn.PostgrestClient=void 0;const DD=Rf(Nk);Jn.PostgrestClient=DD.default;const ID=Rf(T1);Jn.PostgrestQueryBuilder=ID.default;const OD=Rf(fy);Jn.PostgrestFilterBuilder=OD.default;const FD=Rf(P1);Jn.PostgrestTransformBuilder=FD.default;const BD=Rf(N1);Jn.PostgrestBuilder=BD.default;const $D=Rf(R1);Jn.PostgrestError=$D.default;var u8=Jn.default={PostgrestClient:DD.default,PostgrestQueryBuilder:ID.default,PostgrestFilterBuilder:OD.default,PostgrestTransformBuilder:FD.default,PostgrestBuilder:BD.default,PostgrestError:$D.default};const{PostgrestClient:d8,PostgrestQueryBuilder:v7,PostgrestFilterBuilder:b7,PostgrestTransformBuilder:x7,PostgrestBuilder:w7,PostgrestError:S7}=u8;class h8{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,r=parseInt(s.replace(/^v/,"").split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const f8="2.15.6",p8=`realtime-js/${f8}`,m8="1.0.0",gA=1e4,g8=1e3,y8=100;var qp;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(qp||(qp={}));var Lt;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Lt||(Lt={}));var Er;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Er||(Er={}));var yA;(function(n){n.websocket="websocket"})(yA||(yA={}));var wl;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(wl||(wl={}));class v8{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=s.decode(e.slice(o,o+r));o=o+r;const c=s.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(s.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:u}}}class VD{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(qe||(qe={}));const G2=(n,e,t={})=>{var s;const r=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=b8(o,n,e,r),i),{}):{}},b8=(n,e,t,s)=>{const r=e.find(a=>a.name===n),i=r==null?void 0:r.type,o=t[n];return i&&!s.includes(i)?zD(i,o):vA(o)},zD=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return _8(e,t)}switch(n){case qe.bool:return x8(e);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return w8(e);case qe.json:case qe.jsonb:return S8(e);case qe.timestamp:return A8(e);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return vA(e);default:return vA(e)}},vA=n=>n,x8=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},w8=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},S8=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},_8=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,s=n[t];if(n[0]==="{"&&s==="}"){let i;const o=n.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>zD(e,a))}return n},A8=n=>typeof n=="string"?n.replace(" ","T"):n,UD=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class OS{constructor(e,t,s={},r=gA){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var W2;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(W2||(W2={}));class Kp{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kp.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=Kp.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(s.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Kp.syncDiff(this.state,r,i,o),a())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),m=h.map(w=>w.presence_ref),y=d.filter(w=>m.indexOf(w.presence_ref)<0),g=h.filter(w=>f.indexOf(w.presence_ref)<0);y.length>0&&(a[u]=y),g.length>0&&(c[u]=g)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:c},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(a,c)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(c),d.length>0){const h=e[a].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...f)}s(a,d,c)}),this.map(o,(a,c)=>{let u=e[a];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=u,r(a,u,c),u.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return"metas"in r?t[s]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[s]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q2;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(q2||(q2={}));var Xp;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Xp||(Xp={}));var Ai;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ai||(Ai={}));class Rk{constructor(e,t={config:{}},s){this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Lt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new OS(this,Er.join,this.params,this.timeout),this.rejoinTimer=new VD(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Lt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Lt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Lt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Er.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new Kp(this),this.broadcastEndpointURL=UD(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Lt.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,u=(r=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(m=>m.filter))!==null&&r!==void 0?r:[],d=!!this.bindings[Xp.PRESENCE]&&this.bindings[Xp.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Ai.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ai.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(Ai.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,w=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,v=[];for(let b=0;b<w;b++){const _=g[b],{filter:{event:E,schema:k,table:T,filter:P}}=_,N=m&&m[b];if(N&&N.event===E&&N.schema===k&&N.table===T&&N.filter===P)v.push(Object.assign(Object.assign({},_),{id:N.id}));else{this.unsubscribe(),this.state=Lt.errored,e==null||e(Ai.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,e&&e(Ai.SUBSCRIBED);return}}).receive("error",m=>{this.state=Lt.errored,e==null||e(Ai.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ai.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Lt.joined&&e===Xp.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Lt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Er.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new OS(this,Er.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s==null||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Lt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),o}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new OS(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>y8){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:u,join:d}=Er;if(s&&[a,c,u,d].indexOf(o)>=0&&s!==this._joinRef())return;let f=this._onMessage(o,t,s);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var y,g,w;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((w=(g=m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(m=>m.callback(f,s)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,g,w,v,b,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,k=(y=m.filter)===null||y===void 0?void 0:y.event;return E&&((g=t.ids)===null||g===void 0?void 0:g.includes(E))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((w=t.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const E=(b=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((_=t==null?void 0:t.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:g,table:w,commit_timestamp:v,type:b,errors:_}=y;f=Object.assign(Object.assign({},{schema:g,table:w,commit_timestamp:v,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(y))}m.callback(f,s)})}_isClosed(){return this.state===Lt.closed}_isJoined(){return this.state===Lt.joined}_isJoining(){return this.state===Lt.joining}_isLeaving(){return this.state===Lt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&Rk.isEqual(r.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Er.close,{},e)}_onError(e){this._on(Er.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Lt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=G2(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=G2(e.columns,e.old_record)),t}}const FS=()=>{},Jy={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},E8=[1e3,2e3,5e3,1e4],C8=1e4,k8=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class T8{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gA,this.transport=null,this.heartbeatIntervalMs=Jy.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=FS,this.ref=0,this.reconnectTimer=null,this.logger=FS,this.conn=null,this.sendBuffer=[],this.serializer=new v8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=r=>{let i;return r?i=r:typeof fetch>"u"?i=(...o)=>Po(()=>Promise.resolve().then(()=>py),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((s=t==null?void 0:t.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${yA.websocket}`,this.httpEndpoint=UD(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=h8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:m8}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case qp.connecting:return wl.Connecting;case qp.open:return wl.Open;case qp.closing:return wl.Closing;default:return wl.Closed}}isConnected(){return this.connectionState()===wl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===s);if(r)return r;{const i=new Rk(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(g8,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Jy.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:r,payload:i,ref:o}=t,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${s} ${r} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(s)).forEach(u=>u._trigger(r,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Er.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${s}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([k8],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const r={access_token:t,version:p8};t&&s.updateJoinPayload(r),s.joinedOnce&&s._isJoined()&&s._push(Er.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new VD(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Jy.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,o,a,c,u,d;if(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e==null?void 0:e.timeout)!==null&&s!==void 0?s:gA,this.heartbeatIntervalMs=(r=e==null?void 0:e.heartbeatIntervalMs)!==null&&r!==void 0?r:Jy.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:FS,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:h=>E8[h-1]||C8,this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(h,f)=>f(JSON.stringify(h)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Mk extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ft(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class P8 extends Mk{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bA extends Mk{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var N8=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const HD=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>Po(()=>Promise.resolve().then(()=>py),void 0).then(({default:s})=>s(...t)):e=fetch,(...t)=>e(...t)},R8=()=>N8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Po(()=>Promise.resolve().then(()=>py),void 0)).Response:Response}),xA=n=>{if(Array.isArray(n))return n.map(t=>xA(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,s])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=xA(s)}),e},M8=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var wu=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const BS=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),j8=(n,e,t)=>wu(void 0,void 0,void 0,function*(){const s=yield R8();n instanceof s&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{const i=n.status||500,o=(r==null?void 0:r.statusCode)||i+"";e(new P8(BS(r),i,o))}).catch(r=>{e(new bA(BS(r),r))}):e(new bA(BS(n),n))}),L8=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||!s?r:(M8(s)?(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(s)):r.body=s,e!=null&&e.duplex&&(r.duplex=e.duplex),Object.assign(Object.assign({},r),t))};function my(n,e,t,s,r,i){return wu(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,L8(e,s,r,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>j8(c,a,s))})})}function qb(n,e,t,s){return wu(this,void 0,void 0,function*(){return my(n,"GET",e,t,s)})}function Vr(n,e,t,s,r){return wu(this,void 0,void 0,function*(){return my(n,"POST",e,s,r,t)})}function wA(n,e,t,s,r){return wu(this,void 0,void 0,function*(){return my(n,"PUT",e,s,r,t)})}function D8(n,e,t,s){return wu(this,void 0,void 0,function*(){return my(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function GD(n,e,t,s,r){return wu(this,void 0,void 0,function*(){return my(n,"DELETE",e,s,r,t)})}var Cn=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const I8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},K2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class O8{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=HD(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return Cn(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},K2),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield(e=="PUT"?wA:Vr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ft(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Cn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:K2.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield wA(this.fetch,a.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ft(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Cn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield Vr(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Mk("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}update(e,t,s){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Cn(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Cn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Vr(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const o=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Cn(this,void 0,void 0,function*(){try{const r=yield Vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}download(e,t){return Cn(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield qb(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ft(a))return{data:null,error:a};throw a}})}info(e){return Cn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield qb(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xA(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}exists(e){return Cn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield D8(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s)&&s instanceof bA){const r=s.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${s}${u}`)}}}remove(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield GD(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}list(e,t,s){return Cn(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},I8),t),{prefix:e||""});return{data:yield Vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ft(r))return{data:null,error:r};throw r}})}listV2(e,t){return Cn(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Vr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const F8="2.12.1",B8={"X-Client-Info":`storage-js/${F8}`};var Cu=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};class $8{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},B8),t),this.fetch=HD(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Cu(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Ft(e))return{data:null,error:e};throw e}})}getBucket(e){return Cu(this,void 0,void 0,function*(){try{return{data:yield qb(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Cu(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Cu(this,void 0,void 0,function*(){try{return{data:yield wA(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ft(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Cu(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Cu(this,void 0,void 0,function*(){try{return{data:yield GD(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ft(t))return{data:null,error:t};throw t}})}}class V8 extends $8{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new O8(this.url,this.headers,e,this.fetch)}}const z8="2.30.0",U8={"X-Client-Info":`supabase-js/${z8}`};var SA={exports:{}};(function(n,e){var t=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof An<"u"&&An,s=function(){function i(){this.fetch=!1,this.DOMException=t.DOMException}return i.prototype=t,new i}();(function(i){(function(o){var a=typeof i<"u"&&i||typeof self<"u"&&self||typeof An<"u"&&An||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function u(R){return R&&DataView.prototype.isPrototypeOf(R)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(R){return R&&d.indexOf(Object.prototype.toString.call(R))>-1};function f(R){if(typeof R!="string"&&(R=String(R)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(R)||R==="")throw new TypeError('Invalid character in header field name: "'+R+'"');return R.toLowerCase()}function m(R){return typeof R!="string"&&(R=String(R)),R}function y(R){var j={next:function(){var O=R.shift();return{done:O===void 0,value:O}}};return c.iterable&&(j[Symbol.iterator]=function(){return j}),j}function g(R){this.map={},R instanceof g?R.forEach(function(j,O){this.append(O,j)},this):Array.isArray(R)?R.forEach(function(j){if(j.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+j.length);this.append(j[0],j[1])},this):R&&Object.getOwnPropertyNames(R).forEach(function(j){this.append(j,R[j])},this)}g.prototype.append=function(R,j){R=f(R),j=m(j);var O=this.map[R];this.map[R]=O?O+", "+j:j},g.prototype.delete=function(R){delete this.map[f(R)]},g.prototype.get=function(R){return R=f(R),this.has(R)?this.map[R]:null},g.prototype.has=function(R){return this.map.hasOwnProperty(f(R))},g.prototype.set=function(R,j){this.map[f(R)]=m(j)},g.prototype.forEach=function(R,j){for(var O in this.map)this.map.hasOwnProperty(O)&&R.call(j,this.map[O],O,this)},g.prototype.keys=function(){var R=[];return this.forEach(function(j,O){R.push(O)}),y(R)},g.prototype.values=function(){var R=[];return this.forEach(function(j){R.push(j)}),y(R)},g.prototype.entries=function(){var R=[];return this.forEach(function(j,O){R.push([O,j])}),y(R)},c.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function w(R){if(!R._noBody){if(R.bodyUsed)return Promise.reject(new TypeError("Already read"));R.bodyUsed=!0}}function v(R){return new Promise(function(j,O){R.onload=function(){j(R.result)},R.onerror=function(){O(R.error)}})}function b(R){var j=new FileReader,O=v(j);return j.readAsArrayBuffer(R),O}function _(R){var j=new FileReader,O=v(j),B=/charset=([A-Za-z0-9_-]+)/.exec(R.type),$=B?B[1]:"utf-8";return j.readAsText(R,$),O}function E(R){for(var j=new Uint8Array(R),O=new Array(j.length),B=0;B<j.length;B++)O[B]=String.fromCharCode(j[B]);return O.join("")}function k(R){if(R.slice)return R.slice(0);var j=new Uint8Array(R.byteLength);return j.set(new Uint8Array(R)),j.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(R){this.bodyUsed=this.bodyUsed,this._bodyInit=R,R?typeof R=="string"?this._bodyText=R:c.blob&&Blob.prototype.isPrototypeOf(R)?this._bodyBlob=R:c.formData&&FormData.prototype.isPrototypeOf(R)?this._bodyFormData=R:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)?this._bodyText=R.toString():c.arrayBuffer&&c.blob&&u(R)?(this._bodyArrayBuffer=k(R.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(R)||h(R))?this._bodyArrayBuffer=k(R):this._bodyText=R=Object.prototype.toString.call(R):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof R=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(R)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var R=w(this);if(R)return R;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var R=w(this);return R||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(b);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var R=w(this);if(R)return R;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(L)}),this.json=function(){return this.text().then(JSON.parse)},this}var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function N(R){var j=R.toUpperCase();return P.indexOf(j)>-1?j:R}function M(R,j){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');j=j||{};var O=j.body;if(R instanceof M){if(R.bodyUsed)throw new TypeError("Already read");this.url=R.url,this.credentials=R.credentials,j.headers||(this.headers=new g(R.headers)),this.method=R.method,this.mode=R.mode,this.signal=R.signal,!O&&R._bodyInit!=null&&(O=R._bodyInit,R.bodyUsed=!0)}else this.url=String(R);if(this.credentials=j.credentials||this.credentials||"same-origin",(j.headers||!this.headers)&&(this.headers=new g(j.headers)),this.method=N(j.method||this.method||"GET"),this.mode=j.mode||this.mode||null,this.signal=j.signal||this.signal||function(){if("AbortController"in a){var V=new AbortController;return V.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&O)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(O),(this.method==="GET"||this.method==="HEAD")&&(j.cache==="no-store"||j.cache==="no-cache")){var B=/([?&])_=[^&]*/;if(B.test(this.url))this.url=this.url.replace(B,"$1_="+new Date().getTime());else{var $=/\?/;this.url+=($.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})};function L(R){var j=new FormData;return R.trim().split("&").forEach(function(O){if(O){var B=O.split("="),$=B.shift().replace(/\+/g," "),V=B.join("=").replace(/\+/g," ");j.append(decodeURIComponent($),decodeURIComponent(V))}}),j}function F(R){var j=new g,O=R.replace(/\r?\n[\t ]+/g," ");return O.split("\r").map(function(B){return B.indexOf(`
`)===0?B.substr(1,B.length):B}).forEach(function(B){var $=B.split(":"),V=$.shift().trim();if(V){var W=$.join(":").trim();try{j.append(V,W)}catch(q){console.warn("Response "+q.message)}}}),j}T.call(M.prototype);function D(R,j){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(j||(j={}),this.type="default",this.status=j.status===void 0?200:j.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=j.statusText===void 0?"":""+j.statusText,this.headers=new g(j.headers),this.url=j.url||"",this._initBody(R)}T.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},D.error=function(){var R=new D(null,{status:200,statusText:""});return R.ok=!1,R.status=0,R.type="error",R};var z=[301,302,303,307,308];D.redirect=function(R,j){if(z.indexOf(j)===-1)throw new RangeError("Invalid status code");return new D(null,{status:j,headers:{location:R}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(j,O){this.message=j,this.name=O;var B=Error(j);this.stack=B.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function I(R,j){return new Promise(function(O,B){var $=new M(R,j);if($.signal&&$.signal.aborted)return B(new o.DOMException("Aborted","AbortError"));var V=new XMLHttpRequest;function W(){V.abort()}V.onload=function(){var se={statusText:V.statusText,headers:F(V.getAllResponseHeaders()||"")};$.url.indexOf("file://")===0&&(V.status<200||V.status>599)?se.status=200:se.status=V.status,se.url="responseURL"in V?V.responseURL:se.headers.get("X-Request-URL");var pe="response"in V?V.response:V.responseText;setTimeout(function(){O(new D(pe,se))},0)},V.onerror=function(){setTimeout(function(){B(new TypeError("Network request failed"))},0)},V.ontimeout=function(){setTimeout(function(){B(new TypeError("Network request timed out"))},0)},V.onabort=function(){setTimeout(function(){B(new o.DOMException("Aborted","AbortError"))},0)};function q(se){try{return se===""&&a.location.href?a.location.href:se}catch{return se}}if(V.open($.method,q($.url),!0),$.credentials==="include"?V.withCredentials=!0:$.credentials==="omit"&&(V.withCredentials=!1),"responseType"in V&&(c.blob?V.responseType="blob":c.arrayBuffer&&(V.responseType="arraybuffer")),j&&typeof j.headers=="object"&&!(j.headers instanceof g||a.Headers&&j.headers instanceof a.Headers)){var K=[];Object.getOwnPropertyNames(j.headers).forEach(function(se){K.push(f(se)),V.setRequestHeader(se,m(j.headers[se]))}),$.headers.forEach(function(se,pe){K.indexOf(pe)===-1&&V.setRequestHeader(pe,se)})}else $.headers.forEach(function(se,pe){V.setRequestHeader(pe,se)});$.signal&&($.signal.addEventListener("abort",W),V.onreadystatechange=function(){V.readyState===4&&$.signal.removeEventListener("abort",W)}),V.send(typeof $._bodyInit>"u"?null:$._bodyInit)})}return I.polyfill=!0,a.fetch||(a.fetch=I,a.Headers=g,a.Request=M,a.Response=D),o.Headers=g,o.Request=M,o.Response=D,o.fetch=I,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(s),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var r=t.fetch?t:s;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,n.exports=e})(SA,SA.exports);var jk=SA.exports;const WD=Qw(jk),H8=sR({__proto__:null,default:WD},[jk]);var G8=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const W8=n=>{let e;return n?e=n:typeof fetch>"u"?e=WD:e=fetch,(...t)=>e(...t)},q8=()=>typeof Headers>"u"?jk.Headers:Headers,K8=(n,e,t)=>{const s=W8(t),r=q8();return(i,o)=>G8(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:n;let u=new r(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",n),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},o),{headers:u}))})};function X8(n){return n.replace(/\/$/,"")}function Y8(n,e){const{db:t,auth:s,realtime:r,global:i}=n,{db:o,auth:a,realtime:c,global:u}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},c),r),global:Object.assign(Object.assign({},u),i)}}function Q8(n){return Math.round(Date.now()/1e3)+n}function J8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const bi=()=>typeof document<"u",cl={tested:!1,writable:!1},Lv=()=>{if(!bi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(cl.tested)return cl.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),cl.tested=!0,cl.writable=!0}catch{cl.tested=!0,cl.writable=!1}return cl.writable};function $n(n,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),n=n.replace(/[\[\]]/g,"\\$&");const s=new RegExp("[?&#]"+n+"(=([^&#]*)|&|#|$)"),r=s.exec(e);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const qD=n=>{let e;return n?e=n:typeof fetch>"u"?e=async(...t)=>await(await Po(()=>Promise.resolve().then(()=>H8),void 0)).fetch(...t):e=fetch,(...t)=>e(...t)},Z8=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Yf=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Zy=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},$S=async(n,e)=>{await n.removeItem(e)};function eH(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",s,r,i,o,a,c,u,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=e.indexOf(n.charAt(d++)),a=e.indexOf(n.charAt(d++)),c=e.indexOf(n.charAt(d++)),u=e.indexOf(n.charAt(d++)),s=o<<2|a>>4,r=(a&15)<<4|c>>2,i=(c&3)<<6|u,t=t+String.fromCharCode(s),c!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class M1{constructor(){this.promise=new M1.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}M1.promiseConstructor=Promise;function X2(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(eH(s))}function tH(n){return new Promise(e=>{setTimeout(()=>e(null),n)})}function nH(n,e){return new Promise((s,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await n(i);if(!e(i,null,o)){s(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function sH(n){return("0"+n.toString(16)).substr(-2)}function ev(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*s));return r}return crypto.getRandomValues(e),Array.from(e,sH).join("")}async function rH(n){const t=new TextEncoder().encode(n),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function iH(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function tv(n){if(typeof crypto>"u")return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const e=await rH(n);return iH(e)}const oH="__stack_guard__",aH="__",lH=/__stack_guard__([a-zA-Z0-9_-]+)__/;let Y2=!1,Lk;function _A(n){var e,t;Lk();let s;try{throw new Error}catch(i){s=i}const r=(t=(e=s.stack)===null||e===void 0?void 0:e.split(`
`))!==null&&t!==void 0?t:[];for(let i=0;i<r.length;i+=1){const a=r[i].match(lH);if(a&&a[1]===n)return!0}return!1}async function AA(n,e){await Lk();const t=`${oH}${n}${aH}`;return await{[t]:async()=>await e()}[t]()}Lk=async()=>{Y2||(Y2=!0,await AA("ENV_CHECK",async()=>{const n=_A("ENV_CHECK");return n||console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces."),n}))};class Dk extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Re(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class cH extends Dk{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function uH(n){return Re(n)&&n.name==="AuthApiError"}class KD extends Dk{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Mf extends Dk{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ku extends Mf{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class VS extends Mf{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class nv extends Mf{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class vi extends Mf{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class zS extends Mf{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class EA extends Mf{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Q2(n){return Re(n)&&n.name==="AuthRetryableFetchError"}var dH=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};const up=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),hH=[502,503,504];async function J2(n){if(!Z8(n))throw new EA(up(n),0);if(hH.includes(n.status))throw new EA(up(n),n.status);let e;try{e=await n.json()}catch(t){throw new KD(up(t),t)}throw new cH(up(e),n.status||500)}const fH=(n,e,t,s)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),t))};async function je(n,e,t,s){var r;const i=Object.assign({},s==null?void 0:s.headers);s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const o=(r=s==null?void 0:s.query)!==null&&r!==void 0?r:{};s!=null&&s.redirectTo&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await pH(n,e,t+a,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function pH(n,e,t,s,r,i){const o=fH(e,s,r,i);let a;try{a=await n(t,o)}catch(c){throw console.error(c),new EA(up(c),0)}if(a.ok||await J2(a),s!=null&&s.noResolveJson)return a;try{return await a.json()}catch(c){await J2(c)}}function Mo(n){var e;let t=null;vH(n)&&(t=Object.assign({},n),t.expires_at=Q8(n.expires_in));const s=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:s},error:null}}function Sl(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function mH(n){return{data:n,error:null}}function gH(n){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i}=n,o=dH(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:s,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function yH(n){return n}function vH(n){return n.access_token&&n.refresh_token&&n.expires_in}var bH=globalThis&&globalThis.__rest||function(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t};class xH{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=qD(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Re(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Sl})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=bH(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=s==null?void 0:s.newEmail,delete r.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:gH,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Re(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Sl})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,o,a,c;try{const u={nextPage:null,lastPage:0,total:0},d=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:yH});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(y.split(";")[1].split("=")[1]);u[`${w}Page`]=g}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Re(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await je(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Sl})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Sl})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Sl})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await je(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:s}}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Re(t))return{data:null,error:t};throw t}}}const wH="2.43.1",SH="http://localhost:9999",_H="supabase.auth.token",AH={"X-Client-Info":`gotrue-js/${wH}`},Z2=10,eN={getItem:n=>Lv()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Lv()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Lv()&&globalThis.localStorage.removeItem(n)}};function EH(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}EH();const CH={url:SH,storageKey:_H,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:AH,flowType:"implicit",debug:!1},sv=30*1e3,tN=3;class ym{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=ym.nextInstanceID,ym.nextInstanceID+=1,this.instanceID>0&&bi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},CH),e);if(this.logDebugMessages=s.debug,this.inMemorySession=null,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.persistSession=s.persistSession,this.storage=s.storage||eN,this.admin=new xH({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=qD(s.fetch),this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===eN&&!Lv()&&console.warn(`No storage option exists to persist the session, which may result in unexpected behavior when using auth.
        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning.`),bi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async r=>{this._debug("received broadcast notification from other tab or client",r),await this._notifyAllSubscribers(r.data.event,r.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} ${new Date().toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=AA("_initialize",async()=>{try{const e=bi()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromUrl(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),await this._removeSession(),{error:s};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Re(e)?{error:e}:{error:new KD("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,s,r;try{await this._removeSession();let i;if("email"in e){const{email:d,password:h,options:f}=e;let m=null,y=null;if(this.flowType==="pkce"){const g=ev();await Yf(this.storage,`${this.storageKey}-code-verifier`,g),m=await tv(g),y=g===m?"plain":"s256"}i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(t=f==null?void 0:f.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:y},xform:Mo})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Mo})}else throw new nv("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Re(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{await this._removeSession();let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Mo})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Mo})}else throw new nv("You must provide either an email or phone number and a password");const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new VS}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:{user:s.user,session:s.session},error:r})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await Zy(this.storage,`${this.storageKey}-code-verifier`),{data:s,error:r}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Mo});return await $S(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new VS}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:r})}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:i,nonce:o}=e,a=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Mo}),{data:c,error:u}=a;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new VS}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,o;try{if(await this._removeSession(),"email"in e){const{email:a,options:c}=e;let u=null,d=null;if(this.flowType==="pkce"){const f=ev();await Yf(this.storage,`${this.storageKey}-code-verifier`,f),u=await tv(f),d=f===u?"plain":"s256"}const{error:h}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c==null?void 0:c.data)!==null&&t!==void 0?t:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:u,error:d}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new nv("You must provide either an email or phone number.")}catch(a){if(Re(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,s;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();const{data:r,error:i}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,xform:Mo});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const o=r.session,a=r.user;return o!=null&&o.access_token&&(await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(r){if(Re(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{return await this._removeSession(),await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:mH})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new ku;const{error:r}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Re(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:o}=await je(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:s,type:r,options:i}=e,{data:o,error:a}=await je(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new nv("You must provide either an email or phone number and a type")}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await AA("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!_A("_useSession"))throw new Error("Please use #_useSession()");_A("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const i=await Zy(this.storage,this.storageKey);this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var s,r;if(!e){const{data:i,error:o}=t;if(o)throw o;e=(r=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&r!==void 0?r:void 0}return await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Sl})})}catch(t){if(Re(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new ku;const o=r.session,{data:a,error:c}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:e,jwt:o.access_token,xform:Sl});if(c)throw c;return o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(s){if(Re(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return X2(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ku;const t=Date.now()/1e3;let s=t,r=!0,i=null;const o=X2(e.access_token);if(o.exp&&(s=o.exp,r=s<=t),r){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this.getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Re(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(s=o.session)!==null&&s!==void 0?s:void 0}if(!(e!=null&&e.refresh_token))throw new ku;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Re(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!bi())throw new vi("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new vi("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new zS("Not a valid PKCE flow url.");if(e){const w=$n("code");if(!w)throw new zS("No code detected.");const{data:v,error:b}=await this.exchangeCodeForSession(w);if(b)throw b;if(!v.session)throw new zS("No session detected.");let _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:v.session,redirectType:null},error:null}}const t=$n("error_description");if(t){const w=$n("error_code");if(!w)throw new vi("No error_code detected.");const v=$n("error");throw v?new vi(t,{error:v,code:w}):new vi("No error detected.")}const s=$n("provider_token"),r=$n("provider_refresh_token"),i=$n("access_token");if(!i)throw new vi("No access_token detected.");const o=$n("expires_in");if(!o)throw new vi("No expires_in detected.");const a=$n("refresh_token");if(!a)throw new vi("No refresh_token detected.");const c=$n("token_type");if(!c)throw new vi("No token_type detected.");const d=Math.round(Date.now()/1e3)+parseInt(o),{data:h,error:f}=await this.getUser(i);if(f)throw f;const m=h.user,y={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:parseInt(o),expires_at:d,refresh_token:a,token_type:c,user:m},g=$n("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:y,redirectType:g},error:null}}catch(t){if(Re(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return bi()&&(!!$n("access_token")||!!$n("error_description"))}async _isPKCEFlow(){const e=await Zy(this.storage,`${this.storageKey}-code-verifier`);return!!$n("code")&&!!e}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const o=(s=r.session)===null||s===void 0?void 0:s.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(uH(a)&&(a.status===404||a.status===401)))return{error:a}}return e!=="others"&&(await this._removeSession(),await $S(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t=J8(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),this._emitInitialSession(t),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:i},error:o}=t;if(o)throw o;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if(this.flowType==="pkce"){const i=ev();await Yf(this.storage,`${this.storageKey}-code-verifier`,i),s=await tv(i),r=i===s?"plain":"s256"}try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Re(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await nH(async r=>(await tH(r*200),this._debug(t,"refreshing attempt",r),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mo})),(r,i,o)=>o&&o.error&&Q2(o.error)&&Date.now()+(r+1)*200-s<sv)}catch(s){if(this._debug(t,"error",s),Re(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),bi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await Zy(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s)){this._debug(t,"session is not valid"),s!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=s.expires_at)!==null&&e!==void 0?e:1/0)<r+Z2;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Z2}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Q2(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(t,"error",s),console.error(s);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new ku;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new M1;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new ku;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(r,"error",i),Re(i)){const o={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Yf(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await $S(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),sv);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((s.expires_at*1e3-e)/sv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${sv}ms, refresh threshold is ${tN} ticks`),r<=tN&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const s=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const r=ev();await Yf(this.storage,`${this.storageKey}-code-verifier`,r);const i=await tv(r),o=r===i?"plain":"s256";this._debug("PKCE","code verifier",`${r.substring(0,5)}...`,"code challenge",i,"method",o);const a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(t!=null&&t.queryParams){const r=new URLSearchParams(t.queryParams);s.push(r.toString())}return`${this.url}/authorize?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await je(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:a,error:c}=await je(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return c?{data:null,error:c}:(!((r=a==null?void 0:a.totp)===null||r===void 0)&&r.qr_code&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:a}=await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await je(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(s=r==null?void 0:r.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(Re(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(e==null?void 0:e.factors)||[],r=s.filter(i=>i.factor_type==="totp"&&i.status==="verified");return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((s=(t=r.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:d},error:null}})}}ym.nextInstanceID=0;class kH extends ym{constructor(e){super(e)}}var TH=globalThis&&globalThis.__awaiter||function(n,e,t,s){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function a(d){try{u(s.next(d))}catch(h){o(h)}}function c(d){try{u(s.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):r(d.value).then(a,c)}u((s=s.apply(n,e||[])).next())})};const PH={headers:U8},NH={schema:"public"},RH={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},MH={};class jH{constructor(e,t,s){var r,i,o,a,c,u,d,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const f=X8(e);this.realtimeUrl=`${f}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${f}/auth/v1`,this.storageUrl=`${f}/storage/v1`,this.functionsUrl=`${f}/functions/v1`;const m=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:NH,realtime:MH,auth:Object.assign(Object.assign({},RH),{storageKey:m}),global:PH},g=Y8(s??{},y);this.storageKey=(i=(r=g.auth)===null||r===void 0?void 0:r.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((c=g.auth)!==null&&c!==void 0?c:{},this.headers,(u=g.global)===null||u===void 0?void 0:u.fetch),this.fetch=K8(t,this._getAccessToken.bind(this),(d=g.global)===null||d===void 0?void 0:d.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new d8(`${f}/rest/v1`,{headers:this.headers,schema:(h=g.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new V6(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new V8(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return TH(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return(t=(e=s.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:o,debug:a},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kH({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:o,debug:a,fetch:u})}_initRealtimeClient(e){return new T8(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,s)=>{this._handleTokenChanged(t,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(e,t,s){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==s?(this.realtime.setAuth(s??null),this.changedAccessToken=s):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const LH=(n,e,t)=>new jH(n,e,t),ul=new Map,nN={type:"memory",getItem:n=>ul.has(n)?ul.get(n):null,setItem:(n,e)=>{ul.set(n,e)},removeItem:n=>{ul.delete(n)},clear:()=>ul.clear(),key:n=>Array.from(ul.keys())[n]??null,get length(){return ul.size}},sN={type:"cookie",getItem:n=>{if(typeof document>"u")return null;const e=document.cookie.match(new RegExp(`(?:^|; )${n}=([^;]*)`));return e?decodeURIComponent(e[1]):null},setItem:(n,e)=>{if(typeof document>"u")return;const t=encodeURIComponent(e);document.cookie=`${n}=${t}; path=/; SameSite=Lax`},removeItem:n=>{typeof document>"u"||(document.cookie=`${n}=; path=/; max-age=0; SameSite=Lax`)},clear:()=>{if(typeof document>"u")return;document.cookie.split(";").forEach(e=>{const[t]=e.split("=");document.cookie=`${t.trim()}=; path=/; max-age=0; SameSite=Lax`})},key:()=>null,get length(){return typeof document>"u"||!document.cookie?0:document.cookie.split(";").length}},rN=n=>{if(!n)return null;try{const e=`safe-storage-probe-${Math.random().toString(36).slice(2)}`;n.setItem(e,"ok");const t=n.getItem(e)==="ok";return n.removeItem(e),t?n:null}catch{return null}},DH=()=>{if(typeof window>"u")return{storage:nN,type:"memory"};const n=[{type:"local",ref:window.localStorage},{type:"session",ref:window.sessionStorage}];for(const t of n){const s=rN(t.ref);if(s)return{storage:s,type:t.type}}return rN(sN)?{storage:sN,type:"cookie"}:{storage:nN,type:"memory"}},XD=DH(),j1=XD.storage,IH=XD.type,Ik=n=>{try{return j1.getItem(n)}catch{return null}},vm=(n,e)=>{try{return j1.setItem(n,e),!0}catch{return!1}},YD=n=>{try{j1.removeItem(n)}catch{}},OH="https://ytubybkoucltwnselbhc.supabase.co",FH="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0dWJ5YmtvdWNsdHduc2VsYmhjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg1OTAwMDgsImV4cCI6MjA3NDE2NjAwOH0.hJuYwMc_MGgXIiXPC_3gSe3dRlU0SQ26-xDpC5y8QKo",nt=LH(OH,FH,{auth:{storage:j1,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"}}),QD=A.createContext(void 0),BH=({children:n})=>{const{toast:e}=ok(),[t,s]=A.useState(null),[r,i]=A.useState(null),[o,a]=A.useState(!0),c=A.useCallback(async m=>{i(m),s((m==null?void 0:m.user)??null),a(!1)},[]);A.useEffect(()=>{if(typeof window>"u")return;let m=!1;return(async()=>{const g=new URL(window.location.href),w=new URLSearchParams(window.location.hash.replace(/^#/,"")),v=g.searchParams.get("code"),b=w.get("access_token"),_=w.get("refresh_token"),E=g.searchParams.get("error_description"),k=window.location.hash.includes("access_token")||window.location.hash.includes("refresh_token"),T=`${g.origin}${g.pathname}${k?"":g.hash}`,P=()=>{window.history.replaceState({},document.title,T)};if(E){e({variant:"destructive",title:"No pudimos iniciar sesin",description:E||"El enlace no es vlido. Intenta abrirlo en el navegador nativo."}),P();return}if(v){const{data:N,error:M}=await nt.auth.exchangeCodeForSession(v);m||(M?e({variant:"destructive",title:"No pudimos completar el login",description:M.message||"Intenta abrir el enlace en el navegador por defecto."}):c(N.session),P());return}if(b&&_){const{data:N,error:M}=await nt.auth.setSession({access_token:b,refresh_token:_});m||(M?e({variant:"destructive",title:"No pudimos completar el login",description:M.message||"Intenta abrir el enlace en el navegador por defecto."}):c(N.session),P())}})(),()=>{m=!0}},[c,e]),A.useEffect(()=>{(async()=>{const{data:{session:g}}=await nt.auth.getSession();c(g)})();const{data:{subscription:y}}=nt.auth.onAuthStateChange(async(g,w)=>{c(w)});return()=>y.unsubscribe()},[c]);const u=A.useCallback(async(m,y,g)=>{const{error:w}=await nt.auth.signUp({email:m,password:y,options:g});return w&&e({variant:"destructive",title:"Sign up Failed",description:w.message||"Something went wrong"}),{error:w}},[e]),d=A.useCallback(async(m,y)=>{const{error:g}=await nt.auth.signInWithPassword({email:m,password:y});return g&&e({variant:"destructive",title:"Sign in Failed",description:g.message||"Something went wrong"}),{error:g}},[e]),h=A.useCallback(async()=>{const{error:m}=await nt.auth.signOut();return m&&e({variant:"destructive",title:"Sign out Failed",description:m.message||"Something went wrong"}),{error:m}},[e]),f=A.useMemo(()=>({user:t,session:r,loading:o,signUp:u,signIn:d,signOut:h}),[t,r,o,u,d,h]);return A.useEffect(()=>{typeof window>"u"||r&&Ik("gatoencerrado:resume-contribution")==="true"&&(window.dispatchEvent(new CustomEvent("gatoencerrado:resume-contribution")),YD("gatoencerrado:resume-contribution"))},[r]),p.jsx(QD.Provider,{value:f,children:n})},gy=()=>{const n=A.useContext(QD);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},iN={hidden:{opacity:0},visible:{opacity:1}},$H={hidden:{opacity:0,scale:.95},visible:{opacity:1,scale:1}},Ok=({onClose:n})=>{const[e,t]=A.useState(""),[s,r]=A.useState(!1),[i,o]=A.useState(null),a=IH==="memory",c=A.useMemo(()=>{if(typeof window>"u")return;const{origin:h,pathname:f,hash:m}=window.location,y=m&&!m.includes("access_token")?m:"";return`${h}${f}${y}`},[]),u=A.useCallback(async h=>{if(h.preventDefault(),s)return;if(a){o({type:"error",text:"Tu navegador mvil est bloqueando almacenamiento. brelo en el navegador por defecto o desactiva el modo privado para iniciar sesin."});return}const f=e.trim();if(!f){o({type:"error",text:"Ingresa tu correo para enviarte el enlace mgico."});return}r(!0),o(null),vm("gatoencerrado:resume-contribution","true");const{error:m}=await nt.auth.signInWithOtp({email:f,options:{emailRedirectTo:c}});m?o({type:"error",text:m.message||"No pudimos enviar el enlace."}):(o({type:"success",text:"Te enviamos un link mgico. Revisa tu correo para continuar."}),t("")),r(!1)},[e,s,c,a]),d=A.useCallback(async()=>{if(o(null),a){o({type:"error",text:"No pudimos iniciar sesin porque el navegador bloquea cookies/almacenamiento. Prueba abrir en Safari/Chrome fuera de modo privado."});return}vm("gatoencerrado:resume-contribution","true");const{error:h}=await nt.auth.signInWithOAuth({provider:"google",options:{redirectTo:c}});if(h){o({type:"error",text:h.message||"No pudimos iniciar sesin con Google."});return}n==null||n()},[n,c,a]);return A.useEffect(()=>{const h=f=>{f.key==="Escape"&&(n==null||n())};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[n]),p.jsxs(J.div,{className:"fixed inset-0 z-[110] flex items-center justify-center px-4 py-6",initial:"hidden",animate:"visible",exit:"hidden",variants:iN,children:[p.jsx(J.button,{type:"button",className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:n,"aria-label":"Cerrar overlay de autenticacin",variants:iN}),p.jsxs(J.div,{role:"dialog","aria-modal":"true","aria-labelledby":"tracking-overlay-title","aria-describedby":"tracking-overlay-desc",className:"relative z-10 w-full max-w-md transform rounded-3xl border border-white/10 bg-[#0a0019]/90 p-6 shadow-2xl backdrop-blur-xl",initial:"hidden",animate:"visible",exit:"hidden",variants:$H,children:[p.jsx("button",{type:"button",onClick:n,className:"absolute top-3 right-3 rounded-full border border-white/15 px-2 py-1 text-sm text-slate-400 hover:text-slate-100","aria-label":"Cerrar overlay",children:""}),p.jsxs("div",{className:"space-y-4 pt-2",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500/80",children:"Seguimiento"}),p.jsx("h3",{id:"tracking-overlay-title",className:"font-display text-2xl text-slate-50",children:"Inicia sesin para continuar el dilogo"})]}),p.jsx("p",{id:"tracking-overlay-desc",className:"text-sm text-slate-300 leading-relaxed",children:"Queremos asegurarnos de que puedas retomar tu experiencia justo donde la dejaste. Esto no genera ningn cargo ni suscripcin."}),p.jsx("button",{type:"button",onClick:d,className:"flex w-full items-center justify-center rounded-full border border-white/20 bg-white/10 px-4 py-3 text-sm font-semibold text-white transition hover:border-white/40 hover:bg-white/15",children:"Iniciar sesin con Google"}),a?p.jsx("p",{className:"text-xs text-amber-300",children:"Tu navegador est bloqueando almacenamiento; abre el sitio en Safari/Chrome (fuera de modo privado) para completar el login."}):null,p.jsxs("form",{onSubmit:u,className:"space-y-3",children:[p.jsx("label",{htmlFor:"tracking-email",className:"sr-only",children:"Correo electrnico"}),p.jsx("input",{id:"tracking-email",type:"email",value:e,onChange:h=>t(h.target.value),placeholder:"nombre@correo.com",className:"w-full rounded-2xl border border-white/20 bg-black/30 px-4 py-3 text-sm text-slate-100 placeholder:text-slate-400 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",required:!0}),p.jsx("button",{type:"submit",disabled:s,className:"w-full rounded-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 px-4 py-3 text-sm font-semibold text-white transition hover:from-purple-500 hover:to-indigo-500 disabled:cursor-not-allowed disabled:opacity-60",children:s?"Enviando...":"Enviar Magic Link"})]}),i?p.jsx("p",{className:`text-xs ${i.type==="error"?"text-rose-300":"text-emerald-300"}`,children:i.text}):null,p.jsx("p",{className:"text-xs text-slate-500",children:"Tu experienica no se perder. Continuars donde te quedaste."})]})]})]})},VH=()=>{var _,E;const[n,e]=A.useState(!1),[t,s]=A.useState(!1),[r,i]=A.useState(!1),{user:o,signOut:a}=gy(),{toast:c}=ok(),u=((_=o==null?void 0:o.user_metadata)==null?void 0:_.alias)||((E=o==null?void 0:o.user_metadata)==null?void 0:E.full_name)||(o!=null&&o.email?o.email.split("@")[0]:""),d=u?u.trim().split(/\s+/)[0]:"",h=o?`Hola ${d||"gato"}`:"",f=o?"Cerrar sesin":"Iniciar sesin",m=o?"bg-emerald-400":"bg-slate-600",y=A.useCallback(()=>i(!1),[]),g=A.useCallback(()=>i(!0),[]),w=A.useCallback(async()=>{if(!o){i(!0);return}const{error:k}=await a();c(k?{description:k.message||"No pudimos cerrar sesin. Intenta ms tarde."}:{description:"Sesin cerrada correctamente."})},[a,c,o]);A.useEffect(()=>{const k=()=>{s(window.scrollY>20)};return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]);const v=[{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Miniversos",href:"#transmedia"},{name:"Textos",href:"#dialogo-critico"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}],b=k=>{e(!1);const T=document.querySelector(k);T&&T.scrollIntoView({behavior:"smooth"})};return p.jsxs(J.header,{initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"easeOut"},className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${t?"bg-black/60 backdrop-blur-lg border-b border-slate-100/10":"bg-transparent"}`,children:[p.jsxs("nav",{className:"container mx-auto px-6 py-3",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs(J.button,{type:"button",whileHover:{scale:1.05,textShadow:"0 0 8px rgba(233, 213, 255, 0.5)"},className:"flex items-center gap-3 cursor-pointer text-white",onClick:()=>b("#hero"),children:[p.jsx("span",{className:"font-display text-2xl font-bold text-gradient",children:"#GatoEncerrado"}),p.jsx("span",{className:`h-2.5 w-2.5 rounded-full ${m}`}),o?p.jsx("span",{className:"text-sm md:text-base font-semibold tracking-tight text-white",children:h}):null]}),p.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[v.map(k=>p.jsx(J.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>b(k.href),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md",children:k.name},k.name)),p.jsx(J.button,{whileHover:{scale:1.05,color:"#e9d5ff"},onClick:()=>b("#contact"),className:"text-slate-300 hover:text-white transition-colors font-medium px-4 py-2 rounded-md ml-4 border border-purple-300/30 hover:bg-purple-500/20",children:"Contacto"})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Ae,{variant:"ghost",size:"icon",className:"md:hidden text-slate-200",onClick:()=>e(!n),children:n?p.jsx(b1,{size:24}):p.jsx(T5,{size:24})}),p.jsx("button",{onClick:o?w:g,className:"hidden md:inline text-sm font-semibold text-slate-100",children:f})]})]}),n&&p.jsxs(J.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-4 bg-black/80 backdrop-blur-md rounded-lg p-4 border border-slate-100/10",children:[v.map(k=>p.jsx("button",{onClick:()=>b(k.href),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors",children:k.name},k.name)),p.jsx("button",{onClick:()=>b("#contact"),className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2 border-t border-slate-100/10",children:"Contacto"}),p.jsx("button",{onClick:o?w:g,className:"block w-full text-left py-3 text-slate-200 hover:text-white transition-colors mt-2",children:f})]})]}),r?p.jsx(Ok,{onClose:y}):null]})},oN=["#f472b6","#a855f7","#facc15","#34d399"],zH=({seed:n})=>{const e=A.useMemo(()=>Array.from({length:12},(t,s)=>({left:Math.random()*100,delay:Math.random()*.2,color:oN[s%oN.length]})),[n]);return p.jsx("div",{className:"confetti-layer","aria-hidden":"true",children:e.map((t,s)=>p.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${Math.random()*20}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${s}`))})},UH=()=>{const[n,e]=A.useState([]),t=A.useCallback(()=>{const s=Date.now();e(r=>[...r,s]),setTimeout(()=>{e(r=>r.filter(i=>i!==s))},1100)},[]);return{bursts:n,fireConfetti:t}},HH="/assets/logoapp.png",dp=[{value:"reservaciones",label:"Informacin sobre reservaciones",description:"Accede a la lnea de reservaciones y consulta los paquetes que an quedan."},{value:"recordatorio",label:"Recordatorio de la funcin",description:"Recibe el aviso oficial justo antes de que abra la funcin en diciembre."}],GH="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Gato%20Encerrado%20%C2%B7%2028%20de%20diciembre&dates=20241228T210000Z/20241228T223000Z&details=Funci%C3%B3n%20especial%20en%20CEC&location=CECUT",WH={}.VITE_SMS_NUMBER||"+5215550112233",qH=encodeURIComponent("Recordarme la funcin #GatoEncerrado el 28 de diciembre en CECUT."),KH=[{id:"calendar",label:"Aadir a mi calendario",description:"Calendario de Google prellenado con lugar y horario.",href:GH},{id:"sms",label:"Enviar notificacin va SMS",description:"Recibe una alerta en tu celular el da del evento.",href:`sms:${WH}?body=${qH}`}],JD=[{id:"taza-250",title:"Taza",price:"$250",helper:"Edicin especial disponible el da del evento."},{id:"taza-causa-600",title:"Taza con causa",price:"$600",helper:"Incluye membresa de 6 meses. Se entrega el 28 de diciembre."},{id:"novela-400",title:"Novela Mi Gato Encerrado",price:"$400",helper:"Primera edicin con QR secreto."},{id:"combo-900",title:"Combo dos tazas + novela",price:"$900",helper:"Paquete completo disponible solo el da del evento."}],XH=JD.reduce((n,e)=>(n[e.id]=`${e.title}  ${e.price}`,n),{}),aN={fullName:"",email:"",city:"",interest:dp[0].value,notes:"",packages:[]},YH={hidden:{opacity:0},visible:{opacity:.85}},QH={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},Fk=({open:n,onClose:e,initialInterest:t=dp[0].value})=>{const[s,r]=A.useState(aN),[i,o]=A.useState("idle"),[a,c]=A.useState(""),{bursts:u,fireConfetti:d}=UH();A.useEffect(()=>{n&&(r({...aN,interest:t}),o("idle"),c(""))},[n,t]),A.useEffect(()=>{if(!n)return;const w=v=>{v.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[n,e]);const h=A.useCallback(w=>{const{name:v,value:b}=w.target;r(_=>({..._,[v]:b}))},[]),f=A.useCallback(w=>{r(v=>{const b=v.packages.includes(w);return{...v,packages:b?v.packages.filter(_=>_!==w):[...v.packages,w]}})},[]),m=A.useMemo(()=>dp.find(w=>w.value===s.interest)??dp[0],[s.interest]),y=A.useCallback(async w=>{if(w.preventDefault(),i!=="loading"){if(!s.fullName.trim()||!s.email.trim()){Te({description:"Por favor completa tu nombre y correo electrnico."});return}o("loading"),c("");try{const v=s.packages.length>0?`Paquetes apartados (sin pago): ${s.packages.map(E=>XH[E]).join(", ")}`:null,b={full_name:s.fullName.trim(),email:s.email.trim().toLowerCase(),city:s.city.trim()||null,interest:s.interest,channel:"landing",object_type:"boleto",event:"funcion-2024-12-28",notes:[v,s.notes.trim()].filter(Boolean).join(" | ")||null},{error:_}=await nt.from("rsvp_extended").insert(b);if(_){o("error"),c("No pudimos registrar tu solicitud. Intenta nuevamente.");return}await JH({email:b.email,name:b.full_name,interestLabel:m.label,interestValue:b.interest,city:b.city,notes:b.notes}),d(),o("success"),Te({description:"Gracias! Te enviaremos las prximas novedades."})}catch{o("error"),c("Ocurri un error inesperado. Intenta ms tarde.")}}},[s,m.label,i,d]),g=A.useCallback(()=>{i!=="loading"&&(e==null||e())},[e,i]);return p.jsx(bo,{children:n&&p.jsxs(J.div,{className:"fixed inset-0 z-50 flex items-start justify-center px-4 py-6 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(J.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:YH,onClick:g}),p.jsxs(J.div,{role:"dialog","aria-modal":"true",variants:QH,className:"relative z-10 w-full max-w-3xl rounded-3xl border border-white/10 bg-slate-950/95 p-6 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[u.map(w=>p.jsx(zH,{seed:w},w)),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("img",{src:HH,alt:"#GatoEncerrado",className:"h-12 w-auto object-contain rounded-full border border-white/20 bg-white/5 p-1 shadow-lg"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"28 de diciembre  CECUT"}),p.jsx("h2",{className:"font-display text-3xl text-slate-50",children:"Compra tu boleto y aparta tu lugar en el universo de #GatoEncerrado"})]})]}),p.jsx("button",{onClick:g,className:"self-end text-slate-400 hover:text-white transition",children:""})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[p.jsxs("div",{className:"space-y-5 text-sm text-slate-300/90 leading-relaxed",children:[p.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4 space-y-3",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100",children:"Compra presencial en taquilla del CECUT"}),p.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[p.jsx("li",{children:" Taquilla del CECUT  Preventa disponible hasta agotar localidades."}),p.jsx("li",{children:" Llvate una taza como incentivo de preventa."}),p.jsx("li",{children:" Las tazas se entregan exclusivamente en taquilla, hasta agotar existencias."}),p.jsxs("li",{children:[" Tambin puedes comprar en lnea:"," ",p.jsx("a",{href:"https://www.taquillacecut.com.mx/eventos/saladeespectaculos/2025-12-28",target:"_blank",rel:"noopener noreferrer",className:"text-purple-300 underline underline-offset-4 hover:text-white",children:"taquillacecut.com.mx  Entrada 28/12"})]})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4 space-y-3",children:[p.jsx("h3",{className:"font-display text-lg text-purple-200",children:"Mesa con Merch el da de la funcin"}),p.jsx("p",{className:"text-xs text-slate-400/80",children:"Si deseas apartar o pagar por adelantado, djalo marcado y te enviaremos un enlace seguro para completar tu registro."}),p.jsx("div",{className:"grid sm:grid-cols-2 gap-3 text-sm text-slate-200",children:JD.map(w=>p.jsxs("label",{className:"flex items-start gap-3 rounded-xl border border-white/10 bg-black/30 px-3 py-2",children:[p.jsx("input",{type:"checkbox",checked:s.packages.includes(w.id),onChange:()=>f(w.id),className:"mt-1 h-4 w-4 rounded border-slate-400 bg-black/40 text-purple-500 focus:ring-purple-400"}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("p",{className:"font-semibold text-slate-100",children:[w.title," ",p.jsxs("span",{className:"text-slate-400 font-normal",children:[" ",w.price]})]}),p.jsx("p",{className:"text-xs text-slate-400",children:w.helper})]})]},w.id))})]})]}),p.jsxs("form",{className:"space-y-5",onSubmit:y,children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),p.jsx("input",{name:"fullName",type:"text",required:!0,value:s.fullName,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo te llamas?"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),p.jsx("input",{name:"email",type:"email",required:!0,value:s.email,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Ciudad"}),p.jsx("input",{name:"city",type:"text",value:s.city,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Desde dnde nos visitas?"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Qu quieres recibir?"}),p.jsx("select",{name:"interest",value:s.interest,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",children:dp.map(w=>p.jsx("option",{value:w.value,children:w.label},w.value))}),p.jsx("p",{className:"text-xs text-slate-400/80",children:m.description})]}),p.jsxs("div",{className:"glass-effect rounded-2xl border border-white/5 bg-black/25 p-4 space-y-3",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100",children:"Accin preferida"}),s.interest==="recordatorio"?p.jsx("div",{className:"grid sm:grid-cols-2 gap-3",children:KH.map(w=>p.jsxs("a",{href:w.href,target:"_blank",rel:"noreferrer",className:"flex flex-col gap-2 rounded-xl border border-white/10 bg-slate-900/40 px-4 py-3 text-slate-100 hover:border-purple-400/80 hover:bg-slate-900/70 transition",children:[p.jsx("span",{className:"text-sm font-semibold",children:w.label}),p.jsx("span",{className:"text-xs text-slate-400/80",children:w.description})]},w.id))}):p.jsx("div",{className:"space-y-3",children:p.jsx("p",{className:"text-xs text-slate-300/80",children:"Recibirs en tu correo (y en el CTA de confirmacin) la lnea de reservaciones para concretar el paquete que quieras. Nos encargamos de enviarte la liga segura sin saturar este formulario."})})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),p.jsx("textarea",{name:"notes",rows:3,value:s.notes,onChange:h,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Necesitas facilidades especiales o tienes un cdigo de preventa?"})]}),i==="error"&&p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:a}),i==="success"&&p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu registro qued guardado. Revisaremos tu correo con los siguientes pasos."}),p.jsxs("div",{className:"flex flex-col gap-3",children:[p.jsx(Ae,{type:"submit",disabled:i==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:i==="loading"?"Enviando":"Guardar mi registro"}),p.jsx("button",{type:"button",onClick:g,className:"text-sm text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]})]})]})})};async function JH({email:n,name:e,interestLabel:t,interestValue:s,city:r,notes:i}){if(n)try{const{error:o}=await nt.functions.invoke("send-reserve-confirmation",{body:{email:n,name:e,interestLabel:t,interestValue:s,city:r,notes:i}});o&&console.error("[ReserveModal] Error en sendReserveConfirmationEmail:",o)}catch(o){console.error("[ReserveModal] Excepcin en sendReserveConfirmationEmail:",o)}}const ZH="/assets/bg-logo-ba7fccc4.png",eG=()=>{const[n,e]=A.useState(!1),t=A.useCallback(()=>{const i=document.querySelector("#about");i==null||i.scrollIntoView({behavior:"smooth"})},[]),s=A.useCallback(()=>{e(!0)},[]),r=A.useCallback(()=>{e(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"hero",className:"min-h-screen flex items-center justify-center relative overflow-hidden",children:[p.jsxs("div",{className:"absolute inset-0 bg-black",children:[p.jsxs("div",{className:"absolute inset-0 opacity-30",children:[p.jsx("div",{className:"absolute top-0 left-0 w-1/2 h-1/2 bg-gradient-to-br from-violet-900/90 via-transparent to-transparent blur-4xl"}),p.jsx("div",{className:"absolute bottom-0 right-0 w-1/2 h-1/2 bg-gradient-to-tl from-pink-600/40 via-transparent to-transparent blur-3xl"})]}),p.jsx("img",{className:"absolute inset-0 w-full h-full object-cover opacity-15 mix-blend-luminosity pointer-events-none",style:{filter:"contrast(20%) brightness(105%)"},alt:"Textura de teln de teatro de terciopelo oscuro",src:ZH})]}),p.jsxs("div",{className:"container mx-auto px-6 text-center relative z-10",children:[p.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"max-w-4xl mx-auto",children:[p.jsx(J.h1,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.2},className:"font-display text-5xl md:text-7xl font-medium italic mb-6 text-gradient",style:{textShadow:"0 0 20px rgba(233, 213, 255, 0.3)"},children:"#GatoEncerrado"}),p.jsx(J.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.5},className:"text-xl md:text-2xl text-slate-300/80 mb-12 leading-relaxed font-light",children:"Lo ves aqu, pero su voz tambin habita otras dimensiones."}),p.jsxs(J.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:1,delay:.8},className:"flex flex-col gap-4 justify-center items-center",children:[p.jsxs(Ae,{onClick:()=>s("preventa"),className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[p.jsx(rk,{size:20}),"Compra tu boleto"]}),p.jsx(Ae,{variant:"ghost",onClick:t,className:"text-slate-300 hover:text-white hover:bg-white/5 px-8 py-3 rounded-full font-semibold flex items-center gap-2 text-base",children:"Conoce La Obra"})]})]}),p.jsx(J.div,{animate:{y:[0,10,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-50 left-1/2 -translate-x-1/2 text-slate-500",children:p.jsx(y5,{size:24})})]})]}),p.jsx(Fk,{open:n,onClose:r,initialInterest:"preventa"})]})},ZD="trailers",tG="trailer",nG=/\.(mp4|mov|webm|mkv|m4v)$/i,sG=(n="")=>{var t;switch((t=n.split(".").pop())==null?void 0:t.toLowerCase()){case"webm":return"video/webm";case"mov":return"video/quicktime";case"mkv":return"video/x-matroska";case"m4v":return"video/x-m4v";case"mp4":default:return"video/mp4"}},eI=async(n="")=>{const{data:e,error:t}=await nt.storage.from(ZD).list(n,{limit:100,offset:0,sortBy:{column:"name",order:"asc"}});if(t)throw new Error(t.message);if(!Array.isArray(e)||e.length===0)return[];const s=[];for(const r of e){const i=n?`${n}/${r.name}`:r.name;if(!r.metadata){const o=await eI(i);s.push(...o);continue}s.push({...r,fullPath:i})}return s};async function rG(n=tG){var e;try{let t;try{t=await eI("")}catch(o){return console.error("Error al listar trailers:",o.message),null}if(!Array.isArray(t)||t.length===0)return null;const s=n==null?void 0:n.toLowerCase();let r=t.find(o=>{const a=o.fullPath.toLowerCase();return s&&(a===s||a.endsWith(`/${s}`)||a.includes(`/${s}.`)||a===`${s}.mp4`||a.startsWith(`${s}.`))});if(r||(r=t.find(o=>nG.test(o.fullPath))),!r)return null;const{data:i}=nt.storage.from(ZD).getPublicUrl(r.fullPath);return i!=null&&i.publicUrl?{url:i.publicUrl,name:r.fullPath,mimeType:((e=r.metadata)==null?void 0:e.mimetype)||sG(r.fullPath)}:null}catch(t){return console.error("Excepcin al obtener el triler:",t),null}}const iG="Es un gato encerrado existe como obra escnica y como #UniversoTransmedia: es, al mismo tiempo, un relato ntimo en un escenario y una constelacin de la mente y del dolor humano en mltiples lenguajes artsticos. Nuestra obra es el corazn que hace pulsar aquellas preguntas que no estn aqu para contestarse, sino para sentirlas en compaa. En pocas palabras, cuando la obra est latente, el universo #GatoEncerrado contina latiendo en otras narrativas. Un recordatorio de que el corazn nunca se encierra del todo.",oG=[{quote:"Salir de la funcin fue como despertar con nuevos recuerdos. La obra me oblig a conversar con mis propias ausencias.",author:"Maru Solano",role:"Espectadora / Tijuana"},{quote:"Es un Gato Encerrado nos recuerda que el teatro puede ser tambin archivo emocional y dispositivo de memoria.",author:"Dr. Luis Miguel Snchez",role:"Crtico invitado"}],aG=()=>{const[n,e]=A.useState(null),[t,s]=A.useState(!1),[r,i]=A.useState(!1),[o,a]=A.useState(!1),[c,u]=A.useState("preventa"),d=A.useCallback(g=>{u(g),a(!0)},[]),h=A.useCallback(()=>{a(!1)},[]),f=A.useCallback(()=>{var w,v;const g=document.getElementById("blog-submit-cta");if(g){g.scrollIntoView({behavior:"smooth",block:"center"}),(w=g.focus)==null||w.call(g);return}(v=document.querySelector("#blog-contribuye"))==null||v.scrollIntoView({behavior:"smooth",block:"start"})},[]),m=A.useCallback(async()=>{if(!r){if(n!=null&&n.url){s(!0);return}try{i(!0);const g=await rG("trailer");g!=null&&g.url?(e(g),s(!0)):Te({description:"El triler an no est disponible. Intenta ms tarde."})}catch(g){console.error("Error al obtener el triler:",g),Te({description:"No se pudo cargar el triler. Intntalo de nuevo ms tarde."})}finally{i(!1)}}},[r,n]),y=A.useCallback(()=>{s(!1);const g=document.getElementById("gato-encerrado-trailer");g&&typeof g.pause=="function"&&g.pause()},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"about",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Sobre la Obra"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light whitespace-pre-line",children:iG})]}),p.jsx(J.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12",children:p.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[p.jsxs("div",{className:"relative order-2 md:order-1",children:[p.jsx("img",{className:"w-full h-96 object-cover rounded-xl shadow-2xl shadow-black/50",alt:"Escena de la obra #GatoEncerrado, luz tenue y misteriosa",src:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/trailers/DSC02497.jpg"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent rounded-xl","aria-hidden":"true"})]}),p.jsxs("div",{className:"order-1 md:order-2",children:[p.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"La Mente de Silvestre"}),p.jsxs("p",{className:"text-slate-300/80 leading-relaxed mb-8 font-light",children:["Silvestre vive en ",p.jsx("strong",{children:"Es un gato encerrado"}),". Este es el ",p.jsx("i",{children:"rincn onrico"})," donde enfrenta sus desdoblamientos y dilemas existenciales. Aqu, lo real y lo imaginario ya no compiten. Y t espectador, visitante, cmplice puedes entrar sin tocar la puerta, porque quizs t tambin tienes un gato encerrado en el pecho."]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[p.jsxs(Ae,{onClick:m,disabled:r,className:"bg-purple-500/20 border border-purple-400/30 text-purple-300 hover:bg-purple-500/30 hover:text-purple-200 disabled:opacity-60 disabled:cursor-not-allowed px-6 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow",children:[p.jsx(tk,{size:20}),r?"Cargando":"Ver Triler"]}),p.jsxs(Ae,{variant:"outline",onClick:()=>d("preventa"),className:"border-slate-100/20 text-slate-200 hover:bg-slate-100/10 px-6 py-3 rounded-full font-semibold flex items-center gap-2",children:[p.jsx(rk,{size:20}),"RSVP"]})]})]})]})}),p.jsx(J.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-16 glass-effect rounded-2xl p-8 md:p-12",children:p.jsxs("div",{className:"grid md:grid-cols-[3fr_2fr] gap-8 items-center",children:[p.jsxs("div",{children:[p.jsx("p",{className:"uppercase tracking-[0.35em] text-xs text-slate-400/80 mb-4",children:"Perspectivas del pblico"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-6 italic",children:"Qu provoca La Obra?"}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-6 font-light",children:"Reunimos testimonios, crticas y preguntas abiertas que continan la conversacin. Haz scroll hacia Textos y Blog para leer ms y expandir tu propia mirada."}),p.jsx(Ae,{variant:"outline",onClick:f,className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/20 w-full sm:w-auto whitespace-normal break-words text-center leading-snug",children:"Clica aqu si ya tienes un perspectiva que compartir"})]}),p.jsx("div",{className:"space-y-6",children:oG.map(g=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/30 p-6",children:[p.jsx(R5,{className:"text-purple-300 mb-4",size:28}),p.jsx("p",{className:"text-slate-200 italic leading-relaxed mb-4",children:g.quote}),p.jsxs("div",{className:"text-sm text-slate-400",children:[p.jsx("p",{className:"text-slate-200 font-semibold",children:g.author}),p.jsx("p",{children:g.role})]})]},g.author))})]})})]}),p.jsx(bo,{children:t&&(n==null?void 0:n.url)&&p.jsxs(J.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(J.div,{className:"absolute inset-0 bg-black/70",onClick:y,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsxs(J.div,{className:"relative z-10 w-full max-w-4xl overflow-hidden rounded-3xl bg-slate-950/90 backdrop-blur-xl border border-white/10 shadow-2xl",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:28},children:[p.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-white/10 text-slate-200 uppercase tracking-[0.35em] text-xs",children:[p.jsx("span",{children:"Triler #GatoEncerrado"}),p.jsx("button",{onClick:y,className:"text-slate-300 hover:text-white transition","aria-label":"Cerrar triler",children:""})]}),p.jsx("div",{className:"relative aspect-video bg-black",children:p.jsx("video",{id:"gato-encerrado-trailer",src:n.url,controls:!0,autoPlay:!0,className:"h-full w-full object-contain"},n.url)})]})]})})]}),p.jsx(Fk,{open:o,onClose:h,initialInterest:c})]})},Qf=[{id:"waitlist",label:"Prximamente"},{id:"experiences",label:"Miniversos activos"}],lG=[{title:"Microficciones sonoras",description:"Voces internas de Silvestre publicadas en notas de voz efmeras.",action:"Pronto recibirs el enlace secreto."},{title:"Bitcora interactiva",description:"Un recorrido visual por los objetos que habitan la habitacin de Silvestre.",action:"Se liberar con la novela impresa."},{title:"Constelacin de espectadores",description:"Mapa colaborativo donde la comunidad comparte sueos y teoras.",action:"Disponible a partir de enero 2025."}],lN={fullName:"",email:"",interest:"miniversos",message:""},cG={hidden:{opacity:0},visible:{opacity:.85}},uG={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},dG=({open:n,onClose:e})=>{const[t,s]=A.useState(Qf[0].id),[r,i]=A.useState(lN),[o,a]=A.useState("idle"),[c,u]=A.useState("");A.useEffect(()=>{n&&(s(Qf[0].id),i(lN),a("idle"),u(""))},[n]),A.useEffect(()=>{if(!n)return;const y=g=>{g.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[n,e]);const d=A.useCallback(y=>{const{name:g,value:w}=y.target;i(v=>({...v,[g]:w}))},[]),h=A.useMemo(()=>{var y;return((y=Qf.find(g=>g.id===t))==null?void 0:y.label)??Qf[0].label},[t]),f=A.useCallback(async y=>{var g;if(y.preventDefault(),o!=="loading"){if(!r.fullName.trim()||!r.email.trim()){Te({description:"Por favor completa tu nombre y correo."});return}a("loading"),u("");try{const w={full_name:r.fullName.trim(),email:r.email.trim().toLowerCase(),city:null,interest:"miniversos",channel:"landing",object_type:"experiencia-digital",event:"miniversos",notes:r.message.trim()||null},{error:v}=await nt.from("rsvp_extended").insert(w);if(v){console.error("[MiniverseModal] Error al registrar miniverso:",v),a("error"),u((g=v.message)!=null&&g.includes("rsvp_extended")?"Crea la tabla rsvp_extended en Supabase para habilitar este formulario.":"No pudimos registrar tu inters. Intenta de nuevo.");return}a("success"),Te({description:"Gracias. Te enviaremos una seal cuando el prximo miniverso cobre vida."})}catch(w){console.error("[MiniverseModal] Excepcin al guardar:",w),a("error"),u("Ocurri un error inesperado. Intenta ms tarde.")}}},[r,o]),m=A.useCallback(()=>{o!=="loading"&&(e==null||e())},[e,o]);return p.jsx(bo,{children:n?p.jsxs(J.div,{className:"fixed inset-0 z-50 flex items-start sm:items-center justify-center px-3 py-6 sm:px-4 sm:py-10 overflow-y-auto",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(J.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:cG,onClick:m,"aria-hidden":"true"}),p.jsxs(J.div,{role:"dialog","aria-modal":"true","aria-labelledby":"miniverse-modal-title",variants:uG,className:"relative z-10 w-full max-w-4xl rounded-3xl border border-white/10 bg-slate-950/95 p-5 sm:p-10 shadow-2xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4 mb-6",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.35em] text-slate-400/80 mb-2",children:"Universos expandidos #GatoEncerrado"}),p.jsx("h2",{id:"miniverse-modal-title",className:"font-display text-3xl text-slate-50",children:"Explora los miniversos"}),p.jsx("p",{className:"text-sm text-slate-400/80",children:"Lo que empieza en el escenario contina en otros formatos. Aqu reunimos las experiencias emergentes."})]}),p.jsx("button",{onClick:m,className:"self-end text-slate-400 hover:text-white transition","aria-label":"Cerrar explorador de miniversos",children:""})]}),p.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:Qf.map(y=>p.jsx("button",{onClick:()=>s(y.id),className:`rounded-full border px-4 py-2 text-sm transition ${t===y.id?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:y.label},y.id))}),p.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:t==="waitlist"?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"space-y-4 text-slate-300/90 text-sm leading-relaxed",children:[p.jsxs("div",{className:"glass-effect rounded-xl border border-white/5 p-4",children:[p.jsx("h3",{className:"font-display text-lg text-slate-100 mb-3",children:"Qu necesitas saber?"}),p.jsxs("ul",{className:"space-y-2 text-slate-300/80",children:[p.jsx("li",{children:" Algunos miniversos an estn bajo construccin."}),p.jsx("li",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),p.jsx("li",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl border border-purple-400/20 p-4",children:[p.jsx("h3",{className:"font-display text-lg text-purple-200 mb-3",children:"Qu recibirs?"}),p.jsx("p",{children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]})]}),p.jsxs("form",{className:"space-y-5",onSubmit:f,children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Nombre completo *"}),p.jsx("input",{name:"fullName",type:"text",required:!0,value:r.fullName,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Correo electrnico *"}),p.jsx("input",{name:"email",type:"email",required:!0,value:r.email,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400",placeholder:"nombre@correo.com"})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-sm font-medium text-slate-200",children:"Mensaje opcional"}),p.jsx("textarea",{name:"message",rows:3,value:r.message,onChange:d,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Comparte qu miniverso te emociona ms o si traes alguna propuesta."})]}),o==="error"?p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:c}):null,o==="success"?p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Quedas en lista para las prximas experiencias. Llegar un correo con la primera pista."}):null,p.jsx(Ae,{type:"submit",disabled:o==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:o==="loading"?"Guardando":"Quiero recibir las activaciones"})]})]}):p.jsx("div",{className:"md:col-span-2 grid md:grid-cols-3 gap-6",children:lG.map(y=>p.jsxs("div",{className:"glass-effect rounded-2xl border border-white/10 p-6",children:[p.jsx("h3",{className:"font-display text-xl text-slate-100 mb-3",children:y.title}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed mb-4",children:y.description}),p.jsx("span",{className:"text-xs uppercase tracking-[0.25em] text-purple-200/80",children:y.action})]},y.title))})}),p.jsxs("div",{className:"mt-8 flex items-center justify-between text-xs text-slate-500",children:[p.jsx("span",{children:h}),p.jsx("button",{onClick:m,className:"text-slate-400 hover:text-white transition",children:"Cerrar"})]})]})]}):null})},hG=6,Jf=17,Zf=75;function cN({value:n}){return p.jsx("div",{className:"w-full h-2 rounded-full bg-white/10 overflow-hidden",children:p.jsx("div",{className:"h-full bg-white/70",style:{width:`${Math.min(100,Math.max(0,n))}%`}})})}const fG=()=>{const[n,e]=A.useState(""),[t,s]=A.useState(!1),[r,i]=A.useState(""),[o,a]=A.useState(0),[c,u]=A.useState(!!"http://localhost:8787");A.useEffect(()=>{if(!c)return;let f=!0;async function m(){try{const w=await(await fetch("http://localhost:8787/stats/suscriptores",{cache:"no-store"})).json();if(!f)return;a(Number((w==null?void 0:w.total)||0))}catch(g){console.error("Error stats/suscriptores",g),u(!1)}}m();const y=setInterval(m,15e3);return()=>{f=!1,clearInterval(y)}},[c]);const d=A.useMemo(()=>{const f=o*hG,m=Math.floor(o/Jf),y=o%Jf,g=y===0?Jf:Jf-y,w=y/Jf*100,v=Math.floor(o/Zf),b=o%Zf,_=b===0?Zf:Zf-b,E=b/Zf*100;return{sesiones:f,residencias:m,residenciasFaltan:g,residenciasProg:w,escuelas:v,escuelasFaltan:_,escuelasProg:E}},[o]);async function h(){try{s(!0),i("");const f=await fetch("http://localhost:8787/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n})}),m=await f.json();if(!f.ok)throw new Error((m==null?void 0:m.error)||"No se pudo crear la sesin");window.location.href=m.url}catch(f){i(f.message)}finally{s(!1)}}return p.jsxs("div",{className:"max-w-xl mx-auto text-center space-y-6",children:[p.jsx(J.p,{className:"text-md text-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:"Cada suscripcin abre un umbral: sostiene el universo y activa impacto real en la causa social."}),p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 text-left text-slate-100 space-y-4",children:[p.jsxs("div",{className:"flex items-baseline justify-between",children:[p.jsx("p",{className:"text-sm opacity-80",children:"Suscriptores activos"}),p.jsx("p",{className:"text-2xl font-semibold",children:o})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm mb-1 opacity-80",children:"Terapias asignadas"}),p.jsxs("p",{className:"text-lg mb-2",children:[p.jsx("strong",{children:d.sesiones})," sesiones (1 suscripcin = 6 sesiones)"]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm opacity-80",children:[p.jsx("span",{children:"Residencias creativas"}),p.jsxs("span",{children:[d.residencias," activas"]})]}),p.jsx(cN,{value:d.residenciasProg}),p.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Faltan ",p.jsx("strong",{children:d.residenciasFaltan})," suscripciones para abrir la siguiente residencia ( 17/sub)."]})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-sm opacity-80",children:[p.jsx("span",{children:"Escuelas con app activa"}),p.jsxs("span",{children:[d.escuelas," escuelas"]})]}),p.jsx(cN,{value:d.escuelasProg}),p.jsxs("p",{className:"text-xs opacity-70 mt-1",children:["Faltan ",p.jsx("strong",{children:d.escuelasFaltan})," suscripciones para la prxima escuela ( 75/sub)."]})]}),p.jsx("p",{className:"text-[11px] leading-4 text-slate-300/80 pt-2",children:"* Isabel Ayuda para la Vida, A.C. no cobra al usuario por sesin. Las sesiones se asignan sin costo para las familias cuando se detecta riesgo, gracias a la combinacin de suscripciones, aportes simblicos y apoyos institucionales."})]}),p.jsxs("div",{className:"grid gap-3",children:[p.jsx("input",{type:"email",placeholder:"tu@email.com",value:n,onChange:f=>e(f.target.value),className:"w-full px-3 py-2 rounded text-black"}),p.jsx("button",{onClick:h,disabled:t||!n,className:"bg-white/90 text-black px-4 py-2 rounded disabled:opacity-50",children:t?"Creando sesin":"Quiero suscribirme"})]}),r&&p.jsx("p",{className:"text-red-300 text-sm",children:r})]})},tI="blog_posts",rv=[],uN=()=>`post-${Math.random().toString(36).slice(2,10)}`,CA=n=>({id:n.id??n.slug??uN(),slug:n.slug??`post-${n.id??uN()}`,title:n.title??"Entrada sin ttulo",excerpt:n.excerpt??n.summary??"",author:n.author??n.byline??"Autora pendiente",author_role:n.author_role??n.role??"",content:n.content??n.body??"",published_at:n.published_at??n.publish_date??null,read_time_minutes:n.read_time_minutes??n.read_time??null,tags:n.tags??[],featured_image_url:n.featured_image_url??n.cover_image??null});async function pG(){try{const{data:n,error:e}=await nt.from(tI).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).order("published_at",{ascending:!1}).limit(20);if(e)return console.error("[blogService] Error al obtener posts:",e.message),rv;if(!Array.isArray(n)||n.length===0)return rv;const t=n.filter(r=>r.is_published===!0||r.is_published===null||typeof r.is_published>"u").map(CA),s=rv.filter(r=>!t.some(i=>i.slug===r.slug)).map(CA);return[...t,...s]}catch(n){return console.error("[blogService] Excepcin al obtener posts:",n),rv}}async function mG(n){if(!n)return null;try{const{data:e,error:t}=await nt.from(tI).select(`
        id,
        slug,
        title,
        excerpt,
        author,
        author_role,
        content,
        published_at,
        read_time_minutes,
        tags,
        featured_image_url,
        is_published
      `).eq("slug",n).maybeSingle();return t?(console.error("[blogService] Error al obtener post por slug:",t.message),null):!e||e.is_published===!1?null:CA(e)}catch(e){return console.error("[blogService] Excepcin al buscar post por slug:",e),null}}const jn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),kA=[.001,0,0,.001,0,0],US=1.35,As={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},fi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},bm="pdfjs_internal_editor_",ce={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},_e={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},nI={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},At={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Nu={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},yy={ERRORS:0,WARNINGS:1,INFOS:5},Af={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},iv={moveTo:0,lineTo:1,curveTo:2,closePath:3},sI={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let L1=yy.WARNINGS;function gG(n){Number.isInteger(n)&&(L1=n)}function yG(){return L1}function D1(n){L1>=yy.INFOS&&console.info(`Info: ${n}`)}function ue(n){L1>=yy.WARNINGS&&console.warn(`Warning: ${n}`)}function We(n){throw new Error(n)}function Ee(n,e){n||We(e)}function vG(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Bk(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=_G(n)}catch{}}const s=e?URL.parse(n,e):URL.parse(n);return vG(s)?s:null}function $k(n,e,t=!1){const s=URL.parse(n);return s?(s.hash=e,s.href):t&&Bk(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function me(n,e,t,s=!1){return Object.defineProperty(n,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Su=function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e}();class dN extends Su{constructor(e,t){super(e,"PasswordException"),this.code=t}}class HS extends Su{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Kb extends Su{constructor(e){super(e,"InvalidPDFException")}}class xm extends Su{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class bG extends Su{constructor(e){super(e,"FormatError")}}class Co extends Su{constructor(e){super(e,"AbortException")}}function rI(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&We("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const s=[];for(let r=0;r<e;r+=t){const i=Math.min(r+t,e),o=n.subarray(r,i);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function vy(n){typeof n!="string"&&We("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=n.charCodeAt(s)&255;return t}function xG(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function wG(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function SG(){try{return new Function(""),!0}catch{return!1}}class Qt{static get isLittleEndian(){return me(this,"isLittleEndian",wG())}static get isEvalSupported(){return me(this,"isEvalSupported",SG())}static get isOffscreenCanvasSupported(){return me(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return me(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return me(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return me(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const GS=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var pd,Dv,Tm,TA;class Y{static makeHexColor(e,t,s){return`#${GS[e]}${GS[t]}${GS[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const r=e[s],i=e[s+1];e[s]=r*t[0]+i*t[2]+t[4],e[s+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const r=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5];for(let d=0;d<6;d+=2){const h=e[s+d],f=e[s+d+1];e[s+d]=h*r+f*o+c,e[s+d+1]=h*i+f*a+u}}static applyInverseTransform(e,t){const s=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-s*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,s){const r=t[0],i=t[1],o=t[2],a=t[3],c=t[4],u=t[5],d=e[0],h=e[1],f=e[2],m=e[3];let y=r*d+c,g=y,w=r*f+c,v=w,b=a*h+u,_=b,E=a*m+u,k=E;if(i!==0||o!==0){const T=i*d,P=i*f,N=o*h,M=o*m;y+=N,v+=N,w+=M,g+=M,b+=T,k+=T,E+=P,_+=P}s[0]=Math.min(s[0],y,w,g,v),s[1]=Math.min(s[1],b,E,_,k),s[2]=Math.max(s[2],y,w,g,v),s[3]=Math.max(s[3],b,E,_,k)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],r=e[1],i=e[2],o=e[3],a=s**2+r**2,c=s*i+r*o,u=i**2+o**2,d=(a+u)/2,h=Math.sqrt(d**2-(a*u-c**2));t[0]=Math.sqrt(d+h||1),t[1]=Math.sqrt(d-h||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[s,i,r,o]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,r,i){i[0]=Math.min(i[0],e,s),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,s),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,s,r,i,o,a,c,u){u[0]=Math.min(u[0],e,a),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,a),u[3]=Math.max(u[3],t,c),C(this,Tm,TA).call(this,e,s,i,a,t,r,o,c,3*(-e+3*(s-i)+a),6*(e-2*s+i),3*(s-e),u),C(this,Tm,TA).call(this,e,s,i,a,t,r,o,c,3*(-t+3*(r-o)+c),6*(t-2*r+o),3*(r-t),u)}}pd=new WeakSet,Dv=function(e,t,s,r,i,o,a,c,u,d){if(u<=0||u>=1)return;const h=1-u,f=u*u,m=f*u,y=h*(h*(h*e+3*u*t)+3*f*s)+m*r,g=h*(h*(h*i+3*u*o)+3*f*a)+m*c;d[0]=Math.min(d[0],y),d[1]=Math.min(d[1],g),d[2]=Math.max(d[2],y),d[3]=Math.max(d[3],g)},Tm=new WeakSet,TA=function(e,t,s,r,i,o,a,c,u,d,h,f){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&C(this,pd,Dv).call(this,e,t,s,r,i,o,a,c,-h/d,f);return}const m=d**2-4*h*u;if(m<0)return;const y=Math.sqrt(m),g=2*u;C(this,pd,Dv).call(this,e,t,s,r,i,o,a,c,(-d+y)/g,f),C(this,pd,Dv).call(this,e,t,s,r,i,o,a,c,(-d-y)/g,f)},x(Y,pd),x(Y,Tm);function _G(n){return decodeURIComponent(escape(n))}let WS=null,hN=null;function iI(n){return WS||(WS=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,hN=new Map([["","t"]])),n.replaceAll(WS,(e,t,s)=>t?t.normalize("NFKC"):hN.get(s))}function Vk(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),rI(n)}const zk="pdfjs_internal_id_";function AG(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,r,...i]=t;if(!n(s)&&!Number.isInteger(s)||!e(r))return!1;const o=i.length;let a=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of i)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function wn(n,e,t){return Math.min(Math.max(n,e),t)}function oI(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(rI(n))}function EG(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):vy(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class wm{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function r(i){var c;if(!i)return;let o=null;const a=i.name;if(a==="#text")o=i.value;else if(wm.shouldBuildText(a))(c=i==null?void 0:i.attributes)!=null&&c.textContent?o=i.attributes.textContent:i.value&&(o=i.value);else return;if(o!==null&&t.push({str:o}),!!i.children)for(const u of i.children)r(u)}return r(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Uk{static setupStorage(e,t,s,r,i){const o=r.getValue(t,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?e.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&e.removeAttribute("checked"),i==="print")break;e.addEventListener("change",a=>{r.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),i==="print")break;e.addEventListener("input",a=>{r.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const c=a.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:r,linkService:i}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!a||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}a&&i.addLinkAttributes(e,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(e,o.dataId,t,s)}static render(e){var h,f;const t=e.annotationStorage,s=e.linkService,r=e.xfaHtml,i=e.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:i,linkService:s});const a=i!=="richText",c=e.div;if(c.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}a&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const m=document.createTextNode(r.value);o.append(m),a&&wm.shouldBuildText(r.name)&&u.push(m)}return{textDivs:u}}const d=[[r,-1,o]];for(;d.length>0;){const[m,y,g]=d.at(-1);if(y+1===m.children.length){d.pop();continue}const w=m.children[++d.at(-1)[1]];if(w===null)continue;const{name:v}=w;if(v==="#text"){const _=document.createTextNode(w.value);u.push(_),g.append(_);continue}const b=(h=w==null?void 0:w.attributes)!=null&&h.xmlns?document.createElementNS(w.attributes.xmlns,v):document.createElement(v);if(g.append(b),w.attributes&&this.setAttributes({html:b,element:w,storage:t,intent:i,linkService:s}),((f=w.children)==null?void 0:f.length)>0)d.push([w,-1,b]);else if(w.value){const _=document.createTextNode(w.value);a&&wm.shouldBuildText(v)&&u.push(_),b.append(_)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const xi="http://www.w3.org/2000/svg",_l=class _l{};U(_l,"CSS",96),U(_l,"PDF",72),U(_l,"PDF_TO_CSS_UNITS",_l.CSS/_l.PDF);let ko=_l;async function jf(n,e="text"){if(hp(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class by{constructor({viewBox:e,userUnit:t,scale:s,rotation:r,offsetX:i=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=r,this.offsetX=i,this.offsetY=o,s*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let d,h,f,m;switch(r%=360,r<0&&(r+=360),r){case 180:d=-1,h=0,f=0,m=1;break;case 90:d=0,h=1,f=1,m=0;break;case 270:d=0,h=-1,f=-1,m=0;break;case 0:d=1,h=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(f=-f,m=-m);let y,g,w,v;d===0?(y=Math.abs(u-e[1])*s+i,g=Math.abs(c-e[0])*s+o,w=(e[3]-e[1])*s,v=(e[2]-e[0])*s):(y=Math.abs(c-e[0])*s+i,g=Math.abs(u-e[1])*s+o,w=(e[2]-e[0])*s,v=(e[3]-e[1])*s),this.transform=[d*s,h*s,f*s,m*s,y-d*s*c-f*s*u,g-h*s*c-m*s*u],this.width=w,this.height=v}get rawDims(){const e=this.viewBox;return me(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}={}){return new by({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const s=[e,t];return Y.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];Y.applyTransform(t,this.transform);const s=[e[2],e[3]];return Y.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return Y.applyInverseTransform(s,this.transform),s}}class I1 extends Su{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function xy(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function O1(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function aI(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function lI(n,e="document.pdf"){if(typeof n!="string")return e;if(xy(n))return ue('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!s)return e;const r=a=>{try{let c=decodeURIComponent(a);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:a):c}catch{return a}},i=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(i.test(o))return r(o);if(s.searchParams.size>0){const a=Array.from(s.searchParams.values()).reverse();for(const u of a)if(i.test(u))return r(u);const c=Array.from(s.searchParams.keys()).reverse();for(const u of c)if(i.test(u))return r(u)}if(s.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(c)return r(c[0])}return e}class fN{constructor(){U(this,"started",Object.create(null));U(this,"times",[])}time(e){e in this.started&&ue(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ue(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:r,end:i}of this.times)e.push(`${s.padEnd(t)} ${i-r}ms
`);return e.join("")}}function hp(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function Rs(n){n.preventDefault()}function ht(n){n.preventDefault(),n.stopPropagation()}function CG(n){console.log("Deprecated API usage: "+n)}var Pm;class Sm{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;l(this,Pm)||S(this,Pm,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=l(this,Pm).exec(e);if(!t)return null;const s=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(o+=d,a+=h):u==="+"&&(o-=d,a-=h),new Date(Date.UTC(s,r,i,o,a,c))}}Pm=new WeakMap,x(Sm,Pm,void 0);function cI(n,{scale:e=1,rotation:t=0}){const{width:s,height:r}=n.attributes.style,i=[0,0,parseInt(s),parseInt(r)];return new by({viewBox:i,userUnit:1,scale:e,rotation:t})}function Lf(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ue(`Not a valid color format: "${n}"`),[0,0,0])}function kG(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;n.set(t,Lf(s))}e.remove()}function ut(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform();return[e,t,s,r,i,o]}function Or(n){const{a:e,b:t,c:s,d:r,e:i,f:o}=n.getTransform().invertSelf();return[e,t,s,r,i,o]}function nl(n,e,t=!1,s=!0){if(e instanceof by){const{pageWidth:r,pageHeight:i}=e.rawDims,{style:o}=n,a=Qt.isCSSRoundSupported,c=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${i}px`,d=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,h=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=d,o.height=h):(o.width=h,o.height=d)}s&&n.setAttribute("data-main-rotation",e.rotation)}class Nr{constructor(){const{pixelRatio:e}=Nr;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,r,i=-1){let o=1/0,a=1/0,c=1/0;s=Nr.capPixels(s,i),s>0&&(o=Math.sqrt(s/(e*t))),r!==-1&&(a=r/e,c=r/t);const u=Math.min(o,a,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Xb=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class TG{static get isDarkMode(){var e;return me(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class uI{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),me(this,"commentForegroundColor",Lf(s))}}function dI(n,e,t,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return n=Math.round(n*s+r),e=Math.round(e*s+r),t=Math.round(t*s+r),[n,e,t]}function pN(n,e){const t=n[0]/255,s=n[1]/255,r=n[2]/255,i=Math.max(t,s,r),o=Math.min(t,s,r),a=(i+o)/2;if(i===o)e[0]=e[1]=0;else{const c=i-o;switch(e[1]=a<.5?c/(i+o):c/(2-i-o),i){case t:e[0]=((s-r)/c+(s<r?6:0))*60;break;case s:e[0]=((r-t)/c+2)*60;break;case r:e[0]=((t-s)/c+4)*60;break}}e[2]=a}function PA(n,e){const t=n[0],s=n[1],r=n[2],i=(1-Math.abs(2*r-1))*s,o=i*(1-Math.abs(t/60%2-1)),a=r-i/2;switch(Math.floor(t/60)){case 0:e[0]=i+a,e[1]=o+a,e[2]=a;break;case 1:e[0]=o+a,e[1]=i+a,e[2]=a;break;case 2:e[0]=a,e[1]=i+a,e[2]=o+a;break;case 3:e[0]=a,e[1]=o+a,e[2]=i+a;break;case 4:e[0]=o+a,e[1]=a,e[2]=i+a;break;case 5:case 6:e[0]=i+a,e[1]=a,e[2]=o+a;break}}function mN(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function gN(n,e,t){PA(n,t),t.map(mN);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];PA(e,t),t.map(mN);const r=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const yN=new Map;function hI(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=yN.get(t);if(s)return s;const r=new Float32Array(9),i=r.subarray(0,3),o=r.subarray(3,6);pN(n,o);const a=r.subarray(6,9);pN(e,a);const c=a[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),gN(o,a,i)<u){let d,h;c?(d=o[2],h=1):(d=0,h=o[2]);const f=.005;for(;h-d>f;){const m=o[2]=(d+h)/2;c===gN(o,a,i)<u?d=m:h=m}o[2]=c?h:d}return PA(o,i),s=Y.makeHexColor(Math.round(i[0]*255),Math.round(i[1]*255),Math.round(i[2]*255)),yN.set(t,s),s}function Hk({html:n,dir:e,className:t},s){const r=document.createDocumentFragment();if(typeof n=="string"){const i=document.createElement("p");i.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let a=0,c=o.length;a<c;++a){const u=o[a];i.append(document.createTextNode(u)),a<c-1&&i.append(document.createElement("br"))}r.append(i)}else Uk.render({xfaHtml:n,div:r,intent:"richText"});r.firstChild.classList.add("richText",t),s.append(r)}var $o,Vo,Fs,Bs,Nm,zo,md,gd,Rm,ax,fI,lx,pI,cx,mI,Uo,Ru,Rl,fp;const Ei=class Ei{constructor(e){x(this,lx);x(this,cx);x(this,Uo);x(this,Rl);x(this,$o,null);x(this,Vo,null);x(this,Fs,void 0);x(this,Bs,null);x(this,Nm,null);x(this,zo,null);x(this,md,null);x(this,gd,null);S(this,Fs,e),l(Ei,Rm)||S(Ei,Rm,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=S(this,$o,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=l(this,Fs)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Rs,{signal:t}),e.addEventListener("pointerdown",C(Ei,ax,fI),{signal:t}));const s=S(this,Bs,document.createElement("div"));s.className="buttons",e.append(s);const r=l(this,Fs).toolbarPosition;if(r){const{style:i}=e,o=l(this,Fs)._uiManager.direction==="ltr"?1-r[0]:r[0];i.insetInlineEnd=`${100*o}%`,i.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return l(this,$o)}hide(){var e;l(this,$o).classList.add("hidden"),(e=l(this,Vo))==null||e.hideDropdown()}show(){var e,t;l(this,$o).classList.remove("hidden"),(e=l(this,Nm))==null||e.shown(),(t=l(this,zo))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=l(this,Fs),s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",l(Ei,Rm)[e]),C(this,Uo,Ru).call(this,s)&&s.addEventListener("click",r=>{t.delete()},{signal:t._signal}),l(this,Bs).append(s)}async addAltText(e){const t=await e.render();C(this,Uo,Ru).call(this,t),l(this,Bs).append(t,l(this,Rl,fp)),S(this,Nm,e)}addComment(e,t=null){if(l(this,zo))return;const s=e.renderForToolbar();if(!s)return;C(this,Uo,Ru).call(this,s);const r=S(this,md,l(this,Rl,fp));t?(l(this,Bs).insertBefore(s,t),l(this,Bs).insertBefore(r,t)):l(this,Bs).append(s,r),S(this,zo,e),e.toolbar=this}addColorPicker(e){if(l(this,Vo))return;S(this,Vo,e);const t=e.renderButton();C(this,Uo,Ru).call(this,t),l(this,Bs).append(t,l(this,Rl,fp))}async addEditSignatureButton(e){const t=S(this,gd,await e.renderEditButton(l(this,Fs)));C(this,Uo,Ru).call(this,t),l(this,Bs).append(t,l(this,Rl,fp))}removeButton(e){var t,s;switch(e){case"comment":(t=l(this,zo))==null||t.removeToolbarCommentButton(),S(this,zo,null),(s=l(this,md))==null||s.remove(),S(this,md,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const r=l(this,Bs).querySelector(s);r&&e==="comment"&&this.addComment(t,r)}updateEditSignatureButton(e){l(this,gd)&&(l(this,gd).title=e)}remove(){var e;l(this,$o).remove(),(e=l(this,Vo))==null||e.destroy(),S(this,Vo,null)}};$o=new WeakMap,Vo=new WeakMap,Fs=new WeakMap,Bs=new WeakMap,Nm=new WeakMap,zo=new WeakMap,md=new WeakMap,gd=new WeakMap,Rm=new WeakMap,ax=new WeakSet,fI=function(e){e.stopPropagation()},lx=new WeakSet,pI=function(e){l(this,Fs)._focusEventsAllowed=!1,ht(e)},cx=new WeakSet,mI=function(e){l(this,Fs)._focusEventsAllowed=!0,ht(e)},Uo=new WeakSet,Ru=function(e){const t=l(this,Fs)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",C(this,lx,pI).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",C(this,cx,mI).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Rs,{signal:t}),!0)},Rl=new WeakSet,fp=function(){const e=document.createElement("div");return e.className="divider",e},x(Ei,ax),x(Ei,Rm,null);let NA=Ei;var Mm,Ml,Ti,ux,gI,dx,yI,jm,RA;class PG{constructor(e){x(this,ux);x(this,dx);x(this,jm);x(this,Mm,null);x(this,Ml,null);x(this,Ti,void 0);S(this,Ti,e)}show(e,t,s){const[r,i]=C(this,dx,yI).call(this,t,s),{style:o}=l(this,Ml)||S(this,Ml,C(this,ux,gI).call(this));e.append(l(this,Ml)),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*i}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,Ml).remove()}}Mm=new WeakMap,Ml=new WeakMap,Ti=new WeakMap,ux=new WeakSet,gI=function(){const e=S(this,Ml,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=l(this,Ti)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Rs,{signal:t});const s=S(this,Mm,document.createElement("div"));return s.className="buttons",e.append(s),l(this,Ti).hasCommentManager()&&C(this,jm,RA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{l(this,Ti).commentSelection("floating_button")}),C(this,jm,RA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{l(this,Ti).highlightSelection("floating_button")}),e},dx=new WeakSet,yI=function(e,t){let s=0,r=0;for(const i of e){const o=i.y+i.height;if(o<s)continue;const a=i.x+(t?i.width:0);if(o>s){r=a,s=o;continue}t?a>r&&(r=a):a<r&&(r=a)}return[t?1-r:r,s]},jm=new WeakSet,RA=function(e,t,s,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const o=document.createElement("span");i.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const a=l(this,Ti)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Rs,{signal:a}),i.addEventListener("click",r,{signal:a})),l(this,Mm).append(i)};function vI(n,e,t){for(const s of t)e.addEventListener(s,n[s].bind(n))}var hx;class NG{constructor(){x(this,hx,0)}get id(){return`${bm}${jt(this,hx)._++}`}}hx=new WeakMap;var yd,Lm,pn,vd,Iv;const lT=class lT{constructor(){x(this,vd);x(this,yd,Vk());x(this,Lm,0);x(this,pn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const i=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return me(this,"_isSVGFittingCanvas",i)}async getFromFile(e){const{lastModified:t,name:s,size:r,type:i}=e;return C(this,vd,Iv).call(this,`${t}_${s}_${r}_${i}`,e)}async getFromUrl(e){return C(this,vd,Iv).call(this,e,e)}async getFromBlob(e,t){const s=await t;return C(this,vd,Iv).call(this,e,s)}async getFromId(e){l(this,pn)||S(this,pn,new Map);const t=l(this,pn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){l(this,pn)||S(this,pn,new Map);let s=l(this,pn).get(e);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${l(this,yd)}_${jt(this,Lm)._++}`,refCounter:1,isSvg:!1},l(this,pn).set(e,s),l(this,pn).set(s.id,s),s}getSvgUrl(e){const t=l(this,pn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;l(this,pn)||S(this,pn,new Map);const t=l(this,pn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}(r=s.close)==null||r.call(s),t.bitmap=null}isValidId(e){return e.startsWith(`image_${l(this,yd)}_`)}};yd=new WeakMap,Lm=new WeakMap,pn=new WeakMap,vd=new WeakSet,Iv=async function(e,t){l(this,pn)||S(this,pn,new Map);let s=l(this,pn).get(e);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,yd)}_${jt(this,Lm)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(s.url=t,r=await jf(t,"blob")):t instanceof File?r=s.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const i=lT._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((u,d)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,u()},o.onload=async()=>{const h=s.svgUrl=o.result;a.src=await i?`${h}#svgView(preserveAspectRatio(none))`:h},a.onerror=o.onerror=d});o.readAsDataURL(r),await c}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){ue(r),s=null}return l(this,pn).set(e,s),s&&l(this,pn).set(s.id,s),s};let MA=lT;var Et,Ho,Dm,ct;class RG{constructor(e=128){x(this,Et,[]);x(this,Ho,!1);x(this,Dm,void 0);x(this,ct,-1);S(this,Dm,e)}add({cmd:e,undo:t,post:s,mustExec:r,type:i=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(r&&e(),l(this,Ho))return;const c={cmd:e,undo:t,post:s,type:i};if(l(this,ct)===-1){l(this,Et).length>0&&(l(this,Et).length=0),S(this,ct,0),l(this,Et).push(c);return}if(o&&l(this,Et)[l(this,ct)].type===i){a&&(c.undo=l(this,Et)[l(this,ct)].undo),l(this,Et)[l(this,ct)]=c;return}const u=l(this,ct)+1;u===l(this,Dm)?l(this,Et).splice(0,1):(S(this,ct,u),u<l(this,Et).length&&l(this,Et).splice(u)),l(this,Et).push(c)}undo(){if(l(this,ct)===-1)return;S(this,Ho,!0);const{undo:e,post:t}=l(this,Et)[l(this,ct)];e(),t==null||t(),S(this,Ho,!1),S(this,ct,l(this,ct)-1)}redo(){if(l(this,ct)<l(this,Et).length-1){S(this,ct,l(this,ct)+1),S(this,Ho,!0);const{cmd:e,post:t}=l(this,Et)[l(this,ct)];e(),t==null||t(),S(this,Ho,!1)}}hasSomethingToUndo(){return l(this,ct)!==-1}hasSomethingToRedo(){return l(this,ct)<l(this,Et).length-1}cleanType(e){if(l(this,ct)!==-1){for(let t=l(this,ct);t>=0;t--)if(l(this,Et)[t].type!==e){l(this,Et).splice(t+1,l(this,ct)-t),S(this,ct,t);return}l(this,Et).length=0,S(this,ct,-1)}}destroy(){S(this,Et,null)}}Et=new WeakMap,Ho=new WeakMap,Dm=new WeakMap,ct=new WeakMap;var fx,bI;class wy{constructor(e){x(this,fx);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Qt.platform;for(const[s,r,i={}]of e)for(const o of s){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:r,options:i}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(C(this,fx,bI).call(this,t));if(!s)return;const{callback:r,options:{bubbles:i=!1,args:o=[],checker:a=null}}=s;a&&!a(e,t)||(r.bind(e,...o,t)(),i||ht(t))}}fx=new WeakSet,bI=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const px=class px{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return kG(e),me(this,"_colors",e)}convert(e){const t=Lf(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,r]of this._colors)if(r.every((i,o)=>i===t[o]))return px._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?Y.makeHexColor(...t):e}};U(px,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let jA=px;var bd,os,xd,bt,It,wd,$s,Sd,Vs,mn,Go,Wo,_d,qo,zr,zs,jl,Im,Om,Ad,Fm,Ur,Ko,Ed,Xo,Hr,mx,Yo,Cd,Bm,Qo,Ll,kd,Jo,$m,Pt,De,Pi,Zo,ea,Vm,Td,zm,ta,Gr,Ni,Um,Hm,Us,Pd,Ov,Gm,LA,gx,xI,yx,wI,Dl,pp,vx,SI,bx,_I,xx,AI,Wm,DA,wx,EI,qm,IA,Km,OA,Sx,CI,en,kn,ur,wi,_x,kI,Ax,TI,Xm,FA,Ex,PI,Il,mp,Ym,BA;const td=class td{constructor(e,t,s,r,i,o,a,c,u,d,h,f,m,y,g,w){x(this,Pd);x(this,Gm);x(this,gx);x(this,yx);x(this,Dl);x(this,vx);x(this,bx);x(this,xx);x(this,Wm);x(this,wx);x(this,qm);x(this,Km);x(this,Sx);x(this,en);x(this,ur);x(this,_x);x(this,Ax);x(this,Xm);x(this,Ex);x(this,Il);x(this,Ym);x(this,bd,new AbortController);x(this,os,null);x(this,xd,null);x(this,bt,new Map);x(this,It,new Map);x(this,wd,null);x(this,$s,null);x(this,Sd,null);x(this,Vs,new RG);x(this,mn,null);x(this,Go,null);x(this,Wo,null);x(this,_d,0);x(this,qo,new Set);x(this,zr,null);x(this,zs,null);x(this,jl,new Set);U(this,"_editorUndoBar",null);x(this,Im,!1);x(this,Om,!1);x(this,Ad,!1);x(this,Fm,null);x(this,Ur,null);x(this,Ko,null);x(this,Ed,null);x(this,Xo,!1);x(this,Hr,null);x(this,mx,new NG);x(this,Yo,!1);x(this,Cd,!1);x(this,Bm,!1);x(this,Qo,null);x(this,Ll,null);x(this,kd,null);x(this,Jo,null);x(this,$m,null);x(this,Pt,ce.NONE);x(this,De,new Set);x(this,Pi,null);x(this,Zo,null);x(this,ea,null);x(this,Vm,null);x(this,Td,null);x(this,zm,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});x(this,ta,[0,0]);x(this,Gr,null);x(this,Ni,null);x(this,Um,null);x(this,Hm,null);x(this,Us,null);const v=this._signal=l(this,bd).signal;S(this,Ni,e),S(this,Um,t),S(this,Hm,s),S(this,wd,r),S(this,mn,i),S(this,Zo,o),S(this,Td,c),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:v}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),a._on("setpreference",this.onSetPreference.bind(this),{signal:v}),a._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),window.addEventListener("pointerdown",()=>{S(this,Cd,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{S(this,Cd,!1)},{capture:!0,signal:v}),C(this,vx,SI).call(this),C(this,Sx,CI).call(this),C(this,Wm,DA).call(this),S(this,$s,c.annotationStorage),S(this,Fm,c.filterFactory),S(this,ea,u),S(this,Ed,d||null),S(this,Im,h),S(this,Om,f),S(this,Ad,m),S(this,$m,y||null),this.viewParameters={realScale:ko.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=w!==!1,i==null||i.setSidebarUiManager(this)}static get _keyboardManager(){const e=td.prototype,t=o=>l(o,Ni).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return me(this,"_keyboardManager",new wy([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ni).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,Ni).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}destroy(){var e,t,s,r,i,o,a,c,u;(e=l(this,Us))==null||e.resolve(),S(this,Us,null),(t=l(this,bd))==null||t.abort(),S(this,bd,null),this._signal=null;for(const d of l(this,It).values())d.destroy();l(this,It).clear(),l(this,bt).clear(),l(this,jl).clear(),(s=l(this,Jo))==null||s.clear(),S(this,os,null),l(this,De).clear(),l(this,Vs).destroy(),(r=l(this,wd))==null||r.destroy(),(i=l(this,mn))==null||i.destroy(),(o=l(this,Zo))==null||o.destroy(),(a=l(this,Hr))==null||a.hide(),S(this,Hr,null),(c=l(this,kd))==null||c.destroy(),S(this,kd,null),S(this,xd,null),l(this,Ur)&&(clearTimeout(l(this,Ur)),S(this,Ur,null)),l(this,Gr)&&(clearTimeout(l(this,Gr)),S(this,Gr,null)),(u=this._editorUndoBar)==null||u.destroy(),S(this,Td,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return l(this,$m)}get useNewAltTextFlow(){return l(this,Om)}get useNewAltTextWhenAddingImage(){return l(this,Ad)}get hcmFilter(){return me(this,"hcmFilter",l(this,ea)?l(this,Fm).addHCMFilter(l(this,ea).foreground,l(this,ea).background):"none")}get direction(){return me(this,"direction",getComputedStyle(l(this,Ni)).direction)}get _highlightColors(){return me(this,"_highlightColors",l(this,Ed)?new Map(l(this,Ed).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return me(this,"highlightColors",null);const t=new Map,s=!!l(this,ea);for(const[r,i]of e){const o=r.endsWith("_HCM");if(s&&o){t.set(r.replace("_HCM",""),i);continue}!s&&!o&&t.set(r,i)}return me(this,"highlightColors",t)}get highlightColorNames(){return me(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Wo,e)}setMainHighlightColorPicker(e){S(this,kd,e)}editAltText(e,t=!1){var s;(s=l(this,wd))==null||s.editAltText(this,e,t)}hasCommentManager(){return!!l(this,mn)}editComment(e,t,s,r){var i;(i=l(this,mn))==null||i.showDialog(this,e,t,s,r)}selectComment(e,t){const s=l(this,It).get(e),r=s==null?void 0:s.getEditorByUID(t);r==null||r.toggleComment(!0,!0)}updateComment(e){var t;(t=l(this,mn))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=l(this,mn))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=l(this,mn))==null||t.removeComments([e.uid])}toggleComment(e,t,s=void 0){var r;(r=l(this,mn))==null||r.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){var s;return e&&((s=l(this,mn))==null?void 0:s.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=l(this,mn))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(l(this,It).has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),r=i=>{i.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await s}getSignature(e){var t;(t=l(this,Zo))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return l(this,Zo)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":S(this,Ad,t);break}}onPageChanging({pageNumber:e}){S(this,_d,e-1)}focusMainContainer(){l(this,Ni).focus()}findParent(e,t){for(const s of l(this,It).values()){const{x:r,y:i,width:o,height:a}=s.div.getBoundingClientRect();if(e>=r&&e<=r+o&&t>=i&&t<=i+a)return s}return null}disableUserSelect(e=!1){l(this,Um).classList.toggle("noUserSelect",e)}addShouldRescale(e){l(this,jl).add(e)}removeShouldRescale(e){l(this,jl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*ko.PDF_TO_CSS_UNITS;for(const s of l(this,jl))s.onScaleChanging();(t=l(this,Wo))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a}=s,c=s.toString(),d=C(this,Pd,Ov).call(this,s).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;s.empty();const f=C(this,Gm,LA).call(this,d),m=l(this,Pt)===ce.NONE,y=()=>{const g=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:a,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(g==null||g.editComment())};if(m){this.switchToMode(ce.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!l(this,$s))return null;const t=`${bm}${e}`,s=l(this,$s).getRawValue(t);return s&&l(this,$s).remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&l(this,$s)&&!l(this,$s).has(e.id)&&l(this,$s).setValue(e.id,e)}a11yAlert(e,t=null){const s=l(this,Hm);s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,l(this,Xo)&&(S(this,Xo,!1),C(this,Dl,pp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of l(this,De))if(t.div.contains(e)){S(this,Ll,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!l(this,Ll))return;const[e,t]=l(this,Ll);S(this,Ll,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){C(this,Wm,DA).call(this),C(this,qm,IA).call(this)}removeEditListeners(){C(this,wx,EI).call(this),C(this,Km,OA).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of l(this,zs))if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of l(this,zs))if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var s;if(e.preventDefault(),(s=l(this,os))==null||s.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of l(this,De)){const i=r.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const i of t.items)for(const o of l(this,zs))if(o.isHandlingMimeForPasting(i.type)){o.paste(i,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(i){ue(`paste: "${i.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const i=[];for(const c of s){const u=await r.deserialize(c);if(!u)return;i.push(u)}const o=()=>{for(const c of i)C(this,Xm,FA).call(this,c);C(this,Ym,BA).call(this,i)},a=()=>{for(const c of i)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(i){ue(`paste: "${i.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,Pt)!==ce.NONE&&!this.isEditorHandlingKeyboard&&td._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,Xo)&&(S(this,Xo,!1),C(this,Dl,pp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(C(this,bx,_I).call(this),C(this,qm,IA).call(this),C(this,en,kn).call(this,{isEditing:l(this,Pt)!==ce.NONE,isEmpty:C(this,Il,mp).call(this),hasSomethingToUndo:l(this,Vs).hasSomethingToUndo(),hasSomethingToRedo:l(this,Vs).hasSomethingToRedo(),hasSelectedEditor:!1})):(C(this,xx,AI).call(this),C(this,Km,OA).call(this),C(this,en,kn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!l(this,zs)){S(this,zs,e);for(const t of l(this,zs))C(this,ur,wi).call(this,t.defaultPropertiesToUpdate)}}getId(){return l(this,mx).id}get currentLayer(){return l(this,It).get(l(this,_d))}getLayer(e){return l(this,It).get(e)}get currentPageIndex(){return l(this,_d)}addLayer(e){l(this,It).set(e.pageIndex,e),l(this,Yo)?e.enable():e.disable()}removeLayer(e){l(this,It).delete(e.pageIndex)}async updateMode(e,t=null,s=!1,r=!1,i=!1){var o,a,c,u,d,h;if(l(this,Pt)!==e&&!(l(this,Us)&&(await l(this,Us).promise,!l(this,Us)))){if(S(this,Us,Promise.withResolvers()),(o=l(this,Wo))==null||o.commitOrRemove(),l(this,Pt)===ce.POPUP&&((a=l(this,mn))==null||a.hideSidebar()),(c=l(this,mn))==null||c.destroyPopup(),S(this,Pt,e),e===ce.NONE){this.setEditingState(!1),C(this,Ax,TI).call(this);for(const f of l(this,bt).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),l(this,Us).resolve();return}for(const f of l(this,bt).values())f.addStandaloneCommentButton();e===ce.SIGNATURE&&await((d=l(this,Zo))==null?void 0:d.loadSignatures()),this.setEditingState(!0),await C(this,_x,kI).call(this),this.unselectAll();for(const f of l(this,It).values())f.updateMode(e);if(e===ce.POPUP){l(this,xd)||S(this,xd,await l(this,Td).getAnnotationsByType(new Set(l(this,zs).map(y=>y._editorType))));const f=new Set,m=[];for(const y of l(this,bt).values()){const{annotationElementId:g,hasComment:w,deleted:v}=y;g&&f.add(g),w&&!v&&m.push(y.getData())}for(const y of l(this,xd)){const{id:g,popupRef:w,contentsObj:v}=y;w&&(v!=null&&v.str)&&!f.has(g)&&!l(this,qo).has(g)&&m.push(y)}(h=l(this,mn))==null||h.showSidebar(m)}if(!t){s&&this.addNewEditorFromKeyboard(),l(this,Us).resolve();return}for(const f of l(this,bt).values())f.uid===t?(this.setSelected(f),i?f.editComment():r?f.enterInEditMode():f.focus()):f.unselect();l(this,Us).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==l(this,Pt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(l(this,zs)){switch(e){case _e.CREATE:this.currentLayer.addNewEditor(t);return;case _e.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Vm)||S(this,Vm,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of l(this,De))s.updateParams(e,t);else for(const s of l(this,zs))s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){var i;for(const o of l(this,bt).values())o.editorType===e&&o.show(t);(((i=l(this,Vm))==null?void 0:i.get(_e.HIGHLIGHT_SHOW_ALL))??!0)!==t&&C(this,ur,wi).call(this,[[_e.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(l(this,Bm)!==e){S(this,Bm,e);for(const t of l(this,It).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of l(this,bt).values())t.pageIndex===e&&(yield t)}getEditor(e){return l(this,bt).get(e)}addEditor(e){l(this,bt).set(e.id,e)}removeEditor(e){var t,s;e.div.contains(document.activeElement)&&(l(this,Ur)&&clearTimeout(l(this,Ur)),S(this,Ur,setTimeout(()=>{this.focusMainContainer(),S(this,Ur,null)},0))),l(this,bt).delete(e.id),e.annotationElementId&&((t=l(this,Jo))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!l(this,qo).has(e.annotationElementId))&&((s=l(this,$s))==null||s.remove(e.id))}addDeletedAnnotationElement(e){l(this,qo).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return l(this,qo).has(e)}removeDeletedAnnotationElement(e){l(this,qo).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){l(this,os)!==e&&(S(this,os,e),e&&C(this,ur,wi).call(this,e.propertiesToUpdate))}updateUI(e){l(this,Ex,PI)===e&&C(this,ur,wi).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){C(this,ur,wi).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(l(this,De).has(e)){l(this,De).delete(e),e.unselect(),C(this,en,kn).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,De).add(e),e.select(),C(this,ur,wi).call(this,e.propertiesToUpdate),C(this,en,kn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=l(this,Wo))==null||t.commitOrRemove();for(const s of l(this,De))s!==e&&s.unselect();l(this,De).clear(),l(this,De).add(e),e.select(),C(this,ur,wi).call(this,e.propertiesToUpdate),C(this,en,kn).call(this,{hasSelectedEditor:!0})}isSelected(e){return l(this,De).has(e)}get firstSelectedEditor(){return l(this,De).values().next().value}unselect(e){e.unselect(),l(this,De).delete(e),C(this,en,kn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,De).size!==0}get isEnterHandled(){return l(this,De).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;l(this,Vs).undo(),C(this,en,kn).call(this,{hasSomethingToUndo:l(this,Vs).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:C(this,Il,mp).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){l(this,Vs).redo(),C(this,en,kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Vs).hasSomethingToRedo(),isEmpty:C(this,Il,mp).call(this)})}addCommands(e){l(this,Vs).add(e),C(this,en,kn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:C(this,Il,mp).call(this)})}cleanUndoStack(e){l(this,Vs).cleanType(e)}delete(){var i;this.commitOrRemove();const e=(i=this.currentLayer)==null?void 0:i.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...l(this,De)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(r,t.length===1?t[0].editorType:t.length);for(const a of t)a.remove()},r=()=>{for(const o of t)C(this,Xm,FA).call(this,o)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=l(this,os))==null||e.commitOrRemove()}hasSomethingToControl(){return l(this,os)||this.hasSelection}selectAll(){for(const e of l(this,De))e.commit();C(this,Ym,BA).call(this,l(this,bt).values())}unselectAll(){var e;if(!(l(this,os)&&(l(this,os).commitOrRemove(),l(this,Pt)!==ce.NONE))&&!((e=l(this,Wo))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of l(this,De))t.unselect();l(this,De).clear(),C(this,en,kn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,ta)[0]+=e,l(this,ta)[1]+=t;const[r,i]=l(this,ta),o=[...l(this,De)],a=1e3;l(this,Gr)&&clearTimeout(l(this,Gr)),S(this,Gr,setTimeout(()=>{S(this,Gr,null),l(this,ta)[0]=l(this,ta)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,bt).has(c.id)&&(c.translateInPage(r,i),c.translationDone())},undo:()=>{for(const c of o)l(this,bt).has(c.id)&&(c.translateInPage(-r,-i),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,zr,new Map);for(const e of l(this,De))l(this,zr).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,zr))return!1;this.disableUserSelect(!1);const e=l(this,zr);S(this,zr,null);let t=!1;for(const[{x:r,y:i,pageIndex:o},a]of e)a.newX=r,a.newY=i,a.newPageIndex=o,t||(t=r!==a.savedX||i!==a.savedY||o!==a.savedPageIndex);if(!t)return!1;const s=(r,i,o,a)=>{if(l(this,bt).has(r.id)){const c=l(this,It).get(a);c?r._setParentAndPosition(c,i,o):(r.pageIndex=a,r.x=i,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:i,newY:o,newPageIndex:a}]of e)s(r,i,o,a)},undo:()=>{for(const[r,{savedX:i,savedY:o,savedPageIndex:a}]of e)s(r,i,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(l(this,zr))for(const s of l(this,zr).keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||l(this,De).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return l(this,os)===e}getActive(){return l(this,os)}getMode(){return l(this,Pt)}isEditingMode(){return l(this,Pt)!==ce.NONE}get imageManager(){return me(this,"imageManager",new MA)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:s,y:r,width:i,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(u,d,h,f)=>({x:(d-r)/o,y:1-(u+h-s)/i,width:f/o,height:h/i});break;case"180":a=(u,d,h,f)=>({x:1-(u+h-s)/i,y:1-(d+f-r)/o,width:h/i,height:f/o});break;case"270":a=(u,d,h,f)=>({x:1-(d+f-r)/o,y:(u-s)/i,width:f/o,height:h/i});break;default:a=(u,d,h,f)=>({x:(u-s)/i,y:(d-r)/o,width:h/i,height:f/o});break}const c=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:m,width:y,height:g}of h.getClientRects())y===0||g===0||c.push(a(f,m,y,g))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(l(this,Sd)||S(this,Sd,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=l(this,Sd))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=l(this,Sd))==null?void 0:r.get(e.data.id);if(!t)return;const s=l(this,$s).getRawValue(t);s&&(l(this,Pt)===ce.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){var i;const r=(i=l(this,Jo))==null?void 0:i.get(e);r&&(r.setCanvas(t,s),l(this,Jo).delete(e))}addMissingCanvas(e,t){(l(this,Jo)||S(this,Jo,new Map)).set(e,t)}};bd=new WeakMap,os=new WeakMap,xd=new WeakMap,bt=new WeakMap,It=new WeakMap,wd=new WeakMap,$s=new WeakMap,Sd=new WeakMap,Vs=new WeakMap,mn=new WeakMap,Go=new WeakMap,Wo=new WeakMap,_d=new WeakMap,qo=new WeakMap,zr=new WeakMap,zs=new WeakMap,jl=new WeakMap,Im=new WeakMap,Om=new WeakMap,Ad=new WeakMap,Fm=new WeakMap,Ur=new WeakMap,Ko=new WeakMap,Ed=new WeakMap,Xo=new WeakMap,Hr=new WeakMap,mx=new WeakMap,Yo=new WeakMap,Cd=new WeakMap,Bm=new WeakMap,Qo=new WeakMap,Ll=new WeakMap,kd=new WeakMap,Jo=new WeakMap,$m=new WeakMap,Pt=new WeakMap,De=new WeakMap,Pi=new WeakMap,Zo=new WeakMap,ea=new WeakMap,Vm=new WeakMap,Td=new WeakMap,zm=new WeakMap,ta=new WeakMap,Gr=new WeakMap,Ni=new WeakMap,Um=new WeakMap,Hm=new WeakMap,Us=new WeakMap,Pd=new WeakSet,Ov=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Gm=new WeakSet,LA=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of l(this,It).values())if(s.hasTextLayer(e))return s;return null},gx=new WeakSet,xI=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=C(this,Pd,Ov).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(l(this,Hr)||S(this,Hr,new PG(this)),l(this,Hr).show(s,r,this.direction==="ltr"))},yx=new WeakSet,wI=function(){var i,o,a;const e=document.getSelection();if(!e||e.isCollapsed){l(this,Pi)&&((i=l(this,Hr))==null||i.hide(),S(this,Pi,null),C(this,en,kn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===l(this,Pi))return;const r=C(this,Pd,Ov).call(this,e).closest(".textLayer");if(!r){l(this,Pi)&&((o=l(this,Hr))==null||o.hide(),S(this,Pi,null),C(this,en,kn).call(this,{hasSelectedText:!1}));return}if((a=l(this,Hr))==null||a.hide(),S(this,Pi,t),C(this,en,kn).call(this,{hasSelectedText:!0}),!(l(this,Pt)!==ce.HIGHLIGHT&&l(this,Pt)!==ce.NONE)&&(l(this,Pt)===ce.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,Xo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,Pt)===ce.HIGHLIGHT?C(this,Gm,LA).call(this,r):null;if(c==null||c.toggleDrawing(),l(this,Cd)){const u=new AbortController,d=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&C(this,Dl,pp).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}else c==null||c.toggleDrawing(!0),C(this,Dl,pp).call(this,"main_toolbar")}},Dl=new WeakSet,pp=function(e=""){l(this,Pt)===ce.HIGHLIGHT?this.highlightSelection(e):l(this,Im)&&C(this,gx,xI).call(this)},vx=new WeakSet,SI=function(){document.addEventListener("selectionchange",C(this,yx,wI).bind(this),{signal:this._signal})},bx=new WeakSet,_I=function(){if(l(this,Ko))return;S(this,Ko,new AbortController);const e=this.combinedSignal(l(this,Ko));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},xx=new WeakSet,AI=function(){var e;(e=l(this,Ko))==null||e.abort(),S(this,Ko,null)},Wm=new WeakSet,DA=function(){if(l(this,Qo))return;S(this,Qo,new AbortController);const e=this.combinedSignal(l(this,Qo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},wx=new WeakSet,EI=function(){var e;(e=l(this,Qo))==null||e.abort(),S(this,Qo,null)},qm=new WeakSet,IA=function(){if(l(this,Go))return;S(this,Go,new AbortController);const e=this.combinedSignal(l(this,Go));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Km=new WeakSet,OA=function(){var e;(e=l(this,Go))==null||e.abort(),S(this,Go,null)},Sx=new WeakSet,CI=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},en=new WeakSet,kn=function(e){Object.entries(e).some(([s,r])=>l(this,zm)[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,zm),e)}),l(this,Pt)===ce.HIGHLIGHT&&e.hasSelectedEditor===!1&&C(this,ur,wi).call(this,[[_e.HIGHLIGHT_FREE,!0]]))},ur=new WeakSet,wi=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},_x=new WeakSet,kI=async function(){if(!l(this,Yo)){S(this,Yo,!0);const e=[];for(const t of l(this,It).values())e.push(t.enable());await Promise.all(e);for(const t of l(this,bt).values())t.enable()}},Ax=new WeakSet,TI=function(){if(this.unselectAll(),l(this,Yo)){S(this,Yo,!1);for(const e of l(this,It).values())e.disable();for(const e of l(this,bt).values())e.disable()}},Xm=new WeakSet,FA=function(e){const t=l(this,It).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Ex=new WeakSet,PI=function(){let e=null;for(e of l(this,De));return e},Il=new WeakSet,mp=function(){if(l(this,bt).size===0)return!0;if(l(this,bt).size===1)for(const e of l(this,bt).values())return e.isEmpty();return!1},Ym=new WeakSet,BA=function(e){for(const t of l(this,De))t.unselect();l(this,De).clear();for(const t of e)t.isEmpty()||(l(this,De).add(t),t.select());C(this,en,kn).call(this,{hasSelectedEditor:this.hasSelection})},U(td,"TRANSLATE_SMALL",1),U(td,"TRANSLATE_BIG",10);let sl=td;var Vt,Wr,dr,Nd,qr,as,Rd,Kr,Un,Ri,Ol,Xr,na,Fl,gp,Md,Fv;const Tn=class Tn{constructor(e){x(this,Fl);x(this,Md);x(this,Vt,null);x(this,Wr,!1);x(this,dr,null);x(this,Nd,null);x(this,qr,null);x(this,as,null);x(this,Rd,!1);x(this,Kr,null);x(this,Un,null);x(this,Ri,null);x(this,Ol,null);x(this,Xr,!1);S(this,Un,e),S(this,Xr,e._uiManager.useNewAltTextFlow),l(Tn,na)||S(Tn,na,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Tn._l10n??(Tn._l10n=e)}async render(){const e=S(this,dr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=S(this,Nd,document.createElement("span"));e.append(t),l(this,Xr)?(e.classList.add("new"),e.setAttribute("data-l10n-id",l(Tn,na).missing),t.setAttribute("data-l10n-id",l(Tn,na)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Un)._uiManager._signal;e.addEventListener("contextmenu",Rs,{signal:s}),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),l(this,Un)._uiManager.editAltText(l(this,Un)),l(this,Xr)&&l(this,Un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,Fl,gp)}})};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,Rd,!0),r(i))},{signal:s}),await C(this,Md,Fv).call(this),e}finish(){l(this,dr)&&(l(this,dr).focus({focusVisible:l(this,Rd)}),S(this,Rd,!1))}isEmpty(){return l(this,Xr)?l(this,Vt)===null:!l(this,Vt)&&!l(this,Wr)}hasData(){return l(this,Xr)?l(this,Vt)!==null||!!l(this,Ri):this.isEmpty()}get guessedText(){return l(this,Ri)}async setGuessedText(e){l(this,Vt)===null&&(S(this,Ri,e),S(this,Ol,await Tn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),C(this,Md,Fv).call(this))}toggleAltTextBadge(e=!1){var t;if(!l(this,Xr)||l(this,Vt)){(t=l(this,Kr))==null||t.remove(),S(this,Kr,null);return}if(!l(this,Kr)){const s=S(this,Kr,document.createElement("div"));s.className="noAltTextBadge",l(this,Un).div.append(s)}l(this,Kr).classList.toggle("hidden",!e)}serialize(e){let t=l(this,Vt);return!e&&l(this,Ri)===t&&(t=l(this,Ol)),{altText:t,decorative:l(this,Wr),guessedText:l(this,Ri),textWithDisclaimer:l(this,Ol)}}get data(){return{altText:l(this,Vt),decorative:l(this,Wr)}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:r,cancel:i=!1}){s&&(S(this,Ri,s),S(this,Ol,r)),!(l(this,Vt)===e&&l(this,Wr)===t)&&(i||(S(this,Vt,e),S(this,Wr,t)),C(this,Md,Fv).call(this))}toggle(e=!1){l(this,dr)&&(!e&&l(this,as)&&(clearTimeout(l(this,as)),S(this,as,null)),l(this,dr).disabled=!e)}shown(){l(this,Un)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,Fl,gp)}})}destroy(){var e,t;(e=l(this,dr))==null||e.remove(),S(this,dr,null),S(this,Nd,null),S(this,qr,null),(t=l(this,Kr))==null||t.remove(),S(this,Kr,null)}};Vt=new WeakMap,Wr=new WeakMap,dr=new WeakMap,Nd=new WeakMap,qr=new WeakMap,as=new WeakMap,Rd=new WeakMap,Kr=new WeakMap,Un=new WeakMap,Ri=new WeakMap,Ol=new WeakMap,Xr=new WeakMap,na=new WeakMap,Fl=new WeakSet,gp=function(){return l(this,Vt)&&"added"||l(this,Vt)===null&&this.guessedText&&"review"||"missing"},Md=new WeakSet,Fv=async function(){var r,i,o;const e=l(this,dr);if(!e)return;if(l(this,Xr)){if(e.classList.toggle("done",!!l(this,Vt)),e.setAttribute("data-l10n-id",l(Tn,na)[l(this,Fl,gp)]),(r=l(this,Nd))==null||r.setAttribute("data-l10n-id",l(Tn,na)[`${l(this,Fl,gp)}-label`]),!l(this,Vt)){(i=l(this,qr))==null||i.remove();return}}else{if(!l(this,Vt)&&!l(this,Wr)){e.classList.remove("done"),(o=l(this,qr))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=l(this,qr);if(!t){S(this,qr,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${l(this,Un).id}`;const a=100,c=l(this,Un)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,as)),S(this,as,null)},{once:!0}),e.addEventListener("mouseenter",()=>{S(this,as,setTimeout(()=>{S(this,as,null),l(this,qr).classList.add("show"),l(this,Un)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;l(this,as)&&(clearTimeout(l(this,as)),S(this,as,null)),(u=l(this,qr))==null||u.classList.remove("show")},{signal:c})}l(this,Wr)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=l(this,Vt)),t.parentNode||e.append(t);const s=l(this,Un).getElementForAltText();s==null||s.setAttribute("aria-describedby",t.id)},x(Tn,na,null),U(Tn,"_l10n",null);let Yb=Tn;var tn,Hs,Bl,Xe,Qm,$l,hr,Vl,zl,Ul,Jm,$A;class ov{constructor(e){x(this,Jm);x(this,tn,null);x(this,Hs,null);x(this,Bl,!1);x(this,Xe,null);x(this,Qm,null);x(this,$l,null);x(this,hr,null);x(this,Vl,null);x(this,zl,!1);x(this,Ul,null);S(this,Xe,e)}renderForToolbar(){const e=S(this,Hs,document.createElement("button"));return e.className="comment",C(this,Jm,$A).call(this,e,!1)}renderForStandalone(){const e=S(this,tn,document.createElement("button"));e.className="annotationCommentButton";const t=l(this,Xe).commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(l(this,Xe)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const r=l(this,Xe).commentButtonColor;r&&(s.backgroundColor=r)}return C(this,Jm,$A).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=l(this,tn)??l(this,Hs))==null||e.focus()},0)}onUpdatedColor(){if(!l(this,tn))return;const e=l(this,Xe).commentButtonColor;e&&(l(this,tn).style.backgroundColor=e),l(this,Xe)._uiManager.updatePopupColor(l(this,Xe))}get commentButtonWidth(){var e;return(((e=l(this,tn))==null?void 0:e.getBoundingClientRect().width)??0)/l(this,Xe).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(l(this,Ul))return l(this,Ul);if(!l(this,tn))return null;const{x:e,y:t,height:s}=l(this,tn).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=l(this,Xe).parent.boundingClientRect;return[(e-r)/o,(t+s-i)/a]}set commentPopupPositionInLayer(e){S(this,Ul,e)}hasDefaultPopupPosition(){return l(this,Ul)===null}removeStandaloneCommentButton(){var e;(e=l(this,tn))==null||e.remove(),S(this,tn,null)}removeToolbarCommentButton(){var e;(e=l(this,Hs))==null||e.remove(),S(this,Hs,null)}setCommentButtonStates({selected:e,hasPopup:t}){l(this,tn)&&(l(this,tn).classList.toggle("selected",e),l(this,tn).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let s,r;if(t)[s,r]=t;else{[s,r]=l(this,Xe).commentButtonPosition;const{width:d,height:h,x:f,y:m}=l(this,Xe);s=f+s*d,r=m+r*h}const i=l(this,Xe).parent.boundingClientRect,{x:o,y:a,width:c,height:u}=i;l(this,Xe)._uiManager.editComment(l(this,Xe),o+s*c,a+r*u,{...e,parentDimensions:i})}finish(){l(this,Hs)&&(l(this,Hs).focus({focusVisible:l(this,Bl)}),S(this,Bl,!1))}isDeleted(){return l(this,zl)||l(this,hr)===""}isEmpty(){return l(this,hr)===null}hasBeenEdited(){return this.isDeleted()||l(this,hr)!==l(this,Qm)}serialize(){return this.data}get data(){return{text:l(this,hr),richText:l(this,$l),date:l(this,Vl),deleted:this.isDeleted()}}set data(e){if(e!==l(this,hr)&&S(this,$l,null),e===null){S(this,hr,""),S(this,zl,!0);return}S(this,hr,e),S(this,Vl,new Date),S(this,zl,!1)}setInitialText(e,t=null){S(this,Qm,e),this.data=e,S(this,Vl,null),S(this,$l,t)}shown(){}destroy(){var e,t;(e=l(this,Hs))==null||e.remove(),S(this,Hs,null),(t=l(this,tn))==null||t.remove(),S(this,tn,null),S(this,hr,""),S(this,$l,null),S(this,Vl,null),S(this,Xe,null),S(this,Bl,!1),S(this,zl,!1)}}tn=new WeakMap,Hs=new WeakMap,Bl=new WeakMap,Xe=new WeakMap,Qm=new WeakMap,$l=new WeakMap,hr=new WeakMap,Vl=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Jm=new WeakSet,$A=function(e,t){if(!l(this,Xe)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[l(this,Xe)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=l(this,Xe)._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",Rs,{signal:s}),t&&(e.addEventListener("focusin",i=>{l(this,Xe)._focusEventsAllowed=!1,ht(i)},{capture:!0,signal:s}),e.addEventListener("focusout",i=>{l(this,Xe)._focusEventsAllowed=!0,ht(i)},{capture:!0,signal:s})),e.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:s});const r=i=>{i.preventDefault(),e===l(this,Hs)?this.edit():l(this,Xe).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:s}),e.addEventListener("keydown",i=>{i.target===e&&i.key==="Enter"&&(S(this,Bl,!0),r(i))},{signal:s}),e.addEventListener("pointerenter",()=>{l(this,Xe).toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{l(this,Xe).toggleComment(!1,!1)},{signal:s}),e};var jd,Hl,Zm,eg,tg,ng,sg,Mi,Gl,ji,Wl,Li,Cx,NI,kx,RI,Tx,MI;const cT=class cT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:i=null,onPinchEnd:o=null,signal:a}){x(this,Cx);x(this,kx);x(this,Tx);x(this,jd,void 0);x(this,Hl,!1);x(this,Zm,null);x(this,eg,void 0);x(this,tg,void 0);x(this,ng,void 0);x(this,sg,void 0);x(this,Mi,null);x(this,Gl,void 0);x(this,ji,null);x(this,Wl,void 0);x(this,Li,null);S(this,jd,e),S(this,Zm,s),S(this,eg,t),S(this,tg,r),S(this,ng,i),S(this,sg,o),S(this,Wl,new AbortController),S(this,Gl,AbortSignal.any([a,l(this,Wl).signal])),e.addEventListener("touchstart",C(this,Cx,NI).bind(this),{passive:!1,signal:l(this,Gl)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Nr.pixelRatio}destroy(){var e,t;(e=l(this,Wl))==null||e.abort(),S(this,Wl,null),(t=l(this,Mi))==null||t.abort(),S(this,Mi,null)}};jd=new WeakMap,Hl=new WeakMap,Zm=new WeakMap,eg=new WeakMap,tg=new WeakMap,ng=new WeakMap,sg=new WeakMap,Mi=new WeakMap,Gl=new WeakMap,ji=new WeakMap,Wl=new WeakMap,Li=new WeakMap,Cx=new WeakSet,NI=function(e){var r,i,o;if((r=l(this,eg))!=null&&r.call(this))return;if(e.touches.length===1){if(l(this,Mi))return;const a=S(this,Mi,new AbortController),c=AbortSignal.any([l(this,Gl),a.signal]),u=l(this,jd),d={capture:!0,signal:c,passive:!1},h=f=>{var m;f.pointerType==="touch"&&((m=l(this,Mi))==null||m.abort(),S(this,Mi,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ht(f),h(f))},d),u.addEventListener("pointerup",h,d),u.addEventListener("pointercancel",h,d);return}if(!l(this,Li)){S(this,Li,new AbortController);const a=AbortSignal.any([l(this,Gl),l(this,Li).signal]),c=l(this,jd),u={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",C(this,kx,RI).bind(this),u);const d=C(this,Tx,MI).bind(this);c.addEventListener("touchend",d,u),c.addEventListener("touchcancel",d,u),u.capture=!0,c.addEventListener("pointerdown",ht,u),c.addEventListener("pointermove",ht,u),c.addEventListener("pointercancel",ht,u),c.addEventListener("pointerup",ht,u),(i=l(this,tg))==null||i.call(this)}if(ht(e),e.touches.length!==2||(o=l(this,Zm))!=null&&o.call(this)){S(this,ji,null);return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),S(this,ji,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY})},kx=new WeakSet,RI=function(e){var E;if(!l(this,ji)||e.touches.length!==2)return;ht(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:r,screenY:i}=t,{screenX:o,screenY:a}=s,c=l(this,ji),{touch0X:u,touch0Y:d,touch1X:h,touch1Y:f}=c,m=h-u,y=f-d,g=o-r,w=a-i,v=Math.hypot(g,w)||1,b=Math.hypot(m,y)||1;if(!l(this,Hl)&&Math.abs(b-v)<=cT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=r,c.touch0Y=i,c.touch1X=o,c.touch1Y=a,!l(this,Hl)){S(this,Hl,!0);return}const _=[(r+o)/2,(i+a)/2];(E=l(this,ng))==null||E.call(this,_,b,v)},Tx=new WeakSet,MI=function(e){var t;e.touches.length>=2||(l(this,Li)&&(l(this,Li).abort(),S(this,Li,null),(t=l(this,sg))==null||t.call(this)),l(this,ji)&&(ht(e),S(this,ji,null),S(this,Hl,!1)))};let _m=cT;var ql,fr,it,Ue,Di,Ld,sa,rg,nn,Kl,Ii,Yr,ra,ig,Xl,ls,og,Yl,Oi,Qr,Dd,Id,Gs,Ql,ag,Px,lg,VA,cg,zA,Od,Bv,Nx,jI,Rx,LI,ug,UA,Fd,$v,dg,HA,Mx,DI,jx,II,Lx,OI,hg,GA,Dx,FI,fg,WA,Ix,BI,Ox,$I,Fx,VI,pg,qA,Jl,yp;const he=class he{constructor(e){x(this,lg);x(this,Od);x(this,Nx);x(this,Rx);x(this,ug);x(this,Fd);x(this,dg);x(this,Mx);x(this,jx);x(this,Lx);x(this,hg);x(this,Dx);x(this,fg);x(this,Ix);x(this,Ox);x(this,Fx);x(this,pg);x(this,Jl);x(this,ql,null);x(this,fr,null);x(this,it,null);x(this,Ue,null);x(this,Di,null);x(this,Ld,!1);x(this,sa,null);x(this,rg,"");x(this,nn,null);x(this,Kl,null);x(this,Ii,null);x(this,Yr,null);x(this,ra,null);x(this,ig,"");x(this,Xl,!1);x(this,ls,null);x(this,og,!1);x(this,Yl,!1);x(this,Oi,!1);x(this,Qr,null);x(this,Dd,0);x(this,Id,0);x(this,Gs,null);x(this,Ql,null);U(this,"isSelected",!1);U(this,"_isCopy",!1);U(this,"_editToolbar",null);U(this,"_initialOptions",Object.create(null));U(this,"_initialData",null);U(this,"_isVisible",!0);U(this,"_uiManager",null);U(this,"_focusEventsAllowed",!0);x(this,ag,!1);x(this,Px,he._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[i,o];const[a,c]=this.parentDimensions;this.x=e.x/a,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=he.prototype._resizeWithKeyboard,t=sl.TRANSLATE_SMALL,s=sl.TRANSLATE_BIG;return me(this,"_resizerKeyboardManager",new wy([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],he.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return me(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new MG({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(he._l10n??(he._l10n=e),he._l10nResizer||(he._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),he._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);he._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){We("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,ag)}set _isDraggable(e){var t;S(this,ag,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Px)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(C(this,Jl,yp).call(this),(t=l(this,Yr))==null||t.remove(),S(this,Yr,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(l(this,Xl)?S(this,Xl,!1):this.parent.setSelected(this))}focusout(e){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,r){const[i,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(e+s)/i,this.y=(t+r)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,r]=this.parentDimensions;this.setAt(e*s,t*r,this.width*s,this.height*r),this._onTranslated()}translate(e,t){C(this,lg,VA).call(this,this.parentDimensions,e,t)}translateInPage(e,t){l(this,ls)||S(this,ls,[this.x,this.y,this.width,this.height]),C(this,lg,VA).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){l(this,ls)||S(this,ls,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,u]=this.getBaseTranslation();o+=c,a+=u;const{style:d}=s;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!l(this,ls)&&(l(this,ls)[0]!==this.x||l(this,ls)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ls)&&(l(this,ls)[2]!==this.width||l(this,ls)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=he,r=s/e,i=s/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,r]}=this;let{x:i,y:o,width:a,height:c}=this;if(a*=s,c*=r,i*=s,o*=r,this._mustFixPosition)switch(e){case 0:i=wn(i,0,s-a),o=wn(o,0,r-c);break;case 90:i=wn(i,0,s-c),o=wn(o,a,r);break;case 180:i=wn(i,a,s),o=wn(o,c,r);break;case 270:i=wn(i,c,s),o=wn(o,0,r-a);break}this.x=i/=s,this.y=o/=r;const[u,d]=this.getBaseTranslation();i+=u,o+=d,t.left=`${(100*i).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var s;return C(s=he,cg,zA).call(s,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var s;return C(s=he,cg,zA).call(s,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=l(this,it))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||l(this,Yl))return this._editToolbar;this._editToolbar=new NA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=l(this,it))==null||t.destroy()}addContainer(e){var s;const t=(s=this._editToolbar)==null?void 0:s.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return l(this,it)||(Yb.initialize(he._l10n),S(this,it,new Yb(this)),l(this,ql)&&(l(this,it).data=l(this,ql),S(this,ql,null))),l(this,it)}get altTextData(){var e;return(e=l(this,it))==null?void 0:e.data}set altTextData(e){l(this,it)&&(l(this,it).data=e)}get guessedAltText(){var e;return(e=l(this,it))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=l(this,it))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=l(this,it))==null?void 0:t.serialize(e)}hasAltText(){return!!l(this,it)&&!l(this,it).isEmpty()}hasAltTextData(){var e;return((e=l(this,it))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=l(this,Ue))==null||e.focusButton()}addCommentButton(){return l(this,Ue)||S(this,Ue,new ov(this))}addStandaloneCommentButton(){if(l(this,Di)){this._uiManager.isEditingMode()&&l(this,Di).classList.remove("hidden");return}this.hasComment&&(S(this,Di,l(this,Ue).renderForStandalone()),this.div.append(l(this,Di)))}removeStandaloneCommentButton(){l(this,Ue).removeStandaloneCommentButton(),S(this,Di,null)}hideStandaloneCommentButton(){var e;(e=l(this,Di))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:r}}=l(this,Ue);return{text:t,richText:e,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){l(this,Ue)||S(this,Ue,new ov(this)),l(this,Ue).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(l(this,Ue)||S(this,Ue,new ov(this)),l(this,Ue).setInitialText(e,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){var e;return(e=l(this,Ue))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=l(this,Ue))==null?void 0:e.isDeleted()}get hasComment(){return!!l(this,Ue)&&!l(this,Ue).isEmpty()&&!l(this,Ue).isDeleted()}async editComment(e){l(this,Ue)||S(this,Ue,new ov(this)),l(this,Ue).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){l(this,Ue).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[i]=this.pageDimensions,[o]=this.pageTranslation,a=o+i+1,c=r-100,u=a+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,c,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){l(this,Ue).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=l(this,Ld)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),C(this,fg,WA).call(this);const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[r,i]=this.getInitialTranslation();return this.translate(r,i),vI(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Ql)||S(this,Ql,new _m({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:C(this,Mx,DI).bind(this),onPinching:C(this,jx,II).bind(this),onPinchEnd:C(this,Lx,OI).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(S(this,Xl,!0),this._isDraggable){C(this,Dx,FI).call(this,e);return}C(this,hg,GA).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Qr)&&clearTimeout(l(this,Qr)),S(this,Qr,setTimeout(()=>{var e;S(this,Qr,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const r=this.parentScale,[i,o]=this.pageDimensions,[a,c]=this.pageTranslation,u=e/r,d=t/r,h=this.x*i,f=this.y*o,m=this.width*i,y=this.height*o;switch(s){case 0:return[h+u+a,o-f-d-y+c,h+u+m+a,o-f-d+c];case 90:return[h+d+a,o-f+u+c,h+d+y+a,o-f+u+m+c];case 180:return[h-u-m+a,o-f+d+c,h-u+a,o-f+d+y+c];case 270:return[h-d-y+a,o-f-u-m+c,h-d+a,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,r,i,o]=e,a=i-s,c=o-r;switch(this.rotation){case 0:return[s,t-o,a,c];case 90:return[s,t-r,c,a];case 180:return[i,t-r,a,c];case 270:return[i,t-o,c,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&he._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=l(this,Ue))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:r,deleted:i,richText:o},uid:a,pageIndex:c,creationDate:u,modificationDate:d}=this;return{id:a,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:s||d,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,Yl,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,Yl,!1),!0):!1}isInEditMode(){return l(this,Yl)}shouldGetKeyboardEvents(){return l(this,Oi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:o}=window;return t<o&&r>0&&e<i&&s>0}rebuild(){C(this,fg,WA).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var s;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((s=this._initialData)==null?void 0:s.popupRef)||""}}static async deserialize(e,t,s){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,S(r,ql,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,o]=r.pageDimensions,[a,c,u,d]=r.getRectInCurrentCoords(e.rect,o);return r.x=a/i,r.y=c/o,r.width=u/i,r.height=d/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=l(this,ra))==null||e.abort(),S(this,ra,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Qr)&&(clearTimeout(l(this,Qr)),S(this,Qr,null)),C(this,Jl,yp).call(this),this.removeEditToolbar(),l(this,Gs)){for(const s of l(this,Gs).values())clearTimeout(s);S(this,Gs,null)}this.parent=null,(t=l(this,Ql))==null||t.destroy(),S(this,Ql,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(C(this,Nx,jI).call(this),l(this,nn).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,r,i,o]=this.getPDFRect();return[he._round(s+(i-s)*e),he._round(r+(o-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return l(this,Ue).commentPopupPositionInLayer}set commentPopupPosition(e){l(this,Ue).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return l(this,Ue).hasDefaultPopupPosition()}get commentButtonWidth(){return l(this,Ue).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){l(this,Ue).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),S(this,Ii,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=l(this,nn).children;if(!l(this,fr)){S(this,fr,Array.from(t));const o=C(this,Ix,BI).bind(this),a=C(this,Ox,$I).bind(this),c=this._uiManager._signal;for(const u of l(this,fr)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",a,{signal:c}),u.addEventListener("focus",C(this,Fx,VI).bind(this,d),{signal:c}),u.setAttribute("data-l10n-id",he._l10nResizer[d])}}const s=l(this,fr)[0];let r=0;for(const o of t){if(o===s)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(l(this,fr).length/4);if(i!==r){if(i<r)for(let a=0;a<r-i;a++)l(this,nn).append(l(this,nn).firstChild);else if(i>r)for(let a=0;a<i-r;a++)l(this,nn).firstChild.before(l(this,nn).lastChild);let o=0;for(const a of t){const u=l(this,fr)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",he._l10nResizer[u])}}C(this,pg,qA).call(this,0),S(this,Oi,!0),l(this,nn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){l(this,Oi)&&C(this,dg,HA).call(this,l(this,ig),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){C(this,Jl,yp).call(this),this.div.focus()}select(){var e,t,s;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,i;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((i=this._editToolbar)==null||i.show())});return}(t=this._editToolbar)==null||t.show(),(s=l(this,it))==null||s.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,s,r,i;this.isSelected&&(this.isSelected=!1,(e=l(this,nn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(i=l(this,it))==null||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,og)}set isEditing(e){S(this,og,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){l(this,Gs)||S(this,Gs,new Map);const{action:s}=e;let r=l(this,Gs).get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),l(this,Gs).delete(s),l(this,Gs).size===0&&S(this,Gs,null)},he._telemetryTimeout),l(this,Gs).set(s,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),S(this,Ld,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,Ld,!0)}updateFakeAnnotationElement(e){if(!l(this,Yr)&&!this.deleted){S(this,Yr,e.addFakeAnnotation(this));return}if(this.deleted){l(this,Yr).remove(),S(this,Yr,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&l(this,Yr).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ql=new WeakMap,fr=new WeakMap,it=new WeakMap,Ue=new WeakMap,Di=new WeakMap,Ld=new WeakMap,sa=new WeakMap,rg=new WeakMap,nn=new WeakMap,Kl=new WeakMap,Ii=new WeakMap,Yr=new WeakMap,ra=new WeakMap,ig=new WeakMap,Xl=new WeakMap,ls=new WeakMap,og=new WeakMap,Yl=new WeakMap,Oi=new WeakMap,Qr=new WeakMap,Dd=new WeakMap,Id=new WeakMap,Gs=new WeakMap,Ql=new WeakMap,ag=new WeakMap,Px=new WeakMap,lg=new WeakSet,VA=function([e,t],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},cg=new WeakSet,zA=function(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Od=new WeakSet,Bv=function(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}},Nx=new WeakSet,jI=function(){if(l(this,nn))return;S(this,nn,document.createElement("div")),l(this,nn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const r=document.createElement("div");l(this,nn).append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",C(this,Rx,LI).bind(this,s),{signal:t}),r.addEventListener("contextmenu",Rs,{signal:t}),r.tabIndex=-1}this.div.prepend(l(this,nn))},Rx=new WeakSet,LI=function(e,t){var d;t.preventDefault();const{isMac:s}=Qt.platform;if(t.button!==0||t.ctrlKey&&s)return;(d=l(this,it))==null||d.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,S(this,Kl,[t.screenX,t.screenY]);const i=new AbortController,o=this._uiManager.combinedSignal(i);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",C(this,dg,HA).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ht,{passive:!1,signal:o}),window.addEventListener("contextmenu",Rs,{signal:o}),S(this,Ii,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;i.abort(),this.parent.togglePointerEvents(!0),(h=l(this,it))==null||h.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=a,this.div.style.cursor=c,C(this,Fd,$v).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},ug=new WeakSet,UA=function(e,t,s,r){this.width=s,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Fd=new WeakSet,$v=function(){if(!l(this,Ii))return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:r}=l(this,Ii);S(this,Ii,null);const i=this.x,o=this.y,a=this.width,c=this.height;i===e&&o===t&&a===s&&c===r||this.addCommands({cmd:C(this,ug,UA).bind(this,i,o,a,c),undo:C(this,ug,UA).bind(this,e,t,s,r),mustExec:!0})},dg=new WeakSet,HA=function(e,t){const[s,r]=this.parentDimensions,i=this.x,o=this.y,a=this.width,c=this.height,u=he.MIN_SIZE/s,d=he.MIN_SIZE/r,h=C(this,Od,Bv).call(this,this.rotation),f=(j,O)=>[h[0]*j+h[2]*O,h[1]*j+h[3]*O],m=C(this,Od,Bv).call(this,360-this.rotation),y=(j,O)=>[m[0]*j+m[2]*O,m[1]*j+m[3]*O];let g,w,v=!1,b=!1;switch(e){case"topLeft":v=!0,g=(j,O)=>[0,0],w=(j,O)=>[j,O];break;case"topMiddle":g=(j,O)=>[j/2,0],w=(j,O)=>[j/2,O];break;case"topRight":v=!0,g=(j,O)=>[j,0],w=(j,O)=>[0,O];break;case"middleRight":b=!0,g=(j,O)=>[j,O/2],w=(j,O)=>[0,O/2];break;case"bottomRight":v=!0,g=(j,O)=>[j,O],w=(j,O)=>[0,0];break;case"bottomMiddle":g=(j,O)=>[j/2,O],w=(j,O)=>[j/2,0];break;case"bottomLeft":v=!0,g=(j,O)=>[0,O],w=(j,O)=>[j,0];break;case"middleLeft":b=!0,g=(j,O)=>[0,O/2],w=(j,O)=>[j,O/2];break}const _=g(a,c),E=w(a,c);let k=f(...E);const T=he._round(i+k[0]),P=he._round(o+k[1]);let N=1,M=1,L,F;if(t.fromKeyboard)({deltaX:L,deltaY:F}=t);else{const{screenX:j,screenY:O}=t,[B,$]=l(this,Kl);[L,F]=this.screenToPageTranslation(j-B,O-$),l(this,Kl)[0]=j,l(this,Kl)[1]=O}if([L,F]=y(L/s,F/r),v){const j=Math.hypot(a,c);N=M=Math.max(Math.min(Math.hypot(E[0]-_[0]-L,E[1]-_[1]-F)/j,1/a,1/c),u/a,d/c)}else b?N=wn(Math.abs(E[0]-_[0]-L),u,1)/a:M=wn(Math.abs(E[1]-_[1]-F),d,1)/c;const D=he._round(a*N),z=he._round(c*M);k=f(...w(D,z));const I=T-k[0],R=P-k[1];l(this,ls)||S(this,ls,[this.x,this.y,this.width,this.height]),this.width=D,this.height=z,this.x=I,this.y=R,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Mx=new WeakSet,DI=function(){var e;S(this,Ii,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=l(this,it))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},jx=new WeakSet,II=function(e,t,s){let i=.7*(s/t)+1-.7;if(i===1)return;const o=C(this,Od,Bv).call(this,this.rotation),a=(T,P)=>[o[0]*T+o[2]*P,o[1]*T+o[3]*P],[c,u]=this.parentDimensions,d=this.x,h=this.y,f=this.width,m=this.height,y=he.MIN_SIZE/c,g=he.MIN_SIZE/u;i=Math.max(Math.min(i,1/f,1/m),y/f,g/m);const w=he._round(f*i),v=he._round(m*i);if(w===f&&v===m)return;l(this,ls)||S(this,ls,[d,h,f,m]);const b=a(f/2,m/2),_=he._round(d+b[0]),E=he._round(h+b[1]),k=a(w/2,v/2);this.x=_-k[0],this.y=E-k[1],this.width=w,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Lx=new WeakSet,OI=function(){var e;(e=l(this,it))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),C(this,Fd,$v).call(this)},hg=new WeakSet,GA=function(e){const{isMac:t}=Qt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Dx=new WeakSet,FI=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:i},a=u=>{r.abort(),S(this,sa,null),S(this,Xl,!1),this._uiManager.endDragSession()||C(this,hg,GA).call(this,u),s&&this._onStopDragging()};t&&(S(this,Dd,e.clientX),S(this,Id,e.clientY),S(this,sa,e.pointerId),S(this,rg,e.pointerType),window.addEventListener("pointermove",u=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:d,clientY:h,pointerId:f}=u;if(f!==l(this,sa)){ht(u);return}const[m,y]=this.screenToPageTranslation(d-l(this,Dd),h-l(this,Id));S(this,Dd,d),S(this,Id,h),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",ht,o),window.addEventListener("pointerdown",u=>{u.pointerType===l(this,rg)&&(l(this,Ql)||u.isPrimary)&&a(u),ht(u)},o));const c=u=>{if(!l(this,sa)||l(this,sa)===u.pointerId){a(u);return}ht(u)};window.addEventListener("pointerup",c,{signal:i}),window.addEventListener("blur",c,{signal:i})},fg=new WeakSet,WA=function(){if(l(this,ra)||!this.div)return;S(this,ra,new AbortController);const e=this._uiManager.combinedSignal(l(this,ra));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Ix=new WeakSet,BI=function(e){he._resizerKeyboardManager.exec(this,e)},Ox=new WeakSet,$I=function(e){var t;l(this,Oi)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==l(this,nn)&&C(this,Jl,yp).call(this)},Fx=new WeakSet,VI=function(e){S(this,ig,l(this,Oi)?e:"")},pg=new WeakSet,qA=function(e){if(l(this,fr))for(const t of l(this,fr))t.tabIndex=e},Jl=new WeakSet,yp=function(){S(this,Oi,!1),C(this,pg,qA).call(this,-1),C(this,Fd,$v).call(this)},x(he,cg),U(he,"_l10n",null),U(he,"_l10nResizer",null),U(he,"_borderLineWidth",-1),U(he,"_colorManager",new jA),U(he,"_zIndex",1),U(he,"_telemetryTimeout",1e3);let Qe=he;class MG extends Qe{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const vN=3285377520,Ds=4294901760,Fr=65535;class zI{constructor(e){this.h1=e?e&4294967295:vN,this.h2=e?e&4294967295:vN}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let g=0,w=e.length;g<w;g++){const v=e.charCodeAt(g);v<=255?t[s++]=v:(t[s++]=v>>>8,t[s++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,i=s-r*4,o=new Uint32Array(t.buffer,0,r);let a=0,c=0,u=this.h1,d=this.h2;const h=3432918353,f=461845907,m=h&Fr,y=f&Fr;for(let g=0;g<r;g++)g&1?(a=o[g],a=a*h&Ds|a*m&Fr,a=a<<15|a>>>17,a=a*f&Ds|a*y&Fr,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[g],c=c*h&Ds|c*m&Fr,c=c<<15|c>>>17,c=c*f&Ds|c*y&Fr,d^=c,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,i){case 3:a^=t[r*4+2]<<16;case 2:a^=t[r*4+1]<<8;case 1:a^=t[r*4],a=a*h&Ds|a*m&Fr,a=a<<15|a>>>17,a=a*f&Ds|a*y&Fr,r&1?u^=a:d^=a}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Ds|e*36045&Fr,t=t*4283543511&Ds|((t<<16|e>>>16)*2950163797&Ds)>>>16,e^=t>>>1,e=e*444984403&Ds|e*60499&Fr,t=t*3301882366&Ds|((t<<16|e>>>16)*3120437893&Ds)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const KA=Object.freeze({map:null,hash:"",transfer:void 0});var Zl,ec,Fi,sn,Bx,UI;class Gk{constructor(){x(this,Bx);x(this,Zl,!1);x(this,ec,null);x(this,Fi,null);x(this,sn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=l(this,sn).get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return l(this,sn).get(e)}remove(e){const t=l(this,sn).get(e);if(t!==void 0&&(t instanceof Qe&&l(this,Fi).delete(t.annotationElementId),l(this,sn).delete(e),l(this,sn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of l(this,sn).values())if(s instanceof Qe)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=l(this,sn).get(e);let r=!1;if(s!==void 0)for(const[i,o]of Object.entries(t))s[i]!==o&&(r=!0,s[i]=o);else r=!0,l(this,sn).set(e,t);r&&C(this,Bx,UI).call(this),t instanceof Qe&&((l(this,Fi)||S(this,Fi,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return l(this,sn).has(e)}get size(){return l(this,sn).size}resetModified(){l(this,Zl)&&(S(this,Zl,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new HI(this)}get serializable(){if(l(this,sn).size===0)return KA;const e=new Map,t=new zI,s=[],r=Object.create(null);let i=!1;for(const[o,a]of l(this,sn)){const c=a instanceof Qe?a.serialize(!1,r):a;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),i||(i=!!c.bitmap))}if(i)for(const o of e.values())o.bitmap&&s.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:KA}get editorStats(){let e=null;const t=new Map;let s=0,r=0;for(const i of l(this,sn).values()){if(!(i instanceof Qe)){i.popup&&(i.popup.deleted?r+=1:s+=1);continue}i.isCommentDeleted?r+=1:i.hasEditedComment&&(s+=1);const o=i.telemetryFinalData;if(!o)continue;const{type:a}=o;t.has(a)||t.set(a,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const c=e[a]||(e[a]=new Map);for(const[u,d]of Object.entries(o)){if(u==="type")continue;let h=c.get(u);h||(h=new Map,c.set(u,h));const f=h.get(d)??0;h.set(d,f+1)}}if((r>0||s>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:s}),!e)return null;for(const[i,o]of t)e[i]=o.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){S(this,ec,null)}updateEditor(e,t){var r;const s=(r=l(this,Fi))==null?void 0:r.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=l(this,Fi))==null?void 0:t.get(e))||null}get modifiedIds(){if(l(this,ec))return l(this,ec);const e=[];if(l(this,Fi))for(const t of l(this,Fi).values())t.serialize()&&e.push(t.annotationElementId);return S(this,ec,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return l(this,sn).entries()}}Zl=new WeakMap,ec=new WeakMap,Fi=new WeakMap,sn=new WeakMap,Bx=new WeakSet,UI=function(){l(this,Zl)||(S(this,Zl,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var mg;class HI extends Gk{constructor(t){super();x(this,mg,void 0);const{map:s,hash:r,transfer:i}=t.serializable,o=structuredClone(s,i?{transfer:i}:null);S(this,mg,{map:o,hash:r,transfer:i})}get print(){We("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,mg)}get modifiedIds(){return me(this,"modifiedIds",{ids:new Set,hash:""})}}mg=new WeakMap;var Bd;class jG{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){x(this,Bd,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),l(this,Bd).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||l(this,Bd).has(e.loadedName))){if(Ee(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:i,style:o}=e,a=new FontFace(r,i,o);this.addNativeFontFace(a);try{await a.load(),l(this,Bd).add(r),s==null||s(e)}catch{ue(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}We("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw ue(`Failed to load font '${s.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return me(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return me(this,"isSyncFontLoadingSupported",jn||Qt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Ee(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const i=s.shift();setTimeout(i.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:t,callback:e};return s.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return me(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(E,k){return E.charCodeAt(k)<<24|E.charCodeAt(k+1)<<16|E.charCodeAt(k+2)<<8|E.charCodeAt(k+3)&255}function r(E,k,T,P){const N=E.substring(0,k),M=E.substring(k+T);return N+P+M}let i,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let u=0;function d(E,k){if(++u>30){ue("Load test font never loaded."),k();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){k();return}setTimeout(d.bind(null,E,k))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,h.length,h);const y=16,g=1482184792;let w=s(f,y);for(i=0,o=h.length-3;i<o;i+=4)w=w-g+s(h,i)|0;i<h.length&&(w=w-g+s(h+"XXX",i)|0),f=r(f,y,4,xG(w));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${h}";src:${v}}`;this.insertRule(b);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const E of[e.loadedName,h]){const k=this._document.createElement("span");k.textContent="Hi",k.style.fontFamily=E,_.append(k)}this._document.body.append(_),d(h,()=>{_.remove(),t.complete()})}}Bd=new WeakMap;var Fe;class LG{constructor(e,t=null,s,r){x(this,Fe,void 0);this.compiledGlyphs=Object.create(null),S(this,Fe,e),this._inspectFont=t,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${oI(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(s=this._inspectFont)==null||s.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let r;try{r=e.get(s)}catch(o){ue(`getPathGenerator - ignoring character: "${o}".`)}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=i}get black(){return l(this,Fe).black}get bold(){return l(this,Fe).bold}get disableFontFace(){return l(this,Fe).disableFontFace??!1}get fontExtraProperties(){return l(this,Fe).fontExtraProperties??!1}get isInvalidPDFjsFont(){return l(this,Fe).isInvalidPDFjsFont}get isType3Font(){return l(this,Fe).isType3Font}get italic(){return l(this,Fe).italic}get missingFile(){return l(this,Fe).missingFile}get remeasure(){return l(this,Fe).remeasure}get vertical(){return l(this,Fe).vertical}get ascent(){return l(this,Fe).ascent}get defaultWidth(){return l(this,Fe).defaultWidth}get descent(){return l(this,Fe).descent}get bbox(){return l(this,Fe).bbox}get fontMatrix(){return l(this,Fe).fontMatrix}get fallbackName(){return l(this,Fe).fallbackName}get loadedName(){return l(this,Fe).loadedName}get mimetype(){return l(this,Fe).mimetype}get name(){return l(this,Fe).name}get data(){return l(this,Fe).data}clearData(){l(this,Fe).clearData()}get cssFontInfo(){return l(this,Fe).cssFontInfo}get systemFontInfo(){return l(this,Fe).systemFontInfo}get defaultVMetrics(){return l(this,Fe).defaultVMetrics}}Fe=new WeakMap;function DG(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(jn)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function IG(n){if(jn&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vy(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function av(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const XA=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,OG=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",GI=AG.bind(null,XA,OG);var Bi,$x;class FG{constructor(){x(this,Bi,new Map);x(this,$x,Promise.resolve())}postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};l(this,$x).then(()=>{for(const[r]of l(this,Bi))r.call(this,s)})}addEventListener(e,t,s=null){let r=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:i}=s;if(i.aborted){ue("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",o),i.addEventListener("abort",o)}l(this,Bi).set(t,r)}removeEventListener(e,t){const s=l(this,Bi).get(t);s==null||s(),l(this,Bi).delete(t)}terminate(){for(const[,e]of l(this,Bi))e==null||e();l(this,Bi).clear()}}Bi=new WeakMap,$x=new WeakMap;const lv={DATA:1,ERROR:2},Tt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function bN(){}function Vn(n){if(n instanceof Co||n instanceof Kb||n instanceof dN||n instanceof xm||n instanceof HS)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||We('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Co(n.message);case"InvalidPDFException":return new Kb(n.message);case"PasswordException":return new dN(n.message,n.code);case"ResponseException":return new xm(n.message,n.status,n.missing);case"UnknownErrorException":return new HS(n.message,n.details)}return new HS(n.message,n.toString())}var $d,Vx,WI,zx,qI,Ux,KI,Vd,Vv;class vp{constructor(e,t,s){x(this,Vx);x(this,zx);x(this,Ux);x(this,Vd);x(this,$d,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",C(this,Vx,WI).bind(this),{signal:l(this,$d).signal})}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},s)}catch(o){i.reject(o)}return i.promise}sendWithStream(e,t,s,r){const i=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[i]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:e,streamId:i,data:t,desiredSize:u.desiredSize},r),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[i].pullCall=d,c.postMessage({sourceName:o,targetName:a,stream:Tt.PULL,streamId:i,desiredSize:u.desiredSize}),d.promise},cancel:u=>{Ee(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[i].cancelCall=d,this.streamControllers[i].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Tt.CANCEL,streamId:i,reason:Vn(u)}),d.promise}},s)}destroy(){var e;(e=l(this,$d))==null||e.abort(),S(this,$d,null)}}$d=new WeakMap,Vx=new WeakSet,WI=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){C(this,Ux,KI).call(this,e);return}if(e.callback){const s=e.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===lv.DATA)r.resolve(e.data);else if(e.callback===lv.ERROR)r.reject(Vn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,r=e.sourceName,i=this.comObj;Promise.try(t,e.data).then(function(o){i.postMessage({sourceName:s,targetName:r,callback:lv.DATA,callbackId:e.callbackId,data:o})},function(o){i.postMessage({sourceName:s,targetName:r,callback:lv.ERROR,callbackId:e.callbackId,reason:Vn(o)})});return}if(e.streamId){C(this,zx,qI).call(this,e);return}t(e.data)},zx=new WeakSet,qI=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this,a=this.actionHandler[e.action],c={enqueue(u,d=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=d,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:s,targetName:r,stream:Tt.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Tt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){Ee(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,i.postMessage({sourceName:s,targetName:r,stream:Tt.ERROR,streamId:t,reason:Vn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(a,e.data,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Tt.START_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Tt.START_COMPLETE,streamId:t,reason:Vn(u)})})},Ux=new WeakSet,KI=function(e){const t=e.streamId,s=this.sourceName,r=e.sourceName,i=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Tt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(Vn(e.reason));break;case Tt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(Vn(e.reason));break;case Tt.PULL:if(!a){i.postMessage({sourceName:s,targetName:r,stream:Tt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||bN).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Tt.PULL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Tt.PULL_COMPLETE,streamId:t,reason:Vn(u)})});break;case Tt.ENQUEUE:if(Ee(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case Tt.CLOSE:if(Ee(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),C(this,Vd,Vv).call(this,o,t);break;case Tt.ERROR:Ee(o,"error should have stream controller"),o.controller.error(Vn(e.reason)),C(this,Vd,Vv).call(this,o,t);break;case Tt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(Vn(e.reason)),C(this,Vd,Vv).call(this,o,t);break;case Tt.CANCEL:if(!a)break;const c=Vn(e.reason);Promise.try(a.onCancel||bN,c).then(function(){i.postMessage({sourceName:s,targetName:r,stream:Tt.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){i.postMessage({sourceName:s,targetName:r,stream:Tt.CANCEL_COMPLETE,streamId:t,reason:Vn(u)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Vd=new WeakSet,Vv=async function(e,t){var s,r,i;await Promise.allSettled([(s=e.startCall)==null?void 0:s.promise,(r=e.pullCall)==null?void 0:r.promise,(i=e.cancelCall)==null?void 0:i.promise]),delete this.streamControllers[t]};var gg;class XI{constructor({enableHWA:e=!1}){x(this,gg,!1);S(this,gg,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,gg)})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){We("Abstract method `_createCanvas` called.")}}gg=new WeakMap;class BG extends XI{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class YI{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class xN extends YI{async _fetch(e){const t=await jf(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):vy(t)}}class QI{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,r,i){return"none"}destroy(e=!1){}}var tc,zd,$i,Vi,gn,nc,sc,zt,fn,rc,bp,ia,Mu,Ud,zv,oa,ju,Hx,JI,yg,YA,aa,Lu,ic,xp,oc,wp,vg,QA,ac,Sp;class $G extends QI{constructor({docId:t,ownerDocument:s=globalThis.document}){super();x(this,zt);x(this,rc);x(this,ia);x(this,Ud);x(this,oa);x(this,Hx);x(this,yg);x(this,aa);x(this,ic);x(this,oc);x(this,vg);x(this,ac);x(this,tc,void 0);x(this,zd,void 0);x(this,$i,void 0);x(this,Vi,void 0);x(this,gn,void 0);x(this,nc,void 0);x(this,sc,0);S(this,Vi,t),S(this,gn,s)}addFilter(t){if(!t)return"none";let s=l(this,zt,fn).get(t);if(s)return s;const[r,i,o]=C(this,Ud,zv).call(this,t),a=t.length===1?r:`${r}${i}${o}`;if(s=l(this,zt,fn).get(a),s)return l(this,zt,fn).set(t,s),s;const c=`g_${l(this,Vi)}_transfer_map_${jt(this,sc)._++}`,u=C(this,oa,ju).call(this,c);l(this,zt,fn).set(t,u),l(this,zt,fn).set(a,u);const d=C(this,aa,Lu).call(this,c);return C(this,oc,wp).call(this,r,i,o,d),u}addHCMFilter(t,s){var y;const r=`${t}-${s}`,i="base";let o=l(this,rc,bp).get(i);if((o==null?void 0:o.key)===r||(o?((y=o.filter)==null||y.remove(),o.key=r,o.url="none",o.filter=null):(o={key:r,url:"none",filter:null},l(this,rc,bp).set(i,o)),!t||!s))return o.url;const a=C(this,ac,Sp).call(this,t);t=Y.makeHexColor(...a);const c=C(this,ac,Sp).call(this,s);if(s=Y.makeHexColor(...c),l(this,ia,Mu).style.color="",t==="#000000"&&s==="#ffffff"||t===s)return o.url;const u=new Array(256);for(let g=0;g<=255;g++){const w=g/255;u[g]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=u.join(","),h=`g_${l(this,Vi)}_hcm_filter`,f=o.filter=C(this,aa,Lu).call(this,h);C(this,oc,wp).call(this,d,d,d,f),C(this,yg,YA).call(this,f);const m=(g,w)=>{const v=a[g]/255,b=c[g]/255,_=new Array(w+1);for(let E=0;E<=w;E++)_[E]=v+E/w*(b-v);return _.join(",")};return C(this,oc,wp).call(this,m(0,5),m(1,5),m(2,5),f),o.url=C(this,oa,ju).call(this,h),o.url}addAlphaFilter(t){let s=l(this,zt,fn).get(t);if(s)return s;const[r]=C(this,Ud,zv).call(this,[t]),i=`alpha_${r}`;if(s=l(this,zt,fn).get(i),s)return l(this,zt,fn).set(t,s),s;const o=`g_${l(this,Vi)}_alpha_map_${jt(this,sc)._++}`,a=C(this,oa,ju).call(this,o);l(this,zt,fn).set(t,a),l(this,zt,fn).set(i,a);const c=C(this,aa,Lu).call(this,o);return C(this,vg,QA).call(this,r,c),a}addLuminosityFilter(t){let s=l(this,zt,fn).get(t||"luminosity");if(s)return s;let r,i;if(t?([r]=C(this,Ud,zv).call(this,[t]),i=`luminosity_${r}`):i="luminosity",s=l(this,zt,fn).get(i),s)return l(this,zt,fn).set(t,s),s;const o=`g_${l(this,Vi)}_luminosity_map_${jt(this,sc)._++}`,a=C(this,oa,ju).call(this,o);l(this,zt,fn).set(t,a),l(this,zt,fn).set(i,a);const c=C(this,aa,Lu).call(this,o);return C(this,Hx,JI).call(this,c),t&&C(this,vg,QA).call(this,r,c),a}addHighlightHCMFilter(t,s,r,i,o){var b;const a=`${s}-${r}-${i}-${o}`;let c=l(this,rc,bp).get(t);if((c==null?void 0:c.key)===a||(c?((b=c.filter)==null||b.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,rc,bp).set(t,c)),!s||!r))return c.url;const[u,d]=[s,r].map(C(this,ac,Sp).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[m,y]=[i,o].map(C(this,ac,Sp).bind(this));f<h&&([h,f,m,y]=[f,h,y,m]),l(this,ia,Mu).style.color="";const g=(_,E,k)=>{const T=new Array(256),P=(f-h)/k,N=_/255,M=(E-_)/(255*k);let L=0;for(let F=0;F<=k;F++){const D=Math.round(h+F*P),z=N+F*M;for(let I=L;I<=D;I++)T[I]=z;L=D+1}for(let F=L;F<256;F++)T[F]=T[L-1];return T.join(",")},w=`g_${l(this,Vi)}_hcm_${t}_filter`,v=c.filter=C(this,aa,Lu).call(this,w);return C(this,yg,YA).call(this,v),C(this,oc,wp).call(this,g(m[0],y[0],5),g(m[1],y[1],5),g(m[2],y[2],5),v),c.url=C(this,oa,ju).call(this,w),c.url}destroy(t=!1){var s,r,i,o;t&&((s=l(this,nc))!=null&&s.size)||((r=l(this,$i))==null||r.parentNode.parentNode.remove(),S(this,$i,null),(i=l(this,zd))==null||i.clear(),S(this,zd,null),(o=l(this,nc))==null||o.clear(),S(this,nc,null),S(this,sc,0))}}tc=new WeakMap,zd=new WeakMap,$i=new WeakMap,Vi=new WeakMap,gn=new WeakMap,nc=new WeakMap,sc=new WeakMap,zt=new WeakSet,fn=function(){return l(this,zd)||S(this,zd,new Map)},rc=new WeakSet,bp=function(){return l(this,nc)||S(this,nc,new Map)},ia=new WeakSet,Mu=function(){if(!l(this,$i)){const t=l(this,gn).createElement("div"),{style:s}=t;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const r=l(this,gn).createElementNS(xi,"svg");r.setAttribute("width",0),r.setAttribute("height",0),S(this,$i,l(this,gn).createElementNS(xi,"defs")),t.append(r),r.append(l(this,$i)),l(this,gn).body.append(t)}return l(this,$i)},Ud=new WeakSet,zv=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let f=0;f<256;f++)d[f]=u[f]/255;const h=d.join(",");return[h,h,h]}const[s,r,i]=t,o=new Array(256),a=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=s[u]/255,a[u]=r[u]/255,c[u]=i[u]/255;return[o.join(","),a.join(","),c.join(",")]},oa=new WeakSet,ju=function(t){if(l(this,tc)===void 0){S(this,tc,"");const s=l(this,gn).URL;s!==l(this,gn).baseURI&&(xy(s)?ue('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,tc,$k(s,"")))}return`url(${l(this,tc)}#${t})`},Hx=new WeakSet,JI=function(t){const s=l(this,gn).createElementNS(xi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(s)},yg=new WeakSet,YA=function(t){const s=l(this,gn).createElementNS(xi,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(s)},aa=new WeakSet,Lu=function(t){const s=l(this,gn).createElementNS(xi,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",t),l(this,ia,Mu).append(s),s},ic=new WeakSet,xp=function(t,s,r){const i=l(this,gn).createElementNS(xi,s);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)},oc=new WeakSet,wp=function(t,s,r,i){const o=l(this,gn).createElementNS(xi,"feComponentTransfer");i.append(o),C(this,ic,xp).call(this,o,"feFuncR",t),C(this,ic,xp).call(this,o,"feFuncG",s),C(this,ic,xp).call(this,o,"feFuncB",r)},vg=new WeakSet,QA=function(t,s){const r=l(this,gn).createElementNS(xi,"feComponentTransfer");s.append(r),C(this,ic,xp).call(this,r,"feFuncA",t)},ac=new WeakSet,Sp=function(t){return l(this,ia,Mu).style.color=t,Lf(getComputedStyle(l(this,ia,Mu)).getPropertyValue("color"))};class ZI{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class wN extends ZI{async _fetch(e){const t=await jf(e,"arraybuffer");return new Uint8Array(t)}}class eO{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){We("Abstract method `_fetch` called.")}}class SN extends eO{async _fetch(e){const t=await jf(e,"arraybuffer");return new Uint8Array(t)}}jn&&ue("Please use the `legacy` build in Node.js environments.");async function Wk(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class VG extends QI{}class zG extends XI{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class UG extends YI{async _fetch(e){return Wk(e)}}class HG extends ZI{async _fetch(e){return Wk(e)}}class GG extends eO{async _fetch(e){return Wk(e)}}const Tu="__forcedDependency",{floor:_N,ceil:AN}=Math;function cv(n,e,t,s,r,i){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],s),n[e*4+2]=Math.max(n[e*4+2],r),n[e*4+3]=Math.max(n[e*4+3],i)}const JA=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Hd,la;class WG{constructor(e,t){x(this,Hd,void 0);x(this,la,void 0);S(this,Hd,e),S(this,la,t)}get length(){return l(this,Hd).length}isEmpty(e){return l(this,Hd)[e]===JA}minX(e){return l(this,la)[e*4+0]/256}minY(e){return l(this,la)[e*4+1]/256}maxX(e){return(l(this,la)[e*4+2]+1)/256}maxY(e){return(l(this,la)[e*4+3]+1)/256}}Hd=new WeakMap,la=new WeakMap;const uv=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var Hn,Gn,lc,pr,cc,zi,Ie,Be,Ui,Wn,bg,Gd,uc,dc,Hi,yn,Jr,xg,ZA;class qG{constructor(e,t,s=!1){x(this,xg);x(this,Hn,{__proto__:null});x(this,Gn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Tu]:[]});x(this,lc,new Map);x(this,pr,[]);x(this,cc,[]);x(this,zi,[[1,0,0,1,0,0]]);x(this,Ie,[-1/0,-1/0,1/0,1/0]);x(this,Be,new Float64Array([1/0,1/0,-1/0,-1/0]));x(this,Ui,-1);x(this,Wn,new Set);x(this,bg,new Map);x(this,Gd,new Map);x(this,uc,void 0);x(this,dc,void 0);x(this,Hi,void 0);x(this,yn,void 0);x(this,Jr,void 0);S(this,uc,e.width),S(this,dc,e.height),C(this,xg,ZA).call(this,t),s&&S(this,Jr,new Map)}growOperationsCount(e){e>=l(this,yn).length&&C(this,xg,ZA).call(this,e,l(this,yn))}save(e){return S(this,Hn,{__proto__:l(this,Hn)}),S(this,Gn,{__proto__:l(this,Gn),transform:{__proto__:l(this,Gn).transform},moveText:{__proto__:l(this,Gn).moveText},sameLineText:{__proto__:l(this,Gn).sameLineText},[Tu]:{__proto__:l(this,Gn)[Tu]}}),S(this,Ie,{__proto__:l(this,Ie)}),l(this,pr).push(e),this}restore(e){var r;const t=Object.getPrototypeOf(l(this,Hn));if(t===null)return this;S(this,Hn,t),S(this,Gn,Object.getPrototypeOf(l(this,Gn))),S(this,Ie,Object.getPrototypeOf(l(this,Ie)));const s=l(this,pr).pop();return s!==void 0&&((r=uv(l(this,Jr),e))==null||r.dependencies.add(s),l(this,yn)[e]=l(this,yn)[s]),this}recordOpenMarker(e){return l(this,pr).push(e),this}getOpenMarker(){return l(this,pr).length===0?null:l(this,pr).at(-1)}recordCloseMarker(e){var s;const t=l(this,pr).pop();return t!==void 0&&((s=uv(l(this,Jr),e))==null||s.dependencies.add(t),l(this,yn)[e]=l(this,yn)[t]),this}beginMarkedContent(e){return l(this,cc).push(e),this}endMarkedContent(e){var s;const t=l(this,cc).pop();return t!==void 0&&((s=uv(l(this,Jr),e))==null||s.dependencies.add(t),l(this,yn)[e]=l(this,yn)[t]),this}pushBaseTransform(e){return l(this,zi).push(Y.multiplyByDOMMatrix(l(this,zi).at(-1),e.getTransform())),this}popBaseTransform(){return l(this,zi).length>1&&l(this,zi).pop(),this}recordSimpleData(e,t){return l(this,Hn)[e]=t,this}recordIncrementalData(e,t){return l(this,Gn)[e].push(t),this}resetIncrementalData(e,t){return l(this,Gn)[e].length=0,this}recordNamedData(e,t){return l(this,lc).set(e,t),this}recordSimpleDataFromNamed(e,t,s){l(this,Hn)[e]=l(this,lc).get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(Tu,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in l(this,Hn)&&this.recordFutureForcedDependency(t,l(this,Hn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of l(this,Wn))this.recordFutureForcedDependency(Tu,e);return this}resetBBox(e){return l(this,Ui)!==e&&(S(this,Ui,e),l(this,Be)[0]=1/0,l(this,Be)[1]=1/0,l(this,Be)[2]=-1/0,l(this,Be)[3]=-1/0),this}recordClipBox(e,t,s,r,i,o){const a=Y.multiplyByDOMMatrix(l(this,zi).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];Y.axialAlignedBoundingBox([s,i,r,o],a,c);const u=Y.intersect(l(this,Ie),c);return u?(l(this,Ie)[0]=u[0],l(this,Ie)[1]=u[1],l(this,Ie)[2]=u[2],l(this,Ie)[3]=u[3]):(l(this,Ie)[0]=l(this,Ie)[1]=1/0,l(this,Ie)[2]=l(this,Ie)[3]=-1/0),this}recordBBox(e,t,s,r,i,o){const a=l(this,Ie);if(a[0]===1/0)return this;const c=Y.multiplyByDOMMatrix(l(this,zi).at(-1),t.getTransform());if(a[0]===-1/0)return Y.axialAlignedBoundingBox([s,i,r,o],c,l(this,Be)),this;const u=[1/0,1/0,-1/0,-1/0];return Y.axialAlignedBoundingBox([s,i,r,o],c,u),l(this,Be)[0]=Math.min(l(this,Be)[0],Math.max(u[0],a[0])),l(this,Be)[1]=Math.min(l(this,Be)[1],Math.max(u[1],a[1])),l(this,Be)[2]=Math.max(l(this,Be)[2],Math.min(u[2],a[2])),l(this,Be)[3]=Math.max(l(this,Be)[3],Math.min(u[3],a[3])),this}recordCharacterBBox(e,t,s,r=1,i=0,o=0,a){const c=s.bbox;let u,d;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&l(this,Gd).get(s),u!==!1&&(d=[0,0,0,0],Y.axialAlignedBoundingBox(c,s.fontMatrix,d),(r!==1||i!==0||o!==0)&&Y.scaleMinMax([r,0,0,-r,i,o],d),u)))return this.recordBBox(e,t,d[0],d[2],d[1],d[3]);if(!a)return this.recordFullPageBBox(e);const h=a();return c&&d&&u===void 0&&(u=d[0]<=i-h.actualBoundingBoxLeft&&d[2]>=i+h.actualBoundingBoxRight&&d[1]<=o-h.actualBoundingBoxAscent&&d[3]>=o+h.actualBoundingBoxDescent,l(this,Gd).set(s,u),u)?this.recordBBox(e,t,d[0],d[2],d[1],d[3]):this.recordBBox(e,t,i-h.actualBoundingBoxLeft,i+h.actualBoundingBoxRight,o-h.actualBoundingBoxAscent,o+h.actualBoundingBoxDescent)}recordFullPageBBox(e){return l(this,Be)[0]=Math.max(0,l(this,Ie)[0]),l(this,Be)[1]=Math.max(0,l(this,Ie)[1]),l(this,Be)[2]=Math.min(l(this,uc),l(this,Ie)[2]),l(this,Be)[3]=Math.min(l(this,dc),l(this,Ie)[3]),this}getSimpleIndex(e){return l(this,Hn)[e]}recordDependencies(e,t){const s=l(this,Wn),r=l(this,Hn),i=l(this,Gn);for(const o of t)o in l(this,Hn)?s.add(r[o]):o in i&&i[o].forEach(s.add,s);return this}recordNamedDependency(e,t){return l(this,lc).has(t)&&l(this,Wn).add(l(this,lc).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[Tu]),l(this,Jr)){const s=uv(l(this,Jr),e),{dependencies:r}=s;l(this,Wn).forEach(r.add,r),l(this,pr).forEach(r.add,r),l(this,cc).forEach(r.add,r),r.delete(e),s.isRenderingOperation=!0}if(l(this,Ui)===e){const s=_N(l(this,Be)[0]*256/l(this,uc)),r=_N(l(this,Be)[1]*256/l(this,dc)),i=AN(l(this,Be)[2]*256/l(this,uc)),o=AN(l(this,Be)[3]*256/l(this,dc));cv(l(this,Hi),e,s,r,i,o);for(const a of l(this,Wn))a!==e&&cv(l(this,Hi),a,s,r,i,o);for(const a of l(this,pr))a!==e&&cv(l(this,Hi),a,s,r,i,o);for(const a of l(this,cc))a!==e&&cv(l(this,Hi),a,s,r,i,o);t||(l(this,Wn).clear(),S(this,Ui,-1))}return this}recordShowTextOperation(e,t=!1){const s=Array.from(l(this,Wn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,t=!1){return l(this,Ui)===e&&(S(this,Ui,-1),l(this,Ie)[0]=Math.max(l(this,Ie)[0],l(this,Be)[0]),l(this,Ie)[1]=Math.max(l(this,Ie)[1],l(this,Be)[1]),l(this,Ie)[2]=Math.min(l(this,Ie)[2],l(this,Be)[2]),l(this,Ie)[3]=Math.min(l(this,Ie)[3],l(this,Be)[3]),t||l(this,Wn).clear()),this}_takePendingDependencies(){const e=l(this,Wn);return S(this,Wn,new Set),e}_extractOperation(e){const t=l(this,bg).get(e);return l(this,bg).delete(e),t}_pushPendingDependencies(e){for(const t of e)l(this,Wn).add(t)}take(){return l(this,Gd).clear(),new WG(l(this,yn),l(this,Hi))}takeDebugMetadata(){return l(this,Jr)}}Hn=new WeakMap,Gn=new WeakMap,lc=new WeakMap,pr=new WeakMap,cc=new WeakMap,zi=new WeakMap,Ie=new WeakMap,Be=new WeakMap,Ui=new WeakMap,Wn=new WeakMap,bg=new WeakMap,Gd=new WeakMap,uc=new WeakMap,dc=new WeakMap,Hi=new WeakMap,yn=new WeakMap,Jr=new WeakMap,xg=new WeakSet,ZA=function(e,t){const s=new ArrayBuffer(e*4);S(this,Hi,new Uint8ClampedArray(s)),S(this,yn,new Uint32Array(s)),t&&t.length>0?(l(this,yn).set(t),l(this,yn).fill(JA,t.length)):l(this,yn).fill(JA)};var He,xt,mr,Wd,qd;const uT=class uT{constructor(e,t,s){x(this,He,void 0);x(this,xt,void 0);x(this,mr,void 0);x(this,Wd,0);x(this,qd,0);if(e instanceof uT&&l(e,mr)===!!s)return e;S(this,He,e),S(this,xt,t),S(this,mr,!!s)}growOperationsCount(){throw new Error("Unreachable")}save(e){return jt(this,qd)._++,l(this,He).save(l(this,xt)),this}restore(e){return l(this,qd)>0&&(l(this,He).restore(l(this,xt)),jt(this,qd)._--),this}recordOpenMarker(e){return jt(this,Wd)._++,this}getOpenMarker(){return l(this,Wd)>0?l(this,xt):l(this,He).getOpenMarker()}recordCloseMarker(e){return jt(this,Wd)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return l(this,He).pushBaseTransform(e),this}popBaseTransform(){return l(this,He).popBaseTransform(),this}recordSimpleData(e,t){return l(this,He).recordSimpleData(e,l(this,xt)),this}recordIncrementalData(e,t){return l(this,He).recordIncrementalData(e,l(this,xt)),this}resetIncrementalData(e,t){return l(this,He).resetIncrementalData(e,l(this,xt)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return l(this,He).recordSimpleDataFromNamed(e,t,l(this,xt)),this}recordFutureForcedDependency(e,t){return l(this,He).recordFutureForcedDependency(e,l(this,xt)),this}inheritSimpleDataAsFutureForcedDependencies(e){return l(this,He).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return l(this,He).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return l(this,mr)||l(this,He).resetBBox(l(this,xt)),this}recordClipBox(e,t,s,r,i,o){return l(this,mr)||l(this,He).recordClipBox(l(this,xt),t,s,r,i,o),this}recordBBox(e,t,s,r,i,o){return l(this,mr)||l(this,He).recordBBox(l(this,xt),t,s,r,i,o),this}recordCharacterBBox(e,t,s,r,i,o,a){return l(this,mr)||l(this,He).recordCharacterBBox(l(this,xt),t,s,r,i,o,a),this}recordFullPageBBox(e){return l(this,mr)||l(this,He).recordFullPageBBox(l(this,xt)),this}getSimpleIndex(e){return l(this,He).getSimpleIndex(e)}recordDependencies(e,t){return l(this,He).recordDependencies(l(this,xt),t),this}recordNamedDependency(e,t){return l(this,He).recordNamedDependency(l(this,xt),t),this}recordOperation(e){return l(this,He).recordOperation(l(this,xt),!0),this}recordShowTextOperation(e){return l(this,He).recordShowTextOperation(l(this,xt),!0),this}bboxToClipBoxDropOperation(e){return l(this,mr)||l(this,He).bboxToClipBoxDropOperation(l(this,xt),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};He=new WeakMap,xt=new WeakMap,mr=new WeakMap,Wd=new WeakMap,qd=new WeakMap;let Qb=uT;const Is={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ln={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function eE(n,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,s),n.clip(r)}class qk{isModifyingCurrentTransform(){return!1}getPattern(){We("Abstract method `getPattern` called.")}}class KG extends qk{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,r){let i;if(r===ln.STROKE||r===ln.FILL){const o=t.current.getClippedPathBoundingBox(r,ut(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",a,c),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),s=Y.transform(s,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),eE(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),i=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(s);i.setTransform(h)}else eE(e,this._bbox),i=this._createGradient(e);return i}}function qS(n,e,t,s,r,i,o,a){const c=e.coords,u=e.colors,d=n.data,h=n.width*4;let f;c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f),c[s+1]>c[r+1]&&(f=s,s=r,r=f,f=o,o=a,a=f),c[t+1]>c[s+1]&&(f=t,t=s,s=f,f=i,i=o,o=f);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,g=(c[s]+e.offsetX)*e.scaleX,w=(c[s+1]+e.offsetY)*e.scaleY,v=(c[r]+e.offsetX)*e.scaleX,b=(c[r+1]+e.offsetY)*e.scaleY;if(y>=b)return;const _=u[i],E=u[i+1],k=u[i+2],T=u[o],P=u[o+1],N=u[o+2],M=u[a],L=u[a+1],F=u[a+2],D=Math.round(y),z=Math.round(b);let I,R,j,O,B,$,V,W;for(let q=D;q<=z;q++){if(q<w){const ge=q<y?0:(y-q)/(y-w);I=m-(m-g)*ge,R=_-(_-T)*ge,j=E-(E-P)*ge,O=k-(k-N)*ge}else{let ge;q>b?ge=1:w===b?ge=0:ge=(w-q)/(w-b),I=g-(g-v)*ge,R=T-(T-M)*ge,j=P-(P-L)*ge,O=N-(N-F)*ge}let K;q<y?K=0:q>b?K=1:K=(y-q)/(y-b),B=m-(m-v)*K,$=_-(_-M)*K,V=E-(E-L)*K,W=k-(k-F)*K;const se=Math.round(Math.min(I,B)),pe=Math.round(Math.max(I,B));let ye=h*q+se*4;for(let ge=se;ge<=pe;ge++)K=(I-ge)/(I-B),K<0?K=0:K>1&&(K=1),d[ye++]=R-(R-$)*K|0,d[ye++]=j-(j-V)*K|0,d[ye++]=O-(O-W)*K|0,d[ye++]=255}}function XG(n,e,t){const s=e.coords,r=e.colors;let i,o;switch(e.type){case"lattice":const a=e.verticesPerRow,c=Math.floor(s.length/a)-1,u=a-1;for(i=0;i<c;i++){let d=i*a;for(let h=0;h<u;h++,d++)qS(n,t,s[d],s[d+1],s[d+a],r[d],r[d+1],r[d+a]),qS(n,t,s[d+a+1],s[d+1],s[d+a],r[d+a+1],r[d+1],r[d+a])}break;case"triangles":for(i=0,o=s.length;i<o;i+=3)qS(n,t,s[i],s[i+1],s[i+2],r[i],r[i+1],r[i+2]);break;default:throw new Error("illegal figure")}}class YG extends qk{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-c,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),m=u/h,y=d/f,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/m,scaleY:1/y},w=h+2*2,v=f+2*2,b=s.getCanvas("mesh",w,v),_=b.context,E=_.createImageData(h,f);if(t){const T=E.data;for(let P=0,N=T.length;P<N;P+=4)T[P]=t[0],T[P+1]=t[1],T[P+2]=t[2],T[P+3]=255}for(const T of this._figures)XG(E,T,g);return _.putImageData(E,2,2),{canvas:b.canvas,offsetX:a-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,r){eE(e,this._bbox);const i=new Float32Array(2);if(r===ln.SHADING)Y.singularValueDecompose2dScale(ut(e),i);else if(this.matrix){Y.singularValueDecompose2dScale(this.matrix,i);const[a,c]=i;Y.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=a,i[1]*=c}else Y.singularValueDecompose2dScale(t.baseTransform,i);const o=this._createMeshCanvas(i,r===ln.SHADING?null:this._background,t.cachedCanvases);return r!==ln.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class QG extends qk{getPattern(){return"hotpink"}}function JG(n){switch(n[0]){case"RadialAxial":return new KG(n);case"Mesh":return new YG(n);case"Dummy":return new QG}throw new Error(`Unknown IR type: ${n[0]}`)}const EN={COLORED:1,UNCOLORED:2},Gx=class Gx{constructor(e,t,s,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e,t){var $,V;const{bbox:s,operatorList:r,paintType:i,tilingType:o,color:a,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:d}=this;u=Math.abs(u),d=Math.abs(d),D1("TilingType: "+o);const h=s[0],f=s[1],m=s[2],y=s[3],g=m-h,w=y-f,v=new Float32Array(2);Y.singularValueDecompose2dScale(this.matrix,v);const[b,_]=v;Y.singularValueDecompose2dScale(this.baseTransform,v);const E=b*v[0],k=_*v[1];let T=g,P=w,N=!1,M=!1;const L=Math.ceil(u*E),F=Math.ceil(d*k),D=Math.ceil(g*E),z=Math.ceil(w*k);L>=D?T=u:N=!0,F>=z?P=d:M=!0;const I=this.getSizeAndScale(T,this.ctx.canvas.width,E),R=this.getSizeAndScale(P,this.ctx.canvas.height,k),j=e.cachedCanvases.getCanvas("pattern",I.size,R.size),O=j.context,B=c.createCanvasGraphics(O,t);if(B.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(B,i,a),O.translate(-I.scale*h,-R.scale*f),B.transform(0,I.scale,0,0,R.scale,0,0),O.save(),($=B.dependencyTracker)==null||$.save(),this.clipBbox(B,h,f,m,y),B.baseTransform=ut(B.ctx),B.executeOperatorList(r),B.endDrawing(),(V=B.dependencyTracker)==null||V.restore(),O.restore(),N||M){const W=j.canvas;N&&(T=u),M&&(P=d);const q=this.getSizeAndScale(T,this.ctx.canvas.width,E),K=this.getSizeAndScale(P,this.ctx.canvas.height,k),se=q.size,pe=K.size,ye=e.cachedCanvases.getCanvas("pattern-workaround",se,pe),ge=ye.context,Jt=N?Math.floor(g/u):0,yt=M?Math.floor(w/d):0;for(let ve=0;ve<=Jt;ve++)for(let X=0;X<=yt;X++)ge.drawImage(W,se*ve,pe*X,se,pe,0,0,se,pe);return{canvas:ye.canvas,scaleX:q.scale,scaleY:K.scale,offsetX:h,offsetY:f}}return{canvas:j.canvas,scaleX:I.scale,scaleY:R.scale,offsetX:h,offsetY:f}}getSizeAndScale(e,t,s){const r=Math.max(Gx.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*s);return i>=r?i=r:s=i/e,{scale:s,size:i}}clipBbox(e,t,s,r,i){const o=r-t,a=i-s;e.ctx.rect(t,s,o,a),Y.axialAlignedBoundingBox([t,s,r,i],ut(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const r=e.ctx,i=e.current;switch(t){case EN.COLORED:const{fillStyle:o,strokeStyle:a}=this.ctx;r.fillStyle=i.fillColor=o,r.strokeStyle=i.strokeColor=a;break;case EN.UNCOLORED:r.fillStyle=r.strokeStyle=s,i.fillColor=i.strokeColor=s;break;default:throw new bG(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,r,i){let o=s;r!==ln.SHADING&&(o=Y.transform(o,t.baseTransform),this.matrix&&(o=Y.transform(o,this.matrix)));const a=this.createPatternCanvas(t,i);let c=new DOMMatrix(o);c=c.translate(a.offsetX,a.offsetY),c=c.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");return u.setTransform(c),u}};U(Gx,"MAX_PATTERN_SIZE",3e3);let tE=Gx;function ZG({src:n,srcPos:e=0,dest:t,width:s,height:r,nonBlackColor:i=4294967295,inverseDecode:o=!1}){const a=Qt.isLittleEndian?4278190080:255,[c,u]=o?[i,a]:[a,i],d=s>>3,h=s&7,f=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<r;y++){for(const w=e+d;e<w;e++){const v=e<f?n[e]:255;t[m++]=v&128?u:c,t[m++]=v&64?u:c,t[m++]=v&32?u:c,t[m++]=v&16?u:c,t[m++]=v&8?u:c,t[m++]=v&4?u:c,t[m++]=v&2?u:c,t[m++]=v&1?u:c}if(h===0)continue;const g=e<f?n[e++]:255;for(let w=0;w<h;w++)t[m++]=g&1<<7-w?u:c}return{srcPos:e,destPos:m}}const CN=16,kN=100,eW=15,TN=10,Yn=16,KS=new DOMMatrix,Cs=new Float32Array(2),ed=new Float32Array([1/0,1/0,-1/0,-1/0]);function tW(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},n.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},n.transform=function(t,s,r,i,o,a){e.transform(t,s,r,i,o,a),this.__originalTransform(t,s,r,i,o,a)},n.setTransform=function(t,s,r,i,o,a){e.setTransform(t,s,r,i,o,a),this.__originalSetTransform(t,s,r,i,o,a)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},n.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},n.bezierCurveTo=function(t,s,r,i,o,a){e.bezierCurveTo(t,s,r,i,o,a),this.__originalBezierCurveTo(t,s,r,i,o,a)},n.rect=function(t,s,r,i){e.rect(t,s,r,i),this.__originalRect(t,s,r,i)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class nW{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,s)):(r=this.canvasFactory.create(t,s),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function dv(n,e,t,s,r,i,o,a,c,u){const[d,h,f,m,y,g]=ut(n);if(h===0&&f===0){const b=o*d+y,_=Math.round(b),E=a*m+g,k=Math.round(E),T=(o+c)*d+y,P=Math.abs(Math.round(T)-_)||1,N=(a+u)*m+g,M=Math.abs(Math.round(N)-k)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(m),_,k),n.drawImage(e,t,s,r,i,0,0,P,M),n.setTransform(d,h,f,m,y,g),[P,M]}if(d===0&&m===0){const b=a*f+y,_=Math.round(b),E=o*h+g,k=Math.round(E),T=(a+u)*f+y,P=Math.abs(Math.round(T)-_)||1,N=(o+c)*h+g,M=Math.abs(Math.round(N)-k)||1;return n.setTransform(0,Math.sign(h),Math.sign(f),0,_,k),n.drawImage(e,t,s,r,i,0,0,M,P),n.setTransform(d,h,f,m,y,g),[M,P]}n.drawImage(e,t,s,r,i,o,a,c,u);const w=Math.hypot(d,h),v=Math.hypot(f,m);return[w*c,v*u]}class PN{constructor(e,t,s){U(this,"alphaIsShape",!1);U(this,"fontSize",0);U(this,"fontSizeScale",1);U(this,"textMatrix",null);U(this,"textMatrixScale",1);U(this,"fontMatrix",kA);U(this,"leading",0);U(this,"x",0);U(this,"y",0);U(this,"lineX",0);U(this,"lineY",0);U(this,"charSpacing",0);U(this,"wordSpacing",0);U(this,"textHScale",1);U(this,"textRenderingMode",Zt.FILL);U(this,"textRise",0);U(this,"fillColor","#000000");U(this,"strokeColor","#000000");U(this,"patternFill",!1);U(this,"patternStroke",!1);U(this,"fillAlpha",1);U(this,"strokeAlpha",1);U(this,"lineWidth",1);U(this,"activeSMask",null);U(this,"transferMaps","none");s==null||s(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=ed.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ln.FILL,t=null){const s=this.minMax.slice();if(e===ln.STROKE){t||We("Stroke bounding box must include transform."),Y.singularValueDecompose2dScale(t,Cs);const r=Cs[0]*this.lineWidth/2,i=Cs[1]*this.lineWidth/2;s[0]-=r,s[1]-=i,s[2]+=r,s[3]+=i}return s}updateClipFromPath(){const e=Y.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(ed,0)}getClippedPathBoundingBox(e=ln.FILL,t=null){return Y.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function NN(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,s=e.width,r=t%Yn,i=(t-r)/Yn,o=r===0?i:i+1,a=n.createImageData(s,Yn);let c=0,u;const d=e.data,h=a.data;let f,m,y,g;if(e.kind===Yp.GRAYSCALE_1BPP){const w=d.byteLength,v=new Uint32Array(h.buffer,0,h.byteLength>>2),b=v.length,_=s+7>>3,E=4294967295,k=Qt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<i?Yn:r,u=0,m=0;m<y;m++){const T=w-c;let P=0;const N=T>_?s:T*8-7,M=N&-8;let L=0,F=0;for(;P<M;P+=8)F=d[c++],v[u++]=F&128?E:k,v[u++]=F&64?E:k,v[u++]=F&32?E:k,v[u++]=F&16?E:k,v[u++]=F&8?E:k,v[u++]=F&4?E:k,v[u++]=F&2?E:k,v[u++]=F&1?E:k;for(;P<N;P++)L===0&&(F=d[c++],L=128),v[u++]=F&L?E:k,L>>=1}for(;u<b;)v[u++]=0;n.putImageData(a,0,f*Yn)}}else if(e.kind===Yp.RGBA_32BPP){for(m=0,g=s*Yn*4,f=0;f<i;f++)h.set(d.subarray(c,c+g)),c+=g,n.putImageData(a,0,m),m+=Yn;f<o&&(g=s*r*4,h.set(d.subarray(c,c+g)),n.putImageData(a,0,m))}else if(e.kind===Yp.RGB_24BPP)for(y=Yn,g=s*y,f=0;f<o;f++){for(f>=i&&(y=r,g=s*y),u=0,m=g;m--;)h[u++]=d[c++],h[u++]=d[c++],h[u++]=d[c++],h[u++]=255;n.putImageData(a,0,f*Yn)}else throw new Error(`bad image kind: ${e.kind}`)}function RN(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,r=t%Yn,i=(t-r)/Yn,o=r===0?i:i+1,a=n.createImageData(s,Yn);let c=0;const u=e.data,d=a.data;for(let h=0;h<o;h++){const f=h<i?Yn:r;({srcPos:c}=ZG({src:u,srcPos:c,dest:d,width:s,height:f,nonBlackColor:0})),n.putImageData(a,0,h*Yn)}}function ep(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)n[s]!==void 0&&(e[s]=n[s]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function hv(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function MN(n,e){if(e)return!0;Y.singularValueDecompose2dScale(n,Cs);const t=Math.fround(Nr.pixelRatio*ko.PDF_TO_CSS_UNITS);return Cs[0]<=t&&Cs[1]<=t}const sW=["butt","round","square"],rW=["miter","round","bevel"],iW={},jN={};var wg,nE,Sg,sE,_g,rE;const dT=class dT{constructor(e,t,s,r,i,{optionalContentConfig:o,markedContentStack:a=null},c,u,d){x(this,wg);x(this,Sg);x(this,_g);this.ctx=e,this.current=new PN(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new nW(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=d??null}getObject(e,t,s=null){var r;return typeof t=="string"?((r=this.dependencyTracker)==null||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:r=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,i,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",i,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ut(this.compositeCtx))}this.ctx.save(),hv(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=ut(this.ctx)}executeOperatorList(e,t,s,r,i){var v;const o=e.argsArray,a=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const d=u-c>TN&&typeof s=="function",h=d?Date.now()+eW:0;let f=0;const m=this.commonObjs,y=this.objs;let g,w;for(;;){if(r!==void 0&&c===r.nextBreakPoint)return r.breakIt(c,s),c;if(!i||i(c))if(g=a[c],w=o[c]??null,g!==Af.dependency)w===null?this[g](c):this[g](c,...w);else for(const b of w){(v=this.dependencyTracker)==null||v.recordNamedData(b,c);const _=b.startsWith("g_")?m:y;if(!_.has(b))return _.get(b,s),c}if(c++,c===u)return c;if(d&&++f>TN){if(Date.now()>h)return s(),c;f=0}}}endDrawing(){C(this,wg,nE).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),C(this,Sg,sE).call(this)}_scaleImage(e,t){const s=e.width??e.displayWidth,r=e.height??e.displayHeight;let i=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=s,c=r,u="prescale1",d,h;for(;i>2&&a>1||o>2&&c>1;){let f=a,m=c;i>2&&a>1&&(f=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),i/=a/f),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),d=this.cachedCanvases.getCanvas(u,f,m),h=d.context,h.clearRect(0,0,f,m),h.drawImage(e,0,0,a,c,0,0,f,m),e=d.canvas,a=f,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:c}}_createMaskCanvas(e,t){var L,F;const s=this.ctx,{width:r,height:i}=t,o=this.current.fillColor,a=this.current.patternFill,c=ut(s);let u,d,h,f;if((t.bitmap||t.data)&&t.count>1){const D=t.bitmap||t.data.buffer;d=JSON.stringify(a?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(D),u||(u=new Map,this._cachedBitmapsMap.set(D,u));const z=u.get(d);if(z&&!a){const I=Math.round(Math.min(c[0],c[2])+c[4]),R=Math.round(Math.min(c[1],c[3])+c[5]);return(L=this.dependencyTracker)==null||L.recordDependencies(e,Is.transformAndFill),{canvas:z,offsetX:I,offsetY:R}}h=z}h||(f=this.cachedCanvases.getCanvas("maskCanvas",r,i),RN(f.context,t));let m=Y.transform(c,[1/r,0,0,-1/i,0,0]);m=Y.transform(m,[1,0,0,1,0,-i]);const y=ed.slice();Y.axialAlignedBoundingBox([0,0,r,i],m,y);const[g,w,v,b]=y,_=Math.round(v-g)||1,E=Math.round(b-w)||1,k=this.cachedCanvases.getCanvas("fillCanvas",_,E),T=k.context,P=g,N=w;T.translate(-P,-N),T.transform(...m),h||(h=this._scaleImage(f.canvas,Or(T)),h=h.img,u&&a&&u.set(d,h)),T.imageSmoothingEnabled=MN(ut(T),t.interpolate),dv(T,h,0,0,h.width,h.height,0,0,r,i),T.globalCompositeOperation="source-in";const M=Y.transform(Or(T),[1,0,0,1,-P,-N]);return T.fillStyle=a?o.getPattern(s,this,M,ln.FILL,e):o,T.fillRect(0,0,r,i),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,k.canvas)),(F=this.dependencyTracker)==null||F.recordDependencies(e,Is.transformAndFill),{canvas:k.canvas,offsetX:Math.round(P),offsetY:Math.round(N)}}setLineWidth(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineCap",e),this.ctx.lineCap=sW[t]}setLineJoin(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("lineJoin",e),this.ctx.lineJoin=rW[t]}setMiterLimit(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(t),r.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var s,r,i,o,a;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(s=this.dependencyTracker)==null||s.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(r=this.dependencyTracker)==null||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(i=this.dependencyTracker)==null||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(a=this.dependencyTracker)==null||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,s);this.suspendedCtx=this.ctx;const o=this.ctx=i.context;o.setTransform(this.suspendedCtx.getTransform()),ep(this.suspendedCtx,o),tW(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ep(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,r){const i=r[0],o=r[1],a=r[2]-i,c=r[3]-o;a===0||c===0||(this.genericComposeSMask(t.context,s,a,c,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,r,i,o,a,c,u,d,h){let f=e.canvas,m=c-d,y=u-h;if(o)if(m<0||y<0||m+s>f.width||y+r>f.height){const w=this.cachedCanvases.getCanvas("maskExtension",s,r),v=w.context;v.drawImage(f,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,s,r),v.globalCompositeOperation="source-over",f=w.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const w=new Path2D;w.rect(m,y,s,r),e.clip(w),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,s,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),i==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):i==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const g=new Path2D;g.rect(c,u,s,r),t.clip(g),t.globalCompositeOperation="destination-in",t.drawImage(f,m,y,s,r,c,u,s,r),t.restore()}save(e){var s;this.inSMaskMode&&ep(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(s=this.dependencyTracker)==null||s.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&ep(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,r,i,o,a){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,s,r,i,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,r){let[i]=s;if(!r){i||(i=s[0]=new Path2D),this[t](e,i);return}if(this.dependencyTracker!==null){const o=t===Af.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const o=s[0]=new Path2D;for(let a=0,c=i.length;a<c;)switch(i[a++]){case iv.moveTo:o.moveTo(i[a++],i[a++]);break;case iv.lineTo:o.lineTo(i[a++],i[a++]);break;case iv.curveTo:o.bezierCurveTo(i[a++],i[a++],i[a++],i[a++],i[a++],i[a++]);break;case iv.closePath:o.closePath();break;default:ue(`Unrecognized drawing path operator: ${i[a-1]}`);break}i=o}Y.axialAlignedBoundingBox(r,ut(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){var o;const r=this.ctx,i=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const a=i.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=i.getPattern(r,this,Or(r),ln.STROKE,e),a){const c=new Path2D;c.addPath(t,r.getTransform().invertSelf().multiplySelf(a)),t=c}this.rescaleAndStroke(t,!1),r.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,Is.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(ln.STROKE,ut(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){var u,d,h;const r=this.ctx,i=this.current.fillColor,o=this.current.patternFill;let a=!1;if(o){const f=i.isModifyingCurrentTransform()?r.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),r.save(),r.fillStyle=i.getPattern(r,this,Or(r),ln.FILL,e),f){const m=new Path2D;m.addPath(t,r.getTransform().invertSelf().multiplySelf(f)),t=m}a=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(r.fill(t,"evenodd"),this.pendingEOFill=!1):r.fill(t)),(d=this.dependencyTracker)==null||d.recordDependencies(e,Is.fill),a&&(r.restore(),(h=this.dependencyTracker)==null||h.restore(e)),s&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var s;this.ctx.fill(t),(s=this.dependencyTracker)==null||s.recordDependencies(e,Is.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=iW}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=jN}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;t!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(t!==void 0){const r=new Path2D,i=s.getTransform().invertSelf();for(const{transform:o,x:a,y:c,fontSize:u,path:d}of t)d&&r.addPath(d,new DOMMatrix(o).preMultiplySelf(i).translate(a,c).scale(u,-u));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){var h,f;(h=this.dependencyTracker)==null||h.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const r=this.commonObjs.get(t),i=this.current;if(!r)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=r.fontMatrix||kA,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&ue("Invalid font matrix for font "+t),s<0?(s=-s,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",a=((f=r.systemFontInfo)==null?void 0:f.css)||`"${o}", ${r.fallbackName}`;let c="normal";r.black?c="900":r.bold&&(c="bold");const u=r.italic?"italic":"normal";let d=s;s<CN?d=CN:s>kN&&(d=kN),this.current.fontSizeScale=s/d,this.ctx.font=`${u} ${c} ${d}px ${a}`}setTextRenderingMode(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){var r;(r=this.dependencyTracker)==null||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,s,r,i,o){var v,b,_,E;const a=this.ctx,c=this.current,u=c.font,d=c.textRenderingMode,h=c.fontSize/c.fontSizeScale,f=d&Zt.FILL_STROKE_MASK,m=!!(d&Zt.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,g=c.patternStroke&&!u.missingFile;let w;if((u.disableFontFace||m||y||g)&&!u.missingFile&&(w=u.getPathGenerator(this.commonObjs,t)),w&&(u.disableFontFace||y||g)){a.save(),a.translate(s,r),a.scale(h,-h),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,a,u);let k;if(f===Zt.FILL||f===Zt.FILL_STROKE)if(i){k=a.getTransform(),a.setTransform(...i);const T=C(this,_g,rE).call(this,w,k,i);a.fill(T)}else a.fill(w);if(f===Zt.STROKE||f===Zt.FILL_STROKE)if(o){k||(k=a.getTransform()),a.setTransform(...o);const{a:T,b:P,c:N,d:M}=k,L=Y.inverseTransform(o),F=Y.transform([T,P,N,M,0,0],L);Y.singularValueDecompose2dScale(F,Cs),a.lineWidth*=Math.max(Cs[0],Cs[1])/h,a.stroke(C(this,_g,rE).call(this,w,k,o))}else a.lineWidth/=h,a.stroke(w);a.restore()}else(f===Zt.FILL||f===Zt.FILL_STROKE)&&(a.fillText(t,s,r),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,a,u,h,s,r,()=>a.measureText(t))),(f===Zt.STROKE||f===Zt.FILL_STROKE)&&(this.dependencyTracker&&((_=this.dependencyTracker)==null||_.recordCharacterBBox(e,a,u,h,s,r,()=>a.measureText(t)).recordDependencies(e,Is.stroke)),a.strokeText(t,s,r));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ut(a),x:s,y:r,fontSize:h,path:w}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,a,u,h,s,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){s=!0;break}return me(this,"isFontSubpixelAAEnabled",s)}showText(e,t){var N,M,L,F;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Is.showText).resetBBox(e),this.current.textRenderingMode&Zt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(e,t),(N=this.dependencyTracker)==null||N.recordShowTextOperation(e);return}const i=s.fontSize;if(i===0){(M=this.dependencyTracker)==null||M.recordOperation(e);return}const o=this.ctx,a=s.fontSizeScale,c=s.charSpacing,u=s.wordSpacing,d=s.fontDirection,h=s.textHScale*d,f=t.length,m=r.vertical,y=m?1:-1,g=r.defaultVMetrics,w=i*s.fontMatrix[0],v=s.textRenderingMode===Zt.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),d>0?o.scale(h,-1):o.scale(h,1);let b,_;if(s.patternFill){o.save();const D=s.fillColor.getPattern(o,this,Or(o),ln.FILL,e);b=ut(o),o.restore(),o.fillStyle=D}if(s.patternStroke){o.save();const D=s.strokeColor.getPattern(o,this,Or(o),ln.STROKE,e);_=ut(o),o.restore(),o.strokeStyle=D}let E=s.lineWidth;const k=s.textMatrixScale;if(k===0||E===0){const D=s.textRenderingMode&Zt.FILL_STROKE_MASK;(D===Zt.STROKE||D===Zt.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=k;if(a!==1&&(o.scale(a,a),E/=a),o.lineWidth=E,r.isInvalidPDFjsFont){const D=[];let z=0;for(const R of t)D.push(R.unicode),z+=R.width;const I=D.join("");if(o.fillText(I,0,0),this.dependencyTracker!==null){const R=o.measureText(I);this.dependencyTracker.recordBBox(e,this.ctx,-R.actualBoundingBoxLeft,R.actualBoundingBoxRight,-R.actualBoundingBoxAscent,R.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=z*w*h,o.restore(),this.compose();return}let T=0,P;for(P=0;P<f;++P){const D=t[P];if(typeof D=="number"){T+=y*D*i/1e3;continue}let z=!1;const I=(D.isSpace?u:0)+c,R=D.fontChar,j=D.accent;let O,B,$=D.width;if(m){const q=D.vmetric||g,K=-(D.vmetric?q[1]:$*.5)*w,se=q[2]*w;$=q?-q[0]:$,O=K/a,B=(T+se)/a}else O=T/a,B=0;let V;if(r.remeasure&&$>0){V=o.measureText(R);const q=V.width*1e3/i*a;if($<q&&this.isFontSubpixelAAEnabled){const K=$/q;z=!0,o.save(),o.scale(K,1),O/=K}else $!==q&&(O+=($-q)/2e3*i/a)}if(this.contentVisible&&(D.isInFont||r.missingFile)){if(v&&!j)o.fillText(R,O,B),(L=this.dependencyTracker)==null||L.recordCharacterBBox(e,o,V?{bbox:null}:r,i/a,O,B,()=>V??o.measureText(R));else if(this.paintChar(e,R,O,B,b,_),j){const q=O+i*j.offset.x/a,K=B-i*j.offset.y/a;this.paintChar(e,j.fontChar,q,K,b,_)}}const W=m?$*w-I*d:$*w+I*d;T+=W,z&&o.restore()}m?s.y-=T:s.x+=T*h,o.restore(),this.compose(),(F=this.dependencyTracker)==null||F.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,r=this.current,i=r.font,o=r.fontSize,a=r.fontDirection,c=i.vertical?1:-1,u=r.charSpacing,d=r.wordSpacing,h=r.textHScale*a,f=r.fontMatrix||kA,m=t.length,y=r.textRenderingMode===Zt.INVISIBLE;let g,w,v,b;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(h,a);const _=this.dependencyTracker;for(this.dependencyTracker=_?new Qb(_,e):null,g=0;g<m;++g){if(w=t[g],typeof w=="number"){b=c*w*o/1e3,this.ctx.translate(b,0),r.x+=b*h;continue}const E=(w.isSpace?d:0)+u,k=i.charProcOperatorList[w.operatorListId];k?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...f),this.executeOperatorList(k),this.restore()):ue(`Type3 character "${w.operatorListId}" is not available.`);const T=[w.width,0];Y.applyTransform(T,f),v=T[0]*o+E,s.translate(v,0),r.x+=v*h}s.restore(),_&&(this.dependencyTracker=_)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,r,i,o,a){var u;const c=new Path2D;c.rect(r,i,o-r,a-i),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,r,o,i,a).recordClipBox(e,this.ctx,r,o,i,a),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const r=this.baseTransform||ut(this.ctx),i={createCanvasGraphics:(o,a)=>new dT(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Qb(this.dependencyTracker,a,!0):null)};s=new tE(t,this.ctx,i,r)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let r;return this.cachedPatterns.has(t)?r=this.cachedPatterns.get(t):(r=JG(this.getObject(e,t)),this.cachedPatterns.set(t,r)),s&&(r.matrix=s),r}shadingFill(e,t){var o;if(!this.contentVisible)return;const s=this.ctx;this.save(e);const r=this._getPattern(e,t);s.fillStyle=r.getPattern(s,this,Or(s),ln.SHADING,e);const i=Or(s);if(i){const{width:a,height:c}=s.canvas,u=ed.slice();Y.axialAlignedBoundingBox([0,0,a,c],i,u);const[d,h,f,m]=u;this.ctx.fillRect(d,h,f-d,m-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Is.transform).recordDependencies(e,Is.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){We("Should not call beginInlineImage")}beginImageData(){We("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){var r;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=ut(this.ctx),s)){Y.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,a,c]=s,u=new Path2D;u.rect(i,o,a-i,c-o),this.ctx.clip(u),(r=this.dependencyTracker)==null||r.recordClipBox(e,this.ctx,i,a,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var _;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||D1("TODO: Support non-isolated groups."),t.knockout&&ue("Knockout groups not supported.");const r=ut(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=ed.slice();Y.axialAlignedBoundingBox(t.bbox,ut(s),i);const o=[0,0,s.canvas.width,s.canvas.height];i=Y.intersect(i,o)||[0,0,0,0];const a=Math.floor(i[0]),c=Math.floor(i[1]),u=Math.max(Math.ceil(i[2])-a,1),d=Math.max(Math.ceil(i[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,d]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(h,u,d),m=f.context;m.translate(-a,-c),m.transform(...r);let y=new Path2D;const[g,w,v,b]=t.bbox;if(y.rect(g,w,v-g,b-w),t.matrix){const E=new Path2D;E.addPath(y,new DOMMatrix(t.matrix)),y=E}m.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:a,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(a,c),s.save()),ep(s,m),this.ctx=m,(_=this.dependencyTracker)==null||_.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){var i;if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,(i=this.dependencyTracker)==null||i.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ut(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const a=ed.slice();Y.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,a),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,t,s,r,i,o){if(C(this,wg,nE).call(this),hv(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const a=s[2]-s[0],c=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=a,s[3]=c,Y.singularValueDecompose2dScale(ut(this.ctx),Cs);const{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),h=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Cs[0],0,0,-Cs[1],0,c*Cs[1]),hv(this.ctx)}else{hv(this.ctx),this.endPath(e);const u=new Path2D;u.rect(s[0],s[1],a,c),this.ctx.clip(u)}}this.current=new PN(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),C(this,Sg,sE).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var a;if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const r=this.ctx,i=this._createMaskCanvas(e,t),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),(a=this.dependencyTracker)==null||a.resetBBox(e).recordBBox(e,this.ctx,i.offsetX,i.offsetX+o.width,i.offsetY,i.offsetY+o.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,r=0,i=0,o,a){var h,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=ut(c);c.transform(s,r,i,o,0,0);const d=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,d.offsetX-u[4],d.offsetY-u[5]),(h=this.dependencyTracker)==null||h.resetBBox(e);for(let y=0,g=a.length;y<g;y+=2){const w=Y.transform(u,[s,r,i,o,a[y],a[y+1]]);c.drawImage(d.canvas,w[4],w[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,w[4],w[4]+d.canvas.width,w[5],w[5]+d.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,a,c;if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,i=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,Is.transformAndFill);for(const u of t){const{data:d,width:h,height:f,transform:m}=u,y=this.cachedCanvases.getCanvas("maskCanvas",h,f),g=y.context;g.save();const w=this.getObject(e,d,u);RN(g,w),g.globalCompositeOperation="source-in",g.fillStyle=i?r.getPattern(g,this,Or(s),ln.FILL,e):r,g.fillRect(0,0,h,f),g.restore(),s.save(),s.transform(...m),s.scale(1,-1),dv(s,y.canvas,0,0,h,f,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,s,0,h,0,f),s.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){ue("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,r,i){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){ue("Dependent image isn't ready yet");return}const a=o.width,c=o.height,u=[];for(let d=0,h=i.length;d<h;d+=2)u.push({transform:[s,0,0,r,i[d],i[d+1]],x:0,y:0,w:a,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",s,r),o=i.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",i.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const s=t.width,r=t.height,i=this.ctx;this.save(e);const{filter:o}=i;o!=="none"&&o!==""&&(i.filter="none"),i.scale(1/s,-1/r);let a;if(t.bitmap)a=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)a=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",s,r).context;NN(h,t),a=this.applyTransferMapsToCanvas(h)}const c=this._scaleImage(a,Or(i));i.imageSmoothingEnabled=MN(ut(i),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,i,0,s,-r,0).recordDependencies(e,Is.imageXObject).recordOperation(e),dv(i,c.img,0,0,c.paintWidth,c.paintHeight,0,-r,s,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){var o,a,c;if(!this.contentVisible)return;const r=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const u=t.width,d=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,d).context;NN(f,t),i=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of s)r.save(),r.transform(...u.transform),r.scale(1,-1),dv(r,i,u.x,u.y,u.w,u.h,0,-1,1,1),(a=this.dependencyTracker)==null||a.recordBBox(e,r,0,1,-1,0),r.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Is.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){var r;(r=this.dependencyTracker)==null||r.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){var o,a;const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const i=this.ctx;this.pendingClip?(r||(this.pendingClip===jN?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(a=this.dependencyTracker)==null||a.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=ut(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:r,d:i}=this.ctx.getTransform();let o,a;if(s===0&&r===0){const c=Math.abs(t),u=Math.abs(i);if(c===u)if(e===0)o=a=1/c;else{const d=c*e;o=a=d<1?1/d:1}else if(e===0)o=1/c,a=1/u;else{const d=c*e,h=u*e;o=d<1?1/d:1,a=h<1?1/h:1}}else{const c=Math.abs(t*i-s*r),u=Math.hypot(t,s),d=Math.hypot(r,i);if(e===0)o=d/c,a=u/c;else{const h=e*c;o=d>h?d/h:1,a=u>h?u/h:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:r}}=this,[i,o]=this.getScaleForStroking();if(i===o){s.lineWidth=(r||1)*i,s.stroke(e);return}const a=s.getLineDash();t&&s.save(),s.scale(i,o),KS.a=1/i,KS.d=1/o;const c=new Path2D;if(c.addPath(e,KS),a.length>0){const u=Math.max(i,o);s.setLineDash(a.map(d=>d/u)),s.lineDashOffset/=u}s.lineWidth=r||1,s.stroke(c),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};wg=new WeakSet,nE=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Sg=new WeakSet,sE=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},_g=new WeakSet,rE=function(e,t,s){const r=new Path2D;return r.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),r};let dd=dT;for(const n in Af)dd.prototype[n]!==void 0&&(dd.prototype[Af[n]]=dd.prototype[n]);var Kd,Xd,Ag,Yd,Uv;const nd=class nd{constructor(e){x(this,Yd);x(this,Kd,void 0);x(this,Xd,void 0);x(this,Ag,void 0);S(this,Kd,e),S(this,Xd,new DataView(l(this,Kd))),S(this,Ag,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const u of nd.strings){const d=t.encode(e[u]);s[u]=d,r+=4+d.length}const i=new ArrayBuffer(r),o=new Uint8Array(i),a=new DataView(i);let c=0;for(const u of nd.strings){const d=s[u],h=d.length;a.setUint32(c,h),o.set(d,c+4),c+=4+h}return Ee(c===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}get fontFamily(){return C(this,Yd,Uv).call(this,0)}get fontWeight(){return C(this,Yd,Uv).call(this,1)}get italicAngle(){return C(this,Yd,Uv).call(this,2)}};Kd=new WeakMap,Xd=new WeakMap,Ag=new WeakMap,Yd=new WeakSet,Uv=function(e){Ee(e<nd.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=l(this,Xd).getUint32(t)+4;const s=l(this,Xd).getUint32(t);return l(this,Ag).decode(new Uint8Array(l(this,Kd),t+4,s))},U(nd,"strings",["fontFamily","fontWeight","italicAngle"]);let Jb=nd;var ca,Zr,hc,fc,_p;const sd=class sd{constructor(e){x(this,fc);x(this,ca,void 0);x(this,Zr,void 0);x(this,hc,void 0);S(this,ca,e),S(this,Zr,new DataView(l(this,ca))),S(this,hc,new TextDecoder)}static write(e){const t=new TextEncoder,s={};let r=0;for(const f of sd.strings){const m=t.encode(e[f]);s[f]=m,r+=4+m.length}r+=4;let i,o,a=1+r;e.style&&(i=t.encode(e.style.style),o=t.encode(e.style.weight),a+=4+i.length+4+o.length);const c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;d.setUint8(h++,e.guessFallback?1:0),d.setUint32(h,0),h+=4,r=0;for(const f of sd.strings){const m=s[f],y=m.length;r+=4+y,d.setUint32(h,y),u.set(m,h+4),h+=4+y}return d.setUint32(h-r-4,r),e.style&&(d.setUint32(h,i.length),u.set(i,h+4),h+=4+i.length,d.setUint32(h,o.length),u.set(o,h+4),h+=4+o.length),Ee(h<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(h)}get guessFallback(){return l(this,Zr).getUint8(0)!==0}get css(){return C(this,fc,_p).call(this,0)}get loadedName(){return C(this,fc,_p).call(this,1)}get baseFontName(){return C(this,fc,_p).call(this,2)}get src(){return C(this,fc,_p).call(this,3)}get style(){let e=1;e+=4+l(this,Zr).getUint32(e);const t=l(this,Zr).getUint32(e),s=l(this,hc).decode(new Uint8Array(l(this,ca),e+4,t));e+=4+t;const r=l(this,Zr).getUint32(e),i=l(this,hc).decode(new Uint8Array(l(this,ca),e+4,r));return{style:s,weight:i}}};ca=new WeakMap,Zr=new WeakMap,hc=new WeakMap,fc=new WeakSet,_p=function(e){Ee(e<sd.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=l(this,Zr).getUint32(t)+4;const s=l(this,Zr).getUint32(t);return l(this,hc).decode(new Uint8Array(l(this,ca),t+4,s))},U(sd,"strings",["css","loadedName","baseFontName","src"]);let Zb=sd;var Qd,Jd,Zd,eh,cs,ei,Eg,$e,us,ar,th,Hv,pc,Ap;const fe=class fe{constructor({data:e,extra:t}){x(this,us);x(this,th);x(this,pc);x(this,ei,void 0);x(this,Eg,void 0);x(this,$e,void 0);S(this,ei,e),S(this,Eg,new TextDecoder),S(this,$e,new DataView(l(this,ei))),t&&Object.assign(this,t)}get black(){return C(this,us,ar).call(this,0)}get bold(){return C(this,us,ar).call(this,1)}get disableFontFace(){return C(this,us,ar).call(this,2)}get fontExtraProperties(){return C(this,us,ar).call(this,3)}get isInvalidPDFjsFont(){return C(this,us,ar).call(this,4)}get isType3Font(){return C(this,us,ar).call(this,5)}get italic(){return C(this,us,ar).call(this,6)}get missingFile(){return C(this,us,ar).call(this,7)}get remeasure(){return C(this,us,ar).call(this,8)}get vertical(){return C(this,us,ar).call(this,9)}get ascent(){return C(this,th,Hv).call(this,0)}get defaultWidth(){return C(this,th,Hv).call(this,1)}get descent(){return C(this,th,Hv).call(this,2)}get bbox(){let e=l(fe,Jd);if(l(this,$e).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<4;r++)s.push(l(this,$e).getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=l(fe,Zd);if(l(this,$e).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<6;r++)s.push(l(this,$e).getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=l(fe,eh);if(l(this,$e).getUint8(e)===0)return;e+=1;const s=[];for(let r=0;r<3;r++)s.push(l(this,$e).getInt16(e,!0)),e+=2;return s}get fallbackName(){return C(this,pc,Ap).call(this,0)}get loadedName(){return C(this,pc,Ap).call(this,1)}get mimetype(){return C(this,pc,Ap).call(this,2)}get name(){return C(this,pc,Ap).call(this,3)}get data(){let e=l(fe,cs);const t=l(this,$e).getUint32(e);e+=4+t;const s=l(this,$e).getUint32(e);e+=4+s;const r=l(this,$e).getUint32(e);e+=4+r;const i=l(this,$e).getUint32(e);if(i!==0)return new Uint8Array(l(this,ei),e+4,i)}clearData(){let e=l(fe,cs);const t=l(this,$e).getUint32(e);e+=4+t;const s=l(this,$e).getUint32(e);e+=4+s;const r=l(this,$e).getUint32(e);e+=4+r;const i=l(this,$e).getUint32(e);new Uint8Array(l(this,ei),e+4,i).fill(0),l(this,$e).setUint32(e,0)}get cssFontInfo(){let e=l(fe,cs);const t=l(this,$e).getUint32(e);e+=4+t;const s=l(this,$e).getUint32(e);e+=4+s;const r=l(this,$e).getUint32(e);if(r===0)return null;const i=new Uint8Array(r);return i.set(new Uint8Array(l(this,ei),e+4,r)),new Jb(i.buffer)}get systemFontInfo(){let e=l(fe,cs);const t=l(this,$e).getUint32(e);e+=4+t;const s=l(this,$e).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(l(this,ei),e+4,s)),new Zb(r.buffer)}static write(e){const t=e.systemFontInfo?Zb.write(e.systemFontInfo):null,s=e.cssFontInfo?Jb.write(e.cssFontInfo):null,r=new TextEncoder,i={};let o=0;for(const g of fe.strings)i[g]=r.encode(e[g]),o+=4+i[g].length;const a=l(fe,cs)+4+o+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(a),u=new Uint8Array(c),d=new DataView(c);let h=0;const f=fe.bools.length;let m=0,y=0;for(let g=0;g<f;g++){const w=e[fe.bools[g]];m|=(w===void 0?0:w?2:1)<<y,y+=2,(y===8||g===f-1)&&(d.setUint8(h++,m),m=0,y=0)}Ee(h===l(fe,Qd),"FontInfo.write: Boolean properties offset mismatch");for(const g of fe.numbers)d.setFloat64(h,e[g]),h+=8;if(Ee(h===l(fe,Jd),"FontInfo.write: Number properties offset mismatch"),e.bbox){d.setUint8(h++,4);for(const g of e.bbox)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=2*4;if(Ee(h===l(fe,Zd),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){d.setUint8(h++,6);for(const g of e.fontMatrix)d.setFloat64(h,g,!0),h+=8}else d.setUint8(h++,0),h+=8*6;if(Ee(h===l(fe,eh),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){d.setUint8(h++,1);for(const g of e.defaultVMetrics)d.setInt16(h,g,!0),h+=2}else d.setUint8(h++,0),h+=3*2;Ee(h===l(fe,cs),"FontInfo.write: DefaultVMetrics properties offset mismatch"),d.setUint32(l(fe,cs),0),h+=4;for(const g of fe.strings){const w=i[g],v=w.length;d.setUint32(h,v),u.set(w,h+4),h+=4+v}if(d.setUint32(l(fe,cs),h-l(fe,cs)-4),!t)d.setUint32(h,0),h+=4;else{const g=t.byteLength;d.setUint32(h,g),Ee(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),h+4),h+=4+g}if(!s)d.setUint32(h,0),h+=4;else{const g=s.byteLength;d.setUint32(h,g),Ee(h+4+g<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(s),h+4),h+=4+g}return e.data===void 0?(d.setUint32(h,0),h+=4):(d.setUint32(h,e.data.length),u.set(e.data,h+4),h+=4+e.data.length),Ee(h<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(h)}};Qd=new WeakMap,Jd=new WeakMap,Zd=new WeakMap,eh=new WeakMap,cs=new WeakMap,ei=new WeakMap,Eg=new WeakMap,$e=new WeakMap,us=new WeakSet,ar=function(e){Ee(e<fe.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,r=l(this,$e).getUint8(t)>>s&3;return r===0?void 0:r===2},th=new WeakSet,Hv=function(e){return Ee(e<fe.numbers.length,"Invalid number index"),l(this,$e).getFloat64(l(fe,Qd)+e*8)},pc=new WeakSet,Ap=function(e){Ee(e<fe.strings.length,"Invalid string index");let t=l(fe,cs)+4;for(let i=0;i<e;i++)t+=l(this,$e).getUint32(t)+4;const s=l(this,$e).getUint32(t),r=new Uint8Array(s);return r.set(new Uint8Array(l(this,ei),t+4,s)),l(this,Eg).decode(r)},U(fe,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),U(fe,"numbers",["ascent","defaultWidth","descent"]),U(fe,"strings",["fallbackName","loadedName","mimetype","name"]),x(fe,Qd,Math.ceil(fe.bools.length*2/8)),x(fe,Jd,l(fe,Qd)+fe.numbers.length*8),x(fe,Zd,l(fe,Jd)+1+2*4),x(fe,eh,l(fe,Zd)+1+8*6),x(fe,cs,l(fe,eh)+1+2*3);let iE=fe;var Cg,kg;class Js{static get workerPort(){return l(this,Cg)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");S(this,Cg,e)}static get workerSrc(){return l(this,kg)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");S(this,kg,e)}}Cg=new WeakMap,kg=new WeakMap,x(Js,Cg,null),x(Js,kg,"");var nh,Tg;class oW{constructor({parsedData:e,rawData:t}){x(this,nh,void 0);x(this,Tg,void 0);S(this,nh,e),S(this,Tg,t)}getRaw(){return l(this,Tg)}get(e){return l(this,nh).get(e)??null}[Symbol.iterator](){return l(this,nh).entries()}}nh=new WeakMap,Tg=new WeakMap;const Du=Symbol("INTERNAL");var Pg,Ng,Rg,sh;class aW{constructor(e,{name:t,intent:s,usage:r,rbGroups:i}){x(this,Pg,!1);x(this,Ng,!1);x(this,Rg,!1);x(this,sh,!0);S(this,Pg,!!(e&As.DISPLAY)),S(this,Ng,!!(e&As.PRINT)),this.name=t,this.intent=s,this.usage=r,this.rbGroups=i}get visible(){if(l(this,Rg))return l(this,sh);if(!l(this,sh))return!1;const{print:e,view:t}=this.usage;return l(this,Pg)?(t==null?void 0:t.viewState)!=="OFF":l(this,Ng)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,s=!1){e!==Du&&We("Internal method `_setVisible` called."),S(this,Rg,s),S(this,sh,t)}}Pg=new WeakMap,Ng=new WeakMap,Rg=new WeakMap,sh=new WeakMap;var ua,Ve,rh,ih,Mg,oE;class lW{constructor(e,t=As.DISPLAY){x(this,Mg);x(this,ua,null);x(this,Ve,new Map);x(this,rh,null);x(this,ih,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,S(this,ih,e.order);for(const s of e.groups)l(this,Ve).set(s.id,new aW(t,s));if(e.baseState==="OFF")for(const s of l(this,Ve).values())s._setVisible(Du,!1);for(const s of e.on)l(this,Ve).get(s)._setVisible(Du,!0);for(const s of e.off)l(this,Ve).get(s)._setVisible(Du,!1);S(this,rh,this.getHash())}}isVisible(e){if(l(this,Ve).size===0)return!0;if(!e)return D1("Optional content group not defined."),!0;if(e.type==="OCG")return l(this,Ve).has(e.id)?l(this,Ve).get(e.id).visible:(ue(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return C(this,Mg,oE).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!l(this,Ve).has(t))return ue(`Optional content group not found: ${t}`),!0;if(l(this,Ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!l(this,Ve).has(t))return ue(`Optional content group not found: ${t}`),!0;if(!l(this,Ve).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!l(this,Ve).has(t))return ue(`Optional content group not found: ${t}`),!0;if(!l(this,Ve).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!l(this,Ve).has(t))return ue(`Optional content group not found: ${t}`),!0;if(l(this,Ve).get(t).visible)return!1}return!0}return ue(`Unknown optional content policy ${e.policy}.`),!0}return ue(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){var i;const r=l(this,Ve).get(e);if(!r){ue(`Optional content group not found: ${e}`);return}if(s&&t&&r.rbGroups.length)for(const o of r.rbGroups)for(const a of o)a!==e&&((i=l(this,Ve).get(a))==null||i._setVisible(Du,!1,!0));r._setVisible(Du,!!t,!0),S(this,ua,null)}setOCGState({state:e,preserveRB:t}){let s;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const i=l(this,Ve).get(r);if(i)switch(s){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!i.visible,t);break}}S(this,ua,null)}get hasInitialVisibility(){return l(this,rh)===null||this.getHash()===l(this,rh)}getOrder(){return l(this,Ve).size?l(this,ih)?l(this,ih).slice():[...l(this,Ve).keys()]:null}getGroup(e){return l(this,Ve).get(e)||null}getHash(){if(l(this,ua)!==null)return l(this,ua);const e=new zI;for(const[t,s]of l(this,Ve))e.update(`${t}:${s.visible}`);return S(this,ua,e.hexdigest())}[Symbol.iterator](){return l(this,Ve).entries()}}ua=new WeakMap,Ve=new WeakMap,rh=new WeakMap,ih=new WeakMap,Mg=new WeakSet,oE=function(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let r=1;r<t;r++){const i=e[r];let o;if(Array.isArray(i))o=C(this,Mg,oE).call(this,i);else if(l(this,Ve).has(i))o=l(this,Ve).get(i).visible;else return ue(`Optional content group not found: ${i}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class cW{constructor(e,{disableRange:t=!1,disableStream:s=!1}){Ee(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:i,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(i==null?void 0:i.length)>0){const c=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(i){return i._begin!==e?!1:(i._enqueue(s),!0)});Ee(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,s,r,i;e.total===void 0?(s=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||s.call(t,{loaded:e.loaded}):(i=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){Ee(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new uW(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new dW(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeReaders.slice(0))s.cancel(e);this._pdfDataRangeTransport.abort()}}class uW{constructor(e,t,s=!1,r=null){this._stream=e,this._done=s||!1,this._filename=O1(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dW{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function hW(n){let e=!0,t=s("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=c(d),d=u(d),i(d)}if(t=o(n),t){const d=u(t);return i(d)}if(t=s("filename","i").exec(n),t){t=t[1];let d=a(t);return d=u(d),i(d)}function s(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(d,{fatal:!0}),m=vy(h);h=f.decode(m),e=!1}catch{}}return h}function i(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function o(d){const h=[];let f;const m=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(d))!==null;){let[,g,w,v]=f;if(g=parseInt(g,10),g in h){if(g===0)break;continue}h[g]=[w,v]}const y=[];for(let g=0;g<h.length&&g in h;++g){let[w,v]=h[g];v=a(v),w&&(v=unescape(v),g===0&&(v=c(v))),y.push(v)}return y.join("")}function a(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let f=0;f<h.length;++f){const m=h[f].indexOf('"');m!==-1&&(h[f]=h[f].slice(0,m),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function c(d){const h=d.indexOf("'");if(h===-1)return d;const f=d.slice(0,h),y=d.slice(h+1).replace(/^[^']*'/,"");return r(f,y)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,w){return String.fromCharCode(parseInt(w,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function tO(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const s in e){const r=e[s];r!==void 0&&t.append(s,r)}return t}function F1(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function nO({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},i=parseInt(n.get("Content-Length"),10);return!Number.isInteger(i)||(r.suggestedLength=i,i<=2*t)||s||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function sO(n){const e=n.get("Content-Disposition");if(e){let t=hW(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(O1(t))return t}return null}function Sy(n,e){return new xm(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function rO(n){return n===200||n===206}function iO(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function oO(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ue(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class fW{constructor(e){U(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=tO(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ee(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new pW(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new mW(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class pW{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),r=t.url;fetch(r,iO(s,this._withCredentials,this._abortController)).then(i=>{if(e._responseOrigin=F1(i.url),!rO(i.status))throw Sy(i.status,r);this._reader=i.body.getReader(),this._headersCapability.resolve();const o=i.headers,{allowRangeRequests:a,suggestedLength:c}=nO({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=sO(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Co("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:oO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class mW{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range",`bytes=${t}-${s-1}`);const o=r.url;fetch(o,iO(i,this._withCredentials,this._abortController)).then(a=>{const c=F1(a.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!rO(a.status))throw Sy(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:oO(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const XS=200,YS=206;function gW(n){const e=n.response;return typeof e!="string"?e:vy(e).buffer}class yW{constructor({url:e,httpHeaders:t,withCredentials:s}){U(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=tO(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,o]of this.headers)t.setRequestHeader(i,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=YS):r.expectedStatus=XS,t.responseType="arraybuffer",Ee(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){var r;const s=this.pendingRequests[e];s&&((r=s.onProgress)==null||r.call(s,t))}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){s.onError(r.status);return}const i=r.status||XS;if(!(i===XS&&s.expectedStatus===YS)&&i!==s.expectedStatus){s.onError(r.status);return}const a=gW(r);if(i===YS){const c=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?s.onDone({begin:parseInt(u[1],10),chunk:a}):(ue('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class vW{constructor(e){this._source=e,this._manager=new yW(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return Ee(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bW(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new xW(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class bW{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=F1(t.responseURL);const s=t.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...u]=a.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:o}=nO({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=sO(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=Sy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class xW{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=F1((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=Sy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const wW=/^[a-z][a-z0-9\-+.]+:/i;function SW(n){if(wW.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class _W{constructor(e){this.source=e,this.url=SW(e.url),Ee(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return Ee(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new AW(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new EW(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const s of this._rangeRequestReaders.slice(0))s.cancel(e)}}class AW{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Sy(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Co("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class EW{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const tp=Symbol("INITIAL_DATA");var ds,jg,aE;class aO{constructor(){x(this,jg);x(this,ds,Object.create(null))}get(e,t=null){if(t){const r=C(this,jg,aE).call(this,e);return r.promise.then(()=>t(r.data)),null}const s=l(this,ds)[e];if(!s||s.data===tp)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=l(this,ds)[e];return!!t&&t.data!==tp}delete(e){const t=l(this,ds)[e];return!t||t.data===tp?!1:(delete l(this,ds)[e],!0)}resolve(e,t=null){const s=C(this,jg,aE).call(this,e);s.data=t,s.resolve()}clear(){var e;for(const t in l(this,ds)){const{data:s}=l(this,ds)[t];(e=s==null?void 0:s.bitmap)==null||e.close()}S(this,ds,Object.create(null))}*[Symbol.iterator](){for(const e in l(this,ds)){const{data:t}=l(this,ds)[e];t!==tp&&(yield[e,t])}}}ds=new WeakMap,jg=new WeakSet,aE=function(e){var t;return(t=l(this,ds))[e]||(t[e]={...Promise.withResolvers(),data:tp})};const CW=1e5,LN=30;var tR,da,qn,Lg,Dg,mc,Gi,Ig,Og,gc,oh,ah,ha,lh,Fg,ch,yc,Bg,$g,at,uh,vc,Vg,fa,dh,Wx,lO,qx,cO,zg,lE,hh,Gv,Ug,cE,Kx,uO,Xx,dO;let Am=(at=class{constructor({textContentSource:e,container:t,viewport:s}){x(this,Wx);x(this,qx);x(this,zg);x(this,da,Promise.withResolvers());x(this,qn,null);x(this,Lg,!1);x(this,Dg,!!((tR=globalThis.FontInspector)!=null&&tR.enabled));x(this,mc,null);x(this,Gi,null);x(this,Ig,0);x(this,Og,0);x(this,gc,null);x(this,oh,null);x(this,ah,0);x(this,ha,0);x(this,lh,Object.create(null));x(this,Fg,[]);x(this,ch,null);x(this,yc,[]);x(this,Bg,new WeakMap);x(this,$g,null);var c;if(e instanceof ReadableStream)S(this,ch,e);else if(typeof e=="object")S(this,ch,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,qn,S(this,oh,t)),S(this,ha,s.scale*Nr.pixelRatio),S(this,ah,s.rotation),S(this,Gi,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:i,pageX:o,pageY:a}=s.rawDims;S(this,$g,[1,0,0,-1,-o,a+i]),S(this,Og,r),S(this,Ig,i),C(c=at,Kx,uO).call(c),nl(t,s),l(this,da).promise.finally(()=>{l(at,dh).delete(this),S(this,Gi,null),S(this,lh,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Qt.platform;return me(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{l(this,gc).read().then(({value:t,done:s})=>{if(s){l(this,da).resolve();return}l(this,mc)??S(this,mc,t.lang),Object.assign(l(this,lh),t.styles),C(this,Wx,lO).call(this,t.items),e()},l(this,da).reject)};return S(this,gc,l(this,ch).getReader()),l(at,dh).add(this),e(),l(this,da).promise}update({viewport:e,onBefore:t=null}){var i;const s=e.scale*Nr.pixelRatio,r=e.rotation;if(r!==l(this,ah)&&(t==null||t(),S(this,ah,r),nl(l(this,oh),{rotation:r})),s!==l(this,ha)){t==null||t(),S(this,ha,s);const o={div:null,properties:null,ctx:C(i=at,hh,Gv).call(i,l(this,mc))};for(const a of l(this,yc))o.properties=l(this,Bg).get(a),o.div=a,C(this,zg,lE).call(this,o)}}cancel(){var t;const e=new Co("TextLayer task cancelled.");(t=l(this,gc))==null||t.cancel(e).catch(()=>{}),S(this,gc,null),l(this,da).reject(e)}get textDivs(){return l(this,yc)}get textContentItemsStr(){return l(this,Fg)}static cleanup(){if(!(l(this,dh).size>0)){l(this,uh).clear();for(const{canvas:e}of l(this,vc).values())e.remove();l(this,vc).clear()}}},da=new WeakMap,qn=new WeakMap,Lg=new WeakMap,Dg=new WeakMap,mc=new WeakMap,Gi=new WeakMap,Ig=new WeakMap,Og=new WeakMap,gc=new WeakMap,oh=new WeakMap,ah=new WeakMap,ha=new WeakMap,lh=new WeakMap,Fg=new WeakMap,ch=new WeakMap,yc=new WeakMap,Bg=new WeakMap,$g=new WeakMap,uh=new WeakMap,vc=new WeakMap,Vg=new WeakMap,fa=new WeakMap,dh=new WeakMap,Wx=new WeakSet,lO=function(e){var r,i;if(l(this,Lg))return;(i=l(this,Gi)).ctx??(i.ctx=C(r=at,hh,Gv).call(r,l(this,mc)));const t=l(this,yc),s=l(this,Fg);for(const o of e){if(t.length>CW){ue("Ignoring additional textDivs for performance reasons."),S(this,Lg,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,qn);S(this,qn,document.createElement("span")),l(this,qn).classList.add("markedContent"),o.id&&l(this,qn).setAttribute("id",`${o.id}`),a.append(l(this,qn))}else o.type==="endMarkedContent"&&S(this,qn,l(this,qn).parentNode);continue}s.push(o.str),C(this,qx,cO).call(this,o)}},qx=new WeakSet,cO=function(e){var g;const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};l(this,yc).push(t);const r=Y.transform(l(this,$g),e.transform);let i=Math.atan2(r[1],r[0]);const o=l(this,lh)[e.fontName];o.vertical&&(i+=Math.PI/2);let a=l(this,Dg)&&o.fontSubstitution||o.fontFamily;a=at.fontFamilyMap.get(a)||a;const c=Math.hypot(r[2],r[3]),u=c*C(g=at,Xx,dO).call(g,a,o,l(this,mc));let d,h;i===0?(d=r[4],h=r[5]-u):(d=r[4]+u*Math.sin(i),h=r[5]-u*Math.cos(i));const f="calc(var(--total-scale-factor) *",m=t.style;l(this,qn)===l(this,oh)?(m.left=`${(100*d/l(this,Og)).toFixed(2)}%`,m.top=`${(100*h/l(this,Ig)).toFixed(2)}%`):(m.left=`${f}${d.toFixed(2)}px)`,m.top=`${f}${h.toFixed(2)}px)`),m.fontSize=`${f}${(l(at,fa)*c).toFixed(2)}px)`,m.fontFamily=a,s.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,l(this,Dg)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),i!==0&&(s.angle=i*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);w!==v&&Math.max(w,v)/Math.min(w,v)>1.5&&(y=!0)}if(y&&(s.canvasWidth=o.vertical?e.height:e.width),l(this,Bg).set(t,s),l(this,Gi).div=t,l(this,Gi).properties=s,C(this,zg,lE).call(this,l(this,Gi)),s.hasText&&l(this,qn).append(t),s.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),l(this,qn).append(w)}},zg=new WeakSet,lE=function(e){var a;const{div:t,properties:s,ctx:r}=e,{style:i}=t;let o="";if(l(at,fa)>1&&(o=`scale(${1/l(at,fa)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=i,{canvasWidth:u,fontSize:d}=s;C(a=at,Ug,cE).call(a,r,d*l(this,ha),c);const{width:h}=r.measureText(t.textContent);h>0&&(o=`scaleX(${u*l(this,ha)/h}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(i.transform=o)},hh=new WeakSet,Gv=function(e=null){let t=l(this,vc).get(e||(e=""));if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,vc).set(e,t),l(this,Vg).set(t,{size:0,family:""})}return t},Ug=new WeakSet,cE=function(e,t,s){const r=l(this,Vg).get(e);t===r.size&&s===r.family||(e.font=`${t}px ${s}`,r.size=t,r.family=s)},Kx=new WeakSet,uO=function(){if(l(this,fa)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),S(this,fa,e.getBoundingClientRect().height),e.remove()},Xx=new WeakSet,dO=function(e,t,s){const r=l(this,uh).get(e);if(r)return r;const i=C(this,hh,Gv).call(this,s);i.canvas.width=i.canvas.height=LN,C(this,Ug,cE).call(this,i,LN,e);const o=i.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let u=.8;return a?u=a/(a+c):(Qt.platform.isFirefox&&ue("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),l(this,uh).set(e,u),u},x(at,hh),x(at,Ug),x(at,Kx),x(at,Xx),x(at,uh,new Map),x(at,vc,new Map),x(at,Vg,new WeakMap),x(at,fa,null),x(at,dh,new Set),at);const kW=100;function Kk(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new uE,{docId:t}=e,s=n.url?DG(n.url):null,r=n.data?IG(n.data):null,i=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof Xk?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let d=n.worker instanceof Ef?n.worker:null;const h=n.verbosity,f=typeof n.docBaseUrl=="string"&&!xy(n.docBaseUrl)?n.docBaseUrl:null,m=av(n.cMapUrl),y=n.cMapPacked!==!1,g=n.CMapReaderFactory||(jn?UG:xN),w=av(n.iccUrl),v=av(n.standardFontDataUrl),b=n.StandardFontDataFactory||(jn?HG:wN),_=av(n.wasmUrl),E=n.WasmFactory||(jn?GG:SN),k=n.stopAtErrors!==!0,T=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,P=n.isEvalSupported!==!1,N=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!jn,M=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!jn&&(Qt.platform.isFirefox||!globalThis.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,F=typeof n.disableFontFace=="boolean"?n.disableFontFace:jn,D=n.fontExtraProperties===!0,z=n.enableXfa===!0,I=n.ownerDocument||globalThis.document,R=n.disableRange===!0,j=n.disableStream===!0,O=n.disableAutoFetch===!0,B=n.pdfBug===!0,$=n.CanvasFactory||(jn?zG:BG),V=n.FilterFactory||(jn?VG:$G),W=n.enableHWA===!0,q=n.useWasm!==!1,K=c?c.length:n.length??NaN,se=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!jn&&!F,pe=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===xN&&b===wN&&E===SN&&m&&v&&_&&hp(m,document.baseURI)&&hp(v,document.baseURI)&&hp(_,document.baseURI)),ye=null;gG(h);const ge={canvasFactory:new $({ownerDocument:I,enableHWA:W}),filterFactory:new V({docId:t,ownerDocument:I}),cMapReaderFactory:pe?null:new g({baseUrl:m,isCompressed:y}),standardFontDataFactory:pe?null:new b({baseUrl:v}),wasmFactory:pe?null:new E({baseUrl:_})};d||(d=Ef.create({verbosity:h,port:Js.workerPort}),e._worker=d);const Jt={docId:t,apiVersion:"5.4.296",data:r,password:a,disableAutoFetch:O,rangeChunkSize:u,length:K,docBaseUrl:f,enableXfa:z,evaluatorOptions:{maxImageSize:T,disableFontFace:F,ignoreErrors:k,isEvalSupported:P,isOffscreenCanvasSupported:N,isImageDecoderSupported:M,canvasMaxAreaInBytes:L,fontExtraProperties:D,useSystemFonts:se,useWasm:q,useWorkerFetch:pe,cMapUrl:m,iccUrl:w,standardFontDataUrl:v,wasmUrl:_}},yt={ownerDocument:I,pdfBug:B,styleElement:ye,loadingParams:{disableAutoFetch:O,enableXfa:z}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const ve=d.messageHandler.sendWithPromise("GetDocRequest",Jt,r?[r.buffer]:null);let X;if(c)X=new cW(c,{disableRange:R,disableStream:j});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const ie=hp(s)?fW:jn?_W:vW;X=new ie({url:s,length:K,httpHeaders:i,withCredentials:o,rangeChunkSize:u,disableRange:R,disableStream:j})}return ve.then(ie=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const te=new vp(t,ie,d.port),ae=new NW(te,e,X,yt,ge,W);e._transport=ae,te.send("Ready",null)})}).catch(e._capability.reject),e}var Yx;const Qx=class Qx{constructor(){U(this,"_capability",Promise.withResolvers());U(this,"_transport",null);U(this,"_worker",null);U(this,"docId",`d${jt(Qx,Yx)._++}`);U(this,"destroyed",!1);U(this,"onPassword",null);U(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,s,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(i){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,i}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Yx=new WeakMap,x(Qx,Yx,0);let uE=Qx;var bc,Hg,Gg,Wg,qg,nR;let Xk=(nR=class{constructor(e,t,s=!1,r=null){x(this,bc,Promise.withResolvers());x(this,Hg,[]);x(this,Gg,[]);x(this,Wg,[]);x(this,qg,[]);this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(e){l(this,qg).push(e)}addProgressListener(e){l(this,Wg).push(e)}addProgressiveReadListener(e){l(this,Gg).push(e)}addProgressiveDoneListener(e){l(this,Hg).push(e)}onDataRange(e,t){for(const s of l(this,qg))s(e,t)}onDataProgress(e,t){l(this,bc).promise.then(()=>{for(const s of l(this,Wg))s(e,t)})}onDataProgressiveRead(e){l(this,bc).promise.then(()=>{for(const t of l(this,Gg))t(e)})}onDataProgressiveDone(){l(this,bc).promise.then(()=>{for(const e of l(this,Hg))e()})}transportReady(){l(this,bc).resolve()}requestDataRange(e,t){We("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},bc=new WeakMap,Hg=new WeakMap,Gg=new WeakMap,Wg=new WeakMap,qg=new WeakMap,nR);class TW{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Wi,xc,Ep;class PW{constructor(e,t,s,r=!1){x(this,xc);x(this,Wi,!1);this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=r?new fN:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new aO,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:i=!1}={}){return new by({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:r,dontFlip:i})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return me(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:r="display",annotationMode:i=fi.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:d=null,printAnnotationStorage:h=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:y=null}){var M,L,F;(M=this._stats)==null||M.time("Overall");const g=this._transport.getRenderingIntent(r,i,h,f),{renderingIntent:w,cacheKey:v}=g;S(this,Wi,!1),c||(c=this._transport.getOptionalContentConfig(w));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const _=!!(w&As.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(g));const E=!!(this._pdfBug&&((F=globalThis.StepperManager)!=null&&F.enabled)),k=!this.recordedBBoxes&&(m||E),T=D=>{var z,I;if(b.renderTasks.delete(P),k){const R=(z=P.gfx)==null?void 0:z.dependencyTracker.take();R&&(P.stepper&&P.stepper.setOperatorBBoxes(R,P.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=R))}_&&S(this,Wi,!0),C(this,xc,Ep).call(this),D?(P.capability.reject(D),this._abortOperatorList({intentState:b,reason:D instanceof Error?D:new Error(D)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new dE({callback:T,params:{canvas:t,canvasContext:e,dependencyTracker:k?new qG(t,b.operatorList.length,E):null,viewport:s,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:d,enableHWA:this._transport.enableHWA,operationsFilter:y});(b.renderTasks||(b.renderTasks=new Set)).add(P);const N=P.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([D,z])=>{var I;if(this.destroyed){T();return}if((I=this._stats)==null||I.time("Rendering"),!(z.renderingIntent&w))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:D,optionalContentConfig:z}),P.operatorListChanged()}).catch(T),N}getOperatorList({intent:e="display",annotationMode:t=fi.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){var u;function i(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,s,r,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=i,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>wm.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,r){function i(){o.read().then(function({value:c,done:u}){if(u){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),i()},r)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};i()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),S(this,Wi,!1),Promise.all(e)}cleanup(e=!1){S(this,Wi,!0);const t=C(this,xc,Ep).call(this);return e&&t&&this._stats&&(this._stats=new fN),t}_startRenderPage(e,t){var r,i;const s=this._intentStates.get(t);s&&((r=this._stats)==null||r.timeEnd("Page Request"),(i=s.displayReadyCapability)==null||i.resolve(e))}_renderPageChunk(e,t){for(let s=0,r=e.length;s<r;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&C(this,xc,Ep).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:r}){const{map:i,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:i,modifiedIds:r},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const d=()=>{c.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();C(this,xc,Ep).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof I1){let r=kW;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Co(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,i]of this._intentStates)if(i===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Wi=new WeakMap,xc=new WeakSet,Ep=function(){if(!l(this,Wi)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,Wi,!1),!0};var pa,gr,qi,wc,Jx,Sc,_c,fh,Wv,Zx,hO,ew,fO,Ac,Cp,ph,qv;const rt=class rt{constructor({name:e=null,port:t=null,verbosity:s=yG()}={}){x(this,fh);x(this,Zx);x(this,ew);x(this,Ac);x(this,pa,Promise.withResolvers());x(this,gr,null);x(this,qi,null);x(this,wc,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(l(rt,_c).has(t))throw new Error("Cannot use more than one PDFWorker per port.");l(rt,_c).set(t,this),C(this,Zx,hO).call(this,t)}else C(this,ew,fO).call(this)}get promise(){return l(this,pa).promise}get port(){return l(this,qi)}get messageHandler(){return l(this,gr)}destroy(){var e,t;this.destroyed=!0,(e=l(this,wc))==null||e.terminate(),S(this,wc,null),l(rt,_c).delete(l(this,qi)),S(this,qi,null),(t=l(this,gr))==null||t.destroy(),S(this,gr,null)}static create(e){const t=l(this,_c).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new rt(e)}static get workerSrc(){if(Js.workerSrc)return Js.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return me(this,"_setupFakeWorkerGlobal",(async()=>l(this,ph,qv)?l(this,ph,qv):(await Po(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};pa=new WeakMap,gr=new WeakMap,qi=new WeakMap,wc=new WeakMap,Jx=new WeakMap,Sc=new WeakMap,_c=new WeakMap,fh=new WeakSet,Wv=function(){l(this,pa).resolve(),l(this,gr).send("configure",{verbosity:this.verbosity})},Zx=new WeakSet,hO=function(e){S(this,qi,e),S(this,gr,new vp("main","worker",e)),l(this,gr).on("ready",()=>{}),C(this,fh,Wv).call(this)},ew=new WeakSet,fO=function(){if(l(rt,Sc)||l(rt,ph,qv)){C(this,Ac,Cp).call(this);return}let{workerSrc:e}=rt;try{rt._isSameOrigin(window.location,e)||(e=rt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new vp("main","worker",t),r=()=>{i.abort(),s.destroy(),t.terminate(),this.destroyed?l(this,pa).reject(new Error("Worker was destroyed")):C(this,Ac,Cp).call(this)},i=new AbortController;t.addEventListener("error",()=>{l(this,wc)||r()},{signal:i.signal}),s.on("test",a=>{if(i.abort(),this.destroyed||!a){r();return}S(this,gr,s),S(this,qi,t),S(this,wc,t),C(this,fh,Wv).call(this)}),s.on("ready",a=>{if(i.abort(),this.destroyed){r();return}try{o()}catch{C(this,Ac,Cp).call(this)}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{D1("The worker has been disabled.")}C(this,Ac,Cp).call(this)},Ac=new WeakSet,Cp=function(){l(rt,Sc)||(ue("Setting up fake worker."),S(rt,Sc,!0)),rt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){l(this,pa).reject(new Error("Worker was destroyed"));return}const t=new FG;S(this,qi,t);const s=`fake${jt(rt,Jx)._++}`,r=new vp(s+"_worker",s,t);e.setup(r,t),S(this,gr,new vp(s,s+"_worker",t)),C(this,fh,Wv).call(this)}).catch(e=>{l(this,pa).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},ph=new WeakSet,qv=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},x(rt,ph),x(rt,Jx,0),x(rt,Sc,!1),x(rt,_c,new WeakMap),jn&&(S(rt,Sc,!0),Js.workerSrc||(Js.workerSrc="./pdf.worker.mjs")),rt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const r=new URL(t,s);return s.origin===r.origin},rt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},rt.fromPort=e=>{if(CG("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return rt.create(e)};let Ef=rt;var Ki,ti,mh,gh,Xi,Ec,kp;class NW{constructor(e,t,s,r,i,o){x(this,Ec);x(this,Ki,new Map);x(this,ti,new Map);x(this,mh,new Map);x(this,gh,new Map);x(this,Xi,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new aO,this.fontLoader=new jG({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return me(this,"annotationStorage",new Gk)}getRenderingIntent(e,t=fi.ENABLE,s=null,r=!1,i=!1){let o=As.DISPLAY,a=KA;switch(e){case"any":o=As.ANY;break;case"display":break;case"print":o=As.PRINT;break;default:ue(`getRenderingIntent - invalid intent: ${e}`)}const c=o&As.PRINT&&s instanceof HI?s:this.annotationStorage;switch(t){case fi.DISABLE:o+=As.ANNOTATIONS_DISABLE;break;case fi.ENABLE:break;case fi.ENABLE_FORMS:o+=As.ANNOTATIONS_FORMS;break;case fi.ENABLE_STORAGE:o+=As.ANNOTATIONS_STORAGE,a=c.serializable;break;default:ue(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(o+=As.IS_EDITING),i&&(o+=As.OPLIST);const{ids:u,hash:d}=c.modifiedIds,h=[o,a.hash,d];return{renderingIntent:o,cacheKey:h.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,Xi))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of l(this,ti).values())e.push(r._destroy());l(this,ti).clear(),l(this,mh).clear(),l(this,gh).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,i;this.commonObjs.clear(),this.fontLoader.clear(),l(this,Ki).clear(),this.filterFactory.destroy(),Am.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Co("Worker was terminated.")),(i=this.messageHandler)==null||i.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,r)=>{Ee(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=i=>{this._lastProgress={loaded:i.loaded,total:i.total}},r.onPull=()=>{this._fullReader.read().then(function({value:i,done:o}){if(o){r.close();return}Ee(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(i),1,[i])}).catch(i=>{r.error(i)})},r.onCancel=i=>{this._fullReader.cancel(i),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:i,contentLength:o}=this._fullReader;return(!r||!i)&&(this._lastProgress&&((a=t.onProgress)==null||a.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:r,isRangeSupported:i,contentLength:o}}),e.on("GetRangeReader",(s,r)=>{Ee(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(s.begin,s.end);if(!i){r.close();return}r.onPull=()=>{i.read().then(function({value:o,done:a}){if(a){r.close();return}Ee(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{i.cancel(o),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new TW(s,this))}),e.on("DocException",s=>{t._capability.reject(Vn(s))}),e.on("PasswordRequest",s=>{S(this,Xi,Promise.withResolvers());try{if(!t.onPassword)throw Vn(s);const r=i=>{i instanceof Error?l(this,Xi).reject(i):l(this,Xi).resolve({password:i})};t.onPassword(r,s.code)}catch(r){l(this,Xi).reject(r)}return l(this,Xi).promise}),e.on("DataLoaded",s=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,ti).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,r,i])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in i){const h=i.error;ue(`Error during font loading: ${h}`),this.commonObjs.resolve(s,h);break}const a=new iE(i),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(h,f)=>globalThis.FontInspector.fontAdded(h,f):null,u=new LG(a,c,i.extra,i.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(s,u)});break;case"CopyLocalImage":const{imageRef:d}=i;Ee(d,"The imageRef must be defined.");for(const h of l(this,ti).values())for(const[,f]of h.objs)if((f==null?void 0:f.ref)===d)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,i);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([s,r,i,o])=>{var c;if(this.destroyed)return;const a=l(this,ti).get(r);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(i){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${i}`)}}}),e.on("DocProgress",s=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&ue("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((s=this._fullReader)==null?void 0:s.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=l(this,mh).get(t);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(i=>{if(this.destroyed)throw new Error("Transport destroyed");i.refStr&&l(this,gh).set(i.refStr,e);const o=new PW(t,i,this,this._params.pdfBug);return l(this,ti).set(t,o),o});return l(this,mh).set(t,r),r}getPageIndex(e){return XA(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return C(this,Ec,kp).call(this,"GetFieldObjects")}hasJSActions(){return C(this,Ec,kp).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return C(this,Ec,kp).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return C(this,Ec,kp).call(this,"GetOptionalContentConfig").then(t=>new lW(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=l(this,Ki).get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(r=>{var i,o;return{info:r[0],metadata:r[1]?new oW(r[1]):null,contentDispositionFilename:((i=this._fullReader)==null?void 0:i.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,Ki).set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of l(this,ti).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),l(this,Ki).clear(),this.filterFactory.destroy(!0),Am.cleanup()}}cachedPageNumber(e){if(!XA(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return l(this,gh).get(t)??null}}Ki=new WeakMap,ti=new WeakMap,mh=new WeakMap,gh=new WeakMap,Xi=new WeakMap,Ec=new WeakSet,kp=function(e,t=null){const s=l(this,Ki).get(e);if(s)return s;const r=this.messageHandler.sendWithPromise(e,t);return l(this,Ki).set(e,r),r};var ma;class RW{constructor(e){x(this,ma,null);U(this,"onContinue",null);U(this,"onError",null);S(this,ma,e)}get promise(){return l(this,ma).capability.promise}cancel(e=0){l(this,ma).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=l(this,ma).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=l(this,ma);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ma=new WeakMap;var ga,Cc;const Al=class Al{constructor({callback:e,params:t,objs:s,commonObjs:r,annotationCanvasMap:i,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:y=null}){x(this,ga,null);this.callback=e,this.params=t,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new RW(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(l(Al,Cc).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(Al,Cc).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:i,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new dd(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:i}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var s,r,i;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,ga)&&(window.cancelAnimationFrame(l(this,ga)),S(this,ga,null)),l(Al,Cc).delete(this._canvas),e||(e=new I1(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(i=(r=this.task).onError)==null||i.call(r,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,ga,window.requestAnimationFrame(()=>{S(this,ga,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(Al,Cc).delete(this._canvas),this.callback())))}};ga=new WeakMap,Cc=new WeakMap,x(Al,Cc,new WeakSet);let dE=Al;const Yk="5.4.296",pO="f56dc8601";var hs,kc,yh,Ot,Kg,vh,Yi,Xg,ya,yr,Yg,Qg,hE,Jg,fE,Zg,pE,Qi,vl,tw,mO,ni,Lo;const zn=class zn{constructor({editor:e=null,uiManager:t=null}){x(this,Qg);x(this,Jg);x(this,Zg);x(this,Qi);x(this,tw);x(this,ni);x(this,hs,null);x(this,kc,null);x(this,yh,void 0);x(this,Ot,null);x(this,Kg,!1);x(this,vh,!1);x(this,Yi,null);x(this,Xg,void 0);x(this,ya,null);x(this,yr,null);var s,r;e?(S(this,vh,!1),S(this,Yi,e)):S(this,vh,!0),S(this,yr,(e==null?void 0:e._uiManager)||t),S(this,Xg,l(this,yr)._eventBus),S(this,yh,((s=e==null?void 0:e.color)==null?void 0:s.toUpperCase())||((r=l(this,yr))==null?void 0:r.highlightColors.values().next().value)||"#FFFF98"),l(zn,Yg)||S(zn,Yg,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return me(this,"_keyboardManager",new wy([[["Escape","mac+Escape"],zn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zn.prototype._moveToPrevious],[["Home","mac+Home"],zn.prototype._moveToBeginning],[["End","mac+End"],zn.prototype._moveToEnd]]))}renderButton(){const e=S(this,hs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",l(this,Yi)&&(e.ariaControls=`${l(this,Yi).id}_colorpicker_dropdown`);const t=l(this,yr)._signal;e.addEventListener("click",C(this,Qi,vl).bind(this),{signal:t}),e.addEventListener("keydown",C(this,Zg,pE).bind(this),{signal:t});const s=S(this,kc,document.createElement("span"));return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=l(this,yh),e.append(s),e}renderMainDropdown(){const e=S(this,Ot,C(this,Qg,hE).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===l(this,hs)){C(this,Qi,vl).call(this,e);return}const t=e.target.getAttribute("data-color");t&&C(this,Jg,fE).call(this,t,e)}_moveToNext(e){var t,s;if(!l(this,ni,Lo)){C(this,Qi,vl).call(this,e);return}if(e.target===l(this,hs)){(t=l(this,Ot).firstChild)==null||t.focus();return}(s=e.target.nextSibling)==null||s.focus()}_moveToPrevious(e){var t,s;if(e.target===((t=l(this,Ot))==null?void 0:t.firstChild)||e.target===l(this,hs)){l(this,ni,Lo)&&this._hideDropdownFromKeyboard();return}l(this,ni,Lo)||C(this,Qi,vl).call(this,e),(s=e.target.previousSibling)==null||s.focus()}_moveToBeginning(e){var t;if(!l(this,ni,Lo)){C(this,Qi,vl).call(this,e);return}(t=l(this,Ot).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!l(this,ni,Lo)){C(this,Qi,vl).call(this,e);return}(t=l(this,Ot).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=l(this,Ot))==null||e.classList.add("hidden"),l(this,hs).ariaExpanded="false",(t=l(this,ya))==null||t.abort(),S(this,ya,null)}_hideDropdownFromKeyboard(){var e;if(!l(this,vh)){if(!l(this,ni,Lo)){(e=l(this,Yi))==null||e.unselect();return}this.hideDropdown(),l(this,hs).focus({preventScroll:!0,focusVisible:l(this,Kg)})}}updateColor(e){if(l(this,kc)&&(l(this,kc).style.backgroundColor=e),!l(this,Ot))return;const t=l(this,yr).highlightColors.values();for(const s of l(this,Ot).children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=l(this,hs))==null||e.remove(),S(this,hs,null),S(this,kc,null),(t=l(this,Ot))==null||t.remove(),S(this,Ot,null)}};hs=new WeakMap,kc=new WeakMap,yh=new WeakMap,Ot=new WeakMap,Kg=new WeakMap,vh=new WeakMap,Yi=new WeakMap,Xg=new WeakMap,ya=new WeakMap,yr=new WeakMap,Yg=new WeakMap,Qg=new WeakSet,hE=function(){const e=document.createElement("div"),t=l(this,yr)._signal;e.addEventListener("contextmenu",Rs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),l(this,Yi)&&(e.id=`${l(this,Yi).id}_colorpicker_dropdown`);for(const[s,r]of l(this,yr).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=s,i.setAttribute("data-l10n-id",l(zn,Yg)[s]);const o=document.createElement("span");i.append(o),o.className="swatch",o.style.backgroundColor=r,i.ariaSelected=r===l(this,yh),i.addEventListener("click",C(this,Jg,fE).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",C(this,Zg,pE).bind(this),{signal:t}),e},Jg=new WeakSet,fE=function(e,t){t.stopPropagation(),l(this,Xg).dispatch("switchannotationeditorparams",{source:this,type:_e.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},Zg=new WeakSet,pE=function(e){zn._keyboardManager.exec(this,e)},Qi=new WeakSet,vl=function(e){if(l(this,ni,Lo)){this.hideDropdown();return}if(S(this,Kg,e.detail===0),l(this,ya)||(S(this,ya,new AbortController),window.addEventListener("pointerdown",C(this,tw,mO).bind(this),{signal:l(this,yr).combinedSignal(l(this,ya))})),l(this,hs).ariaExpanded="true",l(this,Ot)){l(this,Ot).classList.remove("hidden");return}const t=S(this,Ot,C(this,Qg,hE).call(this));l(this,hs).append(t)},tw=new WeakSet,mO=function(e){var t;(t=l(this,Ot))!=null&&t.contains(e.target)||this.hideDropdown()},ni=new WeakSet,Lo=function(){return l(this,Ot)&&!l(this,Ot).classList.contains("hidden")},x(zn,Yg,null);let Em=zn;var si,e0,bh,t0;const El=class El{constructor(e){x(this,si,null);x(this,e0,null);x(this,bh,null);S(this,e0,e),S(this,bh,e._uiManager),l(El,t0)||S(El,t0,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(l(this,si))return l(this,si);const{editorType:e,colorType:t,colorValue:s}=l(this,e0),r=S(this,si,document.createElement("input"));return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",l(El,t0)[e]),r.addEventListener("input",()=>{l(this,bh).updateParams(t,r.value)},{signal:l(this,bh)._signal}),r}update(e){l(this,si)&&(l(this,si).value=e)}destroy(){var e;(e=l(this,si))==null||e.remove(),S(this,si,null)}hideDropdown(){}};si=new WeakMap,e0=new WeakMap,bh=new WeakMap,t0=new WeakMap,x(El,t0,null);let ex=El;function DN(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function np(n){return Math.max(0,Math.min(255,255*n))}class IN{static CMYK_G([e,t,s,r]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=np(e),[e,e,e]}static G_HTML([e]){const t=DN(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(np)}static RGB_HTML(e){return`#${e.map(DN).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,s+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,s,r]){return[np(1-Math.min(1,e+r)),np(1-Math.min(1,s+r)),np(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const r=1-e,i=1-t,o=1-s,a=Math.min(r,i,o);return["CMYK",r,i,o,a]}}class MW{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){We("Abstract method `_createSVG` called.")}}class Cm extends MW{_createSVG(e){return document.createElementNS(xi,e)}}const jW=9,pu=new WeakSet,LW=new Date().getTimezoneOffset()*60*1e3;class ON{static create(e){switch(e.data.annotationType){case At.LINK:return new Qk(e);case At.TEXT:return new IW(e);case At.WIDGET:switch(e.data.fieldType){case"Tx":return new OW(e);case"Btn":return e.data.radioButton?new vO(e):e.data.checkBox?new BW(e):new $W(e);case"Ch":return new VW(e);case"Sig":return new FW(e)}return new _u(e);case At.POPUP:return new gE(e);case At.FREETEXT:return new _O(e);case At.LINE:return new UW(e);case At.SQUARE:return new HW(e);case At.CIRCLE:return new GW(e);case At.POLYLINE:return new AO(e);case At.CARET:return new qW(e);case At.INK:return new Jk(e);case At.POLYGON:return new WW(e);case At.HIGHLIGHT:return new EO(e);case At.UNDERLINE:return new KW(e);case At.SQUIGGLY:return new XW(e);case At.STRIKEOUT:return new YW(e);case At.STAMP:return new CO(e);case At.FILEATTACHMENT:return new QW(e);default:return new mt(e)}}}var Tc,xh,Ws,n0,mE;const hT=class hT{constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){x(this,n0);x(this,Tc,null);x(this,xh,!1);x(this,Ws,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return hT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var s;const{data:e}=this,t=(s=this.annotationStorage)==null?void 0:s.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var a;const e=(a=this.annotationStorage)==null?void 0:a.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:r}=this.data;let i=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],i=t[c+2]):t[c+1]===o&&(i=Math.max(i,t[c+2]));return[i,o]}if((s==null?void 0:s.length)>=1){for(const c of s)for(let u=0,d=c.length;u<d;u+=2)c[u+1]>o?(o=c[u+1],i=c[u]):c[u+1]===o&&(i=Math.max(i,c[u]));if(i!==1/0)return[i,o]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:i,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/s,e[1]=100*(e[1]-o)/r,e}get commentText(){var t,s,r;const{data:e}=this;return((s=(t=this.annotationStorage.getRawValue(`${bm}${e.id}`))==null?void 0:t.popup)==null?void 0:s.contents)||((r=e.contentsObj)==null?void 0:r.str)||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${bm}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=l(this,Ws))==null?void 0:e.popup)||this.popup)==null||t.remove(),S(this,Ws,this.popup=null)}updateEdited(e){var i;if(!this.container)return;e.rect&&(l(this,Tc)||S(this,Tc,{rect:this.data.rect.slice(0)}));const{rect:t,popup:s}=e;t&&C(this,n0,mE).call(this,t);let r=((i=l(this,Ws))==null?void 0:i.popup)||this.popup;!r&&(s!=null&&s.text)&&(this._createPopup(s),r=l(this,Ws).popup),r&&(r.updateEdited(e),s!=null&&s.deleted&&(r.remove(),S(this,Ws,null),this.popup=null))}resetEdited(){var e;l(this,Tc)&&(C(this,n0,mE).call(this,l(this,Tc).rect),(e=l(this,Ws))==null||e.popup.resetEdited(),S(this,Tc,null))}_createContainer(e){const{data:t,parent:{page:s,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),!(this instanceof _u)&&!(this instanceof Qk)&&(i.tabIndex=0);const{style:o}=i;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof gE){const{rotation:g}=t;return!t.hasOwnCanvas&&g!==0&&this.setRotation(g,i),i}const{width:a,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const g=t.borderStyle.horizontalCornerRadius,w=t.borderStyle.verticalCornerRadius;if(g>0||w>0){const b=`calc(${g}px * var(--total-scale-factor)) / calc(${w}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof vO){const b=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case Nu.SOLID:o.borderStyle="solid";break;case Nu.DASHED:o.borderStyle="dashed";break;case Nu.BEVELED:ue("Unimplemented border style: beveled");break;case Nu.INSET:ue("Unimplemented border style: inset");break;case Nu.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(S(this,xh,!0),o.borderColor=Y.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=Y.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:d,pageHeight:h,pageX:f,pageY:m}=r.rawDims;o.left=`${100*(u[0]-f)/d}%`,o.top=`${100*(u[1]-m)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*a/d}%`,o.height=`${100*c/h}%`):this.setRotation(y,i),i}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:o}=this;e%180!==0&&([i,o]=[o,i]),t.style.width=`${100*i/s}%`,t.style.height=`${100*o/r}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,r)=>{const i=r.detail[t],o=i[0],a=i.slice(1);r.target.style[s]=IN[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:IN[`${o}_rgb`](a)})};return me(this,"_commonActions",{display:t=>{const{display:s}=t.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||s[r];i==null||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[r,i]of Object.entries(t)){const o=s[r];if(o){const a={detail:{[r]:i},target:e};o(a),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,r,i]=this.data.rect.map(g=>Math.fround(g));if(e.length===8){const[g,w,v,b]=e.subarray(2,6);if(r===g&&i===w&&t===v&&s===b)return}const{style:o}=this.container;let a;if(l(this,xh)){const{borderColor:g,borderWidth:w}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${w}">`],this.container.classList.add("hasBorder")}const c=r-t,u=i-s,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0),h.role="none";const f=d.createElement("defs");h.append(f);const m=d.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let g=2,w=e.length;g<w;g+=8){const v=e[g],b=e[g+1],_=e[g+2],E=e[g+3],k=d.createElement("rect"),T=(_-t)/c,P=(i-b)/u,N=(v-_)/c,M=(b-E)/u;k.setAttribute("x",T),k.setAttribute("y",P),k.setAttribute("width",N),k.setAttribute("height",M),m.append(k),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${P}" width="${N}" height="${M}"/>`)}l(this,xh)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let s,r;e?(s={str:e.text},r=e.date):(s=t.contentsObj,r=t.modificationDate);const i=S(this,Ws,new gE({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(l(this,Ws)||this.popup||this.data.popupRef)}get extraPopupElement(){return l(this,Ws)}render(){We("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:i,id:o,exportValues:a}of r){if(i===-1||o===t)continue;const c=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!pu.has(u)){ue(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:u})}return s}for(const r of document.getElementsByName(e)){const{exportValue:i}=r,o=r.getAttribute("data-element-id");o!==t&&pu.has(r)&&s.push({id:o,exportValue:i,domElement:r})}return s}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Tc=new WeakMap,xh=new WeakMap,Ws=new WeakMap,n0=new WeakSet,mE=function(e){const{container:{style:t},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...e),t.left=`${100*(e[0]-a)/i}%`,t.top=`${100*(o-e[3]+c)/o}%`,r===0?(t.width=`${100*(e[2]-e[0])/i}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(r)};let mt=hT;class DW extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var Ji,bl,nw,gO,sw,yO;class Qk extends mt{constructor(t,s=null){super(t,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});x(this,Ji);x(this,nw);x(this,sw);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:s}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(s.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(C(this,nw,gO).call(this,r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(C(this,sw,yO).call(this,r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}_bindLink(t,s,r=""){t.href=this.linkService.getDestinationHash(s),t.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&C(this,Ji,bl).call(this),r&&(t.title=r)}_bindNamedAction(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(s),!1),r&&(t.title=r),C(this,Ji,bl).call(this)}_bindJSAction(t,s){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(s.actions)){const o=r.get(i);o&&(t[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:i}}),!1})}s.overlaidText&&(t.title=s.overlaidText),t.onclick||(t.onclick=()=>!1),C(this,Ji,bl).call(this)}_bindResetFormAction(t,s){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),C(this,Ji,bl).call(this),!this._fieldObjects){ue('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:i,refs:o,include:a}=s,c=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const m of i){const y=this._fieldObjects[m]||[];for(const{id:g}of y)f.add(g)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===a&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,d=[];for(const f of c){const{id:m}=f;switch(d.push(m),f.type){case"text":{const g=f.defaultValue||"";u.setValue(m,{value:g});break}case"checkbox":case"radiobutton":{const g=f.defaultValue===f.exportValues;u.setValue(m,{value:g});break}case"combobox":case"listbox":{const g=f.defaultValue||"";u.setValue(m,{value:g});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!pu.has(y)){ue(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}Ji=new WeakSet,bl=function(){this.container.setAttribute("data-internal-link","")},nw=new WeakSet,gO=function(t,s,r="",i=null){t.href=this.linkService.getAnchorUrl(""),s.description?t.title=s.description:r&&(t.title=r),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(s.content,s.filename,i),!1},C(this,Ji,bl).call(this)},sw=new WeakSet,yO=function(t,s,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(s),!1),r&&(t.title=r),C(this,Ji,bl).call(this)};class IW extends mt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class _u extends mt{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Qt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,r,i){s.includes("mouse")?e.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(s,o=>{var a;if(s==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}i&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(o)}}))})}_setEventListeners(e,t,s,r){var i,o,a;for(const[c,u]of s)(u==="Action"||(i=this.data.actions)!=null&&i[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,r),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Y.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||jW,i=e.style;let o;const a=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(u/(US*r))||1,h=u/d;o=Math.min(r,c(h/US))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(r,c(u/US))}i.fontSize=`calc(${o}px * var(--total-scale-factor))`,i.color=Y.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class OW extends _u{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,r){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=s),i.setValue(o.id,{[r]:s})}render(){var r,i;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let a=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let u=o.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),pu.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:h,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;h&&(s.title=h),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),d.formattedValue=null}),s.addEventListener("resetform",w=>{const v=this.data.defaultFieldValue??"";s.value=d.userValue=v,d.formattedValue=null});let g=w=>{const{formattedValue:v}=d;v!=null&&(w.target.value=v),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",v=>{var _;if(d.focused)return;const{target:b}=v;if(y&&(b.type=f,m&&(b.step=m)),d.userValue){const E=d.userValue;if(y)if(f==="time"){const k=new Date(E),T=[k.getHours(),k.getMinutes(),k.getSeconds()];b.value=T.map(P=>P.toString().padStart(2,"0")).join(":")}else b.value=new Date(E-LW).toISOString().split(f==="date"?"T":".",1)[0];else b.value=E}d.lastCommittedValue=b.value,d.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(d.focused=!0)}),s.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(_){d.userValue=_.detail.value??"",y||e.setValue(t,{value:d.userValue.toString()}),_.target.value=d.userValue},formattedValue(_){const{formattedValue:E}=_.detail;d.formattedValue=E,E!=null&&_.target!==document.activeElement&&(_.target.value=E);const k={formattedValue:E};y&&(k.value=E),e.setValue(t,k)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var P;const{charLimit:E}=_.detail,{target:k}=_;if(E===0){k.removeAttribute("maxLength");return}k.setAttribute("maxLength",E);let T=d.userValue;!T||T.length<=E||(T=T.slice(0,E),k.value=d.userValue=T,e.setValue(t,{value:T}),(P=this.linkService.eventBus)==null||P.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:k.selectionStart,selEnd:k.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),s.addEventListener("keydown",v=>{var E;d.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(d.commitKey=3),b===-1)return;const{value:_}=v.target;d.lastCommittedValue!==_&&(d.lastCommittedValue=_,d.userValue=_,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const w=g;g=null,s.addEventListener("blur",v=>{var E,k;if(!d.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(d.focused=!1);const{target:b}=v;let{value:_}=b;if(y){if(_&&f==="time"){const T=_.split(":").map(P=>parseInt(P,10));_=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),b.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();b.type="text"}d.userValue=_,d.lastCommittedValue!==_&&((k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:d.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),w(v)}),(i=this.data.actions)!=null&&i.Keystroke&&s.addEventListener("beforeinput",v=>{var M;d.lastCommittedValue=null;const{data:b,target:_}=v,{value:E,selectionStart:k,selectionEnd:T}=_;let P=k,N=T;switch(v.inputType){case"deleteWordBackward":{const L=E.substring(0,k).match(/\w*[^\w]*$/);L&&(P-=L[0].length);break}case"deleteWordForward":{const L=E.substring(k).match(/^[^\w]*\w*/);L&&(N+=L[0].length);break}case"deleteContentBackward":k===T&&(P-=1);break;case"deleteContentForward":k===T&&(N+=1);break}v.preventDefault(),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:P,selEnd:N}})}),this._setEventListeners(s,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&s.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class FW extends _u{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class BW extends _u{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return pu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,s)){const d=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(s,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class vO extends _u{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let r=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(s,{value:r})),r)for(const o of this._getElementsByName(t.fieldName,s))e.setValue(o.id,{value:!1});const i=document.createElement("input");if(pu.add(i),i.setAttribute("data-element-id",s),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const u of this._getElementsByName(a,s))e.setValue(u.id,{value:!1});e.setValue(s,{value:c})}),i.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;i.addEventListener("updatefromsandbox",a=>{const c={value:u=>{const d=o===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=d&&h.id===s;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class $W extends Qk{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class VW extends _u{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");pu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,s.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),i=!1),r.append(h)}let o=null;if(i){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),o=()=>{d.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const a=d=>{const h=d?"value":"textContent",{options:f,multiple:m}=r;return m?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let c=a(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const h={value(f){o==null||o();const m=f.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const g of r.options)g.selected=y.has(g.value);e.setValue(t,{value:a(!0)}),c=a(!1)},multipleSelection(f){r.multiple=!0},remove(f){const m=r.options,y=f.detail.remove;m[y].selected=!1,r.remove(y),m.length>0&&Array.prototype.findIndex.call(m,w=>w.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),c=a(!1)},insert(f){const{index:m,displayValue:y,exportValue:g}=f.detail.insert,w=r.children[m],v=document.createElement("option");v.textContent=y,v.value=g,w?w.before(v):r.append(v),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},items(f){const{items:m}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of m){const{displayValue:g,exportValue:w}=y,v=document.createElement("option");v.textContent=g,v.value=w,r.append(v)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:u(f)}),c=a(!1)},indices(f){const m=new Set(f.detail.indices);for(const y of f.target.options)y.selected=m.has(y.index);e.setValue(t,{value:a(!0)}),c=a(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{var m;const h=a(!0),f=a(!1);e.setValue(t,{value:h}),d.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var s0,yE;class gE extends mt{constructor(t){const{data:s,elements:r,parent:i}=t,o=!!i._commentManager;super(t,{isRenderable:!o&&mt._hasPopupData(s)});x(this,s0);if(this.elements=r,o&&mt._hasPopupData(s)){const a=this.popup=C(this,s0,yE).call(this);for(const c of r)c.popup=a}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const s=this.popup=C(this,s0,yE).call(this),r=[];for(const i of this.elements)i.popup=s,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${zk}${i}`).join(",")),this.container}}s0=new WeakSet,yE=function(){return new zW({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var fs,va,rw,iw,wh,Sh,wt,ri,ba,Pc,_h,Ah,ii,ps,Zi,eo,Ut,to,xa,r0,no,Eh,Nc,wa,vn,Sa,Ch,Kv,i0,vE,o0,bE,a0,xE,kh,Xv,l0,wE,ow,bO,aw,xO,lw,wO,cw,SO,Th,Yv,Ph,Qv,c0,SE;class zW{constructor({container:e,color:t,elements:s,titleObj:r,modificationDate:i,contentsObj:o,richText:a,parent:c,rect:u,parentRect:d,open:h,commentManager:f=null}){x(this,Ch);x(this,i0);x(this,o0);x(this,a0);x(this,kh);x(this,l0);x(this,ow);x(this,aw);x(this,lw);x(this,cw);x(this,Th);x(this,Ph);x(this,c0);x(this,fs,null);x(this,va,C(this,lw,wO).bind(this));x(this,rw,C(this,c0,SE).bind(this));x(this,iw,C(this,Ph,Qv).bind(this));x(this,wh,C(this,Th,Yv).bind(this));x(this,Sh,null);x(this,wt,null);x(this,ri,null);x(this,ba,null);x(this,Pc,null);x(this,_h,null);x(this,Ah,null);x(this,ii,!1);x(this,ps,null);x(this,Zi,null);x(this,eo,null);x(this,Ut,null);x(this,to,null);x(this,xa,null);x(this,r0,null);x(this,no,null);x(this,Eh,null);x(this,Nc,null);x(this,wa,!1);x(this,vn,null);x(this,Sa,null);S(this,wt,e),S(this,Eh,r),S(this,ri,o),S(this,no,a),S(this,_h,c),S(this,Sh,t),S(this,r0,u),S(this,Ah,d),S(this,Pc,s),S(this,fs,f),S(this,vn,s[0]),S(this,ba,Sm.toDateObject(i)),this.trigger=s.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(C(this,Ch,Kv).call(this),l(this,wt).hidden=!0,h&&C(this,Th,Yv).call(this))}renderCommentButton(){if(l(this,Ut)||(l(this,to)||C(this,i0,vE).call(this),!l(this,to)))return;const{signal:e}=S(this,Zi,new AbortController),t=!!l(this,vn).extraPopupElement,s=()=>{l(this,fs).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{l(this,fs).toggleCommentPopup(this,!1,!0,!t)},i=()=>{l(this,fs).toggleCommentPopup(this,!1,!1)};if(t){S(this,Ut,l(this,vn).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",l(this,va),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=S(this,Ut,document.createElement("button"));o.className="annotationCommentButton";const a=l(this,vn).container;o.style.zIndex=a.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),C(this,a0,xE).call(this),C(this,o0,bE).call(this),o.addEventListener("keydown",l(this,va),{signal:e}),o.addEventListener("click",s,{signal:e}),o.addEventListener("pointerenter",r,{signal:e}),o.addEventListener("pointerleave",i,{signal:e}),a.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=l(this,vn).commentData;return e?l(this,_h)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=l(this,Ut))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}=l(this,vn).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:r,modificationDate:i}}get elementBeforePopup(){return l(this,Ut)}get comment(){return l(this,Sa)||S(this,Sa,l(this,vn).commentText),l(this,Sa)}set comment(e){e!==this.comment&&(l(this,vn).commentText=S(this,Sa,e))}get parentBoundingClientRect(){return l(this,vn).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){l(this,Ut)&&(l(this,Ut).classList.toggle("selected",e),l(this,Ut).ariaExpanded=t)}setSelectedCommentButton(e){l(this,Ut).classList.toggle("selected",e)}get commentPopupPosition(){if(l(this,xa))return l(this,xa);const{x:e,y:t,height:s}=l(this,Ut).getBoundingClientRect(),{x:r,y:i,width:o,height:a}=l(this,vn).layer.getBoundingClientRect();return[(e-r)/o,(t+s-i)/a]}set commentPopupPosition(e){S(this,xa,e)}hasDefaultPopupPosition(){return l(this,xa)===null}get commentButtonPosition(){return l(this,to)}get commentButtonWidth(){return l(this,Ut).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=l(this,xa)||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:i,y:o,width:a,height:c}=r;l(this,fs).showDialog(null,this,i+t*a,o+s*c,{...e,parentDimensions:r})}render(){var s,r;if(l(this,ps))return;const e=S(this,ps,document.createElement("div"));if(e.className="popup",l(this,Sh)){const i=e.style.outlineColor=Y.makeHexColor(...l(this,Sh));e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",(s=l(this,Eh))!=null&&s.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=l(this,Eh)}if(e.append(t),l(this,ba)){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,ba).valueOf()})),i.dateTime=l(this,ba).toISOString(),t.append(i)}Hk({html:l(this,kh,Xv)||l(this,ri).str,dir:(r=l(this,ri))==null?void 0:r.dir,className:"popupContent"},e),l(this,wt).append(e)}updateEdited({rect:e,popup:t,deleted:s}){var r;if(l(this,fs)){s?(this.remove(),S(this,Sa,null)):t&&(t.deleted?this.remove():(C(this,a0,xE).call(this),S(this,Sa,t.text))),e&&(S(this,to,null),C(this,i0,vE).call(this),C(this,o0,bE).call(this));return}if(s||t!=null&&t.deleted){this.remove();return}C(this,Ch,Kv).call(this),l(this,Nc)||S(this,Nc,{contentsObj:l(this,ri),richText:l(this,no)}),e&&S(this,eo,null),t&&t.text&&(S(this,no,C(this,aw,xO).call(this,t.text)),S(this,ba,Sm.toDateObject(t.date)),S(this,ri,null)),(r=l(this,ps))==null||r.remove(),S(this,ps,null)}resetEdited(){var e;l(this,Nc)&&({contentsObj:jt(this,ri)._,richText:jt(this,no)._}=l(this,Nc),S(this,Nc,null),(e=l(this,ps))==null||e.remove(),S(this,ps,null),S(this,eo,null))}remove(){var e,t,s;if((e=l(this,Zi))==null||e.abort(),S(this,Zi,null),(t=l(this,ps))==null||t.remove(),S(this,ps,null),S(this,wa,!1),S(this,ii,!1),(s=l(this,Ut))==null||s.remove(),S(this,Ut,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){S(this,wa,this.isVisible),l(this,wa)&&(l(this,wt).hidden=!0)}maybeShow(){l(this,fs)||(C(this,Ch,Kv).call(this),l(this,wa)&&(l(this,ps)||C(this,Ph,Qv).call(this),S(this,wa,!1),l(this,wt).hidden=!1))}get isVisible(){return l(this,fs)?!1:l(this,wt).hidden===!1}}fs=new WeakMap,va=new WeakMap,rw=new WeakMap,iw=new WeakMap,wh=new WeakMap,Sh=new WeakMap,wt=new WeakMap,ri=new WeakMap,ba=new WeakMap,Pc=new WeakMap,_h=new WeakMap,Ah=new WeakMap,ii=new WeakMap,ps=new WeakMap,Zi=new WeakMap,eo=new WeakMap,Ut=new WeakMap,to=new WeakMap,xa=new WeakMap,r0=new WeakMap,no=new WeakMap,Eh=new WeakMap,Nc=new WeakMap,wa=new WeakMap,vn=new WeakMap,Sa=new WeakMap,Ch=new WeakSet,Kv=function(){var t;if(l(this,Zi))return;S(this,Zi,new AbortController);const{signal:e}=l(this,Zi);for(const s of this.trigger)s.addEventListener("click",l(this,wh),{signal:e}),s.addEventListener("pointerenter",l(this,iw),{signal:e}),s.addEventListener("pointerleave",l(this,rw),{signal:e}),s.classList.add("popupTriggerArea");for(const s of l(this,Pc))(t=s.container)==null||t.addEventListener("keydown",l(this,va),{signal:e})},i0=new WeakSet,vE=function(){const e=l(this,Pc).find(t=>t.hasCommentButton);e&&S(this,to,e._normalizePoint(e.commentButtonPosition))},o0=new WeakSet,bE=function(){if(l(this,vn).extraPopupElement&&!l(this,vn).editor)return;this.renderCommentButton();const[e,t]=l(this,to),{style:s}=l(this,Ut);s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`},a0=new WeakSet,xE=function(){l(this,vn).extraPopupElement||(this.renderCommentButton(),l(this,Ut).style.backgroundColor=this.commentButtonColor||"")},kh=new WeakSet,Xv=function(){const e=l(this,no),t=l(this,ri);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&l(this,no).html||null},l0=new WeakSet,wE=function(){var e,t,s;return((s=(t=(e=l(this,kh,Xv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.fontSize)||0},ow=new WeakSet,bO=function(){var e,t,s;return((s=(t=(e=l(this,kh,Xv))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:s.color)||null},aw=new WeakSet,xO=function(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:l(this,ow,bO),fontSize:l(this,l0,wE)?`calc(${l(this,l0,wE)}px * var(--total-scale-factor))`:""}};for(const i of e.split(`
`))t.push({name:"span",value:i,attributes:r});return s},lw=new WeakSet,wO=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&l(this,ii))&&C(this,Th,Yv).call(this)},cw=new WeakSet,SO=function(){if(l(this,eo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:r,pageY:i}}}=l(this,_h);let o=!!l(this,Ah),a=o?l(this,Ah):l(this,r0);for(const y of l(this,Pc))if(!a||Y.intersect(y.data.rect,a)!==null){a=y.data.rect,o=!0;break}const c=Y.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),u=5,d=o?a[2]-a[0]+u:0,h=c[0]+d,f=c[1];S(this,eo,[100*(h-r)/t,100*(f-i)/s]);const{style:m}=l(this,wt);m.left=`${l(this,eo)[0]}%`,m.top=`${l(this,eo)[1]}%`},Th=new WeakSet,Yv=function(){if(l(this,fs)){l(this,fs).toggleCommentPopup(this,!1);return}S(this,ii,!l(this,ii)),l(this,ii)?(C(this,Ph,Qv).call(this),l(this,wt).addEventListener("click",l(this,wh)),l(this,wt).addEventListener("keydown",l(this,va))):(C(this,c0,SE).call(this),l(this,wt).removeEventListener("click",l(this,wh)),l(this,wt).removeEventListener("keydown",l(this,va)))},Ph=new WeakSet,Qv=function(){l(this,ps)||this.render(),this.isVisible?l(this,ii)&&l(this,wt).classList.add("focused"):(C(this,cw,SO).call(this),l(this,wt).hidden=!1,l(this,wt).style.zIndex=parseInt(l(this,wt).style.zIndex)+1e3)},c0=new WeakSet,SE=function(){l(this,wt).classList.remove("focused"),!(l(this,ii)||!this.isVisible)&&(l(this,wt).hidden=!0,l(this,wt).style.zIndex=parseInt(l(this,wt).style.zIndex)-1e3)};class _O extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ce.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var u0;class UW extends mt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,u0,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=S(this,u0,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,u0)}addHighlightArea(){this.container.classList.add("highlightArea")}}u0=new WeakMap;var d0;class HW extends mt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,d0,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=S(this,d0,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",r-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,d0)}addHighlightArea(){this.container.classList.add("highlightArea")}}d0=new WeakMap;var h0;class GW extends mt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,h0,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:s,height:r}=this,i=this.svgFactory.create(s,r,!0),o=t.borderStyle.width,a=S(this,h0,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",r/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",r/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),i.append(a),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,h0)}addHighlightArea(){this.container.classList.add("highlightArea")}}h0=new WeakMap;var f0;class AO extends mt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,f0,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:s,borderStyle:r,popupRef:i},width:o,height:a}=this;if(!s)return this.container;const c=this.svgFactory.create(o,a,!0);let u=[];for(let h=0,f=s.length;h<f;h+=2){const m=s[h]-t[0],y=t[3]-s[h+1];u.push(`${m},${y}`)}u=u.join(" ");const d=S(this,f0,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),c.append(d),this.container.append(c),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,f0)}addHighlightArea(){this.container.classList.add("highlightArea")}}f0=new WeakMap;class WW extends AO{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qW extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var p0,Rc,m0,_E;class Jk extends mt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});x(this,m0);x(this,p0,null);x(this,Rc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ce.HIGHLIGHT:ce.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:s,inkLists:r,borderStyle:i,popupRef:o}}=this,{transform:a,width:c,height:u}=C(this,m0,_E).call(this,s,t),d=this.svgFactory.create(c,u,!0),h=S(this,p0,this.svgFactory.createElement("svg:g"));d.append(h),h.setAttribute("stroke-width",i.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let f=0,m=r.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);l(this,Rc).push(y),y.setAttribute("points",r[f].join(",")),h.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:s,points:r,rect:i}=t,o=l(this,p0);if(s>=0&&o.setAttribute("stroke-width",s||1),r)for(let a=0,c=l(this,Rc).length;a<c;a++)l(this,Rc)[a].setAttribute("points",r[a].join(","));if(i){const{transform:a,width:c,height:u}=C(this,m0,_E).call(this,this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Rc)}addHighlightArea(){this.container.classList.add("highlightArea")}}p0=new WeakMap,Rc=new WeakMap,m0=new WeakSet,_E=function(t,s){switch(t){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class EO extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ce.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class KW extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class XW extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class YW extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class CO extends mt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ce.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var g0,y0,AE;class QW extends mt{constructor(t){var r;super(t,{isRenderable:!0});x(this,y0);x(this,g0,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:s}=this;let r;s.hasAppearance||s.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),r.addEventListener("dblclick",C(this,y0,AE).bind(this)),S(this,g0,r);const{isMac:i}=Qt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&C(this,y0,AE).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return l(this,g0)}addHighlightArea(){this.container.classList.add("highlightArea")}}g0=new WeakMap,y0=new WeakSet,AE=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Nh,Mc,Rh,_a,v0,jc,b0,EE,x0,CE,w0;let Zk=(w0=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:r,page:i,viewport:o,structTreeLayer:a,commentManager:c,linkService:u,annotationStorage:d}){x(this,b0);x(this,x0);x(this,Nh,null);x(this,Mc,null);x(this,Rh,null);x(this,_a,new Map);x(this,v0,null);x(this,jc,null);this.div=e,S(this,Nh,t),S(this,Mc,s),S(this,v0,a||null),S(this,jc,u||null),S(this,Rh,d||new Gk),this.page=i,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=c||null}hasEditableAnnotations(){return l(this,_a).size>0}async render(e){var o,a,c;const{annotations:t}=e,s=this.div;nl(s,this.viewport);const r=new Map,i={data:null,layer:s,linkService:l(this,jc),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Cm,annotationStorage:l(this,Rh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const d=u.annotationType===At.POPUP;if(d){const m=r.get(u.id);if(!m)continue;i.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;i.data=u;const h=ON.create(i);if(!h.isRenderable)continue;if(!d&&u.popupRef){const m=r.get(u.popupRef);m?m.push(h):r.set(u.popupRef,[h])}const f=h.render();u.hidden&&(f.style.visibility="hidden"),await C(this,b0,EE).call(this,f,u.id,i.elements),(a=(o=h.extraPopupElement)==null?void 0:o.popup)==null||a.renderCommentButton(),h._isEditable&&(l(this,_a).set(h.data.id,h),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(h))}C(this,x0,CE).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:l(this,jc),svgFactory:new Cm,parent:this};for(const s of e){s.borderStyle||(s.borderStyle=w0._defaultBorderStyle),t.data=s;const r=ON.create(t);if(!r.isRenderable)continue;const i=r.render();await C(this,b0,EE).call(this,i,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,nl(t,{rotation:e.rotation}),C(this,x0,CE).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(l(this,_a).values())}getEditableAnnotation(e){return l(this,_a).get(e)}addFakeAnnotation(e){var a;const{div:t}=this,{id:s,rotation:r}=e,i=new DW({data:{id:s,rect:e.getPDFRect(),rotation:r},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:l(this,jc),annotationStorage:l(this,Rh)}),o=i.render();return t.append(o),(a=l(this,Nh))==null||a.moveElementInDOM(t,o,o,!1),i.createOrUpdatePopup(),i}static get _defaultBorderStyle(){return me(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Nu.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Nh=new WeakMap,Mc=new WeakMap,Rh=new WeakMap,_a=new WeakMap,v0=new WeakMap,jc=new WeakMap,b0=new WeakSet,EE=async function(e,t,s){var a,c;const r=e.firstChild||e,i=r.id=`${zk}${t}`,o=await((a=l(this,v0))==null?void 0:a.getAriaAttributes(i));if(o)for(const[u,d]of o)r.setAttribute(u,d);s?s.at(-1).container.after(e):(this.div.append(e),(c=l(this,Nh))==null||c.moveElementInDOM(this.div,e,r,!1))},x0=new WeakSet,CE=function(){var t;if(!l(this,Mc))return;const e=this.div;for(const[s,r]of l(this,Mc)){const i=e.querySelector(`[data-annotation-id="${s}"]`);if(!i)continue;r.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(r):o.classList.contains("annotationContent")?o.after(r):o.before(r):i.append(r);const a=l(this,_a).get(s);a&&(a._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(s,i.id,r),a._hasNoCanvas=!1):a.canvas=r)}l(this,Mc).clear()},w0);const fv=/\r\n?|\n/g;var ms,S0,Lc,gs,uw,kO,dw,TO,hw,PO,Mh,Jv,jh,Zv,Lh,eb,fw,NO,_0,TE,pw,RO;const Ke=class Ke extends Qe{constructor(t){super({...t,name:"freeTextEditor"});x(this,uw);x(this,dw);x(this,hw);x(this,Mh);x(this,Lh);x(this,fw);x(this,pw);x(this,ms,"");x(this,S0,`${this.id}-editor`);x(this,Lc,null);x(this,gs,void 0);U(this,"_colorPicker",null);this.color=t.color||Ke._defaultColor||Qe._defaultLineColor,S(this,gs,t.fontSize||Ke._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Ke.prototype,s=o=>o.isEmpty(),r=sl.TRANSLATE_SMALL,i=sl.TRANSLATE_BIG;return me(this,"_keyboardManager",new wy([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:s}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:s}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:s}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:s}]]))}static initialize(t,s){Qe.initialize(t,s);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,s){switch(t){case _e.FREETEXT_SIZE:Ke._defaultFontSize=s;break;case _e.FREETEXT_COLOR:Ke._defaultColor=s;break}}updateParams(t,s){switch(t){case _e.FREETEXT_SIZE:C(this,uw,kO).call(this,s);break;case _e.FREETEXT_COLOR:C(this,dw,TO).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[_e.FREETEXT_SIZE,Ke._defaultFontSize],[_e.FREETEXT_COLOR,Ke._defaultColor||Qe._defaultLineColor]]}get propertiesToUpdate(){return[[_e.FREETEXT_SIZE,l(this,gs)],[_e.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new ex(this)),[["colorPicker",this._colorPicker]]}get colorType(){return _e.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,s){this._uiManager.translateSelectedEditors(t,s,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ke._internalPadding*t,-(Ke._internalPadding+l(this,gs))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Lc,new AbortController);const t=this._uiManager.combinedSignal(l(this,Lc));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,S0)),this._isDraggable=!0,(t=l(this,Lc))==null||t.abort(),S(this,Lc,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var s;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=l(this,ms),s=S(this,ms,C(this,hw,PO).call(this).trimEnd());if(t===s)return;const r=i=>{if(S(this,ms,i),!i){this.remove();return}C(this,Lh,eb).call(this),this._uiManager.rebuild(this),C(this,Mh,Jv).call(this)};this.addCommands({cmd:()=>{r(s)},undo:()=>{r(t)},mustExec:!1}),C(this,Mh,Jv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ke._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,s;(this._isCopy||this.annotationElementId)&&(t=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,S0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${l(this,gs)}px * var(--total-scale-factor))`,r.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[d,h]=this.pageDimensions,[f,m]=this.pageTranslation;let y,g;switch(this.rotation){case 0:y=t+(a[0]-f)/d,g=s+this.height-(a[1]-m)/h;break;case 90:y=t+(a[0]-f)/d,g=s-(a[1]-m)/h,[c,u]=[u,-c];break;case 180:y=t-this.width+(a[0]-f)/d,g=s-(a[1]-m)/h,[c,u]=[-c,-u];break;case 270:y=t+(a[0]-f-this.height*h)/d,g=s+(a[1]-m-this.width*d)/h,[c,u]=[-u,c];break}this.setAt(y*i,g*o,c,u)}else this._moveAfterPaste(t,s);C(this,Lh,eb).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,g,w;const s=t.clipboardData||window.clipboardData,{types:r}=s;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const i=C(y=Ke,_0,TE).call(y,s.getData("text")||"").replaceAll(fv,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!i.includes(`
`)){a.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=a,d=[],h=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(h.push(c.nodeValue.slice(u).replaceAll(fv,"")),v!==this.editorDiv){let b=d;for(const _ of this.editorDiv.childNodes){if(_===v){b=h;continue}b.push(C(g=Ke,jh,Zv).call(g,_))}}d.push(c.nodeValue.slice(0,u).replaceAll(fv,""))}else if(c===this.editorDiv){let v=d,b=0;for(const _ of this.editorDiv.childNodes)b++===u&&(v=h),v.push(C(w=Ke,jh,Zv).call(w,_))}S(this,ms,`${d.join(`
`)}${i}${h.join(`
`)}`),C(this,Lh,eb).call(this);const f=new Range;let m=Math.sumPrecise(d.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(m<=b){f.setStart(v,m),f.setEnd(v,m);break}m-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ke._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,s,r){var a;let i=null;if(t instanceof _O){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:d,rotation:h,id:f,popupRef:m,richText:y,contentsObj:g,creationDate:w,modificationDate:v},textContent:b,textPosition:_,parent:{page:{pageNumber:E}}}=t;if(!b||b.length===0)return null;i=t={annotationType:ce.FREETEXT,color:Array.from(u),fontSize:c,value:b.join(`
`),position:_,pageIndex:E-1,rect:d.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(g==null?void 0:g.str)||null,richText:y,creationDate:w,modificationDate:v}}const o=await super.deserialize(t,s,r);return S(o,gs,t.fontSize),o.color=Y.makeHexColor(...t.color),S(o,ms,C(a=Ke,_0,TE).call(a,t.value)),o._initialData=i,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Qe._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),r=Object.assign(super.serialize(t),{color:s,fontSize:l(this,gs),value:C(this,fw,NO).call(this)});return this.addComment(r),t?(r.isCopy=!0,r):this.annotationElementId&&!C(this,pw,RO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){const s=super.renderAnnotationElement(t);if(!s)return null;const{style:r}=s;r.fontSize=`calc(${l(this,gs)}px * var(--total-scale-factor))`,r.color=this.color,s.replaceChildren();for(const i of l(this,ms).split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),s.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:l(this,ms)}}),s}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ms=new WeakMap,S0=new WeakMap,Lc=new WeakMap,gs=new WeakMap,uw=new WeakSet,kO=function(t){const s=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-l(this,gs))*this.parentScale),S(this,gs,i),C(this,Mh,Jv).call(this)},r=l(this,gs);this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},dw=new WeakSet,TO=function(t){const s=i=>{this.color=i,this.onUpdatedColor()},r=this.color;this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},hw=new WeakSet,PO=function(){var r;const t=[];this.editorDiv.normalize();let s=null;for(const i of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(C(r=Ke,jh,Zv).call(r,i)),s=i);return t.join(`
`)},Mh=new WeakSet,Jv=function(){const[t,s]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),r=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/s):(this.width=r.height/t,this.height=r.width/s),this.fixAndSetPosition()},jh=new WeakSet,Zv=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(fv,"")},Lh=new WeakSet,eb=function(){if(this.editorDiv.replaceChildren(),!!l(this,ms))for(const t of l(this,ms).split(`
`)){const s=document.createElement("div");s.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(s)}},fw=new WeakSet,NO=function(){return l(this,ms).replaceAll(""," ")},_0=new WeakSet,TE=function(t){return t.replaceAll(" ","")},pw=new WeakSet,RO=function(t){const{value:s,fontSize:r,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==s||t.fontSize!==r||t.color.some((a,c)=>a!==i[c])||t.pageIndex!==o},x(Ke,jh),x(Ke,_0),U(Ke,"_freeTextDefaultContent",""),U(Ke,"_internalPadding",0),U(Ke,"_defaultColor",null),U(Ke,"_defaultFontSize",10),U(Ke,"_type","freetext"),U(Ke,"_editorType",ce.FREETEXT);let kE=Ke;class Q{toSVGPath(){We("Abstract method `toSVGPath` must be implemented.")}get box(){We("Abstract getter `box` must be implemented.")}serialize(e,t){We("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a]*r,o[a+1]=s+e[a+1]*i;return o}static _rescaleAndSwap(e,t,s,r,i,o){o||(o=new Float32Array(e.length));for(let a=0,c=e.length;a<c;a+=2)o[a]=t+e[a+1]*r,o[a+1]=s+e[a]*i;return o}static _translate(e,t,s,r){r||(r=new Float32Array(e.length));for(let i=0,o=e.length;i<o;i+=2)r[i]=t+e[i],r[i+1]=s+e[i+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,r,i){switch(i){case 90:return[1-t/s,e/r];case 180:return[1-e/s,1-t/r];case 270:return[t/s,1-e/r];default:return[e/s,t/r]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,r,i,o){return[(e+5*s)/6,(t+5*r)/6,(5*s+i)/6,(5*r+o)/6,(s+i)/2,(r+o)/2]}}U(Q,"PRECISION",1e-4);var ys,vr,Dh,Ih,oi,be,Dc,Ic,A0,E0,Oh,Fh,Aa,C0,mw,gw,Oc,Tp,yw,MO,vw,jO,bw,LO,xw,DO,ww,IO,Sw,OO;const Ci=class Ci{constructor({x:e,y:t},s,r,i,o,a=0){x(this,Oc);x(this,yw);x(this,vw);x(this,bw);x(this,xw);x(this,ww);x(this,Sw);x(this,ys,void 0);x(this,vr,[]);x(this,Dh,void 0);x(this,Ih,void 0);x(this,oi,[]);x(this,be,new Float32Array(18));x(this,Dc,void 0);x(this,Ic,void 0);x(this,A0,void 0);x(this,E0,void 0);x(this,Oh,void 0);x(this,Fh,void 0);x(this,Aa,[]);S(this,ys,s),S(this,Fh,i*r),S(this,Ih,o),l(this,be).set([NaN,NaN,NaN,NaN,e,t],6),S(this,Dh,a),S(this,E0,l(Ci,C0)*r),S(this,A0,l(Ci,gw)*r),S(this,Oh,r),l(this,Aa).push(e,t)}isEmpty(){return isNaN(l(this,be)[8])}add({x:e,y:t}){var M;S(this,Dc,e),S(this,Ic,t);const[s,r,i,o]=l(this,ys);let[a,c,u,d]=l(this,be).subarray(8,12);const h=e-u,f=t-d,m=Math.hypot(h,f);if(m<l(this,A0))return!1;const y=m-l(this,E0),g=y/m,w=g*h,v=g*f;let b=a,_=c;a=u,c=d,u+=w,d+=v,(M=l(this,Aa))==null||M.push(e,t);const E=-v/y,k=w/y,T=E*l(this,Fh),P=k*l(this,Fh);return l(this,be).set(l(this,be).subarray(2,8),0),l(this,be).set([u+T,d+P],4),l(this,be).set(l(this,be).subarray(14,18),12),l(this,be).set([u-T,d-P],16),isNaN(l(this,be)[6])?(l(this,oi).length===0&&(l(this,be).set([a+T,c+P],2),l(this,oi).push(NaN,NaN,NaN,NaN,(a+T-s)/i,(c+P-r)/o),l(this,be).set([a-T,c-P],14),l(this,vr).push(NaN,NaN,NaN,NaN,(a-T-s)/i,(c-P-r)/o)),l(this,be).set([b,_,a,c,u,d],6),!this.isEmpty()):(l(this,be).set([b,_,a,c,u,d],6),Math.abs(Math.atan2(_-c,b-a)-Math.atan2(v,w))<Math.PI/2?([a,c,u,d]=l(this,be).subarray(2,6),l(this,oi).push(NaN,NaN,NaN,NaN,((a+u)/2-s)/i,((c+d)/2-r)/o),[a,c,b,_]=l(this,be).subarray(14,18),l(this,vr).push(NaN,NaN,NaN,NaN,((b+a)/2-s)/i,((_+c)/2-r)/o),!0):([b,_,a,c,u,d]=l(this,be).subarray(0,6),l(this,oi).push(((b+5*a)/6-s)/i,((_+5*c)/6-r)/o,((5*a+u)/6-s)/i,((5*c+d)/6-r)/o,((a+u)/2-s)/i,((c+d)/2-r)/o),[u,d,a,c,b,_]=l(this,be).subarray(12,18),l(this,vr).push(((b+5*a)/6-s)/i,((_+5*c)/6-r)/o,((5*a+u)/6-s)/i,((5*c+d)/6-r)/o,((a+u)/2-s)/i,((c+d)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=l(this,oi),t=l(this,vr);if(isNaN(l(this,be)[6])&&!this.isEmpty())return C(this,yw,MO).call(this);const s=[];s.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?s.push(`L${e[r+4]} ${e[r+5]}`):s.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);C(this,bw,LO).call(this,s);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return C(this,vw,jO).call(this,s),s.join(" ")}newFreeDrawOutline(e,t,s,r,i,o){return new FO(e,t,s,r,i,o)}getOutlines(){var h;const e=l(this,oi),t=l(this,vr),s=l(this,be),[r,i,o,a]=l(this,ys),c=new Float32Array((((h=l(this,Aa))==null?void 0:h.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(l(this,Aa)[f]-r)/o,c[f+1]=(l(this,Aa)[f+1]-i)/a;if(c[c.length-2]=(l(this,Dc)-r)/o,c[c.length-1]=(l(this,Ic)-i)/a,isNaN(s[6])&&!this.isEmpty())return C(this,xw,DO).call(this,c);const u=new Float32Array(l(this,oi).length+24+l(this,vr).length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}d=C(this,Sw,OO).call(this,u,d);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[f+m],u[d+1]=t[f+m+1],d+=2}return C(this,ww,IO).call(this,u,d),this.newFreeDrawOutline(u,c,l(this,ys),l(this,Oh),l(this,Dh),l(this,Ih))}};ys=new WeakMap,vr=new WeakMap,Dh=new WeakMap,Ih=new WeakMap,oi=new WeakMap,be=new WeakMap,Dc=new WeakMap,Ic=new WeakMap,A0=new WeakMap,E0=new WeakMap,Oh=new WeakMap,Fh=new WeakMap,Aa=new WeakMap,C0=new WeakMap,mw=new WeakMap,gw=new WeakMap,Oc=new WeakSet,Tp=function(){const e=l(this,be).subarray(4,6),t=l(this,be).subarray(16,18),[s,r,i,o]=l(this,ys);return[(l(this,Dc)+(e[0]-t[0])/2-s)/i,(l(this,Ic)+(e[1]-t[1])/2-r)/o,(l(this,Dc)+(t[0]-e[0])/2-s)/i,(l(this,Ic)+(t[1]-e[1])/2-r)/o]},yw=new WeakSet,MO=function(){const[e,t,s,r]=l(this,ys),[i,o,a,c]=C(this,Oc,Tp).call(this);return`M${(l(this,be)[2]-e)/s} ${(l(this,be)[3]-t)/r} L${(l(this,be)[4]-e)/s} ${(l(this,be)[5]-t)/r} L${i} ${o} L${a} ${c} L${(l(this,be)[16]-e)/s} ${(l(this,be)[17]-t)/r} L${(l(this,be)[14]-e)/s} ${(l(this,be)[15]-t)/r} Z`},vw=new WeakSet,jO=function(e){const t=l(this,vr);e.push(`L${t[4]} ${t[5]} Z`)},bw=new WeakSet,LO=function(e){const[t,s,r,i]=l(this,ys),o=l(this,be).subarray(4,6),a=l(this,be).subarray(16,18),[c,u,d,h]=C(this,Oc,Tp).call(this);e.push(`L${(o[0]-t)/r} ${(o[1]-s)/i} L${c} ${u} L${d} ${h} L${(a[0]-t)/r} ${(a[1]-s)/i}`)},xw=new WeakSet,DO=function(e){const t=l(this,be),[s,r,i,o]=l(this,ys),[a,c,u,d]=C(this,Oc,Tp).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-s)/i,(t[3]-r)/o,NaN,NaN,NaN,NaN,(t[4]-s)/i,(t[5]-r)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-s)/i,(t[17]-r)/o,NaN,NaN,NaN,NaN,(t[14]-s)/i,(t[15]-r)/o],0),this.newFreeDrawOutline(h,e,l(this,ys),l(this,Oh),l(this,Dh),l(this,Ih))},ww=new WeakSet,IO=function(e,t){const s=l(this,vr);return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6},Sw=new WeakSet,OO=function(e,t){const s=l(this,be).subarray(4,6),r=l(this,be).subarray(16,18),[i,o,a,c]=l(this,ys),[u,d,h,f]=C(this,Oc,Tp).call(this);return e.set([NaN,NaN,NaN,NaN,(s[0]-i)/a,(s[1]-o)/c,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-o)/c],t),t+=24},x(Ci,C0,8),x(Ci,mw,2),x(Ci,gw,l(Ci,C0)+l(Ci,mw));let tx=Ci;var Bh,Fc,so,k0,vs,T0,Ct,_w,BO;class FO extends Q{constructor(t,s,r,i,o,a){super();x(this,_w);x(this,Bh,void 0);x(this,Fc,new Float32Array(4));x(this,so,void 0);x(this,k0,void 0);x(this,vs,void 0);x(this,T0,void 0);x(this,Ct,void 0);S(this,Ct,t),S(this,vs,s),S(this,Bh,r),S(this,T0,i),S(this,so,o),S(this,k0,a),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],C(this,_w,BO).call(this,a);const[c,u,d,h]=l(this,Fc);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-c)/d,t[f+1]=(t[f+1]-u)/h;for(let f=0,m=s.length;f<m;f+=2)s[f]=(s[f]-c)/d,s[f+1]=(s[f+1]-u)/h}toSVGPath(){const t=[`M${l(this,Ct)[4]} ${l(this,Ct)[5]}`];for(let s=6,r=l(this,Ct).length;s<r;s+=6){if(isNaN(l(this,Ct)[s])){t.push(`L${l(this,Ct)[s+4]} ${l(this,Ct)[s+5]}`);continue}t.push(`C${l(this,Ct)[s]} ${l(this,Ct)[s+1]} ${l(this,Ct)[s+2]} ${l(this,Ct)[s+3]} ${l(this,Ct)[s+4]} ${l(this,Ct)[s+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,s,r,i],o){const a=r-t,c=i-s;let u,d;switch(o){case 0:u=Q._rescale(l(this,Ct),t,i,a,-c),d=Q._rescale(l(this,vs),t,i,a,-c);break;case 90:u=Q._rescaleAndSwap(l(this,Ct),t,s,a,c),d=Q._rescaleAndSwap(l(this,vs),t,s,a,c);break;case 180:u=Q._rescale(l(this,Ct),r,s,-a,c),d=Q._rescale(l(this,vs),r,s,-a,c);break;case 270:u=Q._rescaleAndSwap(l(this,Ct),r,i,-a,-c),d=Q._rescaleAndSwap(l(this,vs),r,i,-a,-c);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return l(this,Fc)}newOutliner(t,s,r,i,o,a=0){return new tx(t,s,r,i,o,a)}getNewOutline(t,s){const[r,i,o,a]=l(this,Fc),[c,u,d,h]=l(this,Bh),f=o*d,m=a*h,y=r*d+c,g=i*h+u,w=this.newOutliner({x:l(this,vs)[0]*f+y,y:l(this,vs)[1]*m+g},l(this,Bh),l(this,T0),t,l(this,k0),s??l(this,so));for(let v=2;v<l(this,vs).length;v+=2)w.add({x:l(this,vs)[v]*f+y,y:l(this,vs)[v+1]*m+g});return w.getOutlines()}}Bh=new WeakMap,Fc=new WeakMap,so=new WeakMap,k0=new WeakMap,vs=new WeakMap,T0=new WeakMap,Ct=new WeakMap,_w=new WeakSet,BO=function(t){const s=l(this,Ct);let r=s[4],i=s[5];const o=[r,i,r,i];let a=r,c=i,u=r,d=i;const h=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,g=s.length;y<g;y+=6){const w=s[y+4],v=s[y+5];isNaN(s[y])?(Y.pointBoundingBox(w,v,o),c>v?(a=w,c=v):c===v&&(a=h(a,w)),d<v?(u=w,d=v):d===v&&(u=h(u,w))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,Y.bezierBoundingBox(r,i,...s.slice(y,y+6),f),Y.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(a=f[0],c=f[1]):c===f[1]&&(a=h(a,f[0])),d<f[3]?(u=f[2],d=f[3]):d===f[3]&&(u=h(u,f[2]))),r=w,i=v}const m=l(this,Fc);m[0]=o[0]-l(this,so),m[1]=o[1]-l(this,so),m[2]=o[2]-o[0]+2*l(this,so),m[3]=o[3]-o[1]+2*l(this,so),this.firstPoint=[a,c],this.lastPoint=[u,d]};var P0,N0,R0,Ea,br,Aw,$O,$h,tb,Ew,VO,Cw,zO,M0,NE;class PE{constructor(e,t=0,s=0,r=!0){x(this,Aw);x(this,$h);x(this,Ew);x(this,Cw);x(this,M0);x(this,P0,void 0);x(this,N0,void 0);x(this,R0,void 0);x(this,Ea,[]);x(this,br,[]);const i=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:w,y:v,width:b,height:_}of e){const E=Math.floor((w-t)/a)*a,k=Math.ceil((w+b+t)/a)*a,T=Math.floor((v-t)/a)*a,P=Math.ceil((v+_+t)/a)*a,N=[E,T,P,!0],M=[k,T,P,!1];l(this,Ea).push(N,M),Y.rectBoundingBox(E,T,k,P,i)}const c=i[2]-i[0]+2*s,u=i[3]-i[1]+2*s,d=i[0]-s,h=i[1]-s;let f=r?-1/0:1/0,m=1/0;const y=l(this,Ea).at(r?-1:-2),g=[y[0],y[2]];for(const w of l(this,Ea)){const[v,b,_,E]=w;!E&&r?b<m?(m=b,f=v):b===m&&(f=Math.max(f,v)):E&&!r&&(b<m?(m=b,f=v):b===m&&(f=Math.min(f,v))),w[0]=(v-d)/c,w[1]=(b-h)/u,w[2]=(_-h)/u}S(this,P0,new Float32Array([d,h,c,u])),S(this,N0,[f,m]),S(this,R0,g)}getOutlines(){l(this,Ea).sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of l(this,Ea))t[3]?(e.push(...C(this,M0,NE).call(this,t)),C(this,Ew,VO).call(this,t)):(C(this,Cw,zO).call(this,t),e.push(...C(this,M0,NE).call(this,t)));return C(this,Aw,$O).call(this,e)}}P0=new WeakMap,N0=new WeakMap,R0=new WeakMap,Ea=new WeakMap,br=new WeakMap,Aw=new WeakSet,$O=function(e){const t=[],s=new Set;for(const o of e){const[a,c,u]=o;t.push([a,c,o],[a,u,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),s.add(c),s.add(u)}const r=[];let i;for(;s.size>0;){const o=s.values().next().value;let[a,c,u,d,h]=o;s.delete(o);let f=a,m=c;for(i=[a,u],r.push(i);;){let y;if(s.has(d))y=d;else if(s.has(h))y=h;else break;s.delete(y),[a,c,u,d,h]=y,f!==a&&(i.push(f,m,a,m===c?c:u),f=a),m=m===c?u:c}i.push(f,m)}return new JW(r,l(this,P0),l(this,N0),l(this,R0))},$h=new WeakSet,tb=function(e){const t=l(this,br);let s=0,r=t.length-1;for(;s<=r;){const i=s+r>>1,o=t[i][0];if(o===e)return i;o<e?s=i+1:r=i-1}return r+1},Ew=new WeakSet,VO=function([,e,t]){const s=C(this,$h,tb).call(this,e);l(this,br).splice(s,0,[e,t])},Cw=new WeakSet,zO=function([,e,t]){const s=C(this,$h,tb).call(this,e);for(let r=s;r<l(this,br).length;r++){const[i,o]=l(this,br)[r];if(i!==e)break;if(i===e&&o===t){l(this,br).splice(r,1);return}}for(let r=s-1;r>=0;r--){const[i,o]=l(this,br)[r];if(i!==e)break;if(i===e&&o===t){l(this,br).splice(r,1);return}}},M0=new WeakSet,NE=function(e){const[t,s,r]=e,i=[[t,s,r]],o=C(this,$h,tb).call(this,r);for(let a=0;a<o;a++){const[c,u]=l(this,br)[a];for(let d=0,h=i.length;d<h;d++){const[,f,m]=i[d];if(!(u<=f||m<=c)){if(f>=c){if(m>u)i[d][1]=u;else{if(h===1)return[];i.splice(d,1),d--,h--}continue}i[d][2]=c,m>u&&i.push([t,u,m])}}}return i};var j0,Vh;class JW extends Q{constructor(t,s,r,i){super();x(this,j0,void 0);x(this,Vh,void 0);S(this,Vh,t),S(this,j0,s),this.firstPoint=r,this.lastPoint=i}toSVGPath(){const t=[];for(const s of l(this,Vh)){let[r,i]=s;t.push(`M${r} ${i}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===r?(t.push(`V${c}`),i=c):c===i&&(t.push(`H${a}`),r=a)}t.push("Z")}return t.join(" ")}serialize([t,s,r,i],o){const a=[],c=r-t,u=i-s;for(const d of l(this,Vh)){const h=new Array(d.length);for(let f=0;f<d.length;f+=2)h[f]=t+d[f]*c,h[f+1]=i-d[f+1]*u;a.push(h)}return a}get box(){return l(this,j0)}get classNamesForOutlining(){return["highlightOutline"]}}j0=new WeakMap,Vh=new WeakMap;class RE extends tx{newFreeDrawOutline(e,t,s,r,i,o){return new ZW(e,t,s,r,i,o)}}class ZW extends FO{newOutliner(e,t,s,r,i,o=0){return new RE(e,t,s,r,i,o)}}var zh,L0,ro,Bc,D0,Kn,I0,O0,$c,bs,xs,rn,Uh,Hh,bn,Gh,qs,F0,B0,ME,Wh,nb,kw,UO,Tw,HO,Pw,GO,$0,jE,io,xl,Ca,Iu,Nw,WO,qh,sb,Kh,rb,Rw,qO,Mw,KO,jw,XO,Lw,YO,Dw,QO;const Ne=class Ne extends Qe{constructor(t){super({...t,name:"highlightEditor"});x(this,B0);x(this,Wh);x(this,kw);x(this,Tw);x(this,Pw);x(this,$0);x(this,io);x(this,Nw);x(this,qh);x(this,Kh);x(this,Rw);x(this,Mw);x(this,Dw);x(this,zh,null);x(this,L0,0);x(this,ro,void 0);x(this,Bc,null);x(this,D0,null);x(this,Kn,null);x(this,I0,null);x(this,O0,0);x(this,$c,null);x(this,bs,null);x(this,xs,null);x(this,rn,!1);x(this,Uh,null);x(this,Hh,null);x(this,bn,null);x(this,Gh,"");x(this,qs,void 0);x(this,F0,"");this.color=t.color||Ne._defaultColor,S(this,qs,t.thickness||Ne._defaultThickness),this.opacity=t.opacity||Ne._defaultOpacity,S(this,ro,t.boxes||null),S(this,F0,t.methodOfCreation||""),S(this,Gh,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(S(this,rn,!0),C(this,Wh,nb).call(this,t),C(this,io,xl).call(this)):l(this,ro)&&(S(this,zh,t.anchorNode),S(this,L0,t.anchorOffset),S(this,I0,t.focusNode),S(this,O0,t.focusOffset),C(this,B0,ME).call(this),C(this,io,xl).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Ne.prototype;return me(this,"_keyboardManager",new wy([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,rn)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:l(this,qs),methodOfCreation:l(this,F0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,s){var r;Qe.initialize(t,s),Ne._defaultColor||(Ne._defaultColor=((r=s.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,s){switch(t){case _e.HIGHLIGHT_COLOR:Ne._defaultColor=s;break;case _e.HIGHLIGHT_THICKNESS:Ne._defaultThickness=s;break}}translateInPage(t,s){}get toolbarPosition(){return l(this,Hh)}get commentButtonPosition(){return l(this,Uh)}updateParams(t,s){switch(t){case _e.HIGHLIGHT_COLOR:C(this,kw,UO).call(this,s);break;case _e.HIGHLIGHT_THICKNESS:C(this,Tw,HO).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[_e.HIGHLIGHT_COLOR,Ne._defaultColor],[_e.HIGHLIGHT_THICKNESS,Ne._defaultThickness]]}get propertiesToUpdate(){return[[_e.HIGHLIGHT_COLOR,this.color||Ne._defaultColor],[_e.HIGHLIGHT_THICKNESS,l(this,qs)||Ne._defaultThickness],[_e.HIGHLIGHT_FREE,l(this,rn)]]}onUpdatedColor(){var t,s;(t=this.parent)==null||t.drawLayer.updateProperties(l(this,xs),{root:{fill:this.color,"fill-opacity":this.opacity}}),(s=l(this,D0))==null||s.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,D0,new Em({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(C(this,Kh,rb).call(this))}getBaseTranslation(){return[0,0]}getRect(t,s){return super.getRect(t,s,C(this,Kh,rb).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){C(this,$0,jE).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,io,xl).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?C(this,$0,jE).call(this):t&&(C(this,io,xl).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),s&&this.select()}rotate(t){var i,o,a;const{drawLayer:s}=this.parent;let r;l(this,rn)?(t=(t-this.rotation+360)%360,r=C(i=Ne,Ca,Iu).call(i,l(this,bs).box,t)):r=C(o=Ne,Ca,Iu).call(o,[this.x,this.y,this.width,this.height],t),s.updateProperties(l(this,xs),{bbox:r,root:{"data-main-rotation":t}}),s.updateProperties(l(this,bn),{bbox:C(a=Ne,Ca,Iu).call(a,l(this,Kn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();l(this,Gh)&&(t.setAttribute("aria-label",l(this,Gh)),t.setAttribute("role","mark")),l(this,rn)?t.classList.add("free"):this.div.addEventListener("keydown",C(this,Nw,WO).bind(this),{signal:this._uiManager._signal});const s=S(this,$c,document.createElement("div"));return t.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,Bc),this.setDims(this.width,this.height),vI(this,l(this,$c),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,bn),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(l(this,bn),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:C(this,qh,sb).call(this,!0);break;case 1:case 3:C(this,qh,sb).call(this,!1);break}}select(){var t;super.select(),l(this,bn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,bn),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),l(this,bn)&&((t=this.parent)==null||t.drawLayer.updateProperties(l(this,bn),{rootClass:{selected:!1}}),l(this,rn)||C(this,qh,sb).call(this,!1))}get _mustFixPosition(){return!l(this,rn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(l(this,xs),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(l(this,bn),{rootClass:{hidden:!t}}))}static startHighlighting(t,s,{target:r,x:i,y:o}){const{x:a,y:c,width:u,height:d}=r.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),m=y=>{h.abort(),C(this,Lw,YO).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",ht,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Rs,{signal:f}),r.addEventListener("pointermove",C(this,jw,XO).bind(this,t),{signal:f}),this._freeHighlight=new RE({x:i,y:o},[a,c,u,d],t.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,s,r){var g,w,v,b;let i=null;if(t instanceof EO){const{data:{quadPoints:_,rect:E,rotation:k,id:T,color:P,opacity:N,popupRef:M,richText:L,contentsObj:F,creationDate:D,modificationDate:z},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ce.HIGHLIGHT,color:Array.from(P),opacity:N,quadPoints:_,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:k,annotationElementId:T,id:T,deleted:!1,popupRef:M,richText:L,comment:(F==null?void 0:F.str)||null,creationDate:D,modificationDate:z}}else if(t instanceof Jk){const{data:{inkLists:_,rect:E,rotation:k,id:T,color:P,borderStyle:{rawWidth:N},popupRef:M,richText:L,contentsObj:F,creationDate:D,modificationDate:z},parent:{page:{pageNumber:I}}}=t;i=t={annotationType:ce.HIGHLIGHT,color:Array.from(P),thickness:N,inkLists:_,boxes:null,pageIndex:I-1,rect:E.slice(0),rotation:k,annotationElementId:T,id:T,deleted:!1,popupRef:M,richText:L,comment:(F==null?void 0:F.str)||null,creationDate:D,modificationDate:z}}const{color:o,quadPoints:a,inkLists:c,opacity:u}=t,d=await super.deserialize(t,s,r);d.color=Y.makeHexColor(...o),d.opacity=u||1,c&&S(d,qs,t.thickness),d._initialData=i,t.comment&&d.setCommentData(t);const[h,f]=d.pageDimensions,[m,y]=d.pageTranslation;if(a){const _=S(d,ro,[]);for(let E=0;E<a.length;E+=8)_.push({x:(a[E]-m)/h,y:1-(a[E+1]-y)/f,width:(a[E+2]-a[E])/h,height:(a[E+1]-a[E+5])/f});C(g=d,B0,ME).call(g),C(w=d,io,xl).call(w),d.rotate(d.rotation)}else if(c){S(d,rn,!0);const _=c[0],E={x:_[0]-m,y:f-(_[1]-y)},k=new RE(E,[0,0,h,f],1,l(d,qs)/2,!0,.001);for(let N=0,M=_.length;N<M;N+=2)E.x=_[N]-m,E.y=f-(_[N+1]-y),k.add(E);const{id:T,clipPathId:P}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:k.toSVGPath()}},!0,!0);C(v=d,Wh,nb).call(v,{highlightOutlines:k.getOutlines(),highlightId:T,clipPathId:P}),C(b=d,io,xl).call(b),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const s=Qe._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r=super.serialize(t);return Object.assign(r,{color:s,opacity:this.opacity,thickness:l(this,qs),quadPoints:C(this,Rw,qO).call(this),outlines:C(this,Mw,KO).call(this,r.rect)}),this.addComment(r),this.annotationElementId&&!C(this,Dw,QO).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};zh=new WeakMap,L0=new WeakMap,ro=new WeakMap,Bc=new WeakMap,D0=new WeakMap,Kn=new WeakMap,I0=new WeakMap,O0=new WeakMap,$c=new WeakMap,bs=new WeakMap,xs=new WeakMap,rn=new WeakMap,Uh=new WeakMap,Hh=new WeakMap,bn=new WeakMap,Gh=new WeakMap,qs=new WeakMap,F0=new WeakMap,B0=new WeakSet,ME=function(){const t=new PE(l(this,ro),.001);S(this,bs,t.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,bs).box;const s=new PE(l(this,ro),.0025,.001,this._uiManager.direction==="ltr");S(this,Kn,s.getOutlines());const{firstPoint:r}=l(this,bs);S(this,Uh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]);const{lastPoint:i}=l(this,Kn);S(this,Hh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},Wh=new WeakSet,nb=function({highlightOutlines:t,highlightId:s,clipPathId:r}){var f,m;S(this,bs,t);const i=1.5;if(S(this,Kn,t.getNewOutline(l(this,qs)/2+i,.0025)),s>=0)S(this,xs,s),S(this,Bc,r),this.parent.drawLayer.finalizeDraw(s,{bbox:t.box,path:{d:t.toSVGPath()}}),S(this,bn,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Kn).box,path:{d:l(this,Kn).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,xs),{bbox:C(f=Ne,Ca,Iu).call(f,l(this,bs).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,bn),{bbox:C(m=Ne,Ca,Iu).call(m,l(this,Kn).box,y),path:{d:l(this,Kn).toSVGPath()}})}const[o,a,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=u;break;case 90:{const[y,g]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*g/y,this.height=u*y/g;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=u;break;case 270:{const[y,g]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*g/y,this.height=u*y/g;break}}const{firstPoint:d}=t;S(this,Uh,[(d[0]-o)/c,(d[1]-a)/u]);const{lastPoint:h}=l(this,Kn);S(this,Hh,[(h[0]-o)/c,(h[1]-a)/u])},kw=new WeakSet,UO=function(t){const s=(o,a)=>{this.color=o,this.opacity=a,this.onUpdatedColor()},r=this.color,i=this.opacity;this.addCommands({cmd:s.bind(this,t,Ne._defaultOpacity),undo:s.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},Tw=new WeakSet,HO=function(t){const s=l(this,qs),r=i=>{S(this,qs,i),C(this,Pw,GO).call(this,i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:_e.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},Pw=new WeakSet,GO=function(t){l(this,rn)&&(C(this,Wh,nb).call(this,{highlightOutlines:l(this,bs).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},$0=new WeakSet,jE=function(){l(this,xs)===null||!this.parent||(this.parent.drawLayer.remove(l(this,xs)),S(this,xs,null),this.parent.drawLayer.remove(l(this,bn)),S(this,bn,null))},io=new WeakSet,xl=function(t=this.parent){l(this,xs)===null&&({id:jt(this,xs)._,clipPathId:jt(this,Bc)._}=t.drawLayer.draw({bbox:l(this,bs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:l(this,rn)},path:{d:l(this,bs).toSVGPath()}},!1,!0),S(this,bn,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,rn)},bbox:l(this,Kn).box,path:{d:l(this,Kn).toSVGPath()}},l(this,rn))),l(this,$c)&&(l(this,$c).style.clipPath=l(this,Bc)))},Ca=new WeakSet,Iu=function([t,s,r,i],o){switch(o){case 90:return[1-s-i,t,i,r];case 180:return[1-t-r,1-s-i,r,i];case 270:return[s,1-t-r,i,r]}return[t,s,r,i]},Nw=new WeakSet,WO=function(t){Ne._keyboardManager.exec(this,t)},qh=new WeakSet,sb=function(t){if(!l(this,zh))return;const s=window.getSelection();t?s.setPosition(l(this,zh),l(this,L0)):s.setPosition(l(this,I0),l(this,O0))},Kh=new WeakSet,rb=function(){return l(this,rn)?this.rotation:0},Rw=new WeakSet,qO=function(){if(l(this,rn))return null;const[t,s]=this.pageDimensions,[r,i]=this.pageTranslation,o=l(this,ro),a=new Float32Array(o.length*8);let c=0;for(const{x:u,y:d,width:h,height:f}of o){const m=u*t+r,y=(1-d)*s+i;a[c]=a[c+4]=m,a[c+1]=a[c+3]=y,a[c+2]=a[c+6]=m+h*t,a[c+5]=a[c+7]=y-f*s,c+=8}return a},Mw=new WeakSet,KO=function(t){return l(this,bs).serialize(t,C(this,Kh,rb).call(this))},jw=new WeakSet,XO=function(t,s){this._freeHighlight.add(s)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Lw=new WeakSet,YO=function(t,s){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Dw=new WeakSet,QO=function(t){const{color:s}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==s[i])},x(Ne,Ca),x(Ne,jw),x(Ne,Lw),U(Ne,"_defaultColor",null),U(Ne,"_defaultOpacity",1),U(Ne,"_defaultThickness",12),U(Ne,"_type","highlight"),U(Ne,"_editorType",ce.HIGHLIGHT),U(Ne,"_freeHighlightId",-1),U(Ne,"_freeHighlight",null),U(Ne,"_freeHighlightClipId","");let nx=Ne;var Vc;class JO{constructor(){x(this,Vc,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){l(this,Vc)[e]=t}toSVGProperties(){const e=l(this,Vc);return S(this,Vc,Object.create(null)),{root:e}}reset(){S(this,Vc,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){We("Not implemented")}}Vc=new WeakMap;var ws,Xh,Ht,zc,Uc,ka,Ta,Pa,Hc,V0,LE,z0,DE,U0,IE,Gc,Pp,Iw,ZO,Yh,ib,Wc,Np,Na,Ou;const ee=class ee extends Qe{constructor(t){super(t);x(this,V0);x(this,z0);x(this,U0);x(this,Gc);x(this,Iw);x(this,Yh);x(this,Wc);x(this,Na);x(this,ws,null);x(this,Xh,void 0);U(this,"_colorPicker",null);U(this,"_drawId",null);S(this,Xh,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(C(this,V0,LE).call(this,t),C(this,Gc,Pp).call(this))}static _mergeSVGProperties(t,s){const r=new Set(Object.keys(t));for(const[i,o]of Object.entries(s))r.has(i)?Object.assign(t[i],o):t[i]=o;return t}static getDefaultDrawingOptions(t){We("Not implemented")}static get typesMap(){We("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,s){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,s),this._currentParent&&(l(ee,Ht).updateProperty(r,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,s){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,s)}static get defaultPropertiesToUpdate(){const t=[],s=this._defaultDrawingOptions;for(const[r,i]of this.typesMap)t.push([r,s[i]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:s}=this;for(const[r,i]of this.constructor.typesMap)t.push([r,s[i]]);return t}_updateProperty(t,s,r){const i=this._drawingOptions,o=i[s],a=c=>{var d;i.updateProperty(s,c);const u=l(this,ws).updateProperty(s,c);u&&C(this,Wc,Np).call(this,u),(d=this.parent)==null||d.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,r),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(l(this,ws).getPathResizingSVGProperties(C(this,Yh,ib).call(this)),{bbox:C(this,Na,Ou).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(l(this,ws).getPathResizedSVGProperties(C(this,Yh,ib).call(this)),{bbox:C(this,Na,Ou).call(this)}))}_onTranslating(t,s){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:C(this,Na,Ou).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties(l(this,ws).getPathTranslatedSVGProperties(C(this,Yh,ib).call(this),this.parentDimensions),{bbox:C(this,Na,Ou).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,Xh)&&(S(this,Xh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){C(this,U0,IE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(C(this,Gc,Pp).call(this),C(this,Wc,Np).call(this,l(this,ws).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let s=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),C(this,U0,IE).call(this)):t&&(this._uiManager.addShouldRescale(this),C(this,Gc,Pp).call(this,t),s=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ee._mergeSVGProperties({bbox:C(this,Na,Ou).call(this)},l(this,ws).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&C(this,Wc,Np).call(this,l(this,ws).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,s;this._isCopy&&(t=this.x,s=this.y);const r=super.render();r.classList.add("draw");const i=document.createElement("div");return r.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,s),r}static createDrawerInstance(t,s,r,i,o){We("Not implemented")}static startDrawing(t,s,r,i){var w;const{target:o,offsetX:a,offsetY:c,pointerId:u,pointerType:d}=i;if(l(ee,Ta)&&l(ee,Ta)!==d)return;const{viewport:{rotation:h}}=t,{width:f,height:m}=o.getBoundingClientRect(),y=S(ee,zc,new AbortController),g=t.combinedSignal(y);if(l(ee,ka)||S(ee,ka,u),l(ee,Ta)??S(ee,Ta,d),window.addEventListener("pointerup",v=>{var b;l(ee,ka)===v.pointerId?this._endDraw(v):(b=l(ee,Pa))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointercancel",v=>{var b;l(ee,ka)===v.pointerId?this._currentParent.endDrawingSession():(b=l(ee,Pa))==null||b.delete(v.pointerId)},{signal:g}),window.addEventListener("pointerdown",v=>{l(ee,Ta)===v.pointerType&&((l(ee,Pa)||S(ee,Pa,new Set)).add(v.pointerId),l(ee,Ht).isCancellable()&&(l(ee,Ht).removeLastElement(),l(ee,Ht).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Rs,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",v=>{v.timeStamp===l(ee,Hc)&&ht(v)},{signal:g}),t.toggleDrawing(),(w=s._editorUndoBar)==null||w.hide(),l(ee,Ht)){t.drawLayer.updateProperties(this._currentDrawId,l(ee,Ht).startNew(a,c,f,m,h));return}s.updateUIForDefaultProperties(this),S(ee,Ht,this.createDrawerInstance(a,c,f,m,h)),S(ee,Uc,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(l(ee,Uc).toSVGProperties(),l(ee,Ht).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(S(ee,Hc,-1),!l(ee,Ht))return;const{offsetX:s,offsetY:r,pointerId:i}=t;if(l(ee,ka)===i){if(((o=l(ee,Pa))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ee,Ht).add(s,r)),S(ee,Hc,t.timeStamp),ht(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,S(ee,Ht,null),S(ee,Uc,null),S(ee,Ta,null),S(ee,Hc,NaN)),l(ee,zc)&&(l(ee,zc).abort(),S(ee,zc,null),S(ee,ka,NaN),S(ee,Pa,null))}static _endDraw(t){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,l(ee,Ht).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=l(ee,Ht),i=this._currentDrawId,o=r.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(i,r.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(i,r.removeLastElement())},mustExec:!1,type:_e.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(_e.DRAW_STEP),!l(ee,Ht).isEmpty()){const{pageDimensions:[r,i],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ee,Ht).getOutlines(r*o,i*o,o,this._INNER_MARGIN),drawingOptions:l(ee,Uc),mustBeCommitted:!t});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,s,r,i,o,a){We("Not implemented")}static async deserialize(t,s,r){var h,f;const{rawDims:{pageWidth:i,pageHeight:o,pageX:a,pageY:c}}=s.viewport,u=this.deserializeDraw(a,c,i,o,this._INNER_MARGIN,t),d=await super.deserialize(t,s,r);return d.createDrawingOptions(t),C(h=d,V0,LE).call(h,{drawOutlines:u}),C(f=d,Gc,Pp).call(f),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[s,r]=this.pageTranslation,[i,o]=this.pageDimensions;return l(this,ws).serialize([s,r,i,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};ws=new WeakMap,Xh=new WeakMap,Ht=new WeakMap,zc=new WeakMap,Uc=new WeakMap,ka=new WeakMap,Ta=new WeakMap,Pa=new WeakMap,Hc=new WeakMap,V0=new WeakSet,LE=function({drawOutlines:t,drawId:s,drawingOptions:r}){S(this,ws,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,t.defaultProperties)):this._drawId=C(this,z0,DE).call(this,t,this.parent),C(this,Wc,Np).call(this,t.box)},z0=new WeakSet,DE=function(t,s){const{id:r}=s.drawLayer.draw(ee._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},U0=new WeakSet,IE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Gc=new WeakSet,Pp=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=C(this,z0,DE).call(this,l(this,ws),t)}},Iw=new WeakSet,ZO=function([t,s,r,i]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[s,1-t,r*(a/o),i*(o/a)];case 180:return[1-t,1-s,r,i];case 270:return[1-s,t,r*(a/o),i*(o/a)];default:return[t,s,r,i]}},Yh=new WeakSet,ib=function(){const{x:t,y:s,width:r,height:i,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-s,t,r*(o/a),i*(a/o)];case 180:return[1-t,1-s,r,i];case 270:return[s,1-t,r*(o/a),i*(a/o)];default:return[t,s,r,i]}},Wc=new WeakSet,Np=function(t){[this.x,this.y,this.width,this.height]=C(this,Iw,ZO).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Na=new WeakSet,Ou=function(){const{x:t,y:s,width:r,height:i,rotation:o,parentRotation:a,parentDimensions:[c,u]}=this;switch((o*4+a)/90){case 1:return[1-s-i,t,i,r];case 2:return[1-t-r,1-s-i,r,i];case 3:return[s,1-t-r,i,r];case 4:return[t,s-r*(c/u),i*(u/c),r*(c/u)];case 5:return[1-s,t,r*(c/u),i*(u/c)];case 6:return[1-t-i*(u/c),1-s,i*(u/c),r*(c/u)];case 7:return[s-r*(c/u),1-t-i*(u/c),r*(c/u),i*(u/c)];case 8:return[t-r,s-i,r,i];case 9:return[1-s,t-r,i,r];case 10:return[1-t,1-s,r,i];case 11:return[s-i,1-t,i,r];case 12:return[t-i*(u/c),s,i*(u/c),r*(c/u)];case 13:return[1-s-r*(c/u),t-i*(u/c),r*(c/u),i*(u/c)];case 14:return[1-t,1-s-r*(c/u),i*(u/c),r*(c/u)];case 15:return[s,1-t,r*(c/u),i*(u/c)];default:return[t,s,r,i]}},U(ee,"_currentDrawId",-1),U(ee,"_currentParent",null),x(ee,Ht,null),x(ee,zc,null),x(ee,Uc,null),x(ee,ka,NaN),x(ee,Ta,null),x(ee,Pa,null),x(ee,Hc,NaN),U(ee,"_INNER_MARGIN",3);let sx=ee;var ai,Gt,Wt,qc,Qh,Pn,on,Ks,Kc,Xc,Yc,Jh,ob;class eq{constructor(e,t,s,r,i,o){x(this,Jh);x(this,ai,new Float64Array(6));x(this,Gt,void 0);x(this,Wt,void 0);x(this,qc,void 0);x(this,Qh,void 0);x(this,Pn,void 0);x(this,on,"");x(this,Ks,0);x(this,Kc,new _y);x(this,Xc,void 0);x(this,Yc,void 0);S(this,Xc,s),S(this,Yc,r),S(this,qc,i),S(this,Qh,o),[e,t]=C(this,Jh,ob).call(this,e,t);const a=S(this,Gt,[NaN,NaN,NaN,NaN,e,t]);S(this,Pn,[e,t]),S(this,Wt,[{line:a,points:l(this,Pn)}]),l(this,ai).set(a,0)}updateProperty(e,t){e==="stroke-width"&&S(this,Qh,t)}isEmpty(){return!l(this,Wt)||l(this,Wt).length===0}isCancellable(){return l(this,Pn).length<=10}add(e,t){[e,t]=C(this,Jh,ob).call(this,e,t);const[s,r,i,o]=l(this,ai).subarray(2,6),a=e-i,c=t-o;return Math.hypot(l(this,Xc)*a,l(this,Yc)*c)<=2?null:(l(this,Pn).push(e,t),isNaN(s)?(l(this,ai).set([i,o,e,t],2),l(this,Gt).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(l(this,ai)[0])&&l(this,Gt).splice(6,6),l(this,ai).set([s,r,i,o,e,t],0),l(this,Gt).push(...Q.createBezierPoints(s,r,i,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(l(this,Pn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,r,i){S(this,Xc,s),S(this,Yc,r),S(this,qc,i),[e,t]=C(this,Jh,ob).call(this,e,t);const o=S(this,Gt,[NaN,NaN,NaN,NaN,e,t]);S(this,Pn,[e,t]);const a=l(this,Wt).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,Wt).push({line:o,points:l(this,Pn)}),l(this,ai).set(o,0),S(this,Ks,0),this.toSVGPath(),null}getLastElement(){return l(this,Wt).at(-1)}setLastElement(e){return l(this,Wt)?(l(this,Wt).push(e),S(this,Gt,e.line),S(this,Pn,e.points),S(this,Ks,0),{path:{d:this.toSVGPath()}}):l(this,Kc).setLastElement(e)}removeLastElement(){if(!l(this,Wt))return l(this,Kc).removeLastElement();l(this,Wt).pop(),S(this,on,"");for(let e=0,t=l(this,Wt).length;e<t;e++){const{line:s,points:r}=l(this,Wt)[e];S(this,Gt,s),S(this,Pn,r),S(this,Ks,0),this.toSVGPath()}return{path:{d:l(this,on)}}}toSVGPath(){const e=Q.svgRound(l(this,Gt)[4]),t=Q.svgRound(l(this,Gt)[5]);if(l(this,Pn).length===2)return S(this,on,`${l(this,on)} M ${e} ${t} Z`),l(this,on);if(l(this,Pn).length<=6){const r=l(this,on).lastIndexOf("M");S(this,on,`${l(this,on).slice(0,r)} M ${e} ${t}`),S(this,Ks,6)}if(l(this,Pn).length===4){const r=Q.svgRound(l(this,Gt)[10]),i=Q.svgRound(l(this,Gt)[11]);return S(this,on,`${l(this,on)} L ${r} ${i}`),S(this,Ks,12),l(this,on)}const s=[];l(this,Ks)===0&&(s.push(`M ${e} ${t}`),S(this,Ks,6));for(let r=l(this,Ks),i=l(this,Gt).length;r<i;r+=6){const[o,a,c,u,d,h]=l(this,Gt).slice(r,r+6).map(Q.svgRound);s.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}return S(this,on,l(this,on)+s.join(" ")),S(this,Ks,l(this,Gt).length),l(this,on)}getOutlines(e,t,s,r){const i=l(this,Wt).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),l(this,Kc).build(l(this,Wt),e,t,s,l(this,qc),l(this,Qh),r),S(this,ai,null),S(this,Gt,null),S(this,Wt,null),S(this,on,null),l(this,Kc)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}ai=new WeakMap,Gt=new WeakMap,Wt=new WeakMap,qc=new WeakMap,Qh=new WeakMap,Pn=new WeakMap,on=new WeakMap,Ks=new WeakMap,Kc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,Jh=new WeakSet,ob=function(e,t){return Q._normalizePoint(e,t,l(this,Xc),l(this,Yc),l(this,qc))};var Nn,H0,G0,Ss,li,ci,Zh,ef,Qc,xr,Si,Ow,eF,Fw,tF,Bw,nF;class _y extends Q{constructor(){super(...arguments);x(this,xr);x(this,Ow);x(this,Fw);x(this,Bw);x(this,Nn,void 0);x(this,H0,0);x(this,G0,void 0);x(this,Ss,void 0);x(this,li,void 0);x(this,ci,void 0);x(this,Zh,void 0);x(this,ef,void 0);x(this,Qc,void 0)}build(t,s,r,i,o,a,c){S(this,li,s),S(this,ci,r),S(this,Zh,i),S(this,ef,o),S(this,Qc,a),S(this,G0,c??0),S(this,Ss,t),C(this,Fw,tF).call(this)}get thickness(){return l(this,Qc)}setLastElement(t){return l(this,Ss).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,Ss).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:s}of l(this,Ss)){if(t.push(`M${Q.svgRound(s[4])} ${Q.svgRound(s[5])}`),s.length===6){t.push("Z");continue}if(s.length===12&&isNaN(s[6])){t.push(`L${Q.svgRound(s[10])} ${Q.svgRound(s[11])}`);continue}for(let r=6,i=s.length;r<i;r+=6){const[o,a,c,u,d,h]=s.subarray(r,r+6).map(Q.svgRound);t.push(`C${o} ${a} ${c} ${u} ${d} ${h}`)}}return t.join("")}serialize([t,s,r,i],o){const a=[],c=[],[u,d,h,f]=C(this,Ow,eF).call(this);let m,y,g,w,v,b,_,E,k;switch(l(this,ef)){case 0:k=Q._rescale,m=t,y=s+i,g=r,w=-i,v=t+u*r,b=s+(1-d-f)*i,_=t+(u+h)*r,E=s+(1-d)*i;break;case 90:k=Q._rescaleAndSwap,m=t,y=s,g=r,w=i,v=t+d*r,b=s+u*i,_=t+(d+f)*r,E=s+(u+h)*i;break;case 180:k=Q._rescale,m=t+r,y=s,g=-r,w=i,v=t+(1-u-h)*r,b=s+d*i,_=t+(1-u)*r,E=s+(d+f)*i;break;case 270:k=Q._rescaleAndSwap,m=t+r,y=s+i,g=-r,w=-i,v=t+(1-d-f)*r,b=s+(1-u-h)*i,_=t+(1-d)*r,E=s+(1-u)*i;break}for(const{line:T,points:P}of l(this,Ss))a.push(k(T,m,y,g,w,o?new Array(T.length):null)),c.push(k(P,m,y,g,w,o?new Array(P.length):null));return{lines:a,points:c,rect:[v,b,_,E]}}static deserialize(t,s,r,i,o,{paths:{lines:a,points:c},rotation:u,thickness:d}){const h=[];let f,m,y,g,w;switch(u){case 0:w=Q._rescale,f=-t/r,m=s/i+1,y=1/r,g=-1/i;break;case 90:w=Q._rescaleAndSwap,f=-s/i,m=-t/r,y=1/i,g=1/r;break;case 180:w=Q._rescale,f=t/r+1,m=-s/i,y=-1/r,g=1/i;break;case 270:w=Q._rescaleAndSwap,f=s/i+1,m=t/r+1,y=-1/i,g=-1/r;break}if(!a){a=[];for(const b of c){const _=b.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(_-2));a.push(E);let[k,T,P,N]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,k,T],0);for(let M=4;M<_;M+=2){const L=b[M],F=b[M+1];E.set(Q.createBezierPoints(k,T,P,N,L,F),(M-2)*3),[k,T,P,N]=[P,N,L,F]}}}for(let b=0,_=a.length;b<_;b++)h.push({line:w(a[b].map(E=>E??NaN),f,m,y,g),points:w(c[b].map(E=>E??NaN),f,m,y,g)});const v=new this.prototype.constructor;return v.build(h,r,i,1,u,d,o),v}get box(){return l(this,Nn)}updateProperty(t,s){return t==="stroke-width"?C(this,Bw,nF).call(this,s):null}updateParentDimensions([t,s],r){const[i,o]=C(this,xr,Si).call(this);S(this,li,t),S(this,ci,s),S(this,Zh,r);const[a,c]=C(this,xr,Si).call(this),u=a-i,d=c-o,h=l(this,Nn);return h[0]-=u,h[1]-=d,h[2]+=2*u,h[3]+=2*d,h}updateRotation(t){return S(this,H0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,Nn).map(Q.svgRound).join(" ")}get defaultProperties(){const[t,s]=l(this,Nn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Q.svgRound(t)} ${Q.svgRound(s)}`}}}get rotationTransform(){const[,,t,s]=l(this,Nn);let r=0,i=0,o=0,a=0,c=0,u=0;switch(l(this,H0)){case 90:i=s/t,o=-t/s,c=t;break;case 180:r=-1,a=-1,c=t,u=s;break;case 270:i=-s/t,o=t/s,u=s;break;default:return""}return`matrix(${r} ${i} ${o} ${a} ${Q.svgRound(c)} ${Q.svgRound(u)})`}getPathResizingSVGProperties([t,s,r,i]){const[o,a]=C(this,xr,Si).call(this),[c,u,d,h]=l(this,Nn);if(Math.abs(d-o)<=Q.PRECISION||Math.abs(h-a)<=Q.PRECISION){const w=t+r/2-(c+d/2),v=s+i/2-(u+h/2);return{path:{"transform-origin":`${Q.svgRound(t)} ${Q.svgRound(s)}`,transform:`${this.rotationTransform} translate(${w} ${v})`}}}const f=(r-2*o)/(d-2*o),m=(i-2*a)/(h-2*a),y=d/r,g=h/i;return{path:{"transform-origin":`${Q.svgRound(c)} ${Q.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${g}) translate(${Q.svgRound(o)} ${Q.svgRound(a)}) scale(${f} ${m}) translate(${Q.svgRound(-o)} ${Q.svgRound(-a)})`}}}getPathResizedSVGProperties([t,s,r,i]){const[o,a]=C(this,xr,Si).call(this),c=l(this,Nn),[u,d,h,f]=c;if(c[0]=t,c[1]=s,c[2]=r,c[3]=i,Math.abs(h-o)<=Q.PRECISION||Math.abs(f-a)<=Q.PRECISION){const v=t+r/2-(u+h/2),b=s+i/2-(d+f/2);for(const{line:_,points:E}of l(this,Ss))Q._translate(_,v,b,_),Q._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Q.svgRound(t)} ${Q.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(r-2*o)/(h-2*o),y=(i-2*a)/(f-2*a),g=-m*(u+o)+t+o,w=-y*(d+a)+s+a;if(m!==1||y!==1||g!==0||w!==0)for(const{line:v,points:b}of l(this,Ss))Q._rescale(v,g,w,m,y,v),Q._rescale(b,g,w,m,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Q.svgRound(t)} ${Q.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,s],r){const[i,o]=r,a=l(this,Nn),c=t-a[0],u=s-a[1];if(l(this,li)===i&&l(this,ci)===o)for(const{line:d,points:h}of l(this,Ss))Q._translate(d,c,u,d),Q._translate(h,c,u,h);else{const d=l(this,li)/i,h=l(this,ci)/o;S(this,li,i),S(this,ci,o);for(const{line:f,points:m}of l(this,Ss))Q._rescale(f,c,u,d,h,f),Q._rescale(m,c,u,d,h,m);a[2]*=d,a[3]*=h}return a[0]=t,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Q.svgRound(t)} ${Q.svgRound(s)}`}}}get defaultSVGProperties(){const t=l(this,Nn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Q.svgRound(t[0])} ${Q.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Nn=new WeakMap,H0=new WeakMap,G0=new WeakMap,Ss=new WeakMap,li=new WeakMap,ci=new WeakMap,Zh=new WeakMap,ef=new WeakMap,Qc=new WeakMap,xr=new WeakSet,Si=function(t=l(this,Qc)){const s=l(this,G0)+t/2*l(this,Zh);return l(this,ef)%180===0?[s/l(this,li),s/l(this,ci)]:[s/l(this,ci),s/l(this,li)]},Ow=new WeakSet,eF=function(){const[t,s,r,i]=l(this,Nn),[o,a]=C(this,xr,Si).call(this,0);return[t+o,s+a,r-2*o,i-2*a]},Fw=new WeakSet,tF=function(){const t=S(this,Nn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:i}of l(this,Ss)){if(i.length<=12){for(let c=4,u=i.length;c<u;c+=6)Y.pointBoundingBox(i[c],i[c+1],t);continue}let o=i[4],a=i[5];for(let c=6,u=i.length;c<u;c+=6){const[d,h,f,m,y,g]=i.subarray(c,c+6);Y.bezierBoundingBox(o,a,d,h,f,m,y,g,t),o=y,a=g}}const[s,r]=C(this,xr,Si).call(this);t[0]=wn(t[0]-s,0,1),t[1]=wn(t[1]-r,0,1),t[2]=wn(t[2]+s,0,1),t[3]=wn(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]},Bw=new WeakSet,nF=function(t){const[s,r]=C(this,xr,Si).call(this);S(this,Qc,t);const[i,o]=C(this,xr,Si).call(this),[a,c]=[i-s,o-r],u=l(this,Nn);return u[0]-=a,u[1]-=c,u[2]+=2*a,u[3]+=2*c,u};class B1 extends JO{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Qe._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new B1(this._viewParameters);return e.updateAll(this),e}}var $w,sF;const rd=class rd extends sx{constructor(t){super({...t,name:"inkEditor"});x(this,$w);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,s){Qe.initialize(t,s),this._defaultDrawingOptions=new B1(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return me(this,"typesMap",new Map([[_e.INK_THICKNESS,"stroke-width"],[_e.INK_COLOR,"stroke"],[_e.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,s,r,i,o){return new eq(t,s,r,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,s,r,i,o,a){return _y.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){let i=null;if(t instanceof Jk){const{data:{inkLists:a,rect:c,rotation:u,id:d,color:h,opacity:f,borderStyle:{rawWidth:m},popupRef:y,richText:g,contentsObj:w,creationDate:v,modificationDate:b},parent:{page:{pageNumber:_}}}=t;i=t={annotationType:ce.INK,color:Array.from(h),thickness:m,opacity:f,paths:{points:a},boxes:null,pageIndex:_-1,rect:c.slice(0),rotation:u,annotationElementId:d,id:d,deleted:!1,popupRef:y,richText:g,comment:(w==null?void 0:w.str)||null,creationDate:v,modificationDate:b}}const o=await super.deserialize(t,s,r);return o._initialData=i,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new ex(this)),[["colorPicker",this._colorPicker]]}get colorType(){return _e.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:s,parent:r}=this;s.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:s,opacity:r}){this._drawingOptions=rd.getDefaultDrawingOptions({stroke:Y.makeHexColor(...t),"stroke-width":s,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":a}}=this,c=Object.assign(super.serialize(t),{color:Qe._colorManager.convert(i),opacity:o,thickness:a,paths:{lines:s,points:r}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!C(this,$w,sF).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:s,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:s,popup:this.comment}),null}};$w=new WeakSet,sF=function(t){const{color:s,thickness:r,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((a,c)=>a!==s[c])||t.thickness!==r||t.opacity!==i||t.pageIndex!==o},U(rd,"_type","ink"),U(rd,"_editorType",ce.INK),U(rd,"_defaultDrawingOptions",null);let OE=rd;class FE extends _y{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const pv=8,sp=3;var Jc,W0,BE,wr,Vw,rF,zw,iF,q0,$E,tf,ab,Uw,oF,Hw,aF,Gw,lF,K0,VE,X0,zE,Ww,cF;class Rt{static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:r},i,o,a,c){let u=new OffscreenCanvas(1,1),d=u.getContext("2d",{alpha:!1});const h=200,f=d.font=`${s} ${r} ${h}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:g,actualBoundingBoxDescent:w,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:_}=d.measureText(e),E=1.5,k=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,_)*E),T=Math.ceil(Math.max(Math.abs(g)+Math.abs(w)||h,Math.abs(v)+Math.abs(b)||h)*E);u=new OffscreenCanvas(k,T),d=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=f,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,k,T),d.fillStyle="black",d.fillText(e,k*(E-1)/2,T*(3-E)/2);const P=C(this,K0,VE).call(this,d.getImageData(0,0,k,T).data),N=C(this,Gw,lF).call(this,P),M=C(this,X0,zE).call(this,N),L=C(this,q0,$E).call(this,P,k,T,M);return this.processDrawnLines({lines:{curves:L,width:k,height:T},pageWidth:i,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,s,r,i){const[o,a,c]=C(this,Ww,cF).call(this,e),[u,d]=C(this,Hw,aF).call(this,o,a,c,Math.hypot(a,c)*l(this,Jc).sigmaSFactor,l(this,Jc).sigmaR,l(this,Jc).kernelSize),h=C(this,X0,zE).call(this,d),f=C(this,q0,$E).call(this,u,a,c,h);return this.processDrawnLines({lines:{curves:f,width:a,height:c},pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:r,innerMargin:i,mustSmooth:o,areContours:a}){r%180!==0&&([t,s]=[s,t]);const{curves:c,width:u,height:d}=e,h=e.thickness??0,f=[],m=Math.min(t/u,s/d),y=m/t,g=m/s,w=[];for(const{points:b}of c){const _=o?C(this,Uw,oF).call(this,b):b;if(!_)continue;w.push(_);const E=_.length,k=new Float32Array(E),T=new Float32Array(3*(E===2?2:E-2));if(f.push({line:T,points:k}),E===2){k[0]=_[0]*y,k[1]=_[1]*g,T.set([NaN,NaN,NaN,NaN,k[0],k[1]],0);continue}let[P,N,M,L]=_;P*=y,N*=g,M*=y,L*=g,k.set([P,N,M,L],0),T.set([NaN,NaN,NaN,NaN,P,N],0);for(let F=4;F<E;F+=2){const D=k[F]=_[F]*y,z=k[F+1]=_[F+1]*g;T.set(Q.createBezierPoints(P,N,M,L,D,z),(F-2)*3),[P,N,M,L]=[M,L,D,z]}}if(f.length===0)return null;const v=a?new FE:new _y;return v.build(f,t,s,1,r,a?0:h,i),{outline:v,newCurves:w,areContours:a,thickness:h,width:u,height:d}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:r,height:i}){let o=1/0,a=-1/0,c=0;for(const _ of e){c+=_.length;for(let E=2,k=_.length;E<k;E++){const T=_[E]-_[E-2];o=Math.min(o,T),a=Math.max(a,T)}}let u;o>=-128&&a<=127?u=Int8Array:o>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const d=e.length,h=pv+sp*d,f=new Uint32Array(h);let m=0;f[m++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=r,f[m++]=i,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(s??0)),f[m++]=d,f[m++]=u.BYTES_PER_ELEMENT;for(const _ of e)f[m++]=_.length-2,f[m++]=_[0],f[m++]=_[1];const y=new CompressionStream("deflate-raw"),g=y.writable.getWriter();await g.ready,g.write(f);const w=u.prototype.constructor;for(const _ of e){const E=new w(_.length-2);for(let k=2,T=_.length;k<T;k++)E[k-2]=_[k]-_[k-2];g.write(E)}g.close();const v=await new Response(y.readable).arrayBuffer(),b=new Uint8Array(v);return oI(b)}static async decompressSignature(e){try{const t=EG(e),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),i=r.getWriter();await i.ready,i.write(t).then(async()=>{await i.ready,await i.close()}).catch(()=>{});let o=null,a=0;for await(const _ of s)o||(o=new Uint8Array(new Uint32Array(_.buffer,0,4)[0])),o.set(_,a),a+=_.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const d=c[2],h=c[3],f=c[4]===0,m=c[5],y=c[6],g=c[7],w=[],v=(pv+sp*y)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(g){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,v);break}a=0;for(let _=0;_<y;_++){const E=c[sp*_+pv],k=new Float32Array(E+2);w.push(k);for(let T=0;T<sp-1;T++)k[T]=c[sp*_+pv+T+1];for(let T=0;T<E;T++)k[T+2]=k[T]+b[a++]}return{areContours:f,thickness:m,outlines:w,width:d,height:h}}catch(t){return ue(`decompressSignature: ${t}`),null}}}Jc=new WeakMap,W0=new WeakSet,BE=function(e,t,s,r){return s-=e,r-=t,s===0?r>0?0:4:s===1?r+6:2-r},wr=new WeakMap,Vw=new WeakSet,rF=function(e,t,s,r,i,o,a){const c=C(this,W0,BE).call(this,s,r,i,o);for(let u=0;u<8;u++){const d=(-u+c-a+16)%8,h=l(this,wr)[2*d],f=l(this,wr)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},zw=new WeakSet,iF=function(e,t,s,r,i,o,a){const c=C(this,W0,BE).call(this,s,r,i,o);for(let u=0;u<8;u++){const d=(u+c+a+16)%8,h=l(this,wr)[2*d],f=l(this,wr)[2*d+1];if(e[(s+h)*t+(r+f)]!==0)return d}return-1},q0=new WeakSet,$E=function(e,t,s,r){const i=e.length,o=new Int32Array(i);for(let d=0;d<i;d++)o[d]=e[d]<=r?1:0;for(let d=1;d<s-1;d++)o[d*t]=o[d*t+t-1]=0;for(let d=0;d<t;d++)o[d]=o[t*s-1-d]=0;let a=1,c;const u=[];for(let d=1;d<s-1;d++){c=1;for(let h=1;h<t-1;h++){const f=d*t+h,m=o[f];if(m===0)continue;let y=d,g=h;if(m===1&&o[f-1]===0)a+=1,g-=1;else if(m>=1&&o[f+1]===0)a+=1,g+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const w=[h,d],v=g===h+1,b={isHole:v,points:w,id:a,parent:0};u.push(b);let _;for(const F of u)if(F.id===c){_=F;break}_?_.isHole?b.parent=v?_.parent:c:b.parent=v?c:_.parent:b.parent=v?c:0;const E=C(this,Vw,rF).call(this,o,t,d,h,y,g,0);if(E===-1){o[f]=-a,o[f]!==1&&(c=Math.abs(o[f]));continue}let k=l(this,wr)[2*E],T=l(this,wr)[2*E+1];const P=d+k,N=h+T;y=P,g=N;let M=d,L=h;for(;;){const F=C(this,zw,iF).call(this,o,t,M,L,y,g,1);k=l(this,wr)[2*F],T=l(this,wr)[2*F+1];const D=M+k,z=L+T;w.push(z,D);const I=M*t+L;if(o[I+1]===0?o[I]=-a:o[I]===1&&(o[I]=a),D===d&&z===h&&M===P&&L===N){o[f]!==1&&(c=Math.abs(o[f]));break}else y=M,g=L,M=D,L=z}}}return u},tf=new WeakSet,ab=function(e,t,s,r){if(s-t<=4){for(let P=t;P<s-2;P+=2)r.push(e[P],e[P+1]);return}const i=e[t],o=e[t+1],a=e[s-4]-i,c=e[s-3]-o,u=Math.hypot(a,c),d=a/u,h=c/u,f=d*o-h*i,m=c/a,y=1/u,g=Math.atan(m),w=Math.cos(g),v=Math.sin(g),b=y*(Math.abs(w)+Math.abs(v)),_=y*(1-b+b**2),E=Math.max(Math.atan(Math.abs(v+w)*_),Math.atan(Math.abs(v-w)*_));let k=0,T=t;for(let P=t+2;P<s-2;P+=2){const N=Math.abs(f-d*e[P+1]+h*e[P]);N>k&&(T=P,k=N)}k>(u*E)**2?(C(this,tf,ab).call(this,e,t,T+2,r),C(this,tf,ab).call(this,e,T,s,r)):r.push(i,o)},Uw=new WeakSet,oF=function(e){const t=[],s=e.length;return C(this,tf,ab).call(this,e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t},Hw=new WeakSet,aF=function(e,t,s,r,i,o){const a=new Float32Array(o**2),c=-2*r**2,u=o>>1;for(let g=0;g<o;g++){const w=(g-u)**2;for(let v=0;v<o;v++)a[g*o+v]=Math.exp((w+(v-u)**2)/c)}const d=new Float32Array(256),h=-2*i**2;for(let g=0;g<256;g++)d[g]=Math.exp(g**2/h);const f=e.length,m=new Uint8Array(f),y=new Uint32Array(256);for(let g=0;g<s;g++)for(let w=0;w<t;w++){const v=g*t+w,b=e[v];let _=0,E=0;for(let T=0;T<o;T++){const P=g+T-u;if(!(P<0||P>=s))for(let N=0;N<o;N++){const M=w+N-u;if(M<0||M>=t)continue;const L=e[P*t+M],F=a[T*o+N]*d[Math.abs(L-b)];_+=L*F,E+=F}}const k=m[v]=Math.round(_/E);y[k]++}return[m,y]},Gw=new WeakSet,lF=function(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t},K0=new WeakSet,VE=function(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,c=s.length;a<c;a++){const u=s[a]=e[a<<2];r=Math.max(r,u),i=Math.min(i,u)}const o=255/(r-i);for(let a=0,c=s.length;a<c;a++)s[a]=(s[a]-i)*o;return s},X0=new WeakSet,zE=function(e){let t,s=-1/0,r=-1/0;const i=e.findIndex(c=>c!==0);let o=i,a=i;for(t=i;t<256;t++){const c=e[t];c>s&&(t-o>r&&(r=t-o,a=t-1),s=c,o=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t},Ww=new WeakSet,cF=function(e){const t=e,{width:s,height:r}=e,{maxDim:i}=l(this,Jc);let o=s,a=r;if(s>i||r>i){let f=s,m=r,y=Math.log2(Math.max(s,r)/i);const g=Math.floor(y);y=y===g?g-1:g;for(let v=0;v<y;v++){o=Math.ceil(f/2),a=Math.ceil(m/2);const b=new OffscreenCanvas(o,a);b.getContext("2d").drawImage(e,0,0,f,m,0,0,o,a),f=o,m=a,e!==t&&e.close(),e=b.transferToImageBitmap()}const w=Math.min(i/o,i/a);o=Math.round(o*w),a=Math.round(a*w)}const u=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,a),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,a);const d=u.getImageData(0,0,o,a).data;return[C(this,K0,VE).call(this,d),o,a]},x(Rt,W0),x(Rt,Vw),x(Rt,zw),x(Rt,q0),x(Rt,tf),x(Rt,Uw),x(Rt,Hw),x(Rt,Gw),x(Rt,K0),x(Rt,X0),x(Rt,Ww),x(Rt,Jc,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),x(Rt,wr,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class eT extends JO{constructor(){super(),super.updateProperties({fill:Qe._defaultLineColor,"stroke-width":0})}clone(){const e=new eT;return e.updateAll(this),e}}class tT extends B1{constructor(e){super(e),super.updateProperties({stroke:Qe._defaultLineColor,"stroke-width":1})}clone(){const e=new tT(this._viewParameters);return e.updateAll(this),e}}var Ra,ui,Ma,Zc;const is=class is extends sx{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});x(this,Ra,!1);x(this,ui,null);x(this,Ma,null);x(this,Zc,null);this._willKeepAspectRatio=!0,S(this,Ma,t.signatureData||null),S(this,ui,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,s){Qe.initialize(t,s),this._defaultDrawingOptions=new eT,this._defaultDrawnSignatureOptions=new tT(s.viewParameters)}static getDefaultDrawingOptions(t){const s=this._defaultDrawingOptions.clone();return s.updateProperties(t),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return me(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,ui)}}static computeTelemetryFinalData(t){const s=t.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,s;const{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,s=this.y),super.render(),this._drawId===null)if(l(this,Ma)){const{lines:i,mustSmooth:o,areContours:a,description:c,uuid:u,heightInPage:d}=l(this,Ma),{rawDims:{pageWidth:h,pageHeight:f},rotation:m}=this.parent.viewport,y=Rt.processDrawnLines({lines:i,pageWidth:h,pageHeight:f,rotation:m,innerMargin:is._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(y,d,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:l(this,ui)||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,s)),this.div}setUuid(t){S(this,Zc,t),this.addEditToolbar()}getUuid(){return l(this,Zc)}get description(){return l(this,ui)}set description(t){S(this,ui,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:s,thickness:r,width:i,height:o}=l(this,Ma),a=Math.max(i,o),c=Rt.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:r,width:i,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,s,r,i){const{x:o,y:a}=this,{outline:c}=S(this,Ma,t);S(this,Ra,c instanceof FE),this.description=r;let u;l(this,Ra)?u=is.getDefaultDrawingOptions():(u=is._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,d]=this.pageDimensions;let h=s/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Rt.process(t,s,r,i,is._INNER_MARGIN)}getFromText(t,s){const{rawDims:{pageWidth:r,pageHeight:i},rotation:o}=this.parent.viewport;return Rt.extractContoursFromText(t,s,r,i,o,is._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:s,pageHeight:r},rotation:i}=this.parent.viewport;return Rt.processDrawnLines({lines:t,pageWidth:s,pageHeight:r,rotation:i,innerMargin:is._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:s}){t?this._drawingOptions=is.getDefaultDrawingOptions():(this._drawingOptions=is._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:s,points:r}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:l(this,Ra),color:[0,0,0],thickness:l(this,Ra)?0:i});return this.addComment(o),t?(o.paths={lines:s,points:r},o.uuid=l(this,Zc),o.isCopy=!0):o.lines=s,l(this,ui)&&(o.accessibilityData={type:"Figure",alt:l(this,ui)}),o}static deserializeDraw(t,s,r,i,o,a){return a.areContours?FE.deserialize(t,s,r,i,o,a):_y.deserialize(t,s,r,i,o,a)}static async deserialize(t,s,r){var o;const i=await super.deserialize(t,s,r);return S(i,Ra,t.areContours),i.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",S(i,Zc,t.uuid),i}};Ra=new WeakMap,ui=new WeakMap,Ma=new WeakMap,Zc=new WeakMap,U(is,"_type","signature"),U(is,"_editorType",ce.SIGNATURE),U(is,"_defaultDrawingOptions",null);let UE=is;var ot,qt,ja,oo,La,nf,ao,eu,di,_s,sf,tu,Rp,nu,Mp,rf,lb,of,cb,af,ub,Y0,GE,lf,db,qw,uF;class HE extends Qe{constructor(t){super({...t,name:"stampEditor"});x(this,tu);x(this,nu);x(this,rf);x(this,of);x(this,af);x(this,Y0);x(this,lf);x(this,qw);x(this,ot,null);x(this,qt,null);x(this,ja,null);x(this,oo,null);x(this,La,null);x(this,nf,"");x(this,ao,null);x(this,eu,!1);x(this,di,null);x(this,_s,!1);x(this,sf,!1);S(this,oo,t.bitmapUrl),S(this,La,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,s){Qe.initialize(t,s)}static isHandlingMimeForPasting(t){return Xb.includes(t)}static paste(t,s){s.pasteEditor({mode:ce.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const s=t.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(t=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:a}=t||this.copyCanvas(null,null,!0).imageData,c=await r.guess({name:"altText",request:{data:i,width:o,height:a,channels:i.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),s&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;l(this,qt)&&(S(this,ot,null),this._uiManager.imageManager.deleteId(l(this,qt)),(t=l(this,ao))==null||t.remove(),S(this,ao,null),l(this,di)&&(clearTimeout(l(this,di)),S(this,di,null))),super.remove()}rebuild(){if(!this.parent){l(this,qt)&&C(this,rf,lb).call(this);return}super.rebuild(),this.div!==null&&(l(this,qt)&&l(this,ao)===null&&C(this,rf,lb).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(l(this,ja)||l(this,ot)||l(this,oo)||l(this,La)||l(this,qt)||l(this,eu))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,s;return this._isCopy&&(t=this.x,s=this.y),super.render(),this.div.hidden=!0,this.createAltText(),l(this,eu)||(l(this,ot)?C(this,of,cb).call(this):C(this,rf,lb).call(this)),this._isCopy&&this._moveAfterPaste(t,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,s){const{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,s);s.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(S(this,qt,r),i&&S(this,ot,i),S(this,eu,!1),C(this,of,cb).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,di)!==null&&clearTimeout(l(this,di)),S(this,di,setTimeout(()=>{S(this,di,null),C(this,Y0,GE).call(this)},200))}copyCanvas(t,s,r=!1){t||(t=224);const{width:i,height:o}=l(this,ot),a=new Nr;let c=l(this,ot),u=i,d=o,h=null;if(s){if(i>s||o>s){const P=Math.min(s/i,s/o);u=Math.floor(i*P),d=Math.floor(o*P)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*a.sx),y=h.height=Math.ceil(d*a.sy);l(this,_s)||(c=C(this,af,ub).call(this,m,y));const g=h.getContext("2d");g.filter=this._uiManager.hcmFilter;let w="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":TG.isDarkMode&&(w="#8f8f9d",v="#42414d");const b=15,_=b*a.sx,E=b*a.sy,k=new OffscreenCanvas(_*2,E*2),T=k.getContext("2d");T.fillStyle=w,T.fillRect(0,0,_*2,E*2),T.fillStyle=v,T.fillRect(0,0,_,E),T.fillRect(_,E,_,E),g.fillStyle=g.createPattern(k,"repeat"),g.fillRect(0,0,m,y),g.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let f=null;if(r){let m,y;if(a.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=l(this,ot),i>t||o>t){const v=Math.min(t/i,t/o);m=Math.floor(i*v),y=Math.floor(o*v),l(this,_s)||(c=C(this,af,ub).call(this,m,y))}const w=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});w.drawImage(c,0,0,c.width,c.height,0,0,m,y),f={width:m,height:y,data:w.getImageData(0,0,m,y).data}}return{canvas:h,width:u,height:d,imageData:f}}static async deserialize(t,s,r){var w;let i=null,o=!1;if(t instanceof CO){const{data:{rect:v,rotation:b,id:_,structParent:E,popupRef:k,richText:T,contentsObj:P,creationDate:N,modificationDate:M},container:L,parent:{page:{pageNumber:F}},canvas:D}=t;let z,I;D?(delete t.canvas,{id:z,bitmap:I}=r.imageManager.getFromCanvas(L.id,D),D.remove()):(o=!0,t._hasNoCanvas=!0);const R=((w=await s._structTree.getAriaAttributes(`${zk}${_}`))==null?void 0:w.get("aria-label"))||"";i=t={annotationType:ce.STAMP,bitmapId:z,bitmap:I,pageIndex:F-1,rect:v.slice(0),rotation:b,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:R},isSvg:!1,structParent:E,popupRef:k,richText:T,comment:(P==null?void 0:P.str)||null,creationDate:N,modificationDate:M}}const a=await super.deserialize(t,s,r),{rect:c,bitmap:u,bitmapUrl:d,bitmapId:h,isSvg:f,accessibilityData:m}=t;o?(r.addMissingCanvas(t.id,a),S(a,eu,!0)):h&&r.imageManager.isValidId(h)?(S(a,qt,h),u&&S(a,ot,u)):S(a,oo,d),S(a,_s,f);const[y,g]=a.pageDimensions;return a.width=(c[2]-c[0])/y,a.height=(c[3]-c[1])/g,m&&(a.altTextData=m),a._initialData=i,t.comment&&a.setCommentData(t),S(a,sf,!!i),a}serialize(t=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r=Object.assign(super.serialize(t),{bitmapId:l(this,qt),isSvg:l(this,_s)});if(this.addComment(r),t)return r.bitmapUrl=C(this,lf,db).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(r.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=C(this,qw,uF).call(this,r);return c.isSame?null:(c.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1,r.id=this.annotationElementId,delete r.bitmapId,r)}if(s===null)return r;s.stamps||(s.stamps=new Map);const a=l(this,_s)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!s.stamps.has(l(this,qt)))s.stamps.set(l(this,qt),{area:a,serialized:r}),r.bitmap=C(this,lf,db).call(this,!1);else if(l(this,_s)){const c=s.stamps.get(l(this,qt));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=C(this,lf,db).call(this,!1))}return r}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}ot=new WeakMap,qt=new WeakMap,ja=new WeakMap,oo=new WeakMap,La=new WeakMap,nf=new WeakMap,ao=new WeakMap,eu=new WeakMap,di=new WeakMap,_s=new WeakMap,sf=new WeakMap,tu=new WeakSet,Rp=function(t,s=!1){if(!t){this.remove();return}S(this,ot,t.bitmap),s||(S(this,qt,t.id),S(this,_s,t.isSvg)),t.file&&S(this,nf,t.file.name),C(this,of,cb).call(this)},nu=new WeakSet,Mp=function(){if(S(this,ja,null),this._uiManager.enableWaiting(!1),!!l(this,ao)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ot)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,ot)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},rf=new WeakSet,lb=function(){if(l(this,qt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,qt)).then(r=>C(this,tu,Rp).call(this,r,!0)).finally(()=>C(this,nu,Mp).call(this));return}if(l(this,oo)){const r=l(this,oo);S(this,oo,null),this._uiManager.enableWaiting(!0),S(this,ja,this._uiManager.imageManager.getFromUrl(r).then(i=>C(this,tu,Rp).call(this,i)).finally(()=>C(this,nu,Mp).call(this)));return}if(l(this,La)){const r=l(this,La);S(this,La,null),this._uiManager.enableWaiting(!0),S(this,ja,this._uiManager.imageManager.getFromFile(r).then(i=>C(this,tu,Rp).call(this,i)).finally(()=>C(this,nu,Mp).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Xb.join(",");const s=this._uiManager._signal;S(this,ja,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),C(this,tu,Rp).call(this,i)}r()},{signal:s}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:s})}).finally(()=>C(this,nu,Mp).call(this))),t.click()},of=new WeakSet,cb=function(){var u;const{div:t}=this;let{width:s,height:r}=l(this,ot);const[i,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*i,r=this.height*o;else if(s>a*i||r>a*o){const d=Math.min(a*i/s,a*o/r);s*=d,r*=d}this._uiManager.enableWaiting(!1);const c=S(this,ao,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=s/i,this.height=r/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),C(this,Y0,GE).call(this),l(this,sf)||(this.parent.addUndoableEditor(this),S(this,sf,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,nf)&&this.div.setAttribute("aria-description",l(this,nf)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},af=new WeakSet,ub=function(t,s){const{width:r,height:i}=l(this,ot);let o=r,a=i,c=l(this,ot);for(;o>2*t||a>2*s;){const u=o,d=a;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(o,a);h.getContext("2d").drawImage(c,0,0,u,d,0,0,o,a),c=h.transferToImageBitmap()}return c},Y0=new WeakSet,GE=function(){const[t,s]=this.parentDimensions,{width:r,height:i}=this,o=new Nr,a=Math.ceil(r*t*o.sx),c=Math.ceil(i*s*o.sy),u=l(this,ao);if(!u||u.width===a&&u.height===c)return;u.width=a,u.height=c;const d=l(this,_s)?l(this,ot):C(this,af,ub).call(this,a,c),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(d,0,0,d.width,d.height,0,0,a,c)},lf=new WeakSet,db=function(t){if(t){if(l(this,_s)){const i=this._uiManager.imageManager.getSvgUrl(l(this,qt));if(i)return i}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,ot),s.getContext("2d").drawImage(l(this,ot),0,0),s.toDataURL()}if(l(this,_s)){const[s,r]=this.pageDimensions,i=Math.round(this.width*s*ko.PDF_TO_CSS_UNITS),o=Math.round(this.height*r*ko.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(i,o);return a.getContext("2d").drawImage(l(this,ot),0,0,l(this,ot).width,l(this,ot).height,0,0,i,o),a.transferToImageBitmap()}return structuredClone(l(this,ot))},qw=new WeakSet,uF=function(t){var a;const{pageIndex:s,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===s,o=(((a=t.accessibilityData)==null?void 0:a.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}},U(HE,"_type","stamp"),U(HE,"_editorType",ce.STAMP);var su,cf,Da,Ia,lo,Xn,Oa,uf,df,Sr,co,Kt,uo,Fa,hf,ne,Ba,Q0,WE,Kw,dF,Xs,Br,J0,qE,Z0,KE,ff,hb;const lr=class lr{constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:r,accessibilityManager:i,annotationLayer:o,drawLayer:a,textLayer:c,viewport:u,l10n:d}){x(this,Q0);x(this,Kw);x(this,Xs);x(this,J0);x(this,Z0);x(this,ff);x(this,su,void 0);x(this,cf,!1);x(this,Da,null);x(this,Ia,null);x(this,lo,null);x(this,Xn,new Map);x(this,Oa,!1);x(this,uf,!1);x(this,df,!1);x(this,Sr,null);x(this,co,null);x(this,Kt,null);x(this,uo,null);x(this,Fa,null);x(this,hf,-1);x(this,ne,void 0);const h=[...l(lr,Ba).values()];if(!lr._initialized){lr._initialized=!0;for(const f of h)f.initialize(d,e)}e.registerEditorTypes(h),S(this,ne,e),this.pageIndex=t,this.div=s,S(this,su,i),S(this,Da,o),this.viewport=u,S(this,Kt,c),this.drawLayer=a,this._structTree=r,l(this,ne).addLayer(this)}get isEmpty(){return l(this,Xn).size===0}get isInvisible(){return this.isEmpty&&l(this,ne).getMode()===ce.NONE}updateToolbar(e){l(this,ne).updateToolbar(e)}updateMode(e=l(this,ne).getMode()){switch(C(this,ff,hb).call(this),e){case ce.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ce.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ce.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===ce.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of l(lr,Ba).values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=l(this,Kt))==null?void 0:t.div)}setEditingState(e){l(this,ne).setEditingState(e)}addCommands(e){l(this,ne).addCommands(e)}cleanUndoStack(e){l(this,ne).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=l(this,Da))==null||t.div.classList.toggle("disabled",!e)}async enable(){var s;S(this,df,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(s=l(this,Fa))==null||s.abort(),S(this,Fa,null);const e=new Set;for(const r of l(this,Q0,WE))r.enableEditing(),r.show(!0),r.annotationElementId&&(l(this,ne).removeChangedExistingAnnotation(r),e.add(r.annotationElementId));const t=l(this,Da);if(t)for(const r of t.getEditableAnnotations()){if(r.hide(),l(this,ne).isDeletedAnnotationElement(r.data.id)||e.has(r.data.id))continue;const i=await this.deserialize(r);i&&(this.addOrRebuild(i),i.enableEditing())}S(this,df,!1),l(this,ne)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var s;if(S(this,uf,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),l(this,Kt)&&!l(this,Fa)){S(this,Fa,new AbortController);const r=l(this,ne).combinedSignal(l(this,Fa));l(this,Kt).div.addEventListener("pointerdown",i=>{const{clientX:a,clientY:c,timeStamp:u}=i,d=l(this,hf);if(u-d>500){S(this,hf,u);return}S(this,hf,-1);const{classList:h}=this.div;h.toggle("getElements",!0);const f=document.elementsFromPoint(a,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const y=new RegExp(`^${bm}[0-9]+$`);for(const w of f)if(y.test(w.id)){m=w.id;break}if(!m)return;const g=l(this,Xn).get(m);(g==null?void 0:g.annotationElementId)===null&&(i.stopPropagation(),i.preventDefault(),g.dblclick(i))},{signal:r,capture:!0})}const e=l(this,Da);if(e){const r=new Map,i=new Map;for(const a of l(this,Q0,WE)){if(a.disableEditing(),!a.annotationElementId){a.updateFakeAnnotationElement(e);continue}if(a.serialize()!==null){r.set(a.annotationElementId,a);continue}else i.set(a.annotationElementId,a);(s=this.getEditableAnnotation(a.annotationElementId))==null||s.show(),a.remove()}const o=e.getEditableAnnotations();for(const a of o){const{id:c}=a.data;if(l(this,ne).isDeletedAnnotationElement(c)){a.updateEdited({deleted:!0});continue}let u=i.get(c);if(u){u.resetAnnotationElement(a),u.show(!1),a.show();continue}u=r.get(c),u&&(l(this,ne).addChangedExistingAnnotation(u),u.renderAnnotationElement(a)&&u.show(!1)),a.show()}}C(this,ff,hb).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const r of l(lr,Ba).values())t.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,uf,!1)}getEditableAnnotation(e){var t;return((t=l(this,Da))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){l(this,ne).getActive()!==e&&l(this,ne).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=l(this,Kt))!=null&&e.div&&!l(this,uo)){S(this,uo,new AbortController);const t=l(this,ne).combinedSignal(l(this,uo));l(this,Kt).div.addEventListener("pointerdown",C(this,Kw,dF).bind(this),{signal:t}),l(this,Kt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=l(this,Kt))!=null&&e.div&&l(this,uo)&&(l(this,uo).abort(),S(this,uo,null),l(this,Kt).div.classList.remove("highlighting"))}enableClick(){if(l(this,Ia))return;S(this,Ia,new AbortController);const e=l(this,ne).combinedSignal(l(this,Ia));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=l(this,Ia))==null||e.abort(),S(this,Ia,null)}attach(e){l(this,Xn).set(e.id,e);const{annotationElementId:t}=e;t&&l(this,ne).isDeletedAnnotationElement(t)&&l(this,ne).removeDeletedAnnotationElement(e)}detach(e){var t;l(this,Xn).delete(e.id),(t=l(this,su))==null||t.removePointerInTextLayer(e.contentDiv),!l(this,uf)&&e.annotationElementId&&l(this,ne).addDeletedAnnotationElement(e)}remove(e){this.detach(e),l(this,ne).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(l(this,ne).addDeletedAnnotationElement(e.annotationElementId),Qe.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),l(this,ne).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!l(this,df)),l(this,ne).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var s;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!l(this,lo)&&(e._focusEventsAllowed=!1,S(this,lo,setTimeout(()=>{S(this,lo,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:l(this,ne)._signal}),t.focus())},0))),e._structTreeParentId=(s=l(this,su))==null?void 0:s.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of l(this,Xn).values())if(t.uid===e)return t;return null}getNextId(){return l(this,ne).getId()}combinedSignal(e){return l(this,ne).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=l(this,Xs,Br))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await l(this,ne).updateMode(e.mode);const{offsetX:s,offsetY:r}=C(this,Z0,KE).call(this),i=this.getNextId(),o=C(this,J0,qE).call(this,{parent:this,id:i,x:s,y:r,uiManager:l(this,ne),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=l(lr,Ba).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,l(this,ne)))||null}createAndAddNewEditor(e,t,s={}){const r=this.getNextId(),i=C(this,J0,qE).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:l(this,ne),isCentered:t,...s});return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(C(this,Z0,KE).call(this),!0,e)}setSelected(e){l(this,ne).setSelected(e)}toggleSelected(e){l(this,ne).toggleSelected(e)}unselect(e){l(this,ne).unselect(e)}pointerup(e){var r;const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!l(this,Oa)||(S(this,Oa,!1),(r=l(this,Xs,Br))!=null&&r.isDrawer&&l(this,Xs,Br).supportMultipleDrawings))return;if(!l(this,cf)){S(this,cf,!0);return}const s=l(this,ne).getMode();if(s===ce.STAMP||s===ce.SIGNATURE){l(this,ne).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var r;if(l(this,ne).getMode()===ce.HIGHLIGHT&&this.enableTextSelection(),l(this,Oa)){S(this,Oa,!1);return}const{isMac:t}=Qt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(S(this,Oa,!0),(r=l(this,Xs,Br))!=null&&r.isDrawer){this.startDrawingSession(e);return}const s=l(this,ne).getActive();S(this,cf,!s||s.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),l(this,Sr)){l(this,Xs,Br).startDrawing(this,l(this,ne),!1,e);return}l(this,ne).setCurrentDrawingSession(this),S(this,Sr,new AbortController);const t=l(this,ne).combinedSignal(l(this,Sr));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(S(this,co,null),this.commitOrRemove())},{signal:t}),l(this,Xs,Br).startDrawing(this,l(this,ne),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&S(this,co,t);return}l(this,co)&&setTimeout(()=>{var t;(t=l(this,co))==null||t.focus(),S(this,co,null)},0)}endDrawingSession(e=!1){return l(this,Sr)?(l(this,ne).setCurrentDrawingSession(null),l(this,Sr).abort(),S(this,Sr,null),S(this,co,null),l(this,Xs,Br).endDrawing(e)):null}findNewParent(e,t,s){const r=l(this,ne).findParent(t,s);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return l(this,Sr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,Sr)&&l(this,Xs,Br).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=l(this,ne).getActive())==null?void 0:e.parent)===this&&(l(this,ne).commitOrRemove(),l(this,ne).setActiveEditor(null)),l(this,lo)&&(clearTimeout(l(this,lo)),S(this,lo,null));for(const s of l(this,Xn).values())(t=l(this,su))==null||t.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,Xn).clear(),l(this,ne).removeLayer(this)}render({viewport:e}){this.viewport=e,nl(this.div,e);for(const t of l(this,ne).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){l(this,ne).commitOrRemove(),C(this,ff,hb).call(this);const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,nl(this.div,{rotation:s}),t!==s)for(const r of l(this,Xn).values())r.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return l(this,ne).viewParameters.realScale}};su=new WeakMap,cf=new WeakMap,Da=new WeakMap,Ia=new WeakMap,lo=new WeakMap,Xn=new WeakMap,Oa=new WeakMap,uf=new WeakMap,df=new WeakMap,Sr=new WeakMap,co=new WeakMap,Kt=new WeakMap,uo=new WeakMap,Fa=new WeakMap,hf=new WeakMap,ne=new WeakMap,Ba=new WeakMap,Q0=new WeakSet,WE=function(){return l(this,Xn).size!==0?l(this,Xn).values():l(this,ne).getEditors(this.pageIndex)},Kw=new WeakSet,dF=function(e){l(this,ne).unselectAll();const{target:t}=e;if(t===l(this,Kt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&l(this,Kt).div.contains(t)){const{isMac:s}=Qt.platform;if(e.button!==0||e.ctrlKey&&s)return;l(this,ne).showAllEditors("highlight",!0,!0),l(this,Kt).div.classList.add("free"),this.toggleDrawing(),nx.startHighlighting(this,l(this,ne).direction==="ltr",{target:l(this,Kt).div,x:e.x,y:e.y}),l(this,Kt).div.addEventListener("pointerup",()=>{l(this,Kt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,ne)._signal}),e.preventDefault()}},Xs=new WeakSet,Br=function(){return l(lr,Ba).get(l(this,ne).getMode())},J0=new WeakSet,qE=function(e){const t=l(this,Xs,Br);return t?new t.prototype.constructor(e):null},Z0=new WeakSet,KE=function(){const{x:e,y:t,width:s,height:r}=this.boundingClientRect,i=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+s),c=Math.min(window.innerHeight,t+r),u=(i+a)/2-e,d=(o+c)/2-t,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}},ff=new WeakSet,hb=function(){for(const e of l(this,Xn).values())e.isEmpty()&&e.remove()},U(lr,"_initialized",!1),x(lr,Ba,new Map([kE,OE,HE,nx,UE].map(e=>[e._editorType,e])));let rx=lr;var _r,Rn,ru,ey,Xw,hF,ty,XE,Yw,fF,ny,YE;const Dt=class Dt{constructor({pageIndex:e}){x(this,ty);x(this,Yw);x(this,ny);x(this,_r,null);x(this,Rn,new Map);x(this,ru,new Map);this.pageIndex=e}setParent(e){if(!l(this,_r)){S(this,_r,e);return}if(l(this,_r)!==e){if(l(this,Rn).size>0)for(const t of l(this,Rn).values())t.remove(),e.append(t);S(this,_r,e)}}static get _svgFactory(){return me(this,"_svgFactory",new Cm)}draw(e,t=!1,s=!1){const r=jt(Dt,ey)._++,i=C(this,ty,XE).call(this),o=Dt._svgFactory.createElement("defs");i.append(o);const a=Dt._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${r}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),t&&l(this,ru).set(r,a);const u=s?C(this,Yw,fF).call(this,o,c):null,d=Dt._svgFactory.createElement("use");return i.append(d),d.setAttribute("href",`#${c}`),this.updateProperties(i,e),l(this,Rn).set(r,i),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const s=jt(Dt,ey)._++,r=C(this,ty,XE).call(this),i=Dt._svgFactory.createElement("defs");r.append(i);const o=Dt._svgFactory.createElement("path");i.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const h=Dt._svgFactory.createElement("mask");i.append(h),c=`mask_p${this.pageIndex}_${s}`,h.setAttribute("id",c),h.setAttribute("maskUnits","objectBoundingBox");const f=Dt._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=Dt._svgFactory.createElement("use");h.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=Dt._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${a}`),c&&u.setAttribute("mask",`url(#${c})`);const d=u.cloneNode();return r.append(d),u.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(r,e),l(this,Rn).set(s,r),s}finalizeDraw(e,t){l(this,ru).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:s,bbox:r,rootClass:i,path:o}=t,a=typeof e=="number"?l(this,Rn).get(e):e;if(a){if(s&&C(this,ny,YE).call(this,a,s),r&&C(c=Dt,Xw,hF).call(c,a,r),i){const{classList:u}=a;for(const[d,h]of Object.entries(i))u.toggle(d,h)}if(o){const d=a.firstChild.firstChild;C(this,ny,YE).call(this,d,o)}}}updateParent(e,t){if(t===this)return;const s=l(this,Rn).get(e);s&&(l(t,_r).append(s),l(this,Rn).delete(e),l(t,Rn).set(e,s))}remove(e){l(this,ru).delete(e),l(this,_r)!==null&&(l(this,Rn).get(e).remove(),l(this,Rn).delete(e))}destroy(){S(this,_r,null);for(const e of l(this,Rn).values())e.remove();l(this,Rn).clear(),l(this,ru).clear()}};_r=new WeakMap,Rn=new WeakMap,ru=new WeakMap,ey=new WeakMap,Xw=new WeakSet,hF=function(e,[t,s,r,i]){const{style:o}=e;o.top=`${100*s}%`,o.left=`${100*t}%`,o.width=`${100*r}%`,o.height=`${100*i}%`},ty=new WeakSet,XE=function(){const e=Dt._svgFactory.create(1,1,!0);return l(this,_r).append(e),e.setAttribute("aria-hidden",!0),e},Yw=new WeakSet,fF=function(e,t){const s=Dt._svgFactory.createElement("clipPath");e.append(s);const r=`clip_${t}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const i=Dt._svgFactory.createElement("use");return s.append(i),i.setAttribute("href",`#${t}`),i.classList.add("clip"),r},ny=new WeakSet,YE=function(e,t){for(const[s,r]of Object.entries(t))r===null?e.removeAttribute(s):e.setAttribute(s,r)},x(Dt,Xw),x(Dt,ey,0);let ix=Dt;globalThis._pdfjsTestingUtils={HighlightOutliner:PE};globalThis.pdfjsLib={AbortException:Co,AnnotationEditorLayer:rx,AnnotationEditorParamsType:_e,AnnotationEditorType:ce,AnnotationEditorUIManager:sl,AnnotationLayer:Zk,AnnotationMode:fi,AnnotationType:At,applyOpacity:dI,build:pO,ColorPicker:Em,createValidAbsoluteUrl:Bk,CSSConstants:uI,DOMSVGFactory:Cm,DrawLayer:ix,FeatureTest:Qt,fetchData:jf,findContrastColor:hI,getDocument:Kk,getFilenameFromUrl:aI,getPdfFilenameFromUrl:lI,getRGB:Lf,getUuid:Vk,getXfaPageViewport:cI,GlobalWorkerOptions:Js,ImageKind:Yp,InvalidPDFException:Kb,isDataScheme:xy,isPdfFile:O1,isValidExplicitDest:GI,MathClamp:wn,noContextMenu:Rs,normalizeUnicode:iI,OPS:Af,OutputScale:Nr,PasswordResponses:sI,PDFDataRangeTransport:Xk,PDFDateString:Sm,PDFWorker:Ef,PermissionFlag:nI,PixelsPerInch:ko,RenderingCancelledException:I1,renderRichText:Hk,ResponseException:xm,setLayerDimensions:nl,shadow:me,SignatureExtractor:Rt,stopEvent:ht,SupportedImageMimeTypes:Xb,TextLayer:Am,TouchManager:_m,updateUrlHash:$k,Util:Y,VerbosityLevel:yy,version:Yk,XfaLayer:Uk};const tq=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Co,AnnotationEditorLayer:rx,AnnotationEditorParamsType:_e,AnnotationEditorType:ce,AnnotationEditorUIManager:sl,AnnotationLayer:Zk,AnnotationMode:fi,AnnotationType:At,CSSConstants:uI,ColorPicker:Em,DOMSVGFactory:Cm,DrawLayer:ix,FeatureTest:Qt,GlobalWorkerOptions:Js,ImageKind:Yp,InvalidPDFException:Kb,MathClamp:wn,OPS:Af,OutputScale:Nr,PDFDataRangeTransport:Xk,PDFDateString:Sm,PDFWorker:Ef,PasswordResponses:sI,PermissionFlag:nI,PixelsPerInch:ko,RenderingCancelledException:I1,ResponseException:xm,SignatureExtractor:Rt,SupportedImageMimeTypes:Xb,TextLayer:Am,TouchManager:_m,Util:Y,VerbosityLevel:yy,XfaLayer:Uk,applyOpacity:dI,build:pO,createValidAbsoluteUrl:Bk,fetchData:jf,findContrastColor:hI,getDocument:Kk,getFilenameFromUrl:aI,getPdfFilenameFromUrl:lI,getRGB:Lf,getUuid:Vk,getXfaPageViewport:cI,isDataScheme:xy,isPdfFile:O1,isValidExplicitDest:GI,noContextMenu:Rs,normalizeUnicode:iI,renderRichText:Hk,setLayerDimensions:nl,shadow:me,stopEvent:ht,updateUrlHash:$k,version:Yk},Symbol.toStringTag,{value:"Module"}));var FN=Object.prototype.hasOwnProperty;function BN(n,e,t){for(t of n.keys())if(hd(t,e))return t}function hd(n,e){var t,s,r;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((s=n.length)===e.length)for(;s--&&hd(n[s],e[s]););return s===-1}if(t===Set){if(n.size!==e.size)return!1;for(s of n)if(r=s,r&&typeof r=="object"&&(r=BN(e,r),!r)||!e.has(r))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(s of n)if(r=s[0],r&&typeof r=="object"&&(r=BN(e,r),!r)||!hd(s[1],e.get(r)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((s=n.byteLength)===e.byteLength)for(;s--&&n.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(n)){if((s=n.byteLength)===e.byteLength)for(;s--&&n[s]===e[s];);return s===-1}if(!t||typeof n=="object"){s=0;for(t in n)if(FN.call(n,t)&&++s&&!FN.call(e,t)||!(t in e)||!hd(n[t],e[t]))return!1;return Object.keys(e).length===s}}return n!==n&&e!==e}function Ay(n){let e=!1;return{promise:new Promise((s,r)=>{n.then(i=>!e&&s(i)).catch(i=>!e&&r(i))}),cancel(){e=!0}}}const nq=["onCopy","onCut","onPaste"],sq=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],rq=["onFocus","onBlur"],iq=["onInput","onInvalid","onReset","onSubmit"],oq=["onLoad","onError"],aq=["onKeyDown","onKeyPress","onKeyUp"],lq=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],cq=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],uq=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],dq=["onSelect"],hq=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],fq=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],pq=["onScroll"],mq=["onWheel"],gq=["onAnimationStart","onAnimationEnd","onAnimationIteration"],yq=["onTransitionEnd"],vq=["onToggle"],bq=["onChange"],xq=[...nq,...sq,...rq,...iq,...oq,...aq,...lq,...cq,...uq,...dq,...hq,...fq,...pq,...mq,...gq,...yq,...bq,...vq];function pF(n,e){const t={};for(const s of xq){const r=n[s];r&&(e?t[s]=i=>r(i,e(s)):t[s]=r)}return t}var wq=!0,QS="Invariant failed";function Ge(n,e){if(!n){if(wq)throw new Error(QS);var t=typeof e=="function"?e():e,s=t?"".concat(QS,": ").concat(t):QS;throw new Error(s)}}var Sq=function(){},_q=Sq;const _n=Qw(_q),Aq=A.createContext(null),mF=Aq,Eq="noopener noreferrer nofollow";class Cq{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Ge(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){Ge(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||Eq,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Ge(this.pdfDocument,"PDF document not loaded."),Ge(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Ge(Array.isArray(t),`"${t}" is not a valid destination array.`);const s=t[0];new Promise(r=>{Ge(this.pdfDocument,"PDF document not loaded."),s instanceof Object?this.pdfDocument.getPageIndex(s).then(i=>{r(i)}).catch(()=>{Ge(!1,`"${s}" is not a valid page reference.`)}):typeof s=="number"?r(s):Ge(!1,`"${s}" is not a valid destination reference.`)}).then(r=>{const i=r+1;Ge(this.pdfViewer,"PDF viewer is not initialized."),Ge(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:r,pageNumber:i})})})}goToPage(e){const t=e-1;Ge(this.pdfViewer,"PDF viewer is not initialized."),Ge(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function fd({children:n,type:e}){return p.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const kq={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},$N=kq;function Tq(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function Cf(){return A.useReducer(Tq,{value:void 0,error:void 0})}const $1=typeof window<"u",gF=$1&&window.location.protocol==="file:";function Pq(n){return typeof n<"u"}function dl(n){return Pq(n)&&n!==null}function Nq(n){return typeof n=="string"}function Rq(n){return n instanceof ArrayBuffer}function Mq(n){return Ge($1,"isBlob can only be used in a browser environment"),n instanceof Blob}function QE(n){return Nq(n)&&/^data:/.test(n)}function VN(n){Ge(QE(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function jq(){return $1&&window.devicePixelRatio||1}const yF="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function zN(){_n(!gF,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${yF}`)}function Lq(){_n(!gF,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${yF}`)}function mu(n){n!=null&&n.cancel&&n.cancel()}function JE(n,e){return Object.defineProperty(n,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.view[3]},configurable:!0}),n}function Dq(n){return n.name==="RenderingCancelledException"}function Iq(n){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=r=>{if(!r.target)return t(new Error("Error while reading a file."));const{error:i}=r.target;if(!i)return t(new Error("Error while reading a file."));switch(i.code){case i.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case i.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case i.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:Oq}=tq,Fq=(n,e)=>{switch(e){case $N.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case $N.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function UN(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const Bq=A.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:r,externalLinkTarget:i,file:o,inputRef:a,imageResourcesPath:c,loading:u="Loading PDF",noData:d="No PDF file specified.",onItemClick:h,onLoadError:f,onLoadProgress:m,onLoadSuccess:y,onPassword:g=Fq,onSourceError:w,onSourceSuccess:v,options:b,renderMode:_,rotate:E,scale:k,...T},P){const[N,M]=Cf(),{value:L,error:F}=N,[D,z]=Cf(),{value:I,error:R}=D,j=A.useRef(new Cq),O=A.useRef([]),B=A.useRef(void 0),$=A.useRef(void 0);o&&o!==B.current&&UN(o)&&(_n(!hd(o,B.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),B.current=o),b&&b!==$.current&&(_n(!hd(b,$.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),$.current=b);const V=A.useRef({scrollPageIntoView:te=>{const{dest:ae,pageNumber:Le,pageIndex:ze=Le-1}=te;if(h){h({dest:ae,pageIndex:ze,pageNumber:Le});return}const sr=O.current[ze];if(sr){sr.scrollIntoView();return}_n(!1,`An internal link leading to page ${Le} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});A.useImperativeHandle(P,()=>({linkService:j,pages:O,viewer:V}),[]);function W(){v&&v()}function q(){F&&(_n(!1,F.toString()),w&&w(F))}function K(){M({type:"RESET"})}A.useEffect(K,[o,M]);const se=A.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return QE(o)?{data:VN(o)}:(zN(),{url:o});if(o instanceof Oq)return{range:o};if(Rq(o))return{data:o};if($1&&Mq(o))return{data:await Iq(o)};if(Ge(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),Ge(UN(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(QE(o.url)){const{url:te,...ae}=o;return{data:VN(te),...ae}}zN()}return o},[o]);A.useEffect(()=>{const te=Ay(se());return te.promise.then(ae=>{M({type:"RESOLVE",value:ae})}).catch(ae=>{M({type:"REJECT",error:ae})}),()=>{mu(te)}},[se,M]),A.useEffect(()=>{if(!(typeof L>"u")){if(L===!1){q();return}W()}},[L]);function pe(){I&&(y&&y(I),O.current=new Array(I.numPages),j.current.setDocument(I))}function ye(){R&&(_n(!1,R.toString()),f&&f(R))}A.useEffect(function(){z({type:"RESET"})},[z,L]),A.useEffect(function(){if(!L)return;const ae=b?{...L,...b}:L,Le=Kk(ae);m&&(Le.onProgress=m),g&&(Le.onPassword=g);const ze=Le,sr=ze.promise.then(jr=>{z({type:"RESOLVE",value:jr})}).catch(jr=>{ze.destroyed||z({type:"REJECT",error:jr})});return()=>{sr.finally(()=>ze.destroy())}},[b,z,L]),A.useEffect(()=>{if(!(typeof I>"u")){if(I===!1){ye();return}pe()}},[I]),A.useEffect(function(){j.current.setViewer(V.current),j.current.setExternalLinkRel(r),j.current.setExternalLinkTarget(i)},[r,i]);const ge=A.useCallback((te,ae)=>{O.current[te]=ae},[]),Jt=A.useCallback(te=>{delete O.current[te]},[]),yt=A.useMemo(()=>({imageResourcesPath:c,linkService:j.current,onItemClick:h,pdf:I,registerPage:ge,renderMode:_,rotate:E,scale:k,unregisterPage:Jt}),[c,h,I,ge,_,E,k,Jt]),ve=A.useMemo(()=>pF(T,()=>I),[T,I]);function X(){function te(Le){return!!(Le!=null&&Le.pdf)}if(!te(yt))throw new Error("pdf is undefined");const ae=typeof e=="function"?e(yt):e;return p.jsx(mF.Provider,{value:yt,children:ae})}function ie(){return o?I==null?p.jsx(fd,{type:"loading",children:typeof u=="function"?u():u}):I===!1?p.jsx(fd,{type:"error",children:typeof s=="function"?s():s}):X():p.jsx(fd,{type:"no-data",children:typeof d=="function"?d():d})}return p.jsx("div",{className:Nf("react-pdf__Document",t),ref:a,...ve,children:ie()})}),$q=Bq;function vF(){return A.useContext(mF)}function bF(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(i){for(var o=0,a=t;o<a.length;o++){var c=a[o];typeof c=="function"?c(i):c&&(c.current=i)}}}const Vq=A.createContext(null),xF=Vq;function V1(){return A.useContext(xF)}function zq(){const n=vF(),e=V1();Ge(e,"Unable to find Page context.");const t={...n,...e},{imageResourcesPath:s,linkService:r,onGetAnnotationsError:i,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:a,onRenderAnnotationLayerSuccess:c,page:u,pdf:d,renderForms:h,rotate:f,scale:m=1}=t;Ge(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),Ge(u,"Attempted to load page annotations, but no page was specified."),Ge(r,"Attempted to load page annotations, but no linkService was specified.");const[y,g]=Cf(),{value:w,error:v}=y,b=A.useRef(null);_n(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function _(){w&&o&&o(w)}function E(){v&&(_n(!1,v.toString()),i&&i(v))}A.useEffect(function(){g({type:"RESET"})},[g,u]),A.useEffect(function(){if(!u)return;const M=Ay(u.getAnnotations()),L=M;return M.promise.then(F=>{g({type:"RESOLVE",value:F})}).catch(F=>{g({type:"REJECT",error:F})}),()=>{mu(L)}},[g,u]),A.useEffect(()=>{if(w!==void 0){if(w===!1){E();return}_()}},[w]);function k(){c&&c()}function T(N){_n(!1,`${N}`),a&&a(N)}const P=A.useMemo(()=>u.getViewport({scale:m,rotation:f}),[u,f,m]);return A.useEffect(function(){if(!d||!u||!r||!w)return;const{current:M}=b;if(!M)return;const L=P.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:M,l10n:null,linkService:r,page:u,structTreeLayer:null,viewport:L},D={annotations:w,annotationStorage:d.annotationStorage,div:M,imageResourcesPath:s,linkService:r,page:u,renderForms:h,viewport:L};M.innerHTML="";try{new Zk(F).render(D),k()}catch(z){T(z)}return()=>{}},[w,s,r,u,d,h,P]),p.jsx("div",{className:Nf("react-pdf__Page__annotations","annotationLayer"),ref:b})}const wF={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},Uq=/^H(\d+)$/;function Hq(n){return n in wF}function z1(n){return"children"in n}function SF(n){return z1(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function Gq(n){const e={};if(z1(n)){const{role:t}=n,s=t.match(Uq);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(Hq(t)){const r=wF[t];r&&(e.role=r)}}return e}function _F(n){const e={};if(z1(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),SF(n)){const[t]=n.children;if(t){const s=_F(t);return{...e,...s}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function Wq(n){return n?{...Gq(n),..._F(n)}:null}function AF({className:n,node:e}){const t=A.useMemo(()=>Wq(e),[e]),s=A.useMemo(()=>!z1(e)||SF(e)?null:e.children.map((r,i)=>p.jsx(AF,{node:r},i)),[e]);return p.jsx("span",{className:n,...t,children:s})}function qq(){const n=V1();Ge(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[s,r]=Cf(),{value:i,error:o}=s,{customTextRenderer:a,page:c}=n;function u(){i&&t&&t(i)}function d(){o&&(_n(!1,o.toString()),e&&e(o))}return A.useEffect(function(){r({type:"RESET"})},[r,c]),A.useEffect(function(){if(a||!c)return;const f=Ay(c.getStructTree()),m=f;return f.promise.then(y=>{r({type:"RESOLVE",value:y})}).catch(y=>{r({type:"REJECT",error:y})}),()=>mu(m)},[a,c,r]),A.useEffect(()=>{if(i!==void 0){if(i===!1){d();return}u()}},[i]),i?p.jsx(AF,{className:"react-pdf__Page__structTree structTree",node:i}):null}const HN=fi;function Kq(n){const e=V1();Ge(e,"Unable to find Page context.");const t={...e,...n},{_className:s,canvasBackground:r,devicePixelRatio:i=jq(),onRenderError:o,onRenderSuccess:a,page:c,renderForms:u,renderTextLayer:d,rotate:h,scale:f}=t,{canvasRef:m}=n;Ge(c,"Attempted to render page canvas, but no page was specified.");const y=A.useRef(null);function g(){c&&a&&a(JE(c,f))}function w(E){Dq(E)||(_n(!1,E.toString()),o&&o(E))}const v=A.useMemo(()=>c.getViewport({scale:f*i,rotation:h}),[i,c,h,f]),b=A.useMemo(()=>c.getViewport({scale:f,rotation:h}),[c,h,f]);A.useEffect(function(){if(!c)return;c.cleanup();const{current:k}=y;if(!k)return;k.width=v.width,k.height=v.height,k.style.width=`${Math.floor(b.width)}px`,k.style.height=`${Math.floor(b.height)}px`,k.style.visibility="hidden";const T={annotationMode:u?HN.ENABLE_FORMS:HN.ENABLE,canvas:k,canvasContext:k.getContext("2d",{alpha:!1}),viewport:v};r&&(T.background=r);const P=c.render(T),N=P;return P.promise.then(()=>{k.style.visibility="",g()}).catch(w),()=>mu(N)},[r,c,u,v,b]);const _=A.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return A.useEffect(()=>_,[_]),p.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:bF(m,y),style:{display:"block",userSelect:"none"},children:d?p.jsx(qq,{}):null})}function Xq(n){return"str"in n}function Yq(){const n=V1();Ge(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:r,onRenderTextLayerSuccess:i,page:o,pageIndex:a,pageNumber:c,rotate:u,scale:d}=n;Ge(o,"Attempted to load page text content, but no page was specified.");const[h,f]=Cf(),{value:m,error:y}=h,g=A.useRef(null);_n(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function w(){m&&s&&s(m)}function v(){y&&(_n(!1,y.toString()),t&&t(y))}A.useEffect(function(){f({type:"RESET"})},[o,f]),A.useEffect(function(){if(!o)return;const N=Ay(o.getTextContent()),M=N;return N.promise.then(L=>{f({type:"RESOLVE",value:L})}).catch(L=>{f({type:"REJECT",error:L})}),()=>mu(M)},[o,f]),A.useEffect(()=>{if(m!==void 0){if(m===!1){v();return}w()}},[m]);const b=A.useCallback(()=>{i&&i()},[i]),_=A.useCallback(P=>{_n(!1,P.toString()),r&&r(P)},[r]);function E(){const P=g.current;P&&P.classList.add("selecting")}function k(){const P=g.current;P&&P.classList.remove("selecting")}const T=A.useMemo(()=>o.getViewport({scale:d,rotation:u}),[o,u,d]);return A.useLayoutEffect(function(){if(!o||!m)return;const{current:N}=g;if(!N)return;N.innerHTML="";const M=o.streamTextContent({includeMarkedContent:!0}),L={container:N,textContentSource:M,viewport:T},F=new Am(L),D=F;return F.render().then(()=>{const z=document.createElement("div");z.className="endOfContent",N.append(z);const I=N.querySelectorAll('[role="presentation"]');if(e){let R=0;m.items.forEach((j,O)=>{if(!Xq(j))return;const B=I[R];if(!B)return;const $=e({pageIndex:a,pageNumber:c,itemIndex:O,...j});B.innerHTML=$,R+=j.str&&j.hasEOL?2:1})}b()}).catch(_),()=>mu(D)},[e,_,b,o,a,c,m,T]),p.jsx("div",{className:Nf("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:E,ref:g})}const GN=1;function Qq(n){const t={...vF(),...n},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:i,canvasRef:o,children:a,className:c,customRenderer:u,customTextRenderer:d,devicePixelRatio:h,error:f="Failed to load the page.",height:m,inputRef:y,loading:g="Loading page",noData:w="No page specified.",onGetAnnotationsError:v,onGetAnnotationsSuccess:b,onGetStructTreeError:_,onGetStructTreeSuccess:E,onGetTextError:k,onGetTextSuccess:T,onLoadError:P,onLoadSuccess:N,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:F,onRenderSuccess:D,onRenderTextLayerError:z,onRenderTextLayerSuccess:I,pageIndex:R,pageNumber:j,pdf:O,registerPage:B,renderAnnotationLayer:$=!0,renderForms:V=!1,renderMode:W="canvas",renderTextLayer:q=!0,rotate:K,scale:se=GN,unregisterPage:pe,width:ye,...ge}=t,[Jt,yt]=Cf(),{value:ve,error:X}=Jt,ie=A.useRef(null);Ge(O,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const te=dl(j)?j-1:R??null,ae=j??(dl(R)?R+1:null),Le=K??(ve?ve.rotate:null),ze=A.useMemo(()=>{if(!ve)return null;let Lr=1;const yi=se??GN;if(ye||m){const Dr=ve.getViewport({scale:1,rotation:Le});ye?Lr=ye/Dr.width:m&&(Lr=m/Dr.height)}return yi*Lr},[m,ve,Le,se,ye]);A.useEffect(function(){return()=>{dl(te)&&r&&pe&&pe(te)}},[r,O,te,pe]);function sr(){if(N){if(!ve||!ze)return;N(JE(ve,ze))}if(r&&B){if(!dl(te)||!ie.current)return;B(te,ie.current)}}function jr(){X&&(_n(!1,X.toString()),P&&P(X))}A.useEffect(function(){yt({type:"RESET"})},[yt,O,te]),A.useEffect(function(){if(!O||!ae)return;const yi=Ay(O.getPage(ae)),Dr=yi;return yi.promise.then(If=>{yt({type:"RESOLVE",value:If})}).catch(If=>{yt({type:"REJECT",error:If})}),()=>mu(Dr)},[yt,O,ae]),A.useEffect(()=>{if(ve!==void 0){if(ve===!1){jr();return}sr()}},[ve,ze]);const Df=A.useMemo(()=>dl(te)&&ae&&dl(Le)&&dl(ze)?{_className:s,canvasBackground:i,customTextRenderer:d,devicePixelRatio:h,onGetAnnotationsError:v,onGetAnnotationsSuccess:b,onGetStructTreeError:_,onGetStructTreeSuccess:E,onGetTextError:k,onGetTextSuccess:T,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:L,onRenderError:F,onRenderSuccess:D,onRenderTextLayerError:z,onRenderTextLayerSuccess:I,page:ve,pageIndex:te,pageNumber:ae,renderForms:V,renderTextLayer:q,rotate:Le,scale:ze}:null,[s,i,d,h,v,b,_,E,k,T,M,L,F,D,z,I,ve,te,ae,V,q,Le,ze]),Ey=A.useMemo(()=>pF(ge,()=>ve&&(ze?JE(ve,ze):void 0)),[ge,ve,ze]),Au=`${te}@${ze}/${Le}`;function W1(){switch(W){case"custom":return Ge(u,'renderMode was set to "custom", but no customRenderer was passed.'),p.jsx(u,{},`${Au}_custom`);case"none":return null;case"canvas":default:return p.jsx(Kq,{canvasRef:o},`${Au}_canvas`)}}function q1(){return q?p.jsx(Yq,{},`${Au}_text`):null}function re(){return $?p.jsx(zq,{},`${Au}_annotations`):null}function Ze(){function Lr(Dr){return!!(Dr!=null&&Dr.page)}if(!Lr(Df))throw new Error("page is undefined");const yi=typeof a=="function"?a(Df):a;return p.jsxs(xF.Provider,{value:Df,children:[W1(),q1(),re(),yi]})}function Cy(){return ae?O===null||ve===void 0||ve===null?p.jsx(fd,{type:"loading",children:typeof g=="function"?g():g}):O===!1||ve===!1?p.jsx(fd,{type:"error",children:typeof f=="function"?f():f}):Ze():p.jsx(fd,{type:"no-data",children:typeof w=="function"?w():w})}return p.jsx("div",{className:Nf(s,c),"data-page-number":ae,ref:bF(y,ie),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ze}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:i||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Ey,children:Cy()})}Lq();Js.workerSrc="pdf.worker.mjs";const Jq={idle:"Para activar la experiencia WebAR necesitamos permiso para usar tu cmara.",requesting:"Solicitando acceso a la cmara",granted:"Cmara lista. Si no ves la previsualizacin, asegrate de apuntar a la taza.",error:"No pudimos usar la cmara de tu dispositivo."},Zq=({onGranted:n,className:e="",copy:t={},variant:s="card"})=>{const[r,i]=A.useState("idle"),o=A.useMemo(()=>({...Jq,...t}),[t]),a=async()=>{var u;if(!((u=navigator.mediaDevices)!=null&&u.getUserMedia)){i("error");return}i("requesting");try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}},audio:!1})).getTracks().forEach(h=>h.stop()),i("granted"),n==null||n()}catch(d){console.error("[CameraPermissionPrompt] Error al iniciar cmara:",d),i("error")}},c=s==="overlay"?"w-full max-w-xs rounded-3xl border border-white/20 bg-black/70 p-6 text-center space-y-4 text-slate-200 backdrop-blur":"rounded-2xl border border-white/10 bg-black/40 p-4 space-y-3 text-slate-300/90";return p.jsxs("div",{className:`${c} ${e}`,children:[p.jsx("p",{className:"text-sm leading-relaxed",children:o[r]}),r!=="granted"?p.jsx("button",{type:"button",onClick:a,className:"inline-flex items-center justify-center rounded-full px-6 py-2 text-sm font-semibold bg-purple-500/80 hover:bg-purple-500 transition text-white disabled:opacity-50",disabled:r==="requesting",children:r==="requesting"?"Abriendo cmara":"Activar cmara"}):null]})},e9="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-three.prod.js";let JS=null;function t9(){var n,e;return typeof window>"u"?Promise.reject(new Error("MindAR solo est disponible en el navegador.")):(e=(n=window.MINDAR)==null?void 0:n.IMAGE)!=null&&e.MindARThree?Promise.resolve(window.MINDAR.IMAGE):(JS||(JS=Po(()=>import(e9),[]).then(t=>{var s,r;if(t!=null&&t.MindARThree)return t;if((r=(s=window.MINDAR)==null?void 0:s.IMAGE)!=null&&r.MindARThree)return window.MINDAR.IMAGE;throw new Error("MindAR no se inicializ correctamente.")}).catch(t=>{throw console.error("[loadMindAR] Error al importar MindAR:",t),t})),JS)}const n9="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js";let ZS=null;function s9(){return typeof window>"u"?Promise.reject(new Error("Three.js solo est disponible en el navegador.")):window.__THREE_INSTANCE__?Promise.resolve(window.__THREE_INSTANCE__):(ZS||(ZS=Po(()=>import(n9),[]).then(n=>(window.__THREE_INSTANCE__=n,n))),ZS)}const r9=A.forwardRef(({targetSrc:n="/assets/targets.mind",isCameraReady:e=!1,className:t="",message:s="La taza te escucha.",overlay:r=null},i)=>{const o=A.useMemo(()=>{if(!n||/^(https?:)?\/\//i.test(n))return n;const y="/";if(n.startsWith(y))return n;const g=y.endsWith("/")?y:`${y}/`,w=n.replace(/^\/+/,"");return`${g}${w}`},[n]),a=A.useRef(null),c=A.useRef(null),[u,d]=A.useState("idle"),[h,f]=A.useState("");return A.useEffect(()=>{if(!e||!a.current||!o)return;let m=null,y=null,g=null,w=null,v=null;return(async()=>{d("loading"),f("");try{const _=await s9(),E=await t9();m=new E.MindARThree({container:a.current,imageTargetSrc:o,uiLoading:"no",uiError:"no",uiScanning:"no"});const{renderer:k,scene:T,camera:P}=m;y=k;const N=new _.HemisphereLight("#ffffff","#333344",1);T.add(N);const M=new _.DirectionalLight("#ffffff",.8);M.position.set(.5,1,.5),T.add(M);const L=m.addAnchor(0),{GLTFLoader:F}=await Po(()=>import("./GLTFLoader-ab5cd9e3.js"),[]);v=(await new F().loadAsync("/webar/taza/gato-abstracto.glb")).scene,v.scale.set(.6,.6,.6),v.position.set(0,.3,0),v.rotation.set(0,Math.PI,0),L.group.add(v),await m.start();const I=m.video;I&&!a.current.contains(I)&&(I.setAttribute("playsinline","true"),I.muted=!0,I.style.position="absolute",I.style.top="0",I.style.left="0",I.style.width="100%",I.style.height="100%",I.style.objectFit="cover",I.style.zIndex="0",I.style.display="block",a.current.appendChild(I),w=I,c.current=I),d("running");const R=new _.Clock;g=()=>{const j=R.getElapsedTime();if(v){v.rotation.y=j*.4;const O=.6+Math.sin(j*.8)*.03;v.scale.set(O,O,O)}y.render(T,P)},y.setAnimationLoop(g)}catch(_){console.error("[MindARScene] Error al iniciar AR:",_),f((_==null?void 0:_.message)??"No pudimos iniciar la experiencia AR."),d("error")}})(),()=>{var _;y&&g&&y.setAnimationLoop(null),m&&(m.stop(),(_=m.renderer)==null||_.dispose()),c.current=null,w&&w.parentElement===a.current&&a.current.removeChild(w)}},[e,o]),A.useEffect(()=>{},[s]),A.useImperativeHandle(i,()=>({async captureFrame(){const m=c.current;if(!m||m.videoWidth===0||m.videoHeight===0)return null;const y=document.createElement("canvas");return y.width=m.videoWidth,y.height=m.videoHeight,y.getContext("2d").drawImage(m,0,0,y.width,y.height),await new Promise(w=>{y.toBlob(v=>w(v),"image/jpeg",.95)})}})),p.jsxs("div",{className:`relative w-full bg-transparent rounded-3xl overflow-hidden ${t}`,"data-ar-container":"true",children:[p.jsx("div",{ref:a,className:"absolute inset-0"}),u==="idle"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-400 text-sm pointer-events-none",children:"Esperando a que actives la cmara"}),u==="loading"&&p.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-200 text-sm bg-black/40 pointer-events-none",children:[p.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-2 border-purple-300 border-t-transparent mb-3"}),"Preparando portal..."]}),u==="error"&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center px-6 text-sm text-red-300 bg-black/70 pointer-events-none",children:h}),r&&p.jsx("div",{className:"absolute inset-0",children:typeof r=="function"?r():r})]})}),WN=["La taza te escucha."],qN=({targetSrc:n="/assets/targets.mind",phrases:e=WN,onExit:t})=>{const[s,r]=A.useState(!1),[i,o]=A.useState(0),a=A.useRef(null),c=A.useMemo(()=>Array.isArray(e)&&e.length>0?e:WN,[e]);A.useEffect(()=>{o(0)},[n]);const u=()=>{o(y=>(y+1)%c.length)},d=()=>{t==null||t()},h=A.useCallback(async()=>{var y,g;if(!((y=a.current)!=null&&y.captureFrame)){Te({description:"La cmara an no est lista para capturar."});return}try{const w=await a.current.captureFrame();if(!w){Te({description:"No pudimos obtener la captura. Intenta de nuevo."});return}const v=new File([w],"miniverso-taza.jpg",{type:"image/jpeg"}),b="#EstoNoEsUnaTaza  Comparte tu portal y etiqueta a @gatoencerradoai para aparecer en la galera.";if(navigator.share&&((g=navigator.canShare)!=null&&g.call(navigator,{files:[v]})))await navigator.share({files:[v],title:"Miniverso Taza",text:b});else{const _=URL.createObjectURL(w),E=document.createElement("a");E.href=_,E.download="miniverso-taza.jpg",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_),Te({description:"Guardamos la captura. Comprtela desde tu galera con #EstoNoEsUnaTaza."})}}catch(w){console.error("[ARExperience] Error al compartir captura:",w),Te({description:"No pudimos compartir la captura. Intenta ms tarde."})}},[]),f="rounded-full bg-black/55 text-white p-3 shadow-lg border border-white/15 hover:bg-black/70 transition backdrop-blur",m=s?p.jsx("div",{className:"absolute inset-x-0 bottom-5 flex justify-center pointer-events-none",children:p.jsxs("div",{className:"flex items-center gap-3 pointer-events-auto",children:[p.jsx("button",{type:"button",onClick:u,className:f,"aria-label":"Nueva frase",children:p.jsx(M5,{size:18})}),p.jsx("button",{type:"button",onClick:h,className:f,"aria-label":"Compartir captura",children:p.jsx(D5,{size:18})}),p.jsx("button",{type:"button",onClick:d,className:f,"aria-label":"Salir de AR",children:p.jsx(b1,{size:18})})]})}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-6",children:p.jsx(Zq,{onGranted:()=>r(!0),variant:"overlay",copy:{idle:"Activa tu cmara para revelar la frase de tu taza."}})});return p.jsxs("section",{className:"space-y-4 -mx-4 sm:mx-0",children:[p.jsx(r9,{ref:a,targetSrc:n,isCameraReady:s,message:c[i],className:"w-full min-h-[75vh] sm:min-h-[80vh]",overlay:m}),p.jsx("p",{className:"text-sm text-slate-400/80 px-4 sm:px-0",children:"Si el marcador no se detecta de inmediato, ajusta la iluminacin y mantn la taza completa dentro del encuadre."})]})};function KN({title:n="Miniverso Sonoro",subtitle:e="",videoUrl:t,musicOptions:s=[],poems:r=[],highlights:i=[],showHeader:o=!0}){const a=A.useRef(null),c=A.useRef(null),u='data:image/svg+xml;utf8,<svg%20xmlns="http://www.w3.org/2000/svg"%20width="120"%20height="120"><filter%20id="n"><feTurbulence%20type="fractalNoise"%20baseFrequency="0.7"%20numOctaves="2"%20stitchTiles="stitch"/></filter><rect%20width="120"%20height="120"%20filter="url(%23n)"%20opacity="0.2"/></svg>',[d,h]=A.useState(!1),[f,m]=A.useState(""),[y,g]=A.useState(""),[w,v]=A.useState(!1),[b,_]=A.useState(typeof window<"u"?window.innerWidth>=1024:!1);A.useEffect(()=>{const M=a.current;if(!M)return;const L=()=>{h(M.videoHeight>M.videoWidth)};return M.addEventListener("loadedmetadata",L),()=>M.removeEventListener("loadedmetadata",L)},[t]);const E=A.useMemo(()=>{const M=r.find(L=>L.id===y);return(M==null?void 0:M.text)??""},[r,y]),k=A.useMemo(()=>s.length>0?s:[{id:"silencio",label:"Silencio",url:""}],[s]);A.useEffect(()=>{c.current&&(f?(c.current.volume=.8,c.current.play().catch(()=>{})):c.current.pause())},[f]),A.useEffect(()=>{v(!1)},[t]),A.useEffect(()=>{if(typeof window>"u")return;const M=()=>{_(window.innerWidth>=1024)};return M(),window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]);const T=A.useMemo(()=>t?/\.(m4a|mp3|wav|aac|flac|ogg)(\?.*)?$/i.test(t):!1,[t]),P=A.useCallback(()=>{v(!0)},[]),N=o||i.length>0?p.jsxs("div",{className:"space-y-4",children:[o&&p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Sala de escucha inmersiva"}),p.jsx("h3",{className:"font-display text-4xl text-slate-50",children:n}),e&&p.jsx("p",{className:"max-w-2xl text-slate-300/80 leading-relaxed",children:e})]}),i.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 text-xs uppercase tracking-[0.25em] text-slate-400",children:i.map((M,L)=>p.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-[0.6rem]",children:M},L))})]}):null;return p.jsxs("div",{className:"space-y-10",children:[N,p.jsxs("div",{className:`relative mx-auto border border-white/10 rounded-3xl overflow-hidden shadow-2xl backdrop-blur-3xl transition-all duration-500 ${b?"w-full max-w-5xl aspect-[16/9]":d?"w-[340px] h-[620px]":"w-full max-w-5xl aspect-video"}`,children:[w?p.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center gap-4 bg-black/60 px-6 py-8 text-center",children:[p.jsxs("p",{className:"text-sm text-slate-300",children:["No pudimos cargar este ",T?"audio":"video"," en esta vista."]}),t?p.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:T?"Escuchar en nueva pestaa":"Abrir en nueva pestaa"}):p.jsx("p",{className:"text-xs text-slate-500",children:"Revisa la fuente del archivo."})]}):p.jsx("video",{ref:a,src:t,autoPlay:!0,muted:!0,loop:!0,playsInline:!0,className:"w-full h-full object-cover",onError:P},t??"miniverso-sonoro-video"),!w&&p.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 pointer-events-none",style:{backgroundImage:`linear-gradient(180deg, rgba(255,255,255,0.05), rgba(15,23,42,0.7)), url("${u}")`,backgroundSize:"cover",backgroundBlendMode:"screen, overlay",opacity:.85}}),!w&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"absolute top-0 left-0 right-0 p-6 bg-gradient-to-b from-black/60 to-transparent",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-300",children:"Cmara de resonancia"}),p.jsx("p",{className:"text-sm text-slate-100 opacity-90",children:"Video ritual errante"})]}),E&&p.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 text-center bg-gradient-to-t from-black/70 to-transparent",children:p.jsx("p",{className:"text-lg leading-relaxed font-light text-slate-100 drop-shadow-xl",children:E})})]})]}),p.jsxs("div",{className:"grid md:grid-cols-2 gap-10",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400",children:"Elige la msica"}),p.jsx("select",{className:"w-full rounded-2xl border border-white/10 bg-black/60 px-4 py-2 text-white",value:f,onChange:M=>m(M.target.value),children:k.map(M=>p.jsx("option",{value:M.url,children:M.label},M.id))}),p.jsx("audio",{ref:c,src:f,loop:!0})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400",children:"Elige un poema"}),p.jsxs("select",{className:"w-full rounded-2xl border border-white/10 bg-black/60 px-4 py-2 text-white",value:y,onChange:M=>g(M.target.value),children:[p.jsx("option",{value:"",children:"Ninguno"}),r.map(M=>p.jsx("option",{value:M.id,children:M.label},M.id))]})]})]})]})}function i9(){const[n,e]=A.useState("segment"),[t,s]=A.useState([]),[r,i]=A.useState(!1),[o,a]=A.useState(null),[c,u]=A.useState(null),[d,h]=A.useState(""),[f,m]=A.useState(!1),[y,g]=A.useState(0),w=async()=>{try{const k=await(await fetch("/data/novela-preview.json")).json();s(k.segments||[])}catch(E){console.error("Error cargando segmentos:",E)}},v=(E,k)=>{y>=4||(a(E),u(k),h(""),i(!0))},b=()=>{i(!1),a(null),u(null),h("")};return{mode:n,setMode:e,segments:t,loadSegments:w,isModalOpen:r,openModal:v,closeModal:b,activeSegment:o,activePlan:c,reflection:d,setReflection:h,loading:f,reflectionCount:y,sendReflection:async()=>{if(d.trim()){m(!0);try{const{data:E,error:k}=await fetch("/functions/v1/send-blog-reflection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({segment_id:o.id,plan:c,reflection:d,author:"Invitado"})});k&&console.error("Supabase error:",k),g(T=>Math.min(T+1,4)),alert("Reflexin enviada."),b()}catch(E){console.error("Error enviando reflexin:",E)}m(!1)}}}}function o9(){const[n,e]=A.useState(!0),t=A.useRef(null);return A.useEffect(()=>{if(typeof window>"u"||!("ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0))return;const r=()=>{e(!1),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{e(!0)},500)};return window.addEventListener("touchstart",r,{passive:!0}),window.addEventListener("touchmove",r,{passive:!0}),()=>{window.removeEventListener("touchstart",r),window.removeEventListener("touchmove",r),t.current&&clearTimeout(t.current)}},[]),n}function a9({isOpen:n,onClose:e,segment:t,plan:s,reflection:r,setReflection:i,onSubmit:o,loading:a}){var u;if(A.useEffect(()=>{if(n)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[n]),!n)return null;const c={academic:"Plano Acadmico",psychological:"Plano Psicolgico",narrative:"Plano Narrativo",theatrical:"Plano Teatral"};return p.jsx("div",{className:"fixed inset-0 z-[999] flex items-center justify-center bg-black/80 backdrop-blur-3xl px-4",children:p.jsxs("div",{className:"w-full max-w-xl rounded-3xl border border-purple-400/40 bg-black/90 p-6 shadow-[0_30px_80px_rgba(15,23,42,0.75)]",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300/80",children:"Plano"}),p.jsx("h2",{className:"text-2xl font-semibold text-white",children:c[s]??"Plano"})]}),p.jsx("button",{onClick:e,className:"text-sm text-slate-300 hover:text-white",children:"Cerrar "})]}),p.jsx("p",{className:"text-sm text-slate-300/80 mb-6 leading-relaxed",children:(u=t==null?void 0:t.questions)==null?void 0:u[s]}),p.jsx("textarea",{className:"w-full min-h-[160px] rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-100 outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500/40 transition",placeholder:"Escribe tu reflexin aqu",value:r,onChange:d=>i(d.target.value)}),p.jsxs("div",{className:"mt-6 flex items-center justify-between gap-4",children:[p.jsx("button",{onClick:e,className:"text-sm uppercase tracking-[0.4em] text-slate-400 hover:text-white",children:"Cancelar"}),p.jsx("button",{onClick:o,disabled:a,className:"rounded-full bg-gradient-to-r from-purple-600/90 to-indigo-600/80 px-6 py-3 text-sm font-semibold text-white transition hover:from-purple-500/90 hover:to-indigo-500/90 disabled:opacity-60",children:a?"Enviando":"Enviar reflexin"})]})]})})}const l9=[{plan:"academic",label:"Acadmico",Icon:ZC},{plan:"psychological",label:"Psicolgico",Icon:b5},{plan:"narrative",label:"Narrativo",Icon:v1},{plan:"theatrical",label:"Teatral",Icon:O5}];function c9({iconsVisible:n=!0,onSelect:e,disabled:t=!1,isTouchDevice:s=!1,readingMode:r="dark"}){return p.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:l9.map(({plan:i,label:o,Icon:a})=>{const c=s?n?"opacity-100":"opacity-50":"opacity-0 group-hover:opacity-100",u=r==="premium"?"text-[#3b2a1f]":"text-white",d=r==="premium"?"stroke-[#3b2a1f]":"stroke-current";return p.jsxs("button",{type:"button",onClick:()=>!t&&e(i),disabled:t,className:`group flex flex-col items-center justify-center rounded-full border border-white/10 bg-white/5 py-3 text-[0.6rem] uppercase tracking-[0.4em] text-white transition-opacity duration-300 ${c} ${t?"cursor-not-allowed opacity-40":`hover:border-purple-400 hover:text-white ${u}`}`,"aria-label":`Abrir plano ${o}`,children:[p.jsx(a,{size:18,className:d}),p.jsx("span",{className:`mt-1 ${u}`,children:o})]},i)})})}function u9(){const{segments:n,loadSegments:e,openModal:t,activeSegment:s,activePlan:r,reflection:i,setReflection:o,isModalOpen:a,closeModal:c,sendReflection:u,loading:d,reflectionCount:h}=i9(),f=o9(),m=h>=4,[y,g]=A.useState(!1),[w,v]=A.useState("dark"),b={dark:"bg-black/40 border-white/10 text-slate-100",premium:"bg-[#f7f2e8] border-[#c4bdae] text-[#3b2a1f] shadow-[0_20px_35px_rgba(0,0,0,0.15)]"},_={dark:"text-slate-100",premium:"text-[#3b2a1f]"},E={dark:'"Literata", "Times New Roman", serif',premium:'"Cormorant Garamond", "Palatino Linotype", serif'};return A.useEffect(()=>{e()},[]),A.useEffect(()=>{if(typeof window>"u")return;const k="ontouchstart"in window||(navigator.maxTouchPoints??0)>0||(navigator.msMaxTouchPoints??0)>0;g(k)},[]),p.jsxs("div",{className:"w-full min-h-screen px-4 py-8 text-slate-100",children:[p.jsxs("div",{className:"mx-auto flex w-full max-w-3xl flex-col items-center gap-6",children:[p.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4",children:p.jsx("div",{className:"flex gap-3 items-center",children:["dark","premium"].map(k=>p.jsx("button",{onClick:()=>v(k),className:`w-8 h-8 rounded-full border transition ${w===k?"border-white/90 bg-white/80 shadow-lg":"border-white/30 bg-black/20"}`,"aria-label":`Modo ${k}`,children:p.jsx("span",{className:"hidden",children:k})},k))})}),m&&p.jsx("div",{className:"w-full max-w-[650px] rounded-2xl border border-rose-500/40 bg-rose-500/10 px-4 py-3 text-center text-sm text-rose-200 shadow-lg shadow-rose-900/30",children:"Has alcanzado el lmite de reflexiones del preview."}),p.jsx("div",{className:"space-y-6",children:n.map(k=>p.jsxs("div",{className:`group mx-auto max-w-[650px] space-y-6 rounded-3xl border px-8 py-10 backdrop-blur-md shadow-[0_20px_50px_rgba(0,0,0,0.45)] transition-colors duration-500 ${b[w]}`,children:[p.jsx("p",{className:`text-base leading-relaxed ${_[w]}`,style:{fontFamily:E[w],lineHeight:1.8},children:k.text}),p.jsx(c9,{onSelect:T=>t(k,T),iconsVisible:f,isTouchDevice:y,disabled:m,readingMode:w})]},k.id))}),")}"]}),p.jsx(a9,{isOpen:a,onClose:c,segment:s,plan:r,reflection:i,setReflection:o,loading:d,onSubmit:u})]})}async function d9({showcaseId:n,user:e}){if(!n)return{success:!1,error:new Error("Falta el identificador del showcase")};const t={showcase_id:n,user_id:(e==null?void 0:e.id)??null,user_email:(e==null?void 0:e.email)??null,metadata:{recorded_at:new Date().toISOString()}},{error:s}=await nt.from("showcase_likes").insert(t);return{success:!s,error:s}}Js.workerSrc=`https://unpkg.com/pdfjs-dist@${Yk}/build/pdf.worker.min.mjs`;const rp={miniversos:{label:"Miniverso Trgico",type:"tragedia",intro:"Aqu nace la obra dentro de la obra. El gato encerrado de Es un gato encerrado.",notaAutoral:"Un escaparate no es solo para ver. Es para dejarse reflejar.",narrative:["En este miniverso puedes entrar al mundo de Silvestre: escuchar sus ecos, leer a sus fantasmas o conversar directamente con su trasunto, el Payasito Tiste, en un chat que habita la herida."],ctaLabel:"Hablar con Silvestre",ctaDescription:"Activa el vnculo con la voz que an no se apaga. Aqu es donde Silvestre o lo que queda de l te responde."},copycats:{label:"#CopyCats",type:"post-videos",slug:"carta-a-copycats",intro:"En el Miniverso Cine conviven dos pulsos del mismo universo: la mirada crtica y desbordada de CopyCats y la herida luminosa de Quirn. Aqu puedes asomarte a cartas creativas, ensayos abiertos y al proceso ntimo detrs del cortometraje que naci de nombrar tres tabes: el suicidio, el tarot y el arte como puente hacia lo que no sabemos decir.",videos:[{id:"copycats-v2",title:"Teaser de CopyCats",author:"Viviana Gonzlez",duration:"2:46",url:"https://player.vimeo.com/video/959781265?h=9b3b018f3e"},{id:"copycats-v3",title:"Teaser de Quirn",author:"Viviana Gonzlez",duration:"0:58",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Cine%20-%20teasers/Quiron.mp4"}],notaAutoral:"La cmara mir lo que el teatro no poda sostener. CopyCats cuestiona; Quirn hiere con luz. Este espacio guarda esas miradas."},lataza:{label:"EstoNoEsUnaTaza",type:"object-webar",slug:"taza-que-habla",subtitle:"Esta no es una taza. Es un boleto.",intro:"Un objeto cotidiano convertido en smbolo de comunin. Cada taza est vinculada a un sentimiento. Cada sentimiento, a una historia personal.",note:"Apunta tu cmara a la taza. La pista aparecer.",ctaLabel:"Probar activacin WebAR",ctaLink:"/webar/taza/index.html",ctaMessage:"Cuando liberes la activacin WebAR, descubrirs la pista que le corresponde a tu taza.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Merch/tazas.mp4",sentiments:["Es tu manera de apoyar la causa social de Gato Encerrado."],phrases:["La taza te habla."],instructions:["Permite el acceso a tu cmara para iniciar.","Coloca la taza completa en cuadro, con buena iluminacin.","Mantn el marcador visible hasta que aparezca la orbe."],comments:[{id:"la-taza-comment-1",quote:"La taza me mostr una frase que me persigui toda la semana.",author:"Usuario annimo"},{id:"la-taza-comment-2",quote:"No entend nada hasta que le agarr el modo.",author:"Sofa B."}],notaAutoral:"Un objeto cotidiano que abri un portal. La Taza no acompaa: revela. Lo que sostiene no es barro, sino vnculo."},miniversoNovela:{label:"Miniverso Novela",type:"blog-series",slug:null,intro:"Aqu se cruzan la autoficcin, la novela grfica y las vidas que an no caben en escena. Fragmentos, procesos y pistas que solo existen cuando alguien las lee.",notaAutoral:"La novela es donde la escena se desborda. Fragmentos que respiran distinto cuando alguien los lee. Aqu la historia sigue probndose.",entries:[{id:"compra-libro",title:"Edicin fsica",description:"La novela completa en su versin impresa. Incluye QR secreto.",image:"/assets/edicion-fisica.png",type:"purchase-link",url:"/comprar-novela"},{id:"novel-apps",title:"Activa tu novela",description:"Cada formato tiene su propia app interactiva. La novela de autoficcin ya se puede activar; el cmic transmedia abre pronto su lector con pistas y capas expandidas.",type:"novel-apps",apps:[{id:"autoficcion-app",name:"Lector interactivo",description:"Lee los primeros fragmentos de la novela y desbloquea preguntas guiadas en cuatro planos de lectura: acadmico, psicolgico, narrativo y teatral.",snippet:{tagline:"Contraportada transmedial",text:"Al escanear el QR de tu ejemplar se desbloquean lecturas personalizadas. Aqu puedes probar una versin de inicio.",sideLayout:!0},ctaLabel:"Leer fragmentos",ctaAction:"openAutoficcionPreview"}]},{id:"comentarios-lectores",title:"Conversaciones con lectores",type:"quotes",quotes:[{quote:"No saba que un libro poda hablarme a mitad de la pgina.",author:"Lectora annima"}]}],ctaLabel:"Leer los primeros fragmentos"},miniversoSonoro:{label:"Miniverso Sonoro  Suea en Tres Capas",type:"audio-dream",intro:"Este miniverso mezcla imgenes errantes, pistas sonoras y palabras mviles para que crees tu propia atmsfera. Solo entra, prende un video, ponle la msica que quieras, elige un poema y deja que la combinacin te sorprenda.",highlights:["Video que fluye solo.","Msica que t eliges.","Poemas que respiran en pantalla."],exploration:["El video corre por su cuenta  cambia con cada visita.","T eliges la msica  ajusta el nimo del sueo.","Escoge un poema  y observa cmo se desliza mientras todo ocurre."],closing:["Cada mezcla es irrepetible.","Cada combinacin abre un sueo distinto.","Entra y crea el tuyo."],videoUrl:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/videos-v/Vacio.mov",musicOptions:[{id:"silencio",label:"Silencio",url:""},{id:"ensayo-abierto",label:"Ensayo Abierto (pista)",url:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/Sonoridades/audio/cat_theme.m4a"}],poems:[{id:"pulmon",label:"Poema 1  Pulmn",text:"La noche se abre como un pulmn cansado."},{id:"cuerpo",label:"Poema 2  Cuerpo",text:"Lo que cae del sueo tambin cae del cuerpo."}],notaAutoral:"Imagen, msica y palabra en suspensin. Cada mezcla inventa otro nimo. Aqu el sueo se edita solo."}},mv=({showcaseId:n,title:e,description:t,buttonLabel:s})=>{const{user:r}=gy(),[i,o]=A.useState("idle"),a=A.useCallback(async()=>{if(i==="loading")return;o("loading");const{success:c,error:u}=await d9({showcaseId:n,user:r});if(!c){console.error("[ShowcaseReaction] Error guardando like:",u),Te({description:"No pudimos registrar el like. Intenta de nuevo ms tarde."}),o("idle");return}o("success"),Te({description:"Gracias por tu apoyo en este showcase."})},[n,i,r]);return p.jsxs("div",{className:"mt-4 flex flex-col gap-3 rounded-2xl border border-white/10 bg-black/20 p-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-3",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[0.6rem] uppercase tracking-[0.35em] text-slate-500",children:e}),p.jsx("p",{className:"text-sm text-slate-300 leading-relaxed",children:t})]}),p.jsx("button",{type:"button",onClick:a,className:`rounded-full p-3 transition ${i==="success"?"bg-gradient-to-r from-pink-500 via-rose-500 to-yellow-500 shadow-[0_0_25px_rgba(244,114,182,0.6)] text-white border border-transparent":"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 text-white hover:from-purple-500 hover:to-indigo-500"}`,disabled:i==="loading",children:p.jsx(Yj,{size:20})})]}),s?p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:i==="loading"?"Enviando":s}):null]})},h9=[{id:"miniversos",title:"Miniverso Trgico",description:"La obra como un miniverso dentro del mismo universo que ha generado.",icon:qj,iconClass:"text-purple-300",notaAutoral:"Aqu nunca abaca bien. Por lo menos no hasta el final."},{id:"lataza",title:"Miniverso Taza",description:"Objeto ritual con WebAR. Una excusa para seguir la historia desde lo cotidiano.",icon:_5,iconClass:"text-amber-300",notaAutoral:"Un objeto cotidiano que abri un portal. La Taza no acompaa: revela. Lo que sostiene no es barro, sino vnculo."},{id:"miniversoNovela",title:"Miniverso Novela",description:"Desde la autoficcin hasta las vietas de la novela grfica.",icon:ZC,iconClass:"text-emerald-300",notaAutoral:"La novela es donde la escena se desborda. Fragmentos que respiran distinto cuando alguien los lee. Aqu la historia sigue probndose."},{id:"copycats",title:"Miniverso Cine",description:"Quirn y otros filmes que piensan el cuerpo del Gato en clave cinematogrfica.",icon:tk,iconClass:"text-rose-300",notaAutoral:"La cmara mir lo que el teatro no poda sostener. CopyCats cuestiona; Quirn hiere con luz. Este espacio guarda esas miradas."},{id:"miniversoSonoro",title:"Miniverso Sonoro",description:"Capas de imagen, sonido y poema para soar.",icon:Qj,iconClass:"text-cyan-300",notaAutoral:"Imagen, msica y palabra en suspensin. Cada mezcla inventa otro nimo. Aqu el sueo se edita solo."},{id:"detodxs",title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice del universo.",icon:sk,iconClass:"text-lime-300",notaAutoral:"Tecnologa como acompaamiento, no como solucin. Experiencias que cuidan, preguntan y extienden la historia cuando nadie est mirando."},{id:"clubdegato",title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre el universo.",icon:Zj,iconClass:"text-indigo-300",notaAutoral:"El rastro vivo del proyecto. Crnicas, ecos, desvos. Donde lo que pasa en escena encuentra su segunda vida."}],XN=[{id:"tratamientos",title:"Tratamientos emocionales",description:"Tu suscripcin asigna hasta 6 sesiones a un joven sin costo para su familia. Isabel Ayuda para la Vida, A.C. activa las sesiones cuando se detecta riesgo emocional.",icon:Xj,metric:"6 sesiones promedio por suscriptor"},{id:"residencias",title:"Residencias creativas",description:"Laboratorios de 2 meses donde arte y acompaamiento reparan memoria y cuerpo. Cada 17 suscripciones financian una residencia completa.",icon:P5,metric:"3 residencias activas por temporada"},{id:"app-escolar",title:"App Causa Social en escuelas",description:"Implementacin y seguimiento semestral de la app de deteccin temprana. 75 suscripciones financian 1 escuela por semestre.",icon:sk,metric:"15 escuelas atendidas cada semestre"}],f9=()=>{const[n,e]=A.useState(!1),[t,s]=A.useState(null),[r,i]=A.useState({}),o=A.useRef(null),[a,c]=A.useState(XN[0].id),[u,d]=A.useState(null),[h,f]=A.useState(null),[m,y]=A.useState(null),[g,w]=A.useState(null),v=A.useRef(null),b=A.useRef(null),[_,E]=A.useState(0),k=Math.max(_-48,320),[T,P]=A.useState(!1),[N,M]=A.useState(!1),[L,F]=A.useState(!1),[D,z]=A.useState(!1),[I,R]=A.useState(!1),[j,O]=A.useState(!1),[B,$]=A.useState(!1),[V,W]=A.useState(""),[q,K]=A.useState(""),[se,pe]=A.useState(!1),ye=A.useRef(null),ge=A.useRef(""),Jt=A.useCallback(()=>{e(!0)},[]),yt=A.useCallback(()=>{e(!1)},[]),ve=A.useCallback(async G=>{const le=rp[G];if(!(!le||le.type==="blog-series"||!le.slug)){i(Pe=>({...Pe,[G]:{...Pe[G]??{},status:"loading",error:null}}));try{const Pe=await mG(le.slug);if(!Pe)throw new Error("No encontramos el texto asociado a este miniverso.");i(rr=>({...rr,[G]:{status:"success",post:Pe,error:null}}))}catch(Pe){i(rr=>({...rr,[G]:{status:"error",post:null,error:(Pe==null?void 0:Pe.message)??"Ocurri un error al cargar este showcase."}}))}}},[]),X=A.useCallback(G=>{if(rp[G]){s(Pe=>Pe===G?null:G);const le=rp[G];if(le.slug&&le.type!=="blog-series"){const Pe=r[G];(!Pe||Pe.status==="error")&&ve(G)}return}Jt()},[Jt,ve,r]),ie=A.useCallback(G=>{var le;G&&(window.dispatchEvent(new CustomEvent("gatoencerrado:open-blog",{detail:{slug:G}})),(le=document.getElementById("dialogo-critico"))==null||le.scrollIntoView({behavior:"smooth",block:"start"}))},[]),te=A.useCallback(async G=>{if(G)try{await fetch("http://localhost:3000/api/silvestre",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mensaje:G})})}catch(le){console.error("[Silvestre Voice] Error sending transcript:",le),K("No pudimos enviar tu mensaje de voz. Intenta nuevamente ms tarde.")}},[]),ae=A.useCallback(()=>{if(typeof window>"u")return;B?j||O(!0):(O(!0),$(!0));const G=window.SpeechRecognition||window.webkitSpeechRecognition;if(!G){K("Tu navegador no permite activar el micrfono. Puedes escribirle a Silvestre si prefieres."),window.dispatchEvent(new CustomEvent("gatoencerrado:open-silvestre"));return}if(!ye.current){const le=new G;le.continuous=!0,le.interimResults=!0,le.lang="es-MX",le.maxAlternatives=1,le.onresult=Pe=>{const ke=Array.from(Pe.results).map(rs=>{var de;return((de=rs[0])==null?void 0:de.transcript)??""}).join(" ");ge.current=ke,W(ke)},le.onerror=Pe=>{console.error("[Silvestre Voice] recognition error:",Pe),K("No pudimos acceder al micrfono. Intenta nuevamente."),pe(!1)},le.onend=()=>{pe(!1);const Pe=ge.current.trim();Pe&&(te(Pe),ge.current="")},ye.current=le}if(!se){try{ye.current.start(),pe(!0),K("")}catch(le){console.error("[Silvestre Voice] start error:",le),K("No pudimos abrir el micrfono. Intenta nuevamente.")}window.dispatchEvent(new CustomEvent("gatoencerrado:open-silvestre"))}},[B,se,j,te]),Le=A.useCallback(G=>{G!=null&&G.src&&d({src:G.src,title:G.title??"",description:G.description??""})},[]),ze=A.useCallback(()=>{d(null)},[]),sr=A.useCallback(()=>{var G;(G=b.current)==null||G.scrollIntoView({behavior:"smooth",block:"start"})},[]);A.useCallback(G=>{G!=null&&G.src&&(f({src:G.src,title:G.title??"",description:G.description??""}),y(null),w(null))},[]);const jr=A.useCallback(()=>{f(null),y(null),w(null)},[]),Df=A.useCallback(()=>{P(!0),typeof window<"u"&&window.matchMedia("(max-width: 768px)").matches?(M(!0),document.body.classList.add("overflow-hidden")):M(!1)},[]),Ey=A.useCallback(()=>{P(!1),M(!1),document.body.classList.remove("overflow-hidden")},[]),Au=A.useCallback(()=>{F(!0)},[]),W1=A.useCallback(()=>{F(!1)},[]);A.useEffect(()=>{L?document.body.classList.add("overflow-hidden"):!T&&!N&&document.body.classList.remove("overflow-hidden")},[L,T,N]);const q1=A.useCallback(({numPages:G})=>{y(G)},[]),re=t?rp[t]:null,Ze=t?r[t]:null,Cy=A.useMemo(()=>{var G;return(G=Ze==null?void 0:Ze.post)!=null&&G.content?Ze.post.content.split(/\n{2,}/).map(le=>le.trim()).filter(Boolean):[]},[Ze]);A.useEffect(()=>{t&&o.current&&o.current.scrollIntoView({behavior:"smooth",block:"start"})},[t]),A.useEffect(()=>{R(!1)},[t]),A.useEffect(()=>{t!=="lataza"&&(P(!1),M(!1),document.body.classList.remove("overflow-hidden"))},[t]),A.useEffect(()=>{if(!u&&!h)return;const G=le=>{le.key==="Escape"&&(u&&ze(),h&&jr())};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[u,h,ze,jr]),A.useEffect(()=>{if(!h)return;const G=()=>{v.current&&E(v.current.offsetWidth)};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[h]),A.useEffect(()=>()=>{document.body.classList.remove("overflow-hidden")},[]),A.useEffect(()=>()=>{var G,le;(le=(G=ye.current)==null?void 0:G.abort)==null||le.call(G),ye.current=null},[]);const Lr=G=>{Te({description:G||"Muy pronto liberaremos la activacin WebAR de este objeto."})},yi=A.useCallback(async()=>{var G;if(typeof navigator>"u"||!((G=navigator.mediaDevices)!=null&&G.getUserMedia)){Te({description:"Tu dispositivo no permite abrir la cmara desde el navegador."});return}try{(await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"}}})).getTracks().forEach(Pe=>Pe.stop()),Te({description:"Listo. En la versin final validaremos el QR con geolocalizacin para redimir tu ejemplar."})}catch(le){console.error("Error al acceder a la cmara:",le),Te({description:"No pudimos acceder a la cmara. Revisa los permisos e intntalo de nuevo."})}},[]),Dr=A.useCallback(G=>{if(G){if(G.ctaUrl){window.open(G.ctaUrl,"_blank","noopener,noreferrer");return}if(G.ctaAction==="openCamera"){yi();return}if(G.ctaAction==="openAutoficcionPreview"){z(!0);return}Te({description:G.ctaMessage||"Muy pronto liberaremos esta app interactiva."})}},[yi]),If=()=>re!=null&&re.notaAutoral?p.jsxs(J.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{duration:.45,ease:"easeOut"},className:"rounded-2xl border border-white/10 p-6 bg-black/30 text-slate-300/80 text-sm leading-relaxed mt-4 shadow-[0_25px_80px_rgba(0,0,0,0.45)]",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300 mb-2",children:"Nota Autoral"}),p.jsx("p",{children:re.notaAutoral})]},re.id):null,fT=(G="Pronto liberaremos la carta completa de este miniverso.")=>re!=null&&re.slug?(Ze==null?void 0:Ze.status)==="loading"?p.jsx("p",{className:"text-slate-400 text-sm",children:"Cargando la carta que acompaa a este miniverso"}):(Ze==null?void 0:Ze.status)==="error"?p.jsx("p",{className:"text-red-300 text-sm",children:Ze.error}):(Ze==null?void 0:Ze.status)==="success"&&Ze.post?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-slate-400 mb-4",children:[Ze.post.author?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(v1,{size:16}),Ze.post.author,Ze.post.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",Ze.post.author_role]}):null]}):null,Ze.post.published_at?p.jsx("span",{children:new Date(Ze.post.published_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}):null]}),p.jsx("h4",{className:"font-display text-2xl text-slate-100 mb-6",children:Ze.post.title}),p.jsx("div",{className:"space-y-5 text-slate-200 leading-relaxed font-light",children:Cy.length===0?p.jsx("p",{children:"Muy pronto abriremos el expediente completo de este miniverso. Gracias por tu curiosidad."}):Cy.map((le,Pe)=>p.jsx("p",{children:le},Pe))})]}):p.jsx("p",{className:"text-slate-400 text-sm",children:G}):null,qF=()=>{var le,Pe,rr;if(!re)return p.jsx("p",{className:"text-slate-400 text-sm",children:"Selecciona un miniverso para explorar su carta y materiales."});if(re.type==="object-webar")return p.jsxs("div",{className:"grid gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6",children:[p.jsx("div",{className:"rounded-3xl border border-white/10 overflow-hidden bg-black/30",children:t==="lataza"&&T&&!N?p.jsx("div",{className:"p-0 sm:p-4",children:p.jsx(qN,{targetSrc:"/webar/taza/taza.mind",phrases:re.phrases,onExit:Ey})}):p.jsxs(p.Fragment,{children:[/\.mp4($|\?)/i.test(re.image)?p.jsx("video",{src:re.image,className:"w-full h-64 object-cover bg-black/50",autoPlay:!0,playsInline:!0,muted:!0,loop:!0,controls:!0,poster:re.imagePoster}):p.jsx("img",{src:re.image,alt:"Ilustracin de La Taza",className:"w-full h-64 object-cover bg-black/50"}),p.jsxs("div",{className:"p-6 space-y-3",children:[p.jsx("p",{className:"text-sm text-slate-400 uppercase tracking-[0.3em]",children:re.note}),re.instructions?p.jsx("ul",{className:"text-sm text-slate-300/90 space-y-2",children:re.instructions.map((ke,rs)=>p.jsxs("li",{className:"flex items-start gap-2",children:[p.jsx("span",{className:"text-purple-300 mt-1",children:""}),p.jsx("span",{children:ke})]},rs))}):null,t==="lataza"?p.jsx(Ae,{className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",variant:"outline",onClick:Df,children:re.ctaLabel}):re.ctaLink?p.jsx("a",{href:re.ctaLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold",children:re.ctaLabel}):p.jsx(Ae,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10",onClick:()=>Lr(re.ctaMessage),children:re.ctaLabel})]})]})}),re.sentiments?p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Sentimientos vinculados"}),p.jsx("ul",{className:"space-y-3 text-slate-300/80 text-sm leading-relaxed",children:re.sentiments.map((ke,rs)=>p.jsxs("li",{children:[" ",ke]},rs))})]}):null]}),p.jsx("div",{className:"space-y-6",children:re.comments?p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-0",children:"Comentarios de la comunidad"}),p.jsx("div",{className:"space-y-4",children:re.comments.map(ke=>p.jsxs("div",{className:"rounded-xl border border-white/5 p-4 bg-black/20",children:[p.jsx("p",{className:"text-slate-100 font-light mb-2",children:ke.quote}),p.jsx("p",{className:"text-xs text-slate-500",children:ke.author})]},ke.id))}),t==="lataza"?p.jsx(mv,{showcaseId:"lataza",description:"Haz clic para guardar un like que conecta a la comunidad alrededor de la taza.",buttonLabel:"Resonar con la taza"}):null]}):null})]});if(re.type==="audio-dream")return p.jsxs("div",{className:"grid gap-6 lg:gap-10 lg:grid-cols-[2fr_1fr]",children:[p.jsxs("div",{className:"space-y-6 order-1 lg:order-2",children:[p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6 space-y-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Cmo explorar"}),p.jsx("ol",{className:"list-decimal list-inside space-y-3 text-slate-200 text-sm leading-relaxed md:text-base",children:(le=re.exploration)==null?void 0:le.map((ke,rs)=>p.jsx("li",{children:ke},rs))})]}),p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/20 p-6 space-y-3 text-sm text-slate-300",children:(Pe=re.closing)==null?void 0:Pe.map((ke,rs)=>p.jsx("p",{children:ke},rs))}),t==="miniversoSonoro"?p.jsx(mv,{showcaseId:"miniversoSonoro",title:"La voz de quienes escuchan",description:"Comparte tu vibracin y deja un like que resuene en este miniverso.",buttonLabel:"Hacer latir la resonancia"}):null,p.jsx("div",{className:"lg:hidden",children:p.jsx("button",{type:"button",onClick:Au,className:"w-full rounded-2xl border border-purple-400/60 bg-gradient-to-r from-purple-600/80 to-blue-500/60 px-4 py-3 text-sm font-semibold uppercase tracking-[0.3em] text-white transition hover:from-purple-500 hover:to-blue-400",children:"Abrir cmara de resonancia"})})]}),p.jsx("div",{className:"hidden lg:flex justify-center px-4 order-2 lg:order-1 lg:px-0",children:p.jsx("div",{className:"w-full max-w-[420px] lg:max-w-[640px]",children:p.jsx("div",{className:"rounded-3xl border border-white/10 bg-black/30 p-6",children:p.jsx(KN,{title:re.label,subtitle:re.intro,videoUrl:re.videoUrl,musicOptions:re.musicOptions,poems:re.poems,highlights:re.highlights,showHeader:!1})})})}),L&&p.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/95",children:[p.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 px-4 py-3",children:[p.jsx("p",{className:"text-sm uppercase tracking-[0.4em] text-purple-300",children:"Cmara de resonancia"}),p.jsx("button",{type:"button",onClick:W1,className:"text-sm font-semibold text-purple-100 transition hover:text-purple-50",children:"Cerrar"})]}),p.jsx("div",{className:"flex-1 overflow-auto p-4",children:p.jsx(KN,{title:re.label,subtitle:re.intro,videoUrl:re.videoUrl,musicOptions:re.musicOptions,poems:re.poems,highlights:re.highlights,showHeader:!0})})]})]});if(re.type==="tragedia")return p.jsx("div",{className:"space-y-10",children:p.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] border border-white/10 bg-gradient-to-br from-slate-900/90 via-black/60 to-rose-900/40 shadow-[0_25px_65px_rgba(15,23,42,0.65)]",children:[p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_top,_rgba(255,255,255,0.15),_transparent_45%)]"}),p.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(circle_at_bottom,_rgba(15,23,42,0.8),_transparent_65%)]"}),p.jsxs("div",{className:"relative mx-auto grid w-full max-w-[min(100vw-2rem,1100px)] gap-6 p-6 sm:p-8 lg:grid-cols-[3fr_2fr]",children:[p.jsx("div",{className:"space-y-6",children:p.jsxs("div",{className:"space-y-5 rounded-3xl border border-white/10 bg-black/30 p-6 shadow-[0_20px_40px_rgba(0,0,0,0.45)]",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-purple-300",children:"Escaparate"}),p.jsx("h3",{className:"font-display text-3xl leading-tight text-white md:text-4xl",children:re.label}),p.jsx("p",{className:"text-lg text-slate-200/80 leading-relaxed font-light",children:re.intro}),p.jsx("div",{className:"space-y-3",children:(rr=re.narrative)==null?void 0:rr.map((ke,rs)=>p.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:ke},`tragico-paragraph-${rs}`))}),p.jsxs("div",{className:"space-y-3 pt-4",children:[p.jsx("button",{type:"button",className:"text-xs uppercase tracking-[0.35em] text-slate-400 underline-offset-4 hover:text-white",onClick:()=>R(ke=>!ke),children:I?"Ocultar nota autoral":"Mostrar nota autoral"}),I?p.jsx(J.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{duration:.35,ease:"easeOut"},className:"rounded-2xl border border-purple-500/30 bg-purple-900/20 p-4 text-sm text-slate-100",children:p.jsx("p",{className:"leading-relaxed",children:re.notaAutoral})}):null]})]})}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-black/40 p-6 space-y-5 shadow-[0_25px_45px_rgba(0,0,0,0.45)]",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400",children:"Conciencia abierta"}),p.jsx("p",{className:"text-sm text-slate-300/90 leading-relaxed",children:re.ctaDescription}),p.jsx(Ae,{type:"button",variant:"outline",className:"w-full border border-purple-400/40 text-purple-100 hover:bg-purple-500/10 silvestre-cta",onClick:ae,children:re.ctaLabel}),p.jsx("p",{className:"text-[11px] text-slate-500",children:"La conversacin se abre dentro del universo transmedial (pronto con GPT de Silvestre)."}),j&&!q?p.jsxs("div",{className:"mt-3 rounded-2xl border border-white/10 bg-black/40 p-4 text-sm text-slate-200",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:"Silvestre quiere escucharte"}),p.jsx("p",{children:"Silvestre quiere escucharte. Dale acceso a tu micrfono para comenzar."})]}):null,q?p.jsxs("div",{className:"mt-3 rounded-2xl border border-red-500/30 bg-red-500/10 p-4 text-sm text-red-100",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-red-300",children:"Sin micrfono"}),p.jsx("p",{children:"Tu navegador no permite activar el micrfono. Puedes escribirle a Silvestre si prefieres."})]}):null,V?p.jsxs("div",{className:"mt-3 rounded-2xl border border-purple-500/40 bg-white/5 p-4 text-sm text-slate-100",children:[p.jsxs("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300",children:["Transcripcin en vivo",se?" (escuchando...)":""]}),p.jsx("p",{className:"break-words",children:V})]}):null]})]})]})});if(re.type==="blog-series"){const ke=re.entries??[],rs=de=>{switch(de.type){case"internal-reading":return de.previewMode==="pdf"&&de.previewPdfUrl?p.jsx(Ae,{onClick:()=>z(!0),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):de.previewMode==="image"&&de.previewImage?p.jsx(Ae,{onClick:()=>Le({src:de.previewImage,title:de.title,description:de.description}),className:"w-full sm:w-auto justify-center",children:"Ver fragmento"}):de.contentSlug?p.jsx(Ae,{onClick:()=>ie(de.contentSlug),className:"w-full sm:w-auto justify-center",children:"Leer fragmento"}):null;case"purchase-link":return de.url?p.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex w-full sm:w-auto items-center justify-center rounded-full border border-purple-400/40 text-purple-200 hover:bg-purple-500/10 px-6 py-2 font-semibold transition",children:"Comprar edicin"}):null;case"qr-scan":return p.jsx(Ae,{variant:"outline",className:"border-purple-400/40 text-purple-200 hover:bg-purple-500/10 w-full sm:w-auto justify-center",onClick:()=>Te({title:"Escanea el QR",description:"Abre la cmara de tu dispositivo y apunta al cdigo para activar la experiencia."}),children:"Escanear QR"});default:return null}};return p.jsxs("div",{className:"space-y-10",children:[p.jsx("div",{children:fT()}),ke.length>0?p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:ke.map(de=>{var mT,gT,yT;if(de.type==="horizontal-gallery")return p.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:de.title}),de.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:de.description}):null]}),p.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2",children:(mT=de.images)==null?void 0:mT.map((vt,ky)=>p.jsx("div",{className:"w-48 h-32 flex-shrink-0 rounded-xl overflow-hidden border border-white/5 bg-black/40",children:p.jsx("img",{src:vt,alt:`${de.title} ${ky+1}`,className:"w-full h-full object-cover"})},`${de.id}-${ky}`))})]},de.id);if(de.type==="quotes")return p.jsxs("div",{className:"md:col-span-2 rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:de.title}),p.jsx("div",{className:"space-y-4",children:(gT=de.quotes)==null?void 0:gT.map((vt,ky)=>p.jsxs("blockquote",{className:"text-slate-100 font-light leading-relaxed",children:[p.jsx("p",{children:vt.quote}),vt.author?p.jsx("p",{className:"text-xs text-slate-500 mt-2",children:vt.author}):null]},`${de.id}-quote-${ky}`))}),p.jsx(mv,{showcaseId:"miniversoNovela",description:"Haz clic para guardar un like y amplificar las conversaciones que la novela susurra.",buttonLabel:"Apoyar la novela"})]},de.id);if(de.type==="novel-apps")return p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-6",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:de.title}),de.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:de.description}):null]}),p.jsx("div",{className:"grid gap-4 grid-cols-1",children:(yT=de.apps)==null?void 0:yT.map(vt=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/40 p-4 flex flex-col gap-4",children:[p.jsxs("div",{className:"flex items-center justify-between gap-4",children:[p.jsx("p",{className:"font-semibold text-slate-100",children:vt.name}),p.jsx("span",{className:`text-xs uppercase tracking-[0.3em] ${vt.status==="Disponible"?"text-emerald-300":"text-slate-500"}`,children:vt.status})]}),p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:vt.description}),vt.snippet?p.jsxs("div",{className:"rounded-xl border border-white/10 bg-slate-900/60 p-4 space-y-2",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-purple-300",children:vt.snippet.tagline}),vt.snippet.image?p.jsx("img",{src:vt.snippet.image,alt:vt.name,className:"w-full h-32 object-cover rounded-lg border border-white/5"}):null,vt.snippet.text?p.jsx("p",{className:"text-sm text-slate-200/90 leading-relaxed",children:vt.snippet.text}):null]}):null,p.jsx(Ae,{onClick:()=>Dr(vt),variant:vt.status==="Disponible"?"default":"outline",className:`w-full justify-center ${vt.status==="Disponible"?"bg-purple-600/80 hover:bg-purple-600 text-white":"border-purple-400/40 text-purple-200 hover:bg-purple-500/10"}`,children:vt.ctaLabel})]},vt.id))})]},de.id);const pT=de.previewImage||de.image,KF=rs(de);return p.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 bg-black/30 space-y-4",children:[pT?p.jsx("div",{className:"rounded-xl overflow-hidden border border-white/5 bg-black/40 h-52 sm:h-64",children:p.jsx("img",{src:pT,alt:de.title,className:"w-full h-full object-cover",loading:"lazy"})}):null,p.jsxs("div",{className:"space-y-2",children:[p.jsx("h5",{className:"font-display text-xl text-slate-100",children:de.title}),de.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:de.description}):null]}),KF]},de.id)})}):p.jsx("p",{className:"text-sm text-slate-400",children:"Muy pronto liberaremos el resto de la serie."})]})}const G=re.videos??[];return p.jsxs("div",{className:"space-y-10",children:[p.jsx("div",{children:fT("Pronto liberaremos la carta completa de este miniverso. Mientras tanto puedes explorar la galera audiovisual.")}),G.length>0?p.jsxs("div",{children:[p.jsx("h5",{className:"font-display text-xl text-slate-100 mb-4",children:"Galera audiovisual"}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:G.map(ke=>p.jsxs("div",{className:"rounded-2xl border border-white/10 overflow-hidden bg-black/40 flex flex-col",children:[p.jsx("div",{className:"aspect-video w-full",children:/\.mp4($|\?)/i.test(ke.url)?p.jsx("video",{src:ke.url,title:ke.title,className:"w-full h-full object-cover bg-black",controls:!0,playsInline:!0,preload:"metadata",poster:ke.poster}):p.jsx("iframe",{src:ke.url,title:ke.title,className:"w-full h-full",frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})}),p.jsxs("div",{className:"p-4 space-y-1 text-sm text-slate-300",children:[p.jsx("p",{className:"font-semibold text-slate-100",children:ke.title}),ke.author?p.jsx("p",{children:ke.author}):null,ke.duration?p.jsxs("p",{className:"text-slate-500",children:["Duracin: ",ke.duration]}):null]})]},ke.id))})]}):null,t==="copycats"?p.jsx(mv,{showcaseId:"copycats",description:"Guarda un like que celebra las miradas que quedarn en escena.",title:"Opiniones despus del corte"}):null]})};return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"transmedia",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16 space-y-6",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Universo Transmedia"}),p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium text-gradient italic",children:"Miniversos que sostienen la causa"}),p.jsxs("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:["#GatoEncerrado es un universo transmedial compuesto por miniversos narrativos. Cada experiencia digital, objeto o narrativa expandida financia el acompaamiento psicoemocional de"," ",p.jsx("button",{type:"button",onClick:sr,className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Isabel Ayuda para la Vida, A.C."})]})]}),p.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h9.map((G,le)=>{const Pe=G.icon,rr=G.iconClass??"text-purple-200";return p.jsxs(J.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:le*.1,ease:"easeOut"},viewport:{once:!0},className:"group glass-effect rounded-xl p-8 hover-glow cursor-pointer flex flex-col transition-all duration-300 hover:border-purple-400/50",onClick:()=>X(G.id),children:[p.jsx("div",{className:"flex items-center justify-start mb-6 transition-all duration-300 group-hover:scale-110",children:p.jsx(Pe,{size:32,className:`${rr} drop-shadow-[0_0_12px_rgba(168,85,247,0.4)]`})}),p.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-3",children:G.title}),p.jsx("p",{className:"text-slate-300/70 text-base leading-relaxed mb-4 flex-grow font-light",children:G.description}),p.jsxs("div",{className:"text-purple-300 flex items-center gap-2 font-semibold transition-all duration-300 group-hover:gap-3",children:["Explorar",p.jsx(v5,{size:18})]})]},G.id)})}),re?p.jsxs(J.div,{ref:o,initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"mt-12 glass-effect rounded-2xl p-8 md:p-12 border border-white/10",children:[p.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[p.jsx("div",{children:re.type!=="tragedia"?p.jsxs(p.Fragment,{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-2",children:"Showcase"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100 mb-3",children:re.label}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light max-w-3xl",children:re.intro}),If()]}):null}),p.jsx("button",{onClick:()=>s(null),className:"text-sm text-slate-400 hover:text-white transition self-start md:self-auto",children:"Cerrar showcase "})]}),p.jsx("div",{className:"mt-8",children:qF()})]}):null,p.jsxs("div",{className:"mt-16 grid lg:grid-cols-[3fr_2fr] gap-10",children:[p.jsxs(J.div,{ref:b,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col justify-between",children:[p.jsxs("div",{className:"space-y-5",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/80",children:"Apoya el proyecto"}),p.jsx("h3",{className:"font-display text-3xl text-slate-100",children:"Nuestro impacto crece contigo"}),p.jsxs("p",{className:"text-slate-300/80 leading-relaxed font-light",children:["La taquilla mantiene la obra en escena; el universo transmedia financia acompaamiento emocional real. Cada cuota se distribuye en tres frentes que opera Isabel Ayuda para la Vida, A.C."," ",p.jsx("a",{href:"https://www.ayudaparalavida.com/index.html",target:"_blank",rel:"noreferrer",className:"text-purple-200 underline underline-offset-4 hover:text-white focus:outline-none focus-visible:ring-2 focus-visible:ring-purple-400 rounded-sm",children:"Visita su sitio"})]}),p.jsx("div",{className:"mt-4 space-y-3",children:XN.map(G=>{const le=G.icon,Pe=a===G.id;return p.jsxs("div",{className:"border border-white/10 rounded-2xl bg-black/20 overflow-hidden transition",children:[p.jsxs("button",{type:"button",onClick:()=>c(rr=>rr===G.id?null:G.id),className:"w-full flex items-center justify-between gap-4 px-4 py-3 text-left hover:bg-white/5 transition",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 rounded-full bg-purple-500/15 text-purple-200",children:p.jsx(le,{size:18})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium text-slate-100",children:G.title}),p.jsx("p",{className:"text-xs text-slate-400",children:G.metric})]})]}),p.jsx("span",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:Pe?"Ocultar":"Ver impacto"})]}),Pe?p.jsx("div",{className:"px-4 pb-4 text-sm text-slate-300/90",children:G.description}):null]},G.id)})})]}),p.jsxs("div",{className:"mt-8 flex flex-col gap-4 md:flex-row md:items-center",children:[p.jsx(Ae,{onClick:Jt,variant:"ghost",className:"text-purple-200 hover:text-white hover:bg-white/10 justify-start md:justify-center",children:" Ver miniversos activos"}),p.jsxs("div",{className:"flex items-center gap-3 text-slate-400 text-sm",children:[p.jsx(Xj,{size:20,className:"text-purple-300"}),p.jsx("span",{children:"Tu suscripcin = Apoyo directo"})]})]})]}),p.jsx(J.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-6 border border-white/10 bg-slate-950/50 shadow-2xl",children:p.jsx(fG,{})})]})]})]}),p.jsx(dG,{open:n,onClose:yt}),h?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:jr}),p.jsxs("div",{className:"relative z-10 w-full max-w-5xl space-y-4",children:[p.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70",children:"Lectura en progreso"}),p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:h.title||"Fragmento en PDF"}),h.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed max-w-2xl",children:h.description}):null]}),p.jsx("button",{type:"button",onClick:jr,className:"self-start rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})]}),p.jsx("div",{ref:v,className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl p-4 max-h-[75vh] overflow-auto",children:g?p.jsx("p",{className:"text-sm text-red-300 text-center py-8",children:g}):p.jsx($q,{file:h.src,onLoadSuccess:q1,onLoadError:G=>{console.error("Error al cargar PDF del miniverso:",G),w("No pudimos cargar el fragmento en PDF. Intenta de nuevo ms tarde.")},loading:p.jsx("p",{className:"text-sm text-slate-400 text-center py-8",children:"Preparando pginas"}),children:m?Array.from(new Array(m),(G,le)=>p.jsx("div",{className:"mb-6 last:mb-0",children:p.jsx(Qq,{pageNumber:le+1,width:k,renderTextLayer:!1,renderAnnotationLayer:!1})},`pdf-page-${le+1}`)):null})})]})]}):null,u?p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-10",children:[p.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:ze}),p.jsxs("div",{className:"relative z-10 w-full max-w-3xl",children:[p.jsx("div",{className:"flex justify-end mb-4",children:p.jsx("button",{type:"button",onClick:ze,className:"rounded-full border border-white/10 px-4 py-2 text-sm text-slate-300 hover:text-white hover:border-white/30 transition",children:"Cerrar "})}),p.jsxs("div",{className:"rounded-3xl border border-white/10 bg-slate-950/95 shadow-2xl overflow-hidden",children:[p.jsx("div",{className:"bg-black/60",children:p.jsx("img",{src:u.src,alt:u.title||"Vista previa",className:"w-full h-auto"})}),u.title||u.description?p.jsxs("div",{className:"p-6 space-y-2",children:[u.title?p.jsx("h4",{className:"font-display text-2xl text-slate-100",children:u.title}):null,u.description?p.jsx("p",{className:"text-sm text-slate-300/80 leading-relaxed",children:u.description}):null,p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-500",children:"Ilustracin de la novela"})]}):null]})]})]}):null,T&&N?p.jsx("div",{className:"fixed inset-0 z-40 bg-black",children:p.jsx(qN,{targetSrc:"/webar/taza/taza.mind",phrases:rp.lataza.phrases,onExit:Ey})}):null,D&&p.jsx("div",{className:"fixed inset-0 z-[200] overflow-auto bg-black/80 backdrop-blur-xl p-6",children:p.jsxs("div",{className:"max-w-3xl mx-auto",children:[p.jsx("button",{onClick:()=>z(!1),className:"text-slate-300 hover:text-white mb-6",children:"Cerrar "}),p.jsx(u9,{})]})})]})},hl=[{id:"obra_escenica",icon:p.jsx(qj,{size:20,className:"text-purple-300"}),title:"Miniverso Trgico - La Obra",description:"La funcin que deton este universo narrativo. Voces, cuerpos y trances en escena."},{id:"miniverso_novela",icon:p.jsx(ZC,{size:20,className:"text-emerald-300"}),title:"Miniverso Novela",description:"Desde la autoficcin de *Mi Gato Encerrado* hasta las vietas de *Tres pies al gato*."},{id:"taza",icon:p.jsx(A5,{size:20,className:"text-amber-300"}),title:"Miniverso Taza",description:"Objeto ritual y marcador AR. Una excusa para seguir la historia desde lo cotidiano."},{id:"cine",icon:p.jsx(tk,{size:20,className:"text-rose-300"}),title:"Miniverso Cine",description:"Quirn y otros filmes que piensan el cuerpo del Gato en clave cinematogrfica."},{id:"apps",icon:p.jsx(sk,{size:20,className:"text-lime-300"}),title:"Miniverso Apps",description:"Experiencias digitales que te convierten en cmplice y guardin del universo."},{id:"sonoro",icon:p.jsx(Qj,{size:20,className:"text-cyan-300"}),title:"Miniverso Sonoro",description:"Suea imgenes, elige msica, invoca un poema: combina tu propio universo."},{id:"bitacora",icon:p.jsx(Zj,{size:20,className:"text-indigo-300"}),title:"Miniverso Bitcora",description:"Crnicas, expansiones narrativas y debate vivo sobre cosas de la vida... y la muerte ."},{id:"otro",icon:p.jsx(I5,{size:20,className:"text-fuchsia-300"}),title:"Otra contribucin",description:"Performance, glitch sonoro o investigacin hbrida. Tambin cabe aqu."}],p9={hidden:{opacity:0},visible:{opacity:.85}},m9={hidden:{opacity:0,y:40,scale:.96},visible:{opacity:1,y:0,scale:1,transition:{duration:.35,ease:"easeOut"}},exit:{opacity:0,y:20,scale:.97,transition:{duration:.2,ease:"easeIn"}}},gv={name:"",email:"",role:"",proposal:"",attachmentUrl:""},e_="gatoencerrado-contrib-form",YN=new Set(["apps","bitacora","sonoro"]),g9={obra_escenica:"Si la Obra te toc, este espacio es tuyo.",miniverso_novela:"Si encontraste algo tuyo entre estas pginas, djalo dicho.",taza:"Qu historia se activ cuando tomaste la taza? Escrbela aqu.",cine:"Qu imagen te persigui despus? Cuntanos qu viste ms all de la pantalla.",apps:"Cmo cambi tu forma de jugar o explorar este universo?",bitacora:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron.",otro:"Si no cabe en un miniverso es porque an no lo hemos nombrado.",sonoro:"Comparte qu mezcla soaste: qu viste, qu escuchaste, qu palabras eligieron."},y9=({open:n,onClose:e})=>{const{user:t}=gy(),s=!!(t!=null&&t.email),r=A.useMemo(()=>{var X,ie;return((X=t==null?void 0:t.user_metadata)==null?void 0:X.alias)||((ie=t==null?void 0:t.user_metadata)==null?void 0:ie.full_name)||""},[t]),i=(t==null?void 0:t.email)??"",o=r||(i?i.split("@")[0]:""),[a,c]=A.useState(gv),[u,d]=A.useState("idle"),[h,f]=A.useState(""),[m,y]=A.useState(hl[0]),[g,w]=A.useState(!1),[v,b]=A.useState(!1),[_,E]=A.useState([]),[k,T]=A.useState(!1),[P,N]=A.useState(!1),[M,L]=A.useState(()=>typeof window>"u"?!1:window.matchMedia("(min-width: 768px)").matches),[F,D]=A.useState(()=>typeof window>"u"?!1:window.matchMedia("(max-width: 767px)").matches),z=A.useRef(null),I=A.useRef(null),[R,j]=A.useState(!1);A.useEffect(()=>{if(typeof window>"u")return;const X=Ik(e_);if(X)try{const ie=JSON.parse(X);z.current=ie,c(ae=>({...ae,...ie.formState})),w(!!ie.notifyOnPublish);const te=hl.find(ae=>ae.id===ie.selectedCategory);te&&y(te)}catch{z.current=null}j(!0)},[]),A.useEffect(()=>{if(!(!n||!R)){if(!z.current)c({...gv,name:s?o:"",email:s?i:""}),w(s),y(hl[0]),b(!1);else{const X=z.current.formState??gv;c({...X});const ie=z.current.notifyOnPublish;w(typeof ie=="boolean"?ie:s);const te=hl.find(ae=>ae.id===z.current.selectedCategory);te&&y(te),b(!0)}d("idle"),f("")}},[n,s,R]),A.useEffect(()=>{!n||!s||c(X=>{var ie;return{...X,name:(ie=X.name)!=null&&ie.trim()?X.name:o,email:i||X.email}})},[n,s,o,i]),A.useEffect(()=>{if(!n)return;const X=ie=>{ie.key==="Escape"&&(e==null||e())};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[n,e]),A.useEffect(()=>{if(typeof window>"u")return;const X=window.matchMedia("(min-width: 768px)"),ie=window.matchMedia("(max-width: 767px)"),te=Le=>{L(Le.matches)},ae=Le=>{D(Le.matches)};return L(X.matches),D(ie.matches),X.addEventListener?(X.addEventListener("change",te),ie.addEventListener("change",ae)):(X.addListener(te),ie.addListener(ae)),()=>{X.removeEventListener?(X.removeEventListener("change",te),ie.removeEventListener("change",ae)):(X.removeListener(te),ie.removeListener(ae))}},[]),A.useEffect(()=>{s&&T(!1)},[s]);const O=A.useCallback(X=>{const{name:ie,value:te}=X.target;s&&ie==="email"||c(ae=>({...ae,[ie]:te}))},[s]),B=A.useCallback(()=>{T(!1)},[]),$=A.useCallback(()=>{N(!0),setTimeout(()=>N(!1),420)},[]),V=A.useCallback(()=>{if(typeof window>"u")return;const X=window.AudioContext||window.webkitAudioContext;if(!X)return;const ie=new X,te=ie.createOscillator(),ae=ie.createGain();te.type="sine",te.frequency.value=720,ae.gain.value=.03,te.connect(ae),ae.connect(ie.destination),te.start(),te.stop(ie.currentTime+.1),te.onended=()=>{ie.close()}},[]),W=A.useCallback(()=>{I.current||(I.current=setTimeout(()=>{T(!0),I.current=null},520))},[]),q=A.useCallback(X=>{if($(),V(),setTimeout(V,140),!s){W();return}w(X.target.checked)},[$,V,s,W]);A.useEffect(()=>{if(typeof window>"u")return;const X={formState:a,notifyOnPublish:g,selectedCategory:m.id};vm(e_,JSON.stringify(X)),z.current=X},[a,g,m]),A.useEffect(()=>()=>{I.current&&clearTimeout(I.current)},[]);const K=A.useCallback(()=>{const X=Date.now();E(ie=>[...ie,X]),setTimeout(()=>{E(ie=>ie.filter(te=>te!==X))},1100)},[]),se=A.useCallback(async X=>{var ie;if(X.preventDefault(),u!=="loading"){if(!a.name.trim()||!a.email.trim()||!a.proposal.trim()){Te({description:"Completa tu nombre, correo y una breve propuesta."});return}if(g&&!s){Te({description:"Inicia sesin para recibir la notificacin personalizada."});return}if(!s){Te({description:"Inicia sesin para enviar tu propuesta."}),W();return}d("loading"),f("");try{const te=(m==null?void 0:m.id)??"obra_escenica",ae={name:a.name.trim(),email:a.email.trim().toLowerCase(),role:a.role.trim()||null,topic:te,proposal:a.proposal.trim(),attachment_url:a.attachmentUrl.trim()||null,notify_on_publish:g},{error:Le}=await nt.from("blog_contributions").insert(ae);if(Le){console.error("[ContributionModal] Error al registrar propuesta:",Le),d("error"),f((ie=Le.message)!=null&&ie.includes("blog_contributions")?"Asegrate de crear la tabla blog_contributions en Supabase.":"No pudimos registrar tu propuesta. Intenta nuevamente.");return}try{const ze={author_email:ae.email,author_name:ae.name,category:te,content:ae.proposal,meta:{origin:"public_site"}},{error:sr}=await nt.from("backstage_contributions").insert(ze);sr&&console.error("[ContributionModal] No se pudo duplicar en backstage_contributions:",sr)}catch(ze){console.error("[ContributionModal] Excepcin duplicando en backstage_contributions:",ze)}a.email.trim()&&await v9({email:a.email.trim().toLowerCase(),name:a.name.trim(),proposal:a.proposal.trim(),category:(m==null?void 0:m.title)??hl[0].title}),d("success"),K(),Te({description:"Gracias! Revisaremos tu propuesta y te contactaremos pronto."}),c({...gv,name:r||"",email:(t==null?void 0:t.email)??""}),w(!1),y(hl[0]),b(!1),YD(e_),z.current=null}catch(te){console.error("[ContributionModal] Excepcin al guardar:",te),d("error"),f("Ocurri un error inesperado. Intenta ms tarde.")}}},[a,u,m,g,s,K,r,t==null?void 0:t.email]),pe=A.useCallback(()=>{u!=="loading"&&(e==null||e())},[e,u]),ye=A.useCallback(X=>{y(X),b(!0)},[]),ge=A.useMemo(()=>g9[m==null?void 0:m.id]??"Contribuye al dilogo crtico",[m]),Jt=A.useCallback(()=>{u!=="loading"&&b(!1)},[u]),yt=()=>p.jsxs("div",{className:"rounded-2xl border border-white/10 bg-black/20 px-4 py-3 text-[0.8rem] text-slate-300 leading-relaxed",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-500",children:"Qu necesitas saber?"}),p.jsx("p",{children:" Algunos miniversos an estn bajo construccin."}),p.jsx("p",{children:" Puedes ser parte de las pruebas tempranas o versiones beta."}),p.jsx("p",{children:" Si te unes a esta lista, recibirs avances exclusivos antes de que se abran al pblico."}),p.jsx("div",{className:"border-t border-white/10 pt-3 text-xs uppercase tracking-[0.35em] text-slate-500",children:" Qu recibirs?"}),p.jsx("p",{className:"text-sm",children:"Invitaciones a exploraciones internas, accesos temporales, adelantos curatoriales y ventanas de activacin anticipada en los miniversos en desarrollo."})]}),ve=()=>p.jsxs("div",{className:"relative",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Formulario"}),p.jsx("h3",{id:"contribution-modal-title",className:"font-display text-2xl text-slate-50",children:ge}),p.jsxs("p",{className:"text-sm text-slate-400/80",children:["Ests escribiendo sobre"," ",p.jsx("span",{className:"text-purple-200 font-semibold",children:m.title})]})]}),F?p.jsx("button",{type:"button",onClick:Jt,className:"mb-4 flex items-center gap-2 text-sm font-semibold text-purple-300 hover:text-purple-200",children:" Regresar"}):null,F&&YN.has(m.id)?p.jsx("div",{className:"mb-4",children:yt()}):null,p.jsxs("form",{className:"space-y-4",onSubmit:se,children:[p.jsxs("div",{children:[p.jsx("input",{name:"name",type:"text",required:!0,value:a.name,onChange:O,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Cmo quieres que te nombremos?"}),p.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"As quieres que te llamemos? Dinos cmo te gusta que te nombren."})]}),p.jsxs("div",{children:[p.jsx("input",{name:"email",type:"email",required:!0,value:a.email,onChange:O,readOnly:s,className:`w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 ${s?"cursor-not-allowed opacity-80":""}`,placeholder:"nombre@correo.com"}),s?p.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"El correo se toma de tu sesin actual."}):null]}),p.jsx("input",{name:"role",type:"text",value:a.role,onChange:O,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Crtica teatral, artista, investigador, espectador..."}),p.jsx("textarea",{name:"proposal",rows:5,required:!0,value:a.proposal,onChange:O,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Resume tu texto, crnica o propuesta curatorial..."}),p.jsx("input",{name:"attachmentUrl",type:"url",value:a.attachmentUrl,onChange:O,className:"w-full rounded-lg border border-white/10 bg-black/30 px-4 py-3 text-slate-100 placeholder-slate-500 focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Enlace a material adicional (Drive, portfolio, video...)"}),p.jsxs("div",{className:"flex flex-col gap-2 rounded-lg border border-white/5 bg-black/20 px-4 py-3",children:[p.jsxs(J.button,{type:"button",onClick:q,"aria-label":"Activar notificacin de publicacin",className:"relative flex items-center gap-3 text-left group focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-purple-400/60",children:[p.jsx(J.div,{animate:g?{scale:[1,1.05,1],boxShadow:"0 0 15px rgba(74,222,128,0.5)"}:{scale:1,boxShadow:"0 0 0 rgba(0,0,0,0)"},transition:{duration:.45,ease:"easeOut"},className:`h-5 w-5 rounded-full border border-white/20 ${g?"bg-gradient-to-r from-emerald-400 to-emerald-500":"bg-slate-600/40"}`}),p.jsx("span",{className:"text-sm text-slate-300/80 leading-relaxed",children:"Quiero recibir notificacin cuando se publique mi propuesta"})]}),s?null:p.jsx("span",{className:"pl-8 text-xs text-slate-500",children:"Inicia sesin para activar el seguimiento"})]}),u==="error"?p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:h}):null,u==="success"?p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Recibimos tu propuesta. Te contactaremos si necesitamos ms detalles."}):null,p.jsx(Ae,{type:"submit",disabled:u==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:u==="loading"?"Enviando":"Enviar propuesta"})]}),M&&YN.has(m.id)?p.jsx("div",{className:"mt-6 space-y-3",children:yt()}):null]});return p.jsxs(p.Fragment,{children:[p.jsx(bo,{children:n?p.jsxs(J.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-4 py-6 sm:py-12",initial:"hidden",animate:"visible",exit:"hidden",children:[p.jsx(J.div,{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",variants:p9,onClick:pe,"aria-hidden":"true"}),p.jsxs(J.div,{role:"dialog","aria-modal":"true","aria-labelledby":"contribution-modal-title",variants:m9,className:"relative z-10 w-full max-w-5xl h-full max-h-[90vh] rounded-3xl border border-white/10 bg-slate-950 p-4 sm:p-8 shadow-2xl overflow-hidden flex flex-col gap-6",children:[p.jsxs("div",{className:"relative overflow-visible",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/70",children:"Blog / Dilogo vivo"}),p.jsx("h2",{className:"font-display text-2xl sm:text-3xl text-slate-50",children:"Contribuye al dilogo crtico"})]}),p.jsx("button",{onClick:pe,className:"text-slate-400 hover:text-white transition text-xl leading-none","aria-label":"Cerrar formulario de propuestas",children:""})]}),_.map(X=>p.jsx(b9,{seed:X},X))]}),p.jsxs("div",{className:"mt-6 flex flex-col gap-6 md:flex-row md:items-start md:gap-6",children:[p.jsx("div",{className:"flex-1 space-y-3 overflow-y-auto pr-3 max-h-[60vh] md:max-h-[72vh] md:pr-0",children:hl.map(X=>p.jsxs("button",{type:"button",onClick:()=>ye(X),className:`w-full rounded-2xl border px-4 py-4 text-left transition ${m.id===X.id?"bg-purple-500/15 border-purple-300/40":"bg-black/20 border-white/10 hover:border-purple-300/30"}`,children:[p.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[X.icon,p.jsx("h4",{className:"text-slate-100 font-medium",children:X.title})]}),p.jsx("p",{className:"text-sm text-slate-400/80 leading-relaxed",children:X.description})]},X.id))}),M?p.jsx("div",{className:"md:w-[520px] md:shrink-0",children:v?p.jsx(J.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.35,ease:"easeOut"},className:"flex h-full max-h-[78vh] flex-col rounded-3xl border border-white/10 bg-slate-950/90 p-6 shadow-2xl overflow-y-auto",children:ve()}):p.jsx("div",{className:"flex h-full min-h-[320px] items-center justify-center rounded-3xl border border-dashed border-white/10 bg-black/30 px-4 text-center text-sm text-slate-400",children:"Selecciona una categora para abrir el formulario."})}):null]}),p.jsx(bo,{children:!M&&v?p.jsxs(p.Fragment,{children:[p.jsx(J.button,{type:"button",className:"absolute inset-0 bg-black/40 md:hidden","aria-label":"Cerrar formulario",onClick:Jt,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),p.jsx(J.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:24,stiffness:240},className:"absolute inset-y-0 right-0 w-full bg-slate-950 border-l border-white/15 shadow-2xl p-6 overflow-y-auto md:hidden",children:ve()})]}):null})]})]}):null}),p.jsx(bo,{children:k?p.jsx(Ok,{onClose:B}):null})]})};async function v9({email:n,name:e,proposal:t,category:s}){if(n)try{const{error:r}=await nt.functions.invoke("send-proposal-confirmation",{body:{email:n,name:e,proposal:t,category:s}});r&&console.error("[ContributionModal] Error en sendConfirmationEmail:",r)}catch(r){console.error("[ContributionModal] Excepcin en sendConfirmationEmail:",r)}}const QN=["#f472b6","#a855f7","#facc15","#34d399"],b9=({seed:n})=>{const e=A.useMemo(()=>Array.from({length:12},(t,s)=>({left:Math.random()*100,top:Math.random()*20,delay:Math.random()*.2,color:QN[s%QN.length]})),[n]);return p.jsx("div",{className:"confetti-layer",children:e.map((t,s)=>p.jsx("span",{className:"confetti-piece",style:{left:`${t.left}%`,top:`${t.top}%`,backgroundColor:t.color,animationDelay:`${t.delay}s`}},`${n}-${s}`))})},t_=n=>(n||"").toString().trim().toLowerCase(),km=["curaduria","expansiones","backstage"],fb={curaduria:{id:"curaduria",label:"Curadura Reflexiva",summary:"Textos crticos y anlisis profundos sobre la obra y su universo, escritos por investigadores, curadoras y voces especializadas.",keywords:["curaduria","curatorial","critica","ensayo","analisis","reflexiva"]},expansiones:{id:"expansiones",label:"Expansiones Narrativas",summary:"Microficciones, comunidad y relatos que acompaan los miniversos transmedia: cartas, diarios, audios y relatos colectivos.",keywords:["miniverso","transmedia","ficcion","comunidad","microficcion","expansion"]},backstage:{id:"backstage",label:"Detrs de Cmaras",summary:"Noticias, avances y bitcoras del proceso creativo: apps, novela, ensayo tcnico, produccin y archivos del montaje.",keywords:["backstage","proceso","produccion","apps","novela","noticias","detras"]}},x9=["carta-a-copycats","taza-que-habla"],JN=km[0],w9=n=>{if(!n)return JN;const e=t_(n.category);if(e&&km.includes(e))return e;const t=t_(n.slug);if(t&&x9.includes(t))return"expansiones";const s=Array.isArray(n.tags)?n.tags.map(r=>t_(r)).filter(Boolean):[];for(const r of km){const i=fb[r].keywords;if(s.some(o=>i.includes(o)))return r}return JN};async function S9({post:n,action:e,liked:t,notify:s,miniverse:r,mostViewedMiniverse:i,mostViewedMiniverseCount:o,interactionContext:a="blog_article_footer"}){if(!(n!=null&&n.id)||!(n!=null&&n.slug))return{success:!1,error:new Error("Falta el identificador del artculo")};const c={post_id:n.id,post_slug:n.slug,post_title:n.title,action:e,liked:!!t,notify:!!s,miniverse:r,most_viewed_miniverse:i,most_viewed_miniverse_count:o??null,interaction_context:a,metadata:{author:n.author,tags:n.tags??[],published_at:n.published_at}},{error:u}=await nt.from("blog_article_interactions").insert(c);return{success:!u,error:u}}const ZN={hidden:{opacity:0,y:40},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},eR={cine:{label:"Miniverso Cine",views:4320,subcategories:["Quirn","Copycats","Campo expandido"]},expansiones:{label:"Expansiones Narrativas",views:3860,subcategories:["Cartas","Bitcoras","Microrrelatos"]},curaduria:{label:"Curadura Reflexiva",views:2780,subcategories:["Ensayo crtico","Cartografas emocionales"]},apps:{label:"Miniverso Apps",views:2190,subcategories:["Guardianes digitales","Glitches","Rituales mviles"]},sonoro:{label:"Miniverso Sonoro",views:2010,subcategories:["Pistas","Field recordings","Ondas"]},bitacora:{label:"Miniverso Bitcora",views:1760,subcategories:["Crnicas","Archivo vivo","Cartas"]},taza:{label:"Miniverso Taza",views:1630,subcategories:["Objetos rituales","Memorias lquidas"]},otro:{label:"Otra contribucin",views:1480,subcategories:["Performance","Investigacin hbrida"]}},_9={cine:["cine","quirn","copycats","film","pelcula"],expansiones:["expansiones","miniverso","novela","diario","microficcin"],curaduria:["curadura","critica","analisis","ensayo"],apps:["app","apps","digital","interactivo"],sonoro:["sonoro","audio","msica","sonidos"],bitacora:["bitcora","bitacora","cronica","crnica"],taza:["taza","objeto","cermica","ritual"],otro:["performance","hbrido","glitch","experimental"]},A9=n=>{const e=[n.category,n.slug,n.title,n.excerpt,...Array.isArray(n.tags)?n.tags:[]].filter(Boolean).join(" ").toLowerCase();for(const[t,s]of Object.entries(_9))if(s.some(r=>e.includes(r)))return t;return"curaduria"},E9=({post:n,onSelect:e})=>{const t=n.published_at?new Date(n.published_at):null;return p.jsxs(J.article,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.5,ease:"easeOut"},className:"glass-effect rounded-2xl p-8 md:p-10 flex flex-col hover-glow transition-shadow",children:[p.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-6 text-sm text-slate-400",children:[t&&p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(ek,{size:16}),t.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}),n.read_time_minutes?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(Wj,{size:16}),n.read_time_minutes," min lectura"]}):null,p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(v1,{size:16}),n.author,n.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]})]}),p.jsx("h3",{className:"font-display text-2xl md:text-3xl font-medium text-slate-100 mb-4",children:n.title}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-6",children:n.excerpt}),Array.isArray(n.tags)&&n.tags.length>0?p.jsx("div",{className:"flex flex-wrap gap-2 mb-8",children:n.tags.map(s=>p.jsx("span",{className:"text-xs uppercase tracking-wider text-purple-200/80 bg-purple-500/10 border border-purple-400/20 px-3 py-1 rounded-full",children:s},s))}):null,p.jsx(Ae,{onClick:()=>e(n),variant:"outline",className:"self-start border-purple-400/40 text-purple-200 hover:bg-purple-500/20",children:"Leer artculo completo"})]})},C9=({post:n,onClose:e})=>{const t=A.useMemo(()=>n!=null&&n.content?n.content.split(/\n{2,}/).map(r=>r.trim()).filter(Boolean):[],[n]),s=n.published_at?new Date(n.published_at):null;return p.jsxs(J.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.4,ease:"easeOut"},className:"glass-effect rounded-3xl p-8 md:p-12 border border-white/10 shadow-2xl backdrop-blur-xl",children:[p.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-8",children:[p.jsxs("div",{className:"flex flex-col gap-2 text-sm text-slate-400",children:[s?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(ek,{size:16}),s.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]}):null,p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(v1,{size:16}),n.author,n.author_role?p.jsxs("span",{className:"text-slate-500",children:["/ ",n.author_role]}):null]}),n.read_time_minutes?p.jsxs("span",{className:"inline-flex items-center gap-2",children:[p.jsx(Wj,{size:16}),n.read_time_minutes," min lectura"]}):null]}),p.jsx(Ae,{onClick:e,variant:"ghost",className:"text-slate-400 hover:text-white hover:bg-white/10",children:"Cerrar artculo"})]}),p.jsx("h3",{className:"font-display text-3xl md:text-4xl font-semibold text-slate-50 mb-8",children:n.title}),p.jsx("div",{className:"space-y-6 text-slate-200 leading-relaxed font-light",children:t.length===0?p.jsx("p",{children:"Este artculo estar disponible muy pronto. Gracias por tu inters en la comunidad crtica de #GatoEncerrado."}):t.map((r,i)=>p.jsx("p",{children:r},i))}),p.jsx(k9,{post:n})]})},k9=({post:n})=>{const{user:e}=gy(),[t,s]=A.useState(!1),r=A.useCallback(()=>s(!0),[]),i=A.useCallback(()=>s(!1),[]),o=A.useMemo(()=>A9(n),[n]),a=eR[o]??eR.curaduria,[c,u]=A.useState(!1),[d,h]=A.useState(!1),[f,m]=A.useState({like:"idle",notify:"idle"}),y=async g=>{const w=g==="like"?!c:c,v=g==="notify"?!d:d;if(g==="notify"&&!e){Te({description:"Inicia sesin para recibir notificaciones y continuar en el Backstage."}),r();return}m(E=>({...E,[g]:"loading"}));const{success:b,error:_}=await S9({post:n,action:g,liked:w,notify:v,miniverse:o,mostViewedMiniverse:a.label,mostViewedMiniverseCount:a.views??null});b?g==="like"?(u(w),Te({description:w?"Gracias por tu apoyo.":"Quitaste el Me gusta."})):(h(v),Te({description:v?"Te avisaremos cuando haya novedades sobre este texto.":"Ya no recibes notificaciones de este artculo."})):(console.error("[ArticleInteraction] Error guardando interaccin:",_),Te({description:"No pudimos guardar tu interaccin. Intenta nuevamente."})),m(E=>({...E,[g]:"idle"}))};return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mt-10 rounded-3xl border border-white/10 bg-black/40 p-6 shadow-[0_30px_80px_rgba(0,0,0,0.35)]",children:[p.jsx("p",{className:"text-base text-slate-200",children:"La lectura te movi?"}),p.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Clic en los botones y registramos la interaccin para alimentar al gato del Backstage."}),p.jsxs("div",{className:"mt-6 flex flex-col gap-3 md:flex-row",children:[p.jsx(Ae,{variant:c?"secondary":"default",size:"lg",onClick:()=>y("like"),disabled:f.like==="loading",className:"flex-1",children:c?"Gracias por el Me gusta":"Me gust este artculo"}),p.jsx(Ae,{variant:"outline",size:"lg",onClick:()=>y("notify"),disabled:f.notify==="loading",className:"flex-1",children:d?"Te avisaremos de novedades":"Quiero recibir notificaciones"})]})]}),t?p.jsx(Ok,{onClose:i}):null]})},n_="gatoencerrado-blog-onboarding",T9=({posts:n=[],isLoading:e=!1,error:t=null})=>{const[s,r]=A.useState(null),[i,o]=A.useState(null),[a,c]=A.useState(!1),[u,d]=A.useState("all"),[h,f]=A.useState(""),[m,y]=A.useState(!1),g=A.useRef(null),w=A.useRef(!1),{user:v}=gy(),b=!!(v!=null&&v.email),_=Rr("text-white px-8 py-3 rounded-full font-semibold flex items-center gap-2 hover-glow transition mx-auto",b?"bg-gradient-to-r from-emerald-500/90 to-emerald-600/90 hover:from-emerald-400/90 hover:to-emerald-500/90 shadow-[0_0_35px_rgba(16,185,129,0.5)] ring-2 ring-emerald-400/30":"bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600"),E=A.useMemo(()=>n.map(L=>({...L,category:w9(L)})),[n]),k=A.useMemo(()=>[...E].sort((L,F)=>{const D=L.published_at?new Date(L.published_at).getTime():0;return(F.published_at?new Date(F.published_at).getTime():0)-D}),[E]),T=A.useMemo(()=>{const L=h.trim().toLowerCase();return k.filter(F=>(u==="all"?!0:F.category===u)?L?[F.title,F.author,F.excerpt,...Array.isArray(F.tags)?F.tags:[]].filter(Boolean).join(" ").toLowerCase().includes(L):!0:!1)},[k,u,h]),P=A.useCallback(L=>{r(L),requestAnimationFrame(()=>{const F=document.getElementById("blog-article");F==null||F.scrollIntoView({behavior:"smooth",block:"start"})})},[]),N=A.useCallback(L=>{d(L),requestAnimationFrame(()=>{var F;(F=g.current)==null||F.scrollIntoView({behavior:"smooth",block:"start"})})},[]);A.useEffect(()=>{if(i&&E.length>0){const L=E.find(F=>F.slug===i);L&&(P(L),o(null))}},[P,i,E]),A.useEffect(()=>{t&&Te({description:"No se pudieron cargar los artculos del blog."})},[t]),A.useEffect(()=>{const L=F=>{var I;const{slug:D}=F.detail||{};if(!D)return;const z=E.find(R=>R.slug===D);z?P(z):o(D),(I=document.getElementById("dialogo-critico"))==null||I.scrollIntoView({behavior:"smooth"})};return window.addEventListener("gatoencerrado:open-blog",L),()=>window.removeEventListener("gatoencerrado:open-blog",L)},[P,E]);const M=A.useCallback(()=>{c(!0),y(!1),w.current=!0,vm(n_,"seen")},[]);return A.useEffect(()=>{if(typeof window>"u"||w.current)return;if(Ik(n_)==="seen"){y(!1),w.current=!0;return}y(!0);const F=setTimeout(()=>{y(!1),vm(n_,"seen"),w.current=!0},6e3);return()=>clearTimeout(F)},[]),A.useEffect(()=>{const L=()=>{c(!0)};return window.addEventListener("gatoencerrado:resume-contribution",L),()=>{window.removeEventListener("gatoencerrado:resume-contribution",L)}},[]),p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"dialogo-critico",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-slate-400/70 mb-4",children:"Dilogo Crtico"}),p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Pensamiento crtico, comunidad y resonancia"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Un espacio de pensamiento crtico, creatividad y potica donde convergen curadura, ficcin expandida y noticias detrs de escena. Filtra por inters, busca autoras especficas o explora las lneas editoriales."})]}),p.jsxs("div",{className:"space-y-16",children:[p.jsx(J.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.1,ease:"easeOut"},viewport:{once:!0},className:"grid md:grid-cols-3 gap-6",children:km.map(L=>p.jsxs("div",{className:"glass-effect rounded-2xl p-6 border border-white/10 flex flex-col gap-3",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400/80",children:fb[L].label}),p.jsx("p",{className:"text-slate-300/80 text-sm leading-relaxed flex-1",children:fb[L].summary}),p.jsx(Ae,{variant:"link",onClick:()=>N(L),className:"text-purple-300 hover:text-white self-start px-0",children:"Leer esta lnea editorial"})]},L))}),p.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[p.jsxs("div",{className:"flex flex-wrap gap-2",children:[p.jsx("button",{type:"button",onClick:()=>d("all"),className:`rounded-full border px-4 py-2 text-sm transition ${u==="all"?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:"Todas"}),km.map(L=>p.jsx("button",{type:"button",onClick:()=>d(L),className:`rounded-full border px-4 py-2 text-sm transition ${u===L?"border-purple-400/60 bg-purple-500/20 text-purple-100":"border-white/10 text-slate-300 hover:border-purple-300/40 hover:text-purple-100"}`,children:fb[L].label},L))]}),p.jsxs("div",{className:"relative w-full md:w-72",children:[p.jsx(j5,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500"}),p.jsx("input",{type:"search",value:h,onChange:L=>f(L.target.value),placeholder:"Buscar por ttulo o autor",className:"w-full rounded-full border border-white/10 bg-black/30 pl-10 pr-4 py-2 text-sm text-slate-100 placeholder:text-slate-500 focus:border-purple-400 focus:outline-none focus:ring-1 focus:ring-purple-400"})]})]}),p.jsx(J.div,{ref:g,initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.12}}},className:"grid md:grid-cols-2 gap-8",children:e?p.jsx(J.div,{variants:ZN,className:"md:col-span-2 text-center text-slate-400 py-12",children:"Cargando artculos"}):T.length===0?p.jsx(J.div,{variants:ZN,className:"md:col-span-2 text-center text-slate-400 py-12",children:"No encontramos textos con ese criterio. Ajusta el filtro o comparte un nuevo testimonio."}):T.map(L=>p.jsx(E9,{post:L,onSelect:P},L.id))}),p.jsx("div",{id:"blog-article",children:p.jsx(bo,{mode:"wait",children:s?p.jsx(C9,{post:s,onClose:()=>r(null)},s.id):null})})]}),p.jsxs(J.div,{id:"blog-contribuye",initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"mt-20 glass-effect rounded-2xl p-8 md:p-12 text-center",children:[p.jsx("h3",{className:"font-display text-3xl font-medium text-slate-100 mb-6",children:"Algo de la obra se qued contigo?"}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed mb-8 max-w-2xl mx-auto font-light",children:"Invitamos a espectadores, artistas, investigadores y espritus curiosos a compartir cmo esta obra reson en su forma de mirar, sentir, imaginar o habitar el mundo. Tu palabra tambin construye este universo."}),p.jsxs("div",{className:"relative inline-flex flex-col items-center gap-2",children:[m?p.jsx(J.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute -top-10 bg-purple-600/80 text-white text-xs px-3 py-1 rounded-full shadow-lg",children:"Nuevo! Abre la bandeja lateral y comparte tu texto"}):null,p.jsxs(Ae,{id:"blog-submit-cta",onClick:M,className:_,children:[p.jsx(N5,{size:18})," Enviar propuesta"]})]})]})]})]}),p.jsx(y9,{open:a,onClose:()=>c(!1)})]})};var P9=pR[" useId ".trim().toString()]||(()=>{}),N9=0;function EF(n){const[e,t]=A.useState(P9());return fu(()=>{n||t(s=>s??String(N9++))},[n]),n||(e?`radix-${e}`:"")}var U1="Collapsible",[R9,CF]=m1(U1),[M9,nT]=R9(U1),kF=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,open:s,defaultOpen:r,disabled:i,onOpenChange:o,...a}=n,[c,u]=g1({prop:s,defaultProp:r??!1,onChange:o,caller:U1});return p.jsx(M9,{scope:t,disabled:i,contentId:EF(),open:c,onOpenToggle:A.useCallback(()=>u(d=>!d),[u]),children:p.jsx(Bn.div,{"data-state":rT(c),"data-disabled":i?"":void 0,...a,ref:e})})});kF.displayName=U1;var TF="CollapsibleTrigger",PF=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,...s}=n,r=nT(TF,t);return p.jsx(Bn.button,{type:"button","aria-controls":r.contentId,"aria-expanded":r.open||!1,"data-state":rT(r.open),"data-disabled":r.disabled?"":void 0,disabled:r.disabled,...s,ref:e,onClick:Dn(n.onClick,r.onOpenToggle)})});PF.displayName=TF;var sT="CollapsibleContent",NF=A.forwardRef((n,e)=>{const{forceMount:t,...s}=n,r=nT(sT,n.__scopeCollapsible);return p.jsx(KC,{present:t||r.open,children:({present:i})=>p.jsx(j9,{...s,ref:e,present:i})})});NF.displayName=sT;var j9=A.forwardRef((n,e)=>{const{__scopeCollapsible:t,present:s,children:r,...i}=n,o=nT(sT,t),[a,c]=A.useState(s),u=A.useRef(null),d=Ao(e,u),h=A.useRef(0),f=h.current,m=A.useRef(0),y=m.current,g=o.open||a,w=A.useRef(g),v=A.useRef(void 0);return A.useEffect(()=>{const b=requestAnimationFrame(()=>w.current=!1);return()=>cancelAnimationFrame(b)},[]),fu(()=>{const b=u.current;if(b){v.current=v.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const _=b.getBoundingClientRect();h.current=_.height,m.current=_.width,w.current||(b.style.transitionDuration=v.current.transitionDuration,b.style.animationName=v.current.animationName),c(s)}},[o.open,s]),p.jsx(Bn.div,{"data-state":rT(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!g,...i,ref:d,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":y?`${y}px`:void 0,...n.style},children:g&&r})});function rT(n){return n?"open":"closed"}var L9=kF,D9=PF,I9=NF,O9=A.createContext(void 0);function F9(n){const e=A.useContext(O9);return n||e||"ltr"}var Mr="Accordion",B9=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[iT,$9,V9]=vj(Mr),[H1,A7]=m1(Mr,[V9,CF]),oT=CF(),RF=Ce.forwardRef((n,e)=>{const{type:t,...s}=n,r=s,i=s;return p.jsx(iT.Provider,{scope:n.__scopeAccordion,children:t==="multiple"?p.jsx(G9,{...i,ref:e}):p.jsx(H9,{...r,ref:e})})});RF.displayName=Mr;var[MF,z9]=H1(Mr),[jF,U9]=H1(Mr,{collapsible:!1}),H9=Ce.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},collapsible:i=!1,...o}=n,[a,c]=g1({prop:t,defaultProp:s??"",onChange:r,caller:Mr});return p.jsx(MF,{scope:n.__scopeAccordion,value:Ce.useMemo(()=>a?[a]:[],[a]),onItemOpen:c,onItemClose:Ce.useCallback(()=>i&&c(""),[i,c]),children:p.jsx(jF,{scope:n.__scopeAccordion,collapsible:i,children:p.jsx(LF,{...o,ref:e})})})}),G9=Ce.forwardRef((n,e)=>{const{value:t,defaultValue:s,onValueChange:r=()=>{},...i}=n,[o,a]=g1({prop:t,defaultProp:s??[],onChange:r,caller:Mr}),c=Ce.useCallback(d=>a((h=[])=>[...h,d]),[a]),u=Ce.useCallback(d=>a((h=[])=>h.filter(f=>f!==d)),[a]);return p.jsx(MF,{scope:n.__scopeAccordion,value:o,onItemOpen:c,onItemClose:u,children:p.jsx(jF,{scope:n.__scopeAccordion,collapsible:!0,children:p.jsx(LF,{...i,ref:e})})})}),[W9,G1]=H1(Mr),LF=Ce.forwardRef((n,e)=>{const{__scopeAccordion:t,disabled:s,dir:r,orientation:i="vertical",...o}=n,a=Ce.useRef(null),c=Ao(a,e),u=$9(t),h=F9(r)==="ltr",f=Dn(n.onKeyDown,m=>{var N;if(!B9.includes(m.key))return;const y=m.target,g=u().filter(M=>{var L;return!((L=M.ref.current)!=null&&L.disabled)}),w=g.findIndex(M=>M.ref.current===y),v=g.length;if(w===-1)return;m.preventDefault();let b=w;const _=0,E=v-1,k=()=>{b=w+1,b>E&&(b=_)},T=()=>{b=w-1,b<_&&(b=E)};switch(m.key){case"Home":b=_;break;case"End":b=E;break;case"ArrowRight":i==="horizontal"&&(h?k():T());break;case"ArrowDown":i==="vertical"&&k();break;case"ArrowLeft":i==="horizontal"&&(h?T():k());break;case"ArrowUp":i==="vertical"&&T();break}const P=b%v;(N=g[P].ref.current)==null||N.focus()});return p.jsx(W9,{scope:t,disabled:s,direction:r,orientation:i,children:p.jsx(iT.Slot,{scope:t,children:p.jsx(Bn.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:f})})})}),ox="AccordionItem",[q9,aT]=H1(ox),DF=Ce.forwardRef((n,e)=>{const{__scopeAccordion:t,value:s,...r}=n,i=G1(ox,t),o=z9(ox,t),a=oT(t),c=EF(),u=s&&o.value.includes(s)||!1,d=i.disabled||n.disabled;return p.jsx(q9,{scope:t,open:u,disabled:d,triggerId:c,children:p.jsx(L9,{"data-orientation":i.orientation,"data-state":VF(u),...a,...r,ref:e,disabled:d,open:u,onOpenChange:h=>{h?o.onItemOpen(s):o.onItemClose(s)}})})});DF.displayName=ox;var IF="AccordionHeader",OF=Ce.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=G1(Mr,t),i=aT(IF,t);return p.jsx(Bn.h3,{"data-orientation":r.orientation,"data-state":VF(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:e})});OF.displayName=IF;var ZE="AccordionTrigger",FF=Ce.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=G1(Mr,t),i=aT(ZE,t),o=U9(ZE,t),a=oT(t);return p.jsx(iT.ItemSlot,{scope:t,children:p.jsx(D9,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":r.orientation,id:i.triggerId,...a,...s,ref:e})})});FF.displayName=ZE;var BF="AccordionContent",$F=Ce.forwardRef((n,e)=>{const{__scopeAccordion:t,...s}=n,r=G1(Mr,t),i=aT(BF,t),o=oT(t);return p.jsx(I9,{role:"region","aria-labelledby":i.triggerId,"data-orientation":r.orientation,...o,...s,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...n.style}})});$F.displayName=BF;function VF(n){return n?"open":"closed"}var K9=RF,X9=DF,Y9=OF,zF=FF,UF=$F;const Q9=K9,HF=Ce.forwardRef(({className:n,...e},t)=>p.jsx(X9,{ref:t,className:Rr("border-b",n),...e}));HF.displayName="AccordionItem";const GF=Ce.forwardRef(({className:n,children:e,...t},s)=>p.jsx(Y9,{className:"flex",children:p.jsxs(zF,{ref:s,className:Rr("tran-accordion-trigger flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",n),...t,children:[e,p.jsx("span",{className:"trigger-line","aria-hidden":"true"}),p.jsx(x5,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));GF.displayName=zF.displayName;const WF=Ce.forwardRef(({className:n,children:e,...t},s)=>p.jsx(UF,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...t,children:p.jsx("div",{className:Rr("pb-4 pt-0",n),children:e})}));WF.displayName=UF.displayName;const J9={Direccin:{name:"Gilberto Corrales",bio:"Director, dramaturgo y actor. Licenciado en Teatro por la Facultad de Artes de la UABC, ha dirigido ms de cuarenta obras, la mayora de su autora. Su trabajo explora la transdisciplina y la investigacin del lenguaje escnico. Fundador de Incendio Producciones, sus obras han estado presentes en la Muestra Nacional de Teatro y en festivales de Colombia, Argentina y EE.UU. Ganador del Premio Juventud 2016 y del FITU UNAM. Dirige el Contagio Tijuana y colabora con artistas como Jorge Ballina y Daniel Primo.",image:"/images/placeholder-direccion.jpg"},Dramaturgia:{name:"Carlos A. Prez H.",bio:"Artista transmedial, autor y dramaturgo. Su obra habita entre teatro, escritura y tecnologa, proponiendo una potica crtica y humana. Formado en el ITESO, la Universidad de Salamanca y LABASAD Barcelona, integra astrologa psicolgica, cuerpo y arte digital en una mirada simblica. Creador del universo transmedia #GatoEncerrado, concibe el acto creativo como una forma de acompaamiento y transformacin.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlos_perez.gif"},Elenco:{description:"Actores y actrices que encarnan el pulso emocional de la obra desde la fisicalidad, la voz y la presencia simblica.",members:[{name:"Ricardo Mrquez Salgado",role:"Intrprete",bio:"Comuniclogo, modelo y actor. Ha participado en teatro, cine y publicidad. Destacan sus coprotagnicos en 'Ideas para no morir en el anonimato' y 'Entre Dos'. Su presencia combina energa escnica y precisin esttica.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/ricardo.jpg"},{name:"Cynthia Teresa Rodrguez Aguirre",role:"Intrprete",bio:"Artista interdisciplinaria egresada de la UABC. Su prctica integra fotografa, escritura y teatro. Ha participado en el San Diego Fringe Festival y en montajes de Incendio Producciones. Actualmente se enfoca en la direccin escnica y la exploracin visual.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/cyndi.jpg"},{name:"Mariana de los Santos",role:"Intrprete",bio:"Actriz tijuanense formada en CEART y con experiencia en cine y teatro contemporneo. Su trabajo corporal revela una sensibilidad potica que dialoga entre lo ntimo y lo colectivo.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/mariana.jpg"},{name:"Carlos Valdez Rosas",role:"Intrprete",bio:"Actor y productor de Incendio Producciones. Su trabajo combina performance, posdrama e interdisciplina. Ha participado en la Muestra Nacional de Teatro y festivales internacionales en Argentina y Estados Unidos.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/carlitos.jpg"}]},"Diseo y Tcnica Escnica":{description:"Un equipo de diseadores y tcnicos escnicos que entrelazan arquitectura, multimedia, sonido y luz para expandir la atmsfera de la obra.",members:[{name:"Jorge Ballina",role:"Escenografa",bio:"Arquitecto y escengrafo con ms de 120 obras en teatro, danza y pera. Miembro del Sistema Nacional de Creadores de Arte, ha sido galardonado con premios internacionales como el World Stage Design Toronto y Calgary. Su trabajo combina estructura y poesa visual.",image:"/images/placeholder-diseno.jpg"},{name:"Daniel Primo",role:"Video Escenogrfico e Iluminacin",bio:"Artista visual y diseador escnico. Explora la relacin entre multimedia y espacio escnico. Integrante del Sistema Nacional de Creadores, su trabajo ha sido presentado en Europa, Asia y Amrica. Cofundador de Engranaje Invertebrado.",image:"/images/placeholder-diseno.jpg"},{name:"La Prez",role:"Diseo Sonoro",bio:"Artista sonora con ms de doce aos de experiencia. Fundadora de Concrete Sounds, ha colaborado en filmes como 'Ya no estoy aqu' y 'Monos'. Su especialidad es la creacin de paisajes inmersivos que amplan la dimensin sensorial del teatro.",image:"/images/placeholder-diseno.jpg"},{name:"Harold Garca",role:"Direccin Tcnica",bio:"Arquitecto y diseador lumnico. Ha colaborado en producciones como 'Matilda', 'Mamma Mia!' y 'Madame Butterfly'. Su trabajo abarca teatro, pera y danza contempornea, con presentaciones en Mxico, Los ngeles y festivales nacionales.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/harold.jpg"},{name:"Rebeca Hernndez",role:"Realizacin Escenogrfica",bio:"Diseadora industrial egresada del CIDI-UNAM y fundadora de Atelier RHC en Tijuana. Su taller produce escenografas, mobiliario y piezas funcionales para teatro y espacios pblicos, uniendo tcnica artesanal con visin contempornea.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/rebeca.jpg"},{name:"Ximena Inurreta",role:"Asistente de Diseo de Escenografa",bio:"Diseadora escnica emergente que apoya el desarrollo de atmsferas visuales y transiciones espaciales en el montaje de #GatoEncerrado.",image:"/images/placeholder-diseno.jpg"},{name:"Diego Madera",role:"Tema Musical",bio:"Msico y compositor cuyo trabajo explora la tensin entre sonido y silencio. Su pieza original acompaa los pasajes emocionales de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/diego.png"},{name:"Karla Flores",role:"Realizacin de Vestuario",bio:"Diseadora de vestuario que traduce emociones en textura, movimiento y color. Su trabajo aporta profundidad simblica a la corporalidad de los intrpretes.",image:"/images/placeholder-diseno.jpg"},{name:"Jonathan Lazcano",role:"Pelucas",bio:"Artista de caracterizacin. Su trabajo artesanal da vida y coherencia visual a los personajes a travs del detalle y la textura.",image:"/images/placeholder-diseno.jpg"}]},"Produccin y Asistencia":{description:"Un equipo que coordina, articula y acompaa cada engranaje de la produccin escnica con mirada sensible, tcnica y humana.",members:[{name:"Miroslava Wilson",role:"Produccin Ejecutiva",bio:"Productora ejecutiva, directora y asesora de movimiento. Originaria de Hermosillo y radicada en Tijuana, es fundadora de Pndulo Cero A.C. y educadora de movimiento somtico certificada por Body Mind Movement. Su trabajo interdisciplinario vincula arte, medio ambiente y humanismo. Ha presentado su obra en Asia, Amrica y Europa, y actualmente impulsa proyectos como Casa Viva y SomasSomos.",image:"/images/placeholder-produccion.jpg"},{name:"Marcela Durn Mulia",role:"Produccin Administrativa",bio:"Actriz, gestora y representante legal de Incendio Producciones. Licenciada en Comunicacin (UABC) y Maestra en Alta Direccin Corporativa (Humanitas). Ha participado en la Muestra Nacional de Teatro, ENARTES y otros festivales internacionales. Su mirada estratgica une la gestin cultural con la sensibilidad artstica.",image:"/images/placeholder-colaboradores.jpg"},{name:"Rosala Hernndez Milln",role:"Produccin General y Vinculacin Social",bio:"Presidenta de Isabel A.C. Ayuda para la Vida, Maestra en Psicobiologa y Neurociencia Cognitiva (UAB). Su labor impulsa la integracin entre arte y bienestar emocional, fortaleciendo el puente entre el proyecto escnico y la comunidad.",image:"/images/placeholder-colaboradores.jpg"},{name:"Gabriel Monroy",role:"Asistencia de Direccin y Gestin",bio:"Actor, fotgrafo escnico y gestor. Licenciado en Artes Escnicas por la Universidad de Sonora. Creador de la serie fotogrfica 'Reflejos de la escena', exhibida internacionalmente. Su mirada visual y su acompaamiento escnico fortalecen el proceso de direccin.",image:"/images/placeholder-colaboradores.jpg"},{name:"Roco Morgn",role:"Asistencia Ejecutiva",bio:"Gestora cultural y apoyo logstico de produccin. Su labor sostiene los procesos administrativos y humanos que hacen posible la operacin cotidiana de la obra.",image:"https://ytubybkoucltwnselbhc.supabase.co/storage/v1/object/public/equipo/audio/rocio.png"}]},"Colaboradores y Agradecimientos":{description:"Detrs de cada funcin existe una constelacin de manos, miradas y corazones que hacen posible el universo escnico de #GatoEncerrado. Este bloque celebra su labor silenciosa y luminosa.",members:[{name:"Isabel Ayuda para la Vida A.C.",role:"",bio:"Asociacin civil sin fines de lucro fundada en 2018 y dirigida por Rosala Hernndez Milln. Su misin es prevenir la violencia autoinfligida mediante el programa DySVAE, promoviendo el pedir ayuda como estrategia de vida. Colabora con #GatoEncerrado para visibilizar la salud emocional y la empata en contextos artsticos y educativos.",image:"/images/placeholder-institucional.jpg"}],details:{tecnicos:"Asistencia tcnica y tramoya: Renee Camacho  asistencia tcnica y tramoya. Luis Fernando Lpez Snchez, Alex Nava, Christian Camacho  equipo de realizacin de escenografa. Marco Antonio Corral Gastelm, Manuel Axxel Aquino, Santiago Augusto Rodrguez, Alejandro Saldaa  realizadores y tramoya.",registro:"Registro, foto y medios: Viviana Gonzlez  registro creativo videogrfico. Sergio Brown  registro audiovisual. Enigma Creative  publicidad y diseo grfico. Eclipse Comunicacin Estratgica  difusin y medios.",institucionales:"Apoyos institucionales: Agradecimiento a Teatro CAMAFEO y sus productoras Margarita Martnez de Camarena y Elsa Prez de Vargas; CEART Tijuana, IMAC, Casa Viva y Adagio Studio por su apoyo en ensayos y espacios."}}},Z9=()=>{const n=e=>Array.isArray(e==null?void 0:e.members)?p.jsxs("div",{className:"space-y-6",children:[e.description&&p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light mb-2 md:text-base sm:text-sm",children:e.description}),p.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:e.members.map((t,s)=>p.jsxs("div",{className:"glass-effect rounded-xl p-5 flex gap-4 items-start border border-white/5",children:[p.jsx("img",{className:"h-20 w-20 flex-shrink-0 rounded-full object-cover shadow-lg shadow-black/30",src:t.image,alt:`Retrato de ${t.name}`}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h4",{className:"font-display text-lg text-purple-200",children:t.name}),t.role&&p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-purple-300/70",children:t.role}),t.bio&&p.jsx("p",{className:"text-sm md:text-base sm:text-sm text-slate-300/80 leading-relaxed",children:t.bio}),t.url&&p.jsx("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-purple-200 transition hover:text-purple-100 underline-offset-4",children:t.urlLabel??"Ver perfil"})]})]},t.name+s))}),e.details&&p.jsxs("div",{className:"text-slate-400 text-sm leading-relaxed space-y-4",children:[p.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.tecnicos}),p.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.registro}),p.jsx("div",{className:"border-t border-white/10 pt-4",children:e.details.institucionales})]})]}):p.jsxs("div",{className:"grid md:grid-cols-3 gap-6 items-center",children:[p.jsx("div",{className:"md:col-span-1",children:p.jsx("img",{className:"w-full h-48 object-cover rounded-lg shadow-lg shadow-black/30",alt:`Retrato de ${e.name}`,src:e.image})}),p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("h3",{className:"font-display text-xl font-bold text-purple-300 mb-2",children:e.name}),p.jsx("p",{className:"text-slate-300/80 leading-relaxed font-light md:text-base sm:text-sm",children:e.bio})]})]});return p.jsxs("section",{id:"team",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Equipo Creativo"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light md:text-base sm:text-sm",children:"Un colectivo de artistas multidisciplinarios unidos por la pasin de crear experiencias teatrales que desafan los lmites del arte escnico y la empata."})]}),p.jsx(J.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2,ease:"easeOut"},viewport:{once:!0},className:"max-w-4xl mx-auto",children:p.jsx(Q9,{type:"single",collapsible:!0,className:"w-full space-y-4",children:Object.entries(J9).map(([e,t],s)=>p.jsxs(HF,{value:`item-${s}`,className:"glass-effect rounded-lg border-none overflow-hidden",children:[p.jsx(GF,{className:"font-display text-xl md:text-2xl text-slate-100 p-6 hover:no-underline hover:bg-white/5 transition-colors duration-300",children:e}),p.jsx(WF,{className:"p-6 pt-0 bg-black/20",children:n(t)})]},e))})})]})]})};async function e7(){const n="galeria de gatoencerrado";try{const{data:e,error:t}=await nt.storage.from(n).list("",{limit:100,offset:0,sortBy:{column:"name",order:"desc"}});return t?(console.error("Error al listar imgenes:",t.message),[]):e.filter(r=>r.name.match(/\.(jpg|jpeg|png|webp)$/i)).map(r=>{const i=nt.storage.from(n).getPublicUrl(r.name).data.publicUrl;return{id:r.id||r.name,imgSrc:i,alt:r.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," "),postUrl:i}})}catch(e){return console.error("Excepcin al obtener imgenes del bucket:",e),[]}}const yv=[{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.8deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-2 lg:rotate-[0.3deg]",frame:"shadow-[14px_14px_0_rgba(167,139,250,0.14)]",tint:"from-purple-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:translate-y-3 lg:rotate-[0.9deg]",frame:"shadow-[12px_12px_0_rgba(129,140,248,0.14)]",tint:"from-indigo-400/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-2",frame:"shadow-[11px_11px_0_rgba(248,113,113,0.15)]",tint:"from-rose-400/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-2 sm:row-span-3 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-4",offset:"lg:translate-y-2 lg:-rotate-[1.6deg]",frame:"shadow-[16px_16px_0_rgba(251,191,36,0.14)]",tint:"from-amber-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-3 sm:row-span-2 md:col-span-3 md:row-span-2 lg:col-span-3 lg:row-span-2",offset:"lg:-translate-y-4 lg:rotate-[-0.7deg]",frame:"shadow-[13px_13px_0_rgba(45,212,191,0.15)]",tint:"from-teal-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-2 lg:col-span-2 lg:row-span-2",offset:"lg:translate-y-3 lg:rotate-[0.6deg]",frame:"shadow-[12px_12px_0_rgba(148,163,184,0.16)]",tint:"from-slate-300/12 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-4 lg:row-span-4",offset:"lg:-translate-y-2 lg:rotate-[0.4deg]",frame:"shadow-[16px_16px_0_rgba(110,231,183,0.12)]",tint:"from-emerald-300/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-2 md:col-span-2 md:row-span-3 lg:col-span-2 lg:row-span-3",offset:"lg:translate-y-2 lg:-rotate-[0.9deg]",frame:"shadow-[13px_13px_0_rgba(244,162,97,0.13)]",tint:"from-orange-300/16 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-4 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-4",offset:"lg:-translate-y-3 lg:rotate-[0.7deg]",frame:"shadow-[17px_17px_0_rgba(164,196,248,0.14)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-3",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-yellow-300/15 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-2 sm:col-span-2 sm:row-span-3 md:col-span-3 md:row-span-3 lg:col-span-3 lg:row-span-3",offset:"lg:-translate-y-1 lg:rotate-[1deg]",frame:"shadow-[15px_15px_0_rgba(153,246,228,0.12)]",tint:"from-teal-200/14 via-transparent to-slate-950/0"},{grid:"col-span-2 row-span-3 sm:col-span-3 sm:row-span-3 md:col-span-2 md:row-span-4 lg:col-span-2 lg:row-span-4",offset:"lg:-translate-y-4 lg:-rotate-[1.1deg]",frame:"shadow-[20px_20px_0_rgba(203,213,225,0.13)]",tint:"from-slate-200/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.3deg]",frame:"shadow-[31px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"},{grid:"col-span-3 row-span-2 sm:col-span-4 sm:row-span-2 md:col-span-4 md:row-span-2 lg:col-span-5 lg:row-span-2",offset:"lg:translate-y-1 lg:-rotate-[0.33deg]",frame:"shadow-[11px_11px_0_rgba(250,204,21,0.15)]",tint:"from-sky-300/18 via-transparent to-slate-950/0"}],t7=[{match:"Copia de Foto 1 (1)",patternIndex:0,story:"Corte al vaco"},{match:"PoloyEstela",patternIndex:1,story:"Microclimas invisibles"},{match:"Copia de Foto 4",patternIndex:2,story:"Un nmero interminable"},{match:"Copia de Foto 3 (1)",patternIndex:3,story:"Memoria desdoblada"},{match:"Pausa entre actos",patternIndex:4,story:"Coreografa de luces"},{match:"Copia de Foto 4 (1)",patternIndex:5,story:"Confesin en penumbra"},{match:"_V7M6314",patternIndex:6,story:"Ritual previo al acto"},{match:"_V7M6296",patternIndex:7,story:"Risa entre grietas"},{match:"_V7M6348",patternIndex:8,story:"La jaula bajo la mesa"},{match:"Xanadu",patternIndex:9,story:"Voz que no se nombra"},{match:"_V7M6281",patternIndex:10,story:"El pliegue del vestido"},{match:"_V7M6324",patternIndex:11,story:"La cuerda floja"},{match:"_V7M6329",patternIndex:12,story:"Luz que acusa"},{match:"Copia de Foto 5 (1)",patternIndex:13,story:"Un eco sin dueo"},{match:"DSC02497",patternIndex:14,story:"Vestigio de sombras"}],Pu=["Vestigio de sombras"],n7=()=>{const[n,e]=A.useState([]),[t,s]=A.useState(null),r="https://www.instagram.com/esungatoencerrado/?hl=en",i=15,[o,a]=A.useState(null),c=A.useRef(null),u=A.useRef(null),[d,h]=A.useState([]),f=A.useRef(0),m=A.useRef([]),y=A.useCallback((D,z)=>{if(!z)return!1;const I=`${D.alt||""} ${D.imgSrc||""}`.toLowerCase();return Array.isArray(z)?z.some(R=>I.includes(String(R).toLowerCase())):I.includes(String(z).toLowerCase())},[]),g=A.useCallback(D=>["susurro de vestuario","foto 2"].some(I=>y(D,I)),[y]);A.useEffect(()=>{(async()=>{try{const z=await e7();e(z)}catch(z){console.error("Error al traer imgenes del bucket:",z),s("No se pudieron cargar las imgenes del bucket.")}})()},[]),A.useEffect(()=>{if(n.length===0){h([]),f.current=0,m.current=[];return}const D=n.map(($,V)=>({post:$,originalIndex:V})).filter(({post:$})=>!g($));if(D.length===0){h([]),f.current=0,m.current=[];return}const z=new Set,I=[];t7.forEach($=>{const V=D.findIndex((W,q)=>!z.has(q)&&y(W.post,$.match));if(V!==-1){const W=D[V];z.add(V),I.push({postIndex:W.originalIndex,patternIndex:$.patternIndex??I.length%yv.length,story:$.story??Pu[I.length%Pu.length]})}});const R=D.map(($,V)=>({...$,idx:V})).filter(({idx:$})=>!z.has($)).map(($,V)=>({postIndex:$.originalIndex,patternIndex:(I.length+V)%yv.length,story:Pu[(I.length+V)%Pu.length]})),j=[...I,...R];if(m.current=j,j.length===0){h([]),f.current=0;return}const O=Math.min(i,j.length),B=j.slice(0,O).map(($,V)=>({slotId:`${Date.now()}-${V}-${$.postIndex}-${Math.random()}`,postIndex:$.postIndex,patternIndex:$.patternIndex,story:$.story}));h(B),f.current=j.length>0?O%j.length:0},[n,i,y,g]);const w=D=>{window.open(D,"_blank","noopener,noreferrer")},v=A.useCallback(D=>{c.current=document.activeElement,a(D)},[]),b=A.useCallback(()=>{a(null),c.current&&typeof c.current.focus=="function"&&c.current.focus()},[]),_=A.useCallback(()=>{a(D=>D===null?D:(D-1+n.length)%n.length)},[n.length]),E=A.useCallback(()=>{a(D=>D===null?D:(D+1)%n.length)},[n.length]);A.useEffect(()=>{if(o===null)return;const D=z=>{z.key==="Escape"&&b(),z.key==="ArrowLeft"&&_(),z.key==="ArrowRight"&&E()};return window.addEventListener("keydown",D),()=>window.removeEventListener("keydown",D)},[o,b,_,E]);const k=o!==null,T=k&&n[o]?n[o]:null,P=n.length,N=o!==null?o:0,M=P>0?(N+1)/P*100:0;A.useEffect(()=>{k&&u.current&&u.current.focus()},[k]);const L={hidden:{opacity:0,y:40,scale:.95},visible:{opacity:1,y:0,scale:1,transition:{duration:.55,ease:"easeOut"}},exit:{opacity:0,y:-30,scale:.94,transition:{duration:.4,ease:"easeInOut"}}},F=A.useCallback((D,z)=>{if(!z||n.length<=i)return;const I=typeof window<"u"?window.innerHeight:0,R=z.boundingClientRect.bottom<=0,j=I?z.boundingClientRect.top>=I:!1;!R&&!j||h(O=>{if(!Array.isArray(O)||O.length===0)return O;const B=[...O],$=new Set(B.filter((se,pe)=>pe!==D).map(se=>se.postIndex)),V=m.current;if(!V||V.length===0)return O;let W=f.current??0,q=0;for(;q<V.length&&$.has(V[W].postIndex);)W=(W+1)%V.length,q+=1;if(q>=V.length)return O;const K=V[W];return f.current=(W+1)%V.length,B[D]={slotId:`${Date.now()}-${D}-${K.postIndex}-${Math.random()}`,postIndex:K.postIndex,patternIndex:K.patternIndex,story:K.story},B})},[n.length,i]);return p.jsxs("section",{id:"instagram",className:"py-20 relative",children:[p.jsx("div",{className:"section-divider mb-20"}),p.jsxs("div",{className:"container mx-auto px-5 sm:px-6",children:[p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.75,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-14",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-5 text-gradient italic",children:"Memoria Escnica"}),p.jsx("p",{className:"text-base md:text-lg text-slate-300/75 max-w-3xl mx-auto leading-relaxed mb-7 font-light",children:"Fragmentos de lo que solo sucede en escena Un homenaje visual al trabajo colectivo detrs de #GatoEncerrado: las funciones, los cuerpos, los silencios, las luces lo que solo existe cuando alguien lo mira."}),p.jsxs(Ae,{onClick:()=>w(r),className:"bg-gradient-to-r from-pink-600/80 via-purple-600/80 to-indigo-600/80 hover:from-pink-600 hover:to-purple-600 text-white px-7 py-3 rounded-full font-semibold flex items-center gap-2 mx-auto hover-glow",children:[p.jsx(nk,{size:20}),"Seguir @esungatonecerrado",p.jsx(C5,{size:16})]})]}),t&&p.jsxs("div",{className:"flex items-center justify-center gap-3 p-4 mb-6 text-center text-red-400 bg-red-900/20 rounded-lg",children:[p.jsx(g5,{size:22}),p.jsx("p",{children:t})]}),d.length>0?p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 lg:grid-cols-8 auto-rows-[95px] sm:auto-rows-[110px] md:auto-rows-[130px] lg:auto-rows-[150px] gap-2 md:gap-3 lg:gap-3.5",children:p.jsx(bo,{mode:"popLayout",children:d.map((D,z)=>{const I=n[D.postIndex];if(!I)return null;const R=yv[D.patternIndex%yv.length],j=D.story??Pu[(z+D.postIndex)%Pu.length];return p.jsx(J.button,{type:"button",layout:!0,variants:L,initial:"hidden",animate:"visible",exit:"exit",viewport:{amount:.5,once:!1},onViewportLeave:O=>F(z,O),onClick:()=>v(D.postIndex),onKeyDown:O=>{O.key==="Enter"&&v(D.postIndex)},className:`group relative isolate flex h-full w-full cursor-pointer items-stretch focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-400/60 ${R.grid}`,children:p.jsx("div",{className:`relative h-full w-full transition-transform duration-300 ease-out ${R.offset}`,children:p.jsxs(J.div,{layout:!0,variants:L,initial:"hidden",whileInView:"visible",viewport:{amount:.6,once:!1},whileHover:{translateY:-6},transition:{duration:.35,ease:"easeOut"},className:`relative flex h-full w-full overflow-hidden rounded-[20px] bg-slate-950/70 backdrop-blur-sm ${R.frame}`,children:[p.jsx("span",{className:`pointer-events-none absolute inset-0 bg-gradient-to-br ${R.tint}`,"aria-hidden":"true"}),p.jsx(J.img,{src:I.imgSrc,alt:I.alt||"Recuerdo #GatoEncerrado",className:"absolute inset-0 h-full w-full object-cover",loading:"lazy",initial:{scale:1.02,y:0,opacity:1},whileHover:{scale:1.06},transition:{duration:.35,ease:"easeOut"}}),p.jsxs("div",{className:"relative flex h-full flex-col justify-between p-3 md:p-4",children:[p.jsx("div",{className:"text-[0.58rem] uppercase tracking-[0.3em] text-slate-200/75 mix-blend-screen",children:"#GatoEncerrado"}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsx("div",{className:"w-8 md:w-10 border-t border-slate-200/30"}),p.jsx("p",{className:"text-[0.8rem] md:text-sm font-light text-slate-50/90 max-w-[10rem] md:max-w-[10.5rem] leading-relaxed drop-shadow-[0_10px_22px_rgba(15,23,42,0.6)]",children:j})]})]})]})})},D.slotId)})})}):!t&&p.jsx("div",{className:"text-center text-slate-400 animate-pulse italic",children:p.jsx("p",{children:"Cargando recuerdos..."})}),p.jsx(bo,{children:k&&T&&p.jsxs(J.div,{className:"fixed inset-0 z-50 flex items-center justify-center px-6",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[p.jsx(J.div,{className:"absolute inset-0 bg-slate-950/80",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:b}),p.jsxs(J.div,{className:"relative z-10 w-full max-w-5xl overflow-hidden rounded-[28px] bg-slate-900/90 backdrop-blur-xl shadow-2xl",role:"dialog","aria-modal":"true","aria-label":"Recuerdo ampliado",initial:{scale:.92,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.92,opacity:0},transition:{type:"spring",stiffness:220,damping:26},children:[p.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:items-center md:gap-6",children:[p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between text-slate-300/90",children:[p.jsx("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-300/70",children:"#GatoEncerrado"}),p.jsxs("span",{className:"text-xs font-medium tracking-wide",children:[P>0?`${N+1}`:"0",p.jsxs("span",{className:"text-slate-400/80",children:["/",P]})]})]}),p.jsx("div",{className:"mt-3 h-2 rounded-full bg-white/10 overflow-hidden",children:p.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-pink-400 via-purple-400 to-indigo-400 transition-all duration-500",style:{width:`${M}%`},"aria-hidden":"true"})})]}),p.jsxs("div",{className:"flex items-center gap-3 self-start md:self-center",children:[p.jsx("button",{"aria-label":"Anterior",onClick:_,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(w5,{size:20})}),p.jsx("button",{"aria-label":"Siguiente",onClick:E,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(S5,{size:20})}),p.jsx("button",{ref:u,"aria-label":"Cerrar",onClick:b,className:"flex h-11 w-11 items-center justify-center rounded-full border border-white/20 text-white transition hover:bg-white/10",children:p.jsx(b1,{size:18})})]})]}),p.jsx("div",{className:"relative aspect-[3/2] w-full bg-black",children:p.jsx("img",{src:T.imgSrc,alt:T.alt||"Recuerdo #GatoEncerrado",className:"h-full w-full object-contain"})})]})]},"gallery-modal")})]})]})},s7=()=>{const[n,e]=A.useState(!1),[t,s]=A.useState("preventa"),r=A.useCallback(o=>{s(o),e(!0)},[]),i=A.useCallback(()=>{e(!1)},[]);return p.jsxs(p.Fragment,{children:[p.jsxs("section",{id:"next-show",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsx("div",{className:"container mx-auto px-6",children:p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8 md:p-12 text-center overflow-hidden",children:[p.jsxs("div",{className:"relative z-10",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-4 text-gradient italic",children:"Prxima Funcin"}),p.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[p.jsx(ek,{size:24,className:"text-purple-300"}),p.jsx("span",{className:"font-display text-2xl md:text-3xl text-slate-100 font-semibold",children:"28 de Diciembre"})]}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-2xl mx-auto leading-relaxed mb-8 italic font-light",children:'"En el Da de los Santos Inocentes, te invitamos a dudar de todo, incluso de lo que crees ver en escena. Quizs la mayor inocentada es pensar que algo es real."'}),p.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:p.jsxs(Ae,{onClick:()=>r("preventa"),className:"bg-gradient-to-r from-orange-500/90 via-rose-500/90 to-pink-500/90 hover:from-orange-400 hover:to-pink-400 text-white px-6 py-3 rounded-full font-semibold flex items-center gap-2 shadow-lg shadow-orange-500/40 transition",children:[p.jsx(rk,{size:20}),"Compra tu boleto"]})})]}),p.jsx("div",{className:"absolute -top-20 -left-20 w-64 h-64 bg-purple-900/20 rounded-full blur-3xl animate-pulse"}),p.jsx("div",{className:"absolute -bottom-20 -right-20 w-64 h-64 bg-blue-900/20 rounded-full blur-3xl animate-pulse animation-delay-2000"})]})})]}),p.jsx(Fk,{open:n,onClose:i,initialInterest:t})]})},r7=()=>{const[n,e]=A.useState({name:"",email:"",message:""}),[t,s]=A.useState("idle"),[r,i]=A.useState(""),o="https://www.instagram.com/esungatoencerrado/?hl=en",a="https://x.com/SilvestreFilis",c="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",u=A.useCallback(async f=>{if(f.preventDefault(),t==="loading")return;const m=n.name.trim(),y=n.email.trim(),g=n.message.trim();if(!m||!y||!g){Te({description:"Completa nombre, email y mensaje antes de enviar."});return}s("loading"),i("");try{const{error:w}=await nt.functions.invoke("send-contact-message",{body:{name:m,email:y.toLowerCase(),message:g}});if(w)throw w;try{const{error:v}=await nt.from("backstage_inbox").insert({name:m,email:y.toLowerCase(),subject:"Contacto pblico",message:g,meta:{route:"contact"}});v&&console.error("[Contact] No se pudo duplicar en backstage_inbox:",v)}catch(v){console.error("[Contact] Excepcin duplicando en backstage_inbox:",v)}s("success"),e({name:"",email:"",message:""}),Te({description:"Recibimos tu mensaje y te escribiremos pronto."})}catch(w){console.error("[Contact] Error enviando mensaje:",w),s("error"),i("No pudimos enviar tu mensaje. Intenta de nuevo ms tarde."),Te({description:"No pudimos enviar tu mensaje. Intenta de nuevo."})}},[n,t]),d=()=>{Te({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},h=f=>{f?window.open(f,"_blank","noopener,noreferrer"):Te({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})};return p.jsxs("section",{id:"contact",className:"py-24 relative",children:[p.jsx("div",{className:"section-divider mb-24"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs(J.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"text-center mb-16",children:[p.jsx("h2",{className:"font-display text-4xl md:text-5xl font-medium mb-6 text-gradient italic",children:"Contacto, Prensa & Crditos"}),p.jsx("p",{className:"text-lg text-slate-300/80 max-w-3xl mx-auto leading-relaxed font-light",children:"Para colaboraciones, entrevistas o simplemente para compartir tus teoras. Aqu cae el teln, pero la conversacin contina."})]}),p.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[p.jsxs(J.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"glass-effect rounded-2xl p-8",children:[p.jsx("h3",{className:"font-display text-2xl font-medium text-slate-100 mb-8",children:"Envanos un Mensaje"}),p.jsxs("form",{onSubmit:u,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Nombre"}),p.jsx("input",{name:"name",type:"text",value:n.name,onChange:f=>e(m=>({...m,name:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"Tu nombre"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Email"}),p.jsx("input",{name:"email",type:"email",value:n.email,onChange:f=>e(m=>({...m,email:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400",placeholder:"tu@email.com"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-300/80 text-sm font-medium mb-2",children:"Mensaje"}),p.jsx("textarea",{name:"message",rows:5,value:n.message,onChange:f=>e(m=>({...m,message:f.target.value})),className:"w-full px-4 py-3 bg-black/30 border border-slate-100/20 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:border-purple-400 focus:ring-1 focus:ring-purple-400 resize-none",placeholder:"Cuntanos ms..."})]}),t==="error"&&p.jsx("div",{className:"rounded-lg border border-red-500/60 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:r}),t==="success"&&p.jsx("div",{className:"rounded-lg border border-emerald-500/60 bg-emerald-500/10 px-4 py-3 text-sm text-emerald-200",children:"Tu mensaje lleg. Te escribiremos a la brevedad."}),p.jsxs(Ae,{type:"submit",disabled:t==="loading",className:"w-full bg-gradient-to-r from-purple-600/80 to-indigo-600/80 hover:from-purple-600 hover:to-indigo-600 text-white py-3 rounded-lg font-semibold flex items-center justify-center gap-2 hover-glow",children:[p.jsx(L5,{size:20}),t==="loading"?"Enviando":"Enviar"]})]})]}),p.jsxs(J.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},viewport:{once:!0},className:"space-y-8",children:[p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Redes Sociales"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Ae,{onClick:()=>h(o),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(nk,{size:24})}),p.jsx(Ae,{onClick:()=>h(a),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(Jj,{size:24})}),p.jsx(Ae,{onClick:()=>h(c),variant:"ghost",size:"icon",className:"text-slate-400 hover:text-white",children:p.jsx(Kj,{size:24})})]})]}),p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Kit de Prensa"}),p.jsx("p",{className:"text-slate-300/70 mb-4 font-light",children:"Descarga nuestro kit de prensa con imgenes en alta resolucin, dossier y ms."}),p.jsxs(Ae,{onClick:d,variant:"outline",className:"border-purple-400/50 text-purple-300 hover:bg-purple-500/20 hover:border-purple-400",children:[p.jsx(E5,{size:18,className:"mr-2"}),"Descargar Kit"]})]}),p.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[p.jsx("h3",{className:"font-display text-xl font-medium text-slate-100 mb-4",children:"Crditos Finales"}),p.jsxs("p",{className:"text-slate-300/70 text-sm leading-relaxed font-light",children:["Una produccin de ",p.jsx("span",{className:"text-slate-200",children:"#GatoEncerrado"}),".",p.jsx("br",{}),"Con el apoyo de ",p.jsx("span",{className:"text-slate-200",children:"Isabel Ayuda para la Vida, A.C."}),".",p.jsx("br",{}),"Agradecimientos especiales a todos los que creyeron en esta locura."]})]})]})]})]})]})},i7=()=>{const n="https://www.instagram.com/esungatoencerrado/?hl=en",e="https://x.com/SilvestreFilis",t="https://www.facebook.com/share/16pHNpZjpM/?mibextid=wwXIfr",s=i=>{i?window.open(i,"_blank","noopener,noreferrer"):Te({description:" Esta funcin no est implementada anpero no te preocupes! Puedes solicitarla en tu prximo prompt! "})},r=i=>{const o=document.querySelector(i);o&&o.scrollIntoView({behavior:"smooth"})};return p.jsxs("footer",{className:"relative py-16 mt-24",children:[p.jsx("div",{className:"section-divider mb-16"}),p.jsxs("div",{className:"container mx-auto px-6",children:[p.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-12",children:[p.jsx("div",{className:"md:col-span-2",children:p.jsxs(J.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-display text-3xl font-medium italic text-gradient mb-4 block",children:"#GatoEncerrado"}),p.jsx("p",{className:"text-slate-400 leading-relaxed mb-6 max-w-md font-light",children:"Una experiencia teatral transmedial que explora los lmites entre la realidad y la ficcin, creando nuevas formas de narrativa artstica."}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>s(n),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(nk,{size:20})}),p.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>s(e),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(Jj,{size:20})}),p.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>s(t),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(Kj,{size:20})}),p.jsx(Ae,{variant:"ghost",size:"icon",onClick:()=>r("#contact"),className:"text-slate-400 hover:text-white hover:bg-white/10",children:p.jsx(k5,{size:20})})]})]})}),p.jsx("div",{children:p.jsxs(J.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Navegacin"}),p.jsx("ul",{className:"space-y-3",children:[{name:"La Obra",href:"#about"},{name:"Equipo",href:"#team"},{name:"Miniversos",href:"#transmedia"},{name:"Textos",href:"#dialogos-criticos"},{name:"Galera",href:"#instagram"},{name:"Funcin",href:"#next-show"}].map(i=>p.jsx("li",{children:p.jsx("button",{onClick:()=>r(i.href),className:"text-slate-400 hover:text-white transition-colors text-sm font-light",children:i.name})},i.name))})]})}),p.jsx("div",{children:p.jsxs(J.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:"easeOut"},viewport:{once:!0},children:[p.jsx("span",{className:"font-semibold text-slate-200 mb-4 block",children:"Contacto"}),p.jsxs("ul",{className:"space-y-3 text-sm font-light",children:[p.jsx("li",{className:"text-slate-400",children:"contacto@gatoencerrado.ai"}),p.jsx("li",{className:"text-slate-400",children:"+52 123 456 789"}),p.jsxs("li",{className:"text-slate-400",children:["#UniversoTransmedial",p.jsx("br",{}),"Tijuana, Mxico"]})]})]})})]}),p.jsxs(J.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3,ease:"easeOut"},viewport:{once:!0},className:"border-t border-white/10 pt-8 flex flex-col md:flex-row justify-between items-center gap-4",children:[p.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," #GatoEncerrado. Todos los derechos reservados."]}),p.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm",children:[p.jsx("span",{children:"Hecho con"}),p.jsx(Yj,{size:16,className:"text-red-500/70"}),p.jsx("span",{children:"para el arte teatral"})]})]})]})]})},o7=()=>{const[n,e]=A.useState([]),[t,s]=A.useState(!0),[r,i]=A.useState(null),o=A.useCallback(async()=>{s(!0),i(null);try{const a=await pG();e(Array.isArray(a)?a:[])}catch(a){console.error("[useBlogPosts] Error al cargar posts:",a),i(a),e([])}finally{s(!1)}},[]);return A.useEffect(()=>{o()},[o]),{posts:n,isLoading:t,error:r,refreshPosts:o}},a7="#GatoEncerrado - Obra de Teatro Transmedial",l7="La historia de alguien que desaparece y deja una huella emocional. Una experiencia teatral nica que explora mltiples formatos transmediales.";function c7(){const n=o7();return A.useEffect(()=>{document.title=a7;let e=document.querySelector('meta[name="description"]');e||(e=document.createElement("meta"),e.setAttribute("name","description"),document.head.appendChild(e)),e.setAttribute("content",l7)},[]),p.jsxs("div",{className:"min-h-screen overflow-x-hidden",children:[p.jsx(VH,{}),p.jsxs("main",{className:"pt-20 lg:pt-24",children:[p.jsx(eG,{}),p.jsx(aG,{}),p.jsx(Z9,{}),p.jsx(T9,{posts:n.posts,isLoading:n.isLoading,error:n.error}),p.jsx(f9,{}),p.jsx(n7,{}),p.jsx(s7,{}),p.jsx(r7,{})]}),p.jsx(i7,{}),p.jsx(b$,{})]})}s_.createRoot(document.getElementById("root")).render(p.jsx(Ce.StrictMode,{children:p.jsx(BH,{children:p.jsx(c7,{})})}));
